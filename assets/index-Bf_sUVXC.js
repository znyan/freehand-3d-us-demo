var Xle=Object.defineProperty;var jle=(n,e,t)=>e in n?Xle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var $le=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var at=(n,e,t)=>jle(n,typeof e!="symbol"?e+"":e,t);var nht=$le((wl,Sl)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function oL(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const zr={},Bg=[],Pi=()=>{},Qle=()=>!1,q4=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),lL=n=>n.startsWith("onUpdate:"),ta=Object.assign,cL=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Zle=Object.prototype.hasOwnProperty,vi=(n,e)=>Zle.call(n,e),Mt=Array.isArray,Ng=n=>oA(n)==="[object Map]",K4=n=>oA(n)==="[object Set]",Zh=n=>oA(n)==="[object Date]",Xt=n=>typeof n=="function",qt=n=>typeof n=="string",eu=n=>typeof n=="symbol",Rn=n=>n!==null&&typeof n=="object",Kb=n=>(Rn(n)||Xt(n))&&Xt(n.then)&&Xt(n.catch),BX=Object.prototype.toString,oA=n=>BX.call(n),Jle=n=>oA(n).slice(8,-1),Yb=n=>oA(n)==="[object Object]",uL=n=>qt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Z2=oL(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Y4=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},ece=/-(\w)/g,So=Y4(n=>n.replace(ece,(e,t)=>t?t.toUpperCase():"")),tce=/\B([A-Z])/g,Sf=Y4(n=>n.replace(tce,"-$1").toLowerCase()),lA=Y4(n=>n.charAt(0).toUpperCase()+n.slice(1)),J2=Y4(n=>n?`on${lA(n)}`:""),Oh=(n,e)=>!Object.is(n,e),z3=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},NX=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},aD=n=>{const e=parseFloat(n);return isNaN(e)?n:e},nce=n=>{const e=qt(n)?Number(n):NaN;return isNaN(e)?n:e};let JN;const X4=()=>JN||(JN=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jt(n){if(Mt(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=qt(i)?ace(i):jt(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(qt(n)||Rn(n))return n}const ice=/;(?![^(]*\))/g,rce=/:([^]+)/,sce=/\/\*[^]*?\*\//g;function ace(n){const e={};return n.replace(sce,"").split(ice).forEach(t=>{if(t){const i=t.split(rce);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function j(n){let e="";if(qt(n))e=n;else if(Mt(n))for(let t=0;t<n.length;t++){const i=j(n[t]);i&&(e+=i+" ")}else if(Rn(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function yl(n){if(!n)return null;let{class:e,style:t}=n;return e&&!qt(e)&&(n.class=j(e)),t&&(n.style=jt(t)),n}const oce="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lce=oL(oce);function OX(n){return!!n||n===""}function cce(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=c1(n[i],e[i]);return t}function c1(n,e){if(n===e)return!0;let t=Zh(n),i=Zh(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=eu(n),i=eu(e),t||i)return n===e;if(t=Mt(n),i=Mt(e),t||i)return t&&i?cce(n,e):!1;if(t=Rn(n),i=Rn(e),t||i){if(!t||!i)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const a in n){const o=n.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!c1(n[a],e[a]))return!1}}return String(n)===String(e)}function UX(n,e){return n.findIndex(t=>c1(t,e))}const zX=n=>!!(n&&n.__v_isRef===!0),Tt=n=>qt(n)?n:n==null?"":Mt(n)||Rn(n)&&(n.toString===BX||!Xt(n.toString))?zX(n)?Tt(n.value):JSON.stringify(n,VX,2):String(n),VX=(n,e)=>zX(e)?VX(n,e.value):Ng(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r],s)=>(t[s5(i,s)+" =>"]=r,t),{})}:K4(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>s5(t))}:eu(e)?s5(e):Rn(e)&&!Mt(e)&&!Yb(e)?String(e):e,s5=(n,e="")=>{var t;return eu(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let co;class HX{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=co,!e&&co&&(this.index=(co.scopes||(co.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=co;try{return co=this,e()}finally{co=t}}}on(){co=this}off(){co=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function uce(n){return new HX(n)}function GX(){return co}function WX(n,e=!1){co&&co.cleanups.push(n)}let Kr;const a5=new WeakSet;class qX{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,co&&co.active&&co.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,a5.has(this)&&(a5.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||YX(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,eO(this),XX(this);const e=Kr,t=Xc;Kr=this,Xc=!0;try{return this.fn()}finally{jX(this),Kr=e,Xc=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)hL(e);this.deps=this.depsTail=void 0,eO(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?a5.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oD(this)&&this.run()}get dirty(){return oD(this)}}let KX=0,eb,tb;function YX(n,e=!1){if(n.flags|=8,e){n.next=tb,tb=n;return}n.next=eb,eb=n}function dL(){KX++}function fL(){if(--KX>0)return;if(tb){let e=tb;for(tb=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;eb;){let e=eb;for(eb=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function XX(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function jX(n){let e,t=n.depsTail,i=t;for(;i;){const r=i.prevDep;i.version===-1?(i===t&&(t=r),hL(i),dce(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}n.deps=e,n.depsTail=t}function oD(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&($X(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function $X(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Xb))return;n.globalVersion=Xb;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!oD(n)){n.flags&=-3;return}const t=Kr,i=Xc;Kr=n,Xc=!0;try{XX(n);const r=n.fn(n._value);(e.version===0||Oh(r,n._value))&&(n._value=r,e.version++)}catch(r){throw e.version++,r}finally{Kr=t,Xc=i,jX(n),n.flags&=-3}}function hL(n,e=!1){const{dep:t,prevSub:i,nextSub:r}=n;if(i&&(i.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=i,n.nextSub=void 0),t.subs===n&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)hL(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function dce(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Xc=!0;const QX=[];function bp(){QX.push(Xc),Xc=!1}function xp(){const n=QX.pop();Xc=n===void 0?!0:n}function eO(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Kr;Kr=void 0;try{e()}finally{Kr=t}}}let Xb=0,fce=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class j4{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Kr||!Xc||Kr===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Kr)t=this.activeLink=new fce(Kr,this),Kr.deps?(t.prevDep=Kr.depsTail,Kr.depsTail.nextDep=t,Kr.depsTail=t):Kr.deps=Kr.depsTail=t,ZX(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=Kr.depsTail,t.nextDep=void 0,Kr.depsTail.nextDep=t,Kr.depsTail=t,Kr.deps===t&&(Kr.deps=i)}return t}trigger(e){this.version++,Xb++,this.notify(e)}notify(e){dL();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{fL()}}}function ZX(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)ZX(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const tC=new WeakMap,q0=Symbol(""),lD=Symbol(""),jb=Symbol("");function Ka(n,e,t){if(Xc&&Kr){let i=tC.get(n);i||tC.set(n,i=new Map);let r=i.get(t);r||(i.set(t,r=new j4),r.map=i,r.key=t),r.track()}}function Vd(n,e,t,i,r,s){const a=tC.get(n);if(!a){Xb++;return}const o=l=>{l&&l.trigger()};if(dL(),e==="clear")a.forEach(o);else{const l=Mt(n),c=l&&uL(t);if(l&&t==="length"){const u=Number(i);a.forEach((d,f)=>{(f==="length"||f===jb||!eu(f)&&f>=u)&&o(d)})}else switch((t!==void 0||a.has(void 0))&&o(a.get(t)),c&&o(a.get(jb)),e){case"add":l?c&&o(a.get("length")):(o(a.get(q0)),Ng(n)&&o(a.get(lD)));break;case"delete":l||(o(a.get(q0)),Ng(n)&&o(a.get(lD)));break;case"set":Ng(n)&&o(a.get(q0));break}}fL()}function hce(n,e){const t=tC.get(n);return t&&t.get(e)}function qm(n){const e=Ki(n);return e===n?e:(Ka(e,"iterate",jb),ac(n)?e:e.map(Ya))}function $4(n){return Ka(n=Ki(n),"iterate",jb),n}const pce={__proto__:null,[Symbol.iterator](){return o5(this,Symbol.iterator,Ya)},concat(...n){return qm(this).concat(...n.map(e=>Mt(e)?qm(e):e))},entries(){return o5(this,"entries",n=>(n[1]=Ya(n[1]),n))},every(n,e){return gd(this,"every",n,e,void 0,arguments)},filter(n,e){return gd(this,"filter",n,e,t=>t.map(Ya),arguments)},find(n,e){return gd(this,"find",n,e,Ya,arguments)},findIndex(n,e){return gd(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return gd(this,"findLast",n,e,Ya,arguments)},findLastIndex(n,e){return gd(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return gd(this,"forEach",n,e,void 0,arguments)},includes(...n){return l5(this,"includes",n)},indexOf(...n){return l5(this,"indexOf",n)},join(n){return qm(this).join(n)},lastIndexOf(...n){return l5(this,"lastIndexOf",n)},map(n,e){return gd(this,"map",n,e,void 0,arguments)},pop(){return Hy(this,"pop")},push(...n){return Hy(this,"push",n)},reduce(n,...e){return tO(this,"reduce",n,e)},reduceRight(n,...e){return tO(this,"reduceRight",n,e)},shift(){return Hy(this,"shift")},some(n,e){return gd(this,"some",n,e,void 0,arguments)},splice(...n){return Hy(this,"splice",n)},toReversed(){return qm(this).toReversed()},toSorted(n){return qm(this).toSorted(n)},toSpliced(...n){return qm(this).toSpliced(...n)},unshift(...n){return Hy(this,"unshift",n)},values(){return o5(this,"values",Ya)}};function o5(n,e,t){const i=$4(n),r=i[e]();return i!==n&&!ac(n)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=t(s.value)),s}),r}const mce=Array.prototype;function gd(n,e,t,i,r,s){const a=$4(n),o=a!==n&&!ac(n),l=a[e];if(l!==mce[e]){const d=l.apply(n,s);return o?Ya(d):d}let c=t;a!==n&&(o?c=function(d,f){return t.call(this,Ya(d),f,n)}:t.length>2&&(c=function(d,f){return t.call(this,d,f,n)}));const u=l.call(a,c,i);return o&&r?r(u):u}function tO(n,e,t,i){const r=$4(n);let s=t;return r!==n&&(ac(n)?t.length>3&&(s=function(a,o,l){return t.call(this,a,o,l,n)}):s=function(a,o,l){return t.call(this,a,Ya(o),l,n)}),r[e](s,...i)}function l5(n,e,t){const i=Ki(n);Ka(i,"iterate",jb);const r=i[e](...t);return(r===-1||r===!1)&&vL(t[0])?(t[0]=Ki(t[0]),i[e](...t)):r}function Hy(n,e,t=[]){bp(),dL();const i=Ki(n)[e].apply(n,t);return fL(),xp(),i}const vce=oL("__proto__,__v_isRef,__isVue"),JX=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(eu));function gce(n){eu(n)||(n=String(n));const e=Ki(this);return Ka(e,"has",n),e.hasOwnProperty(n)}class ej{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(r?s?Tce:rj:s?ij:nj).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=Mt(e);if(!r){let l;if(a&&(l=pce[t]))return l;if(t==="hasOwnProperty")return gce}const o=Reflect.get(e,t,ir(e)?e:i);return(eu(t)?JX.has(t):vce(t))||(r||Ka(e,"get",t),s)?o:ir(o)?a&&uL(t)?o:o.value:Rn(o)?r?Z1(o):Si(o):o}}class tj extends ej{constructor(e=!1){super(!1,e)}set(e,t,i,r){let s=e[t];if(!this._isShallow){const l=im(s);if(!ac(i)&&!im(i)&&(s=Ki(s),i=Ki(i)),!Mt(e)&&ir(s)&&!ir(i))return l?!1:(s.value=i,!0)}const a=Mt(e)&&uL(t)?Number(t)<e.length:vi(e,t),o=Reflect.set(e,t,i,ir(e)?e:r);return e===Ki(r)&&(a?Oh(i,s)&&Vd(e,"set",t,i):Vd(e,"add",t,i)),o}deleteProperty(e,t){const i=vi(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&Vd(e,"delete",t,void 0),r}has(e,t){const i=Reflect.has(e,t);return(!eu(t)||!JX.has(t))&&Ka(e,"has",t),i}ownKeys(e){return Ka(e,"iterate",Mt(e)?"length":q0),Reflect.ownKeys(e)}}class yce extends ej{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const bce=new tj,xce=new yce,Ace=new tj(!0),cD=n=>n,ew=n=>Reflect.getPrototypeOf(n);function wce(n,e,t){return function(...i){const r=this.__v_raw,s=Ki(r),a=Ng(s),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,c=r[n](...i),u=t?cD:e?uD:Ya;return!e&&Ka(s,"iterate",l?lD:q0),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:o?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function tw(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Sce(n,e){const t={get(r){const s=this.__v_raw,a=Ki(s),o=Ki(r);n||(Oh(r,o)&&Ka(a,"get",r),Ka(a,"get",o));const{has:l}=ew(a),c=e?cD:n?uD:Ya;if(l.call(a,r))return c(s.get(r));if(l.call(a,o))return c(s.get(o));s!==a&&s.get(r)},get size(){const r=this.__v_raw;return!n&&Ka(Ki(r),"iterate",q0),Reflect.get(r,"size",r)},has(r){const s=this.__v_raw,a=Ki(s),o=Ki(r);return n||(Oh(r,o)&&Ka(a,"has",r),Ka(a,"has",o)),r===o?s.has(r):s.has(r)||s.has(o)},forEach(r,s){const a=this,o=a.__v_raw,l=Ki(o),c=e?cD:n?uD:Ya;return!n&&Ka(l,"iterate",q0),o.forEach((u,d)=>r.call(s,c(u),c(d),a))}};return ta(t,n?{add:tw("add"),set:tw("set"),delete:tw("delete"),clear:tw("clear")}:{add(r){!e&&!ac(r)&&!im(r)&&(r=Ki(r));const s=Ki(this);return ew(s).has.call(s,r)||(s.add(r),Vd(s,"add",r,r)),this},set(r,s){!e&&!ac(s)&&!im(s)&&(s=Ki(s));const a=Ki(this),{has:o,get:l}=ew(a);let c=o.call(a,r);c||(r=Ki(r),c=o.call(a,r));const u=l.call(a,r);return a.set(r,s),c?Oh(s,u)&&Vd(a,"set",r,s):Vd(a,"add",r,s),this},delete(r){const s=Ki(this),{has:a,get:o}=ew(s);let l=a.call(s,r);l||(r=Ki(r),l=a.call(s,r)),o&&o.call(s,r);const c=s.delete(r);return l&&Vd(s,"delete",r,void 0),c},clear(){const r=Ki(this),s=r.size!==0,a=r.clear();return s&&Vd(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=wce(r,n,e)}),t}function pL(n,e){const t=Sce(n,e);return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(vi(t,r)&&r in i?t:i,r,s)}const _ce={get:pL(!1,!1)},Cce={get:pL(!1,!0)},Mce={get:pL(!0,!1)},nj=new WeakMap,ij=new WeakMap,rj=new WeakMap,Tce=new WeakMap;function Ece(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ice(n){return n.__v_skip||!Object.isExtensible(n)?0:Ece(Jle(n))}function Si(n){return im(n)?n:mL(n,!1,bce,_ce,nj)}function sj(n){return mL(n,!1,Ace,Cce,ij)}function Z1(n){return mL(n,!0,xce,Mce,rj)}function mL(n,e,t,i,r){if(!Rn(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const a=Ice(n);if(a===0)return n;const o=new Proxy(n,a===2?i:t);return r.set(n,o),o}function Og(n){return im(n)?Og(n.__v_raw):!!(n&&n.__v_isReactive)}function im(n){return!!(n&&n.__v_isReadonly)}function ac(n){return!!(n&&n.__v_isShallow)}function vL(n){return n?!!n.__v_raw:!1}function Ki(n){const e=n&&n.__v_raw;return e?Ki(e):n}function tf(n){return!vi(n,"__v_skip")&&Object.isExtensible(n)&&NX(n,"__v_skip",!0),n}const Ya=n=>Rn(n)?Si(n):n,uD=n=>Rn(n)?Z1(n):n;function ir(n){return n?n.__v_isRef===!0:!1}function ae(n){return aj(n,!1)}function Ui(n){return aj(n,!0)}function aj(n,e){return ir(n)?n:new Dce(n,e)}class Dce{constructor(e,t){this.dep=new j4,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ki(e),this._value=t?e:Ya(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||ac(e)||im(e);e=i?e:Ki(e),Oh(e,t)&&(this._rawValue=e,this._value=i?e:Ya(e),this.dep.trigger())}}function w(n){return ir(n)?n.value:n}const Rce={get:(n,e,t)=>e==="__v_raw"?n:w(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return ir(r)&&!ir(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function oj(n){return Og(n)?n:new Proxy(n,Rce)}class Pce{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new j4,{get:i,set:r}=e(t.track.bind(t),t.trigger.bind(t));this._get=i,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Lce(n){return new Pce(n)}function Vs(n){const e=Mt(n)?new Array(n.length):{};for(const t in n)e[t]=lj(n,t);return e}class kce{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return hce(Ki(this._object),this._key)}}class Fce{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ii(n,e,t){return ir(n)?n:Xt(n)?new Fce(n):Rn(n)&&arguments.length>1?lj(n,e,t):ae(n)}function lj(n,e,t){const i=n[e];return ir(i)?i:new kce(n,e,t)}class Bce{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new j4(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xb-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Kr!==this)return YX(this,!0),!0}get value(){const e=this.dep.track();return $X(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Nce(n,e,t=!1){let i,r;return Xt(n)?i=n:(i=n.get,r=n.set),new Bce(i,r,t)}const nw={},nC=new WeakMap;let p0;function Oce(n,e=!1,t=p0){if(t){let i=nC.get(t);i||nC.set(t,i=[]),i.push(n)}}function Uce(n,e,t=zr){const{immediate:i,deep:r,once:s,scheduler:a,augmentJob:o,call:l}=t,c=b=>r?b:ac(b)||r===!1||r===0?Hd(b,1):Hd(b);let u,d,f,h,p=!1,m=!1;if(ir(n)?(d=()=>n.value,p=ac(n)):Og(n)?(d=()=>c(n),p=!0):Mt(n)?(m=!0,p=n.some(b=>Og(b)||ac(b)),d=()=>n.map(b=>{if(ir(b))return b.value;if(Og(b))return c(b);if(Xt(b))return l?l(b,2):b()})):Xt(n)?e?d=l?()=>l(n,2):n:d=()=>{if(f){bp();try{f()}finally{xp()}}const b=p0;p0=u;try{return l?l(n,3,[h]):n(h)}finally{p0=b}}:d=Pi,e&&r){const b=d,A=r===!0?1/0:r;d=()=>Hd(b(),A)}const v=GX(),g=()=>{u.stop(),v&&v.active&&cL(v.effects,u)};if(s&&e){const b=e;e=(...A)=>{b(...A),g()}}let y=m?new Array(n.length).fill(nw):nw;const x=b=>{if(!(!(u.flags&1)||!u.dirty&&!b))if(e){const A=u.run();if(r||p||(m?A.some((S,C)=>Oh(S,y[C])):Oh(A,y))){f&&f();const S=p0;p0=u;try{const C=[A,y===nw?void 0:m&&y[0]===nw?[]:y,h];l?l(e,3,C):e(...C),y=A}finally{p0=S}}}else u.run()};return o&&o(x),u=new qX(d),u.scheduler=a?()=>a(x,!1):x,h=b=>Oce(b,!1,u),f=u.onStop=()=>{const b=nC.get(u);if(b){if(l)l(b,4);else for(const A of b)A();nC.delete(u)}},e?i?x(!0):y=u.run():a?a(x.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function Hd(n,e=1/0,t){if(e<=0||!Rn(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,ir(n))Hd(n.value,e,t);else if(Mt(n))for(let i=0;i<n.length;i++)Hd(n[i],e,t);else if(K4(n)||Ng(n))n.forEach(i=>{Hd(i,e,t)});else if(Yb(n)){for(const i in n)Hd(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&Hd(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cA(n,e,t,i){try{return i?n(...i):n()}catch(r){Q4(r,e,t)}}function tu(n,e,t,i){if(Xt(n)){const r=cA(n,e,t,i);return r&&Kb(r)&&r.catch(s=>{Q4(s,e,t)}),r}if(Mt(n)){const r=[];for(let s=0;s<n.length;s++)r.push(tu(n[s],e,t,i));return r}}function Q4(n,e,t,i=!0){const r=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||zr;if(e){let o=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,l,c)===!1)return}o=o.parent}if(s){bp(),cA(s,null,10,[n,l,c]),xp();return}}zce(n,t,r,i,a)}function zce(n,e,t,i=!0,r=!1){if(r)throw n;console.error(n)}const ho=[];let Tu=-1;const Ug=[];let Ah=null,rg=0;const cj=Promise.resolve();let iC=null;function Yt(n){const e=iC||cj;return n?e.then(this?n.bind(this):n):e}function Vce(n){let e=Tu+1,t=ho.length;for(;e<t;){const i=e+t>>>1,r=ho[i],s=$b(r);s<n||s===n&&r.flags&2?e=i+1:t=i}return e}function gL(n){if(!(n.flags&1)){const e=$b(n),t=ho[ho.length-1];!t||!(n.flags&2)&&e>=$b(t)?ho.push(n):ho.splice(Vce(e),0,n),n.flags|=1,uj()}}function uj(){iC||(iC=cj.then(fj))}function Hce(n){Mt(n)?Ug.push(...n):Ah&&n.id===-1?Ah.splice(rg+1,0,n):n.flags&1||(Ug.push(n),n.flags|=1),uj()}function nO(n,e,t=Tu+1){for(;t<ho.length;t++){const i=ho[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;ho.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function dj(n){if(Ug.length){const e=[...new Set(Ug)].sort((t,i)=>$b(t)-$b(i));if(Ug.length=0,Ah){Ah.push(...e);return}for(Ah=e,rg=0;rg<Ah.length;rg++){const t=Ah[rg];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ah=null,rg=0}}const $b=n=>n.id==null?n.flags&2?-1:1/0:n.id;function fj(n){try{for(Tu=0;Tu<ho.length;Tu++){const e=ho[Tu];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),cA(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Tu<ho.length;Tu++){const e=ho[Tu];e&&(e.flags&=-2)}Tu=-1,ho.length=0,dj(),iC=null,(ho.length||Ug.length)&&fj()}}let da=null,hj=null;function rC(n){const e=da;return da=n,hj=n&&n.type.__scopeId||null,e}function Re(n,e=da,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&vO(-1);const s=rC(e);let a;try{a=n(...r)}finally{rC(s),i._d&&vO(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function Cn(n,e){if(da===null)return n;const t=iM(da),i=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[s,a,o,l=zr]=e[r];s&&(Xt(s)&&(s={mounted:s,updated:s}),s.deep&&Hd(a),i.push({dir:s,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return n}function Rp(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(bp(),tu(l,t,8,[n.el,o,n,e]),xp())}}const pj=Symbol("_vte"),mj=n=>n.__isTeleport,nb=n=>n&&(n.disabled||n.disabled===""),iO=n=>n&&(n.defer||n.defer===""),rO=n=>typeof SVGElement<"u"&&n instanceof SVGElement,sO=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,dD=(n,e)=>{const t=n&&n.to;return qt(t)?e?e(t):null:t},vj={name:"Teleport",__isTeleport:!0,process(n,e,t,i,r,s,a,o,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:v}}=c,g=nb(e.props);let{shapeFlag:y,children:x,dynamicChildren:b}=e;if(n==null){const A=e.el=m(""),S=e.anchor=m("");h(A,t,i),h(S,t,i);const C=(M,T)=>{y&16&&(r&&r.isCE&&(r.ce._teleportTarget=M),u(x,M,T,r,s,a,o,l))},_=()=>{const M=e.target=dD(e.props,p),T=gj(M,e,m,h);M&&(a!=="svg"&&rO(M)?a="svg":a!=="mathml"&&sO(M)&&(a="mathml"),g||(C(M,T),V3(e,!1)))};g&&(C(t,S),V3(e,!0)),iO(e.props)?lo(()=>{_(),e.el.__isMounted=!0},s):_()}else{if(iO(e.props)&&!n.el.__isMounted){lo(()=>{vj.process(n,e,t,i,r,s,a,o,l,c),delete n.el.__isMounted},s);return}e.el=n.el,e.targetStart=n.targetStart;const A=e.anchor=n.anchor,S=e.target=n.target,C=e.targetAnchor=n.targetAnchor,_=nb(n.props),M=_?t:S,T=_?A:C;if(a==="svg"||rO(S)?a="svg":(a==="mathml"||sO(S))&&(a="mathml"),b?(f(n.dynamicChildren,b,M,r,s,a,o),SL(n,e,!0)):l||d(n,e,M,T,r,s,a,o,!1),g)_?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):iw(e,t,A,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const E=e.target=dD(e.props,p);E&&iw(e,E,null,c,0)}else _&&iw(e,S,C,c,1);V3(e,g)}},remove(n,e,t,{um:i,o:{remove:r}},s){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=n;if(d&&(r(c),r(u)),s&&r(l),a&16){const h=s||!nb(f);for(let p=0;p<o.length;p++){const m=o[p];i(m,e,t,h,!!m.dynamicChildren)}}},move:iw,hydrate:Gce};function iw(n,e,t,{o:{insert:i},m:r},s=2){s===0&&i(n.targetAnchor,e,t);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=n,d=s===2;if(d&&i(a,e,t),(!d||nb(u))&&l&16)for(let f=0;f<c.length;f++)r(c[f],e,t,2);d&&i(o,e,t)}function Gce(n,e,t,i,r,s,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},d){const f=e.target=dD(e.props,l);if(f){const h=nb(e.props),p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(a(n),e,o(n),t,i,r,s),e.targetStart=p,e.targetAnchor=p&&a(p);else{e.anchor=a(n);let m=p;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,f._lpa=e.targetAnchor&&a(e.targetAnchor);break}}m=a(m)}e.targetAnchor||gj(f,e,u,c),d(p&&a(p),e,f,t,i,r,s)}V3(e,h)}return e.anchor&&a(e.anchor)}const Wce=vj;function V3(n,e){const t=n.ctx;if(t&&t.ut){let i,r;for(e?(i=n.el,r=n.anchor):(i=n.targetStart,r=n.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function gj(n,e,t,i){const r=e.targetStart=t(""),s=e.targetAnchor=t("");return r[pj]=s,n&&(i(r,n),i(s,n)),s}const wh=Symbol("_leaveCb"),rw=Symbol("_enterCb");function yj(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mn(()=>{n.isMounted=!0}),Fi(()=>{n.isUnmounting=!0}),n}const Ll=[Function,Array],bj={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ll,onEnter:Ll,onAfterEnter:Ll,onEnterCancelled:Ll,onBeforeLeave:Ll,onLeave:Ll,onAfterLeave:Ll,onLeaveCancelled:Ll,onBeforeAppear:Ll,onAppear:Ll,onAfterAppear:Ll,onAppearCancelled:Ll},xj=n=>{const e=n.subTree;return e.component?xj(e.component):e},qce={name:"BaseTransition",props:bj,setup(n,{slots:e}){const t=Nn(),i=yj();return()=>{const r=e.default&&yL(e.default(),!0);if(!r||!r.length)return;const s=Aj(r),a=Ki(n),{mode:o}=a;if(i.isLeaving)return c5(s);const l=aO(s);if(!l)return c5(s);let c=Qb(l,a,i,t,d=>c=d);l.type!==js&&rm(l,c);let u=t.subTree&&aO(t.subTree);if(u&&u.type!==js&&!x0(l,u)&&xj(t).type!==js){let d=Qb(u,a,i,t);if(rm(u,d),o==="out-in"&&l.type!==js)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,u=void 0},c5(s);o==="in-out"&&l.type!==js?d.delayLeave=(f,h,p)=>{const m=wj(i,u);m[String(u.key)]=u,f[wh]=()=>{h(),f[wh]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function Aj(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==js){e=t;break}}return e}const Kce=qce;function wj(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function Qb(n,e,t,i,r){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:v,onAppear:g,onAfterAppear:y,onAppearCancelled:x}=e,b=String(n.key),A=wj(t,n),S=(M,T)=>{M&&tu(M,i,9,T)},C=(M,T)=>{const E=T[1];S(M,T),Mt(M)?M.every(I=>I.length<=1)&&E():M.length<=1&&E()},_={mode:a,persisted:o,beforeEnter(M){let T=l;if(!t.isMounted)if(s)T=v||l;else return;M[wh]&&M[wh](!0);const E=A[b];E&&x0(n,E)&&E.el[wh]&&E.el[wh](),S(T,[M])},enter(M){let T=c,E=u,I=d;if(!t.isMounted)if(s)T=g||c,E=y||u,I=x||d;else return;let L=!1;const F=M[rw]=B=>{L||(L=!0,B?S(I,[M]):S(E,[M]),_.delayedLeave&&_.delayedLeave(),M[rw]=void 0)};T?C(T,[M,F]):F()},leave(M,T){const E=String(n.key);if(M[rw]&&M[rw](!0),t.isUnmounting)return T();S(f,[M]);let I=!1;const L=M[wh]=F=>{I||(I=!0,T(),F?S(m,[M]):S(p,[M]),M[wh]=void 0,A[E]===n&&delete A[E])};A[E]=n,h?C(h,[M,L]):L()},clone(M){const T=Qb(M,e,t,i,r);return r&&r(T),T}};return _}function c5(n){if(Z4(n))return n=df(n),n.children=null,n}function aO(n){if(!Z4(n))return mj(n.type)&&n.children?Aj(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Xt(t.default))return t.default()}}function rm(n,e){n.shapeFlag&6&&n.component?(n.transition=e,rm(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function yL(n,e=!1,t){let i=[],r=0;for(let s=0;s<n.length;s++){let a=n[s];const o=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===Kt?(a.patchFlag&128&&r++,i=i.concat(yL(a.children,e,o))):(e||a.type!==js)&&i.push(o!=null?df(a,{key:o}):a)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Ie(n,e){return Xt(n)?ta({name:n.name},e,{setup:n}):n}function Sj(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function sC(n,e,t,i,r=!1){if(Mt(n)){n.forEach((p,m)=>sC(p,e&&(Mt(e)?e[m]:e),t,i,r));return}if(zg(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&sC(n,e,t,i.component.subTree);return}const s=i.shapeFlag&4?iM(i.component):i.el,a=r?null:s,{i:o,r:l}=n,c=e&&e.r,u=o.refs===zr?o.refs={}:o.refs,d=o.setupState,f=Ki(d),h=d===zr?()=>!1:p=>vi(f,p);if(c!=null&&c!==l&&(qt(c)?(u[c]=null,h(c)&&(d[c]=null)):ir(c)&&(c.value=null)),Xt(l))cA(l,o,12,[a,u]);else{const p=qt(l),m=ir(l);if(p||m){const v=()=>{if(n.f){const g=p?h(l)?d[l]:u[l]:l.value;r?Mt(g)&&cL(g,s):Mt(g)?g.includes(s)||g.push(s):p?(u[l]=[s],h(l)&&(d[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else p?(u[l]=a,h(l)&&(d[l]=a)):m&&(l.value=a,n.k&&(u[n.k]=a))};a?(v.id=-1,lo(v,t)):v()}}}X4().requestIdleCallback;X4().cancelIdleCallback;const zg=n=>!!n.type.__asyncLoader,Z4=n=>n.type.__isKeepAlive;function bL(n,e){Cj(n,"a",e)}function _j(n,e){Cj(n,"da",e)}function Cj(n,e,t=Ma){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(J4(e,i,t),t){let r=t.parent;for(;r&&r.parent;)Z4(r.parent.vnode)&&Yce(i,e,t,r),r=r.parent}}function Yce(n,e,t,i){const r=J4(e,n,i,!0);Ap(()=>{cL(i[e],r)},t)}function J4(n,e,t=Ma,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{bp();const o=uA(t),l=tu(e,t,n,a);return o(),xp(),l});return i?r.unshift(s):r.push(s),s}}const _f=n=>(e,t=Ma)=>{(!Jb||n==="sp")&&J4(n,(...i)=>e(...i),t)},eM=_f("bm"),Mn=_f("m"),Mj=_f("bu"),au=_f("u"),Fi=_f("bum"),Ap=_f("um"),Xce=_f("sp"),jce=_f("rtg"),$ce=_f("rtc");function Qce(n,e=Ma){J4("ec",n,e)}const xL="components",Zce="directives";function an(n,e){return AL(xL,n,!0,e)||n}const Tj=Symbol.for("v-ndc");function On(n){return qt(n)?AL(xL,n,!1)||n:n||Tj}function tM(n){return AL(Zce,n)}function AL(n,e,t=!0,i=!1){const r=da||Ma;if(r){const s=r.type;if(n===xL){const o=Bue(s,!1);if(o&&(o===e||o===So(e)||o===lA(So(e))))return s}const a=oO(r[n]||s[n],e)||oO(r.appContext[n],e);return!a&&i?s:a}}function oO(n,e){return n&&(n[e]||n[So(e)]||n[lA(So(e))])}function Jn(n,e,t,i){let r;const s=t,a=Mt(n);if(a||qt(n)){const o=a&&Og(n);let l=!1;o&&(l=!ac(n),n=$4(n)),r=new Array(n.length);for(let c=0,u=n.length;c<u;c++)r[c]=e(l?Ya(n[c]):n[c],c,void 0,s)}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,s)}else if(Rn(n))if(n[Symbol.iterator])r=Array.from(n,(o,l)=>e(o,l,void 0,s));else{const o=Object.keys(n);r=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];r[l]=e(n[u],u,l,s)}}else r=[];return r}function Il(n,e){for(let t=0;t<e.length;t++){const i=e[t];if(Mt(i))for(let r=0;r<i.length;r++)n[i[r].name]=i[r].fn;else i&&(n[i.name]=i.key?(...r)=>{const s=i.fn(...r);return s&&(s.key=i.key),s}:i.fn)}return n}function Qe(n,e,t={},i,r){if(da.ce||da.parent&&zg(da.parent)&&da.parent.ce)return e!=="default"&&(t.name=e),W(),rt(Kt,null,[_e("slot",t,i&&i())],64);let s=n[e];s&&s._c&&(s._d=!1),W();const a=s&&Ej(s(t)),o=t.key||a&&a.key,l=rt(Kt,{key:(o&&!eu(o)?o:`_${e}`)+(!a&&i?"_fb":"")},a||(i?i():[]),a&&n._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Ej(n){return n.some(e=>mr(e)?!(e.type===js||e.type===Kt&&!Ej(e.children)):!0)?n:null}function Jce(n,e){const t={};for(const i in n)t[J2(i)]=n[i];return t}const fD=n=>n?Xj(n)?iM(n):fD(n.parent):null,ib=ta(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>fD(n.parent),$root:n=>fD(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Rj(n),$forceUpdate:n=>n.f||(n.f=()=>{gL(n.update)}),$nextTick:n=>n.n||(n.n=Yt.bind(n.proxy)),$watch:n=>xue.bind(n)}),u5=(n,e)=>n!==zr&&!n.__isScriptSetup&&vi(n,e),eue={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:r,props:s,accessCache:a,type:o,appContext:l}=n;let c;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(u5(i,e))return a[e]=1,i[e];if(r!==zr&&vi(r,e))return a[e]=2,r[e];if((c=n.propsOptions[0])&&vi(c,e))return a[e]=3,s[e];if(t!==zr&&vi(t,e))return a[e]=4,t[e];hD&&(a[e]=0)}}const u=ib[e];let d,f;if(u)return e==="$attrs"&&Ka(n.attrs,"get",""),u(n);if((d=o.__cssModules)&&(d=d[e]))return d;if(t!==zr&&vi(t,e))return a[e]=4,t[e];if(f=l.config.globalProperties,vi(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return u5(r,e)?(r[e]=t,!0):i!==zr&&vi(i,e)?(i[e]=t,!0):vi(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},a){let o;return!!t[a]||n!==zr&&vi(n,a)||u5(e,a)||(o=s[0])&&vi(o,a)||vi(i,a)||vi(ib,a)||vi(r.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:vi(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Ps(){return Ij().slots}function Cf(){return Ij().attrs}function Ij(){const n=Nn();return n.setupContext||(n.setupContext=$j(n))}function lO(n){return Mt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let hD=!0;function tue(n){const e=Rj(n),t=n.proxy,i=n.ctx;hD=!1,e.beforeCreate&&cO(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:y,destroyed:x,unmounted:b,render:A,renderTracked:S,renderTriggered:C,errorCaptured:_,serverPrefetch:M,expose:T,inheritAttrs:E,components:I,directives:L,filters:F}=e;if(c&&nue(c,i,null),a)for(const z in a){const O=a[z];Xt(O)&&(i[z]=O.bind(t))}if(r){const z=r.call(t,t);Rn(z)&&(n.data=Si(z))}if(hD=!0,s)for(const z in s){const O=s[z],N=Xt(O)?O.bind(t,t):Xt(O.get)?O.get.bind(t,t):Pi,H=!Xt(O)&&Xt(O.set)?O.set.bind(t):Pi,q=V({get:N,set:H});Object.defineProperty(i,z,{enumerable:!0,configurable:!0,get:()=>q.value,set:te=>q.value=te})}if(o)for(const z in o)Dj(o[z],i,t,z);if(l){const z=Xt(l)?l.call(t):l;Reflect.ownKeys(z).forEach(O=>{Qn(O,z[O])})}u&&cO(u,n,"c");function P(z,O){Mt(O)?O.forEach(N=>z(N.bind(t))):O&&z(O.bind(t))}if(P(eM,d),P(Mn,f),P(Mj,h),P(au,p),P(bL,m),P(_j,v),P(Qce,_),P($ce,S),P(jce,C),P(Fi,y),P(Ap,b),P(Xce,M),Mt(T))if(T.length){const z=n.exposed||(n.exposed={});T.forEach(O=>{Object.defineProperty(z,O,{get:()=>t[O],set:N=>t[O]=N})})}else n.exposed||(n.exposed={});A&&n.render===Pi&&(n.render=A),E!=null&&(n.inheritAttrs=E),I&&(n.components=I),L&&(n.directives=L),M&&Sj(n)}function nue(n,e,t=Pi){Mt(n)&&(n=pD(n));for(const i in n){const r=n[i];let s;Rn(r)?"default"in r?s=Nt(r.from||i,r.default,!0):s=Nt(r.from||i):s=Nt(r),ir(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[i]=s}}function cO(n,e,t){tu(Mt(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function Dj(n,e,t,i){let r=i.includes(".")?Gj(t,i):()=>t[i];if(qt(n)){const s=e[n];Xt(s)&&pt(r,s)}else if(Xt(n))pt(r,n.bind(t));else if(Rn(n))if(Mt(n))n.forEach(s=>Dj(s,e,t,i));else{const s=Xt(n.handler)?n.handler.bind(t):e[n.handler];Xt(s)&&pt(r,s,n)}}function Rj(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>aC(l,c,a,!0)),aC(l,e,a)),Rn(e)&&s.set(e,l),l}function aC(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&aC(n,s,t,!0),r&&r.forEach(a=>aC(n,a,t,!0));for(const a in e)if(!(i&&a==="expose")){const o=iue[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const iue={data:uO,props:dO,emits:dO,methods:N2,computed:N2,beforeCreate:so,created:so,beforeMount:so,mounted:so,beforeUpdate:so,updated:so,beforeDestroy:so,beforeUnmount:so,destroyed:so,unmounted:so,activated:so,deactivated:so,errorCaptured:so,serverPrefetch:so,components:N2,directives:N2,watch:sue,provide:uO,inject:rue};function uO(n,e){return e?n?function(){return ta(Xt(n)?n.call(this,this):n,Xt(e)?e.call(this,this):e)}:e:n}function rue(n,e){return N2(pD(n),pD(e))}function pD(n){if(Mt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function so(n,e){return n?[...new Set([].concat(n,e))]:e}function N2(n,e){return n?ta(Object.create(null),n,e):e}function dO(n,e){return n?Mt(n)&&Mt(e)?[...new Set([...n,...e])]:ta(Object.create(null),lO(n),lO(e??{})):e}function sue(n,e){if(!n)return e;if(!e)return n;const t=ta(Object.create(null),n);for(const i in e)t[i]=so(n[i],e[i]);return t}function Pj(){return{app:null,config:{isNativeTag:Qle,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let aue=0;function oue(n,e){return function(i,r=null){Xt(i)||(i=ta({},i)),r!=null&&!Rn(r)&&(r=null);const s=Pj(),a=new WeakSet,o=[];let l=!1;const c=s.app={_uid:aue++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Oue,get config(){return s.config},set config(u){},use(u,...d){return a.has(u)||(u&&Xt(u.install)?(a.add(u),u.install(c,...d)):Xt(u)&&(a.add(u),u(c,...d))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,d){return d?(s.components[u]=d,c):s.components[u]},directive(u,d){return d?(s.directives[u]=d,c):s.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||_e(i,r);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),n(h,u,f),l=!0,c._container=u,u.__vue_app__=c,iM(h.component)}},onUnmount(u){o.push(u)},unmount(){l&&(tu(o,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return s.provides[u]=d,c},runWithContext(u){const d=Vg;Vg=c;try{return u()}finally{Vg=d}}};return c}}let Vg=null;function Qn(n,e){if(Ma){let t=Ma.provides;const i=Ma.parent&&Ma.parent.provides;i===t&&(t=Ma.provides=Object.create(i)),t[n]=e}}function Nt(n,e,t=!1){const i=Ma||da;if(i||Vg){const r=Vg?Vg._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Xt(e)?e.call(i&&i.proxy):e}}const Lj={},kj=()=>Object.create(Lj),Fj=n=>Object.getPrototypeOf(n)===Lj;function lue(n,e,t,i=!1){const r={},s=kj();n.propsDefaults=Object.create(null),Bj(n,e,r,s);for(const a in n.propsOptions[0])a in r||(r[a]=void 0);t?n.props=i?r:sj(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function cue(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=n,o=Ki(r),[l]=n.propsOptions;let c=!1;if((i||a>0)&&!(a&16)){if(a&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(nM(n.emitsOptions,f))continue;const h=e[f];if(l)if(vi(s,f))h!==s[f]&&(s[f]=h,c=!0);else{const p=So(f);r[p]=mD(l,o,p,h,n,!1)}else h!==s[f]&&(s[f]=h,c=!0)}}}else{Bj(n,e,r,s)&&(c=!0);let u;for(const d in o)(!e||!vi(e,d)&&((u=Sf(d))===d||!vi(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(r[d]=mD(l,o,d,void 0,n,!0)):delete r[d]);if(s!==o)for(const d in s)(!e||!vi(e,d))&&(delete s[d],c=!0)}c&&Vd(n.attrs,"set","")}function Bj(n,e,t,i){const[r,s]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(Z2(l))continue;const c=e[l];let u;r&&vi(r,u=So(l))?!s||!s.includes(u)?t[u]=c:(o||(o={}))[u]=c:nM(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,a=!0)}if(s){const l=Ki(t),c=o||zr;for(let u=0;u<s.length;u++){const d=s[u];t[d]=mD(r,l,d,c[d],n,!vi(c,d))}}return a}function mD(n,e,t,i,r,s){const a=n[t];if(a!=null){const o=vi(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Xt(l)){const{propsDefaults:c}=r;if(t in c)i=c[t];else{const u=uA(r);i=c[t]=l.call(null,e),u()}}else i=l;r.ce&&r.ce._setProp(t,i)}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===Sf(t))&&(i=!0))}return i}const uue=new WeakMap;function Nj(n,e,t=!1){const i=t?uue:e.propsCache,r=i.get(n);if(r)return r;const s=n.props,a={},o=[];let l=!1;if(!Xt(n)){const u=d=>{l=!0;const[f,h]=Nj(d,e,!0);ta(a,f),h&&o.push(...h)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return Rn(n)&&i.set(n,Bg),Bg;if(Mt(s))for(let u=0;u<s.length;u++){const d=So(s[u]);fO(d)&&(a[d]=zr)}else if(s)for(const u in s){const d=So(u);if(fO(d)){const f=s[u],h=a[d]=Mt(f)||Xt(f)?{type:f}:ta({},f),p=h.type;let m=!1,v=!0;if(Mt(p))for(let g=0;g<p.length;++g){const y=p[g],x=Xt(y)&&y.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(v=!1)}else m=Xt(p)&&p.name==="Boolean";h[0]=m,h[1]=v,(m||vi(h,"default"))&&o.push(d)}}const c=[a,o];return Rn(n)&&i.set(n,c),c}function fO(n){return n[0]!=="$"&&!Z2(n)}const Oj=n=>n[0]==="_"||n==="$stable",wL=n=>Mt(n)?n.map(Ru):[Ru(n)],due=(n,e,t)=>{if(e._n)return e;const i=Re((...r)=>wL(e(...r)),t);return i._c=!1,i},Uj=(n,e,t)=>{const i=n._ctx;for(const r in n){if(Oj(r))continue;const s=n[r];if(Xt(s))e[r]=due(r,s,i);else if(s!=null){const a=wL(s);e[r]=()=>a}}},zj=(n,e)=>{const t=wL(e);n.slots.default=()=>t},Vj=(n,e,t)=>{for(const i in e)(t||i!=="_")&&(n[i]=e[i])},fue=(n,e,t)=>{const i=n.slots=kj();if(n.vnode.shapeFlag&32){const r=e._;r?(Vj(i,e,t),t&&NX(i,"_",r,!0)):Uj(e,i)}else e&&zj(n,e)},hue=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,a=zr;if(i.shapeFlag&32){const o=e._;o?t&&o===1?s=!1:Vj(r,e,t):(s=!e.$stable,Uj(e,r)),a=e}else e&&(zj(n,e),a={default:1});if(s)for(const o in r)!Oj(o)&&a[o]==null&&delete r[o]},lo=Tue;function pue(n){return mue(n)}function mue(n,e){const t=X4();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Pi,insertStaticContent:p}=n,m=(Y,oe,ne,Xe=null,ke=null,Ge=null,He=void 0,qe=null,tt=!!oe.dynamicChildren)=>{if(Y===oe)return;Y&&!x0(Y,oe)&&(Xe=ue(Y),te(Y,ke,Ge,!0),Y=null),oe.patchFlag===-2&&(tt=!1,oe.dynamicChildren=null);const{type:pe,ref:G,shapeFlag:Z}=oe;switch(pe){case J1:v(Y,oe,ne,Xe);break;case js:g(Y,oe,ne,Xe);break;case f5:Y==null&&y(oe,ne,Xe,He);break;case Kt:I(Y,oe,ne,Xe,ke,Ge,He,qe,tt);break;default:Z&1?A(Y,oe,ne,Xe,ke,Ge,He,qe,tt):Z&6?L(Y,oe,ne,Xe,ke,Ge,He,qe,tt):(Z&64||Z&128)&&pe.process(Y,oe,ne,Xe,ke,Ge,He,qe,tt,Le)}G!=null&&ke&&sC(G,Y&&Y.ref,Ge,oe||Y,!oe)},v=(Y,oe,ne,Xe)=>{if(Y==null)i(oe.el=o(oe.children),ne,Xe);else{const ke=oe.el=Y.el;oe.children!==Y.children&&c(ke,oe.children)}},g=(Y,oe,ne,Xe)=>{Y==null?i(oe.el=l(oe.children||""),ne,Xe):oe.el=Y.el},y=(Y,oe,ne,Xe)=>{[Y.el,Y.anchor]=p(Y.children,oe,ne,Xe,Y.el,Y.anchor)},x=({el:Y,anchor:oe},ne,Xe)=>{let ke;for(;Y&&Y!==oe;)ke=f(Y),i(Y,ne,Xe),Y=ke;i(oe,ne,Xe)},b=({el:Y,anchor:oe})=>{let ne;for(;Y&&Y!==oe;)ne=f(Y),r(Y),Y=ne;r(oe)},A=(Y,oe,ne,Xe,ke,Ge,He,qe,tt)=>{oe.type==="svg"?He="svg":oe.type==="math"&&(He="mathml"),Y==null?S(oe,ne,Xe,ke,Ge,He,qe,tt):M(Y,oe,ke,Ge,He,qe,tt)},S=(Y,oe,ne,Xe,ke,Ge,He,qe)=>{let tt,pe;const{props:G,shapeFlag:Z,transition:ge,dirs:Oe}=Y;if(tt=Y.el=a(Y.type,Ge,G&&G.is,G),Z&8?u(tt,Y.children):Z&16&&_(Y.children,tt,null,Xe,ke,d5(Y,Ge),He,qe),Oe&&Rp(Y,null,Xe,"created"),C(tt,Y,Y.scopeId,He,Xe),G){for(const bt in G)bt!=="value"&&!Z2(bt)&&s(tt,bt,null,G[bt],Ge,Xe);"value"in G&&s(tt,"value",null,G.value,Ge),(pe=G.onVnodeBeforeMount)&&bu(pe,Xe,Y)}Oe&&Rp(Y,null,Xe,"beforeMount");const je=vue(ke,ge);je&&ge.beforeEnter(tt),i(tt,oe,ne),((pe=G&&G.onVnodeMounted)||je||Oe)&&lo(()=>{pe&&bu(pe,Xe,Y),je&&ge.enter(tt),Oe&&Rp(Y,null,Xe,"mounted")},ke)},C=(Y,oe,ne,Xe,ke)=>{if(ne&&h(Y,ne),Xe)for(let Ge=0;Ge<Xe.length;Ge++)h(Y,Xe[Ge]);if(ke){let Ge=ke.subTree;if(oe===Ge||qj(Ge.type)&&(Ge.ssContent===oe||Ge.ssFallback===oe)){const He=ke.vnode;C(Y,He,He.scopeId,He.slotScopeIds,ke.parent)}}},_=(Y,oe,ne,Xe,ke,Ge,He,qe,tt=0)=>{for(let pe=tt;pe<Y.length;pe++){const G=Y[pe]=qe?Sh(Y[pe]):Ru(Y[pe]);m(null,G,oe,ne,Xe,ke,Ge,He,qe)}},M=(Y,oe,ne,Xe,ke,Ge,He)=>{const qe=oe.el=Y.el;let{patchFlag:tt,dynamicChildren:pe,dirs:G}=oe;tt|=Y.patchFlag&16;const Z=Y.props||zr,ge=oe.props||zr;let Oe;if(ne&&Pp(ne,!1),(Oe=ge.onVnodeBeforeUpdate)&&bu(Oe,ne,oe,Y),G&&Rp(oe,Y,ne,"beforeUpdate"),ne&&Pp(ne,!0),(Z.innerHTML&&ge.innerHTML==null||Z.textContent&&ge.textContent==null)&&u(qe,""),pe?T(Y.dynamicChildren,pe,qe,ne,Xe,d5(oe,ke),Ge):He||O(Y,oe,qe,null,ne,Xe,d5(oe,ke),Ge,!1),tt>0){if(tt&16)E(qe,Z,ge,ne,ke);else if(tt&2&&Z.class!==ge.class&&s(qe,"class",null,ge.class,ke),tt&4&&s(qe,"style",Z.style,ge.style,ke),tt&8){const je=oe.dynamicProps;for(let bt=0;bt<je.length;bt++){const At=je[bt],Ee=Z[At],gt=ge[At];(gt!==Ee||At==="value")&&s(qe,At,Ee,gt,ke,ne)}}tt&1&&Y.children!==oe.children&&u(qe,oe.children)}else!He&&pe==null&&E(qe,Z,ge,ne,ke);((Oe=ge.onVnodeUpdated)||G)&&lo(()=>{Oe&&bu(Oe,ne,oe,Y),G&&Rp(oe,Y,ne,"updated")},Xe)},T=(Y,oe,ne,Xe,ke,Ge,He)=>{for(let qe=0;qe<oe.length;qe++){const tt=Y[qe],pe=oe[qe],G=tt.el&&(tt.type===Kt||!x0(tt,pe)||tt.shapeFlag&70)?d(tt.el):ne;m(tt,pe,G,null,Xe,ke,Ge,He,!0)}},E=(Y,oe,ne,Xe,ke)=>{if(oe!==ne){if(oe!==zr)for(const Ge in oe)!Z2(Ge)&&!(Ge in ne)&&s(Y,Ge,oe[Ge],null,ke,Xe);for(const Ge in ne){if(Z2(Ge))continue;const He=ne[Ge],qe=oe[Ge];He!==qe&&Ge!=="value"&&s(Y,Ge,qe,He,ke,Xe)}"value"in ne&&s(Y,"value",oe.value,ne.value,ke)}},I=(Y,oe,ne,Xe,ke,Ge,He,qe,tt)=>{const pe=oe.el=Y?Y.el:o(""),G=oe.anchor=Y?Y.anchor:o("");let{patchFlag:Z,dynamicChildren:ge,slotScopeIds:Oe}=oe;Oe&&(qe=qe?qe.concat(Oe):Oe),Y==null?(i(pe,ne,Xe),i(G,ne,Xe),_(oe.children||[],ne,G,ke,Ge,He,qe,tt)):Z>0&&Z&64&&ge&&Y.dynamicChildren?(T(Y.dynamicChildren,ge,ne,ke,Ge,He,qe),(oe.key!=null||ke&&oe===ke.subTree)&&SL(Y,oe,!0)):O(Y,oe,ne,G,ke,Ge,He,qe,tt)},L=(Y,oe,ne,Xe,ke,Ge,He,qe,tt)=>{oe.slotScopeIds=qe,Y==null?oe.shapeFlag&512?ke.ctx.activate(oe,ne,Xe,He,tt):F(oe,ne,Xe,ke,Ge,He,tt):B(Y,oe,tt)},F=(Y,oe,ne,Xe,ke,Ge,He)=>{const qe=Y.component=Pue(Y,Xe,ke);if(Z4(Y)&&(qe.ctx.renderer=Le),Lue(qe,!1,He),qe.asyncDep){if(ke&&ke.registerDep(qe,P,He),!Y.el){const tt=qe.subTree=_e(js);g(null,tt,oe,ne)}}else P(qe,Y,oe,ne,ke,Ge,He)},B=(Y,oe,ne)=>{const Xe=oe.component=Y.component;if(Cue(Y,oe,ne))if(Xe.asyncDep&&!Xe.asyncResolved){z(Xe,oe,ne);return}else Xe.next=oe,Xe.update();else oe.el=Y.el,Xe.vnode=oe},P=(Y,oe,ne,Xe,ke,Ge,He)=>{const qe=()=>{if(Y.isMounted){let{next:Z,bu:ge,u:Oe,parent:je,vnode:bt}=Y;{const $=Hj(Y);if($){Z&&(Z.el=bt.el,z(Y,Z,He)),$.asyncDep.then(()=>{Y.isUnmounted||qe()});return}}let At=Z,Ee;Pp(Y,!1),Z?(Z.el=bt.el,z(Y,Z,He)):Z=bt,ge&&z3(ge),(Ee=Z.props&&Z.props.onVnodeBeforeUpdate)&&bu(Ee,je,Z,bt),Pp(Y,!0);const gt=pO(Y),lt=Y.subTree;Y.subTree=gt,m(lt,gt,d(lt.el),ue(lt),Y,ke,Ge),Z.el=gt.el,At===null&&Mue(Y,gt.el),Oe&&lo(Oe,ke),(Ee=Z.props&&Z.props.onVnodeUpdated)&&lo(()=>bu(Ee,je,Z,bt),ke)}else{let Z;const{el:ge,props:Oe}=oe,{bm:je,m:bt,parent:At,root:Ee,type:gt}=Y,lt=zg(oe);Pp(Y,!1),je&&z3(je),!lt&&(Z=Oe&&Oe.onVnodeBeforeMount)&&bu(Z,At,oe),Pp(Y,!0);{Ee.ce&&Ee.ce._injectChildStyle(gt);const $=Y.subTree=pO(Y);m(null,$,ne,Xe,Y,ke,Ge),oe.el=$.el}if(bt&&lo(bt,ke),!lt&&(Z=Oe&&Oe.onVnodeMounted)){const $=oe;lo(()=>bu(Z,At,$),ke)}(oe.shapeFlag&256||At&&zg(At.vnode)&&At.vnode.shapeFlag&256)&&Y.a&&lo(Y.a,ke),Y.isMounted=!0,oe=ne=Xe=null}};Y.scope.on();const tt=Y.effect=new qX(qe);Y.scope.off();const pe=Y.update=tt.run.bind(tt),G=Y.job=tt.runIfDirty.bind(tt);G.i=Y,G.id=Y.uid,tt.scheduler=()=>gL(G),Pp(Y,!0),pe()},z=(Y,oe,ne)=>{oe.component=Y;const Xe=Y.vnode.props;Y.vnode=oe,Y.next=null,cue(Y,oe.props,Xe,ne),hue(Y,oe.children,ne),bp(),nO(Y),xp()},O=(Y,oe,ne,Xe,ke,Ge,He,qe,tt=!1)=>{const pe=Y&&Y.children,G=Y?Y.shapeFlag:0,Z=oe.children,{patchFlag:ge,shapeFlag:Oe}=oe;if(ge>0){if(ge&128){H(pe,Z,ne,Xe,ke,Ge,He,qe,tt);return}else if(ge&256){N(pe,Z,ne,Xe,ke,Ge,He,qe,tt);return}}Oe&8?(G&16&&J(pe,ke,Ge),Z!==pe&&u(ne,Z)):G&16?Oe&16?H(pe,Z,ne,Xe,ke,Ge,He,qe,tt):J(pe,ke,Ge,!0):(G&8&&u(ne,""),Oe&16&&_(Z,ne,Xe,ke,Ge,He,qe,tt))},N=(Y,oe,ne,Xe,ke,Ge,He,qe,tt)=>{Y=Y||Bg,oe=oe||Bg;const pe=Y.length,G=oe.length,Z=Math.min(pe,G);let ge;for(ge=0;ge<Z;ge++){const Oe=oe[ge]=tt?Sh(oe[ge]):Ru(oe[ge]);m(Y[ge],Oe,ne,null,ke,Ge,He,qe,tt)}pe>G?J(Y,ke,Ge,!0,!1,Z):_(oe,ne,Xe,ke,Ge,He,qe,tt,Z)},H=(Y,oe,ne,Xe,ke,Ge,He,qe,tt)=>{let pe=0;const G=oe.length;let Z=Y.length-1,ge=G-1;for(;pe<=Z&&pe<=ge;){const Oe=Y[pe],je=oe[pe]=tt?Sh(oe[pe]):Ru(oe[pe]);if(x0(Oe,je))m(Oe,je,ne,null,ke,Ge,He,qe,tt);else break;pe++}for(;pe<=Z&&pe<=ge;){const Oe=Y[Z],je=oe[ge]=tt?Sh(oe[ge]):Ru(oe[ge]);if(x0(Oe,je))m(Oe,je,ne,null,ke,Ge,He,qe,tt);else break;Z--,ge--}if(pe>Z){if(pe<=ge){const Oe=ge+1,je=Oe<G?oe[Oe].el:Xe;for(;pe<=ge;)m(null,oe[pe]=tt?Sh(oe[pe]):Ru(oe[pe]),ne,je,ke,Ge,He,qe,tt),pe++}}else if(pe>ge)for(;pe<=Z;)te(Y[pe],ke,Ge,!0),pe++;else{const Oe=pe,je=pe,bt=new Map;for(pe=je;pe<=ge;pe++){const Me=oe[pe]=tt?Sh(oe[pe]):Ru(oe[pe]);Me.key!=null&&bt.set(Me.key,pe)}let At,Ee=0;const gt=ge-je+1;let lt=!1,$=0;const le=new Array(gt);for(pe=0;pe<gt;pe++)le[pe]=0;for(pe=Oe;pe<=Z;pe++){const Me=Y[pe];if(Ee>=gt){te(Me,ke,Ge,!0);continue}let me;if(Me.key!=null)me=bt.get(Me.key);else for(At=je;At<=ge;At++)if(le[At-je]===0&&x0(Me,oe[At])){me=At;break}me===void 0?te(Me,ke,Ge,!0):(le[me-je]=pe+1,me>=$?$=me:lt=!0,m(Me,oe[me],ne,null,ke,Ge,He,qe,tt),Ee++)}const fe=lt?gue(le):Bg;for(At=fe.length-1,pe=gt-1;pe>=0;pe--){const Me=je+pe,me=oe[Me],Ae=Me+1<G?oe[Me+1].el:Xe;le[pe]===0?m(null,me,ne,Ae,ke,Ge,He,qe,tt):lt&&(At<0||pe!==fe[At]?q(me,ne,Ae,2):At--)}}},q=(Y,oe,ne,Xe,ke=null)=>{const{el:Ge,type:He,transition:qe,children:tt,shapeFlag:pe}=Y;if(pe&6){q(Y.component.subTree,oe,ne,Xe);return}if(pe&128){Y.suspense.move(oe,ne,Xe);return}if(pe&64){He.move(Y,oe,ne,Le);return}if(He===Kt){i(Ge,oe,ne);for(let Z=0;Z<tt.length;Z++)q(tt[Z],oe,ne,Xe);i(Y.anchor,oe,ne);return}if(He===f5){x(Y,oe,ne);return}if(Xe!==2&&pe&1&&qe)if(Xe===0)qe.beforeEnter(Ge),i(Ge,oe,ne),lo(()=>qe.enter(Ge),ke);else{const{leave:Z,delayLeave:ge,afterLeave:Oe}=qe,je=()=>i(Ge,oe,ne),bt=()=>{Z(Ge,()=>{je(),Oe&&Oe()})};ge?ge(Ge,je,bt):bt()}else i(Ge,oe,ne)},te=(Y,oe,ne,Xe=!1,ke=!1)=>{const{type:Ge,props:He,ref:qe,children:tt,dynamicChildren:pe,shapeFlag:G,patchFlag:Z,dirs:ge,cacheIndex:Oe}=Y;if(Z===-2&&(ke=!1),qe!=null&&sC(qe,null,ne,Y,!0),Oe!=null&&(oe.renderCache[Oe]=void 0),G&256){oe.ctx.deactivate(Y);return}const je=G&1&&ge,bt=!zg(Y);let At;if(bt&&(At=He&&He.onVnodeBeforeUnmount)&&bu(At,oe,Y),G&6)de(Y.component,ne,Xe);else{if(G&128){Y.suspense.unmount(ne,Xe);return}je&&Rp(Y,null,oe,"beforeUnmount"),G&64?Y.type.remove(Y,oe,ne,Le,Xe):pe&&!pe.hasOnce&&(Ge!==Kt||Z>0&&Z&64)?J(pe,oe,ne,!1,!0):(Ge===Kt&&Z&384||!ke&&G&16)&&J(tt,oe,ne),Xe&&Q(Y)}(bt&&(At=He&&He.onVnodeUnmounted)||je)&&lo(()=>{At&&bu(At,oe,Y),je&&Rp(Y,null,oe,"unmounted")},ne)},Q=Y=>{const{type:oe,el:ne,anchor:Xe,transition:ke}=Y;if(oe===Kt){ee(ne,Xe);return}if(oe===f5){b(Y);return}const Ge=()=>{r(ne),ke&&!ke.persisted&&ke.afterLeave&&ke.afterLeave()};if(Y.shapeFlag&1&&ke&&!ke.persisted){const{leave:He,delayLeave:qe}=ke,tt=()=>He(ne,Ge);qe?qe(Y.el,Ge,tt):tt()}else Ge()},ee=(Y,oe)=>{let ne;for(;Y!==oe;)ne=f(Y),r(Y),Y=ne;r(oe)},de=(Y,oe,ne)=>{const{bum:Xe,scope:ke,job:Ge,subTree:He,um:qe,m:tt,a:pe}=Y;hO(tt),hO(pe),Xe&&z3(Xe),ke.stop(),Ge&&(Ge.flags|=8,te(He,Y,oe,ne)),qe&&lo(qe,oe),lo(()=>{Y.isUnmounted=!0},oe),oe&&oe.pendingBranch&&!oe.isUnmounted&&Y.asyncDep&&!Y.asyncResolved&&Y.suspenseId===oe.pendingId&&(oe.deps--,oe.deps===0&&oe.resolve())},J=(Y,oe,ne,Xe=!1,ke=!1,Ge=0)=>{for(let He=Ge;He<Y.length;He++)te(Y[He],oe,ne,Xe,ke)},ue=Y=>{if(Y.shapeFlag&6)return ue(Y.component.subTree);if(Y.shapeFlag&128)return Y.suspense.next();const oe=f(Y.anchor||Y.el),ne=oe&&oe[pj];return ne?f(ne):oe};let Te=!1;const De=(Y,oe,ne)=>{Y==null?oe._vnode&&te(oe._vnode,null,null,!0):m(oe._vnode||null,Y,oe,null,null,null,ne),oe._vnode=Y,Te||(Te=!0,nO(),dj(),Te=!1)},Le={p:m,um:te,m:q,r:Q,mt:F,mc:_,pc:O,pbc:T,n:ue,o:n};return{render:De,hydrate:void 0,createApp:oue(De)}}function d5({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Pp({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function vue(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function SL(n,e,t=!1){const i=n.children,r=e.children;if(Mt(i)&&Mt(r))for(let s=0;s<i.length;s++){const a=i[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=Sh(r[s]),o.el=a.el),!t&&o.patchFlag!==-2&&SL(a,o)),o.type===J1&&(o.el=a.el)}}function gue(n){const e=n.slice(),t=[0];let i,r,s,a,o;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,a=t.length-1;s<a;)o=s+a>>1,n[t[o]]<c?s=o+1:a=o;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function Hj(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Hj(e)}function hO(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const yue=Symbol.for("v-scx"),bue=()=>Nt(yue);function Js(n,e){return _L(n,null,e)}function pt(n,e,t){return _L(n,e,t)}function _L(n,e,t=zr){const{immediate:i,deep:r,flush:s,once:a}=t,o=ta({},t),l=e&&i||!e&&s!=="post";let c;if(Jb){if(s==="sync"){const h=bue();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Pi,h.resume=Pi,h.pause=Pi,h}}const u=Ma;o.call=(h,p,m)=>tu(h,u,p,m);let d=!1;s==="post"?o.scheduler=h=>{lo(h,u&&u.suspense)}:s!=="sync"&&(d=!0,o.scheduler=(h,p)=>{p?h():gL(h)}),o.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=Uce(n,e,o);return Jb&&(c?c.push(f):l&&f()),f}function xue(n,e,t){const i=this.proxy,r=qt(n)?n.includes(".")?Gj(i,n):()=>i[n]:n.bind(i,i);let s;Xt(e)?s=e:(s=e.handler,t=e);const a=uA(this),o=_L(r,s.bind(i),t);return a(),o}function Gj(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}const Aue=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${So(e)}Modifiers`]||n[`${Sf(e)}Modifiers`];function wue(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||zr;let r=t;const s=e.startsWith("update:"),a=s&&Aue(i,e.slice(7));a&&(a.trim&&(r=t.map(u=>qt(u)?u.trim():u)),a.number&&(r=t.map(aD)));let o,l=i[o=J2(e)]||i[o=J2(So(e))];!l&&s&&(l=i[o=J2(Sf(e))]),l&&tu(l,n,6,r);const c=i[o+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,tu(c,n,6,r)}}function Wj(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let a={},o=!1;if(!Xt(n)){const l=c=>{const u=Wj(c,e,!0);u&&(o=!0,ta(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!o?(Rn(n)&&i.set(n,null),null):(Mt(s)?s.forEach(l=>a[l]=null):ta(a,s),Rn(n)&&i.set(n,a),a)}function nM(n,e){return!n||!q4(e)?!1:(e=e.slice(2).replace(/Once$/,""),vi(n,e[0].toLowerCase()+e.slice(1))||vi(n,Sf(e))||vi(n,e))}function pO(n){const{type:e,vnode:t,proxy:i,withProxy:r,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=n,v=rC(n);let g,y;try{if(t.shapeFlag&4){const b=r||i,A=b;g=Ru(c.call(A,b,u,d,h,f,p)),y=o}else{const b=e;g=Ru(b.length>1?b(d,{attrs:o,slots:a,emit:l}):b(d,null)),y=e.props?o:Sue(o)}}catch(b){rb.length=0,Q4(b,n,1),g=_e(js)}let x=g;if(y&&m!==!1){const b=Object.keys(y),{shapeFlag:A}=x;b.length&&A&7&&(s&&b.some(lL)&&(y=_ue(y,s)),x=df(x,y,!1,!0))}return t.dirs&&(x=df(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(t.dirs):t.dirs),t.transition&&rm(x,t.transition),g=x,rC(v),g}const Sue=n=>{let e;for(const t in n)(t==="class"||t==="style"||q4(t))&&((e||(e={}))[t]=n[t]);return e},_ue=(n,e)=>{const t={};for(const i in n)(!lL(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function Cue(n,e,t){const{props:i,children:r,component:s}=n,{props:a,children:o,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?mO(i,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(a[f]!==i[f]&&!nM(c,f))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?mO(i,a,c):!0:!!a;return!1}function mO(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!nM(t,s))return!0}return!1}function Mue({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const qj=n=>n.__isSuspense;function Tue(n,e){e&&e.pendingBranch?Mt(n)?e.effects.push(...n):e.effects.push(n):Hce(n)}const Kt=Symbol.for("v-fgt"),J1=Symbol.for("v-txt"),js=Symbol.for("v-cmt"),f5=Symbol.for("v-stc"),rb=[];let bl=null;function W(n=!1){rb.push(bl=n?null:[])}function Eue(){rb.pop(),bl=rb[rb.length-1]||null}let Zb=1;function vO(n,e=!1){Zb+=n,n<0&&bl&&e&&(bl.hasOnce=!0)}function Kj(n){return n.dynamicChildren=Zb>0?bl||Bg:null,Eue(),Zb>0&&bl&&bl.push(n),n}function ve(n,e,t,i,r,s){return Kj(be(n,e,t,i,r,s,!0))}function rt(n,e,t,i,r){return Kj(_e(n,e,t,i,r,!0))}function mr(n){return n?n.__v_isVNode===!0:!1}function x0(n,e){return n.type===e.type&&n.key===e.key}const Yj=({key:n})=>n??null,H3=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?qt(n)||ir(n)||Xt(n)?{i:da,r:n,k:e,f:!!t}:n:null);function be(n,e=null,t=null,i=0,r=null,s=n===Kt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Yj(e),ref:e&&H3(e),scopeId:hj,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:da};return o?(CL(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=qt(t)?8:16),Zb>0&&!a&&bl&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&bl.push(l),l}const _e=Iue;function Iue(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===Tj)&&(n=js),mr(n)){const o=df(n,e,!0);return t&&CL(o,t),Zb>0&&!s&&bl&&(o.shapeFlag&6?bl[bl.indexOf(n)]=o:bl.push(o)),o.patchFlag=-2,o}if(Nue(n)&&(n=n.__vccOpts),e){e=Yu(e);let{class:o,style:l}=e;o&&!qt(o)&&(e.class=j(o)),Rn(l)&&(vL(l)&&!Mt(l)&&(l=ta({},l)),e.style=jt(l))}const a=qt(n)?1:qj(n)?128:mj(n)?64:Rn(n)?4:Xt(n)?2:0;return be(n,e,t,i,r,a,s,!0)}function Yu(n){return n?vL(n)||Fj(n)?ta({},n):n:null}function df(n,e,t=!1,i=!1){const{props:r,ref:s,patchFlag:a,children:o,transition:l}=n,c=e?Kn(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&Yj(c),ref:e&&e.ref?t&&s?Mt(s)?s.concat(H3(e)):[s,H3(e)]:H3(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Kt?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&df(n.ssContent),ssFallback:n.ssFallback&&df(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&rm(u,l.clone(u)),u}function Hn(n=" ",e=0){return _e(J1,null,n,e)}function et(n="",e=!1){return e?(W(),rt(js,null,n)):_e(js,null,n)}function Ru(n){return n==null||typeof n=="boolean"?_e(js):Mt(n)?_e(Kt,null,n.slice()):mr(n)?Sh(n):_e(J1,null,String(n))}function Sh(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:df(n)}function CL(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Mt(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),CL(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!Fj(e)?e._ctx=da:r===3&&da&&(da.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Xt(e)?(e={default:e,_ctx:da},t=32):(e=String(e),i&64?(t=16,e=[Hn(e)]):t=8);n.children=e,n.shapeFlag|=t}function Kn(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=j([e.class,i.class]));else if(r==="style")e.style=jt([e.style,i.style]);else if(q4(r)){const s=e[r],a=i[r];a&&s!==a&&!(Mt(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=i[r])}return e}function bu(n,e,t,i=null){tu(n,e,7,[t,i])}const Due=Pj();let Rue=0;function Pue(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||Due,s={uid:Rue++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new HX(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nj(i,r),emitsOptions:Wj(i,r),emit:null,emitted:null,propsDefaults:zr,inheritAttrs:i.inheritAttrs,ctx:zr,data:zr,props:zr,attrs:zr,slots:zr,refs:zr,setupState:zr,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=wue.bind(null,s),n.ce&&n.ce(s),s}let Ma=null;const Nn=()=>Ma||da;let oC,vD;{const n=X4(),e=(t,i)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(i),s=>{r.length>1?r.forEach(a=>a(s)):r[0](s)}};oC=e("__VUE_INSTANCE_SETTERS__",t=>Ma=t),vD=e("__VUE_SSR_SETTERS__",t=>Jb=t)}const uA=n=>{const e=Ma;return oC(n),n.scope.on(),()=>{n.scope.off(),oC(e)}},gO=()=>{Ma&&Ma.scope.off(),oC(null)};function Xj(n){return n.vnode.shapeFlag&4}let Jb=!1;function Lue(n,e=!1,t=!1){e&&vD(e);const{props:i,children:r}=n.vnode,s=Xj(n);lue(n,i,s,e),fue(n,r,t);const a=s?kue(n,e):void 0;return e&&vD(!1),a}function kue(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,eue);const{setup:i}=t;if(i){bp();const r=n.setupContext=i.length>1?$j(n):null,s=uA(n),a=cA(i,n,0,[n.props,r]),o=Kb(a);if(xp(),s(),(o||n.sp)&&!zg(n)&&Sj(n),o){if(a.then(gO,gO),e)return a.then(l=>{yO(n,l)}).catch(l=>{Q4(l,n,0)});n.asyncDep=a}else yO(n,a)}else jj(n)}function yO(n,e,t){Xt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Rn(e)&&(n.setupState=oj(e)),jj(n)}function jj(n,e,t){const i=n.type;n.render||(n.render=i.render||Pi);{const r=uA(n);bp();try{tue(n)}finally{xp(),r()}}}const Fue={get(n,e){return Ka(n,"get",""),n[e]}};function $j(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,Fue),slots:n.slots,emit:n.emit,expose:e}}function iM(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(oj(tf(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ib)return ib[t](n)},has(e,t){return t in e||t in ib}})):n.proxy}function Bue(n,e=!0){return Xt(n)?n.displayName||n.name:n.name||e&&n.__name}function Nue(n){return Xt(n)&&"__vccOpts"in n}const V=(n,e)=>Nce(n,e,Jb);function en(n,e,t){const i=arguments.length;return i===2?Rn(e)&&!Mt(e)?mr(e)?_e(n,null,[e]):_e(n,e):_e(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&mr(t)&&(t=[t]),_e(n,e,t))}const Oue="3.5.13",Uue=Pi;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let gD;const bO=typeof window<"u"&&window.trustedTypes;if(bO)try{gD=bO.createPolicy("vue",{createHTML:n=>n})}catch{}const Qj=gD?n=>gD.createHTML(n):n=>n,zue="http://www.w3.org/2000/svg",Vue="http://www.w3.org/1998/Math/MathML",Fd=typeof document<"u"?document:null,xO=Fd&&Fd.createElement("template"),Hue={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e==="svg"?Fd.createElementNS(zue,n):e==="mathml"?Fd.createElementNS(Vue,n):t?Fd.createElement(n,{is:t}):Fd.createElement(n);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>Fd.createTextNode(n),createComment:n=>Fd.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Fd.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const a=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{xO.innerHTML=Qj(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const o=xO.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Of="transition",Gy="animation",u1=Symbol("_vtc"),Zj={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Jj=ta({},bj,Zj),Gue=n=>(n.displayName="Transition",n.props=Jj,n),na=Gue((n,{slots:e})=>en(Kce,e$(n),e)),Lp=(n,e=[])=>{Mt(n)?n.forEach(t=>t(...e)):n&&n(...e)},AO=n=>n?Mt(n)?n.some(e=>e.length>1):n.length>1:!1;function e$(n){const e={};for(const I in n)I in Zj||(e[I]=n[I]);if(n.css===!1)return e;const{name:t="v",type:i,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:o=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:h=`${t}-leave-to`}=n,p=Wue(r),m=p&&p[0],v=p&&p[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:x,onLeave:b,onLeaveCancelled:A,onBeforeAppear:S=g,onAppear:C=y,onAppearCancelled:_=x}=e,M=(I,L,F,B)=>{I._enterCancelled=B,mh(I,L?u:o),mh(I,L?c:a),F&&F()},T=(I,L)=>{I._isLeaving=!1,mh(I,d),mh(I,h),mh(I,f),L&&L()},E=I=>(L,F)=>{const B=I?C:y,P=()=>M(L,I,F);Lp(B,[L,P]),wO(()=>{mh(L,I?l:s),_u(L,I?u:o),AO(B)||SO(L,i,m,P)})};return ta(e,{onBeforeEnter(I){Lp(g,[I]),_u(I,s),_u(I,a)},onBeforeAppear(I){Lp(S,[I]),_u(I,l),_u(I,c)},onEnter:E(!1),onAppear:E(!0),onLeave(I,L){I._isLeaving=!0;const F=()=>T(I,L);_u(I,d),I._enterCancelled?(_u(I,f),yD()):(yD(),_u(I,f)),wO(()=>{I._isLeaving&&(mh(I,d),_u(I,h),AO(b)||SO(I,i,v,F))}),Lp(b,[I,F])},onEnterCancelled(I){M(I,!1,void 0,!0),Lp(x,[I])},onAppearCancelled(I){M(I,!0,void 0,!0),Lp(_,[I])},onLeaveCancelled(I){T(I),Lp(A,[I])}})}function Wue(n){if(n==null)return null;if(Rn(n))return[h5(n.enter),h5(n.leave)];{const e=h5(n);return[e,e]}}function h5(n){return nce(n)}function _u(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[u1]||(n[u1]=new Set)).add(e)}function mh(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const t=n[u1];t&&(t.delete(e),t.size||(n[u1]=void 0))}function wO(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let que=0;function SO(n,e,t,i){const r=n._endId=++que,s=()=>{r===n._endId&&i()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:o,propCount:l}=t$(n,e);if(!a)return i();const c=a+"end";let u=0;const d=()=>{n.removeEventListener(c,f),s()},f=h=>{h.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),n.addEventListener(c,f)}function t$(n,e){const t=window.getComputedStyle(n),i=p=>(t[p]||"").split(", "),r=i(`${Of}Delay`),s=i(`${Of}Duration`),a=_O(r,s),o=i(`${Gy}Delay`),l=i(`${Gy}Duration`),c=_O(o,l);let u=null,d=0,f=0;e===Of?a>0&&(u=Of,d=a,f=s.length):e===Gy?c>0&&(u=Gy,d=c,f=l.length):(d=Math.max(a,c),u=d>0?a>c?Of:Gy:null,f=u?u===Of?s.length:l.length:0);const h=u===Of&&/\b(transform|all)(,|$)/.test(i(`${Of}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function _O(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>CO(t)+CO(n[i])))}function CO(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function yD(){return document.body.offsetHeight}function Kue(n,e,t){const i=n[u1];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const lC=Symbol("_vod"),n$=Symbol("_vsh"),yi={beforeMount(n,{value:e},{transition:t}){n[lC]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Wy(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),Wy(n,!0),i.enter(n)):i.leave(n,()=>{Wy(n,!1)}):Wy(n,e))},beforeUnmount(n,{value:e}){Wy(n,e)}};function Wy(n,e){n.style.display=e?n[lC]:"none",n[n$]=!e}const Yue=Symbol(""),Xue=/(^|;)\s*display\s*:/;function jue(n,e,t){const i=n.style,r=qt(t);let s=!1;if(t&&!r){if(e)if(qt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&G3(i,o,"")}else for(const a in e)t[a]==null&&G3(i,a,"");for(const a in t)a==="display"&&(s=!0),G3(i,a,t[a])}else if(r){if(e!==t){const a=i[Yue];a&&(t+=";"+a),i.cssText=t,s=Xue.test(t)}}else e&&n.removeAttribute("style");lC in n&&(n[lC]=s?i.display:"",n[n$]&&(i.display="none"))}const MO=/\s*!important$/;function G3(n,e,t){if(Mt(t))t.forEach(i=>G3(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=$ue(n,e);MO.test(t)?n.setProperty(Sf(i),t.replace(MO,""),"important"):n[i]=t}}const TO=["Webkit","Moz","ms"],p5={};function $ue(n,e){const t=p5[e];if(t)return t;let i=So(e);if(i!=="filter"&&i in n)return p5[e]=i;i=lA(i);for(let r=0;r<TO.length;r++){const s=TO[r]+i;if(s in n)return p5[e]=s}return e}const EO="http://www.w3.org/1999/xlink";function IO(n,e,t,i,r,s=lce(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(EO,e.slice(6,e.length)):n.setAttributeNS(EO,e,t):t==null||s&&!OX(t)?n.removeAttribute(e):n.setAttribute(e,s?"":eu(t)?String(t):t)}function DO(n,e,t,i,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Qj(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(o!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const o=typeof n[e];o==="boolean"?t=OX(t):t==null&&o==="string"?(t="",a=!0):o==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(r||e)}function Eh(n,e,t,i){n.addEventListener(e,t,i)}function Que(n,e,t,i){n.removeEventListener(e,t,i)}const RO=Symbol("_vei");function Zue(n,e,t,i,r=null){const s=n[RO]||(n[RO]={}),a=s[e];if(i&&a)a.value=i;else{const[o,l]=Jue(e);if(i){const c=s[e]=nde(i,r);Eh(n,o,c,l)}else a&&(Que(n,o,a,l),s[e]=void 0)}}const PO=/(?:Once|Passive|Capture)$/;function Jue(n){let e;if(PO.test(n)){e={};let i;for(;i=n.match(PO);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Sf(n.slice(2)),e]}let m5=0;const ede=Promise.resolve(),tde=()=>m5||(ede.then(()=>m5=0),m5=Date.now());function nde(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;tu(ide(i,t.value),e,5,[i])};return t.value=n,t.attached=tde(),t}function ide(n,e){if(Mt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const LO=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,rde=(n,e,t,i,r,s)=>{const a=r==="svg";e==="class"?Kue(n,i,a):e==="style"?jue(n,t,i):q4(e)?lL(e)||Zue(n,e,t,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):sde(n,e,i,a))?(DO(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&IO(n,e,i,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!qt(i))?DO(n,So(e),i,s,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),IO(n,e,i,a))};function sde(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&LO(e)&&Xt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return LO(e)&&qt(t)?!1:e in n}const i$=new WeakMap,r$=new WeakMap,cC=Symbol("_moveCb"),kO=Symbol("_enterCb"),ade=n=>(delete n.props.mode,n),ode=ade({name:"TransitionGroup",props:ta({},Jj,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Nn(),i=yj();let r,s;return au(()=>{if(!r.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!dde(r[0].el,t.vnode.el,a))return;r.forEach(lde),r.forEach(cde);const o=r.filter(ude);yD(),o.forEach(l=>{const c=l.el,u=c.style;_u(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[cC]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[cC]=null,mh(c,a))};c.addEventListener("transitionend",d)})}),()=>{const a=Ki(n),o=e$(a);let l=a.tag||Kt;if(r=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(r.push(u),rm(u,Qb(u,o,i,t)),i$.set(u,u.el.getBoundingClientRect()))}s=e.default?yL(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&rm(u,Qb(u,o,i,t))}return _e(l,null,s)}}}),s$=ode;function lde(n){const e=n.el;e[cC]&&e[cC](),e[kO]&&e[kO]()}function cde(n){r$.set(n,n.el.getBoundingClientRect())}function ude(n){const e=i$.get(n),t=r$.get(n),i=e.left-t.left,r=e.top-t.top;if(i||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",n}}function dde(n,e,t){const i=n.cloneNode(),r=n[u1];r&&r.forEach(o=>{o.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),t.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(i);const{hasTransform:a}=t$(i);return s.removeChild(i),a}const d1=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Mt(e)?t=>z3(e,t):e};function fde(n){n.target.composing=!0}function FO(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const nf=Symbol("_assign"),rM={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n[nf]=d1(r);const s=i||r.props&&r.props.type==="number";Eh(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),s&&(o=aD(o)),n[nf](o)}),t&&Eh(n,"change",()=>{n.value=n.value.trim()}),e||(Eh(n,"compositionstart",fde),Eh(n,"compositionend",FO),Eh(n,"change",FO))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:r,number:s}},a){if(n[nf]=d1(a),n.composing)return;const o=(s||n.type==="number")&&!/^0\d/.test(n.value)?aD(n.value):n.value,l=e??"";o!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||r&&n.value.trim()===l)||(n.value=l))}},uC={deep:!0,created(n,e,t){n[nf]=d1(t),Eh(n,"change",()=>{const i=n._modelValue,r=o$(n),s=n.checked,a=n[nf];if(Mt(i)){const o=UX(i,r),l=o!==-1;if(s&&!l)a(i.concat(r));else if(!s&&l){const c=[...i];c.splice(o,1),a(c)}}else if(K4(i)){const o=new Set(i);s?o.add(r):o.delete(r),a(o)}else a(l$(n,s))})},mounted:BO,beforeUpdate(n,e,t){n[nf]=d1(t),BO(n,e,t)}};function BO(n,{value:e,oldValue:t},i){n._modelValue=e;let r;if(Mt(e))r=UX(e,i.props.value)>-1;else if(K4(e))r=e.has(i.props.value);else{if(e===t)return;r=c1(e,l$(n,!0))}n.checked!==r&&(n.checked=r)}const a$={created(n,{value:e},t){n.checked=c1(e,t.props.value),n[nf]=d1(t),Eh(n,"change",()=>{n[nf](o$(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n[nf]=d1(i),e!==t&&(n.checked=c1(e,i.props.value))}};function o$(n){return"_value"in n?n._value:n.value}function l$(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const hde=["ctrl","shift","alt","meta"],pde={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>hde.some(t=>n[`${t}Key`]&&!e.includes(t))},ln=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(r,...s)=>{for(let a=0;a<e.length;a++){const o=pde[e[a]];if(o&&o(r,e))return}return n(r,...s)})},mde={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Xi=(n,e)=>{const t=n._withKeys||(n._withKeys={}),i=e.join(".");return t[i]||(t[i]=r=>{if(!("key"in r))return;const s=Sf(r.key);if(e.some(a=>a===s||mde[a]===s))return n(r)})},vde=ta({patchProp:rde},Hue);let NO;function c$(){return NO||(NO=pue(vde))}const Jh=(...n)=>{c$().render(...n)},u$=(...n)=>{const e=c$().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=yde(i);if(!r)return;const s=e._component;!Xt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=t(r,!1,gde(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function gde(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function yde(n){return qt(n)?document.querySelector(n):n}const bde="2.9.6",OO=Symbol("INSTALLED_KEY"),d$=Symbol(),sb="el",xde="is-",kp=(n,e,t,i,r)=>{let s=`${n}-${e}`;return t&&(s+=`-${t}`),i&&(s+=`__${i}`),r&&(s+=`--${r}`),s},f$=Symbol("namespaceContextKey"),ML=n=>{const e=n||(Nn()?Nt(f$,ae(sb)):ae(sb));return V(()=>w(e)||sb)},St=(n,e)=>{const t=ML(e);return{namespace:t,b:(m="")=>kp(t.value,n,m,"",""),e:m=>m?kp(t.value,n,"",m,""):"",m:m=>m?kp(t.value,n,"","",m):"",be:(m,v)=>m&&v?kp(t.value,n,m,v,""):"",em:(m,v)=>m&&v?kp(t.value,n,"",m,v):"",bm:(m,v)=>m&&v?kp(t.value,n,m,"",v):"",bem:(m,v,g)=>m&&v&&g?kp(t.value,n,m,v,g):"",is:(m,...v)=>{const g=v.length>=1?v[0]:!0;return m&&g?`${xde}${m}`:""},cssVar:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${g}`]=m[g]);return v},cssVarName:m=>`--${t.value}-${m}`,cssVarBlock:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${n}-${g}`]=m[g]);return v},cssVarBlockName:m=>`--${t.value}-${n}-${m}`}};var h$=typeof global=="object"&&global&&global.Object===Object&&global,Ade=typeof self=="object"&&self&&self.Object===Object&&self,ou=h$||Ade||Function("return this")(),hc=ou.Symbol,p$=Object.prototype,wde=p$.hasOwnProperty,Sde=p$.toString,qy=hc?hc.toStringTag:void 0;function _de(n){var e=wde.call(n,qy),t=n[qy];try{n[qy]=void 0;var i=!0}catch{}var r=Sde.call(n);return i&&(e?n[qy]=t:delete n[qy]),r}var Cde=Object.prototype,Mde=Cde.toString;function Tde(n){return Mde.call(n)}var Ede="[object Null]",Ide="[object Undefined]",UO=hc?hc.toStringTag:void 0;function Tm(n){return n==null?n===void 0?Ide:Ede:UO&&UO in Object(n)?_de(n):Tde(n)}function Xu(n){return n!=null&&typeof n=="object"}var Dde="[object Symbol]";function sM(n){return typeof n=="symbol"||Xu(n)&&Tm(n)==Dde}function TL(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var _o=Array.isArray,zO=hc?hc.prototype:void 0,VO=zO?zO.toString:void 0;function m$(n){if(typeof n=="string")return n;if(_o(n))return TL(n,m$)+"";if(sM(n))return VO?VO.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var Rde=/\s/;function Pde(n){for(var e=n.length;e--&&Rde.test(n.charAt(e)););return e}var Lde=/^\s+/;function kde(n){return n&&n.slice(0,Pde(n)+1).replace(Lde,"")}function Co(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var HO=NaN,Fde=/^[-+]0x[0-9a-f]+$/i,Bde=/^0b[01]+$/i,Nde=/^0o[0-7]+$/i,Ode=parseInt;function GO(n){if(typeof n=="number")return n;if(sM(n))return HO;if(Co(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Co(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=kde(n);var t=Bde.test(n);return t||Nde.test(n)?Ode(n.slice(2),t?2:8):Fde.test(n)?HO:+n}function EL(n){return n}var Ude="[object AsyncFunction]",zde="[object Function]",Vde="[object GeneratorFunction]",Hde="[object Proxy]";function IL(n){if(!Co(n))return!1;var e=Tm(n);return e==zde||e==Vde||e==Ude||e==Hde}var v5=ou["__core-js_shared__"],WO=function(){var n=/[^.]+$/.exec(v5&&v5.keys&&v5.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Gde(n){return!!WO&&WO in n}var Wde=Function.prototype,qde=Wde.toString;function Em(n){if(n!=null){try{return qde.call(n)}catch{}try{return n+""}catch{}}return""}var Kde=/[\\^$.*+?()[\]{}|]/g,Yde=/^\[object .+?Constructor\]$/,Xde=Function.prototype,jde=Object.prototype,$de=Xde.toString,Qde=jde.hasOwnProperty,Zde=RegExp("^"+$de.call(Qde).replace(Kde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Jde(n){if(!Co(n)||Gde(n))return!1;var e=IL(n)?Zde:Yde;return e.test(Em(n))}function efe(n,e){return n==null?void 0:n[e]}function Im(n,e){var t=efe(n,e);return Jde(t)?t:void 0}var bD=Im(ou,"WeakMap"),qO=Object.create,tfe=function(){function n(){}return function(e){if(!Co(e))return{};if(qO)return qO(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function nfe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function ife(){}function v$(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var rfe=800,sfe=16,afe=Date.now;function ofe(n){var e=0,t=0;return function(){var i=afe(),r=sfe-(i-t);if(t=i,r>0){if(++e>=rfe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function lfe(n){return function(){return n}}var dC=function(){try{var n=Im(Object,"defineProperty");return n({},"",{}),n}catch{}}(),cfe=dC?function(n,e){return dC(n,"toString",{configurable:!0,enumerable:!1,value:lfe(e),writable:!0})}:EL,g$=ofe(cfe);function ufe(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}function y$(n,e,t,i){for(var r=n.length,s=t+(i?1:-1);i?s--:++s<r;)if(e(n[s],s,n))return s;return-1}function dfe(n){return n!==n}function ffe(n,e,t){for(var i=t-1,r=n.length;++i<r;)if(n[i]===e)return i;return-1}function hfe(n,e,t){return e===e?ffe(n,e,t):y$(n,dfe,t)}function pfe(n,e){var t=n==null?0:n.length;return!!t&&hfe(n,e,0)>-1}var mfe=9007199254740991,vfe=/^(?:0|[1-9]\d*)$/;function aM(n,e){var t=typeof n;return e=e??mfe,!!e&&(t=="number"||t!="symbol"&&vfe.test(n))&&n>-1&&n%1==0&&n<e}function DL(n,e,t){e=="__proto__"&&dC?dC(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function dA(n,e){return n===e||n!==n&&e!==e}var gfe=Object.prototype,yfe=gfe.hasOwnProperty;function RL(n,e,t){var i=n[e];(!(yfe.call(n,e)&&dA(i,t))||t===void 0&&!(e in n))&&DL(n,e,t)}function ey(n,e,t,i){var r=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=void 0;l===void 0&&(l=n[o]),r?DL(t,o,l):RL(t,o,l)}return t}var KO=Math.max;function b$(n,e,t){return e=KO(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=KO(i.length-e,0),a=Array(s);++r<s;)a[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=t(a),nfe(n,this,o)}}function x$(n,e){return g$(b$(n,e,EL),n+"")}var bfe=9007199254740991;function PL(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=bfe}function ty(n){return n!=null&&PL(n.length)&&!IL(n)}function xfe(n,e,t){if(!Co(t))return!1;var i=typeof e;return(i=="number"?ty(t)&&aM(e,t.length):i=="string"&&e in t)?dA(t[e],n):!1}function Afe(n){return x$(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,a&&xfe(t[0],t[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=t[i];o&&n(e,o,i,s)}return e})}var wfe=Object.prototype;function LL(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||wfe;return n===t}function Sfe(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var _fe="[object Arguments]";function YO(n){return Xu(n)&&Tm(n)==_fe}var A$=Object.prototype,Cfe=A$.hasOwnProperty,Mfe=A$.propertyIsEnumerable,ex=YO(function(){return arguments}())?YO:function(n){return Xu(n)&&Cfe.call(n,"callee")&&!Mfe.call(n,"callee")};function Tfe(){return!1}var w$=typeof wl=="object"&&wl&&!wl.nodeType&&wl,XO=w$&&typeof Sl=="object"&&Sl&&!Sl.nodeType&&Sl,Efe=XO&&XO.exports===w$,jO=Efe?ou.Buffer:void 0,Ife=jO?jO.isBuffer:void 0,tx=Ife||Tfe,Dfe="[object Arguments]",Rfe="[object Array]",Pfe="[object Boolean]",Lfe="[object Date]",kfe="[object Error]",Ffe="[object Function]",Bfe="[object Map]",Nfe="[object Number]",Ofe="[object Object]",Ufe="[object RegExp]",zfe="[object Set]",Vfe="[object String]",Hfe="[object WeakMap]",Gfe="[object ArrayBuffer]",Wfe="[object DataView]",qfe="[object Float32Array]",Kfe="[object Float64Array]",Yfe="[object Int8Array]",Xfe="[object Int16Array]",jfe="[object Int32Array]",$fe="[object Uint8Array]",Qfe="[object Uint8ClampedArray]",Zfe="[object Uint16Array]",Jfe="[object Uint32Array]",$r={};$r[qfe]=$r[Kfe]=$r[Yfe]=$r[Xfe]=$r[jfe]=$r[$fe]=$r[Qfe]=$r[Zfe]=$r[Jfe]=!0;$r[Dfe]=$r[Rfe]=$r[Gfe]=$r[Pfe]=$r[Wfe]=$r[Lfe]=$r[kfe]=$r[Ffe]=$r[Bfe]=$r[Nfe]=$r[Ofe]=$r[Ufe]=$r[zfe]=$r[Vfe]=$r[Hfe]=!1;function ehe(n){return Xu(n)&&PL(n.length)&&!!$r[Tm(n)]}function kL(n){return function(e){return n(e)}}var S$=typeof wl=="object"&&wl&&!wl.nodeType&&wl,ab=S$&&typeof Sl=="object"&&Sl&&!Sl.nodeType&&Sl,the=ab&&ab.exports===S$,g5=the&&h$.process,f1=function(){try{var n=ab&&ab.require&&ab.require("util").types;return n||g5&&g5.binding&&g5.binding("util")}catch{}}(),$O=f1&&f1.isTypedArray,FL=$O?kL($O):ehe,nhe=Object.prototype,ihe=nhe.hasOwnProperty;function _$(n,e){var t=_o(n),i=!t&&ex(n),r=!t&&!i&&tx(n),s=!t&&!i&&!r&&FL(n),a=t||i||r||s,o=a?Sfe(n.length,String):[],l=o.length;for(var c in n)(e||ihe.call(n,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||aM(c,l)))&&o.push(c);return o}function C$(n,e){return function(t){return n(e(t))}}var rhe=C$(Object.keys,Object),she=Object.prototype,ahe=she.hasOwnProperty;function ohe(n){if(!LL(n))return rhe(n);var e=[];for(var t in Object(n))ahe.call(n,t)&&t!="constructor"&&e.push(t);return e}function fA(n){return ty(n)?_$(n):ohe(n)}function lhe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var che=Object.prototype,uhe=che.hasOwnProperty;function dhe(n){if(!Co(n))return lhe(n);var e=LL(n),t=[];for(var i in n)i=="constructor"&&(e||!uhe.call(n,i))||t.push(i);return t}function hA(n){return ty(n)?_$(n,!0):dhe(n)}var fhe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hhe=/^\w*$/;function BL(n,e){if(_o(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||sM(n)?!0:hhe.test(n)||!fhe.test(n)||e!=null&&n in Object(e)}var nx=Im(Object,"create");function phe(){this.__data__=nx?nx(null):{},this.size=0}function mhe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var vhe="__lodash_hash_undefined__",ghe=Object.prototype,yhe=ghe.hasOwnProperty;function bhe(n){var e=this.__data__;if(nx){var t=e[n];return t===vhe?void 0:t}return yhe.call(e,n)?e[n]:void 0}var xhe=Object.prototype,Ahe=xhe.hasOwnProperty;function whe(n){var e=this.__data__;return nx?e[n]!==void 0:Ahe.call(e,n)}var She="__lodash_hash_undefined__";function _he(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=nx&&e===void 0?She:e,this}function sm(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}sm.prototype.clear=phe;sm.prototype.delete=mhe;sm.prototype.get=bhe;sm.prototype.has=whe;sm.prototype.set=_he;function Che(){this.__data__=[],this.size=0}function oM(n,e){for(var t=n.length;t--;)if(dA(n[t][0],e))return t;return-1}var Mhe=Array.prototype,The=Mhe.splice;function Ehe(n){var e=this.__data__,t=oM(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():The.call(e,t,1),--this.size,!0}function Ihe(n){var e=this.__data__,t=oM(e,n);return t<0?void 0:e[t][1]}function Dhe(n){return oM(this.__data__,n)>-1}function Rhe(n,e){var t=this.__data__,i=oM(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Mf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Mf.prototype.clear=Che;Mf.prototype.delete=Ehe;Mf.prototype.get=Ihe;Mf.prototype.has=Dhe;Mf.prototype.set=Rhe;var ix=Im(ou,"Map");function Phe(){this.size=0,this.__data__={hash:new sm,map:new(ix||Mf),string:new sm}}function Lhe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function lM(n,e){var t=n.__data__;return Lhe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function khe(n){var e=lM(this,n).delete(n);return this.size-=e?1:0,e}function Fhe(n){return lM(this,n).get(n)}function Bhe(n){return lM(this,n).has(n)}function Nhe(n,e){var t=lM(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function Tf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Tf.prototype.clear=Phe;Tf.prototype.delete=khe;Tf.prototype.get=Fhe;Tf.prototype.has=Bhe;Tf.prototype.set=Nhe;var Ohe="Expected a function";function cM(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Ohe);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var a=n.apply(this,i);return t.cache=s.set(r,a)||s,a};return t.cache=new(cM.Cache||Tf),t}cM.Cache=Tf;var Uhe=500;function zhe(n){var e=cM(n,function(i){return t.size===Uhe&&t.clear(),i}),t=e.cache;return e}var Vhe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hhe=/\\(\\)?/g,Ghe=zhe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Vhe,function(t,i,r,s){e.push(r?s.replace(Hhe,"$1"):i||t)}),e});function Whe(n){return n==null?"":m$(n)}function ny(n,e){return _o(n)?n:BL(n,e)?[n]:Ghe(Whe(n))}function iy(n){if(typeof n=="string"||sM(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function uM(n,e){e=ny(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[iy(e[t++])];return t&&t==i?n:void 0}function fs(n,e,t){var i=n==null?void 0:uM(n,e);return i===void 0?t:i}function NL(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var QO=hc?hc.isConcatSpreadable:void 0;function qhe(n){return _o(n)||ex(n)||!!(QO&&n&&n[QO])}function pA(n,e,t,i,r){var s=-1,a=n.length;for(t||(t=qhe),r||(r=[]);++s<a;){var o=n[s];e>0&&t(o)?e>1?pA(o,e-1,t,i,r):NL(r,o):i||(r[r.length]=o)}return r}function M$(n){var e=n==null?0:n.length;return e?pA(n,1):[]}function T$(n){return g$(b$(n,void 0,M$),n+"")}var OL=C$(Object.getPrototypeOf,Object),Khe="[object Object]",Yhe=Function.prototype,Xhe=Object.prototype,E$=Yhe.toString,jhe=Xhe.hasOwnProperty,$he=E$.call(Object);function I$(n){if(!Xu(n)||Tm(n)!=Khe)return!1;var e=OL(n);if(e===null)return!0;var t=jhe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&E$.call(t)==$he}function Qhe(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+e];return s}function Xa(){if(!arguments.length)return[];var n=arguments[0];return _o(n)?n:[n]}function Zhe(){this.__data__=new Mf,this.size=0}function Jhe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function epe(n){return this.__data__.get(n)}function tpe(n){return this.__data__.has(n)}var npe=200;function ipe(n,e){var t=this.__data__;if(t instanceof Mf){var i=t.__data__;if(!ix||i.length<npe-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Tf(i)}return t.set(n,e),this.size=t.size,this}function jc(n){var e=this.__data__=new Mf(n);this.size=e.size}jc.prototype.clear=Zhe;jc.prototype.delete=Jhe;jc.prototype.get=epe;jc.prototype.has=tpe;jc.prototype.set=ipe;function rpe(n,e){return n&&ey(e,fA(e),n)}function spe(n,e){return n&&ey(e,hA(e),n)}var D$=typeof wl=="object"&&wl&&!wl.nodeType&&wl,ZO=D$&&typeof Sl=="object"&&Sl&&!Sl.nodeType&&Sl,ape=ZO&&ZO.exports===D$,JO=ape?ou.Buffer:void 0,e9=JO?JO.allocUnsafe:void 0;function R$(n,e){if(e)return n.slice();var t=n.length,i=e9?e9(t):new n.constructor(t);return n.copy(i),i}function ope(n,e){for(var t=-1,i=n==null?0:n.length,r=0,s=[];++t<i;){var a=n[t];e(a,t,n)&&(s[r++]=a)}return s}function P$(){return[]}var lpe=Object.prototype,cpe=lpe.propertyIsEnumerable,t9=Object.getOwnPropertySymbols,UL=t9?function(n){return n==null?[]:(n=Object(n),ope(t9(n),function(e){return cpe.call(n,e)}))}:P$;function upe(n,e){return ey(n,UL(n),e)}var dpe=Object.getOwnPropertySymbols,L$=dpe?function(n){for(var e=[];n;)NL(e,UL(n)),n=OL(n);return e}:P$;function fpe(n,e){return ey(n,L$(n),e)}function k$(n,e,t){var i=e(n);return _o(n)?i:NL(i,t(n))}function xD(n){return k$(n,fA,UL)}function F$(n){return k$(n,hA,L$)}var AD=Im(ou,"DataView"),wD=Im(ou,"Promise"),Hg=Im(ou,"Set"),n9="[object Map]",hpe="[object Object]",i9="[object Promise]",r9="[object Set]",s9="[object WeakMap]",a9="[object DataView]",ppe=Em(AD),mpe=Em(ix),vpe=Em(wD),gpe=Em(Hg),ype=Em(bD),Vc=Tm;(AD&&Vc(new AD(new ArrayBuffer(1)))!=a9||ix&&Vc(new ix)!=n9||wD&&Vc(wD.resolve())!=i9||Hg&&Vc(new Hg)!=r9||bD&&Vc(new bD)!=s9)&&(Vc=function(n){var e=Tm(n),t=e==hpe?n.constructor:void 0,i=t?Em(t):"";if(i)switch(i){case ppe:return a9;case mpe:return n9;case vpe:return i9;case gpe:return r9;case ype:return s9}return e});var bpe=Object.prototype,xpe=bpe.hasOwnProperty;function Ape(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&xpe.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var fC=ou.Uint8Array;function zL(n){var e=new n.constructor(n.byteLength);return new fC(e).set(new fC(n)),e}function wpe(n,e){var t=e?zL(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var Spe=/\w*$/;function _pe(n){var e=new n.constructor(n.source,Spe.exec(n));return e.lastIndex=n.lastIndex,e}var o9=hc?hc.prototype:void 0,l9=o9?o9.valueOf:void 0;function Cpe(n){return l9?Object(l9.call(n)):{}}function B$(n,e){var t=e?zL(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Mpe="[object Boolean]",Tpe="[object Date]",Epe="[object Map]",Ipe="[object Number]",Dpe="[object RegExp]",Rpe="[object Set]",Ppe="[object String]",Lpe="[object Symbol]",kpe="[object ArrayBuffer]",Fpe="[object DataView]",Bpe="[object Float32Array]",Npe="[object Float64Array]",Ope="[object Int8Array]",Upe="[object Int16Array]",zpe="[object Int32Array]",Vpe="[object Uint8Array]",Hpe="[object Uint8ClampedArray]",Gpe="[object Uint16Array]",Wpe="[object Uint32Array]";function qpe(n,e,t){var i=n.constructor;switch(e){case kpe:return zL(n);case Mpe:case Tpe:return new i(+n);case Fpe:return wpe(n,t);case Bpe:case Npe:case Ope:case Upe:case zpe:case Vpe:case Hpe:case Gpe:case Wpe:return B$(n,t);case Epe:return new i;case Ipe:case Ppe:return new i(n);case Dpe:return _pe(n);case Rpe:return new i;case Lpe:return Cpe(n)}}function N$(n){return typeof n.constructor=="function"&&!LL(n)?tfe(OL(n)):{}}var Kpe="[object Map]";function Ype(n){return Xu(n)&&Vc(n)==Kpe}var c9=f1&&f1.isMap,Xpe=c9?kL(c9):Ype,jpe="[object Set]";function $pe(n){return Xu(n)&&Vc(n)==jpe}var u9=f1&&f1.isSet,Qpe=u9?kL(u9):$pe,Zpe=1,Jpe=2,e0e=4,O$="[object Arguments]",t0e="[object Array]",n0e="[object Boolean]",i0e="[object Date]",r0e="[object Error]",U$="[object Function]",s0e="[object GeneratorFunction]",a0e="[object Map]",o0e="[object Number]",z$="[object Object]",l0e="[object RegExp]",c0e="[object Set]",u0e="[object String]",d0e="[object Symbol]",f0e="[object WeakMap]",h0e="[object ArrayBuffer]",p0e="[object DataView]",m0e="[object Float32Array]",v0e="[object Float64Array]",g0e="[object Int8Array]",y0e="[object Int16Array]",b0e="[object Int32Array]",x0e="[object Uint8Array]",A0e="[object Uint8ClampedArray]",w0e="[object Uint16Array]",S0e="[object Uint32Array]",qr={};qr[O$]=qr[t0e]=qr[h0e]=qr[p0e]=qr[n0e]=qr[i0e]=qr[m0e]=qr[v0e]=qr[g0e]=qr[y0e]=qr[b0e]=qr[a0e]=qr[o0e]=qr[z$]=qr[l0e]=qr[c0e]=qr[u0e]=qr[d0e]=qr[x0e]=qr[A0e]=qr[w0e]=qr[S0e]=!0;qr[r0e]=qr[U$]=qr[f0e]=!1;function Gg(n,e,t,i,r,s){var a,o=e&Zpe,l=e&Jpe,c=e&e0e;if(t&&(a=r?t(n,i,r,s):t(n)),a!==void 0)return a;if(!Co(n))return n;var u=_o(n);if(u){if(a=Ape(n),!o)return v$(n,a)}else{var d=Vc(n),f=d==U$||d==s0e;if(tx(n))return R$(n,o);if(d==z$||d==O$||f&&!r){if(a=l||f?{}:N$(n),!o)return l?fpe(n,spe(a,n)):upe(n,rpe(a,n))}else{if(!qr[d])return r?n:{};a=qpe(n,d,o)}}s||(s=new jc);var h=s.get(n);if(h)return h;s.set(n,a),Qpe(n)?n.forEach(function(v){a.add(Gg(v,e,t,v,n,s))}):Xpe(n)&&n.forEach(function(v,g){a.set(g,Gg(v,e,t,g,n,s))});var p=c?l?F$:xD:l?hA:fA,m=u?void 0:p(n);return ufe(m||n,function(v,g){m&&(g=v,v=n[g]),RL(a,g,Gg(v,e,t,g,n,s))}),a}var _0e=4;function d9(n){return Gg(n,_0e)}var C0e=1,M0e=4;function hC(n){return Gg(n,C0e|M0e)}var T0e="__lodash_hash_undefined__";function E0e(n){return this.__data__.set(n,T0e),this}function I0e(n){return this.__data__.has(n)}function rx(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Tf;++e<t;)this.add(n[e])}rx.prototype.add=rx.prototype.push=E0e;rx.prototype.has=I0e;function D0e(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function V$(n,e){return n.has(e)}var R0e=1,P0e=2;function H$(n,e,t,i,r,s){var a=t&R0e,o=n.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var d=-1,f=!0,h=t&P0e?new rx:void 0;for(s.set(n,e),s.set(e,n);++d<o;){var p=n[d],m=e[d];if(i)var v=a?i(m,p,d,e,n,s):i(p,m,d,n,e,s);if(v!==void 0){if(v)continue;f=!1;break}if(h){if(!D0e(e,function(g,y){if(!V$(h,y)&&(p===g||r(p,g,t,i,s)))return h.push(y)})){f=!1;break}}else if(!(p===m||r(p,m,t,i,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function L0e(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}function VL(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var k0e=1,F0e=2,B0e="[object Boolean]",N0e="[object Date]",O0e="[object Error]",U0e="[object Map]",z0e="[object Number]",V0e="[object RegExp]",H0e="[object Set]",G0e="[object String]",W0e="[object Symbol]",q0e="[object ArrayBuffer]",K0e="[object DataView]",f9=hc?hc.prototype:void 0,y5=f9?f9.valueOf:void 0;function Y0e(n,e,t,i,r,s,a){switch(t){case K0e:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case q0e:return!(n.byteLength!=e.byteLength||!s(new fC(n),new fC(e)));case B0e:case N0e:case z0e:return dA(+n,+e);case O0e:return n.name==e.name&&n.message==e.message;case V0e:case G0e:return n==e+"";case U0e:var o=L0e;case H0e:var l=i&k0e;if(o||(o=VL),n.size!=e.size&&!l)return!1;var c=a.get(n);if(c)return c==e;i|=F0e,a.set(n,e);var u=H$(o(n),o(e),i,r,s,a);return a.delete(n),u;case W0e:if(y5)return y5.call(n)==y5.call(e)}return!1}var X0e=1,j0e=Object.prototype,$0e=j0e.hasOwnProperty;function Q0e(n,e,t,i,r,s){var a=t&X0e,o=xD(n),l=o.length,c=xD(e),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var f=o[d];if(!(a?f in e:$0e.call(e,f)))return!1}var h=s.get(n),p=s.get(e);if(h&&p)return h==e&&p==n;var m=!0;s.set(n,e),s.set(e,n);for(var v=a;++d<l;){f=o[d];var g=n[f],y=e[f];if(i)var x=a?i(y,g,f,e,n,s):i(g,y,f,n,e,s);if(!(x===void 0?g===y||r(g,y,t,i,s):x)){m=!1;break}v||(v=f=="constructor")}if(m&&!v){var b=n.constructor,A=e.constructor;b!=A&&"constructor"in n&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof A=="function"&&A instanceof A)&&(m=!1)}return s.delete(n),s.delete(e),m}var Z0e=1,h9="[object Arguments]",p9="[object Array]",sw="[object Object]",J0e=Object.prototype,m9=J0e.hasOwnProperty;function eme(n,e,t,i,r,s){var a=_o(n),o=_o(e),l=a?p9:Vc(n),c=o?p9:Vc(e);l=l==h9?sw:l,c=c==h9?sw:c;var u=l==sw,d=c==sw,f=l==c;if(f&&tx(n)){if(!tx(e))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new jc),a||FL(n)?H$(n,e,t,i,r,s):Y0e(n,e,l,t,i,r,s);if(!(t&Z0e)){var h=u&&m9.call(n,"__wrapped__"),p=d&&m9.call(e,"__wrapped__");if(h||p){var m=h?n.value():n,v=p?e.value():e;return s||(s=new jc),r(m,v,t,i,s)}}return f?(s||(s=new jc),Q0e(n,e,t,i,r,s)):!1}function dM(n,e,t,i,r){return n===e?!0:n==null||e==null||!Xu(n)&&!Xu(e)?n!==n&&e!==e:eme(n,e,t,i,dM,r)}var tme=1,nme=2;function ime(n,e,t,i){var r=t.length,s=r;if(n==null)return!s;for(n=Object(n);r--;){var a=t[r];if(a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++r<s;){a=t[r];var o=a[0],l=n[o],c=a[1];if(a[2]){if(l===void 0&&!(o in n))return!1}else{var u=new jc,d;if(!(d===void 0?dM(c,l,tme|nme,i,u):d))return!1}}return!0}function G$(n){return n===n&&!Co(n)}function rme(n){for(var e=fA(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,G$(r)]}return e}function W$(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function sme(n){var e=rme(n);return e.length==1&&e[0][2]?W$(e[0][0],e[0][1]):function(t){return t===n||ime(t,n,e)}}function ame(n,e){return n!=null&&e in Object(n)}function ome(n,e,t){e=ny(e,n);for(var i=-1,r=e.length,s=!1;++i<r;){var a=iy(e[i]);if(!(s=n!=null&&t(n,a)))break;n=n[a]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&PL(r)&&aM(a,r)&&(_o(n)||ex(n)))}function q$(n,e){return n!=null&&ome(n,e,ame)}var lme=1,cme=2;function ume(n,e){return BL(n)&&G$(e)?W$(iy(n),e):function(t){var i=fs(t,n);return i===void 0&&i===e?q$(t,n):dM(e,i,lme|cme)}}function dme(n){return function(e){return e==null?void 0:e[n]}}function fme(n){return function(e){return uM(e,n)}}function hme(n){return BL(n)?dme(iy(n)):fme(n)}function K$(n){return typeof n=="function"?n:n==null?EL:typeof n=="object"?_o(n)?ume(n[0],n[1]):sme(n):hme(n)}function pme(n){return function(e,t,i){for(var r=-1,s=Object(e),a=i(e),o=a.length;o--;){var l=a[++r];if(t(s[l],l,s)===!1)break}return e}}var Y$=pme();function mme(n,e){return n&&Y$(n,e,fA)}function vme(n,e){return function(t,i){if(t==null)return t;if(!ty(t))return n(t,i);for(var r=t.length,s=-1,a=Object(t);++s<r&&i(a[s],s,a)!==!1;);return t}}var gme=vme(mme),b5=function(){return ou.Date.now()},yme="Expected a function",bme=Math.max,xme=Math.min;function Jo(n,e,t){var i,r,s,a,o,l,c=0,u=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(yme);e=GO(e)||0,Co(t)&&(u=!!t.leading,d="maxWait"in t,s=d?bme(GO(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function h(S){var C=i,_=r;return i=r=void 0,c=S,a=n.apply(_,C),a}function p(S){return c=S,o=setTimeout(g,e),u?h(S):a}function m(S){var C=S-l,_=S-c,M=e-C;return d?xme(M,s-_):M}function v(S){var C=S-l,_=S-c;return l===void 0||C>=e||C<0||d&&_>=s}function g(){var S=b5();if(v(S))return y(S);o=setTimeout(g,m(S))}function y(S){return o=void 0,f&&i?h(S):(i=r=void 0,a)}function x(){o!==void 0&&clearTimeout(o),c=0,i=l=r=o=void 0}function b(){return o===void 0?a:y(b5())}function A(){var S=b5(),C=v(S);if(i=arguments,r=this,l=S,C){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(g,e),h(l)}return o===void 0&&(o=setTimeout(g,e)),a}return A.cancel=x,A.flush=b,A}function SD(n,e,t){(t!==void 0&&!dA(n[e],t)||t===void 0&&!(e in n))&&DL(n,e,t)}function X$(n){return Xu(n)&&ty(n)}function _D(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function Ame(n){return ey(n,hA(n))}function wme(n,e,t,i,r,s,a){var o=_D(n,t),l=_D(e,t),c=a.get(l);if(c){SD(n,t,c);return}var u=s?s(o,l,t+"",n,e,a):void 0,d=u===void 0;if(d){var f=_o(l),h=!f&&tx(l),p=!f&&!h&&FL(l);u=l,f||h||p?_o(o)?u=o:X$(o)?u=v$(o):h?(d=!1,u=R$(l,!0)):p?(d=!1,u=B$(l,!0)):u=[]:I$(l)||ex(l)?(u=o,ex(o)?u=Ame(o):(!Co(o)||IL(o))&&(u=N$(l))):d=!1}d&&(a.set(l,u),r(u,l,i,s,a),a.delete(l)),SD(n,t,u)}function j$(n,e,t,i,r){n!==e&&Y$(e,function(s,a){if(r||(r=new jc),Co(s))wme(n,e,a,t,j$,i,r);else{var o=i?i(_D(n,a),s,a+"",n,e,r):void 0;o===void 0&&(o=s),SD(n,a,o)}},hA)}function Sme(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function $$(n,e,t){var i=n==null?0:n.length;if(!i)return-1;var r=i-1;return y$(n,K$(e),r,!0)}function _me(n,e){var t=-1,i=ty(n)?Array(n.length):[];return gme(n,function(r,s,a){i[++t]=e(r,s,a)}),i}function Cme(n,e){var t=_o(n)?TL:_me;return t(n,K$(e))}function Mme(n,e){return pA(Cme(n,e),1)}var Tme=1/0;function Eme(n){var e=n==null?0:n.length;return e?pA(n,Tme):[]}function sx(n){for(var e=-1,t=n==null?0:n.length,i={};++e<t;){var r=n[e];i[r[0]]=r[1]}return i}function Ime(n,e){return e.length<2?n:uM(n,Qhe(e,0,-1))}function ha(n,e){return dM(n,e)}function Us(n){return n==null}function mA(n){return n===null}function Q$(n){return n===void 0}var Z$=Afe(function(n,e,t){j$(n,e,t)});function Dme(n,e){return e=ny(e,n),n=Ime(n,e),n==null||delete n[iy(Sme(e))]}function Rme(n){return I$(n)?void 0:n}var Pme=1,Lme=2,kme=4,Fme=T$(function(n,e){var t={};if(n==null)return t;var i=!1;e=TL(e,function(s){return s=ny(s,n),i||(i=s.length>1),s}),ey(n,F$(n),t),i&&(t=Gg(t,Pme|Lme|kme,Rme));for(var r=e.length;r--;)Dme(t,e[r]);return t});function J$(n,e,t,i){if(!Co(n))return n;e=ny(e,n);for(var r=-1,s=e.length,a=s-1,o=n;o!=null&&++r<s;){var l=iy(e[r]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=a){var u=o[l];c=void 0,c===void 0&&(c=Co(u)?u:aM(e[r+1])?[]:{})}RL(o,l,c),o=o[l]}return n}function Bme(n,e,t){for(var i=-1,r=e.length,s={};++i<r;){var a=e[i],o=uM(n,a);t(o,a)&&J$(s,ny(a,n),o)}return s}function Nme(n,e){return Bme(n,e,function(t,i){return q$(n,i)})}var Gc=T$(function(n,e){return n==null?{}:Nme(n,e)});function Ome(n,e,t){return n==null?n:J$(n,e,t)}var Ume="Expected a function";function K0(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(Ume);return Co(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),Jo(n,e,{leading:i,maxWait:e,trailing:r})}var zme=1/0,Vme=Hg&&1/VL(new Hg([,-0]))[1]==zme?function(n){return new Hg(n)}:ife,Hme=200;function Gme(n,e,t){var i=-1,r=pfe,s=n.length,a=!0,o=[],l=o;if(s>=Hme){var c=Vme(n);if(c)return VL(c);a=!1,r=V$,l=new rx}else l=o;e:for(;++i<s;){var u=n[i],d=u;if(u=u!==0?u:0,a&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;o.push(u)}else r(l,d,t)||(l!==o&&l.push(d),o.push(u))}return o}var x5=x$(function(n){return Gme(pA(n,1,X$,!0))});const bi=n=>n===void 0,ji=n=>typeof n=="boolean",Jt=n=>typeof n=="number",vl=n=>!n&&n!==0||Mt(n)&&n.length===0||Rn(n)&&!Object.keys(n).length,bo=n=>typeof Element>"u"?!1:n instanceof Element,$c=n=>Us(n),Wme=n=>qt(n)?!Number.isNaN(Number(n)):!1,fM=n=>n===window;var qme=Object.defineProperty,Kme=Object.defineProperties,Yme=Object.getOwnPropertyDescriptors,v9=Object.getOwnPropertySymbols,Xme=Object.prototype.hasOwnProperty,jme=Object.prototype.propertyIsEnumerable,g9=(n,e,t)=>e in n?qme(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$me=(n,e)=>{for(var t in e||(e={}))Xme.call(e,t)&&g9(n,t,e[t]);if(v9)for(var t of v9(e))jme.call(e,t)&&g9(n,t,e[t]);return n},Qme=(n,e)=>Kme(n,Yme(e));function CD(n,e){var t;const i=Ui();return Js(()=>{i.value=n()},Qme($me({},e),{flush:(t=void 0)!=null?t:"sync"})),Z1(i)}var y9;const li=typeof window<"u",Zme=n=>typeof n<"u",MD=n=>typeof n=="function",Jme=n=>typeof n=="string",h1=()=>{},pC=li&&((y9=window==null?void 0:window.navigator)==null?void 0:y9.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ep(n){return typeof n=="function"?n():w(n)}function eQ(n,e){function t(...i){return new Promise((r,s)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(r).catch(s)})}return t}function eve(n,e={}){let t,i,r=h1;const s=o=>{clearTimeout(o),r(),r=h1};return o=>{const l=ep(n),c=ep(e.maxWait);return t&&s(t),l<=0||c!==void 0&&c<=0?(i&&(s(i),i=null),Promise.resolve(o())):new Promise((u,d)=>{r=e.rejectOnCancel?d:u,c&&!i&&(i=setTimeout(()=>{t&&s(t),i=null,u(o())},c)),t=setTimeout(()=>{i&&s(i),i=null,u(o())},l)})}}function tve(n,e=!0,t=!0,i=!1){let r=0,s,a=!0,o=h1,l;const c=()=>{s&&(clearTimeout(s),s=void 0,o(),o=h1)};return d=>{const f=ep(n),h=Date.now()-r,p=()=>l=d();return c(),f<=0?(r=Date.now(),p()):(h>f&&(t||!a)?(r=Date.now(),p()):e&&(l=new Promise((m,v)=>{o=i?v:m,s=setTimeout(()=>{r=Date.now(),a=!0,m(p()),c()},Math.max(0,f-h))})),!t&&!s&&(s=setTimeout(()=>a=!0,f)),a=!1,l)}}function nve(n){return n}function ive(n,e){let t,i,r;const s=ae(!0),a=()=>{s.value=!0,r()};pt(n,a,{flush:"sync"});const o=MD(e)?e:e.get,l=MD(e)?void 0:e.set,c=Lce((u,d)=>(i=u,r=d,{get(){return s.value&&(t=o(),s.value=!1),i(),t},set(f){l==null||l(f)}}));return Object.isExtensible(c)&&(c.trigger=a),c}function vA(n){return GX()?(WX(n),!0):!1}function rve(n,e=200,t={}){return eQ(eve(e,t),n)}function sve(n,e=200,t={}){const i=ae(n.value),r=rve(()=>{i.value=n.value},e,t);return pt(n,()=>r()),i}function tQ(n,e=200,t=!1,i=!0,r=!1){return eQ(tve(e,t,i,r),n)}function HL(n,e=!0){Nn()?Mn(n):e?n():Yt(n)}function am(n,e,t={}){const{immediate:i=!0}=t,r=ae(!1);let s=null;function a(){s&&(clearTimeout(s),s=null)}function o(){r.value=!1,a()}function l(...c){a(),r.value=!0,s=setTimeout(()=>{r.value=!1,s=null,n(...c)},ep(e))}return i&&(r.value=!0,li&&l()),vA(o),{isPending:Z1(r),start:l,stop:o}}function go(n){var e;const t=ep(n);return(e=t==null?void 0:t.$el)!=null?e:t}const wp=li?window:void 0,ave=li?window.document:void 0;function Li(...n){let e,t,i,r;if(Jme(n[0])||Array.isArray(n[0])?([t,i,r]=n,e=wp):[e,t,i,r]=n,!e)return h1;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],a=()=>{s.forEach(u=>u()),s.length=0},o=(u,d,f,h)=>(u.addEventListener(d,f,h),()=>u.removeEventListener(d,f,h)),l=pt(()=>[go(e),ep(r)],([u,d])=>{a(),u&&s.push(...t.flatMap(f=>i.map(h=>o(u,f,h,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),a()};return vA(c),c}let b9=!1;function GL(n,e,t={}){const{window:i=wp,ignore:r=[],capture:s=!0,detectIframe:a=!1}=t;if(!i)return;pC&&!b9&&(b9=!0,Array.from(i.document.body.children).forEach(f=>f.addEventListener("click",h1)));let o=!0;const l=f=>r.some(h=>{if(typeof h=="string")return Array.from(i.document.querySelectorAll(h)).some(p=>p===f.target||f.composedPath().includes(p));{const p=go(h);return p&&(f.target===p||f.composedPath().includes(p))}}),u=[Li(i,"click",f=>{const h=go(n);if(!(!h||h===f.target||f.composedPath().includes(h))){if(f.detail===0&&(o=!l(f)),!o){o=!0;return}e(f)}},{passive:!0,capture:s}),Li(i,"pointerdown",f=>{const h=go(n);h&&(o=!f.composedPath().includes(h)&&!l(f))},{passive:!0}),a&&Li(i,"blur",f=>{var h;const p=go(n);((h=i.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(p!=null&&p.contains(i.document.activeElement))&&e(f)})].filter(Boolean);return()=>u.forEach(f=>f())}function ove(n={}){var e;const{window:t=wp}=n,i=(e=n.document)!=null?e:t==null?void 0:t.document,r=ive(()=>null,()=>i==null?void 0:i.activeElement);return t&&(Li(t,"blur",s=>{s.relatedTarget===null&&r.trigger()},!0),Li(t,"focus",r.trigger,!0)),r}function nQ(n,e=!1){const t=ae(),i=()=>t.value=!!n();return i(),HL(i,e),t}function lve(n){return JSON.parse(JSON.stringify(n))}const x9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},A9="__vueuse_ssr_handlers__";x9[A9]=x9[A9]||{};function cve(n,e,{window:t=wp,initialValue:i=""}={}){const r=ae(i),s=V(()=>{var a;return go(e)||((a=t==null?void 0:t.document)==null?void 0:a.documentElement)});return pt([s,()=>ep(n)],([a,o])=>{var l;if(a&&t){const c=(l=t.getComputedStyle(a).getPropertyValue(o))==null?void 0:l.trim();r.value=c||i}},{immediate:!0}),pt(r,a=>{var o;(o=s.value)!=null&&o.style&&s.value.style.setProperty(ep(n),a)}),r}function uve({document:n=ave}={}){if(!n)return ae("visible");const e=ae(n.visibilityState);return Li(n,"visibilitychange",()=>{e.value=n.visibilityState}),e}var w9=Object.getOwnPropertySymbols,dve=Object.prototype.hasOwnProperty,fve=Object.prototype.propertyIsEnumerable,hve=(n,e)=>{var t={};for(var i in n)dve.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&w9)for(var i of w9(n))e.indexOf(i)<0&&fve.call(n,i)&&(t[i]=n[i]);return t};function Fr(n,e,t={}){const i=t,{window:r=wp}=i,s=hve(i,["window"]);let a;const o=nQ(()=>r&&"ResizeObserver"in r),l=()=>{a&&(a.disconnect(),a=void 0)},c=pt(()=>go(n),d=>{l(),o.value&&r&&d&&(a=new ResizeObserver(e),a.observe(d,s))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return vA(u),{isSupported:o,stop:u}}function S9(n,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:r=!0,immediate:s=!0}=e,a=ae(0),o=ae(0),l=ae(0),c=ae(0),u=ae(0),d=ae(0),f=ae(0),h=ae(0);function p(){const m=go(n);if(!m){t&&(a.value=0,o.value=0,l.value=0,c.value=0,u.value=0,d.value=0,f.value=0,h.value=0);return}const v=m.getBoundingClientRect();a.value=v.height,o.value=v.bottom,l.value=v.left,c.value=v.right,u.value=v.top,d.value=v.width,f.value=v.x,h.value=v.y}return Fr(n,p),pt(()=>go(n),m=>!m&&p()),r&&Li("scroll",p,{capture:!0,passive:!0}),i&&Li("resize",p,{passive:!0}),HL(()=>{s&&p()}),{height:a,bottom:o,left:l,right:c,top:u,width:d,x:f,y:h,update:p}}var _9=Object.getOwnPropertySymbols,pve=Object.prototype.hasOwnProperty,mve=Object.prototype.propertyIsEnumerable,vve=(n,e)=>{var t={};for(var i in n)pve.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&_9)for(var i of _9(n))e.indexOf(i)<0&&mve.call(n,i)&&(t[i]=n[i]);return t};function iQ(n,e,t={}){const i=t,{window:r=wp}=i,s=vve(i,["window"]);let a;const o=nQ(()=>r&&"MutationObserver"in r),l=()=>{a&&(a.disconnect(),a=void 0)},c=pt(()=>go(n),d=>{l(),o.value&&r&&d&&(a=new MutationObserver(e),a.observe(d,s))},{immediate:!0}),u=()=>{l(),c()};return vA(u),{isSupported:o,stop:u}}var C9;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(C9||(C9={}));var gve=Object.defineProperty,M9=Object.getOwnPropertySymbols,yve=Object.prototype.hasOwnProperty,bve=Object.prototype.propertyIsEnumerable,T9=(n,e,t)=>e in n?gve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xve=(n,e)=>{for(var t in e||(e={}))yve.call(e,t)&&T9(n,t,e[t]);if(M9)for(var t of M9(e))bve.call(e,t)&&T9(n,t,e[t]);return n};const Ave={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};xve({linear:nve},Ave);function rQ(n,e,t,i={}){var r,s,a;const{clone:o=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=i,f=Nn(),h=t||(f==null?void 0:f.emit)||((r=f==null?void 0:f.$emit)==null?void 0:r.bind(f))||((a=(s=f==null?void 0:f.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(f==null?void 0:f.proxy));let p=c;e||(e="modelValue"),p=c||p||`update:${e.toString()}`;const m=g=>o?MD(o)?o(g):lve(g):g,v=()=>Zme(n[e])?m(n[e]):d;if(l){const g=v(),y=ae(g);return pt(()=>n[e],x=>y.value=m(x)),pt(y,x=>{(x!==n[e]||u)&&h(p,x)},{deep:u}),y}else return V({get(){return v()},set(g){h(p,g)}})}function wve({window:n=wp}={}){if(!n)return ae(!1);const e=ae(n.document.hasFocus());return Li(n,"blur",()=>{e.value=!1}),Li(n,"focus",()=>{e.value=!0}),e}function Sve(n={}){const{window:e=wp,initialWidth:t=1/0,initialHeight:i=1/0,listenOrientation:r=!0,includeScrollbar:s=!0}=n,a=ae(t),o=ae(i),l=()=>{e&&(s?(a.value=e.innerWidth,o.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,o.value=e.document.documentElement.clientHeight))};return l(),HL(l),Li("resize",l,{passive:!0}),r&&Li("orientationchange",l,{passive:!0}),{width:a,height:o}}class _ve extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Rs(n,e){throw new _ve(`[${n}] ${e}`)}const E9={current:0},I9=ae(0),sQ=2e3,D9=Symbol("elZIndexContextKey"),aQ=Symbol("zIndexContextKey"),ry=n=>{const e=Nn()?Nt(D9,E9):E9,t=n||(Nn()?Nt(aQ,void 0):void 0),i=V(()=>{const a=w(t);return Jt(a)?a:sQ}),r=V(()=>i.value+I9.value),s=()=>(e.current++,I9.value=e.current,r.value);return!li&&Nt(D9),{initialZIndex:i,currentZIndex:r,nextZIndex:s}};var Cve={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Mve=n=>(e,t)=>Tve(e,t,w(n)),Tve=(n,e,t)=>fs(t,n,n).replace(/\{(\w+)\}/g,(i,r)=>{var s;return`${(s=e==null?void 0:e[r])!=null?s:`{${r}}`}`}),Eve=n=>{const e=V(()=>w(n).name),t=ir(n)?n:ae(n);return{lang:e,locale:t,t:Mve(n)}},oQ=Symbol("localeContextKey"),ci=n=>{const e=n||Nt(oQ,ae());return Eve(V(()=>e.value||Cve))},lQ="__epPropKey",Ke=n=>n,Ive=n=>Rn(n)&&!!n[lQ],lu=(n,e)=>{if(!Rn(n)||Ive(n))return n;const{values:t,required:i,default:r,type:s,validator:a}=n,l={type:s,required:!!i,validator:t||a?c=>{let u=!1,d=[];if(t&&(d=Array.from(t),vi(n,"default")&&d.push(r),u||(u=d.includes(c))),a&&(u||(u=a(c))),!u&&d.length>0){const f=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");Uue(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${f}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[lQ]:!0};return vi(n,"default")&&(l.default=r),l},Et=n=>sx(Object.entries(n).map(([e,t])=>[e,lu(t,e)])),rd=["","default","small","large"],ws=lu({type:String,values:rd,required:!1}),cQ=Symbol("size"),uQ=()=>{const n=Nt(cQ,{});return V(()=>w(n.size)||"")},dQ=Symbol("emptyValuesContextKey"),Dve=["",void 0,null],Rve=void 0,sy=Et({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:n=>Xt(n)?!n():!n}}),hM=(n,e)=>{const t=Nn()?Nt(dQ,ae({})):ae({}),i=V(()=>n.emptyValues||t.value.emptyValues||Dve),r=V(()=>Xt(n.valueOnClear)?n.valueOnClear():n.valueOnClear!==void 0?n.valueOnClear:Xt(t.value.valueOnClear)?t.value.valueOnClear():t.value.valueOnClear!==void 0?t.value.valueOnClear:e!==void 0?e:Rve),s=a=>i.value.includes(a);return i.value.includes(r.value),{emptyValues:i,valueOnClear:r,isEmptyValue:s}},p1=n=>Object.keys(n),fQ=n=>Object.entries(n),ob=(n,e,t)=>({get value(){return fs(n,e,t)},set value(i){Ome(n,e,i)}}),mC=ae();function pM(n,e=void 0){const t=Nn()?Nt(d$,mC):mC;return n?V(()=>{var i,r;return(r=(i=t.value)==null?void 0:i[n])!=null?r:e}):t}function mM(n,e){const t=pM(),i=St(n,V(()=>{var o;return((o=t.value)==null?void 0:o.namespace)||sb})),r=ci(V(()=>{var o;return(o=t.value)==null?void 0:o.locale})),s=ry(V(()=>{var o;return((o=t.value)==null?void 0:o.zIndex)||sQ})),a=V(()=>{var o;return w(e)||((o=t.value)==null?void 0:o.size)||""});return WL(V(()=>w(t)||{})),{ns:i,locale:r,zIndex:s,size:a}}const WL=(n,e,t=!1)=>{var i;const r=!!Nn(),s=r?pM():void 0,a=(i=e==null?void 0:e.provide)!=null?i:r?Qn:void 0;if(!a)return;const o=V(()=>{const l=w(n);return s!=null&&s.value?Pve(s.value,l):l});return a(d$,o),a(oQ,V(()=>o.value.locale)),a(f$,V(()=>o.value.namespace)),a(aQ,V(()=>o.value.zIndex)),a(cQ,{size:V(()=>o.value.size||"")}),a(dQ,V(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(t||!mC.value)&&(mC.value=o.value),o},Pve=(n,e)=>{const t=[...new Set([...p1(n),...p1(e)])],i={};for(const r of t)i[r]=e[r]!==void 0?e[r]:n[r];return i},Lve=(n=[])=>({version:bde,install:(t,i)=>{t[OO]||(t[OO]=!0,n.forEach(r=>t.use(r)),i&&WL(i,t,!0))}}),Tn="update:modelValue",zi="change",Ea="input",kve=Et({zIndex:{type:Ke([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Fve={scroll:({scrollTop:n,fixed:e})=>Jt(n)&&ji(e),[zi]:n=>ji(n)};var It=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t};function Bve(n,e,t,i){const r=t-e;return n/=i/2,n<1?r/2*n*n*n+e:r/2*((n-=2)*n*n+2)+e}const tp=n=>li?window.requestAnimationFrame(n):setTimeout(n,16),om=n=>li?window.cancelAnimationFrame(n):clearTimeout(n),hQ=(n="")=>n.split(" ").filter(e=>!!e.trim()),qo=(n,e)=>{if(!n||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return n.classList.contains(e)},tc=(n,e)=>{!n||!e.trim()||n.classList.add(...hQ(e))},Za=(n,e)=>{!n||!e.trim()||n.classList.remove(...hQ(e))},Gd=(n,e)=>{var t;if(!li||!n||!e)return"";let i=So(e);i==="float"&&(i="cssFloat");try{const r=n.style[i];if(r)return r;const s=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return s?s[i]:""}catch{return n.style[i]}},pQ=(n,e,t)=>{if(!(!n||!e))if(Rn(e))fQ(e).forEach(([i,r])=>pQ(n,i,r));else{const i=So(e);n.style[i]=t}};function Hr(n,e="px"){if(!n)return"";if(Jt(n)||Wme(n))return`${n}${e}`;if(qt(n))return n}const Nve=(n,e)=>{if(!li)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=Gd(n,t);return["scroll","auto","overlay"].some(r=>i.includes(r))},qL=(n,e)=>{if(!li)return;let t=n;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(Nve(t,e))return t;t=t.parentNode}return t};let aw;const mQ=n=>{var e;if(!li)return 0;if(aw!==void 0)return aw;const t=document.createElement("div");t.className=`${n}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const s=r.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),aw=i-s,aw};function KL(n,e){if(!li)return;if(!e){n.scrollTop=0;return}const t=[];let i=e.offsetParent;for(;i!==null&&n!==i&&n.contains(i);)t.push(i),i=i.offsetParent;const r=e.offsetTop+t.reduce((l,c)=>l+c.offsetTop,0),s=r+e.offsetHeight,a=n.scrollTop,o=a+n.clientHeight;r<a?n.scrollTop=r:s>o&&(n.scrollTop=s-n.clientHeight)}function Ove(n,e,t,i,r){const s=Date.now();let a;const o=()=>{const c=Date.now()-s,u=Bve(c>i?i:c,e,t,i);fM(n)?n.scrollTo(window.pageXOffset,u):n.scrollTop=u,c<i?a=tp(o):Xt(r)&&r()};return o(),()=>{a&&om(a)}}const R9=(n,e)=>fM(e)?n.ownerDocument.documentElement:e,P9=n=>fM(n)?window.scrollY:n.scrollTop,vQ="ElAffix",Uve=Ie({name:vQ}),zve=Ie({...Uve,props:kve,emits:Fve,setup(n,{expose:e,emit:t}){const i=n,r=St("affix"),s=Ui(),a=Ui(),o=Ui(),{height:l}=Sve(),{height:c,width:u,top:d,bottom:f,update:h}=S9(a,{windowScroll:!1}),p=S9(s),m=ae(!1),v=ae(0),g=ae(0),y=V(()=>({height:m.value?`${c.value}px`:"",width:m.value?`${u.value}px`:""})),x=V(()=>{if(!m.value)return{};const S=i.offset?Hr(i.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:i.position==="top"?S:"",bottom:i.position==="bottom"?S:"",transform:g.value?`translateY(${g.value}px)`:"",zIndex:i.zIndex}}),b=()=>{if(!o.value)return;v.value=o.value instanceof Window?document.documentElement.scrollTop:o.value.scrollTop||0;const{position:S,target:C,offset:_}=i,M=_+c.value;if(S==="top")if(C){const T=p.bottom.value-M;m.value=_>d.value&&p.bottom.value>0,g.value=T<0?T:0}else m.value=_>d.value;else if(C){const T=l.value-p.top.value-M;m.value=l.value-_<f.value&&l.value>p.top.value,g.value=T<0?-T:0}else m.value=l.value-_<f.value},A=()=>{h(),t("scroll",{scrollTop:v.value,fixed:m.value})};return pt(m,S=>t("change",S)),Mn(()=>{var S;i.target?(s.value=(S=document.querySelector(i.target))!=null?S:void 0,s.value||Rs(vQ,`Target does not exist: ${i.target}`)):s.value=document.documentElement,o.value=qL(a.value,!0),h()}),Li(o,"scroll",A),Js(b),e({update:b,updateRoot:h}),(S,C)=>(W(),ve("div",{ref_key:"root",ref:a,class:j(w(r).b()),style:jt(w(y))},[be("div",{class:j({[w(r).m("fixed")]:m.value}),style:jt(w(x))},[Qe(S.$slots,"default")],6)],6))}});var Vve=It(zve,[["__file","affix.vue"]]);const xn=(n,e)=>{if(n.install=t=>{for(const i of[n,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))n[t]=i;return n},gQ=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),Hve=(n,e)=>(n.install=t=>{t.directive(e,n)},n),Or=n=>(n.install=Pi,n),Gve=xn(Vve),Wve=Et({size:{type:Ke([Number,String])},color:{type:String}}),qve=Ie({name:"ElIcon",inheritAttrs:!1}),Kve=Ie({...qve,props:Wve,setup(n){const e=n,t=St("icon"),i=V(()=>{const{size:r,color:s}=e;return!r&&!s?{}:{fontSize:bi(r)?void 0:Hr(r),"--color":s}});return(r,s)=>(W(),ve("i",Kn({class:w(t).b(),style:w(i)},r.$attrs),[Qe(r.$slots,"default")],16))}});var Yve=It(Kve,[["__file","icon.vue"]]);const Ut=xn(Yve);/*! Element Plus Icons Vue v2.3.1 */var Xve=Ie({name:"ArrowDown",__name:"arrow-down",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),Ef=Xve,jve=Ie({name:"ArrowLeft",__name:"arrow-left",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),np=jve,$ve=Ie({name:"ArrowRight",__name:"arrow-right",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),xo=$ve,Qve=Ie({name:"ArrowUp",__name:"arrow-up",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),YL=Qve,Zve=Ie({name:"Back",__name:"back",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),be("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),Jve=Zve,ege=Ie({name:"Calendar",__name:"calendar",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),tge=ege,nge=Ie({name:"CaretRight",__name:"caret-right",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),yQ=nge,ige=Ie({name:"CaretTop",__name:"caret-top",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),rge=ige,sge=Ie({name:"Check",__name:"check",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),gA=sge,age=Ie({name:"CircleCheckFilled",__name:"circle-check-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),oge=age,lge=Ie({name:"CircleCheck",__name:"circle-check",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),be("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),XL=lge,cge=Ie({name:"CircleCloseFilled",__name:"circle-close-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),jL=cge,uge=Ie({name:"CircleClose",__name:"circle-close",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),be("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),If=uge,dge=Ie({name:"Clock",__name:"clock",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),be("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),be("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),bQ=dge,fge=Ie({name:"Close",__name:"close",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),nu=fge,hge=Ie({name:"DArrowLeft",__name:"d-arrow-left",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),ip=hge,pge=Ie({name:"DArrowRight",__name:"d-arrow-right",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),rp=pge,mge=Ie({name:"Delete",__name:"delete",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),vge=mge,gge=Ie({name:"Document",__name:"document",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),yge=gge,bge=Ie({name:"FullScreen",__name:"full-screen",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),xge=bge,Age=Ie({name:"Hide",__name:"hide",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),be("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),wge=Age,Sge=Ie({name:"HomeFilled",__name:"home-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 128 128 447.936V896h255.936V640H640v256h255.936V447.936z"})]))}}),_ge=Sge,Cge=Ie({name:"InfoFilled",__name:"info-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),$L=Cge,Mge=Ie({name:"Loading",__name:"loading",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),ju=Mge,Tge=Ie({name:"Minus",__name:"minus",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),Ege=Tge,Ige=Ie({name:"MoreFilled",__name:"more-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),L9=Ige,Dge=Ie({name:"More",__name:"more",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),Rge=Dge,Pge=Ie({name:"PictureFilled",__name:"picture-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),Lge=Pge,kge=Ie({name:"Plus",__name:"plus",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),xQ=kge,Fge=Ie({name:"QuestionFilled",__name:"question-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),Bge=Fge,Nge=Ie({name:"RefreshLeft",__name:"refresh-left",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),Oge=Nge,Uge=Ie({name:"RefreshRight",__name:"refresh-right",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),zge=Uge,Vge=Ie({name:"ScaleToOriginal",__name:"scale-to-original",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),Hge=Vge,Gge=Ie({name:"Search",__name:"search",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),Wge=Gge,qge=Ie({name:"SortDown",__name:"sort-down",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),Kge=qge,Yge=Ie({name:"SortUp",__name:"sort-up",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),Xge=Yge,jge=Ie({name:"StarFilled",__name:"star-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),ow=jge,$ge=Ie({name:"Star",__name:"star",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),Qge=$ge,Zge=Ie({name:"SuccessFilled",__name:"success-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),QL=Zge,Jge=Ie({name:"View",__name:"view",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),e1e=Jge,t1e=Ie({name:"WarningFilled",__name:"warning-filled",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),vM=t1e,n1e=Ie({name:"ZoomIn",__name:"zoom-in",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),AQ=n1e,i1e=Ie({name:"ZoomOut",__name:"zoom-out",setup(n){return(e,t)=>(W(),ve("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[be("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),r1e=i1e;const Hi=Ke([String,Object,Function]),ZL={Close:nu},JL={Close:nu,SuccessFilled:QL,InfoFilled:$L,WarningFilled:vM,CircleCloseFilled:jL},sp={success:QL,warning:vM,error:jL,info:$L},gM={validating:ju,success:XL,error:If},s1e=["light","dark"],a1e=Et({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:p1(sp),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:s1e,default:"light"}}),o1e={close:n=>n instanceof MouseEvent},l1e=Ie({name:"ElAlert"}),c1e=Ie({...l1e,props:a1e,emits:o1e,setup(n,{emit:e}){const t=n,{Close:i}=JL,r=Ps(),s=St("alert"),a=ae(!0),o=V(()=>sp[t.type]),l=V(()=>!!(t.description||r.default)),c=u=>{a.value=!1,e("close",u)};return(u,d)=>(W(),rt(na,{name:w(s).b("fade"),persisted:""},{default:Re(()=>[Cn(be("div",{class:j([w(s).b(),w(s).m(u.type),w(s).is("center",u.center),w(s).is(u.effect)]),role:"alert"},[u.showIcon&&w(o)?(W(),rt(w(Ut),{key:0,class:j([w(s).e("icon"),{[w(s).is("big")]:w(l)}])},{default:Re(()=>[(W(),rt(On(w(o))))]),_:1},8,["class"])):et("v-if",!0),be("div",{class:j(w(s).e("content"))},[u.title||u.$slots.title?(W(),ve("span",{key:0,class:j([w(s).e("title"),{"with-description":w(l)}])},[Qe(u.$slots,"title",{},()=>[Hn(Tt(u.title),1)])],2)):et("v-if",!0),w(l)?(W(),ve("p",{key:1,class:j(w(s).e("description"))},[Qe(u.$slots,"default",{},()=>[Hn(Tt(u.description),1)])],2)):et("v-if",!0),u.closable?(W(),ve(Kt,{key:2},[u.closeText?(W(),ve("div",{key:0,class:j([w(s).e("close-btn"),w(s).is("customed")]),onClick:c},Tt(u.closeText),3)):(W(),rt(w(Ut),{key:1,class:j(w(s).e("close-btn")),onClick:c},{default:Re(()=>[_e(w(i))]),_:1},8,["class"]))],64)):et("v-if",!0)],2)],2),[[yi,a.value]])]),_:3},8,["name"]))}});var u1e=It(c1e,[["__file","alert.vue"]]);const d1e=xn(u1e),yM=()=>li&&/firefox/i.test(window.navigator.userAgent);let Eo;const f1e={height:"0",visibility:"hidden",overflow:yM()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},h1e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function p1e(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),r=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:h1e.map(a=>[a,e.getPropertyValue(a)]),paddingSize:i,borderSize:r,boxSizing:t}}function k9(n,e=1,t){var i;Eo||(Eo=document.createElement("textarea"),document.body.appendChild(Eo));const{paddingSize:r,borderSize:s,boxSizing:a,contextStyle:o}=p1e(n);o.forEach(([d,f])=>Eo==null?void 0:Eo.style.setProperty(d,f)),Object.entries(f1e).forEach(([d,f])=>Eo==null?void 0:Eo.style.setProperty(d,f,"important")),Eo.value=n.value||n.placeholder||"";let l=Eo.scrollHeight;const c={};a==="border-box"?l=l+s:a==="content-box"&&(l=l-r),Eo.value="";const u=Eo.scrollHeight-r;if(Jt(e)){let d=u*e;a==="border-box"&&(d=d+r+s),l=Math.max(d,l),c.minHeight=`${d}px`}if(Jt(t)){let d=u*t;a==="border-box"&&(d=d+r+s),l=Math.min(d,l)}return c.height=`${l}px`,(i=Eo.parentNode)==null||i.removeChild(Eo),Eo=void 0,c}const Br=n=>n,m1e=Et({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),ga=n=>Gc(m1e,n),ek=Et({id:{type:String,default:void 0},size:ws,disabled:Boolean,modelValue:{type:Ke([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Ke([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Hi},prefixIcon:{type:Hi},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Ke([Object,Array,String]),default:()=>Br({})},autofocus:Boolean,rows:{type:Number,default:2},...ga(["ariaLabel"])}),v1e={[Tn]:n=>qt(n),input:n=>qt(n),change:n=>qt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},g1e=["class","style"],y1e=/^on[A-Z]/,yA=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,i=V(()=>((t==null?void 0:t.value)||[]).concat(g1e)),r=Nn();return V(r?()=>{var s;return sx(Object.entries((s=r.proxy)==null?void 0:s.$attrs).filter(([a])=>!i.value.includes(a)&&!(e&&y1e.test(a))))}:()=>({}))},Dm=Symbol("formContextKey"),$u=Symbol("formItemContextKey"),F9={prefix:Math.floor(Math.random()*1e4),current:0},b1e=Symbol("elIdInjection"),tk=()=>Nn()?Nt(b1e,F9):F9,ma=n=>{const e=tk(),t=ML();return CD(()=>w(n)||`${t.value}-id-${e.prefix}-${e.current++}`)},La=()=>{const n=Nt(Dm,void 0),e=Nt($u,void 0);return{form:n,formItem:e}},bc=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=ae(!1)),i||(i=ae(!1));const r=ae();let s;const a=V(()=>{var o;return!!(!(n.label||n.ariaLabel)&&e&&e.inputIds&&((o=e.inputIds)==null?void 0:o.length)<=1)});return Mn(()=>{s=pt([Ii(n,"id"),t],([o,l])=>{const c=o??(l?void 0:ma().value);c!==r.value&&(e!=null&&e.removeInputId&&(r.value&&e.removeInputId(r.value),!(i!=null&&i.value)&&!l&&c&&e.addInputId(c)),r.value=c)},{immediate:!0})}),Ap(()=>{s&&s(),e!=null&&e.removeInputId&&r.value&&e.removeInputId(r.value)}),{isLabeledByFormItem:a,inputId:r}},wQ=n=>{const e=Nn();return V(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[n]})},gs=(n,e={})=>{const t=ae(void 0),i=e.prop?t:wQ("size"),r=e.global?t:uQ(),s=e.form?{size:void 0}:Nt(Dm,void 0),a=e.formItem?{size:void 0}:Nt($u,void 0);return V(()=>i.value||w(n)||(a==null?void 0:a.size)||(s==null?void 0:s.size)||r.value||"")},ka=n=>{const e=wQ("disabled"),t=Nt(Dm,void 0);return V(()=>e.value||w(n)||(t==null?void 0:t.disabled)||!1)};function Sp(n,{beforeFocus:e,afterFocus:t,beforeBlur:i,afterBlur:r}={}){const s=Nn(),{emit:a}=s,o=Ui(),l=ae(!1),c=f=>{Xt(e)&&e(f)||l.value||(l.value=!0,a("focus",f),t==null||t())},u=f=>{var h;Xt(i)&&i(f)||f.relatedTarget&&((h=o.value)!=null&&h.contains(f.relatedTarget))||(l.value=!1,a("blur",f),r==null||r())},d=()=>{var f,h;(f=o.value)!=null&&f.contains(document.activeElement)&&o.value!==document.activeElement||(h=n.value)==null||h.focus()};return pt(o,f=>{f&&f.setAttribute("tabindex","-1")}),Li(o,"focus",c,!0),Li(o,"blur",u,!0),Li(o,"click",d,!0),{isFocused:l,wrapperRef:o,handleFocus:c,handleBlur:u}}const x1e=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function bA({afterComposition:n,emit:e}){const t=ae(!1),i=o=>{e==null||e("compositionstart",o),t.value=!0},r=o=>{var l;e==null||e("compositionupdate",o);const c=(l=o.target)==null?void 0:l.value,u=c[c.length-1]||"";t.value=!x1e(u)},s=o=>{e==null||e("compositionend",o),t.value&&(t.value=!1,Yt(()=>n(o)))};return{isComposing:t,handleComposition:o=>{o.type==="compositionend"?s(o):r(o)},handleCompositionStart:i,handleCompositionUpdate:r,handleCompositionEnd:s}}function A1e(n){let e;function t(){if(n.value==null)return;const{selectionStart:r,selectionEnd:s,value:a}=n.value;if(r==null||s==null)return;const o=a.slice(0,Math.max(0,r)),l=a.slice(Math.max(0,s));e={selectionStart:r,selectionEnd:s,value:a,beforeTxt:o,afterTxt:l}}function i(){if(n.value==null||e==null)return;const{value:r}=n.value,{beforeTxt:s,afterTxt:a,selectionStart:o}=e;if(s==null||a==null||o==null)return;let l=r.length;if(r.endsWith(a))l=r.length-a.length;else if(r.startsWith(s))l=s.length;else{const c=s[o-1],u=r.indexOf(c,o-1);u!==-1&&(l=u+1)}n.value.setSelectionRange(l,l)}return[t,i]}const w1e=Ie({name:"ElInput",inheritAttrs:!1}),S1e=Ie({...w1e,props:ek,emits:v1e,setup(n,{expose:e,emit:t}){const i=n,r=Cf(),s=yA(),a=Ps(),o=V(()=>[i.type==="textarea"?m.b():p.b(),p.m(f.value),p.is("disabled",h.value),p.is("exceed",te.value),{[p.b("group")]:a.prepend||a.append,[p.m("prefix")]:a.prefix||i.prefixIcon,[p.m("suffix")]:a.suffix||i.suffixIcon||i.clearable||i.showPassword,[p.bm("suffix","password-clear")]:O.value&&N.value,[p.b("hidden")]:i.type==="hidden"},r.class]),l=V(()=>[p.e("wrapper"),p.is("focus",_.value)]),{form:c,formItem:u}=La(),{inputId:d}=bc(i,{formItemContext:u}),f=gs(),h=ka(),p=St("input"),m=St("textarea"),v=Ui(),g=Ui(),y=ae(!1),x=ae(!1),b=ae(),A=Ui(i.inputStyle),S=V(()=>v.value||g.value),{wrapperRef:C,isFocused:_,handleFocus:M,handleBlur:T}=Sp(S,{beforeFocus(){return h.value},afterBlur(){var ge;i.validateEvent&&((ge=u==null?void 0:u.validate)==null||ge.call(u,"blur").catch(Oe=>void 0))}}),E=V(()=>{var ge;return(ge=c==null?void 0:c.statusIcon)!=null?ge:!1}),I=V(()=>(u==null?void 0:u.validateState)||""),L=V(()=>I.value&&gM[I.value]),F=V(()=>x.value?e1e:wge),B=V(()=>[r.style]),P=V(()=>[i.inputStyle,A.value,{resize:i.resize}]),z=V(()=>Us(i.modelValue)?"":String(i.modelValue)),O=V(()=>i.clearable&&!h.value&&!i.readonly&&!!z.value&&(_.value||y.value)),N=V(()=>i.showPassword&&!h.value&&!!z.value&&(!!z.value||_.value)),H=V(()=>i.showWordLimit&&!!i.maxlength&&(i.type==="text"||i.type==="textarea")&&!h.value&&!i.readonly&&!i.showPassword),q=V(()=>z.value.length),te=V(()=>!!H.value&&q.value>Number(i.maxlength)),Q=V(()=>!!a.suffix||!!i.suffixIcon||O.value||i.showPassword||H.value||!!I.value&&E.value),[ee,de]=A1e(v);Fr(g,ge=>{if(Te(),!H.value||i.resize!=="both")return;const Oe=ge[0],{width:je}=Oe.contentRect;b.value={right:`calc(100% - ${je+15+6}px)`}});const J=()=>{const{type:ge,autosize:Oe}=i;if(!(!li||ge!=="textarea"||!g.value))if(Oe){const je=Rn(Oe)?Oe.minRows:void 0,bt=Rn(Oe)?Oe.maxRows:void 0,At=k9(g.value,je,bt);A.value={overflowY:"hidden",...At},Yt(()=>{g.value.offsetHeight,A.value=At})}else A.value={minHeight:k9(g.value).minHeight}},Te=(ge=>{let Oe=!1;return()=>{var je;if(Oe||!i.autosize)return;((je=g.value)==null?void 0:je.offsetParent)===null||(ge(),Oe=!0)}})(J),De=()=>{const ge=S.value,Oe=i.formatter?i.formatter(z.value):z.value;!ge||ge.value===Oe||(ge.value=Oe)},Le=async ge=>{ee();let{value:Oe}=ge.target;if(i.formatter&&i.parser&&(Oe=i.parser(Oe)),!Y.value){if(Oe===z.value){De();return}t(Tn,Oe),t("input",Oe),await Yt(),De(),de()}},Ne=ge=>{let{value:Oe}=ge.target;i.formatter&&i.parser&&(Oe=i.parser(Oe)),t("change",Oe)},{isComposing:Y,handleCompositionStart:oe,handleCompositionUpdate:ne,handleCompositionEnd:Xe}=bA({emit:t,afterComposition:Le}),ke=()=>{ee(),x.value=!x.value,setTimeout(de)},Ge=()=>{var ge;return(ge=S.value)==null?void 0:ge.focus()},He=()=>{var ge;return(ge=S.value)==null?void 0:ge.blur()},qe=ge=>{y.value=!1,t("mouseleave",ge)},tt=ge=>{y.value=!0,t("mouseenter",ge)},pe=ge=>{t("keydown",ge)},G=()=>{var ge;(ge=S.value)==null||ge.select()},Z=()=>{t(Tn,""),t("change",""),t("clear"),t("input","")};return pt(()=>i.modelValue,()=>{var ge;Yt(()=>J()),i.validateEvent&&((ge=u==null?void 0:u.validate)==null||ge.call(u,"change").catch(Oe=>void 0))}),pt(z,()=>De()),pt(()=>i.type,async()=>{await Yt(),De(),J()}),Mn(()=>{!i.formatter&&i.parser,De(),Yt(J)}),e({input:v,textarea:g,ref:S,textareaStyle:P,autosize:Ii(i,"autosize"),isComposing:Y,focus:Ge,blur:He,select:G,clear:Z,resizeTextarea:J}),(ge,Oe)=>(W(),ve("div",{class:j([w(o),{[w(p).bm("group","append")]:ge.$slots.append,[w(p).bm("group","prepend")]:ge.$slots.prepend}]),style:jt(w(B)),onMouseenter:tt,onMouseleave:qe},[et(" input "),ge.type!=="textarea"?(W(),ve(Kt,{key:0},[et(" prepend slot "),ge.$slots.prepend?(W(),ve("div",{key:0,class:j(w(p).be("group","prepend"))},[Qe(ge.$slots,"prepend")],2)):et("v-if",!0),be("div",{ref_key:"wrapperRef",ref:C,class:j(w(l))},[et(" prefix slot "),ge.$slots.prefix||ge.prefixIcon?(W(),ve("span",{key:0,class:j(w(p).e("prefix"))},[be("span",{class:j(w(p).e("prefix-inner"))},[Qe(ge.$slots,"prefix"),ge.prefixIcon?(W(),rt(w(Ut),{key:0,class:j(w(p).e("icon"))},{default:Re(()=>[(W(),rt(On(ge.prefixIcon)))]),_:1},8,["class"])):et("v-if",!0)],2)],2)):et("v-if",!0),be("input",Kn({id:w(d),ref_key:"input",ref:v,class:w(p).e("inner")},w(s),{minlength:ge.minlength,maxlength:ge.maxlength,type:ge.showPassword?x.value?"text":"password":ge.type,disabled:w(h),readonly:ge.readonly,autocomplete:ge.autocomplete,tabindex:ge.tabindex,"aria-label":ge.ariaLabel,placeholder:ge.placeholder,style:ge.inputStyle,form:ge.form,autofocus:ge.autofocus,role:ge.containerRole,onCompositionstart:w(oe),onCompositionupdate:w(ne),onCompositionend:w(Xe),onInput:Le,onChange:Ne,onKeydown:pe}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),et(" suffix slot "),w(Q)?(W(),ve("span",{key:1,class:j(w(p).e("suffix"))},[be("span",{class:j(w(p).e("suffix-inner"))},[!w(O)||!w(N)||!w(H)?(W(),ve(Kt,{key:0},[Qe(ge.$slots,"suffix"),ge.suffixIcon?(W(),rt(w(Ut),{key:0,class:j(w(p).e("icon"))},{default:Re(()=>[(W(),rt(On(ge.suffixIcon)))]),_:1},8,["class"])):et("v-if",!0)],64)):et("v-if",!0),w(O)?(W(),rt(w(Ut),{key:1,class:j([w(p).e("icon"),w(p).e("clear")]),onMousedown:ln(w(Pi),["prevent"]),onClick:Z},{default:Re(()=>[_e(w(If))]),_:1},8,["class","onMousedown"])):et("v-if",!0),w(N)?(W(),rt(w(Ut),{key:2,class:j([w(p).e("icon"),w(p).e("password")]),onClick:ke},{default:Re(()=>[(W(),rt(On(w(F))))]),_:1},8,["class"])):et("v-if",!0),w(H)?(W(),ve("span",{key:3,class:j(w(p).e("count"))},[be("span",{class:j(w(p).e("count-inner"))},Tt(w(q))+" / "+Tt(ge.maxlength),3)],2)):et("v-if",!0),w(I)&&w(L)&&w(E)?(W(),rt(w(Ut),{key:4,class:j([w(p).e("icon"),w(p).e("validateIcon"),w(p).is("loading",w(I)==="validating")])},{default:Re(()=>[(W(),rt(On(w(L))))]),_:1},8,["class"])):et("v-if",!0)],2)],2)):et("v-if",!0)],2),et(" append slot "),ge.$slots.append?(W(),ve("div",{key:1,class:j(w(p).be("group","append"))},[Qe(ge.$slots,"append")],2)):et("v-if",!0)],64)):(W(),ve(Kt,{key:1},[et(" textarea "),be("textarea",Kn({id:w(d),ref_key:"textarea",ref:g,class:[w(m).e("inner"),w(p).is("focus",w(_))]},w(s),{minlength:ge.minlength,maxlength:ge.maxlength,tabindex:ge.tabindex,disabled:w(h),readonly:ge.readonly,autocomplete:ge.autocomplete,style:w(P),"aria-label":ge.ariaLabel,placeholder:ge.placeholder,form:ge.form,autofocus:ge.autofocus,rows:ge.rows,role:ge.containerRole,onCompositionstart:w(oe),onCompositionupdate:w(ne),onCompositionend:w(Xe),onInput:Le,onFocus:w(M),onBlur:w(T),onChange:Ne,onKeydown:pe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),w(H)?(W(),ve("span",{key:0,style:jt(b.value),class:j(w(p).e("count"))},Tt(w(q))+" / "+Tt(ge.maxlength),7)):et("v-if",!0)],64))],38))}});var _1e=It(S1e,[["__file","input.vue"]]);const Qa=xn(_1e),Km=4,SQ={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},C1e=({move:n,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${n}%)`}),nk=Symbol("scrollbarContextKey"),M1e=Et({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),T1e="Thumb",E1e=Ie({__name:"thumb",props:M1e,setup(n){const e=n,t=Nt(nk),i=St("scrollbar");t||Rs(T1e,"can not inject scrollbar context");const r=ae(),s=ae(),a=ae({}),o=ae(!1);let l=!1,c=!1,u=li?document.onselectstart:null;const d=V(()=>SQ[e.vertical?"vertical":"horizontal"]),f=V(()=>C1e({size:e.size,move:e.move,bar:d.value})),h=V(()=>r.value[d.value.offset]**2/t.wrapElement[d.value.scrollSize]/e.ratio/s.value[d.value.offset]),p=S=>{var C;if(S.stopPropagation(),S.ctrlKey||[1,2].includes(S.button))return;(C=window.getSelection())==null||C.removeAllRanges(),v(S);const _=S.currentTarget;_&&(a.value[d.value.axis]=_[d.value.offset]-(S[d.value.client]-_.getBoundingClientRect()[d.value.direction]))},m=S=>{if(!s.value||!r.value||!t.wrapElement)return;const C=Math.abs(S.target.getBoundingClientRect()[d.value.direction]-S[d.value.client]),_=s.value[d.value.offset]/2,M=(C-_)*100*h.value/r.value[d.value.offset];t.wrapElement[d.value.scroll]=M*t.wrapElement[d.value.scrollSize]/100},v=S=>{S.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),u=document.onselectstart,document.onselectstart=()=>!1},g=S=>{if(!r.value||!s.value||l===!1)return;const C=a.value[d.value.axis];if(!C)return;const _=(r.value.getBoundingClientRect()[d.value.direction]-S[d.value.client])*-1,M=s.value[d.value.offset]-C,T=(_-M)*100*h.value/r.value[d.value.offset];t.wrapElement[d.value.scroll]=T*t.wrapElement[d.value.scrollSize]/100},y=()=>{l=!1,a.value[d.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),A(),c&&(o.value=!1)},x=()=>{c=!1,o.value=!!e.size},b=()=>{c=!0,o.value=l};Fi(()=>{A(),document.removeEventListener("mouseup",y)});const A=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Li(Ii(t,"scrollbarElement"),"mousemove",x),Li(Ii(t,"scrollbarElement"),"mouseleave",b),(S,C)=>(W(),rt(na,{name:w(i).b("fade"),persisted:""},{default:Re(()=>[Cn(be("div",{ref_key:"instance",ref:r,class:j([w(i).e("bar"),w(i).is(w(d).key)]),onMousedown:m},[be("div",{ref_key:"thumb",ref:s,class:j(w(i).e("thumb")),style:jt(w(f)),onMousedown:p},null,38)],34),[[yi,S.always||o.value]])]),_:1},8,["name"]))}});var B9=It(E1e,[["__file","thumb.vue"]]);const I1e=Et({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),D1e=Ie({__name:"bar",props:I1e,setup(n,{expose:e}){const t=n,i=Nt(nk),r=ae(0),s=ae(0),a=ae(""),o=ae(""),l=ae(1),c=ae(1);return e({handleScroll:f=>{if(f){const h=f.offsetHeight-Km,p=f.offsetWidth-Km;s.value=f.scrollTop*100/h*l.value,r.value=f.scrollLeft*100/p*c.value}},update:()=>{const f=i==null?void 0:i.wrapElement;if(!f)return;const h=f.offsetHeight-Km,p=f.offsetWidth-Km,m=h**2/f.scrollHeight,v=p**2/f.scrollWidth,g=Math.max(m,t.minSize),y=Math.max(v,t.minSize);l.value=m/(h-m)/(g/(h-g)),c.value=v/(p-v)/(y/(p-y)),o.value=g+Km<h?`${g}px`:"",a.value=y+Km<p?`${y}px`:""}}),(f,h)=>(W(),ve(Kt,null,[_e(B9,{move:r.value,ratio:c.value,size:a.value,always:f.always},null,8,["move","ratio","size","always"]),_e(B9,{move:s.value,ratio:l.value,size:o.value,vertical:"",always:f.always},null,8,["move","ratio","size","always"])],64))}});var R1e=It(D1e,[["__file","bar.vue"]]);const P1e=Et({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Ke([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...ga(["ariaLabel","ariaOrientation"])}),L1e={scroll:({scrollTop:n,scrollLeft:e})=>[n,e].every(Jt)},k1e="ElScrollbar",F1e=Ie({name:k1e}),B1e=Ie({...F1e,props:P1e,emits:L1e,setup(n,{expose:e,emit:t}){const i=n,r=St("scrollbar");let s,a,o=0,l=0;const c=ae(),u=ae(),d=ae(),f=ae(),h=V(()=>{const A={};return i.height&&(A.height=Hr(i.height)),i.maxHeight&&(A.maxHeight=Hr(i.maxHeight)),[i.wrapStyle,A]}),p=V(()=>[i.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!i.native}]),m=V(()=>[r.e("view"),i.viewClass]),v=()=>{var A;u.value&&((A=f.value)==null||A.handleScroll(u.value),o=u.value.scrollTop,l=u.value.scrollLeft,t("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function g(A,S){Rn(A)?u.value.scrollTo(A):Jt(A)&&Jt(S)&&u.value.scrollTo(A,S)}const y=A=>{Jt(A)&&(u.value.scrollTop=A)},x=A=>{Jt(A)&&(u.value.scrollLeft=A)},b=()=>{var A;(A=f.value)==null||A.update()};return pt(()=>i.noresize,A=>{A?(s==null||s(),a==null||a()):({stop:s}=Fr(d,b),a=Li("resize",b))},{immediate:!0}),pt(()=>[i.maxHeight,i.height],()=>{i.native||Yt(()=>{var A;b(),u.value&&((A=f.value)==null||A.handleScroll(u.value))})}),Qn(nk,Si({scrollbarElement:c,wrapElement:u})),bL(()=>{u.value&&(u.value.scrollTop=o,u.value.scrollLeft=l)}),Mn(()=>{i.native||Yt(()=>{b()})}),au(()=>b()),e({wrapRef:u,update:b,scrollTo:g,setScrollTop:y,setScrollLeft:x,handleScroll:v}),(A,S)=>(W(),ve("div",{ref_key:"scrollbarRef",ref:c,class:j(w(r).b())},[be("div",{ref_key:"wrapRef",ref:u,class:j(w(p)),style:jt(w(h)),tabindex:A.tabindex,onScroll:v},[(W(),rt(On(A.tag),{id:A.id,ref_key:"resizeRef",ref:d,class:j(w(m)),style:jt(A.viewStyle),role:A.role,"aria-label":A.ariaLabel,"aria-orientation":A.ariaOrientation},{default:Re(()=>[Qe(A.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),A.native?et("v-if",!0):(W(),rt(R1e,{key:0,ref_key:"barRef",ref:f,always:A.always,"min-size":A.minSize},null,8,["always","min-size"]))],2))}});var N1e=It(B1e,[["__file","scrollbar.vue"]]);const sd=xn(N1e),ik=Symbol("popper"),_Q=Symbol("popperContent"),CQ=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],MQ=Et({role:{type:String,values:CQ,default:"tooltip"}}),O1e=Ie({name:"ElPopper",inheritAttrs:!1}),U1e=Ie({...O1e,props:MQ,setup(n,{expose:e}){const t=n,i=ae(),r=ae(),s=ae(),a=ae(),o=V(()=>t.role),l={triggerRef:i,popperInstanceRef:r,contentRef:s,referenceRef:a,role:o};return e(l),Qn(ik,l),(c,u)=>Qe(c.$slots,"default")}});var z1e=It(U1e,[["__file","popper.vue"]]);const TQ=Et({arrowOffset:{type:Number,default:5}}),V1e=Ie({name:"ElPopperArrow",inheritAttrs:!1}),H1e=Ie({...V1e,props:TQ,setup(n,{expose:e}){const t=n,i=St("popper"),{arrowOffset:r,arrowRef:s,arrowStyle:a}=Nt(_Q,void 0);return pt(()=>t.arrowOffset,o=>{r.value=o}),Fi(()=>{s.value=void 0}),e({arrowRef:s}),(o,l)=>(W(),ve("span",{ref_key:"arrowRef",ref:s,class:j(w(i).e("arrow")),style:jt(w(a)),"data-popper-arrow":""},null,6))}});var G1e=It(H1e,[["__file","arrow.vue"]]);const EQ=Et({virtualRef:{type:Ke(Object)},virtualTriggering:Boolean,onMouseenter:{type:Ke(Function)},onMouseleave:{type:Ke(Function)},onClick:{type:Ke(Function)},onKeydown:{type:Ke(Function)},onFocus:{type:Ke(Function)},onBlur:{type:Ke(Function)},onContextmenu:{type:Ke(Function)},id:String,open:Boolean}),IQ=Symbol("elForwardRef"),W1e=n=>{Qn(IQ,{setForwardRef:t=>{n.value=t}})},q1e=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),K1e='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Y1e=n=>getComputedStyle(n).position==="fixed"?!1:n.offsetParent!==null,N9=n=>Array.from(n.querySelectorAll(K1e)).filter(e=>vC(e)&&Y1e(e)),vC=n=>{if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.tabIndex<0||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true")return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return!(n.type==="hidden"||n.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},W3=function(n,e,...t){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const r=document.createEvent(i);return r.initEvent(e,...t),n.dispatchEvent(r),n},DQ=n=>!n.getAttribute("aria-owns"),RQ=(n,e,t)=>{const{parentNode:i}=n;if(!i)return null;const r=i.querySelectorAll(t),s=Array.prototype.indexOf.call(r,n);return r[s+e]||null},q3=n=>{n&&(n.focus(),!DQ(n)&&n.click())},X1e="ElOnlyChild",PQ=Ie({name:X1e,setup(n,{slots:e,attrs:t}){var i;const r=Nt(IQ),s=q1e((i=r==null?void 0:r.setForwardRef)!=null?i:Pi);return()=>{var a;const o=(a=e.default)==null?void 0:a.call(e,t);if(!o||o.length>1)return null;const l=LQ(o);return l?Cn(df(l,t),[[s]]):null}}});function LQ(n){if(!n)return null;const e=n;for(const t of e){if(Rn(t))switch(t.type){case js:continue;case J1:case"svg":return O9(t);case Kt:return LQ(t.children);default:return t}return O9(t)}return null}function O9(n){const e=St("only-child");return _e("span",{class:e.e("content")},[n])}const j1e=Ie({name:"ElPopperTrigger",inheritAttrs:!1}),$1e=Ie({...j1e,props:EQ,setup(n,{expose:e}){const t=n,{role:i,triggerRef:r}=Nt(ik,void 0);W1e(r);const s=V(()=>o.value?t.id:void 0),a=V(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),o=V(()=>{if(i&&i.value!=="tooltip")return i.value}),l=V(()=>o.value?`${t.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Mn(()=>{pt(()=>t.virtualRef,d=>{d&&(r.value=go(d))},{immediate:!0}),pt(r,(d,f)=>{c==null||c(),c=void 0,bo(d)&&(u.forEach(h=>{var p;const m=t[h];m&&(d.addEventListener(h.slice(2).toLowerCase(),m),(p=f==null?void 0:f.removeEventListener)==null||p.call(f,h.slice(2).toLowerCase(),m))}),vC(d)&&(c=pt([s,a,o,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{Us(h[m])?d.removeAttribute(p):d.setAttribute(p,h[m])})},{immediate:!0}))),bo(f)&&vC(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>f.removeAttribute(h))},{immediate:!0})}),Fi(()=>{if(c==null||c(),c=void 0,r.value&&bo(r.value)){const d=r.value;u.forEach(f=>{const h=t[f];h&&d.removeEventListener(f.slice(2).toLowerCase(),h)}),r.value=void 0}}),e({triggerRef:r}),(d,f)=>d.virtualTriggering?et("v-if",!0):(W(),rt(w(PQ),Kn({key:0},d.$attrs,{"aria-controls":w(s),"aria-describedby":w(a),"aria-expanded":w(l),"aria-haspopup":w(o)}),{default:Re(()=>[Qe(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Q1e=It($1e,[["__file","trigger.vue"]]);const A5="focus-trap.focus-after-trapped",w5="focus-trap.focus-after-released",Z1e="focus-trap.focusout-prevented",U9={cancelable:!0,bubbles:!1},J1e={cancelable:!0,bubbles:!1},z9="focusAfterTrapped",V9="focusAfterReleased",rk=Symbol("elFocusTrap"),sk=ae(),bM=ae(0),ak=ae(0);let lw=0;const kQ=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},H9=(n,e)=>{for(const t of n)if(!eye(t,e))return t},eye=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},tye=n=>{const e=kQ(n),t=H9(e,n),i=H9(e.reverse(),n);return[t,i]},nye=n=>n instanceof HTMLInputElement&&"select"in n,Bd=(n,e)=>{if(n&&n.focus){const t=document.activeElement;let i=!1;bo(n)&&!vC(n)&&!n.getAttribute("tabindex")&&(n.setAttribute("tabindex","-1"),i=!0),n.focus({preventScroll:!0}),ak.value=window.performance.now(),n!==t&&nye(n)&&e&&n.select(),bo(n)&&i&&n.removeAttribute("tabindex")}};function G9(n,e){const t=[...n],i=n.indexOf(e);return i!==-1&&t.splice(i,1),t}const iye=()=>{let n=[];return{push:i=>{const r=n[0];r&&i!==r&&r.pause(),n=G9(n,i),n.unshift(i)},remove:i=>{var r,s;n=G9(n,i),(s=(r=n[0])==null?void 0:r.resume)==null||s.call(r)}}},rye=(n,e=!1)=>{const t=document.activeElement;for(const i of n)if(Bd(i,e),document.activeElement!==t)return},W9=iye(),sye=()=>bM.value>ak.value,cw=()=>{sk.value="pointer",bM.value=window.performance.now()},q9=()=>{sk.value="keyboard",bM.value=window.performance.now()},aye=()=>(Mn(()=>{lw===0&&(document.addEventListener("mousedown",cw),document.addEventListener("touchstart",cw),document.addEventListener("keydown",q9)),lw++}),Fi(()=>{lw--,lw<=0&&(document.removeEventListener("mousedown",cw),document.removeEventListener("touchstart",cw),document.removeEventListener("keydown",q9))}),{focusReason:sk,lastUserFocusTimestamp:bM,lastAutomatedFocusTimestamp:ak}),uw=n=>new CustomEvent(Z1e,{...J1e,detail:n}),kt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let sg=[];const K9=n=>{n.code===kt.esc&&sg.forEach(e=>e(n))},oye=n=>{Mn(()=>{sg.length===0&&document.addEventListener("keydown",K9),li&&sg.push(n)}),Fi(()=>{sg=sg.filter(e=>e!==n),sg.length===0&&li&&document.removeEventListener("keydown",K9)})},lye=Ie({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[z9,V9,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=ae();let i,r;const{focusReason:s}=aye();oye(p=>{n.trapped&&!a.paused&&e("release-requested",p)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=p=>{if(!n.loop&&!n.trapped||a.paused)return;const{code:m,altKey:v,ctrlKey:g,metaKey:y,currentTarget:x,shiftKey:b}=p,{loop:A}=n,S=m===kt.tab&&!v&&!g&&!y,C=document.activeElement;if(S&&C){const _=x,[M,T]=tye(_);if(M&&T){if(!b&&C===T){const I=uw({focusReason:s.value});e("focusout-prevented",I),I.defaultPrevented||(p.preventDefault(),A&&Bd(M,!0))}else if(b&&[M,_].includes(C)){const I=uw({focusReason:s.value});e("focusout-prevented",I),I.defaultPrevented||(p.preventDefault(),A&&Bd(T,!0))}}else if(C===_){const I=uw({focusReason:s.value});e("focusout-prevented",I),I.defaultPrevented||p.preventDefault()}}};Qn(rk,{focusTrapRef:t,onKeydown:o}),pt(()=>n.focusTrapEl,p=>{p&&(t.value=p)},{immediate:!0}),pt([t],([p],[m])=>{p&&(p.addEventListener("keydown",o),p.addEventListener("focusin",u),p.addEventListener("focusout",d)),m&&(m.removeEventListener("keydown",o),m.removeEventListener("focusin",u),m.removeEventListener("focusout",d))});const l=p=>{e(z9,p)},c=p=>e(V9,p),u=p=>{const m=w(t);if(!m)return;const v=p.target,g=p.relatedTarget,y=v&&m.contains(v);n.trapped||g&&m.contains(g)||(i=g),y&&e("focusin",p),!a.paused&&n.trapped&&(y?r=v:Bd(r,!0))},d=p=>{const m=w(t);if(!(a.paused||!m))if(n.trapped){const v=p.relatedTarget;!Us(v)&&!m.contains(v)&&setTimeout(()=>{if(!a.paused&&n.trapped){const g=uw({focusReason:s.value});e("focusout-prevented",g),g.defaultPrevented||Bd(r,!0)}},0)}else{const v=p.target;v&&m.contains(v)||e("focusout",p)}};async function f(){await Yt();const p=w(t);if(p){W9.push(a);const m=p.contains(document.activeElement)?i:document.activeElement;if(i=m,!p.contains(m)){const g=new Event(A5,U9);p.addEventListener(A5,l),p.dispatchEvent(g),g.defaultPrevented||Yt(()=>{let y=n.focusStartEl;qt(y)||(Bd(y),document.activeElement!==y&&(y="first")),y==="first"&&rye(kQ(p),!0),(document.activeElement===m||y==="container")&&Bd(p)})}}}function h(){const p=w(t);if(p){p.removeEventListener(A5,l);const m=new CustomEvent(w5,{...U9,detail:{focusReason:s.value}});p.addEventListener(w5,c),p.dispatchEvent(m),!m.defaultPrevented&&(s.value=="keyboard"||!sye()||p.contains(document.activeElement))&&Bd(i??document.body),p.removeEventListener(w5,c),W9.remove(a)}}return Mn(()=>{n.trapped&&f(),pt(()=>n.trapped,p=>{p?f():h()})}),Fi(()=>{n.trapped&&h(),t.value&&(t.value.removeEventListener("keydown",o),t.value.removeEventListener("focusin",u),t.value.removeEventListener("focusout",d),t.value=void 0)}),{onKeydown:o}}});function cye(n,e,t,i,r,s){return Qe(n.$slots,"default",{handleKeydown:n.onKeydown})}var ay=It(lye,[["render",cye],["__file","focus-trap.vue"]]),Xo="top",pc="bottom",mc="right",jo="left",ok="auto",xA=[Xo,pc,mc,jo],m1="start",ax="end",uye="clippingParents",FQ="viewport",Ky="popper",dye="reference",Y9=xA.reduce(function(n,e){return n.concat([e+"-"+m1,e+"-"+ax])},[]),Df=[].concat(xA,[ok]).reduce(function(n,e){return n.concat([e,e+"-"+m1,e+"-"+ax])},[]),fye="beforeRead",hye="read",pye="afterRead",mye="beforeMain",vye="main",gye="afterMain",yye="beforeWrite",bye="write",xye="afterWrite",Aye=[fye,hye,pye,mye,vye,gye,yye,bye,xye];function Qu(n){return n?(n.nodeName||"").toLowerCase():null}function cu(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function v1(n){var e=cu(n).Element;return n instanceof e||n instanceof Element}function oc(n){var e=cu(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function lk(n){if(typeof ShadowRoot>"u")return!1;var e=cu(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function wye(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!oc(s)||!Qu(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(a){var o=r[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function Sye(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),o=a.reduce(function(l,c){return l[c]="",l},{});!oc(r)||!Qu(r)||(Object.assign(r.style,o),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var BQ={name:"applyStyles",enabled:!0,phase:"write",fn:wye,effect:Sye,requires:["computeStyles"]};function Gu(n){return n.split("-")[0]}var Y0=Math.max,gC=Math.min,g1=Math.round;function y1(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),i=1,r=1;if(oc(n)&&e){var s=n.offsetHeight,a=n.offsetWidth;a>0&&(i=g1(t.width)/a||1),s>0&&(r=g1(t.height)/s||1)}return{width:t.width/i,height:t.height/r,top:t.top/r,right:t.right/i,bottom:t.bottom/r,left:t.left/i,x:t.left/i,y:t.top/r}}function ck(n){var e=y1(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function NQ(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&lk(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ff(n){return cu(n).getComputedStyle(n)}function _ye(n){return["table","td","th"].indexOf(Qu(n))>=0}function _p(n){return((v1(n)?n.ownerDocument:n.document)||window.document).documentElement}function xM(n){return Qu(n)==="html"?n:n.assignedSlot||n.parentNode||(lk(n)?n.host:null)||_p(n)}function X9(n){return!oc(n)||ff(n).position==="fixed"?null:n.offsetParent}function Cye(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&oc(n)){var i=ff(n);if(i.position==="fixed")return null}var r=xM(n);for(lk(r)&&(r=r.host);oc(r)&&["html","body"].indexOf(Qu(r))<0;){var s=ff(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function AA(n){for(var e=cu(n),t=X9(n);t&&_ye(t)&&ff(t).position==="static";)t=X9(t);return t&&(Qu(t)==="html"||Qu(t)==="body"&&ff(t).position==="static")?e:t||Cye(n)||e}function uk(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function lb(n,e,t){return Y0(n,gC(e,t))}function Mye(n,e,t){var i=lb(n,e,t);return i>t?t:i}function OQ(){return{top:0,right:0,bottom:0,left:0}}function UQ(n){return Object.assign({},OQ(),n)}function zQ(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var Tye=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,UQ(typeof n!="number"?n:zQ(n,xA))};function Eye(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,a=t.modifiersData.popperOffsets,o=Gu(t.placement),l=uk(o),c=[jo,mc].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var d=Tye(r.padding,t),f=ck(s),h=l==="y"?Xo:jo,p=l==="y"?pc:mc,m=t.rects.reference[u]+t.rects.reference[l]-a[l]-t.rects.popper[u],v=a[l]-t.rects.reference[l],g=AA(s),y=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,x=m/2-v/2,b=d[h],A=y-f[u]-d[p],S=y/2-f[u]/2+x,C=lb(b,S,A),_=l;t.modifiersData[i]=(e={},e[_]=C,e.centerOffset=C-S,e)}}function Iye(n){var e=n.state,t=n.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!NQ(e.elements.popper,r)||(e.elements.arrow=r))}var Dye={name:"arrow",enabled:!0,phase:"main",fn:Eye,effect:Iye,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function b1(n){return n.split("-")[1]}var Rye={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pye(n){var e=n.x,t=n.y,i=window,r=i.devicePixelRatio||1;return{x:g1(e*r)/r||0,y:g1(t*r)/r||0}}function j9(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,a=n.offsets,o=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,f=a.x,h=f===void 0?0:f,p=a.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:h,y:m}):{x:h,y:m};h=v.x,m=v.y;var g=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),x=jo,b=Xo,A=window;if(c){var S=AA(t),C="clientHeight",_="clientWidth";if(S===cu(t)&&(S=_p(t),ff(S).position!=="static"&&o==="absolute"&&(C="scrollHeight",_="scrollWidth")),S=S,r===Xo||(r===jo||r===mc)&&s===ax){b=pc;var M=d&&S===A&&A.visualViewport?A.visualViewport.height:S[C];m-=M-i.height,m*=l?1:-1}if(r===jo||(r===Xo||r===pc)&&s===ax){x=mc;var T=d&&S===A&&A.visualViewport?A.visualViewport.width:S[_];h-=T-i.width,h*=l?1:-1}}var E=Object.assign({position:o},c&&Rye),I=u===!0?Pye({x:h,y:m}):{x:h,y:m};if(h=I.x,m=I.y,l){var L;return Object.assign({},E,(L={},L[b]=y?"0":"",L[x]=g?"0":"",L.transform=(A.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",L))}return Object.assign({},E,(e={},e[b]=y?m+"px":"",e[x]=g?h+"px":"",e.transform="",e))}function Lye(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=i===void 0?!0:i,s=t.adaptive,a=s===void 0?!0:s,o=t.roundOffsets,l=o===void 0?!0:o,c={placement:Gu(e.placement),variation:b1(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,j9(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,j9(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var VQ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Lye,data:{}},dw={passive:!0};function kye(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,a=i.resize,o=a===void 0?!0:a,l=cu(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,dw)}),o&&l.addEventListener("resize",t.update,dw),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,dw)}),o&&l.removeEventListener("resize",t.update,dw)}}var HQ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:kye,data:{}},Fye={left:"right",right:"left",bottom:"top",top:"bottom"};function K3(n){return n.replace(/left|right|bottom|top/g,function(e){return Fye[e]})}var Bye={start:"end",end:"start"};function $9(n){return n.replace(/start|end/g,function(e){return Bye[e]})}function dk(n){var e=cu(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function fk(n){return y1(_p(n)).left+dk(n).scrollLeft}function Nye(n){var e=cu(n),t=_p(n),i=e.visualViewport,r=t.clientWidth,s=t.clientHeight,a=0,o=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,o=i.offsetTop)),{width:r,height:s,x:a+fk(n),y:o}}function Oye(n){var e,t=_p(n),i=dk(n),r=(e=n.ownerDocument)==null?void 0:e.body,s=Y0(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Y0(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+fk(n),l=-i.scrollTop;return ff(r||t).direction==="rtl"&&(o+=Y0(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function hk(n){var e=ff(n),t=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function GQ(n){return["html","body","#document"].indexOf(Qu(n))>=0?n.ownerDocument.body:oc(n)&&hk(n)?n:GQ(xM(n))}function cb(n,e){var t;e===void 0&&(e=[]);var i=GQ(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=cu(i),a=r?[s].concat(s.visualViewport||[],hk(i)?i:[]):i,o=e.concat(a);return r?o:o.concat(cb(xM(a)))}function TD(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Uye(n){var e=y1(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function Q9(n,e){return e===FQ?TD(Nye(n)):v1(e)?Uye(e):TD(Oye(_p(n)))}function zye(n){var e=cb(xM(n)),t=["absolute","fixed"].indexOf(ff(n).position)>=0,i=t&&oc(n)?AA(n):n;return v1(i)?e.filter(function(r){return v1(r)&&NQ(r,i)&&Qu(r)!=="body"}):[]}function Vye(n,e,t){var i=e==="clippingParents"?zye(n):[].concat(e),r=[].concat(i,[t]),s=r[0],a=r.reduce(function(o,l){var c=Q9(n,l);return o.top=Y0(c.top,o.top),o.right=gC(c.right,o.right),o.bottom=gC(c.bottom,o.bottom),o.left=Y0(c.left,o.left),o},Q9(n,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function WQ(n){var e=n.reference,t=n.element,i=n.placement,r=i?Gu(i):null,s=i?b1(i):null,a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(r){case Xo:l={x:a,y:e.y-t.height};break;case pc:l={x:a,y:e.y+e.height};break;case mc:l={x:e.x+e.width,y:o};break;case jo:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var c=r?uk(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case m1:l[c]=l[c]-(e[u]/2-t[u]/2);break;case ax:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function ox(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=i===void 0?n.placement:i,s=t.boundary,a=s===void 0?uye:s,o=t.rootBoundary,l=o===void 0?FQ:o,c=t.elementContext,u=c===void 0?Ky:c,d=t.altBoundary,f=d===void 0?!1:d,h=t.padding,p=h===void 0?0:h,m=UQ(typeof p!="number"?p:zQ(p,xA)),v=u===Ky?dye:Ky,g=n.rects.popper,y=n.elements[f?v:u],x=Vye(v1(y)?y:y.contextElement||_p(n.elements.popper),a,l),b=y1(n.elements.reference),A=WQ({reference:b,element:g,placement:r}),S=TD(Object.assign({},g,A)),C=u===Ky?S:b,_={top:x.top-C.top+m.top,bottom:C.bottom-x.bottom+m.bottom,left:x.left-C.left+m.left,right:C.right-x.right+m.right},M=n.modifiersData.offset;if(u===Ky&&M){var T=M[r];Object.keys(_).forEach(function(E){var I=[mc,pc].indexOf(E)>=0?1:-1,L=[Xo,pc].indexOf(E)>=0?"y":"x";_[E]+=T[L]*I})}return _}function Hye(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=t.boundary,s=t.rootBoundary,a=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?Df:l,u=b1(i),d=u?o?Y9:Y9.filter(function(p){return b1(p)===u}):xA,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=ox(n,{placement:m,boundary:r,rootBoundary:s,padding:a})[Gu(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function Gye(n){if(Gu(n)===ok)return[];var e=K3(n);return[$9(n),e,$9(e)]}function Wye(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,a=t.altAxis,o=a===void 0?!0:a,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,v=e.options.placement,g=Gu(v),y=g===v,x=l||(y||!p?[K3(v)]:Gye(v)),b=[v].concat(x).reduce(function(ee,de){return ee.concat(Gu(de)===ok?Hye(e,{placement:de,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):de)},[]),A=e.rects.reference,S=e.rects.popper,C=new Map,_=!0,M=b[0],T=0;T<b.length;T++){var E=b[T],I=Gu(E),L=b1(E)===m1,F=[Xo,pc].indexOf(I)>=0,B=F?"width":"height",P=ox(e,{placement:E,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),z=F?L?mc:jo:L?pc:Xo;A[B]>S[B]&&(z=K3(z));var O=K3(z),N=[];if(s&&N.push(P[I]<=0),o&&N.push(P[z]<=0,P[O]<=0),N.every(function(ee){return ee})){M=E,_=!1;break}C.set(E,N)}if(_)for(var H=p?3:1,q=function(ee){var de=b.find(function(J){var ue=C.get(J);if(ue)return ue.slice(0,ee).every(function(Te){return Te})});if(de)return M=de,"break"},te=H;te>0;te--){var Q=q(te);if(Q==="break")break}e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}}var qye={name:"flip",enabled:!0,phase:"main",fn:Wye,requiresIfExists:["offset"],data:{_skip:!1}};function Z9(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function J9(n){return[Xo,mc,pc,jo].some(function(e){return n[e]>=0})}function Kye(n){var e=n.state,t=n.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,a=ox(e,{elementContext:"reference"}),o=ox(e,{altBoundary:!0}),l=Z9(a,i),c=Z9(o,r,s),u=J9(l),d=J9(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var Yye={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Kye};function Xye(n,e,t){var i=Gu(n),r=[jo,Xo].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,a=s[0],o=s[1];return a=a||0,o=(o||0)*r,[jo,mc].indexOf(i)>=0?{x:o,y:a}:{x:a,y:o}}function jye(n){var e=n.state,t=n.options,i=n.name,r=t.offset,s=r===void 0?[0,0]:r,a=Df.reduce(function(u,d){return u[d]=Xye(d,e.rects,s),u},{}),o=a[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=a}var $ye={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:jye};function Qye(n){var e=n.state,t=n.name;e.modifiersData[t]=WQ({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}var qQ={name:"popperOffsets",enabled:!0,phase:"read",fn:Qye,data:{}};function Zye(n){return n==="x"?"y":"x"}function Jye(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=r===void 0?!0:r,a=t.altAxis,o=a===void 0?!1:a,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,f=t.tether,h=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,v=ox(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=Gu(e.placement),y=b1(e.placement),x=!y,b=uk(g),A=Zye(b),S=e.modifiersData.popperOffsets,C=e.rects.reference,_=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,T=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(S){if(s){var L,F=b==="y"?Xo:jo,B=b==="y"?pc:mc,P=b==="y"?"height":"width",z=S[b],O=z+v[F],N=z-v[B],H=h?-_[P]/2:0,q=y===m1?C[P]:_[P],te=y===m1?-_[P]:-C[P],Q=e.elements.arrow,ee=h&&Q?ck(Q):{width:0,height:0},de=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:OQ(),J=de[F],ue=de[B],Te=lb(0,C[P],ee[P]),De=x?C[P]/2-H-Te-J-T.mainAxis:q-Te-J-T.mainAxis,Le=x?-C[P]/2+H+Te+ue+T.mainAxis:te+Te+ue+T.mainAxis,Ne=e.elements.arrow&&AA(e.elements.arrow),Y=Ne?b==="y"?Ne.clientTop||0:Ne.clientLeft||0:0,oe=(L=E==null?void 0:E[b])!=null?L:0,ne=z+De-oe-Y,Xe=z+Le-oe,ke=lb(h?gC(O,ne):O,z,h?Y0(N,Xe):N);S[b]=ke,I[b]=ke-z}if(o){var Ge,He=b==="x"?Xo:jo,qe=b==="x"?pc:mc,tt=S[A],pe=A==="y"?"height":"width",G=tt+v[He],Z=tt-v[qe],ge=[Xo,jo].indexOf(g)!==-1,Oe=(Ge=E==null?void 0:E[A])!=null?Ge:0,je=ge?G:tt-C[pe]-_[pe]-Oe+T.altAxis,bt=ge?tt+C[pe]+_[pe]-Oe-T.altAxis:Z,At=h&&ge?Mye(je,tt,bt):lb(h?je:G,tt,h?bt:Z);S[A]=At,I[A]=At-tt}e.modifiersData[i]=I}}var e2e={name:"preventOverflow",enabled:!0,phase:"main",fn:Jye,requiresIfExists:["offset"]};function t2e(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function n2e(n){return n===cu(n)||!oc(n)?dk(n):t2e(n)}function i2e(n){var e=n.getBoundingClientRect(),t=g1(e.width)/n.offsetWidth||1,i=g1(e.height)/n.offsetHeight||1;return t!==1||i!==1}function r2e(n,e,t){t===void 0&&(t=!1);var i=oc(e),r=oc(e)&&i2e(e),s=_p(e),a=y1(n,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Qu(e)!=="body"||hk(s))&&(o=n2e(e)),oc(e)?(l=y1(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=fk(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function s2e(n){var e=new Map,t=new Set,i=[];n.forEach(function(s){e.set(s.name,s)});function r(s){t.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&r(l)}}),i.push(s)}return n.forEach(function(s){t.has(s.name)||r(s)}),i}function a2e(n){var e=s2e(n);return Aye.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}function o2e(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function l2e(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var eU={placement:"bottom",modifiers:[],strategy:"absolute"};function tU(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function pk(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,r=e.defaultOptions,s=r===void 0?eU:r;return function(a,o,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},eU,s),modifiersData:{},elements:{reference:a,popper:o},attributes:{},styles:{}},u=[],d=!1,f={state:c,setOptions:function(m){var v=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:v1(a)?cb(a):a.contextElement?cb(a.contextElement):[],popper:cb(o)};var g=a2e(l2e([].concat(i,c.options.modifiers)));return c.orderedModifiers=g.filter(function(y){return y.enabled}),h(),f.update()},forceUpdate:function(){if(!d){var m=c.elements,v=m.reference,g=m.popper;if(tU(v,g)){c.rects={reference:r2e(v,AA(g),c.options.strategy==="fixed"),popper:ck(g)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(_){return c.modifiersData[_.name]=Object.assign({},_.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var x=c.orderedModifiers[y],b=x.fn,A=x.options,S=A===void 0?{}:A,C=x.name;typeof b=="function"&&(c=b({state:c,options:S,name:C,instance:f})||c)}}}},update:o2e(function(){return new Promise(function(m){f.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!tU(a,o))return f;f.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function h(){c.orderedModifiers.forEach(function(m){var v=m.name,g=m.options,y=g===void 0?{}:g,x=m.effect;if(typeof x=="function"){var b=x({state:c,name:v,instance:f,options:y}),A=function(){};u.push(b||A)}})}function p(){u.forEach(function(m){return m()}),u=[]}return f}}pk();var c2e=[HQ,qQ,VQ,BQ];pk({defaultModifiers:c2e});var u2e=[HQ,qQ,VQ,BQ,$ye,qye,e2e,Dye,Yye],d2e=pk({defaultModifiers:u2e});const f2e=["fixed","absolute"],h2e=Et({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ke(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Df,default:"bottom"},popperOptions:{type:Ke(Object),default:()=>({})},strategy:{type:String,values:f2e,default:"absolute"}}),KQ=Et({...h2e,id:String,style:{type:Ke([String,Array,Object])},className:{type:Ke([String,Array,Object])},effect:{type:Ke(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Ke([String,Array,Object])},popperStyle:{type:Ke([String,Array,Object])},referenceEl:{type:Ke(Object)},triggerTargetEl:{type:Ke(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...ga(["ariaLabel"])}),p2e={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},m2e=(n,e)=>{const t=ae(!1),i=ae();return{focusStartRef:i,trapped:t,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{n.visible&&!t.value&&(c.target&&(i.value=c.target),t.value=!0)},onFocusoutPrevented:c=>{n.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},v2e=(n,e=[])=>{const{placement:t,strategy:i,popperOptions:r}=n,s={placement:t,strategy:i,...r,modifiers:[...y2e(n),...e]};return b2e(s,r==null?void 0:r.modifiers),s},g2e=n=>{if(li)return go(n)};function y2e(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function b2e(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const x2e=(n,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=A2e(l);Object.assign(a.value,c)},requires:["computeStyles"]},r=V(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=w(t);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],i,{name:"applyStyles",enabled:!1}]}}),s=Ui(),a=ae({styles:{popper:{position:w(r).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return pt(r,l=>{const c=w(s);c&&c.setOptions(l)},{deep:!0}),pt([n,e],([l,c])=>{o(),!(!l||!c)&&(s.value=d2e(l,c,w(r)))}),Fi(()=>{o()}),{state:V(()=>{var l;return{...((l=w(s))==null?void 0:l.state)||{}}}),styles:V(()=>w(a).styles),attributes:V(()=>w(a).attributes),update:()=>{var l;return(l=w(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=w(s))==null?void 0:l.forceUpdate()},instanceRef:V(()=>w(s))}};function A2e(n){const e=Object.keys(n.elements),t=sx(e.map(r=>[r,n.styles[r]||{}])),i=sx(e.map(r=>[r,n.attributes[r]]));return{styles:t,attributes:i}}const w2e=0,S2e=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:r}=Nt(ik,void 0),s=ae(),a=ae(),o=V(()=>({name:"eventListeners",enabled:!!n.visible})),l=V(()=>{var g;const y=w(s),x=(g=w(a))!=null?g:w2e;return{name:"arrow",enabled:!Q$(y),options:{element:y,padding:x}}}),c=V(()=>({onFirstUpdate:()=>{p()},...v2e(n,[w(l),w(o)])})),u=V(()=>g2e(n.referenceEl)||w(i)),{attributes:d,state:f,styles:h,update:p,forceUpdate:m,instanceRef:v}=x2e(u,t,c);return pt(v,g=>e.value=g),Mn(()=>{pt(()=>{var g;return(g=w(u))==null?void 0:g.getBoundingClientRect()},()=>{p()})}),{attributes:d,arrowRef:s,contentRef:t,instanceRef:v,state:f,styles:h,role:r,forceUpdate:m,update:p}},_2e=(n,{attributes:e,styles:t,role:i})=>{const{nextZIndex:r}=ry(),s=St("popper"),a=V(()=>w(e).popper),o=ae(Jt(n.zIndex)?n.zIndex:r()),l=V(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),c=V(()=>[{zIndex:w(o)},w(t).popper,n.popperStyle||{}]),u=V(()=>i.value==="dialog"?"false":void 0),d=V(()=>w(t).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:a,contentClass:l,contentStyle:c,contentZIndex:o,updateZIndex:()=>{o.value=Jt(n.zIndex)?n.zIndex:r()}}},C2e=Ie({name:"ElPopperContent"}),M2e=Ie({...C2e,props:KQ,emits:p2e,setup(n,{expose:e,emit:t}){const i=n,{focusStartRef:r,trapped:s,onFocusAfterReleased:a,onFocusAfterTrapped:o,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=m2e(i,t),{attributes:d,arrowRef:f,contentRef:h,styles:p,instanceRef:m,role:v,update:g}=S2e(i),{ariaModal:y,arrowStyle:x,contentAttrs:b,contentClass:A,contentStyle:S,updateZIndex:C}=_2e(i,{styles:p,attributes:d,role:v}),_=Nt($u,void 0),M=ae();Qn(_Q,{arrowStyle:x,arrowRef:f,arrowOffset:M}),_&&Qn($u,{..._,addInputId:Pi,removeInputId:Pi});let T;const E=(L=!0)=>{g(),L&&C()},I=()=>{E(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return Mn(()=>{pt(()=>i.triggerTargetEl,(L,F)=>{T==null||T(),T=void 0;const B=w(L||h.value),P=w(F||h.value);bo(B)&&(T=pt([v,()=>i.ariaLabel,y,()=>i.id],z=>{["role","aria-label","aria-modal","id"].forEach((O,N)=>{Us(z[N])?B.removeAttribute(O):B.setAttribute(O,z[N])})},{immediate:!0})),P!==B&&bo(P)&&["role","aria-label","aria-modal","id"].forEach(z=>{P.removeAttribute(z)})},{immediate:!0}),pt(()=>i.visible,I,{immediate:!0})}),Fi(()=>{T==null||T(),T=void 0}),e({popperContentRef:h,popperInstanceRef:m,updatePopper:E,contentStyle:S}),(L,F)=>(W(),ve("div",Kn({ref_key:"contentRef",ref:h},w(b),{style:w(S),class:w(A),tabindex:"-1",onMouseenter:B=>L.$emit("mouseenter",B),onMouseleave:B=>L.$emit("mouseleave",B)}),[_e(w(ay),{trapped:w(s),"trap-on-focus-in":!0,"focus-trap-el":w(h),"focus-start-el":w(r),onFocusAfterTrapped:w(o),onFocusAfterReleased:w(a),onFocusin:w(l),onFocusoutPrevented:w(c),onReleaseRequested:w(u)},{default:Re(()=>[Qe(L.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var T2e=It(M2e,[["__file","content.vue"]]);const YQ=xn(z1e),AM=Symbol("elTooltip");function nU(){let n;const e=(i,r)=>{t(),n=window.setTimeout(i,r)},t=()=>window.clearTimeout(n);return vA(()=>t()),{registerTimeout:e,cancelTimeout:t}}const E2e=Et({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),I2e=({showAfter:n,hideAfter:e,autoClose:t,open:i,close:r})=>{const{registerTimeout:s}=nU(),{registerTimeout:a,cancelTimeout:o}=nU();return{onOpen:u=>{s(()=>{i(u);const d=w(t);Jt(d)&&d>0&&a(()=>{r(u)},d)},w(n))},onClose:u=>{o(),s(()=>{r(u)},w(e))}}},Ks=Et({...E2e,...KQ,appendTo:{type:Ke([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Ke(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...ga(["ariaLabel"])}),lx=Et({...EQ,disabled:Boolean,trigger:{type:Ke([String,Array]),default:"hover"},triggerKeys:{type:Ke(Array),default:()=>[kt.enter,kt.numpadEnter,kt.space]}}),D2e=lu({type:Ke(Boolean),default:null}),R2e=lu({type:Ke(Function)}),P2e=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,i=[e],r={[n]:D2e,[t]:R2e};return{useModelToggle:({indicator:a,toggleReason:o,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const f=Nn(),{emit:h}=f,p=f.props,m=V(()=>Xt(p[t])),v=V(()=>p[n]===null),g=C=>{a.value!==!0&&(a.value=!0,o&&(o.value=C),Xt(u)&&u(C))},y=C=>{a.value!==!1&&(a.value=!1,o&&(o.value=C),Xt(d)&&d(C))},x=C=>{if(p.disabled===!0||Xt(c)&&!c())return;const _=m.value&&li;_&&h(e,!0),(v.value||!_)&&g(C)},b=C=>{if(p.disabled===!0||!li)return;const _=m.value&&li;_&&h(e,!1),(v.value||!_)&&y(C)},A=C=>{ji(C)&&(p.disabled&&C?m.value&&h(e,!1):a.value!==C&&(C?g():y()))},S=()=>{a.value?b():x()};return pt(()=>p[n],A),l&&f.appContext.config.globalProperties.$route!==void 0&&pt(()=>({...f.proxy.$route}),()=>{l.value&&a.value&&b()}),Mn(()=>{A(p[n])}),{hide:b,show:x,toggle:S,hasUpdateHandler:m}},useModelToggleProps:r,useModelToggleEmits:i}},{useModelToggleProps:L2e,useModelToggleEmits:k2e,useModelToggle:F2e}=P2e("visible"),B2e=Et({...MQ,...L2e,...Ks,...lx,...TQ,showArrow:{type:Boolean,default:!0}}),N2e=[...k2e,"before-show","before-hide","show","hide","open","close"],O2e=(n,e)=>Mt(n)?n.includes(e):n===e,Ym=(n,e,t)=>i=>{O2e(w(n),e)&&t(i)},Yr=(n,e,{checkForDefaultPrevented:t=!0}={})=>r=>{const s=n==null?void 0:n(r);if(t===!1||!s)return e==null?void 0:e(r)},iU=n=>e=>e.pointerType==="mouse"?n(e):void 0,U2e=Ie({name:"ElTooltipTrigger"}),z2e=Ie({...U2e,props:lx,setup(n,{expose:e}){const t=n,i=St("tooltip"),{controlled:r,id:s,open:a,onOpen:o,onClose:l,onToggle:c}=Nt(AM,void 0),u=ae(null),d=()=>{if(w(r)||t.disabled)return!0},f=Ii(t,"trigger"),h=Yr(d,Ym(f,"hover",o)),p=Yr(d,Ym(f,"hover",l)),m=Yr(d,Ym(f,"click",b=>{b.button===0&&c(b)})),v=Yr(d,Ym(f,"focus",o)),g=Yr(d,Ym(f,"focus",l)),y=Yr(d,Ym(f,"contextmenu",b=>{b.preventDefault(),c(b)})),x=Yr(d,b=>{const{code:A}=b;t.triggerKeys.includes(A)&&(b.preventDefault(),c(b))});return e({triggerRef:u}),(b,A)=>(W(),rt(w(Q1e),{id:w(s),"virtual-ref":b.virtualRef,open:w(a),"virtual-triggering":b.virtualTriggering,class:j(w(i).e("trigger")),onBlur:w(g),onClick:w(m),onContextmenu:w(y),onFocus:w(v),onMouseenter:w(h),onMouseleave:w(p),onKeydown:w(x)},{default:Re(()=>[Qe(b.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var V2e=It(z2e,[["__file","trigger.vue"]]);const H2e=Et({to:{type:Ke([String,Object]),required:!0},disabled:Boolean}),G2e=Ie({__name:"teleport",props:H2e,setup(n){return(e,t)=>e.disabled?Qe(e.$slots,"default",{key:0}):(W(),rt(Wce,{key:1,to:e.to},[Qe(e.$slots,"default")],8,["to"]))}});var W2e=It(G2e,[["__file","teleport.vue"]]);const oy=xn(W2e),XQ=()=>{const n=ML(),e=tk(),t=V(()=>`${n.value}-popper-container-${e.prefix}`),i=V(()=>`#${t.value}`);return{id:t,selector:i}},q2e=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},K2e=()=>{const{id:n,selector:e}=XQ();return eM(()=>{li&&(document.body.querySelector(e.value)||q2e(n.value))}),{id:n,selector:e}},Y2e=Ie({name:"ElTooltipContent",inheritAttrs:!1}),X2e=Ie({...Y2e,props:Ks,setup(n,{expose:e}){const t=n,{selector:i}=XQ(),r=St("tooltip"),s=ae();let a;const{controlled:o,id:l,open:c,trigger:u,onClose:d,onOpen:f,onShow:h,onHide:p,onBeforeShow:m,onBeforeHide:v}=Nt(AM,void 0),g=V(()=>t.transition||`${r.namespace.value}-fade-in-linear`),y=V(()=>t.persistent);Fi(()=>{a==null||a()});const x=V(()=>w(y)?!0:w(c)),b=V(()=>t.disabled?!1:w(c)),A=V(()=>t.appendTo||i.value),S=V(()=>{var z;return(z=t.style)!=null?z:{}}),C=ae(!0),_=()=>{p(),P()&&Bd(document.body),C.value=!0},M=()=>{if(w(o))return!0},T=Yr(M,()=>{t.enterable&&w(u)==="hover"&&f()}),E=Yr(M,()=>{w(u)==="hover"&&d()}),I=()=>{var z,O;(O=(z=s.value)==null?void 0:z.updatePopper)==null||O.call(z),m==null||m()},L=()=>{v==null||v()},F=()=>{h(),a=GL(V(()=>{var z;return(z=s.value)==null?void 0:z.popperContentRef}),()=>{if(w(o))return;w(u)!=="hover"&&d()})},B=()=>{t.virtualTriggering||d()},P=z=>{var O;const N=(O=s.value)==null?void 0:O.popperContentRef,H=(z==null?void 0:z.relatedTarget)||document.activeElement;return N==null?void 0:N.contains(H)};return pt(()=>w(c),z=>{z?C.value=!1:a==null||a()},{flush:"post"}),pt(()=>t.content,()=>{var z,O;(O=(z=s.value)==null?void 0:z.updatePopper)==null||O.call(z)}),e({contentRef:s,isFocusInsideContent:P}),(z,O)=>(W(),rt(w(oy),{disabled:!z.teleported,to:w(A)},{default:Re(()=>[_e(na,{name:w(g),onAfterLeave:_,onBeforeEnter:I,onAfterEnter:F,onBeforeLeave:L},{default:Re(()=>[w(x)?Cn((W(),rt(w(T2e),Kn({key:0,id:w(l),ref_key:"contentRef",ref:s},z.$attrs,{"aria-label":z.ariaLabel,"aria-hidden":C.value,"boundaries-padding":z.boundariesPadding,"fallback-placements":z.fallbackPlacements,"gpu-acceleration":z.gpuAcceleration,offset:z.offset,placement:z.placement,"popper-options":z.popperOptions,strategy:z.strategy,effect:z.effect,enterable:z.enterable,pure:z.pure,"popper-class":z.popperClass,"popper-style":[z.popperStyle,w(S)],"reference-el":z.referenceEl,"trigger-target-el":z.triggerTargetEl,visible:w(b),"z-index":z.zIndex,onMouseenter:w(T),onMouseleave:w(E),onBlur:B,onClose:w(d)}),{default:Re(()=>[Qe(z.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[yi,w(b)]]):et("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var j2e=It(X2e,[["__file","content.vue"]]);const $2e=Ie({name:"ElTooltip"}),Q2e=Ie({...$2e,props:B2e,emits:N2e,setup(n,{expose:e,emit:t}){const i=n;K2e();const r=ma(),s=ae(),a=ae(),o=()=>{var g;const y=w(s);y&&((g=y.popperInstanceRef)==null||g.update())},l=ae(!1),c=ae(),{show:u,hide:d,hasUpdateHandler:f}=F2e({indicator:l,toggleReason:c}),{onOpen:h,onClose:p}=I2e({showAfter:Ii(i,"showAfter"),hideAfter:Ii(i,"hideAfter"),autoClose:Ii(i,"autoClose"),open:u,close:d}),m=V(()=>ji(i.visible)&&!f.value);Qn(AM,{controlled:m,id:r,open:Z1(l),trigger:Ii(i,"trigger"),onOpen:g=>{h(g)},onClose:g=>{p(g)},onToggle:g=>{w(l)?p(g):h(g)},onShow:()=>{t("show",c.value)},onHide:()=>{t("hide",c.value)},onBeforeShow:()=>{t("before-show",c.value)},onBeforeHide:()=>{t("before-hide",c.value)},updatePopper:o}),pt(()=>i.disabled,g=>{g&&l.value&&(l.value=!1)});const v=g=>{var y;return(y=a.value)==null?void 0:y.isFocusInsideContent(g)};return _j(()=>l.value&&d()),e({popperRef:s,contentRef:a,isFocusInsideContent:v,updatePopper:o,onOpen:h,onClose:p,hide:d}),(g,y)=>(W(),rt(w(YQ),{ref_key:"popperRef",ref:s,role:g.role},{default:Re(()=>[_e(V2e,{disabled:g.disabled,trigger:g.trigger,"trigger-keys":g.triggerKeys,"virtual-ref":g.virtualRef,"virtual-triggering":g.virtualTriggering},{default:Re(()=>[g.$slots.default?Qe(g.$slots,"default",{key:0}):et("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),_e(j2e,{ref_key:"contentRef",ref:a,"aria-label":g.ariaLabel,"boundaries-padding":g.boundariesPadding,content:g.content,disabled:g.disabled,effect:g.effect,enterable:g.enterable,"fallback-placements":g.fallbackPlacements,"hide-after":g.hideAfter,"gpu-acceleration":g.gpuAcceleration,offset:g.offset,persistent:g.persistent,"popper-class":g.popperClass,"popper-style":g.popperStyle,placement:g.placement,"popper-options":g.popperOptions,pure:g.pure,"raw-content":g.rawContent,"reference-el":g.referenceEl,"trigger-target-el":g.triggerTargetEl,"show-after":g.showAfter,strategy:g.strategy,teleported:g.teleported,transition:g.transition,"virtual-triggering":g.virtualTriggering,"z-index":g.zIndex,"append-to":g.appendTo},{default:Re(()=>[Qe(g.$slots,"content",{},()=>[g.rawContent?(W(),ve("span",{key:0,innerHTML:g.content},null,8,["innerHTML"])):(W(),ve("span",{key:1},Tt(g.content),1))]),g.showArrow?(W(),rt(w(G1e),{key:0,"arrow-offset":g.arrowOffset},null,8,["arrow-offset"])):et("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Z2e=It(Q2e,[["__file","tooltip.vue"]]);const Da=xn(Z2e),J2e=Et({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Ke(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Ke([Function,Array]),default:Pi},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:Ks.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...ga(["ariaLabel"])}),ebe={[Tn]:n=>qt(n),[Ea]:n=>qt(n),[zi]:n=>qt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,select:n=>Rn(n)},jQ="ElAutocomplete",tbe=Ie({name:jQ,inheritAttrs:!1}),nbe=Ie({...tbe,props:J2e,emits:ebe,setup(n,{expose:e,emit:t}){const i=n,r=yA(),s=Cf(),a=ka(),o=St("autocomplete"),l=ae(),c=ae(),u=ae(),d=ae();let f=!1,h=!1;const p=ae([]),m=ae(-1),v=ae(""),g=ae(!1),y=ae(!1),x=ae(!1),b=ma(),A=V(()=>s.style),S=V(()=>(p.value.length>0||x.value)&&g.value),C=V(()=>!i.hideLoading&&x.value),_=V(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),M=()=>{S.value&&(v.value=`${l.value.$el.offsetWidth}px`)},T=()=>{m.value=-1},E=async ue=>{if(y.value)return;const Te=De=>{x.value=!1,!y.value&&(Mt(De)?(p.value=De,m.value=i.highlightFirstItem?0:-1):Rs(jQ,"autocomplete suggestions must be an array"))};if(x.value=!0,Mt(i.fetchSuggestions))Te(i.fetchSuggestions);else{const De=await i.fetchSuggestions(ue,Te);Mt(De)&&Te(De)}},I=Jo(E,i.debounce),L=ue=>{const Te=!!ue;if(t(Ea,ue),t(Tn,ue),y.value=!1,g.value||(g.value=Te),!i.triggerOnFocus&&!ue){y.value=!0,p.value=[];return}I(ue)},F=ue=>{var Te;a.value||(((Te=ue.target)==null?void 0:Te.tagName)!=="INPUT"||_.value.includes(document.activeElement))&&(g.value=!0)},B=ue=>{t(zi,ue)},P=ue=>{h?h=!1:(g.value=!0,t("focus",ue),i.triggerOnFocus&&!f&&I(String(i.modelValue)))},z=ue=>{setTimeout(()=>{var Te;if((Te=u.value)!=null&&Te.isFocusInsideContent()){h=!0;return}g.value&&q(),t("blur",ue)})},O=()=>{g.value=!1,t(Tn,""),t("clear")},N=async()=>{S.value&&m.value>=0&&m.value<p.value.length?ee(p.value[m.value]):i.selectWhenUnmatched&&(t("select",{value:i.modelValue}),p.value=[],m.value=-1)},H=ue=>{S.value&&(ue.preventDefault(),ue.stopPropagation(),q())},q=()=>{g.value=!1},te=()=>{var ue;(ue=l.value)==null||ue.focus()},Q=()=>{var ue;(ue=l.value)==null||ue.blur()},ee=async ue=>{t(Ea,ue[i.valueKey]),t(Tn,ue[i.valueKey]),t("select",ue),p.value=[],m.value=-1},de=ue=>{if(!S.value||x.value)return;if(ue<0){m.value=-1;return}ue>=p.value.length&&(ue=p.value.length-1);const Te=c.value.querySelector(`.${o.be("suggestion","wrap")}`),Le=Te.querySelectorAll(`.${o.be("suggestion","list")} li`)[ue],Ne=Te.scrollTop,{offsetTop:Y,scrollHeight:oe}=Le;Y+oe>Ne+Te.clientHeight&&(Te.scrollTop+=oe),Y<Ne&&(Te.scrollTop-=oe),m.value=ue,l.value.ref.setAttribute("aria-activedescendant",`${b.value}-item-${m.value}`)},J=GL(d,()=>{var ue;(ue=u.value)!=null&&ue.isFocusInsideContent()||S.value&&q()});return Fi(()=>{J==null||J()}),Mn(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${b.value}-item-${m.value}`),f=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:m,activated:g,loading:x,inputRef:l,popperRef:u,suggestions:p,handleSelect:ee,handleKeyEnter:N,focus:te,blur:Q,close:q,highlight:de,getData:E}),(ue,Te)=>(W(),rt(w(Da),{ref_key:"popperRef",ref:u,visible:w(S),placement:ue.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[w(o).e("popper"),ue.popperClass],teleported:ue.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${w(o).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:M,onHide:T},{content:Re(()=>[be("div",{ref_key:"regionRef",ref:c,class:j([w(o).b("suggestion"),w(o).is("loading",w(C))]),style:jt({[ue.fitInputWidth?"width":"minWidth"]:v.value,outline:"none"}),role:"region"},[_e(w(sd),{id:w(b),tag:"ul","wrap-class":w(o).be("suggestion","wrap"),"view-class":w(o).be("suggestion","list"),role:"listbox"},{default:Re(()=>[w(C)?(W(),ve("li",{key:0},[Qe(ue.$slots,"loading",{},()=>[_e(w(Ut),{class:j(w(o).is("loading"))},{default:Re(()=>[_e(w(ju))]),_:1},8,["class"])])])):(W(!0),ve(Kt,{key:1},Jn(p.value,(De,Le)=>(W(),ve("li",{id:`${w(b)}-item-${Le}`,key:Le,class:j({highlighted:m.value===Le}),role:"option","aria-selected":m.value===Le,onClick:Ne=>ee(De)},[Qe(ue.$slots,"default",{item:De},()=>[Hn(Tt(De[ue.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:Re(()=>[be("div",{ref_key:"listboxRef",ref:d,class:j([w(o).b(),ue.$attrs.class]),style:jt(w(A)),role:"combobox","aria-haspopup":"listbox","aria-expanded":w(S),"aria-owns":w(b)},[_e(w(Qa),Kn({ref_key:"inputRef",ref:l},w(r),{clearable:ue.clearable,disabled:w(a),name:ue.name,"model-value":ue.modelValue,"aria-label":ue.ariaLabel,onInput:L,onChange:B,onFocus:P,onBlur:z,onClear:O,onKeydown:[Xi(ln(De=>de(m.value-1),["prevent"]),["up"]),Xi(ln(De=>de(m.value+1),["prevent"]),["down"]),Xi(N,["enter"]),Xi(q,["tab"]),Xi(H,["esc"])],onMousedown:F}),Il({_:2},[ue.$slots.prepend?{name:"prepend",fn:Re(()=>[Qe(ue.$slots,"prepend")])}:void 0,ue.$slots.append?{name:"append",fn:Re(()=>[Qe(ue.$slots,"append")])}:void 0,ue.$slots.prefix?{name:"prefix",fn:Re(()=>[Qe(ue.$slots,"prefix")])}:void 0,ue.$slots.suffix?{name:"suffix",fn:Re(()=>[Qe(ue.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var ibe=It(nbe,[["__file","autocomplete.vue"]]);const rbe=xn(ibe),sbe=Et({size:{type:[Number,String],values:rd,default:"",validator:n=>Jt(n)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Hi},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Ke(String),default:"cover"}}),abe={error:n=>n instanceof Event},obe=Ie({name:"ElAvatar"}),lbe=Ie({...obe,props:sbe,emits:abe,setup(n,{emit:e}){const t=n,i=St("avatar"),r=ae(!1),s=V(()=>{const{size:c,icon:u,shape:d}=t,f=[i.b()];return qt(c)&&f.push(i.m(c)),u&&f.push(i.m("icon")),d&&f.push(i.m(d)),f}),a=V(()=>{const{size:c}=t;return Jt(c)?i.cssVarBlock({size:Hr(c)||""}):void 0}),o=V(()=>({objectFit:t.fit}));pt(()=>t.src,()=>r.value=!1);function l(c){r.value=!0,e("error",c)}return(c,u)=>(W(),ve("span",{class:j(w(s)),style:jt(w(a))},[(c.src||c.srcSet)&&!r.value?(W(),ve("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:jt(w(o)),onError:l},null,44,["src","alt","srcset"])):c.icon?(W(),rt(w(Ut),{key:1},{default:Re(()=>[(W(),rt(On(c.icon)))]),_:1})):Qe(c.$slots,"default",{key:2})],6))}});var cbe=It(lbe,[["__file","avatar.vue"]]);const ube=xn(cbe),dbe={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},fbe={click:n=>n instanceof MouseEvent},hbe=(n,e,t)=>{const i=Ui(),r=Ui(),s=ae(!1),a=()=>{i.value&&(s.value=i.value.scrollTop>=n.visibilityHeight)},o=c=>{var u;(u=i.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=tQ(a,300,!0);return Li(r,"scroll",l),Mn(()=>{var c;r.value=document,i.value=document.documentElement,n.target&&(i.value=(c=document.querySelector(n.target))!=null?c:void 0,i.value||Rs(t,`target does not exist: ${n.target}`),r.value=i.value),a()}),{visible:s,handleClick:o}},$Q="ElBacktop",pbe=Ie({name:$Q}),mbe=Ie({...pbe,props:dbe,emits:fbe,setup(n,{emit:e}){const t=n,i=St("backtop"),{handleClick:r,visible:s}=hbe(t,e,$Q),a=V(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(o,l)=>(W(),rt(na,{name:`${w(i).namespace.value}-fade-in`},{default:Re(()=>[w(s)?(W(),ve("div",{key:0,style:jt(w(a)),class:j(w(i).b()),onClick:ln(w(r),["stop"])},[Qe(o.$slots,"default",{},()=>[_e(w(Ut),{class:j(w(i).e("icon"))},{default:Re(()=>[_e(w(rge))]),_:1},8,["class"])])],14,["onClick"])):et("v-if",!0)]),_:3},8,["name"]))}});var vbe=It(mbe,[["__file","backtop.vue"]]);const gbe=xn(vbe),ybe=Et({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Ke([String,Object,Array])},offset:{type:Ke(Array),default:[0,0]},badgeClass:{type:String}}),bbe=Ie({name:"ElBadge"}),xbe=Ie({...bbe,props:ybe,setup(n,{expose:e}){const t=n,i=St("badge"),r=V(()=>t.isDot?"":Jt(t.value)&&Jt(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),s=V(()=>{var a,o,l,c,u;return[{backgroundColor:t.color,marginRight:Hr(-((o=(a=t.offset)==null?void 0:a[0])!=null?o:0)),marginTop:Hr((c=(l=t.offset)==null?void 0:l[1])!=null?c:0)},(u=t.badgeStyle)!=null?u:{}]});return e({content:r}),(a,o)=>(W(),ve("div",{class:j(w(i).b())},[Qe(a.$slots,"default"),_e(na,{name:`${w(i).namespace.value}-zoom-in-center`,persisted:""},{default:Re(()=>[Cn(be("sup",{class:j([w(i).e("content"),w(i).em("content",a.type),w(i).is("fixed",!!a.$slots.default),w(i).is("dot",a.isDot),w(i).is("hide-zero",!a.showZero&&t.value===0),a.badgeClass]),style:jt(w(s))},[Qe(a.$slots,"content",{value:w(r)},()=>[Hn(Tt(w(r)),1)])],6),[[yi,!a.hidden&&(w(r)||a.isDot||a.$slots.content)]])]),_:3},8,["name"])],2))}});var Abe=It(xbe,[["__file","badge.vue"]]);const QQ=xn(Abe),ZQ=Symbol("breadcrumbKey"),wbe=Et({separator:{type:String,default:"/"},separatorIcon:{type:Hi}}),Sbe=Ie({name:"ElBreadcrumb"}),_be=Ie({...Sbe,props:wbe,setup(n){const e=n,{t}=ci(),i=St("breadcrumb"),r=ae();return Qn(ZQ,e),Mn(()=>{const s=r.value.querySelectorAll(`.${i.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),(s,a)=>(W(),ve("div",{ref_key:"breadcrumb",ref:r,class:j(w(i).b()),"aria-label":w(t)("el.breadcrumb.label"),role:"navigation"},[Qe(s.$slots,"default")],10,["aria-label"]))}});var Cbe=It(_be,[["__file","breadcrumb.vue"]]);const Mbe=Et({to:{type:Ke([String,Object]),default:""},replace:Boolean}),Tbe=Ie({name:"ElBreadcrumbItem"}),Ebe=Ie({...Tbe,props:Mbe,setup(n){const e=n,t=Nn(),i=Nt(ZQ,void 0),r=St("breadcrumb"),s=t.appContext.config.globalProperties.$router,a=ae(),o=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(l,c)=>{var u,d;return W(),ve("span",{class:j(w(r).e("item"))},[be("span",{ref_key:"link",ref:a,class:j([w(r).e("inner"),w(r).is("link",!!l.to)]),role:"link",onClick:o},[Qe(l.$slots,"default")],2),(u=w(i))!=null&&u.separatorIcon?(W(),rt(w(Ut),{key:0,class:j(w(r).e("separator"))},{default:Re(()=>[(W(),rt(On(w(i).separatorIcon)))]),_:1},8,["class"])):(W(),ve("span",{key:1,class:j(w(r).e("separator")),role:"presentation"},Tt((d=w(i))==null?void 0:d.separator),3))],2)}}});var JQ=It(Ebe,[["__file","breadcrumb-item.vue"]]);const Ibe=xn(Cbe,{BreadcrumbItem:JQ}),Dbe=Or(JQ),eZ=Symbol("buttonGroupContextKey"),Uh=({from:n,replacement:e,scope:t,version:i,ref:r,type:s="API"},a)=>{pt(()=>w(a),o=>{},{immediate:!0})},Rbe=(n,e)=>{Uh({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},V(()=>n.type==="text"));const t=Nt(eZ,void 0),i=pM("button"),{form:r}=La(),s=gs(V(()=>t==null?void 0:t.size)),a=ka(),o=ae(),l=Ps(),c=V(()=>n.type||(t==null?void 0:t.type)||""),u=V(()=>{var p,m,v;return(v=(m=n.autoInsertSpace)!=null?m:(p=i.value)==null?void 0:p.autoInsertSpace)!=null?v:!1}),d=V(()=>n.tag==="button"?{ariaDisabled:a.value||n.loading,disabled:a.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),f=V(()=>{var p;const m=(p=l.default)==null?void 0:p.call(l);if(u.value&&(m==null?void 0:m.length)===1){const v=m[0];if((v==null?void 0:v.type)===J1){const g=v.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(g.trim())}}return!1});return{_disabled:a,_size:s,_type:c,_ref:o,_props:d,shouldAddSpace:f,handleClick:p=>{if(a.value||n.loading){p.stopPropagation();return}n.nativeType==="reset"&&(r==null||r.resetFields()),e("click",p)}}},ED=["default","primary","success","warning","info","danger","text",""],Pbe=["button","submit","reset"],ID=Et({size:ws,disabled:Boolean,type:{type:String,values:ED,default:""},icon:{type:Hi},nativeType:{type:String,values:Pbe,default:"button"},loading:Boolean,loadingIcon:{type:Hi,default:()=>ju},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Ke([String,Object]),default:"button"}}),Lbe={click:n=>n instanceof MouseEvent};function Ia(n,e){kbe(n)&&(n="100%");var t=Fbe(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function fw(n){return Math.min(1,Math.max(0,n))}function kbe(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function Fbe(n){return typeof n=="string"&&n.indexOf("%")!==-1}function tZ(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function hw(n){return n<=1?"".concat(Number(n)*100,"%"):n}function D0(n){return n.length===1?"0"+n:String(n)}function Bbe(n,e,t){return{r:Ia(n,255)*255,g:Ia(e,255)*255,b:Ia(t,255)*255}}function rU(n,e,t){n=Ia(n,255),e=Ia(e,255),t=Ia(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,a=0,o=(i+r)/2;if(i===r)a=0,s=0;else{var l=i-r;switch(a=o>.5?l/(2-i-r):l/(i+r),i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function S5(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Nbe(n,e,t){var i,r,s;if(n=Ia(n,360),e=Ia(e,100),t=Ia(t,100),e===0)r=t,s=t,i=t;else{var a=t<.5?t*(1+e):t+e-t*e,o=2*t-a;i=S5(o,a,n+1/3),r=S5(o,a,n),s=S5(o,a,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function sU(n,e,t){n=Ia(n,255),e=Ia(e,255),t=Ia(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,a=i,o=i-r,l=i===0?0:o/i;if(i===r)s=0;else{switch(i){case n:s=(e-t)/o+(e<t?6:0);break;case e:s=(t-n)/o+2;break;case t:s=(n-e)/o+4;break}s/=6}return{h:s,s:l,v:a}}function Obe(n,e,t){n=Ia(n,360)*6,e=Ia(e,100),t=Ia(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=i%6,c=[t,a,s,s,o,t][l],u=[o,t,t,a,s,s][l],d=[s,s,o,t,t,a][l];return{r:c*255,g:u*255,b:d*255}}function aU(n,e,t,i){var r=[D0(Math.round(n).toString(16)),D0(Math.round(e).toString(16)),D0(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Ube(n,e,t,i,r){var s=[D0(Math.round(n).toString(16)),D0(Math.round(e).toString(16)),D0(Math.round(t).toString(16)),D0(zbe(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function zbe(n){return Math.round(parseFloat(n)*255).toString(16)}function oU(n){return dl(n)/255}function dl(n){return parseInt(n,16)}function Vbe(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var DD={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Hbe(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,a=!1,o=!1;return typeof n=="string"&&(n=qbe(n)),typeof n=="object"&&(yd(n.r)&&yd(n.g)&&yd(n.b)?(e=Bbe(n.r,n.g,n.b),a=!0,o=String(n.r).substr(-1)==="%"?"prgb":"rgb"):yd(n.h)&&yd(n.s)&&yd(n.v)?(i=hw(n.s),r=hw(n.v),e=Obe(n.h,i,r),a=!0,o="hsv"):yd(n.h)&&yd(n.s)&&yd(n.l)&&(i=hw(n.s),s=hw(n.l),e=Nbe(n.h,i,s),a=!0,o="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=tZ(t),{ok:a,format:n.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var Gbe="[-\\+]?\\d+%?",Wbe="[-\\+]?\\d*\\.\\d+%?",Dh="(?:".concat(Wbe,")|(?:").concat(Gbe,")"),_5="[\\s|\\(]+(".concat(Dh,")[,|\\s]+(").concat(Dh,")[,|\\s]+(").concat(Dh,")\\s*\\)?"),C5="[\\s|\\(]+(".concat(Dh,")[,|\\s]+(").concat(Dh,")[,|\\s]+(").concat(Dh,")[,|\\s]+(").concat(Dh,")\\s*\\)?"),kc={CSS_UNIT:new RegExp(Dh),rgb:new RegExp("rgb"+_5),rgba:new RegExp("rgba"+C5),hsl:new RegExp("hsl"+_5),hsla:new RegExp("hsla"+C5),hsv:new RegExp("hsv"+_5),hsva:new RegExp("hsva"+C5),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function qbe(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(DD[n])n=DD[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=kc.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=kc.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=kc.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=kc.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=kc.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=kc.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=kc.hex8.exec(n),t?{r:dl(t[1]),g:dl(t[2]),b:dl(t[3]),a:oU(t[4]),format:e?"name":"hex8"}:(t=kc.hex6.exec(n),t?{r:dl(t[1]),g:dl(t[2]),b:dl(t[3]),format:e?"name":"hex"}:(t=kc.hex4.exec(n),t?{r:dl(t[1]+t[1]),g:dl(t[2]+t[2]),b:dl(t[3]+t[3]),a:oU(t[4]+t[4]),format:e?"name":"hex8"}:(t=kc.hex3.exec(n),t?{r:dl(t[1]+t[1]),g:dl(t[2]+t[2]),b:dl(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function yd(n){return!!kc.CSS_UNIT.exec(String(n))}var nZ=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=Vbe(e)),this.originalInput=e;var r=Hbe(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,r,s=e.r/255,a=e.g/255,o=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),.2126*t+.7152*i+.0722*r},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=tZ(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=sU(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=sU(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=rU(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=rU(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),aU(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),Ube(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Ia(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Ia(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+aU(this.r,this.g,this.b,!1),t=0,i=Object.entries(DD);t<i.length;t++){var r=i[t],s=r[0],a=r[1];if(e===a)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,s=!t&&r&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=fw(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=fw(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=fw(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=fw(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),s=t/100,a={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return new n(a)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),r=360/t,s=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(new n(i));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,s=t.v,a=[],o=1/e;e--;)a.push(new n({h:i,s:r,v:s})),s=(s+o)%1;return a},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),r=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/r,g:(t.g*t.a+i.g*i.a*(1-t.a))/r,b:(t.b*t.a+i.b*i.a*(1-t.a))/r,a:r})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],s=360/e,a=1;a<e;a++)r.push(new n({h:(i+a*s)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function Uf(n,e=20){return n.mix("#141414",e).toString()}function Kbe(n){const e=ka(),t=St("button");return V(()=>{let i={},r=n.color;if(r){const s=r.match(/var\((.*?)\)/);s&&(r=window.getComputedStyle(window.document.documentElement).getPropertyValue(s[1]));const a=new nZ(r),o=n.dark?a.tint(20).toString():Uf(a,20);if(n.plain)i=t.cssVarBlock({"bg-color":n.dark?Uf(a,90):a.tint(90).toString(),"text-color":r,"border-color":n.dark?Uf(a,50):a.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":r,"hover-border-color":r,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=n.dark?Uf(a,90):a.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=n.dark?Uf(a,50):a.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=n.dark?Uf(a,80):a.tint(80).toString());else{const l=n.dark?Uf(a,30):a.tint(30).toString(),c=a.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":r,"text-color":c,"border-color":r,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":o,"active-border-color":o}),e.value){const u=n.dark?Uf(a,50):a.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=u,i[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=u}}}return i})}const Ybe=Ie({name:"ElButton"}),Xbe=Ie({...Ybe,props:ID,emits:Lbe,setup(n,{expose:e,emit:t}){const i=n,r=Kbe(i),s=St("button"),{_ref:a,_size:o,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:f}=Rbe(i,t),h=V(()=>[s.b(),s.m(l.value),s.m(o.value),s.is("disabled",c.value),s.is("loading",i.loading),s.is("plain",i.plain),s.is("round",i.round),s.is("circle",i.circle),s.is("text",i.text),s.is("link",i.link),s.is("has-bg",i.bg)]);return e({ref:a,size:o,type:l,disabled:c,shouldAddSpace:d}),(p,m)=>(W(),rt(On(p.tag),Kn({ref_key:"_ref",ref:a},w(u),{class:w(h),style:w(r),onClick:w(f)}),{default:Re(()=>[p.loading?(W(),ve(Kt,{key:0},[p.$slots.loading?Qe(p.$slots,"loading",{key:0}):(W(),rt(w(Ut),{key:1,class:j(w(s).is("loading"))},{default:Re(()=>[(W(),rt(On(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(W(),rt(w(Ut),{key:1},{default:Re(()=>[p.icon?(W(),rt(On(p.icon),{key:0})):Qe(p.$slots,"icon",{key:1})]),_:3})):et("v-if",!0),p.$slots.default?(W(),ve("span",{key:2,class:j({[w(s).em("text","expand")]:w(d)})},[Qe(p.$slots,"default")],2)):et("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var jbe=It(Xbe,[["__file","button.vue"]]);const $be={size:ID.size,type:ID.type},Qbe=Ie({name:"ElButtonGroup"}),Zbe=Ie({...Qbe,props:$be,setup(n){const e=n;Qn(eZ,Si({size:Ii(e,"size"),type:Ii(e,"type")}));const t=St("button");return(i,r)=>(W(),ve("div",{class:j(w(t).b("group"))},[Qe(i.$slots,"default")],2))}});var iZ=It(Zbe,[["__file","button-group.vue"]]);const ea=xn(jbe,{ButtonGroup:iZ}),rZ=Or(iZ);function uu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Y3={exports:{}},Jbe=Y3.exports,lU;function exe(){return lU||(lU=1,function(n,e){(function(t,i){n.exports=i()})(Jbe,function(){var t=1e3,i=6e4,r=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var B=["th","st","nd","rd"],P=F%100;return"["+F+(B[(P-20)%10]||B[P]||B[0])+"]"}},x=function(F,B,P){var z=String(F);return!z||z.length>=B?F:""+Array(B+1-z.length).join(P)+F},b={s:x,z:function(F){var B=-F.utcOffset(),P=Math.abs(B),z=Math.floor(P/60),O=P%60;return(B<=0?"+":"-")+x(z,2,"0")+":"+x(O,2,"0")},m:function F(B,P){if(B.date()<P.date())return-F(P,B);var z=12*(P.year()-B.year())+(P.month()-B.month()),O=B.clone().add(z,d),N=P-O<0,H=B.clone().add(z+(N?-1:1),d);return+(-(z+(P-O)/(N?O-H:H-O))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:d,y:h,w:u,d:c,D:p,h:l,m:o,s:a,ms:s,Q:f}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},A="en",S={};S[A]=y;var C="$isDayjsObject",_=function(F){return F instanceof I||!(!F||!F[C])},M=function F(B,P,z){var O;if(!B)return A;if(typeof B=="string"){var N=B.toLowerCase();S[N]&&(O=N),P&&(S[N]=P,O=N);var H=B.split("-");if(!O&&H.length>1)return F(H[0])}else{var q=B.name;S[q]=B,O=q}return!z&&O&&(A=O),O||!z&&A},T=function(F,B){if(_(F))return F.clone();var P=typeof B=="object"?B:{};return P.date=F,P.args=arguments,new I(P)},E=b;E.l=M,E.i=_,E.w=function(F,B){return T(F,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var I=function(){function F(P){this.$L=M(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[C]=!0}var B=F.prototype;return B.parse=function(P){this.$d=function(z){var O=z.date,N=z.utc;if(O===null)return new Date(NaN);if(E.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var H=O.match(v);if(H){var q=H[2]-1||0,te=(H[7]||"0").substring(0,3);return N?new Date(Date.UTC(H[1],q,H[3]||1,H[4]||0,H[5]||0,H[6]||0,te)):new Date(H[1],q,H[3]||1,H[4]||0,H[5]||0,H[6]||0,te)}}return new Date(O)}(P),this.init()},B.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},B.$utils=function(){return E},B.isValid=function(){return this.$d.toString()!==m},B.isSame=function(P,z){var O=T(P);return this.startOf(z)<=O&&O<=this.endOf(z)},B.isAfter=function(P,z){return T(P)<this.startOf(z)},B.isBefore=function(P,z){return this.endOf(z)<T(P)},B.$g=function(P,z,O){return E.u(P)?this[z]:this.set(O,P)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(P,z){var O=this,N=!!E.u(z)||z,H=E.p(P),q=function(De,Le){var Ne=E.w(O.$u?Date.UTC(O.$y,Le,De):new Date(O.$y,Le,De),O);return N?Ne:Ne.endOf(c)},te=function(De,Le){return E.w(O.toDate()[De].apply(O.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(Le)),O)},Q=this.$W,ee=this.$M,de=this.$D,J="set"+(this.$u?"UTC":"");switch(H){case h:return N?q(1,0):q(31,11);case d:return N?q(1,ee):q(0,ee+1);case u:var ue=this.$locale().weekStart||0,Te=(Q<ue?Q+7:Q)-ue;return q(N?de-Te:de+(6-Te),ee);case c:case p:return te(J+"Hours",0);case l:return te(J+"Minutes",1);case o:return te(J+"Seconds",2);case a:return te(J+"Milliseconds",3);default:return this.clone()}},B.endOf=function(P){return this.startOf(P,!1)},B.$set=function(P,z){var O,N=E.p(P),H="set"+(this.$u?"UTC":""),q=(O={},O[c]=H+"Date",O[p]=H+"Date",O[d]=H+"Month",O[h]=H+"FullYear",O[l]=H+"Hours",O[o]=H+"Minutes",O[a]=H+"Seconds",O[s]=H+"Milliseconds",O)[N],te=N===c?this.$D+(z-this.$W):z;if(N===d||N===h){var Q=this.clone().set(p,1);Q.$d[q](te),Q.init(),this.$d=Q.set(p,Math.min(this.$D,Q.daysInMonth())).$d}else q&&this.$d[q](te);return this.init(),this},B.set=function(P,z){return this.clone().$set(P,z)},B.get=function(P){return this[E.p(P)]()},B.add=function(P,z){var O,N=this;P=Number(P);var H=E.p(z),q=function(ee){var de=T(N);return E.w(de.date(de.date()+Math.round(ee*P)),N)};if(H===d)return this.set(d,this.$M+P);if(H===h)return this.set(h,this.$y+P);if(H===c)return q(1);if(H===u)return q(7);var te=(O={},O[o]=i,O[l]=r,O[a]=t,O)[H]||1,Q=this.$d.getTime()+P*te;return E.w(Q,this)},B.subtract=function(P,z){return this.add(-1*P,z)},B.format=function(P){var z=this,O=this.$locale();if(!this.isValid())return O.invalidDate||m;var N=P||"YYYY-MM-DDTHH:mm:ssZ",H=E.z(this),q=this.$H,te=this.$m,Q=this.$M,ee=O.weekdays,de=O.months,J=O.meridiem,ue=function(Le,Ne,Y,oe){return Le&&(Le[Ne]||Le(z,N))||Y[Ne].slice(0,oe)},Te=function(Le){return E.s(q%12||12,Le,"0")},De=J||function(Le,Ne,Y){var oe=Le<12?"AM":"PM";return Y?oe.toLowerCase():oe};return N.replace(g,function(Le,Ne){return Ne||function(Y){switch(Y){case"YY":return String(z.$y).slice(-2);case"YYYY":return E.s(z.$y,4,"0");case"M":return Q+1;case"MM":return E.s(Q+1,2,"0");case"MMM":return ue(O.monthsShort,Q,de,3);case"MMMM":return ue(de,Q);case"D":return z.$D;case"DD":return E.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return ue(O.weekdaysMin,z.$W,ee,2);case"ddd":return ue(O.weekdaysShort,z.$W,ee,3);case"dddd":return ee[z.$W];case"H":return String(q);case"HH":return E.s(q,2,"0");case"h":return Te(1);case"hh":return Te(2);case"a":return De(q,te,!0);case"A":return De(q,te,!1);case"m":return String(te);case"mm":return E.s(te,2,"0");case"s":return String(z.$s);case"ss":return E.s(z.$s,2,"0");case"SSS":return E.s(z.$ms,3,"0");case"Z":return H}return null}(Le)||H.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(P,z,O){var N,H=this,q=E.p(z),te=T(P),Q=(te.utcOffset()-this.utcOffset())*i,ee=this-te,de=function(){return E.m(H,te)};switch(q){case h:N=de()/12;break;case d:N=de();break;case f:N=de()/3;break;case u:N=(ee-Q)/6048e5;break;case c:N=(ee-Q)/864e5;break;case l:N=ee/r;break;case o:N=ee/i;break;case a:N=ee/t;break;default:N=ee}return O?N:E.a(N)},B.daysInMonth=function(){return this.endOf(d).$D},B.$locale=function(){return S[this.$L]},B.locale=function(P,z){if(!P)return this.$L;var O=this.clone(),N=M(P,z,!0);return N&&(O.$L=N),O},B.clone=function(){return E.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},F}(),L=I.prototype;return T.prototype=L,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",d],["$y",h],["$D",p]].forEach(function(F){L[F[1]]=function(B){return this.$g(B,F[0],F[1])}}),T.extend=function(F,B){return F.$i||(F(B,I,T),F.$i=!0),T},T.locale=M,T.isDayjs=_,T.unix=function(F){return T(1e3*F)},T.en=S[A],T.Ls=S,T.p={},T})}(Y3)),Y3.exports}var txe=exe();const An=uu(txe),M5=(n,e)=>[n>0?n-1:void 0,n,n<e?n+1:void 0],zh=n=>Array.from(Array.from({length:n}).keys()),sZ=n=>n.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),aZ=n=>n.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),cU=function(n,e){const t=Zh(n),i=Zh(e);return t&&i?n.getTime()===e.getTime():!t&&!i?n===e:!1},uU=function(n,e){const t=Mt(n),i=Mt(e);return t&&i?n.length!==e.length?!1:n.every((r,s)=>cU(r,e[s])):!t&&!i?cU(n,e):!1},dU=function(n,e,t){const i=vl(e)||e==="x"?An(n).locale(t):An(n,e).locale(t);return i.isValid()?i:void 0},fU=function(n,e,t){return vl(e)?n:e==="x"?+n:An(n).locale(t).format(e)},T5=(n,e)=>{var t;const i=[],r=e==null?void 0:e();for(let s=0;s<n;s++)i.push((t=r==null?void 0:r.includes(s))!=null?t:!1);return i},pw=n=>Mt(n)?n.map(e=>e.toDate()):n.toDate(),nxe=(n,e)=>{const t=n.subtract(1,"month").endOf("month").date();return zh(e).map((i,r)=>t-(e-r-1))},ixe=n=>{const e=n.daysInMonth();return zh(e).map((t,i)=>i+1)},rxe=n=>zh(n.length/7).map(e=>{const t=e*7;return n.slice(t,t+7)}),sxe=Et({selectedDay:{type:Ke(Object)},range:{type:Ke(Array)},date:{type:Ke(Object),required:!0},hideHeader:{type:Boolean}}),axe={pick:n=>Rn(n)};var X3={exports:{}},oxe=X3.exports,hU;function lxe(){return hU||(hU=1,function(n,e){(function(t,i){n.exports=i()})(oxe,function(){return function(t,i,r){var s=i.prototype,a=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,f,h,p,m){var v=d.name?d:d.$locale(),g=a(v[f]),y=a(v[h]),x=g||y.map(function(A){return A.slice(0,p)});if(!m)return x;var b=v.weekStart;return x.map(function(A,S){return x[(S+(b||0))%7]})},l=function(){return r.Ls[r.locale()]},c=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,v){return m||v.slice(1)})}(d.formats[f.toUpperCase()])},u=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):o(d,"months")},monthsShort:function(f){return f?f.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):o(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return c(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return u.bind(this)()},r.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(f){return c(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},r.months=function(){return o(l(),"months")},r.monthsShort=function(){return o(l(),"monthsShort","months",3)},r.weekdays=function(d){return o(l(),"weekdays",null,null,d)},r.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},r.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})}(X3)),X3.exports}var cxe=lxe();const oZ=uu(cxe),uxe=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],E5=["sun","mon","tue","wed","thu","fri","sat"],dxe=(n,e)=>{An.extend(oZ);const t=An.localeData().firstDayOfWeek(),{t:i,lang:r}=ci(),s=An().locale(r.value),a=V(()=>!!n.range&&!!n.range.length),o=V(()=>{let f=[];if(a.value){const[h,p]=n.range,m=zh(p.date()-h.date()+1).map(y=>({text:h.date()+y,type:"current"}));let v=m.length%7;v=v===0?0:7-v;const g=zh(v).map((y,x)=>({text:x+1,type:"next"}));f=m.concat(g)}else{const h=n.date.startOf("month").day(),p=nxe(n.date,(h-t+7)%7).map(y=>({text:y,type:"prev"})),m=ixe(n.date).map(y=>({text:y,type:"current"}));f=[...p,...m];const v=7-(f.length%7||7),g=zh(v).map((y,x)=>({text:x+1,type:"next"}));f=f.concat(g)}return rxe(f)}),l=V(()=>{const f=t;return f===0?E5.map(h=>i(`el.datepicker.weeks.${h}`)):E5.slice(f).concat(E5.slice(0,f)).map(h=>i(`el.datepicker.weeks.${h}`))}),c=(f,h)=>{switch(h){case"prev":return n.date.startOf("month").subtract(1,"month").date(f);case"next":return n.date.startOf("month").add(1,"month").date(f);case"current":return n.date.date(f)}};return{now:s,isInRange:a,rows:o,weekDays:l,getFormattedDate:c,handlePickDay:({text:f,type:h})=>{const p=c(f,h);e("pick",p)},getSlotData:({text:f,type:h})=>{const p=c(f,h);return{isSelected:p.isSame(n.selectedDay),type:`${h}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},fxe=Ie({name:"DateTable"}),hxe=Ie({...fxe,props:sxe,emits:axe,setup(n,{expose:e,emit:t}){const i=n,{isInRange:r,now:s,rows:a,weekDays:o,getFormattedDate:l,handlePickDay:c,getSlotData:u}=dxe(i,t),d=St("calendar-table"),f=St("calendar-day"),h=({text:p,type:m})=>{const v=[m];if(m==="current"){const g=l(p,m);g.isSame(i.selectedDay,"day")&&v.push(f.is("selected")),g.isSame(s,"day")&&v.push(f.is("today"))}return v};return e({getFormattedDate:l}),(p,m)=>(W(),ve("table",{class:j([w(d).b(),w(d).is("range",w(r))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?et("v-if",!0):(W(),ve("thead",{key:0},[be("tr",null,[(W(!0),ve(Kt,null,Jn(w(o),v=>(W(),ve("th",{key:v,scope:"col"},Tt(v),1))),128))])])),be("tbody",null,[(W(!0),ve(Kt,null,Jn(w(a),(v,g)=>(W(),ve("tr",{key:g,class:j({[w(d).e("row")]:!0,[w(d).em("row","hide-border")]:g===0&&p.hideHeader})},[(W(!0),ve(Kt,null,Jn(v,(y,x)=>(W(),ve("td",{key:x,class:j(h(y)),onClick:b=>w(c)(y)},[be("div",{class:j(w(f).b())},[Qe(p.$slots,"date-cell",{data:w(u)(y)},()=>[be("span",null,Tt(y.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var pU=It(hxe,[["__file","date-table.vue"]]);const pxe=(n,e)=>{const t=n.endOf("month"),i=e.startOf("month"),s=t.isSame(i,"week")?i.add(1,"week"):i;return[[n,t],[s.startOf("week"),e]]},mxe=(n,e)=>{const t=n.endOf("month"),i=n.add(1,"month").startOf("month"),r=t.isSame(i,"week")?i.add(1,"week"):i,s=r.endOf("month"),a=e.startOf("month"),o=s.isSame(a,"week")?a.add(1,"week"):a;return[[n,t],[r.startOf("week"),s],[o.startOf("week"),e]]},vxe=(n,e,t)=>{const{lang:i}=ci(),r=ae(),s=An().locale(i.value),a=V({get(){return n.modelValue?l.value:r.value},set(v){if(!v)return;r.value=v;const g=v.toDate();e(Ea,g),e(Tn,g)}}),o=V(()=>{if(!n.range||!Mt(n.range)||n.range.length!==2||n.range.some(x=>!Zh(x)))return[];const v=n.range.map(x=>An(x).locale(i.value)),[g,y]=v;return g.isAfter(y)?[]:g.isSame(y,"month")?h(g,y):g.add(1,"month").month()!==y.month()?[]:h(g,y)}),l=V(()=>n.modelValue?An(n.modelValue).locale(i.value):a.value||(o.value.length?o.value[0][0]:s)),c=V(()=>l.value.subtract(1,"month").date(1)),u=V(()=>l.value.add(1,"month").date(1)),d=V(()=>l.value.subtract(1,"year").date(1)),f=V(()=>l.value.add(1,"year").date(1)),h=(v,g)=>{const y=v.startOf("week"),x=g.endOf("week"),b=y.get("month"),A=x.get("month");return b===A?[[y,x]]:(b+1)%12===A?pxe(y,x):b+2===A||(b+1)%11===A?mxe(y,x):[]},p=v=>{a.value=v};return{calculateValidatedDateRange:h,date:l,realSelectedDay:a,pickDay:p,selectDate:v=>{const y={"prev-month":c.value,"next-month":u.value,"prev-year":d.value,"next-year":f.value,today:s}[v];y.isSame(l.value,"day")||p(y)},validatedRange:o}},gxe=n=>Mt(n)&&n.length===2&&n.every(e=>Zh(e)),yxe=Et({modelValue:{type:Date},range:{type:Ke(Array),validator:gxe}}),bxe={[Tn]:n=>Zh(n),[Ea]:n=>Zh(n)},xxe="ElCalendar",Axe=Ie({name:xxe}),wxe=Ie({...Axe,props:yxe,emits:bxe,setup(n,{expose:e,emit:t}){const i=n,r=St("calendar"),{calculateValidatedDateRange:s,date:a,pickDay:o,realSelectedDay:l,selectDate:c,validatedRange:u}=vxe(i,t),{t:d}=ci(),f=V(()=>{const h=`el.datepicker.month${a.value.format("M")}`;return`${a.value.year()} ${d("el.datepicker.year")} ${d(h)}`});return e({selectedDay:l,pickDay:o,selectDate:c,calculateValidatedDateRange:s}),(h,p)=>(W(),ve("div",{class:j(w(r).b())},[be("div",{class:j(w(r).e("header"))},[Qe(h.$slots,"header",{date:w(f)},()=>[be("div",{class:j(w(r).e("title"))},Tt(w(f)),3),w(u).length===0?(W(),ve("div",{key:0,class:j(w(r).e("button-group"))},[_e(w(rZ),null,{default:Re(()=>[_e(w(ea),{size:"small",onClick:m=>w(c)("prev-month")},{default:Re(()=>[Hn(Tt(w(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),_e(w(ea),{size:"small",onClick:m=>w(c)("today")},{default:Re(()=>[Hn(Tt(w(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),_e(w(ea),{size:"small",onClick:m=>w(c)("next-month")},{default:Re(()=>[Hn(Tt(w(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):et("v-if",!0)])],2),w(u).length===0?(W(),ve("div",{key:0,class:j(w(r).e("body"))},[_e(pU,{date:w(a),"selected-day":w(l),onPick:w(o)},Il({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:Re(m=>[Qe(h.$slots,"date-cell",yl(Yu(m)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(W(),ve("div",{key:1,class:j(w(r).e("body"))},[(W(!0),ve(Kt,null,Jn(w(u),(m,v)=>(W(),rt(pU,{key:v,date:m[0],"selected-day":w(l),range:m,"hide-header":v!==0,onPick:w(o)},Il({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:Re(g=>[Qe(h.$slots,"date-cell",yl(Yu(g)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Sxe=It(wxe,[["__file","calendar.vue"]]);const _xe=xn(Sxe),Cxe=Et({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Ke([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Mxe=Ie({name:"ElCard"}),Txe=Ie({...Mxe,props:Cxe,setup(n){const e=St("card");return(t,i)=>(W(),ve("div",{class:j([w(e).b(),w(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(W(),ve("div",{key:0,class:j(w(e).e("header"))},[Qe(t.$slots,"header",{},()=>[Hn(Tt(t.header),1)])],2)):et("v-if",!0),be("div",{class:j([w(e).e("body"),t.bodyClass]),style:jt(t.bodyStyle)},[Qe(t.$slots,"default")],6),t.$slots.footer||t.footer?(W(),ve("div",{key:1,class:j(w(e).e("footer"))},[Qe(t.$slots,"footer",{},()=>[Hn(Tt(t.footer),1)])],2)):et("v-if",!0)],2))}});var Exe=It(Txe,[["__file","card.vue"]]);const Ixe=xn(Exe),Dxe=Et({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),Rxe={change:(n,e)=>[n,e].every(Jt)},lZ=Symbol("carouselContextKey"),RD="ElCarouselItem";var Wl=(n=>(n[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL",n))(Wl||{});function PD(n){return mr(n)&&n.type===Kt}function Pxe(n){return mr(n)&&n.type===js}function Lxe(n){return mr(n)&&!PD(n)&&!Pxe(n)}const kxe=n=>{if(!mr(n))return{};const e=n.props||{},t=(mr(n.type)?n.type.props:void 0)||{},i={};return Object.keys(t).forEach(r=>{vi(t[r],"default")&&(i[r]=t[r].default)}),Object.keys(e).forEach(r=>{i[So(r)]=e[r]}),i},Fxe=n=>{if(!Mt(n)||n.length>1)throw new Error("expect to receive a single Vue element child");return n[0]},Xd=n=>{const e=Mt(n)?n:[n],t=[];return e.forEach(i=>{var r;Mt(i)?t.push(...Xd(i)):mr(i)&&((r=i.component)!=null&&r.subTree)?t.push(i,...Xd(i.component.subTree)):mr(i)&&Mt(i.children)?t.push(...Xd(i.children)):mr(i)&&i.shapeFlag===2?t.push(...Xd(i.type())):t.push(i)}),t},Bxe=(n,e,t)=>Xd(n.subTree).filter(s=>{var a;return mr(s)&&((a=s.type)==null?void 0:a.name)===e&&!!s.component}).map(s=>s.component.uid).map(s=>t[s]).filter(s=>!!s),mk=(n,e)=>{const t={},i=Ui([]);return{children:i,addChild:a=>{t[a.uid]=a,i.value=Bxe(n,e,t)},removeChild:a=>{delete t[a],i.value=i.value.filter(o=>o.uid!==a)}}},mU=300,Nxe=(n,e,t)=>{const{children:i,addChild:r,removeChild:s}=mk(Nn(),RD),a=Ps(),o=ae(-1),l=ae(null),c=ae(!1),u=ae(),d=ae(0),f=ae(!0),h=ae(!0),p=ae(!1),m=V(()=>n.arrow!=="never"&&!w(y)),v=V(()=>i.value.some(J=>J.props.label.toString().length>0)),g=V(()=>n.type==="card"),y=V(()=>n.direction==="vertical"),x=V(()=>n.height!=="auto"?{height:n.height}:{height:`${d.value}px`,overflow:"hidden"}),b=K0(J=>{T(J)},mU,{trailing:!0}),A=K0(J=>{N(J)},mU),S=J=>f.value?o.value<=1?J<=1:J>1:!0;function C(){l.value&&(clearInterval(l.value),l.value=null)}function _(){n.interval<=0||!n.autoplay||l.value||(l.value=setInterval(()=>M(),n.interval))}const M=()=>{h.value||(p.value=!0),h.value=!1,o.value<i.value.length-1?o.value=o.value+1:n.loop?o.value=0:p.value=!1};function T(J){if(h.value||(p.value=!0),h.value=!1,qt(J)){const De=i.value.filter(Le=>Le.props.name===J);De.length>0&&(J=i.value.indexOf(De[0]))}if(J=Number(J),Number.isNaN(J)||J!==Math.floor(J))return;const ue=i.value.length,Te=o.value;J<0?o.value=n.loop?ue-1:0:J>=ue?o.value=n.loop?0:ue-1:o.value=J,Te===o.value&&E(Te),te()}function E(J){i.value.forEach((ue,Te)=>{ue.translateItem(Te,o.value,J)})}function I(J,ue){var Te,De,Le,Ne;const Y=w(i),oe=Y.length;if(oe===0||!J.states.inStage)return!1;const ne=ue+1,Xe=ue-1,ke=oe-1,Ge=Y[ke].states.active,He=Y[0].states.active,qe=(De=(Te=Y[ne])==null?void 0:Te.states)==null?void 0:De.active,tt=(Ne=(Le=Y[Xe])==null?void 0:Le.states)==null?void 0:Ne.active;return ue===ke&&He||qe?"left":ue===0&&Ge||tt?"right":!1}function L(){c.value=!0,n.pauseOnHover&&C()}function F(){c.value=!1,_()}function B(){p.value=!1}function P(J){w(y)||i.value.forEach((ue,Te)=>{J===I(ue,Te)&&(ue.states.hover=!0)})}function z(){w(y)||i.value.forEach(J=>{J.states.hover=!1})}function O(J){J!==o.value&&(h.value||(p.value=!0)),o.value=J}function N(J){n.trigger==="hover"&&J!==o.value&&(o.value=J,h.value||(p.value=!0))}function H(){T(o.value-1)}function q(){T(o.value+1)}function te(){C(),n.pauseOnHover||_()}function Q(J){n.height==="auto"&&(d.value=J)}function ee(){var J;const ue=(J=a.default)==null?void 0:J.call(a);if(!ue)return null;const De=Xd(ue).filter(Le=>mr(Le)&&Le.type.name===RD);return(De==null?void 0:De.length)===2&&n.loop&&!g.value?(f.value=!0,De):(f.value=!1,null)}pt(()=>o.value,(J,ue)=>{E(ue),f.value&&(J=J%2,ue=ue%2),ue>-1&&e("change",J,ue)}),pt(()=>n.autoplay,J=>{J?_():C()}),pt(()=>n.loop,()=>{T(o.value)}),pt(()=>n.interval,()=>{te()});const de=Ui();return Mn(()=>{pt(()=>i.value,()=>{i.value.length>0&&T(n.initialIndex)},{immediate:!0}),de.value=Fr(u.value,()=>{E()}),_()}),Fi(()=>{C(),u.value&&de.value&&de.value.stop()}),Qn(lZ,{root:u,isCardType:g,isVertical:y,items:i,loop:n.loop,cardScale:n.cardScale,addItem:r,removeItem:s,setActiveItem:T,setContainerHeight:Q}),{root:u,activeIndex:o,arrowDisplay:m,hasLabel:v,hover:c,isCardType:g,isTransitioning:p,items:i,isVertical:y,containerStyle:x,isItemsTwoLength:f,handleButtonEnter:P,handleTransitionEnd:B,handleButtonLeave:z,handleIndicatorClick:O,handleMouseEnter:L,handleMouseLeave:F,setActiveItem:T,prev:H,next:q,PlaceholderItem:ee,isTwoLengthShow:S,throttledArrowClick:b,throttledIndicatorHover:A}},Oxe="ElCarousel",Uxe=Ie({name:Oxe}),zxe=Ie({...Uxe,props:Dxe,emits:Rxe,setup(n,{expose:e,emit:t}){const i=n,{root:r,activeIndex:s,arrowDisplay:a,hasLabel:o,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:f,handleButtonEnter:h,handleButtonLeave:p,isTransitioning:m,handleIndicatorClick:v,handleMouseEnter:g,handleMouseLeave:y,handleTransitionEnd:x,setActiveItem:b,prev:A,next:S,PlaceholderItem:C,isTwoLengthShow:_,throttledArrowClick:M,throttledIndicatorHover:T}=Nxe(i,t),E=St("carousel"),{t:I}=ci(),L=V(()=>{const P=[E.b(),E.m(i.direction)];return w(c)&&P.push(E.m("card")),P}),F=V(()=>{const P=[E.e("container")];return i.motionBlur&&w(m)&&u.value.length>1&&P.push(w(d)?`${E.namespace.value}-transitioning-vertical`:`${E.namespace.value}-transitioning`),P}),B=V(()=>{const P=[E.e("indicators"),E.em("indicators",i.direction)];return w(o)&&P.push(E.em("indicators","labels")),i.indicatorPosition==="outside"&&P.push(E.em("indicators","outside")),w(d)&&P.push(E.em("indicators","right")),P});return e({activeIndex:s,setActiveItem:b,prev:A,next:S}),(P,z)=>(W(),ve("div",{ref_key:"root",ref:r,class:j(w(L)),onMouseenter:ln(w(g),["stop"]),onMouseleave:ln(w(y),["stop"])},[w(a)?(W(),rt(na,{key:0,name:"carousel-arrow-left",persisted:""},{default:Re(()=>[Cn(be("button",{type:"button",class:j([w(E).e("arrow"),w(E).em("arrow","left")]),"aria-label":w(I)("el.carousel.leftArrow"),onMouseenter:O=>w(h)("left"),onMouseleave:w(p),onClick:ln(O=>w(M)(w(s)-1),["stop"])},[_e(w(Ut),null,{default:Re(()=>[_e(w(np))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[yi,(P.arrow==="always"||w(l))&&(i.loop||w(s)>0)]])]),_:1})):et("v-if",!0),w(a)?(W(),rt(na,{key:1,name:"carousel-arrow-right",persisted:""},{default:Re(()=>[Cn(be("button",{type:"button",class:j([w(E).e("arrow"),w(E).em("arrow","right")]),"aria-label":w(I)("el.carousel.rightArrow"),onMouseenter:O=>w(h)("right"),onMouseleave:w(p),onClick:ln(O=>w(M)(w(s)+1),["stop"])},[_e(w(Ut),null,{default:Re(()=>[_e(w(xo))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[yi,(P.arrow==="always"||w(l))&&(i.loop||w(s)<w(u).length-1)]])]),_:1})):et("v-if",!0),be("div",{class:j(w(F)),style:jt(w(f)),onTransitionend:w(x)},[_e(w(C)),Qe(P.$slots,"default")],46,["onTransitionend"]),P.indicatorPosition!=="none"?(W(),ve("ul",{key:2,class:j(w(B))},[(W(!0),ve(Kt,null,Jn(w(u),(O,N)=>Cn((W(),ve("li",{key:N,class:j([w(E).e("indicator"),w(E).em("indicator",P.direction),w(E).is("active",N===w(s))]),onMouseenter:H=>w(T)(N),onClick:ln(H=>w(v)(N),["stop"])},[be("button",{class:j(w(E).e("button")),"aria-label":w(I)("el.carousel.indicator",{index:N+1})},[w(o)?(W(),ve("span",{key:0},Tt(O.props.label),1)):et("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[yi,w(_)(N)]])),128))],2)):et("v-if",!0),i.motionBlur?(W(),ve("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[be("defs",null,[be("filter",{id:"elCarouselHorizontal"},[be("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),be("filter",{id:"elCarouselVertical"},[be("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):et("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var Vxe=It(zxe,[["__file","carousel.vue"]]);const Hxe=Et({name:{type:String,default:""},label:{type:[String,Number],default:""}}),Gxe=n=>{const e=Nt(lZ),t=Nn(),i=ae(),r=ae(!1),s=ae(0),a=ae(1),o=ae(!1),l=ae(!1),c=ae(!1),u=ae(!1),{isCardType:d,isVertical:f,cardScale:h}=e;function p(x,b,A){const S=A-1,C=b-1,_=b+1,M=A/2;return b===0&&x===S?-1:b===S&&x===0?A:x<C&&b-x>=M?A+1:x>_&&x-b>=M?-2:x}function m(x,b){var A,S;const C=w(f)?((A=e.root.value)==null?void 0:A.offsetHeight)||0:((S=e.root.value)==null?void 0:S.offsetWidth)||0;return c.value?C*((2-h)*(x-b)+1)/4:x<b?-(1+h)*C/4:(3+h)*C/4}function v(x,b,A){const S=e.root.value;return S?((A?S.offsetHeight:S.offsetWidth)||0)*(x-b):0}const g=(x,b,A)=>{var S;const C=w(d),_=(S=e.items.value.length)!=null?S:Number.NaN,M=x===b;!C&&!bi(A)&&(u.value=M||x===A),!M&&_>2&&e.loop&&(x=p(x,b,_));const T=w(f);o.value=M,C?(c.value=Math.round(Math.abs(x-b))<=1,s.value=m(x,b),a.value=w(o)?1:h):s.value=v(x,b,T),l.value=!0,M&&i.value&&e.setContainerHeight(i.value.offsetHeight)};function y(){if(e&&w(d)){const x=e.items.value.findIndex(({uid:b})=>b===t.uid);e.setActiveItem(x)}}return Mn(()=>{e.addItem({props:n,states:Si({hover:r,translate:s,scale:a,active:o,ready:l,inStage:c,animating:u}),uid:t.uid,translateItem:g})}),Ap(()=>{e.removeItem(t.uid)}),{carouselItemRef:i,active:o,animating:u,hover:r,inStage:c,isVertical:f,translate:s,isCardType:d,scale:a,ready:l,handleItemClick:y}},Wxe=Ie({name:RD}),qxe=Ie({...Wxe,props:Hxe,setup(n){const e=n,t=St("carousel"),{carouselItemRef:i,active:r,animating:s,hover:a,inStage:o,isVertical:l,translate:c,isCardType:u,scale:d,ready:f,handleItemClick:h}=Gxe(e),p=V(()=>[t.e("item"),t.is("active",r.value),t.is("in-stage",o.value),t.is("hover",a.value),t.is("animating",s.value),{[t.em("item","card")]:u.value,[t.em("item","card-vertical")]:u.value&&l.value}]),m=V(()=>{const g=`${`translate${w(l)?"Y":"X"}`}(${w(c)}px)`,y=`scale(${w(d)})`;return{transform:[g,y].join(" ")}});return(v,g)=>Cn((W(),ve("div",{ref_key:"carouselItemRef",ref:i,class:j(w(p)),style:jt(w(m)),onClick:w(h)},[w(u)?Cn((W(),ve("div",{key:0,class:j(w(t).e("mask"))},null,2)),[[yi,!w(r)]]):et("v-if",!0),Qe(v.$slots,"default")],14,["onClick"])),[[yi,w(f)]])}});var cZ=It(qxe,[["__file","carousel-item.vue"]]);const Kxe=xn(Vxe,{CarouselItem:cZ}),Yxe=Or(cZ),uZ={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:ws,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...ga(["ariaControls"])},dZ={[Tn]:n=>qt(n)||Jt(n)||ji(n),change:n=>qt(n)||Jt(n)||ji(n)},ly=Symbol("checkboxGroupContextKey"),Xxe=({model:n,isChecked:e})=>{const t=Nt(ly,void 0),i=V(()=>{var s,a;const o=(s=t==null?void 0:t.max)==null?void 0:s.value,l=(a=t==null?void 0:t.min)==null?void 0:a.value;return!bi(o)&&n.value.length>=o&&!e.value||!bi(l)&&n.value.length<=l&&e.value});return{isDisabled:ka(V(()=>(t==null?void 0:t.disabled.value)||i.value)),isLimitDisabled:i}},jxe=(n,{model:e,isLimitExceeded:t,hasOwnLabel:i,isDisabled:r,isLabeledByFormItem:s})=>{const a=Nt(ly,void 0),{formItem:o}=La(),{emit:l}=Nn();function c(p){var m,v,g,y;return[!0,n.trueValue,n.trueLabel].includes(p)?(v=(m=n.trueValue)!=null?m:n.trueLabel)!=null?v:!0:(y=(g=n.falseValue)!=null?g:n.falseLabel)!=null?y:!1}function u(p,m){l("change",c(p),m)}function d(p){if(t.value)return;const m=p.target;l("change",c(m.checked),p)}async function f(p){t.value||!i.value&&!r.value&&s.value&&(p.composedPath().some(g=>g.tagName==="LABEL")||(e.value=c([!1,n.falseValue,n.falseLabel].includes(e.value)),await Yt(),u(e.value,p)))}const h=V(()=>(a==null?void 0:a.validateEvent)||n.validateEvent);return pt(()=>n.modelValue,()=>{h.value&&(o==null||o.validate("change").catch(p=>void 0))}),{handleChange:d,onClickRoot:f}},$xe=n=>{const e=ae(!1),{emit:t}=Nn(),i=Nt(ly,void 0),r=V(()=>bi(i)===!1),s=ae(!1),a=V({get(){var o,l;return r.value?(o=i==null?void 0:i.modelValue)==null?void 0:o.value:(l=n.modelValue)!=null?l:e.value},set(o){var l,c;r.value&&Mt(o)?(s.value=((l=i==null?void 0:i.max)==null?void 0:l.value)!==void 0&&o.length>(i==null?void 0:i.max.value)&&o.length>a.value.length,s.value===!1&&((c=i==null?void 0:i.changeEvent)==null||c.call(i,o))):(t(Tn,o),e.value=o)}});return{model:a,isGroup:r,isLimitExceeded:s}},Qxe=(n,e,{model:t})=>{const i=Nt(ly,void 0),r=ae(!1),s=V(()=>$c(n.value)?n.label:n.value),a=V(()=>{const u=t.value;return ji(u)?u:Mt(u)?Rn(s.value)?u.map(Ki).some(d=>ha(d,s.value)):u.map(Ki).includes(s.value):u!=null?u===n.trueValue||u===n.trueLabel:!!u}),o=gs(V(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value}),{prop:!0}),l=gs(V(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value})),c=V(()=>!!e.default||!$c(s.value));return{checkboxButtonSize:o,isChecked:a,isFocused:r,checkboxSize:l,hasOwnLabel:c,actualValue:s}},fZ=(n,e)=>{const{formItem:t}=La(),{model:i,isGroup:r,isLimitExceeded:s}=$xe(n),{isFocused:a,isChecked:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=Qxe(n,e,{model:i}),{isDisabled:f}=Xxe({model:i,isChecked:o}),{inputId:h,isLabeledByFormItem:p}=bc(n,{formItemContext:t,disableIdGeneration:u,disableIdManagement:r}),{handleChange:m,onClickRoot:v}=jxe(n,{model:i,isLimitExceeded:s,hasOwnLabel:u,isDisabled:f,isLabeledByFormItem:p});return(()=>{function y(){var x,b;Mt(i.value)&&!i.value.includes(d.value)?i.value.push(d.value):i.value=(b=(x=n.trueValue)!=null?x:n.trueLabel)!=null?b:!0}n.checked&&y()})(),Uh({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},V(()=>r.value&&$c(n.value))),Uh({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},V(()=>!!n.trueLabel)),Uh({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},V(()=>!!n.falseLabel)),{inputId:h,isLabeledByFormItem:p,isChecked:o,isDisabled:f,isFocused:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:i,actualValue:d,handleChange:m,onClickRoot:v}},Zxe=Ie({name:"ElCheckbox"}),Jxe=Ie({...Zxe,props:uZ,emits:dZ,setup(n){const e=n,t=Ps(),{inputId:i,isLabeledByFormItem:r,isChecked:s,isDisabled:a,isFocused:o,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:f,onClickRoot:h}=fZ(e,t),p=St("checkbox"),m=V(()=>[p.b(),p.m(l.value),p.is("disabled",a.value),p.is("bordered",e.border),p.is("checked",s.value)]),v=V(()=>[p.e("input"),p.is("disabled",a.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",o.value)]);return(g,y)=>(W(),rt(On(!w(c)&&w(r)?"span":"label"),{class:j(w(m)),"aria-controls":g.indeterminate?g.ariaControls:null,onClick:w(h)},{default:Re(()=>{var x,b,A,S;return[be("span",{class:j(w(v))},[g.trueValue||g.falseValue||g.trueLabel||g.falseLabel?Cn((W(),ve("input",{key:0,id:w(i),"onUpdate:modelValue":C=>ir(u)?u.value=C:null,class:j(w(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,name:g.name,tabindex:g.tabindex,disabled:w(a),"true-value":(b=(x=g.trueValue)!=null?x:g.trueLabel)!=null?b:!0,"false-value":(S=(A=g.falseValue)!=null?A:g.falseLabel)!=null?S:!1,onChange:w(f),onFocus:C=>o.value=!0,onBlur:C=>o.value=!1,onClick:ln(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[uC,w(u)]]):Cn((W(),ve("input",{key:1,id:w(i),"onUpdate:modelValue":C=>ir(u)?u.value=C:null,class:j(w(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,disabled:w(a),value:w(d),name:g.name,tabindex:g.tabindex,onChange:w(f),onFocus:C=>o.value=!0,onBlur:C=>o.value=!1,onClick:ln(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[uC,w(u)]]),be("span",{class:j(w(p).e("inner"))},null,2)],2),w(c)?(W(),ve("span",{key:0,class:j(w(p).e("label"))},[Qe(g.$slots,"default"),g.$slots.default?et("v-if",!0):(W(),ve(Kt,{key:0},[Hn(Tt(g.label),1)],64))],2)):et("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var eAe=It(Jxe,[["__file","checkbox.vue"]]);const tAe=Ie({name:"ElCheckboxButton"}),nAe=Ie({...tAe,props:uZ,emits:dZ,setup(n){const e=n,t=Ps(),{isFocused:i,isChecked:r,isDisabled:s,checkboxButtonSize:a,model:o,actualValue:l,handleChange:c}=fZ(e,t),u=Nt(ly,void 0),d=St("checkbox"),f=V(()=>{var p,m,v,g;const y=(m=(p=u==null?void 0:u.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:y,borderColor:y,color:(g=(v=u==null?void 0:u.textColor)==null?void 0:v.value)!=null?g:"",boxShadow:y?`-1px 0 0 0 ${y}`:void 0}}),h=V(()=>[d.b("button"),d.bm("button",a.value),d.is("disabled",s.value),d.is("checked",r.value),d.is("focus",i.value)]);return(p,m)=>{var v,g,y,x;return W(),ve("label",{class:j(w(h))},[p.trueValue||p.falseValue||p.trueLabel||p.falseLabel?Cn((W(),ve("input",{key:0,"onUpdate:modelValue":b=>ir(o)?o.value=b:null,class:j(w(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:w(s),"true-value":(g=(v=p.trueValue)!=null?v:p.trueLabel)!=null?g:!0,"false-value":(x=(y=p.falseValue)!=null?y:p.falseLabel)!=null?x:!1,onChange:w(c),onFocus:b=>i.value=!0,onBlur:b=>i.value=!1,onClick:ln(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[uC,w(o)]]):Cn((W(),ve("input",{key:1,"onUpdate:modelValue":b=>ir(o)?o.value=b:null,class:j(w(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:w(s),value:w(l),onChange:w(c),onFocus:b=>i.value=!0,onBlur:b=>i.value=!1,onClick:ln(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[uC,w(o)]]),p.$slots.default||p.label?(W(),ve("span",{key:2,class:j(w(d).be("button","inner")),style:jt(w(r)?w(f):void 0)},[Qe(p.$slots,"default",{},()=>[Hn(Tt(p.label),1)])],6)):et("v-if",!0)],2)}}});var hZ=It(nAe,[["__file","checkbox-button.vue"]]);const iAe=Et({modelValue:{type:Ke(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:ws,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...ga(["ariaLabel"])}),rAe={[Tn]:n=>Mt(n),change:n=>Mt(n)},sAe=Ie({name:"ElCheckboxGroup"}),aAe=Ie({...sAe,props:iAe,emits:rAe,setup(n,{emit:e}){const t=n,i=St("checkbox"),{formItem:r}=La(),{inputId:s,isLabeledByFormItem:a}=bc(t,{formItemContext:r}),o=async c=>{e(Tn,c),await Yt(),e("change",c)},l=V({get(){return t.modelValue},set(c){o(c)}});return Qn(ly,{...Gc(Vs(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:o}),pt(()=>t.modelValue,()=>{t.validateEvent&&(r==null||r.validate("change").catch(c=>void 0))}),(c,u)=>{var d;return W(),rt(On(c.tag),{id:w(s),class:j(w(i).b("group")),role:"group","aria-label":w(a)?void 0:c.ariaLabel||"checkbox-group","aria-labelledby":w(a)?(d=w(r))==null?void 0:d.labelId:void 0},{default:Re(()=>[Qe(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var pZ=It(aAe,[["__file","checkbox-group.vue"]]);const vc=xn(eAe,{CheckboxButton:hZ,CheckboxGroup:pZ}),oAe=Or(hZ),mZ=Or(pZ),vZ=Et({modelValue:{type:[String,Number,Boolean],default:void 0},size:ws,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),lAe=Et({...vZ,border:Boolean}),gZ={[Tn]:n=>qt(n)||Jt(n)||ji(n),[zi]:n=>qt(n)||Jt(n)||ji(n)},yZ=Symbol("radioGroupKey"),bZ=(n,e)=>{const t=ae(),i=Nt(yZ,void 0),r=V(()=>!!i),s=V(()=>$c(n.value)?n.label:n.value),a=V({get(){return r.value?i.modelValue:n.modelValue},set(d){r.value?i.changeEvent(d):e&&e(Tn,d),t.value.checked=n.modelValue===s.value}}),o=gs(V(()=>i==null?void 0:i.size)),l=ka(V(()=>i==null?void 0:i.disabled)),c=ae(!1),u=V(()=>l.value||r.value&&a.value!==s.value?-1:0);return Uh({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},V(()=>r.value&&$c(n.value))),{radioRef:t,isGroup:r,radioGroup:i,focus:c,size:o,disabled:l,tabIndex:u,modelValue:a,actualValue:s}},cAe=Ie({name:"ElRadio"}),uAe=Ie({...cAe,props:lAe,emits:gZ,setup(n,{emit:e}){const t=n,i=St("radio"),{radioRef:r,radioGroup:s,focus:a,size:o,disabled:l,modelValue:c,actualValue:u}=bZ(t,e);function d(){Yt(()=>e("change",c.value))}return(f,h)=>{var p;return W(),ve("label",{class:j([w(i).b(),w(i).is("disabled",w(l)),w(i).is("focus",w(a)),w(i).is("bordered",f.border),w(i).is("checked",w(c)===w(u)),w(i).m(w(o))])},[be("span",{class:j([w(i).e("input"),w(i).is("disabled",w(l)),w(i).is("checked",w(c)===w(u))])},[Cn(be("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":m=>ir(c)?c.value=m:null,class:j(w(i).e("original")),value:w(u),name:f.name||((p=w(s))==null?void 0:p.name),disabled:w(l),checked:w(c)===w(u),type:"radio",onFocus:m=>a.value=!0,onBlur:m=>a.value=!1,onChange:d,onClick:ln(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[a$,w(c)]]),be("span",{class:j(w(i).e("inner"))},null,2)],2),be("span",{class:j(w(i).e("label")),onKeydown:ln(()=>{},["stop"])},[Qe(f.$slots,"default",{},()=>[Hn(Tt(f.label),1)])],42,["onKeydown"])],2)}}});var dAe=It(uAe,[["__file","radio.vue"]]);const fAe=Et({...vZ}),hAe=Ie({name:"ElRadioButton"}),pAe=Ie({...hAe,props:fAe,setup(n){const e=n,t=St("radio"),{radioRef:i,focus:r,size:s,disabled:a,modelValue:o,radioGroup:l,actualValue:c}=bZ(e),u=V(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,f)=>{var h;return W(),ve("label",{class:j([w(t).b("button"),w(t).is("active",w(o)===w(c)),w(t).is("disabled",w(a)),w(t).is("focus",w(r)),w(t).bm("button",w(s))])},[Cn(be("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":p=>ir(o)?o.value=p:null,class:j(w(t).be("button","original-radio")),value:w(c),type:"radio",name:d.name||((h=w(l))==null?void 0:h.name),disabled:w(a),onFocus:p=>r.value=!0,onBlur:p=>r.value=!1,onClick:ln(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[a$,w(o)]]),be("span",{class:j(w(t).be("button","inner")),style:jt(w(o)===w(c)?w(u):{}),onKeydown:ln(()=>{},["stop"])},[Qe(d.$slots,"default",{},()=>[Hn(Tt(d.label),1)])],46,["onKeydown"])],2)}}});var xZ=It(pAe,[["__file","radio-button.vue"]]);const mAe=Et({id:{type:String,default:void 0},size:ws,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...ga(["ariaLabel"])}),vAe=gZ,gAe=Ie({name:"ElRadioGroup"}),yAe=Ie({...gAe,props:mAe,emits:vAe,setup(n,{emit:e}){const t=n,i=St("radio"),r=ma(),s=ae(),{formItem:a}=La(),{inputId:o,isLabeledByFormItem:l}=bc(t,{formItemContext:a}),c=d=>{e(Tn,d),Yt(()=>e("change",d))};Mn(()=>{const d=s.value.querySelectorAll("[type=radio]"),f=d[0];!Array.from(d).some(h=>h.checked)&&f&&(f.tabIndex=0)});const u=V(()=>t.name||r.value);return Qn(yZ,Si({...Vs(t),changeEvent:c,name:u})),pt(()=>t.modelValue,()=>{t.validateEvent&&(a==null||a.validate("change").catch(d=>void 0))}),(d,f)=>(W(),ve("div",{id:w(o),ref_key:"radioGroupRef",ref:s,class:j(w(i).b("group")),role:"radiogroup","aria-label":w(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":w(l)?w(a).labelId:void 0},[Qe(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var AZ=It(yAe,[["__file","radio-group.vue"]]);const wZ=xn(dAe,{RadioButton:xZ,RadioGroup:AZ}),bAe=Or(AZ),xAe=Or(xZ);var AAe=Ie({name:"NodeContent",setup(){return{ns:St("cascader-node")}},render(){const{ns:n}=this,{node:e,panel:t}=this.$parent,{data:i,label:r}=e,{renderLabelFn:s}=t;return en("span",{class:n.e("label")},s?s({node:e,data:i}):r)}});const vk=Symbol(),wAe=Ie({name:"ElCascaderNode",components:{ElCheckbox:vc,ElRadio:wZ,NodeContent:AAe,ElIcon:Ut,Check:gA,Loading:ju,ArrowRight:xo},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(n,{emit:e}){const t=Nt(vk),i=St("cascader-node"),r=V(()=>t.isHoverMenu),s=V(()=>t.config.multiple),a=V(()=>t.config.checkStrictly),o=V(()=>{var S;return(S=t.checkedNodes[0])==null?void 0:S.uid}),l=V(()=>n.node.isDisabled),c=V(()=>n.node.isLeaf),u=V(()=>a.value&&!c.value||!l.value),d=V(()=>h(t.expandingNode)),f=V(()=>a.value&&t.checkedNodes.some(h)),h=S=>{var C;const{level:_,uid:M}=n.node;return((C=S==null?void 0:S.pathNodes[_-1])==null?void 0:C.uid)===M},p=()=>{d.value||t.expandNode(n.node)},m=S=>{const{node:C}=n;S!==C.checked&&t.handleCheckChange(C,S)},v=()=>{t.lazyLoad(n.node,()=>{c.value||p()})},g=S=>{r.value&&(y(),!c.value&&e("expand",S))},y=()=>{const{node:S}=n;!u.value||S.loading||(S.loaded?p():v())},x=()=>{r.value&&!c.value||(c.value&&!l.value&&!a.value&&!s.value?A(!0):y())},b=S=>{a.value?(m(S),n.node.loaded&&p()):A(S)},A=S=>{n.node.loaded?(m(S),!a.value&&p()):v()};return{panel:t,isHoverMenu:r,multiple:s,checkStrictly:a,checkedNodeId:o,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:d,inCheckedPath:f,ns:i,handleHoverExpand:g,handleExpand:y,handleClick:x,handleCheck:A,handleSelectCheck:b}}});function SAe(n,e,t,i,r,s){const a=an("el-checkbox"),o=an("el-radio"),l=an("check"),c=an("el-icon"),u=an("node-content"),d=an("loading"),f=an("arrow-right");return W(),ve("li",{id:`${n.menuId}-${n.node.uid}`,role:"menuitem","aria-haspopup":!n.isLeaf,"aria-owns":n.isLeaf?void 0:n.menuId,"aria-expanded":n.inExpandingPath,tabindex:n.expandable?-1:void 0,class:j([n.ns.b(),n.ns.is("selectable",n.checkStrictly),n.ns.is("active",n.node.checked),n.ns.is("disabled",!n.expandable),n.inExpandingPath&&"in-active-path",n.inCheckedPath&&"in-checked-path"]),onMouseenter:n.handleHoverExpand,onFocus:n.handleHoverExpand,onClick:n.handleClick},[et(" prefix "),n.multiple?(W(),rt(a,{key:0,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:n.isDisabled,onClick:ln(()=>{},["stop"]),"onUpdate:modelValue":n.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):n.checkStrictly?(W(),rt(o,{key:1,"model-value":n.checkedNodeId,label:n.node.uid,disabled:n.isDisabled,"onUpdate:modelValue":n.handleSelectCheck,onClick:ln(()=>{},["stop"])},{default:Re(()=>[et(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),be("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):n.isLeaf&&n.node.checked?(W(),rt(c,{key:2,class:j(n.ns.e("prefix"))},{default:Re(()=>[_e(l)]),_:1},8,["class"])):et("v-if",!0),et(" content "),_e(u),et(" postfix "),n.isLeaf?et("v-if",!0):(W(),ve(Kt,{key:3},[n.node.loading?(W(),rt(c,{key:0,class:j([n.ns.is("loading"),n.ns.e("postfix")])},{default:Re(()=>[_e(d)]),_:1},8,["class"])):(W(),rt(c,{key:1,class:j(["arrow-right",n.ns.e("postfix")])},{default:Re(()=>[_e(f)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var _Ae=It(wAe,[["render",SAe],["__file","node.vue"]]);const CAe=Ie({name:"ElCascaderMenu",components:{Loading:ju,ElIcon:Ut,ElScrollbar:sd,ElCascaderNode:_Ae},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(n){const e=Nn(),t=St("cascader-menu"),{t:i}=ci(),r=ma();let s=null,a=null;const o=Nt(vk),l=ae(null),c=V(()=>!n.nodes.length),u=V(()=>!o.initialLoaded),d=V(()=>`${r.value}-${n.index}`),f=v=>{s=v.target},h=v=>{if(!(!o.isHoverMenu||!s||!l.value))if(s.contains(v.target)){p();const g=e.vnode.el,{left:y}=g.getBoundingClientRect(),{offsetWidth:x,offsetHeight:b}=g,A=v.clientX-y,S=s.offsetTop,C=S+s.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${A} ${S} L${x} 0 V${S} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${A} ${C} L${x} ${b} V${C} Z" />
        `}else a||(a=window.setTimeout(m,o.config.hoverThreshold))},p=()=>{a&&(clearTimeout(a),a=null)},m=()=>{l.value&&(l.value.innerHTML="",p())};return{ns:t,panel:o,hoverZone:l,isEmpty:c,isLoading:u,menuId:d,t:i,handleExpand:f,handleMouseMove:h,clearHoverZone:m}}});function MAe(n,e,t,i,r,s){const a=an("el-cascader-node"),o=an("loading"),l=an("el-icon"),c=an("el-scrollbar");return W(),rt(c,{key:n.menuId,tag:"ul",role:"menu",class:j(n.ns.b()),"wrap-class":n.ns.e("wrap"),"view-class":[n.ns.e("list"),n.ns.is("empty",n.isEmpty)],onMousemove:n.handleMouseMove,onMouseleave:n.clearHoverZone},{default:Re(()=>{var u;return[(W(!0),ve(Kt,null,Jn(n.nodes,d=>(W(),rt(a,{key:d.uid,node:d,"menu-id":n.menuId,onExpand:n.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),n.isLoading?(W(),ve("div",{key:0,class:j(n.ns.e("empty-text"))},[_e(l,{size:"14",class:j(n.ns.is("loading"))},{default:Re(()=>[_e(o)]),_:1},8,["class"]),Hn(" "+Tt(n.t("el.cascader.loading")),1)],2)):n.isEmpty?(W(),ve("div",{key:1,class:j(n.ns.e("empty-text"))},[Qe(n.$slots,"empty",{},()=>[Hn(Tt(n.t("el.cascader.noData")),1)])],2)):(u=n.panel)!=null&&u.isHoverMenu?(W(),ve(Kt,{key:2},[et(" eslint-disable-next-line vue/html-self-closing "),(W(),ve("svg",{ref:"hoverZone",class:j(n.ns.e("hover-zone"))},null,2))],2112)):et("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var TAe=It(CAe,[["render",MAe],["__file","menu.vue"]]);const gk=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),ku=n=>lA(n);let EAe=0;const IAe=n=>{const e=[n];let{parent:t}=n;for(;t;)e.unshift(t),t=t.parent;return e};let LD=class kD{constructor(e,t,i,r=!1){this.data=e,this.config=t,this.parent=i,this.root=r,this.uid=EAe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:a,children:o}=t,l=e[o],c=IAe(this);this.level=r?0:i?i.level+1:1,this.value=e[s],this.label=e[a],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new kD(u,t,this)),this.loaded=!t.lazy||this.isLeaf||!vl(l)}get isDisabled(){const{data:e,parent:t,config:i}=this,{disabled:r,checkStrictly:s}=i;return(Xt(r)?r(e,this):!!e[r])||!s&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:i,loaded:r}=this,{lazy:s,leaf:a}=t,o=Xt(a)?a(e,this):e[a];return bi(o)?s&&!r?!1:!(Mt(i)&&i.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:i}=this,r=new kD(e,this.config,this);return Mt(t)?t.push(e):this.childrenData=[e],i.push(r),r}calcText(e,t){const i=e?this.pathLabels.join(t):this.label;return this.text=i,i}broadcast(e,...t){const i=`onParent${ku(e)}`;this.children.forEach(r=>{r&&(r.broadcast(e,...t),r[i]&&r[i](...t))})}emit(e,...t){const{parent:i}=this,r=`onChild${ku(e)}`;i&&(i[r]&&i[r](...t),i.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(r=>!r.isDisabled),i=t.length?t.every(r=>r.checked):!1;this.setCheckState(i)}setCheckState(e){const t=this.children.length,i=this.children.reduce((r,s)=>{const a=s.checked?1:s.indeterminate?.5:0;return r+a},0);this.checked=this.loaded&&this.children.filter(r=>!r.isDisabled).every(r=>r.loaded&&r.checked)&&e,this.indeterminate=this.loaded&&i!==t&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:i}=this.config;t||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const FD=(n,e)=>n.reduce((t,i)=>(i.isLeaf?t.push(i):(!e&&t.push(i),t=t.concat(FD(i.children,e))),t),[]);class vU{constructor(e,t){this.config=t;const i=(e||[]).map(r=>new LD(r,this.config));this.nodes=i,this.allNodes=FD(i,!1),this.leafNodes=FD(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const i=t?t.appendChild(e):new LD(e,this.config);t||this.nodes.push(i),this.appendAllNodesAndLeafNodes(i)}appendNodes(e,t){e.forEach(i=>this.appendNode(i,t))}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(t=>{this.appendAllNodesAndLeafNodes(t)})}getNodeByValue(e,t=!1){return!e&&e!==0?null:this.getFlattedNodes(t).find(r=>ha(r.value,e)||ha(r.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:r})=>ha(e.value,i)&&e.level===r)||null}}const SZ=Et({modelValue:{type:Ke([Number,String,Array])},options:{type:Ke(Array),default:()=>[]},props:{type:Ke(Object),default:()=>({})}}),DAe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Pi,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},RAe=n=>V(()=>({...DAe,...n.props})),gU=n=>{if(!n)return 0;const e=n.id.split("-");return Number(e[e.length-2])},PAe=n=>{if(!n)return;const e=n.querySelector("input");e?e.click():DQ(n)&&n.click()},LAe=(n,e)=>{const t=e.slice(0),i=t.map(s=>s.uid),r=n.reduce((s,a)=>{const o=i.indexOf(a.uid);return o>-1&&(s.push(a),t.splice(o,1),i.splice(o,1)),s},[]);return r.push(...t),r},yU=n=>[...new Set(n)],mo=n=>!n&&n!==0?[]:Mt(n)?n:[n],kAe=Ie({name:"ElCascaderPanel",components:{ElCascaderMenu:TAe},props:{...SZ,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Tn,zi,"close","expand-change"],setup(n,{emit:e,slots:t}){let i=!1;const r=St("cascader"),s=RAe(n);let a=null;const o=ae(!0),l=ae([]),c=ae(null),u=ae([]),d=ae(null),f=ae([]),h=V(()=>s.value.expandTrigger==="hover"),p=V(()=>n.renderLabel||t.default),m=()=>{const{options:I}=n,L=s.value;i=!1,a=new vU(I,L),u.value=[a.getNodes()],L.lazy&&vl(n.options)?(o.value=!1,v(void 0,F=>{F&&(a=new vU(F,L),u.value=[a.getNodes()]),o.value=!0,_(!1,!0)})):_(!1,!0)},v=(I,L)=>{const F=s.value;I=I||new LD({},F,void 0,!0),I.loading=!0;const B=P=>{const z=I,O=z.root?null:z;P&&(a==null||a.appendNodes(P,O)),z.loading=!1,z.loaded=!0,z.childrenData=z.childrenData||[],L&&L(P)};F.lazyLoad(I,B)},g=(I,L)=>{var F;const{level:B}=I,P=u.value.slice(0,B);let z;I.isLeaf?z=I.pathNodes[B-2]:(z=I,P.push(I.children)),((F=d.value)==null?void 0:F.uid)!==(z==null?void 0:z.uid)&&(d.value=I,u.value=P,!L&&e("expand-change",(I==null?void 0:I.pathValues)||[]))},y=(I,L,F=!0)=>{const{checkStrictly:B,multiple:P}=s.value,z=f.value[0];i=!0,!P&&(z==null||z.doCheck(!1)),I.doCheck(L),C(),F&&!P&&!B&&e("close"),!F&&!P&&!B&&x(I)},x=I=>{I&&(I=I.parent,x(I),I&&g(I))},b=I=>a==null?void 0:a.getFlattedNodes(I),A=I=>{var L;return(L=b(I))==null?void 0:L.filter(F=>F.checked!==!1)},S=()=>{f.value.forEach(I=>I.doCheck(!1)),C(),u.value=u.value.slice(0,1),d.value=null,e("expand-change",[])},C=()=>{var I;const{checkStrictly:L,multiple:F}=s.value,B=f.value,P=A(!L),z=LAe(B,P),O=z.map(N=>N.valueByOption);f.value=z,c.value=F?O:(I=O[0])!=null?I:null},_=(I=!1,L=!1)=>{const{modelValue:F}=n,{lazy:B,multiple:P,checkStrictly:z}=s.value,O=!z;if(!(!o.value||i||!L&&ha(F,c.value)))if(B&&!I){const H=yU(Eme(mo(F))).map(q=>a==null?void 0:a.getNodeByValue(q)).filter(q=>!!q&&!q.loaded&&!q.loading);H.length?H.forEach(q=>{v(q,()=>_(!1,L))}):_(!0,L)}else{const N=P?mo(F):[F],H=yU(N.map(q=>a==null?void 0:a.getNodeByValue(q,O)));M(H,L),c.value=hC(F)}},M=(I,L=!0)=>{const{checkStrictly:F}=s.value,B=f.value,P=I.filter(N=>!!N&&(F||N.isLeaf)),z=a==null?void 0:a.getSameNode(d.value),O=L&&z||P[0];O?O.pathNodes.forEach(N=>g(N,!0)):d.value=null,B.forEach(N=>N.doCheck(!1)),Si(P).forEach(N=>N.doCheck(!0)),f.value=P,Yt(T)},T=()=>{li&&l.value.forEach(I=>{const L=I==null?void 0:I.$el;if(L){const F=L.querySelector(`.${r.namespace.value}-scrollbar__wrap`),B=L.querySelector(`.${r.b("node")}.${r.is("active")}`)||L.querySelector(`.${r.b("node")}.in-active-path`);KL(F,B)}})},E=I=>{const L=I.target,{code:F}=I;switch(F){case kt.up:case kt.down:{I.preventDefault();const B=F===kt.up?-1:1;q3(RQ(L,B,`.${r.b("node")}[tabindex="-1"]`));break}case kt.left:{I.preventDefault();const B=l.value[gU(L)-1],P=B==null?void 0:B.$el.querySelector(`.${r.b("node")}[aria-expanded="true"]`);q3(P);break}case kt.right:{I.preventDefault();const B=l.value[gU(L)+1],P=B==null?void 0:B.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`);q3(P);break}case kt.enter:case kt.numpadEnter:PAe(L);break}};return Qn(vk,Si({config:s,expandingNode:d,checkedNodes:f,isHoverMenu:h,initialLoaded:o,renderLabelFn:p,lazyLoad:v,expandNode:g,handleCheckChange:y})),pt([s,()=>n.options],m,{deep:!0,immediate:!0}),pt(()=>n.modelValue,()=>{i=!1,_()},{deep:!0}),pt(()=>c.value,I=>{ha(I,n.modelValue)||(e(Tn,I),e(zi,I))}),Mj(()=>l.value=[]),Mn(()=>!vl(n.modelValue)&&_()),{ns:r,menuList:l,menus:u,checkedNodes:f,handleKeyDown:E,handleCheckChange:y,getFlattedNodes:b,getCheckedNodes:A,clearCheckedNodes:S,calculateCheckedValue:C,scrollToExpandingNode:T}}});function FAe(n,e,t,i,r,s){const a=an("el-cascader-menu");return W(),ve("div",{class:j([n.ns.b("panel"),n.ns.is("bordered",n.border)]),onKeydown:n.handleKeyDown},[(W(!0),ve(Kt,null,Jn(n.menus,(o,l)=>(W(),rt(a,{key:l,ref_for:!0,ref:c=>n.menuList[l]=c,index:l,nodes:[...o]},{empty:Re(()=>[Qe(n.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var BAe=It(kAe,[["render",FAe],["__file","index.vue"]]);const _Z=xn(BAe),hf=Et({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:rd},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),NAe={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},OAe=Ie({name:"ElTag"}),UAe=Ie({...OAe,props:hf,emits:NAe,setup(n,{emit:e}){const t=n,i=gs(),r=St("tag"),s=V(()=>{const{type:c,hit:u,effect:d,closable:f,round:h}=t;return[r.b(),r.is("closable",f),r.m(c||"primary"),r.m(i.value),r.m(d),r.is("hit",u),r.is("round",h)]}),a=c=>{e("close",c)},o=c=>{e("click",c)},l=c=>{var u,d,f;(f=(d=(u=c==null?void 0:c.component)==null?void 0:u.subTree)==null?void 0:d.component)!=null&&f.bum&&(c.component.subTree.component.bum=null)};return(c,u)=>c.disableTransitions?(W(),ve("span",{key:0,class:j(w(s)),style:jt({backgroundColor:c.color}),onClick:o},[be("span",{class:j(w(r).e("content"))},[Qe(c.$slots,"default")],2),c.closable?(W(),rt(w(Ut),{key:0,class:j(w(r).e("close")),onClick:ln(a,["stop"])},{default:Re(()=>[_e(w(nu))]),_:1},8,["class","onClick"])):et("v-if",!0)],6)):(W(),rt(na,{key:1,name:`${w(r).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:Re(()=>[be("span",{class:j(w(s)),style:jt({backgroundColor:c.color}),onClick:o},[be("span",{class:j(w(r).e("content"))},[Qe(c.$slots,"default")],2),c.closable?(W(),rt(w(Ut),{key:0,class:j(w(r).e("close")),onClick:ln(a,["stop"])},{default:Re(()=>[_e(w(nu))]),_:1},8,["class","onClick"])):et("v-if",!0)],6)]),_:3},8,["name"]))}});var zAe=It(UAe,[["__file","tag.vue"]]);const x1=xn(zAe),VAe=Et({...SZ,size:ws,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Ke(Function),default:(n,e)=>n.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Ke(Function),default:()=>!0},placement:{type:Ke(String),values:Df,default:"bottom-start"},fallbackPlacements:{type:Ke(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Ks.teleported,tagType:{...hf.type,default:"info"},tagEffect:{...hf.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...sy}),HAe={[Tn]:n=>!0,[zi]:n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,visibleChange:n=>ji(n),expandChange:n=>!!n,removeTag:n=>!!n},vh=new Map;if(li){let n;document.addEventListener("mousedown",e=>n=e),document.addEventListener("mouseup",e=>{if(n){for(const t of vh.values())for(const{documentHandler:i}of t)i(e,n);n=void 0}})}function bU(n,e){let t=[];return Mt(e.arg)?t=e.arg:bo(e.arg)&&t.push(e.arg),function(i,r){const s=e.instance.popperRef,a=i.target,o=r==null?void 0:r.target,l=!e||!e.instance,c=!a||!o,u=n.contains(a)||n.contains(o),d=n===a,f=t.length&&t.some(p=>p==null?void 0:p.contains(a))||t.length&&t.includes(o),h=s&&(s.contains(a)||s.contains(o));l||c||u||d||f||h||e.value(i,r)}}const pf={beforeMount(n,e){vh.has(n)||vh.set(n,[]),vh.get(n).push({documentHandler:bU(n,e),bindingFn:e.value})},updated(n,e){vh.has(n)||vh.set(n,[]);const t=vh.get(n),i=t.findIndex(s=>s.bindingFn===e.oldValue),r={documentHandler:bU(n,e),bindingFn:e.value};i>=0?t.splice(i,1,r):t.push(r)},unmounted(n){vh.delete(n)}},GAe="ElCascader",WAe=Ie({name:GAe}),qAe=Ie({...WAe,props:VAe,emits:HAe,setup(n,{expose:e,emit:t}){const i=n,r={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:fe})=>{const{modifiersData:Me,placement:me}=fe;["right","left","bottom","top"].includes(me)||(Me.arrow.x=35)},requires:["arrow"]}]},s=Cf();let a=0,o=0;const l=St("cascader"),c=St("input"),{t:u}=ci(),{form:d,formItem:f}=La(),{valueOnClear:h}=hM(i),{isComposing:p,handleComposition:m}=bA({afterComposition(fe){var Me;const me=(Me=fe.target)==null?void 0:Me.value;$(me)}}),v=ae(null),g=ae(null),y=ae(null),x=ae(null),b=ae(null),A=ae(!1),S=ae(!1),C=ae(!1),_=ae(!1),M=ae(""),T=ae(""),E=ae([]),I=ae([]),L=ae([]),F=V(()=>s.style),B=V(()=>i.disabled||(d==null?void 0:d.disabled)),P=V(()=>i.placeholder||u("el.cascader.placeholder")),z=V(()=>T.value||E.value.length>0||p.value?"":P.value),O=gs(),N=V(()=>O.value==="small"?"small":"default"),H=V(()=>!!i.props.multiple),q=V(()=>!i.filterable||H.value),te=V(()=>H.value?T.value:M.value),Q=V(()=>{var fe;return((fe=x.value)==null?void 0:fe.checkedNodes)||[]}),ee=V(()=>!i.clearable||B.value||C.value||!S.value?!1:!!Q.value.length),de=V(()=>{const{showAllLevels:fe,separator:Me}=i,me=Q.value;return me.length?H.value?"":me[0].calcText(fe,Me):""}),J=V(()=>(f==null?void 0:f.validateState)||""),ue=V({get(){return hC(i.modelValue)},set(fe){const Me=fe??h.value;t(Tn,Me),t(zi,Me),i.validateEvent&&(f==null||f.validate("change").catch(me=>void 0))}}),Te=V(()=>[l.b(),l.m(O.value),l.is("disabled",B.value),s.class]),De=V(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",A.value)]),Le=V(()=>l.is("focus",A.value||_.value)),Ne=V(()=>{var fe,Me;return(Me=(fe=v.value)==null?void 0:fe.popperRef)==null?void 0:Me.contentRef}),Y=fe=>{var Me,me,Ae;B.value||(fe=fe??!A.value,fe!==A.value&&(A.value=fe,(me=(Me=g.value)==null?void 0:Me.input)==null||me.setAttribute("aria-expanded",`${fe}`),fe?(oe(),Yt((Ae=x.value)==null?void 0:Ae.scrollToExpandingNode)):i.filterable&&Oe(),t("visibleChange",fe)))},oe=()=>{Yt(()=>{var fe;(fe=v.value)==null||fe.updatePopper()})},ne=()=>{C.value=!1},Xe=fe=>{const{showAllLevels:Me,separator:me}=i;return{node:fe,key:fe.uid,text:fe.calcText(Me,me),hitState:!1,closable:!B.value&&!fe.isDisabled,isCollapseTag:!1}},ke=fe=>{var Me;const me=fe.node;me.doCheck(!1),(Me=x.value)==null||Me.calculateCheckedValue(),t("removeTag",me.valueByOption)},Ge=()=>{if(!H.value)return;const fe=Q.value,Me=[],me=[];if(fe.forEach(Ae=>me.push(Xe(Ae))),I.value=me,fe.length){fe.slice(0,i.maxCollapseTags).forEach(we=>Me.push(Xe(we)));const Ae=fe.slice(i.maxCollapseTags),dt=Ae.length;dt&&(i.collapseTags?Me.push({key:-1,text:`+ ${dt}`,closable:!1,isCollapseTag:!0}):Ae.forEach(we=>Me.push(Xe(we))))}E.value=Me},He=()=>{var fe,Me;const{filterMethod:me,showAllLevels:Ae,separator:dt}=i,we=(Me=(fe=x.value)==null?void 0:fe.getFlattedNodes(!i.props.checkStrictly))==null?void 0:Me.filter(_t=>_t.isDisabled?!1:(_t.calcText(Ae,dt),me(_t,te.value)));H.value&&(E.value.forEach(_t=>{_t.hitState=!1}),I.value.forEach(_t=>{_t.hitState=!1})),C.value=!0,L.value=we,oe()},qe=()=>{var fe;let Me;C.value&&b.value?Me=b.value.$el.querySelector(`.${l.e("suggestion-item")}`):Me=(fe=x.value)==null?void 0:fe.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),Me&&(Me.focus(),!C.value&&Me.click())},tt=()=>{var fe,Me;const me=(fe=g.value)==null?void 0:fe.input,Ae=y.value,dt=(Me=b.value)==null?void 0:Me.$el;if(!(!li||!me)){if(dt){const we=dt.querySelector(`.${l.e("suggestion-list")}`);we.style.minWidth=`${me.offsetWidth}px`}if(Ae){const{offsetHeight:we}=Ae,_t=E.value.length>0?`${Math.max(we,a)-2}px`:`${a}px`;me.style.height=_t,oe()}}},pe=fe=>{var Me;return(Me=x.value)==null?void 0:Me.getCheckedNodes(fe)},G=fe=>{oe(),t("expandChange",fe)},Z=fe=>{if(!p.value)switch(fe.code){case kt.enter:case kt.numpadEnter:Y();break;case kt.down:Y(!0),Yt(qe),fe.preventDefault();break;case kt.esc:A.value===!0&&(fe.preventDefault(),fe.stopPropagation(),Y(!1));break;case kt.tab:Y(!1);break}},ge=()=>{var fe;(fe=x.value)==null||fe.clearCheckedNodes(),!A.value&&i.filterable&&Oe(),Y(!1),t("clear")},Oe=()=>{const{value:fe}=de;M.value=fe,T.value=fe},je=fe=>{var Me,me;const{checked:Ae}=fe;H.value?(Me=x.value)==null||Me.handleCheckChange(fe,!Ae,!1):(!Ae&&((me=x.value)==null||me.handleCheckChange(fe,!0,!1)),Y(!1))},bt=fe=>{const Me=fe.target,{code:me}=fe;switch(me){case kt.up:case kt.down:{fe.preventDefault();const Ae=me===kt.up?-1:1;q3(RQ(Me,Ae,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case kt.enter:case kt.numpadEnter:Me.click();break}},At=()=>{const fe=E.value,Me=fe[fe.length-1];o=T.value?0:o+1,!(!Me||!o||i.collapseTags&&fe.length>1)&&(Me.hitState?ke(Me):Me.hitState=!0)},Ee=fe=>{const Me=fe.target,me=l.e("search-input");Me.className===me&&(_.value=!0),t("focus",fe)},gt=fe=>{_.value=!1,t("blur",fe)},lt=Jo(()=>{const{value:fe}=te;if(!fe)return;const Me=i.beforeFilter(fe);Kb(Me)?Me.then(He).catch(()=>{}):Me!==!1?He():ne()},i.debounce),$=(fe,Me)=>{!A.value&&Y(!0),!(Me!=null&&Me.isComposing)&&(fe?lt():ne())},le=fe=>Number.parseFloat(cve(c.cssVarName("input-height"),fe).value)-2;return pt(C,oe),pt([Q,B,()=>i.collapseTags],Ge),pt(E,()=>{Yt(()=>tt())}),pt(O,async()=>{await Yt();const fe=g.value.input;a=le(fe)||a,tt()}),pt(de,Oe,{immediate:!0}),Mn(()=>{const fe=g.value.input,Me=le(fe);a=fe.offsetHeight||Me,Fr(fe,tt)}),e({getCheckedNodes:pe,cascaderPanelRef:x,togglePopperVisible:Y,contentRef:Ne,presentText:de}),(fe,Me)=>(W(),rt(w(Da),{ref_key:"tooltipRef",ref:v,visible:A.value,teleported:fe.teleported,"popper-class":[w(l).e("dropdown"),fe.popperClass],"popper-options":r,"fallback-placements":fe.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:fe.placement,transition:`${w(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:fe.persistent,onHide:ne},{default:Re(()=>[Cn((W(),ve("div",{class:j(w(Te)),style:jt(w(F)),onClick:()=>Y(w(q)?void 0:!0),onKeydown:Z,onMouseenter:me=>S.value=!0,onMouseleave:me=>S.value=!1},[_e(w(Qa),{ref_key:"input",ref:g,modelValue:M.value,"onUpdate:modelValue":me=>M.value=me,placeholder:w(z),readonly:w(q),disabled:w(B),"validate-event":!1,size:w(O),class:j(w(Le)),tabindex:w(H)&&fe.filterable&&!w(B)?-1:void 0,onCompositionstart:w(m),onCompositionupdate:w(m),onCompositionend:w(m),onFocus:Ee,onBlur:gt,onInput:$},Il({suffix:Re(()=>[w(ee)?(W(),rt(w(Ut),{key:"clear",class:j([w(c).e("icon"),"icon-circle-close"]),onClick:ln(ge,["stop"])},{default:Re(()=>[_e(w(If))]),_:1},8,["class","onClick"])):(W(),rt(w(Ut),{key:"arrow-down",class:j(w(De)),onClick:ln(me=>Y(),["stop"])},{default:Re(()=>[_e(w(Ef))]),_:1},8,["class","onClick"]))]),_:2},[fe.$slots.prefix?{name:"prefix",fn:Re(()=>[Qe(fe.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),w(H)?(W(),ve("div",{key:0,ref_key:"tagWrapper",ref:y,class:j([w(l).e("tags"),w(l).is("validate",!!w(J))])},[(W(!0),ve(Kt,null,Jn(E.value,me=>(W(),rt(w(x1),{key:me.key,type:fe.tagType,size:w(N),effect:fe.tagEffect,hit:me.hitState,closable:me.closable,"disable-transitions":"",onClose:Ae=>ke(me)},{default:Re(()=>[me.isCollapseTag===!1?(W(),ve("span",{key:0},Tt(me.text),1)):(W(),rt(w(Da),{key:1,disabled:A.value||!fe.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:Re(()=>[be("span",null,Tt(me.text),1)]),content:Re(()=>[be("div",{class:j(w(l).e("collapse-tags"))},[(W(!0),ve(Kt,null,Jn(I.value.slice(fe.maxCollapseTags),(Ae,dt)=>(W(),ve("div",{key:dt,class:j(w(l).e("collapse-tag"))},[(W(),rt(w(x1),{key:Ae.key,class:"in-tooltip",type:fe.tagType,size:w(N),effect:fe.tagEffect,hit:Ae.hitState,closable:Ae.closable,"disable-transitions":"",onClose:we=>ke(Ae)},{default:Re(()=>[be("span",null,Tt(Ae.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),fe.filterable&&!w(B)?Cn((W(),ve("input",{key:0,"onUpdate:modelValue":me=>T.value=me,type:"text",class:j(w(l).e("search-input")),placeholder:w(de)?"":w(P),onInput:me=>$(T.value,me),onClick:ln(me=>Y(!0),["stop"]),onKeydown:Xi(At,["delete"]),onCompositionstart:w(m),onCompositionupdate:w(m),onCompositionend:w(m),onFocus:Ee,onBlur:gt},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[rM,T.value]]):et("v-if",!0)],2)):et("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[w(pf),()=>Y(!1),w(Ne)]])]),content:Re(()=>[Cn(_e(w(_Z),{ref_key:"cascaderPanelRef",ref:x,modelValue:w(ue),"onUpdate:modelValue":me=>ir(ue)?ue.value=me:null,options:fe.options,props:i.props,border:!1,"render-label":fe.$slots.default,onExpandChange:G,onClose:me=>fe.$nextTick(()=>Y(!1))},{empty:Re(()=>[Qe(fe.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[yi,!C.value]]),fe.filterable?Cn((W(),rt(w(sd),{key:0,ref_key:"suggestionPanel",ref:b,tag:"ul",class:j(w(l).e("suggestion-panel")),"view-class":w(l).e("suggestion-list"),onKeydown:bt},{default:Re(()=>[L.value.length?(W(!0),ve(Kt,{key:0},Jn(L.value,me=>(W(),ve("li",{key:me.uid,class:j([w(l).e("suggestion-item"),w(l).is("checked",me.checked)]),tabindex:-1,onClick:Ae=>je(me)},[Qe(fe.$slots,"suggestion-item",{item:me},()=>[be("span",null,Tt(me.text),1),me.checked?(W(),rt(w(Ut),{key:0},{default:Re(()=>[_e(w(gA))]),_:1})):et("v-if",!0)])],10,["onClick"]))),128)):Qe(fe.$slots,"empty",{key:1},()=>[be("li",{class:j(w(l).e("empty-text"))},Tt(w(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[yi,C.value]]):et("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var KAe=It(qAe,[["__file","cascader.vue"]]);const YAe=xn(KAe),XAe=Et({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),jAe={"update:checked":n=>ji(n),[zi]:n=>ji(n)},$Ae=Ie({name:"ElCheckTag"}),QAe=Ie({...$Ae,props:XAe,emits:jAe,setup(n,{emit:e}){const t=n,i=St("check-tag"),r=V(()=>t.disabled),s=V(()=>[i.b(),i.is("checked",t.checked),i.is("disabled",r.value),i.m(t.type||"primary")]),a=()=>{if(r.value)return;const o=!t.checked;e(zi,o),e("update:checked",o)};return(o,l)=>(W(),ve("span",{class:j(w(s)),onClick:a},[Qe(o.$slots,"default")],2))}});var ZAe=It(QAe,[["__file","check-tag.vue"]]);const JAe=xn(ZAe),ewe=Et({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Ke([Number,Object]),default:()=>Br({})},sm:{type:Ke([Number,Object]),default:()=>Br({})},md:{type:Ke([Number,Object]),default:()=>Br({})},lg:{type:Ke([Number,Object]),default:()=>Br({})},xl:{type:Ke([Number,Object]),default:()=>Br({})}}),CZ=Symbol("rowContextKey"),twe=Ie({name:"ElCol"}),nwe=Ie({...twe,props:ewe,setup(n){const e=n,{gutter:t}=Nt(CZ,{gutter:V(()=>0)}),i=St("col"),r=V(()=>{const a={};return t.value&&(a.paddingLeft=a.paddingRight=`${t.value/2}px`),a}),s=V(()=>{const a=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];Jt(u)&&(c==="span"?a.push(i.b(`${e[c]}`)):u>0&&a.push(i.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{Jt(e[c])?a.push(i.b(`${c}-${e[c]}`)):Rn(e[c])&&Object.entries(e[c]).forEach(([u,d])=>{a.push(u!=="span"?i.b(`${c}-${u}-${d}`):i.b(`${c}-${d}`))})}),t.value&&a.push(i.is("guttered")),[i.b(),a]});return(a,o)=>(W(),rt(On(a.tag),{class:j(w(s)),style:jt(w(r))},{default:Re(()=>[Qe(a.$slots,"default")]),_:3},8,["class","style"]))}});var iwe=It(nwe,[["__file","col.vue"]]);const rwe=xn(iwe),xU=n=>Jt(n)||qt(n)||Mt(n),swe=Et({accordion:Boolean,modelValue:{type:Ke([Array,String,Number]),default:()=>Br([])}}),awe={[Tn]:xU,[zi]:xU},MZ=Symbol("collapseContextKey"),owe=(n,e)=>{const t=ae(Xa(n.modelValue)),i=s=>{t.value=s;const a=n.accordion?t.value[0]:t.value;e(Tn,a),e(zi,a)},r=s=>{if(n.accordion)i([t.value[0]===s?"":s]);else{const a=[...t.value],o=a.indexOf(s);o>-1?a.splice(o,1):a.push(s),i(a)}};return pt(()=>n.modelValue,()=>t.value=Xa(n.modelValue),{deep:!0}),Qn(MZ,{activeNames:t,handleItemClick:r}),{activeNames:t,setActiveNames:i}},lwe=()=>{const n=St("collapse");return{rootKls:V(()=>n.b())}},cwe=Ie({name:"ElCollapse"}),uwe=Ie({...cwe,props:swe,emits:awe,setup(n,{expose:e,emit:t}){const i=n,{activeNames:r,setActiveNames:s}=owe(i,t),{rootKls:a}=lwe();return e({activeNames:r,setActiveNames:s}),(o,l)=>(W(),ve("div",{class:j(w(a))},[Qe(o.$slots,"default")],2))}});var dwe=It(uwe,[["__file","collapse.vue"]]);const fwe=Ie({name:"ElCollapseTransition"}),hwe=Ie({...fwe,setup(n){const e=St("collapse-transition"),t=r=>{r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom},i={beforeEnter(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.style.height&&(r.dataset.elExistsHeight=r.style.height),r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0},enter(r){requestAnimationFrame(()=>{r.dataset.oldOverflow=r.style.overflow,r.dataset.elExistsHeight?r.style.maxHeight=r.dataset.elExistsHeight:r.scrollHeight!==0?r.style.maxHeight=`${r.scrollHeight}px`:r.style.maxHeight=0,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom,r.style.overflow="hidden"})},afterEnter(r){r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow},enterCancelled(r){t(r)},beforeLeave(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.dataset.oldOverflow=r.style.overflow,r.style.maxHeight=`${r.scrollHeight}px`,r.style.overflow="hidden"},leave(r){r.scrollHeight!==0&&(r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0)},afterLeave(r){t(r)},leaveCancelled(r){t(r)}};return(r,s)=>(W(),rt(na,Kn({name:w(e).b()},Jce(i)),{default:Re(()=>[Qe(r.$slots,"default")]),_:3},16,["name"]))}});var pwe=It(hwe,[["__file","collapse-transition.vue"]]);const wM=xn(pwe),mwe=Et({title:{type:String,default:""},name:{type:Ke([String,Number]),default:void 0},icon:{type:Hi,default:xo},disabled:Boolean}),vwe=n=>{const e=Nt(MZ),{namespace:t}=St("collapse"),i=ae(!1),r=ae(!1),s=tk(),a=V(()=>s.current++),o=V(()=>{var f;return(f=n.name)!=null?f:`${t.value}-id-${s.prefix}-${w(a)}`}),l=V(()=>e==null?void 0:e.activeNames.value.includes(w(o)));return{focusing:i,id:a,isActive:l,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:i.value=!0},50)},handleHeaderClick:()=>{n.disabled||(e==null||e.handleItemClick(w(o)),i.value=!1,r.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(w(o))}}},gwe=(n,{focusing:e,isActive:t,id:i})=>{const r=St("collapse"),s=V(()=>[r.b("item"),r.is("active",w(t)),r.is("disabled",n.disabled)]),a=V(()=>[r.be("item","header"),r.is("active",w(t)),{focusing:w(e)&&!n.disabled}]),o=V(()=>[r.be("item","arrow"),r.is("active",w(t))]),l=V(()=>r.be("item","wrap")),c=V(()=>r.be("item","content")),u=V(()=>r.b(`content-${w(i)}`)),d=V(()=>r.b(`head-${w(i)}`));return{arrowKls:o,headKls:a,rootKls:s,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:d}},ywe=Ie({name:"ElCollapseItem"}),bwe=Ie({...ywe,props:mwe,setup(n,{expose:e}){const t=n,{focusing:i,id:r,isActive:s,handleFocus:a,handleHeaderClick:o,handleEnterClick:l}=vwe(t),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:f,itemContentKls:h,scopedContentId:p,scopedHeadId:m}=gwe(t,{focusing:i,isActive:s,id:r});return e({isActive:s}),(v,g)=>(W(),ve("div",{class:j(w(d))},[be("button",{id:w(m),class:j(w(u)),"aria-expanded":w(s),"aria-controls":w(p),"aria-describedby":w(p),tabindex:v.disabled?-1:0,type:"button",onClick:w(o),onKeydown:Xi(ln(w(l),["stop","prevent"]),["space","enter"]),onFocus:w(a),onBlur:y=>i.value=!1},[Qe(v.$slots,"title",{},()=>[Hn(Tt(v.title),1)]),Qe(v.$slots,"icon",{isActive:w(s)},()=>[_e(w(Ut),{class:j(w(c))},{default:Re(()=>[(W(),rt(On(v.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),_e(w(wM),null,{default:Re(()=>[Cn(be("div",{id:w(p),role:"region",class:j(w(f)),"aria-hidden":!w(s),"aria-labelledby":w(m)},[be("div",{class:j(w(h))},[Qe(v.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[yi,w(s)]])]),_:3})],2))}});var TZ=It(bwe,[["__file","collapse-item.vue"]]);const xwe=xn(dwe,{CollapseItem:TZ}),Awe=Or(TZ),wwe=Et({color:{type:Ke(Object),required:!0},vertical:{type:Boolean,default:!1}});let I5=!1;function cx(n,e){if(!li)return;const t=function(s){var a;(a=e.drag)==null||a.call(e,s)},i=function(s){var a;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,I5=!1,(a=e.end)==null||a.call(e,s)},r=function(s){var a;I5||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("touchmove",t),document.addEventListener("touchend",i),I5=!0,(a=e.start)==null||a.call(e,s))};n.addEventListener("mousedown",r),n.addEventListener("touchstart",r,{passive:!1})}const Swe=(n,e)=>{if(!li||!n||!e)return!1;const t=n.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<i.bottom&&t.bottom>i.top&&t.right>i.left&&t.left<i.right},AU=n=>{let e=0,t=n;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},BD=(n,e)=>Math.abs(AU(n)-AU(e)),yk=n=>{let e,t;return n.type==="touchend"?(t=n.changedTouches[0].clientY,e=n.changedTouches[0].clientX):n.type.startsWith("touch")?(t=n.touches[0].clientY,e=n.touches[0].clientX):(t=n.clientY,e=n.clientX),{clientX:e,clientY:t}},_we=n=>{const e=Nn(),{t}=ci(),i=Ui(),r=Ui(),s=V(()=>n.color.get("alpha")),a=V(()=>t("el.colorpicker.alphaLabel"));function o(d){var f;d.target!==i.value&&l(d),(f=i.value)==null||f.focus()}function l(d){if(!r.value||!i.value)return;const h=e.vnode.el.getBoundingClientRect(),{clientX:p,clientY:m}=yk(d);if(n.vertical){let v=m-h.top;v=Math.max(i.value.offsetHeight/2,v),v=Math.min(v,h.height-i.value.offsetHeight/2),n.color.set("alpha",Math.round((v-i.value.offsetHeight/2)/(h.height-i.value.offsetHeight)*100))}else{let v=p-h.left;v=Math.max(i.value.offsetWidth/2,v),v=Math.min(v,h.width-i.value.offsetWidth/2),n.color.set("alpha",Math.round((v-i.value.offsetWidth/2)/(h.width-i.value.offsetWidth)*100))}}function c(d){const{code:f,shiftKey:h}=d,p=h?10:1;switch(f){case kt.left:case kt.down:d.preventDefault(),d.stopPropagation(),u(-p);break;case kt.right:case kt.up:d.preventDefault(),d.stopPropagation(),u(p);break}}function u(d){let f=s.value+d;f=f<0?0:f>100?100:f,n.color.set("alpha",f)}return{thumb:i,bar:r,alpha:s,alphaLabel:a,handleDrag:l,handleClick:o,handleKeydown:c}},Cwe=(n,{bar:e,thumb:t,handleDrag:i})=>{const r=Nn(),s=St("color-alpha-slider"),a=ae(0),o=ae(0),l=ae();function c(){if(!t.value||n.vertical)return 0;const y=r.vnode.el,x=n.color.get("alpha");return y?Math.round(x*(y.offsetWidth-t.value.offsetWidth/2)/100):0}function u(){if(!t.value)return 0;const y=r.vnode.el;if(!n.vertical)return 0;const x=n.color.get("alpha");return y?Math.round(x*(y.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(n.color&&n.color.value){const{r:y,g:x,b}=n.color.toRgb();return`linear-gradient(to right, rgba(${y}, ${x}, ${b}, 0) 0%, rgba(${y}, ${x}, ${b}, 1) 100%)`}return""}function f(){a.value=c(),o.value=u(),l.value=d()}Mn(()=>{if(!e.value||!t.value)return;const y={drag:x=>{i(x)},end:x=>{i(x)}};cx(e.value,y),cx(t.value,y),f()}),pt(()=>n.color.get("alpha"),()=>f()),pt(()=>n.color.value,()=>f());const h=V(()=>[s.b(),s.is("vertical",n.vertical)]),p=V(()=>s.e("bar")),m=V(()=>s.e("thumb")),v=V(()=>({background:l.value})),g=V(()=>({left:Hr(a.value),top:Hr(o.value)}));return{rootKls:h,barKls:p,barStyle:v,thumbKls:m,thumbStyle:g,update:f}},Mwe="ElColorAlphaSlider",Twe=Ie({name:Mwe}),Ewe=Ie({...Twe,props:wwe,setup(n,{expose:e}){const t=n,{alpha:i,alphaLabel:r,bar:s,thumb:a,handleDrag:o,handleClick:l,handleKeydown:c}=_we(t),{rootKls:u,barKls:d,barStyle:f,thumbKls:h,thumbStyle:p,update:m}=Cwe(t,{bar:s,thumb:a,handleDrag:o});return e({update:m,bar:s,thumb:a}),(v,g)=>(W(),ve("div",{class:j(w(u))},[be("div",{ref_key:"bar",ref:s,class:j(w(d)),style:jt(w(f)),onClick:w(l)},null,14,["onClick"]),be("div",{ref_key:"thumb",ref:a,class:j(w(h)),style:jt(w(p)),"aria-label":w(r),"aria-valuenow":w(i),"aria-orientation":v.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:w(c)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var Iwe=It(Ewe,[["__file","alpha-slider.vue"]]);const Dwe=Ie({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(n){const e=St("color-hue-slider"),t=Nn(),i=ae(),r=ae(),s=ae(0),a=ae(0),o=V(()=>n.color.get("hue"));pt(()=>o.value,()=>{f()});function l(h){h.target!==i.value&&c(h)}function c(h){if(!r.value||!i.value)return;const m=t.vnode.el.getBoundingClientRect(),{clientX:v,clientY:g}=yk(h);let y;if(n.vertical){let x=g-m.top;x=Math.min(x,m.height-i.value.offsetHeight/2),x=Math.max(i.value.offsetHeight/2,x),y=Math.round((x-i.value.offsetHeight/2)/(m.height-i.value.offsetHeight)*360)}else{let x=v-m.left;x=Math.min(x,m.width-i.value.offsetWidth/2),x=Math.max(i.value.offsetWidth/2,x),y=Math.round((x-i.value.offsetWidth/2)/(m.width-i.value.offsetWidth)*360)}n.color.set("hue",y)}function u(){if(!i.value)return 0;const h=t.vnode.el;if(n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const h=t.vnode.el;if(!n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetHeight-i.value.offsetHeight/2)/360):0}function f(){s.value=u(),a.value=d()}return Mn(()=>{if(!r.value||!i.value)return;const h={drag:p=>{c(p)},end:p=>{c(p)}};cx(r.value,h),cx(i.value,h),f()}),{bar:r,thumb:i,thumbLeft:s,thumbTop:a,hueValue:o,handleClick:l,update:f,ns:e}}});function Rwe(n,e,t,i,r,s){return W(),ve("div",{class:j([n.ns.b(),n.ns.is("vertical",n.vertical)])},[be("div",{ref:"bar",class:j(n.ns.e("bar")),onClick:n.handleClick},null,10,["onClick"]),be("div",{ref:"thumb",class:j(n.ns.e("thumb")),style:jt({left:n.thumbLeft+"px",top:n.thumbTop+"px"})},null,6)],2)}var Pwe=It(Dwe,[["render",Rwe],["__file","hue-slider.vue"]]);const Lwe=Et({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:ws,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Ks.teleported,predefine:{type:Ke(Array)},validateEvent:{type:Boolean,default:!0},...ga(["ariaLabel"])}),kwe={[Tn]:n=>qt(n)||Us(n),[zi]:n=>qt(n)||Us(n),activeChange:n=>qt(n)||Us(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},EZ=Symbol("colorPickerContextKey"),wU=function(n,e,t){return[n,e*t/((n=(2-e)*t)<1?n:2-n)||0,n/2]},Fwe=function(n){return qt(n)&&n.includes(".")&&Number.parseFloat(n)===1},Bwe=function(n){return qt(n)&&n.includes("%")},Wg=function(n,e){Fwe(n)&&(n="100%");const t=Bwe(n);return n=Math.min(e,Math.max(0,Number.parseFloat(`${n}`))),t&&(n=Number.parseInt(`${n*e}`,10)/100),Math.abs(n-e)<1e-6?1:n%e/Number.parseFloat(e)},SU={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},j3=n=>{n=Math.min(Math.round(n),255);const e=Math.floor(n/16),t=n%16;return`${SU[e]||e}${SU[t]||t}`},_U=function({r:n,g:e,b:t}){return Number.isNaN(+n)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${j3(n)}${j3(e)}${j3(t)}`},D5={A:10,B:11,C:12,D:13,E:14,F:15},Fp=function(n){return n.length===2?(D5[n[0].toUpperCase()]||+n[0])*16+(D5[n[1].toUpperCase()]||+n[1]):D5[n[1].toUpperCase()]||+n[1]},Nwe=function(n,e,t){e=e/100,t=t/100;let i=e;const r=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,i*=r<=1?r:2-r;const s=(t+e)/2,a=t===0?2*i/(r+i):2*e/(t+e);return{h:n,s:a*100,v:s*100}},CU=(n,e,t)=>{n=Wg(n,255),e=Wg(e,255),t=Wg(t,255);const i=Math.max(n,e,t),r=Math.min(n,e,t);let s;const a=i,o=i-r,l=i===0?0:o/i;if(i===r)s=0;else{switch(i){case n:{s=(e-t)/o+(e<t?6:0);break}case e:{s=(t-n)/o+2;break}case t:{s=(n-e)/o+4;break}}s/=6}return{h:s*360,s:l*100,v:a*100}},Yy=function(n,e,t){n=Wg(n,360)*6,e=Wg(e,100),t=Wg(t,100);const i=Math.floor(n),r=n-i,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=i%6,c=[t,a,s,s,o,t][l],u=[o,t,t,a,s,s][l],d=[s,s,o,t,t,a][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};let ub=class{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)vi(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(arguments.length===1&&typeof e=="object"){for(const i in e)vi(e,i)&&this.set(i,e[i]);return}this[`_${e}`]=t,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Yy(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const t=(i,r,s)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s,v:a}=Nwe(i[0],i[1],i[2]);t(r,s,a)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&t(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s,v:a}=CU(i[0],i[1],i[2]);t(r,s,a)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let r,s,a;i.length===3?(r=Fp(i[0]+i[0]),s=Fp(i[1]+i[1]),a=Fp(i[2]+i[2])):(i.length===6||i.length===8)&&(r=Fp(i.slice(0,2)),s=Fp(i.slice(2,4)),a=Fp(i.slice(4,6))),i.length===8?this._alpha=Fp(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:o,s:l,v:c}=CU(r,s,a);t(o,l,c)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:i,_alpha:r,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const a=wU(e,t/100,i/100);this.value=`hsla(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${_U(Yy(e,t,i))}${j3(r*255/100)}`;break}default:{const{r:a,g:o,b:l}=Yy(e,t,i);this.value=`rgba(${a}, ${o}, ${l}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const a=wU(e,t/100,i/100);this.value=`hsl(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r:a,g:o,b:l}=Yy(e,t,i);this.value=`rgb(${a}, ${o}, ${l})`;break}default:this.value=_U(Yy(e,t,i))}}};const Owe=Ie({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(n){const e=St("color-predefine"),{currentColor:t}=Nt(EZ),i=ae(s(n.colors,n.color));pt(()=>t.value,a=>{const o=new ub;o.fromString(a),i.value.forEach(l=>{l.selected=o.compare(l)})}),Js(()=>{i.value=s(n.colors,n.color)});function r(a){n.color.fromString(n.colors[a])}function s(a,o){return a.map(l=>{const c=new ub;return c.enableAlpha=n.enableAlpha,c.format="rgba",c.fromString(l),c.selected=c.value===o.value,c})}return{rgbaColors:i,handleSelect:r,ns:e}}});function Uwe(n,e,t,i,r,s){return W(),ve("div",{class:j(n.ns.b())},[be("div",{class:j(n.ns.e("colors"))},[(W(!0),ve(Kt,null,Jn(n.rgbaColors,(a,o)=>(W(),ve("div",{key:n.colors[o],class:j([n.ns.e("color-selector"),n.ns.is("alpha",a._alpha<100),{selected:a.selected}]),onClick:l=>n.handleSelect(o)},[be("div",{style:jt({backgroundColor:a.value})},null,4)],10,["onClick"]))),128))],2)],2)}var zwe=It(Owe,[["render",Uwe],["__file","predefine.vue"]]);const Vwe=Ie({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(n){const e=St("color-svpanel"),t=Nn(),i=ae(0),r=ae(0),s=ae("hsl(0, 100%, 50%)"),a=V(()=>{const c=n.color.get("hue"),u=n.color.get("value");return{hue:c,value:u}});function o(){const c=n.color.get("saturation"),u=n.color.get("value"),d=t.vnode.el,{clientWidth:f,clientHeight:h}=d;r.value=c*f/100,i.value=(100-u)*h/100,s.value=`hsl(${n.color.get("hue")}, 100%, 50%)`}function l(c){const d=t.vnode.el.getBoundingClientRect(),{clientX:f,clientY:h}=yk(c);let p=f-d.left,m=h-d.top;p=Math.max(0,p),p=Math.min(p,d.width),m=Math.max(0,m),m=Math.min(m,d.height),r.value=p,i.value=m,n.color.set({saturation:p/d.width*100,value:100-m/d.height*100})}return pt(()=>a.value,()=>{o()}),Mn(()=>{cx(t.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),o()}),{cursorTop:i,cursorLeft:r,background:s,colorValue:a,handleDrag:l,update:o,ns:e}}});function Hwe(n,e,t,i,r,s){return W(),ve("div",{class:j(n.ns.b()),style:jt({backgroundColor:n.background})},[be("div",{class:j(n.ns.e("white"))},null,2),be("div",{class:j(n.ns.e("black"))},null,2),be("div",{class:j(n.ns.e("cursor")),style:jt({top:n.cursorTop+"px",left:n.cursorLeft+"px"})},[be("div")],6)],6)}var Gwe=It(Vwe,[["render",Hwe],["__file","sv-panel.vue"]]);const Wwe=Ie({name:"ElColorPicker"}),qwe=Ie({...Wwe,props:Lwe,emits:kwe,setup(n,{expose:e,emit:t}){const i=n,{t:r}=ci(),s=St("color"),{formItem:a}=La(),o=gs(),l=ka(),{inputId:c,isLabeledByFormItem:u}=bc(i,{formItemContext:a}),d=ae(),f=ae(),h=ae(),p=ae(),m=ae(),v=ae(),{isFocused:g,handleFocus:y,handleBlur:x}=Sp(m,{beforeFocus(){return l.value},beforeBlur(De){var Le;return(Le=p.value)==null?void 0:Le.isFocusInsideContent(De)},afterBlur(){B(!1),N()}});let b=!0;const A=Si(new ub({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),S=ae(!1),C=ae(!1),_=ae(""),M=V(()=>!i.modelValue&&!C.value?"transparent":F(A,i.showAlpha)),T=V(()=>!i.modelValue&&!C.value?"":A.value),E=V(()=>u.value?void 0:i.ariaLabel||r("el.colorpicker.defaultLabel")),I=V(()=>u.value?a==null?void 0:a.labelId:void 0),L=V(()=>[s.b("picker"),s.is("disabled",l.value),s.bm("picker",o.value),s.is("focused",g.value)]);function F(De,Le){if(!(De instanceof ub))throw new TypeError("color should be instance of _color Class");const{r:Ne,g:Y,b:oe}=De.toRgb();return Le?`rgba(${Ne}, ${Y}, ${oe}, ${De.get("alpha")/100})`:`rgb(${Ne}, ${Y}, ${oe})`}function B(De){S.value=De}const P=Jo(B,100,{leading:!0});function z(){l.value||B(!0)}function O(){P(!1),N()}function N(){Yt(()=>{i.modelValue?A.fromString(i.modelValue):(A.value="",Yt(()=>{C.value=!1}))})}function H(){l.value||(S.value&&N(),P(!S.value))}function q(){A.fromString(_.value)}function te(){const De=A.value;t(Tn,De),t("change",De),i.validateEvent&&(a==null||a.validate("change").catch(Le=>void 0)),P(!1),Yt(()=>{const Le=new ub({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});A.compare(Le)||N()})}function Q(){P(!1),t(Tn,null),t("change",null),i.modelValue!==null&&i.validateEvent&&(a==null||a.validate("change").catch(De=>void 0)),N()}function ee(){S.value&&(O(),g.value&&ue())}function de(De){De.preventDefault(),De.stopPropagation(),B(!1),N()}function J(De){switch(De.code){case kt.enter:case kt.numpadEnter:case kt.space:De.preventDefault(),De.stopPropagation(),z(),v.value.focus();break;case kt.esc:de(De);break}}function ue(){m.value.focus()}function Te(){m.value.blur()}return Mn(()=>{i.modelValue&&(_.value=T.value)}),pt(()=>i.modelValue,De=>{De?De&&De!==A.value&&(b=!1,A.fromString(De)):C.value=!1}),pt(()=>[i.colorFormat,i.showAlpha],()=>{A.enableAlpha=i.showAlpha,A.format=i.colorFormat||A.format,A.doOnChange(),t(Tn,A.value)}),pt(()=>T.value,De=>{_.value=De,b&&t("activeChange",De),b=!0}),pt(()=>A.value,()=>{!i.modelValue&&!C.value&&(C.value=!0)}),pt(()=>S.value,()=>{Yt(()=>{var De,Le,Ne;(De=d.value)==null||De.update(),(Le=f.value)==null||Le.update(),(Ne=h.value)==null||Ne.update()})}),Qn(EZ,{currentColor:T}),e({color:A,show:z,hide:O,focus:ue,blur:Te}),(De,Le)=>(W(),rt(w(Da),{ref_key:"popper",ref:p,visible:S.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[w(s).be("picker","panel"),w(s).b("dropdown"),De.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:De.teleported,transition:`${w(s).namespace.value}-zoom-in-top`,persistent:"",onHide:Ne=>B(!1)},{content:Re(()=>[Cn((W(),ve("div",{onKeydown:Xi(de,["esc"])},[be("div",{class:j(w(s).be("dropdown","main-wrapper"))},[_e(Pwe,{ref_key:"hue",ref:d,class:"hue-slider",color:w(A),vertical:""},null,8,["color"]),_e(Gwe,{ref_key:"sv",ref:f,color:w(A)},null,8,["color"])],2),De.showAlpha?(W(),rt(Iwe,{key:0,ref_key:"alpha",ref:h,color:w(A)},null,8,["color"])):et("v-if",!0),De.predefine?(W(),rt(zwe,{key:1,ref:"predefine","enable-alpha":De.showAlpha,color:w(A),colors:De.predefine},null,8,["enable-alpha","color","colors"])):et("v-if",!0),be("div",{class:j(w(s).be("dropdown","btns"))},[be("span",{class:j(w(s).be("dropdown","value"))},[_e(w(Qa),{ref_key:"inputRef",ref:v,modelValue:_.value,"onUpdate:modelValue":Ne=>_.value=Ne,"validate-event":!1,size:"small",onKeyup:Xi(q,["enter"]),onBlur:q},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),_e(w(ea),{class:j(w(s).be("dropdown","link-btn")),text:"",size:"small",onClick:Q},{default:Re(()=>[Hn(Tt(w(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),_e(w(ea),{plain:"",size:"small",class:j(w(s).be("dropdown","btn")),onClick:te},{default:Re(()=>[Hn(Tt(w(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[w(pf),ee,m.value]])]),default:Re(()=>[be("div",Kn({id:w(c),ref_key:"triggerRef",ref:m},De.$attrs,{class:w(L),role:"button","aria-label":w(E),"aria-labelledby":w(I),"aria-description":w(r)("el.colorpicker.description",{color:De.modelValue||""}),"aria-disabled":w(l),tabindex:w(l)?-1:De.tabindex,onKeydown:J,onFocus:w(y),onBlur:w(x)}),[w(l)?(W(),ve("div",{key:0,class:j(w(s).be("picker","mask"))},null,2)):et("v-if",!0),be("div",{class:j(w(s).be("picker","trigger")),onClick:H},[be("span",{class:j([w(s).be("picker","color"),w(s).is("alpha",De.showAlpha)])},[be("span",{class:j(w(s).be("picker","color-inner")),style:jt({backgroundColor:w(M)})},[Cn(_e(w(Ut),{class:j([w(s).be("picker","icon"),w(s).is("icon-arrow-down")])},{default:Re(()=>[_e(w(Ef))]),_:1},8,["class"]),[[yi,De.modelValue||C.value]]),Cn(_e(w(Ut),{class:j([w(s).be("picker","empty"),w(s).is("icon-close")])},{default:Re(()=>[_e(w(nu))]),_:1},8,["class"]),[[yi,!De.modelValue&&!C.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var Kwe=It(qwe,[["__file","color-picker.vue"]]);const Ywe=xn(Kwe),Xwe=Et({a11y:{type:Boolean,default:!0},locale:{type:Ke(Object)},size:ws,button:{type:Ke(Object)},experimentalFeatures:{type:Ke(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Ke(Object)},zIndex:Number,namespace:{type:String,default:"el"},...sy}),Uc={},jwe=Ie({name:"ElConfigProvider",props:Xwe,setup(n,{slots:e}){pt(()=>n.message,i=>{Object.assign(Uc,i??{})},{immediate:!0,deep:!0});const t=WL(n);return()=>Qe(e,"default",{config:t==null?void 0:t.value})}}),$we=xn(jwe),Qwe=Ie({name:"ElContainer"}),Zwe=Ie({...Qwe,props:{direction:{type:String}},setup(n){const e=n,t=Ps(),i=St("container"),r=V(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(a=>{const o=a.type.name;return o==="ElHeader"||o==="ElFooter"}):!1);return(s,a)=>(W(),ve("section",{class:j([w(i).b(),w(i).is("vertical",w(r))])},[Qe(s.$slots,"default")],2))}});var Jwe=It(Zwe,[["__file","container.vue"]]);const eSe=Ie({name:"ElAside"}),tSe=Ie({...eSe,props:{width:{type:String,default:null}},setup(n){const e=n,t=St("aside"),i=V(()=>e.width?t.cssVarBlock({width:e.width}):{});return(r,s)=>(W(),ve("aside",{class:j(w(t).b()),style:jt(w(i))},[Qe(r.$slots,"default")],6))}});var IZ=It(tSe,[["__file","aside.vue"]]);const nSe=Ie({name:"ElFooter"}),iSe=Ie({...nSe,props:{height:{type:String,default:null}},setup(n){const e=n,t=St("footer"),i=V(()=>e.height?t.cssVarBlock({height:e.height}):{});return(r,s)=>(W(),ve("footer",{class:j(w(t).b()),style:jt(w(i))},[Qe(r.$slots,"default")],6))}});var DZ=It(iSe,[["__file","footer.vue"]]);const rSe=Ie({name:"ElHeader"}),sSe=Ie({...rSe,props:{height:{type:String,default:null}},setup(n){const e=n,t=St("header"),i=V(()=>e.height?t.cssVarBlock({height:e.height}):{});return(r,s)=>(W(),ve("header",{class:j(w(t).b()),style:jt(w(i))},[Qe(r.$slots,"default")],6))}});var RZ=It(sSe,[["__file","header.vue"]]);const aSe=Ie({name:"ElMain"}),oSe=Ie({...aSe,setup(n){const e=St("main");return(t,i)=>(W(),ve("main",{class:j(w(e).b())},[Qe(t.$slots,"default")],2))}});var PZ=It(oSe,[["__file","main.vue"]]);const lSe=xn(Jwe,{Aside:IZ,Footer:DZ,Header:RZ,Main:PZ}),cSe=Or(IZ),uSe=Or(DZ),dSe=Or(RZ),fSe=Or(PZ);var $3={exports:{}},hSe=$3.exports,MU;function pSe(){return MU||(MU=1,function(n,e){(function(t,i){n.exports=i()})(hSe,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,s=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},c=function(v){return(v=+v)+(v>68?1900:2e3)},u=function(v){return function(g){this[v]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),x=60*y[1]+(+y[2]||0);return x===0?0:y[0]==="+"?-x:x}(v)}],f=function(v){var g=l[v];return g&&(g.indexOf?g:g.s.concat(g.f))},h=function(v,g){var y,x=l.meridiem;if(x){for(var b=1;b<=24;b+=1)if(v.indexOf(x(b,0,g))>-1){y=b>12;break}}else y=v===(g?"pm":"PM");return y},p={A:[o,function(v){this.afternoon=h(v,!1)}],a:[o,function(v){this.afternoon=h(v,!0)}],Q:[r,function(v){this.month=3*(v-1)+1}],S:[r,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[a,u("seconds")],ss:[a,u("seconds")],m:[a,u("minutes")],mm:[a,u("minutes")],H:[a,u("hours")],h:[a,u("hours")],HH:[a,u("hours")],hh:[a,u("hours")],D:[a,u("day")],DD:[s,u("day")],Do:[o,function(v){var g=l.ordinal,y=v.match(/\d+/);if(this.day=y[0],g)for(var x=1;x<=31;x+=1)g(x).replace(/\[|\]/g,"")===v&&(this.day=x)}],w:[a,u("week")],ww:[s,u("week")],M:[a,u("month")],MM:[s,u("month")],MMM:[o,function(v){var g=f("months"),y=(f("monthsShort")||g.map(function(x){return x.slice(0,3)})).indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(v){var g=f("months").indexOf(v)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(v){this.year=c(v)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function m(v){var g,y;g=v,y=l&&l.formats;for(var x=(v=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(T,E,I){var L=I&&I.toUpperCase();return E||y[I]||t[I]||y[L].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(F,B,P){return B||P.slice(1)})})).match(i),b=x.length,A=0;A<b;A+=1){var S=x[A],C=p[S],_=C&&C[0],M=C&&C[1];x[A]=M?{regex:_,parser:M}:S.replace(/^\[|\]$/g,"")}return function(T){for(var E={},I=0,L=0;I<b;I+=1){var F=x[I];if(typeof F=="string")L+=F.length;else{var B=F.regex,P=F.parser,z=T.slice(L),O=B.exec(z)[0];P.call(E,O),T=T.replace(O,"")}}return function(N){var H=N.afternoon;if(H!==void 0){var q=N.hours;H?q<12&&(N.hours+=12):q===12&&(N.hours=0),delete N.afternoon}}(E),E}}return function(v,g,y){y.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(c=v.parseTwoDigitYear);var x=g.prototype,b=x.parse;x.parse=function(A){var S=A.date,C=A.utc,_=A.args;this.$u=C;var M=_[1];if(typeof M=="string"){var T=_[2]===!0,E=_[3]===!0,I=T||E,L=_[2];E&&(L=_[2]),l=this.$locale(),!T&&L&&(l=y.Ls[L]),this.$d=function(z,O,N,H){try{if(["x","X"].indexOf(O)>-1)return new Date((O==="X"?1e3:1)*z);var q=m(O)(z),te=q.year,Q=q.month,ee=q.day,de=q.hours,J=q.minutes,ue=q.seconds,Te=q.milliseconds,De=q.zone,Le=q.week,Ne=new Date,Y=ee||(te||Q?1:Ne.getDate()),oe=te||Ne.getFullYear(),ne=0;te&&!Q||(ne=Q>0?Q-1:Ne.getMonth());var Xe,ke=de||0,Ge=J||0,He=ue||0,qe=Te||0;return De?new Date(Date.UTC(oe,ne,Y,ke,Ge,He,qe+60*De.offset*1e3)):N?new Date(Date.UTC(oe,ne,Y,ke,Ge,He,qe)):(Xe=new Date(oe,ne,Y,ke,Ge,He,qe),Le&&(Xe=H(Xe).week(Le).toDate()),Xe)}catch{return new Date("")}}(S,M,C,y),this.init(),L&&L!==!0&&(this.$L=this.locale(L).$L),I&&S!=this.format(M)&&(this.$d=new Date("")),l={}}else if(M instanceof Array)for(var F=M.length,B=1;B<=F;B+=1){_[1]=M[B-1];var P=y.apply(this,_);if(P.isValid()){this.$d=P.$d,this.$L=P.$L,this.init();break}B===F&&(this.$d=new Date(""))}else b.call(this,A)}}})}($3)),$3.exports}var mSe=pSe();const bk=uu(mSe);var Q3={exports:{}},vSe=Q3.exports,TU;function gSe(){return TU||(TU=1,function(n,e){(function(t,i){n.exports=i()})(vSe,function(){return function(t,i){var r=i.prototype,s=r.format;r.format=function(a){var o=this,l=this.$locale();if(!this.isValid())return s.bind(this)(a);var c=this.$utils(),u=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return c.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return s.bind(this)(u)}}})}(Q3)),Q3.exports}var ySe=gSe();const bSe=uu(ySe);var Z3={exports:{}},xSe=Z3.exports,EU;function ASe(){return EU||(EU=1,function(n,e){(function(t,i){n.exports=i()})(xSe,function(){var t="week",i="year";return function(r,s,a){var o=s.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=a(this).startOf(i).add(1,i).date(c),d=a(this).endOf(t);if(u.isBefore(d))return 1}var f=a(this).startOf(i).date(c).startOf(t).subtract(1,"millisecond"),h=this.diff(f,t,!0);return h<0?a(this).startOf("week").week():Math.ceil(h)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})}(Z3)),Z3.exports}var wSe=ASe();const SSe=uu(wSe);var J3={exports:{}},_Se=J3.exports,IU;function CSe(){return IU||(IU=1,function(n,e){(function(t,i){n.exports=i()})(_Se,function(){return function(t,i){i.prototype.weekYear=function(){var r=this.month(),s=this.week(),a=this.year();return s===1&&r===11?a+1:r===0&&s>=52?a-1:a}}})}(J3)),J3.exports}var MSe=CSe();const TSe=uu(MSe);var e_={exports:{}},ESe=e_.exports,DU;function ISe(){return DU||(DU=1,function(n,e){(function(t,i){n.exports=i()})(ESe,function(){return function(t,i,r){i.prototype.dayOfYear=function(s){var a=Math.round((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return s==null?a:this.add(s-a,"day")}}})}(e_)),e_.exports}var DSe=ISe();const RSe=uu(DSe);var t_={exports:{}},PSe=t_.exports,RU;function LSe(){return RU||(RU=1,function(n,e){(function(t,i){n.exports=i()})(PSe,function(){return function(t,i){i.prototype.isSameOrAfter=function(r,s){return this.isSame(r,s)||this.isAfter(r,s)}}})}(t_)),t_.exports}var kSe=LSe();const FSe=uu(kSe);var n_={exports:{}},BSe=n_.exports,PU;function NSe(){return PU||(PU=1,function(n,e){(function(t,i){n.exports=i()})(BSe,function(){return function(t,i){i.prototype.isSameOrBefore=function(r,s){return this.isSame(r,s)||this.isBefore(r,s)}}})}(n_)),n_.exports}var OSe=NSe();const USe=uu(OSe),LU=["hours","minutes","seconds"],ND="HH:mm:ss",ag="YYYY-MM-DD",zSe={date:ag,dates:ag,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${ag} ${ND}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:ag,datetimerange:`${ag} ${ND}`},LZ=Et({disabledHours:{type:Ke(Function)},disabledMinutes:{type:Ke(Function)},disabledSeconds:{type:Ke(Function)}}),kZ=Et({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),xk=Et({id:{type:Ke([Array,String])},name:{type:Ke([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Ke([String,Object]),default:If},editable:{type:Boolean,default:!0},prefixIcon:{type:Ke([String,Object]),default:""},size:ws,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Ke(Object),default:()=>({})},modelValue:{type:Ke([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Ke([Date,Array])},defaultTime:{type:Ke([Date,Array])},isRange:Boolean,...LZ,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:Ke([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:Ke(String),values:Df,default:"bottom"},fallbackPlacements:{type:Ke(Array),default:["bottom","top","right","left"]},...sy,...ga(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),VSe=Et({id:{type:Ke(Array)},name:{type:Ke(Array)},modelValue:{type:Ke([Array,String])},startPlaceholder:String,endPlaceholder:String}),HSe=Ie({name:"PickerRangeTrigger",inheritAttrs:!1}),GSe=Ie({...HSe,props:VSe,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(n,{expose:e,emit:t}){const i=yA(),r=St("date"),s=St("range"),a=ae(),o=ae(),{wrapperRef:l,isFocused:c}=Sp(a),u=b=>{t("click",b)},d=b=>{t("mouseenter",b)},f=b=>{t("mouseleave",b)},h=b=>{t("mouseenter",b)},p=b=>{t("startInput",b)},m=b=>{t("endInput",b)},v=b=>{t("startChange",b)},g=b=>{t("endChange",b)};return e({focus:()=>{var b;(b=a.value)==null||b.focus()},blur:()=>{var b,A;(b=a.value)==null||b.blur(),(A=o.value)==null||A.blur()}}),(b,A)=>(W(),ve("div",{ref_key:"wrapperRef",ref:l,class:j([w(r).is("active",w(c)),b.$attrs.class]),style:jt(b.$attrs.style),onClick:u,onMouseenter:d,onMouseleave:f,onTouchstartPassive:h},[Qe(b.$slots,"prefix"),be("input",Kn(w(i),{id:b.id&&b.id[0],ref_key:"inputRef",ref:a,name:b.name&&b.name[0],placeholder:b.startPlaceholder,value:b.modelValue&&b.modelValue[0],class:w(s).b("input"),onInput:p,onChange:v}),null,16,["id","name","placeholder","value"]),Qe(b.$slots,"range-separator"),be("input",Kn(w(i),{id:b.id&&b.id[1],ref_key:"endInputRef",ref:o,name:b.name&&b.name[1],placeholder:b.endPlaceholder,value:b.modelValue&&b.modelValue[1],class:w(s).b("input"),onInput:m,onChange:g}),null,16,["id","name","placeholder","value"]),Qe(b.$slots,"suffix")],38))}});var WSe=It(GSe,[["__file","picker-range-trigger.vue"]]);const qSe=Ie({name:"Picker"}),KSe=Ie({...qSe,props:xk,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(n,{expose:e,emit:t}){const i=n,r=Cf(),{lang:s}=ci(),a=St("date"),o=St("input"),l=St("range"),{form:c,formItem:u}=La(),d=Nt("ElPopperOptions",{}),{valueOnClear:f}=hM(i,null),h=ae(),p=ae(),m=ae(!1),v=ae(!1),g=ae(null);let y=!1;const{isFocused:x,handleFocus:b,handleBlur:A}=Sp(p,{beforeFocus(){return i.readonly||N.value},afterFocus(){m.value=!0},beforeBlur(me){var Ae;return!y&&((Ae=h.value)==null?void 0:Ae.isFocusInsideContent(me))},afterBlur(){tt(),m.value=!1,y=!1,i.validateEvent&&(u==null||u.validate("blur").catch(me=>void 0))}}),S=V(()=>[a.b("editor"),a.bm("editor",i.type),o.e("wrapper"),a.is("disabled",N.value),a.is("active",m.value),l.b("editor"),ke?l.bm("editor",ke.value):"",r.class]),C=V(()=>[o.e("icon"),l.e("close-icon"),Te.value?"":l.e("close-icon--hidden")]);pt(m,me=>{me?Yt(()=>{me&&(g.value=i.modelValue)}):(qe.value=null,Yt(()=>{_(i.modelValue)}))});const _=(me,Ae)=>{(Ae||!uU(me,g.value))&&(t("change",me),Ae&&(g.value=me),i.validateEvent&&(u==null||u.validate("change").catch(dt=>void 0)))},M=me=>{if(!uU(i.modelValue,me)){let Ae;Mt(me)?Ae=me.map(dt=>fU(dt,i.valueFormat,s.value)):me&&(Ae=fU(me,i.valueFormat,s.value)),t("update:modelValue",me&&Ae,s.value)}},T=me=>{t("keydown",me)},E=V(()=>p.value?Array.from(p.value.$el.querySelectorAll("input")):[]),I=(me,Ae,dt)=>{const we=E.value;we.length&&(!dt||dt==="min"?(we[0].setSelectionRange(me,Ae),we[0].focus()):dt==="max"&&(we[1].setSelectionRange(me,Ae),we[1].focus()))},L=(me="",Ae=!1)=>{m.value=Ae;let dt;Mt(me)?dt=me.map(we=>we.toDate()):dt=me&&me.toDate(),qe.value=null,M(dt)},F=()=>{v.value=!0},B=()=>{t("visible-change",!0)},P=()=>{v.value=!1,m.value=!1,t("visible-change",!1)},z=()=>{m.value=!0},O=()=>{m.value=!1},N=V(()=>i.disabled||(c==null?void 0:c.disabled)),H=V(()=>{let me;if(Le.value?gt.value.getDefaultValue&&(me=gt.value.getDefaultValue()):Mt(i.modelValue)?me=i.modelValue.map(Ae=>dU(Ae,i.valueFormat,s.value)):me=dU(i.modelValue,i.valueFormat,s.value),gt.value.getRangeAvailableTime){const Ae=gt.value.getRangeAvailableTime(me);ha(Ae,me)||(me=Ae,Le.value||M(pw(me)))}return Mt(me)&&me.some(Ae=>!Ae)&&(me=[]),me}),q=V(()=>{if(!gt.value.panelReady)return"";const me=G(H.value);return Mt(qe.value)?[qe.value[0]||me&&me[0]||"",qe.value[1]||me&&me[1]||""]:qe.value!==null?qe.value:!Q.value&&Le.value||!m.value&&Le.value?"":me?ee.value||de.value||J.value?me.join(", "):me:""}),te=V(()=>i.type.includes("time")),Q=V(()=>i.type.startsWith("time")),ee=V(()=>i.type==="dates"),de=V(()=>i.type==="months"),J=V(()=>i.type==="years"),ue=V(()=>i.prefixIcon||(te.value?bQ:tge)),Te=ae(!1),De=me=>{i.readonly||N.value||(Te.value&&(me.stopPropagation(),gt.value.handleClear?gt.value.handleClear():M(f.value),_(f.value,!0),Te.value=!1,P()),t("clear"))},Le=V(()=>{const{modelValue:me}=i;return!me||Mt(me)&&!me.filter(Boolean).length}),Ne=async me=>{var Ae;i.readonly||N.value||(((Ae=me.target)==null?void 0:Ae.tagName)!=="INPUT"||x.value)&&(m.value=!0)},Y=()=>{i.readonly||N.value||!Le.value&&i.clearable&&(Te.value=!0)},oe=()=>{Te.value=!1},ne=me=>{var Ae;i.readonly||N.value||(((Ae=me.touches[0].target)==null?void 0:Ae.tagName)!=="INPUT"||x.value)&&(m.value=!0)},Xe=V(()=>i.type.includes("range")),ke=gs(),Ge=V(()=>{var me,Ae;return(Ae=(me=w(h))==null?void 0:me.popperRef)==null?void 0:Ae.contentRef}),He=GL(p,me=>{const Ae=w(Ge),dt=go(p);Ae&&(me.target===Ae||me.composedPath().includes(Ae))||me.target===dt||dt&&me.composedPath().includes(dt)||(m.value=!1)});Fi(()=>{He==null||He()});const qe=ae(null),tt=()=>{if(qe.value){const me=pe(q.value);me&&Z(me)&&(M(pw(me)),qe.value=null)}qe.value===""&&(M(f.value),_(f.value,!0),qe.value=null)},pe=me=>me?gt.value.parseUserInput(me):null,G=me=>me?gt.value.formatToString(me):null,Z=me=>gt.value.isValidValue(me),ge=async me=>{if(i.readonly||N.value)return;const{code:Ae}=me;if(T(me),Ae===kt.esc){m.value===!0&&(m.value=!1,me.preventDefault(),me.stopPropagation());return}if(Ae===kt.down&&(gt.value.handleFocusPicker&&(me.preventDefault(),me.stopPropagation()),m.value===!1&&(m.value=!0,await Yt()),gt.value.handleFocusPicker)){gt.value.handleFocusPicker();return}if(Ae===kt.tab){y=!0;return}if(Ae===kt.enter||Ae===kt.numpadEnter){(qe.value===null||qe.value===""||Z(pe(q.value)))&&(tt(),m.value=!1),me.stopPropagation();return}if(qe.value){me.stopPropagation();return}gt.value.handleKeydownInput&&gt.value.handleKeydownInput(me)},Oe=me=>{qe.value=me,m.value||(m.value=!0)},je=me=>{const Ae=me.target;qe.value?qe.value=[Ae.value,qe.value[1]]:qe.value=[Ae.value,null]},bt=me=>{const Ae=me.target;qe.value?qe.value=[qe.value[0],Ae.value]:qe.value=[null,Ae.value]},At=()=>{var me;const Ae=qe.value,dt=pe(Ae&&Ae[0]),we=w(H);if(dt&&dt.isValid()){qe.value=[G(dt),((me=q.value)==null?void 0:me[1])||null];const _t=[dt,we&&(we[1]||null)];Z(_t)&&(M(pw(_t)),qe.value=null)}},Ee=()=>{var me;const Ae=w(qe),dt=pe(Ae&&Ae[1]),we=w(H);if(dt&&dt.isValid()){qe.value=[((me=w(q))==null?void 0:me[0])||null,G(dt)];const _t=[we&&we[0],dt];Z(_t)&&(M(pw(_t)),qe.value=null)}},gt=ae({}),lt=me=>{gt.value[me[0]]=me[1],gt.value.panelReady=!0},$=me=>{t("calendar-change",me)},le=(me,Ae,dt)=>{t("panel-change",me,Ae,dt)},fe=()=>{var me;(me=p.value)==null||me.focus()},Me=()=>{var me;(me=p.value)==null||me.blur()};return Qn("EP_PICKER_BASE",{props:i}),e({focus:fe,blur:Me,handleOpen:z,handleClose:O,onPick:L}),(me,Ae)=>(W(),rt(w(Da),Kn({ref_key:"refPopper",ref:h,visible:m.value,effect:"light",pure:"",trigger:"click"},me.$attrs,{role:"dialog",teleported:"",transition:`${w(a).namespace.value}-zoom-in-top`,"popper-class":[`${w(a).namespace.value}-picker__popper`,me.popperClass],"popper-options":w(d),"fallback-placements":me.fallbackPlacements,"gpu-acceleration":!1,placement:me.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:F,onShow:B,onHide:P}),{default:Re(()=>[w(Xe)?(W(),rt(WSe,{key:1,id:me.id,ref_key:"inputRef",ref:p,"model-value":w(q),name:me.name,disabled:w(N),readonly:!me.editable||me.readonly,"start-placeholder":me.startPlaceholder,"end-placeholder":me.endPlaceholder,class:j(w(S)),style:jt(me.$attrs.style),"aria-label":me.ariaLabel,tabindex:me.tabindex,autocomplete:"off",role:"combobox",onClick:Ne,onFocus:w(b),onBlur:w(A),onStartInput:je,onStartChange:At,onEndInput:bt,onEndChange:Ee,onMousedown:Ne,onMouseenter:Y,onMouseleave:oe,onTouchstartPassive:ne,onKeydown:ge},{prefix:Re(()=>[w(ue)?(W(),rt(w(Ut),{key:0,class:j([w(o).e("icon"),w(l).e("icon")])},{default:Re(()=>[(W(),rt(On(w(ue))))]),_:1},8,["class"])):et("v-if",!0)]),"range-separator":Re(()=>[Qe(me.$slots,"range-separator",{},()=>[be("span",{class:j(w(l).b("separator"))},Tt(me.rangeSeparator),3)])]),suffix:Re(()=>[me.clearIcon?(W(),rt(w(Ut),{key:0,class:j(w(C)),onMousedown:ln(w(Pi),["prevent"]),onClick:De},{default:Re(()=>[(W(),rt(On(me.clearIcon)))]),_:1},8,["class","onMousedown"])):et("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(W(),rt(w(Qa),{key:0,id:me.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":w(q),name:me.name,size:w(ke),disabled:w(N),placeholder:me.placeholder,class:j([w(a).b("editor"),w(a).bm("editor",me.type),me.$attrs.class]),style:jt(me.$attrs.style),readonly:!me.editable||me.readonly||w(ee)||w(de)||w(J)||me.type==="week","aria-label":me.ariaLabel,tabindex:me.tabindex,"validate-event":!1,onInput:Oe,onFocus:w(b),onBlur:w(A),onKeydown:ge,onChange:tt,onMousedown:Ne,onMouseenter:Y,onMouseleave:oe,onTouchstartPassive:ne,onClick:ln(()=>{},["stop"])},{prefix:Re(()=>[w(ue)?(W(),rt(w(Ut),{key:0,class:j(w(o).e("icon")),onMousedown:ln(Ne,["prevent"]),onTouchstartPassive:ne},{default:Re(()=>[(W(),rt(On(w(ue))))]),_:1},8,["class","onMousedown"])):et("v-if",!0)]),suffix:Re(()=>[Te.value&&me.clearIcon?(W(),rt(w(Ut),{key:0,class:j(`${w(o).e("icon")} clear-icon`),onMousedown:ln(w(Pi),["prevent"]),onClick:De},{default:Re(()=>[(W(),rt(On(me.clearIcon)))]),_:1},8,["class","onMousedown"])):et("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:Re(()=>[Qe(me.$slots,"default",{visible:m.value,actualVisible:v.value,parsedValue:w(H),format:me.format,dateFormat:me.dateFormat,timeFormat:me.timeFormat,unlinkPanels:me.unlinkPanels,type:me.type,defaultValue:me.defaultValue,showNow:me.showNow,onPick:L,onSelectRange:I,onSetPickerOption:lt,onCalendarChange:$,onPanelChange:le,onMousedown:ln(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var FZ=It(KSe,[["__file","picker.vue"]]);const YSe=Et({...kZ,datetimeRole:String,parsedValue:{type:Ke(Object)}}),BZ=({getAvailableHours:n,getAvailableMinutes:e,getAvailableSeconds:t})=>{const i=(a,o,l,c)=>{const u={hour:n,minute:e,second:t};let d=a;return["hour","minute","second"].forEach(f=>{if(u[f]){let h;const p=u[f];switch(f){case"minute":{h=p(d.hour(),o,c);break}case"second":{h=p(d.hour(),d.minute(),o,c);break}default:{h=p(o,c);break}}if(h!=null&&h.length&&!h.includes(d[f]())){const m=l?0:h.length-1;d=d[f](h[m])}}}),d},r={};return{timePickerOptions:r,getAvailableTime:i,onSetOption:([a,o])=>{r[a]=o}}},R5=n=>{const e=(i,r)=>i||r,t=i=>i!==!0;return n.map(e).filter(t)},NZ=(n,e,t)=>({getHoursList:(a,o)=>T5(24,n&&(()=>n==null?void 0:n(a,o))),getMinutesList:(a,o,l)=>T5(60,e&&(()=>e==null?void 0:e(a,o,l))),getSecondsList:(a,o,l,c)=>T5(60,t&&(()=>t==null?void 0:t(a,o,l,c)))}),OZ=(n,e,t)=>{const{getHoursList:i,getMinutesList:r,getSecondsList:s}=NZ(n,e,t);return{getAvailableHours:(c,u)=>R5(i(c,u)),getAvailableMinutes:(c,u,d)=>R5(r(c,u,d)),getAvailableSeconds:(c,u,d,f)=>R5(s(c,u,d,f))}},UZ=n=>{const e=ae(n.parsedValue);return pt(()=>n.visible,t=>{t||(e.value=n.parsedValue)}),e},XSe=Et({role:{type:String,required:!0},spinnerDate:{type:Ke(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Ke(String),default:""},...LZ}),jSe=100,$Se=600,yC={beforeMount(n,e){const t=e.value,{interval:i=jSe,delay:r=$Se}=Xt(t)?{}:t;let s,a;const o=()=>Xt(t)?t():t.handler(),l=()=>{a&&(clearTimeout(a),a=void 0),s&&(clearInterval(s),s=void 0)};n.addEventListener("mousedown",c=>{c.button===0&&(l(),o(),document.addEventListener("mouseup",()=>l(),{once:!0}),a=setTimeout(()=>{s=setInterval(()=>{o()},i)},r))})}},QSe=Ie({__name:"basic-time-spinner",props:XSe,emits:["change","select-range","set-option"],setup(n,{emit:e}){const t=n,i=Nt("EP_PICKER_BASE"),{isRange:r}=i.props,s=St("time"),{getHoursList:a,getMinutesList:o,getSecondsList:l}=NZ(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let c=!1;const u=ae(),d=ae(),f=ae(),h=ae(),p={hours:d,minutes:f,seconds:h},m=V(()=>t.showSeconds?LU:LU.slice(0,2)),v=V(()=>{const{spinnerDate:q}=t,te=q.hour(),Q=q.minute(),ee=q.second();return{hours:te,minutes:Q,seconds:ee}}),g=V(()=>{const{hours:q,minutes:te}=w(v),{role:Q,spinnerDate:ee}=t,de=r?void 0:ee;return{hours:a(Q,de),minutes:o(q,Q,de),seconds:l(q,te,Q,de)}}),y=V(()=>{const{hours:q,minutes:te,seconds:Q}=w(v);return{hours:M5(q,23),minutes:M5(te,59),seconds:M5(Q,59)}}),x=Jo(q=>{c=!1,S(q)},200),b=q=>{if(!!!t.amPmMode)return"";const Q=t.amPmMode==="A";let ee=q<12?" am":" pm";return Q&&(ee=ee.toUpperCase()),ee},A=q=>{let te;switch(q){case"hours":te=[0,2];break;case"minutes":te=[3,5];break;case"seconds":te=[6,8];break}const[Q,ee]=te;e("select-range",Q,ee),u.value=q},S=q=>{M(q,w(v)[q])},C=()=>{S("hours"),S("minutes"),S("seconds")},_=q=>q.querySelector(`.${s.namespace.value}-scrollbar__wrap`),M=(q,te)=>{if(t.arrowControl)return;const Q=w(p[q]);Q&&Q.$el&&(_(Q.$el).scrollTop=Math.max(0,te*T(q)))},T=q=>{const te=w(p[q]),Q=te==null?void 0:te.$el.querySelector("li");return Q&&Number.parseFloat(Gd(Q,"height"))||0},E=()=>{L(1)},I=()=>{L(-1)},L=q=>{u.value||A("hours");const te=u.value,Q=w(v)[te],ee=u.value==="hours"?24:60,de=F(te,Q,q,ee);B(te,de),M(te,de),Yt(()=>A(te))},F=(q,te,Q,ee)=>{let de=(te+Q+ee)%ee;const J=w(g)[q];for(;J[de]&&de!==te;)de=(de+Q+ee)%ee;return de},B=(q,te)=>{if(w(g)[q][te])return;const{hours:de,minutes:J,seconds:ue}=w(v);let Te;switch(q){case"hours":Te=t.spinnerDate.hour(te).minute(J).second(ue);break;case"minutes":Te=t.spinnerDate.hour(de).minute(te).second(ue);break;case"seconds":Te=t.spinnerDate.hour(de).minute(J).second(te);break}e("change",Te)},P=(q,{value:te,disabled:Q})=>{Q||(B(q,te),A(q),M(q,te))},z=q=>{const te=w(p[q]);if(!te)return;c=!0,x(q);const Q=Math.min(Math.round((_(te.$el).scrollTop-(O(q)*.5-10)/T(q)+3)/T(q)),q==="hours"?23:59);B(q,Q)},O=q=>w(p[q]).$el.offsetHeight,N=()=>{const q=te=>{const Q=w(p[te]);Q&&Q.$el&&(_(Q.$el).onscroll=()=>{z(te)})};q("hours"),q("minutes"),q("seconds")};Mn(()=>{Yt(()=>{!t.arrowControl&&N(),C(),t.role==="start"&&A("hours")})});const H=(q,te)=>{p[te].value=q??void 0};return e("set-option",[`${t.role}_scrollDown`,L]),e("set-option",[`${t.role}_emitSelectRange`,A]),pt(()=>t.spinnerDate,()=>{c||C()}),(q,te)=>(W(),ve("div",{class:j([w(s).b("spinner"),{"has-seconds":q.showSeconds}])},[q.arrowControl?et("v-if",!0):(W(!0),ve(Kt,{key:0},Jn(w(m),Q=>(W(),rt(w(sd),{key:Q,ref_for:!0,ref:ee=>H(ee,Q),class:j(w(s).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":w(s).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:ee=>A(Q),onMousemove:ee=>S(Q)},{default:Re(()=>[(W(!0),ve(Kt,null,Jn(w(g)[Q],(ee,de)=>(W(),ve("li",{key:de,class:j([w(s).be("spinner","item"),w(s).is("active",de===w(v)[Q]),w(s).is("disabled",ee)]),onClick:J=>P(Q,{value:de,disabled:ee})},[Q==="hours"?(W(),ve(Kt,{key:0},[Hn(Tt(("0"+(q.amPmMode?de%12||12:de)).slice(-2))+Tt(b(de)),1)],64)):(W(),ve(Kt,{key:1},[Hn(Tt(("0"+de).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),q.arrowControl?(W(!0),ve(Kt,{key:1},Jn(w(m),Q=>(W(),ve("div",{key:Q,class:j([w(s).be("spinner","wrapper"),w(s).is("arrow")]),onMouseenter:ee=>A(Q)},[Cn((W(),rt(w(Ut),{class:j(["arrow-up",w(s).be("spinner","arrow")])},{default:Re(()=>[_e(w(YL))]),_:1},8,["class"])),[[w(yC),I]]),Cn((W(),rt(w(Ut),{class:j(["arrow-down",w(s).be("spinner","arrow")])},{default:Re(()=>[_e(w(Ef))]),_:1},8,["class"])),[[w(yC),E]]),be("ul",{class:j(w(s).be("spinner","list"))},[(W(!0),ve(Kt,null,Jn(w(y)[Q],(ee,de)=>(W(),ve("li",{key:de,class:j([w(s).be("spinner","item"),w(s).is("active",ee===w(v)[Q]),w(s).is("disabled",w(g)[Q][ee])])},[w(Jt)(ee)?(W(),ve(Kt,{key:0},[Q==="hours"?(W(),ve(Kt,{key:0},[Hn(Tt(("0"+(q.amPmMode?ee%12||12:ee)).slice(-2))+Tt(b(ee)),1)],64)):(W(),ve(Kt,{key:1},[Hn(Tt(("0"+ee).slice(-2)),1)],64))],64)):et("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):et("v-if",!0)],2))}});var OD=It(QSe,[["__file","basic-time-spinner.vue"]]);const ZSe=Ie({__name:"panel-time-pick",props:YSe,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=Nt("EP_PICKER_BASE"),{arrowControl:r,disabledHours:s,disabledMinutes:a,disabledSeconds:o,defaultValue:l}=i.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=OZ(s,a,o),f=St("time"),{t:h,lang:p}=ci(),m=ae([0,2]),v=UZ(t),g=V(()=>bi(t.actualVisible)?`${f.namespace.value}-zoom-in-top`:""),y=V(()=>t.format.includes("ss")),x=V(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),b=O=>{const N=An(O).locale(p.value),H=F(N);return N.isSame(H)},A=()=>{e("pick",v.value,!1)},S=(O=!1,N=!1)=>{N||e("pick",t.parsedValue,O)},C=O=>{if(!t.visible)return;const N=F(O).millisecond(0);e("pick",N,!0)},_=(O,N)=>{e("select-range",O,N),m.value=[O,N]},M=O=>{const N=[0,3].concat(y.value?[6]:[]),H=["hours","minutes"].concat(y.value?["seconds"]:[]),te=(N.indexOf(m.value[0])+O+N.length)%N.length;E.start_emitSelectRange(H[te])},T=O=>{const N=O.code,{left:H,right:q,up:te,down:Q}=kt;if([H,q].includes(N)){M(N===H?-1:1),O.preventDefault();return}if([te,Q].includes(N)){const ee=N===te?-1:1;E.start_scrollDown(ee),O.preventDefault();return}},{timePickerOptions:E,onSetOption:I,getAvailableTime:L}=BZ({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),F=O=>L(O,t.datetimeRole||"",!0),B=O=>O?An(O,t.format).locale(p.value):null,P=O=>O?O.format(t.format):null,z=()=>An(l).locale(p.value);return e("set-picker-option",["isValidValue",b]),e("set-picker-option",["formatToString",P]),e("set-picker-option",["parseUserInput",B]),e("set-picker-option",["handleKeydownInput",T]),e("set-picker-option",["getRangeAvailableTime",F]),e("set-picker-option",["getDefaultValue",z]),(O,N)=>(W(),rt(na,{name:w(g)},{default:Re(()=>[O.actualVisible||O.visible?(W(),ve("div",{key:0,class:j(w(f).b("panel"))},[be("div",{class:j([w(f).be("panel","content"),{"has-seconds":w(y)}])},[_e(OD,{ref:"spinner",role:O.datetimeRole||"start","arrow-control":w(r),"show-seconds":w(y),"am-pm-mode":w(x),"spinner-date":O.parsedValue,"disabled-hours":w(s),"disabled-minutes":w(a),"disabled-seconds":w(o),onChange:C,onSetOption:w(I),onSelectRange:_},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),be("div",{class:j(w(f).be("panel","footer"))},[be("button",{type:"button",class:j([w(f).be("panel","btn"),"cancel"]),onClick:A},Tt(w(h)("el.datepicker.cancel")),3),be("button",{type:"button",class:j([w(f).be("panel","btn"),"confirm"]),onClick:H=>S()},Tt(w(h)("el.datepicker.confirm")),11,["onClick"])],2)],2)):et("v-if",!0)]),_:1},8,["name"]))}});var bC=It(ZSe,[["__file","panel-time-pick.vue"]]);const JSe=Et({...kZ,parsedValue:{type:Ke(Array)}}),e3e=Ie({__name:"panel-time-range",props:JSe,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=(Ne,Y)=>{const oe=[];for(let ne=Ne;ne<=Y;ne++)oe.push(ne);return oe},{t:r,lang:s}=ci(),a=St("time"),o=St("picker"),l=Nt("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:f,defaultValue:h}=l.props,p=V(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",c),b.value?"has-seconds":""]),m=V(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",c),b.value?"has-seconds":""]),v=V(()=>t.parsedValue[0]),g=V(()=>t.parsedValue[1]),y=UZ(t),x=()=>{e("pick",y.value,!1)},b=V(()=>t.format.includes("ss")),A=V(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),S=(Ne=!1)=>{e("pick",[v.value,g.value],Ne)},C=Ne=>{T(Ne.millisecond(0),g.value)},_=Ne=>{T(v.value,Ne.millisecond(0))},M=Ne=>{const Y=Ne.map(ne=>An(ne).locale(s.value)),oe=q(Y);return Y[0].isSame(oe[0])&&Y[1].isSame(oe[1])},T=(Ne,Y)=>{t.visible&&e("pick",[Ne,Y],!0)},E=V(()=>v.value>g.value),I=ae([0,2]),L=(Ne,Y)=>{e("select-range",Ne,Y,"min"),I.value=[Ne,Y]},F=V(()=>b.value?11:8),B=(Ne,Y)=>{e("select-range",Ne,Y,"max");const oe=w(F);I.value=[Ne+oe,Y+oe]},P=Ne=>{const Y=b.value?[0,3,6,11,14,17]:[0,3,8,11],oe=["hours","minutes"].concat(b.value?["seconds"]:[]),Xe=(Y.indexOf(I.value[0])+Ne+Y.length)%Y.length,ke=Y.length/2;Xe<ke?de.start_emitSelectRange(oe[Xe]):de.end_emitSelectRange(oe[Xe-ke])},z=Ne=>{const Y=Ne.code,{left:oe,right:ne,up:Xe,down:ke}=kt;if([oe,ne].includes(Y)){P(Y===oe?-1:1),Ne.preventDefault();return}if([Xe,ke].includes(Y)){const Ge=Y===Xe?-1:1,He=I.value[0]<F.value?"start":"end";de[`${He}_scrollDown`](Ge),Ne.preventDefault();return}},O=(Ne,Y)=>{const oe=u?u(Ne):[],ne=Ne==="start",ke=(Y||(ne?g.value:v.value)).hour(),Ge=ne?i(ke+1,23):i(0,ke-1);return x5(oe,Ge)},N=(Ne,Y,oe)=>{const ne=d?d(Ne,Y):[],Xe=Y==="start",ke=oe||(Xe?g.value:v.value),Ge=ke.hour();if(Ne!==Ge)return ne;const He=ke.minute(),qe=Xe?i(He+1,59):i(0,He-1);return x5(ne,qe)},H=(Ne,Y,oe,ne)=>{const Xe=f?f(Ne,Y,oe):[],ke=oe==="start",Ge=ne||(ke?g.value:v.value),He=Ge.hour(),qe=Ge.minute();if(Ne!==He||Y!==qe)return Xe;const tt=Ge.second(),pe=ke?i(tt+1,59):i(0,tt-1);return x5(Xe,pe)},q=([Ne,Y])=>[J(Ne,"start",!0,Y),J(Y,"end",!1,Ne)],{getAvailableHours:te,getAvailableMinutes:Q,getAvailableSeconds:ee}=OZ(O,N,H),{timePickerOptions:de,getAvailableTime:J,onSetOption:ue}=BZ({getAvailableHours:te,getAvailableMinutes:Q,getAvailableSeconds:ee}),Te=Ne=>Ne?Mt(Ne)?Ne.map(Y=>An(Y,t.format).locale(s.value)):An(Ne,t.format).locale(s.value):null,De=Ne=>Ne?Mt(Ne)?Ne.map(Y=>Y.format(t.format)):Ne.format(t.format):null,Le=()=>{if(Mt(h))return h.map(Y=>An(Y).locale(s.value));const Ne=An(h).locale(s.value);return[Ne,Ne.add(60,"m")]};return e("set-picker-option",["formatToString",De]),e("set-picker-option",["parseUserInput",Te]),e("set-picker-option",["isValidValue",M]),e("set-picker-option",["handleKeydownInput",z]),e("set-picker-option",["getDefaultValue",Le]),e("set-picker-option",["getRangeAvailableTime",q]),(Ne,Y)=>Ne.actualVisible?(W(),ve("div",{key:0,class:j([w(a).b("range-picker"),w(o).b("panel")])},[be("div",{class:j(w(a).be("range-picker","content"))},[be("div",{class:j(w(a).be("range-picker","cell"))},[be("div",{class:j(w(a).be("range-picker","header"))},Tt(w(r)("el.datepicker.startTime")),3),be("div",{class:j(w(p))},[_e(OD,{ref:"minSpinner",role:"start","show-seconds":w(b),"am-pm-mode":w(A),"arrow-control":w(c),"spinner-date":w(v),"disabled-hours":O,"disabled-minutes":N,"disabled-seconds":H,onChange:C,onSetOption:w(ue),onSelectRange:L},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),be("div",{class:j(w(a).be("range-picker","cell"))},[be("div",{class:j(w(a).be("range-picker","header"))},Tt(w(r)("el.datepicker.endTime")),3),be("div",{class:j(w(m))},[_e(OD,{ref:"maxSpinner",role:"end","show-seconds":w(b),"am-pm-mode":w(A),"arrow-control":w(c),"spinner-date":w(g),"disabled-hours":O,"disabled-minutes":N,"disabled-seconds":H,onChange:_,onSetOption:w(ue),onSelectRange:B},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),be("div",{class:j(w(a).be("panel","footer"))},[be("button",{type:"button",class:j([w(a).be("panel","btn"),"cancel"]),onClick:oe=>x()},Tt(w(r)("el.datepicker.cancel")),11,["onClick"]),be("button",{type:"button",class:j([w(a).be("panel","btn"),"confirm"]),disabled:w(E),onClick:oe=>S()},Tt(w(r)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):et("v-if",!0)}});var t3e=It(e3e,[["__file","panel-time-range.vue"]]);An.extend(bk);var n3e=Ie({name:"ElTimePicker",install:null,props:{...xk,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,e){const t=ae(),[i,r]=n.isRange?["timerange",t3e]:["time",bC],s=a=>e.emit("update:modelValue",a);return Qn("ElPopperOptions",n.popperOptions),e.expose({focus:()=>{var a;(a=t.value)==null||a.focus()},blur:()=>{var a;(a=t.value)==null||a.blur()},handleOpen:()=>{var a;(a=t.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=t.value)==null||a.handleClose()}}),()=>{var a;const o=(a=n.format)!=null?a:ND;return _e(FZ,Kn(n,{ref:t,type:i,format:o,"onUpdate:modelValue":s}),{default:l=>_e(r,l,null)})}}});const i3e=xn(n3e),SM=Symbol(),r3e=Et({...xk,type:{type:Ke(String),default:"date"}}),s3e=["date","dates","year","years","month","months","week","range"],Ak=Et({disabledDate:{type:Ke(Function)},date:{type:Ke(Object),required:!0},minDate:{type:Ke(Object)},maxDate:{type:Ke(Object)},parsedValue:{type:Ke([Object,Array])},rangeState:{type:Ke(Object),default:()=>({endDate:null,selecting:!1})}}),zZ=Et({type:{type:Ke(String),required:!0,values:uxe},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),wk=Et({unlinkPanels:Boolean,parsedValue:{type:Ke(Array)}}),Sk=n=>({type:String,values:s3e,default:n}),a3e=Et({...zZ,parsedValue:{type:Ke([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),A1=n=>{if(!Mt(n))return!1;const[e,t]=n;return An.isDayjs(e)&&An.isDayjs(t)&&An(e).isValid()&&An(t).isValid()&&e.isSameOrBefore(t)},_k=(n,{lang:e,unit:t,unlinkPanels:i})=>{let r;if(Mt(n)){let[s,a]=n.map(o=>An(o).locale(e));return i||(a=s.add(1,t)),[s,a]}else n?r=An(n):r=An();return r=r.locale(e),[r,r.add(1,t)]},o3e=(n,e,{columnIndexOffset:t,startDate:i,nextEndDate:r,now:s,unit:a,relativeDateGetter:o,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<n.row;u++){const d=e[u];for(let f=0;f<n.column;f++){let h=d[f+t];h||(h={row:u,column:f,type:"normal",inRange:!1,start:!1,end:!1});const p=u*n.column+f,m=o(p);h.dayjs=m,h.date=m.toDate(),h.timestamp=m.valueOf(),h.type="normal",h.inRange=!!(i&&m.isSameOrAfter(i,a)&&r&&m.isSameOrBefore(r,a))||!!(i&&m.isSameOrBefore(i,a)&&r&&m.isSameOrAfter(r,a)),i!=null&&i.isSameOrAfter(r)?(h.start=!!r&&m.isSame(r,a),h.end=i&&m.isSame(i,a)):(h.start=!!i&&m.isSame(i,a),h.end=!!r&&m.isSame(r,a)),m.isSame(s,a)&&(h.type="today"),l==null||l(h,{rowIndex:u,columnIndex:f}),d[f+t]=h}c==null||c(d)}},xC=(n,e,t)=>{const i=An().locale(t).startOf("month").month(e).year(n),r=i.daysInMonth();return zh(r).map(s=>i.add(s,"day").toDate())},ux=(n,e,t,i)=>{const r=An().year(n).month(e).startOf("month"),s=xC(n,e,t).find(a=>!(i!=null&&i(a)));return s?An(s).locale(t):r.locale(t)},UD=(n,e,t)=>{const i=n.year();if(!(t!=null&&t(n.toDate())))return n.locale(e);const r=n.month();if(!xC(i,r,e).every(t))return ux(i,r,e,t);for(let s=0;s<12;s++)if(!xC(i,s,e).every(t))return ux(i,s,e,t);return n},w1=(n,e,t)=>{if(Mt(n))return n.map(i=>w1(i,e,t));if(typeof n=="string"){const i=An(n);if(!i.isValid())return i}return An(n,e).locale(t)},l3e=Et({...Ak,cellClassName:{type:Ke(Function)},showWeekNumber:Boolean,selectionMode:Sk("date")}),c3e=["changerange","pick","select"],zD=(n="")=>["normal","today"].includes(n),u3e=(n,e)=>{const{lang:t}=ci(),i=ae(),r=ae(),s=ae(),a=ae(),o=ae([[],[],[],[],[],[]]);let l=!1;const c=n.date.$locale().weekStart||7,u=n.date.locale("en").localeData().weekdaysShort().map(N=>N.toLowerCase()),d=V(()=>c>3?7-c:-c),f=V(()=>{const N=n.date.startOf("month");return N.subtract(N.day()||7,"day")}),h=V(()=>u.concat(u).slice(c,c+7)),p=V(()=>M$(w(b)).some(N=>N.isCurrent)),m=V(()=>{const N=n.date.startOf("month"),H=N.day()||7,q=N.daysInMonth(),te=N.subtract(1,"month").daysInMonth();return{startOfMonthDay:H,dateCountOfMonth:q,dateCountOfLastMonth:te}}),v=V(()=>n.selectionMode==="dates"?mo(n.parsedValue):[]),g=(N,{count:H,rowIndex:q,columnIndex:te})=>{const{startOfMonthDay:Q,dateCountOfMonth:ee,dateCountOfLastMonth:de}=w(m),J=w(d);if(q>=0&&q<=1){const ue=Q+J<0?7+Q+J:Q+J;if(te+q*7>=ue)return N.text=H,!0;N.text=de-(ue-te%7)+1+q*7,N.type="prev-month"}else return H<=ee?N.text=H:(N.text=H-ee,N.type="next-month"),!0;return!1},y=(N,{columnIndex:H,rowIndex:q},te)=>{const{disabledDate:Q,cellClassName:ee}=n,de=w(v),J=g(N,{count:te,rowIndex:q,columnIndex:H}),ue=N.dayjs.toDate();return N.selected=de.find(Te=>Te.isSame(N.dayjs,"day")),N.isSelected=!!N.selected,N.isCurrent=S(N),N.disabled=Q==null?void 0:Q(ue),N.customClass=ee==null?void 0:ee(ue),J},x=N=>{if(n.selectionMode==="week"){const[H,q]=n.showWeekNumber?[1,7]:[0,6],te=O(N[H+1]);N[H].inRange=te,N[H].start=te,N[q].inRange=te,N[q].end=te}},b=V(()=>{const{minDate:N,maxDate:H,rangeState:q,showWeekNumber:te}=n,Q=w(d),ee=w(o),de="day";let J=1;if(te)for(let ue=0;ue<6;ue++)ee[ue][0]||(ee[ue][0]={type:"week",text:w(f).add(ue*7+1,de).week()});return o3e({row:6,column:7},ee,{startDate:N,columnIndexOffset:te?1:0,nextEndDate:q.endDate||H||q.selecting&&N||null,now:An().locale(w(t)).startOf(de),unit:de,relativeDateGetter:ue=>w(f).add(ue-Q,de),setCellMetadata:(...ue)=>{y(...ue,J)&&(J+=1)},setRowMetadata:x}),ee});pt(()=>n.date,async()=>{var N;(N=w(i))!=null&&N.contains(document.activeElement)&&(await Yt(),await A())});const A=async()=>{var N;return(N=w(r))==null?void 0:N.focus()},S=N=>n.selectionMode==="date"&&zD(N.type)&&C(N,n.parsedValue),C=(N,H)=>H?An(H).locale(w(t)).isSame(n.date.date(Number(N.text)),"day"):!1,_=(N,H)=>{const q=N*7+(H-(n.showWeekNumber?1:0))-w(d);return w(f).add(q,"day")},M=N=>{var H;if(!n.rangeState.selecting)return;let q=N.target;if(q.tagName==="SPAN"&&(q=(H=q.parentNode)==null?void 0:H.parentNode),q.tagName==="DIV"&&(q=q.parentNode),q.tagName!=="TD")return;const te=q.parentNode.rowIndex-1,Q=q.cellIndex;w(b)[te][Q].disabled||(te!==w(s)||Q!==w(a))&&(s.value=te,a.value=Q,e("changerange",{selecting:!0,endDate:_(te,Q)}))},T=N=>!w(p)&&(N==null?void 0:N.text)===1&&N.type==="normal"||N.isCurrent,E=N=>{l||w(p)||n.selectionMode!=="date"||z(N,!0)},I=N=>{N.target.closest("td")&&(l=!0)},L=N=>{N.target.closest("td")&&(l=!1)},F=N=>{!n.rangeState.selecting||!n.minDate?(e("pick",{minDate:N,maxDate:null}),e("select",!0)):(N>=n.minDate?e("pick",{minDate:n.minDate,maxDate:N}):e("pick",{minDate:N,maxDate:n.minDate}),e("select",!1))},B=N=>{const H=N.week(),q=`${N.year()}w${H}`;e("pick",{year:N.year(),week:H,value:q,date:N.startOf("week")})},P=(N,H)=>{const q=H?mo(n.parsedValue).filter(te=>(te==null?void 0:te.valueOf())!==N.valueOf()):mo(n.parsedValue).concat([N]);e("pick",q)},z=(N,H=!1)=>{const q=N.target.closest("td");if(!q)return;const te=q.parentNode.rowIndex-1,Q=q.cellIndex,ee=w(b)[te][Q];if(ee.disabled||ee.type==="week")return;const de=_(te,Q);switch(n.selectionMode){case"range":{F(de);break}case"date":{e("pick",de,H);break}case"week":{B(de);break}case"dates":{P(de,!!ee.selected);break}}},O=N=>{if(n.selectionMode!=="week")return!1;let H=n.date.startOf("day");if(N.type==="prev-month"&&(H=H.subtract(1,"month")),N.type==="next-month"&&(H=H.add(1,"month")),H=H.date(Number.parseInt(N.text,10)),n.parsedValue&&!Mt(n.parsedValue)){const q=(n.parsedValue.day()-c+7)%7-1;return n.parsedValue.subtract(q,"day").isSame(H,"day")}return!1};return{WEEKS:h,rows:b,tbodyRef:i,currentCellRef:r,focus:A,isCurrent:S,isWeekActive:O,isSelectedCell:T,handlePickDate:z,handleMouseUp:L,handleMouseDown:I,handleMouseMove:M,handleFocus:E}},d3e=(n,{isCurrent:e,isWeekActive:t})=>{const i=St("date-table"),{t:r}=ci(),s=V(()=>[i.b(),{"is-week-mode":n.selectionMode==="week"}]),a=V(()=>r("el.datepicker.dateTablePrompt")),o=V(()=>r("el.datepicker.week"));return{tableKls:s,tableLabel:a,weekLabel:o,getCellClasses:u=>{const d=[];return zD(u.type)&&!u.disabled?(d.push("available"),u.type==="today"&&d.push("today")):d.push(u.type),e(u)&&d.push("current"),u.inRange&&(zD(u.type)||n.selectionMode==="week")&&(d.push("in-range"),u.start&&d.push("start-date"),u.end&&d.push("end-date")),u.disabled&&d.push("disabled"),u.selected&&d.push("selected"),u.customClass&&d.push(u.customClass),d.join(" ")},getRowKls:u=>[i.e("row"),{current:t(u)}],t:r}},f3e=Et({cell:{type:Ke(Object)}});var Ck=Ie({name:"ElDatePickerCell",props:f3e,setup(n){const e=St("date-table-cell"),{slots:t}=Nt(SM);return()=>{const{cell:i}=n;return Qe(t,"default",{...i},()=>{var r;return[_e("div",{class:e.b()},[_e("span",{class:e.e("text")},[(r=i==null?void 0:i.renderText)!=null?r:i==null?void 0:i.text])])]})}}});const h3e=Ie({__name:"basic-date-table",props:l3e,emits:c3e,setup(n,{expose:e,emit:t}){const i=n,{WEEKS:r,rows:s,tbodyRef:a,currentCellRef:o,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:d,handlePickDate:f,handleMouseUp:h,handleMouseDown:p,handleMouseMove:m,handleFocus:v}=u3e(i,t),{tableLabel:g,tableKls:y,weekLabel:x,getCellClasses:b,getRowKls:A,t:S}=d3e(i,{isCurrent:c,isWeekActive:u});return e({focus:l}),(C,_)=>(W(),ve("table",{"aria-label":w(g),class:j(w(y)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:w(f),onMousemove:w(m),onMousedown:ln(w(p),["prevent"]),onMouseup:w(h)},[be("tbody",{ref_key:"tbodyRef",ref:a},[be("tr",null,[C.showWeekNumber?(W(),ve("th",{key:0,scope:"col"},Tt(w(x)),1)):et("v-if",!0),(W(!0),ve(Kt,null,Jn(w(r),(M,T)=>(W(),ve("th",{key:T,"aria-label":w(S)("el.datepicker.weeksFull."+M),scope:"col"},Tt(w(S)("el.datepicker.weeks."+M)),9,["aria-label"]))),128))]),(W(!0),ve(Kt,null,Jn(w(s),(M,T)=>(W(),ve("tr",{key:T,class:j(w(A)(M[1]))},[(W(!0),ve(Kt,null,Jn(M,(E,I)=>(W(),ve("td",{key:`${T}.${I}`,ref_for:!0,ref:L=>w(d)(E)&&(o.value=L),class:j(w(b)(E)),"aria-current":E.isCurrent?"date":void 0,"aria-selected":E.isCurrent,tabindex:w(d)(E)?0:-1,onFocus:w(v)},[_e(w(Ck),{cell:E},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var VD=It(h3e,[["__file","basic-date-table.vue"]]);const p3e=Et({...Ak,selectionMode:Sk("month")}),m3e=Ie({__name:"basic-month-table",props:p3e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const i=n,r=St("month-table"),{t:s,lang:a}=ci(),o=ae(),l=ae(),c=ae(i.date.locale("en").localeData().monthsShort().map(x=>x.toLowerCase())),u=ae([[],[],[]]),d=ae(),f=ae(),h=V(()=>{var x,b;const A=u.value,S=An().locale(a.value).startOf("month");for(let C=0;C<3;C++){const _=A[C];for(let M=0;M<4;M++){const T=_[M]||(_[M]={row:C,column:M,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});T.type="normal";const E=C*4+M,I=i.date.startOf("year").month(E),L=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;T.inRange=!!(i.minDate&&I.isSameOrAfter(i.minDate,"month")&&L&&I.isSameOrBefore(L,"month"))||!!(i.minDate&&I.isSameOrBefore(i.minDate,"month")&&L&&I.isSameOrAfter(L,"month")),(x=i.minDate)!=null&&x.isSameOrAfter(L)?(T.start=!!(L&&I.isSame(L,"month")),T.end=i.minDate&&I.isSame(i.minDate,"month")):(T.start=!!(i.minDate&&I.isSame(i.minDate,"month")),T.end=!!(L&&I.isSame(L,"month"))),S.isSame(I)&&(T.type="today"),T.text=E,T.disabled=((b=i.disabledDate)==null?void 0:b.call(i,I.toDate()))||!1}}return A}),p=()=>{var x;(x=l.value)==null||x.focus()},m=x=>{const b={},A=i.date.year(),S=new Date,C=x.text;return b.disabled=i.disabledDate?xC(A,C,a.value).every(i.disabledDate):!1,b.current=mo(i.parsedValue).findIndex(_=>An.isDayjs(_)&&_.year()===A&&_.month()===C)>=0,b.today=S.getFullYear()===A&&S.getMonth()===C,x.inRange&&(b["in-range"]=!0,x.start&&(b["start-date"]=!0),x.end&&(b["end-date"]=!0)),b},v=x=>{const b=i.date.year(),A=x.text;return mo(i.date).findIndex(S=>S.year()===b&&S.month()===A)>=0},g=x=>{var b;if(!i.rangeState.selecting)return;let A=x.target;if(A.tagName==="SPAN"&&(A=(b=A.parentNode)==null?void 0:b.parentNode),A.tagName==="DIV"&&(A=A.parentNode),A.tagName!=="TD")return;const S=A.parentNode.rowIndex,C=A.cellIndex;h.value[S][C].disabled||(S!==d.value||C!==f.value)&&(d.value=S,f.value=C,t("changerange",{selecting:!0,endDate:i.date.startOf("year").month(S*4+C)}))},y=x=>{var b;const A=(b=x.target)==null?void 0:b.closest("td");if((A==null?void 0:A.tagName)!=="TD"||qo(A,"disabled"))return;const S=A.cellIndex,_=A.parentNode.rowIndex*4+S,M=i.date.startOf("year").month(_);if(i.selectionMode==="months"){if(x.type==="keydown"){t("pick",mo(i.parsedValue),!1);return}const T=ux(i.date.year(),_,a.value,i.disabledDate),E=qo(A,"current")?mo(i.parsedValue).filter(I=>(I==null?void 0:I.year())!==T.year()||(I==null?void 0:I.month())!==T.month()):mo(i.parsedValue).concat([An(T)]);t("pick",E)}else i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&M>=i.minDate?t("pick",{minDate:i.minDate,maxDate:M}):t("pick",{minDate:M,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:M,maxDate:null}),t("select",!0)):t("pick",_)};return pt(()=>i.date,async()=>{var x,b;(x=o.value)!=null&&x.contains(document.activeElement)&&(await Yt(),(b=l.value)==null||b.focus())}),e({focus:p}),(x,b)=>(W(),ve("table",{role:"grid","aria-label":w(s)("el.datepicker.monthTablePrompt"),class:j(w(r).b()),onClick:y,onMousemove:g},[be("tbody",{ref_key:"tbodyRef",ref:o},[(W(!0),ve(Kt,null,Jn(w(h),(A,S)=>(W(),ve("tr",{key:S},[(W(!0),ve(Kt,null,Jn(A,(C,_)=>(W(),ve("td",{key:_,ref_for:!0,ref:M=>v(C)&&(l.value=M),class:j(m(C)),"aria-selected":`${v(C)}`,"aria-label":w(s)(`el.datepicker.month${+C.text+1}`),tabindex:v(C)?0:-1,onKeydown:[Xi(ln(y,["prevent","stop"]),["space"]),Xi(ln(y,["prevent","stop"]),["enter"])]},[_e(w(Ck),{cell:{...C,renderText:w(s)("el.datepicker.months."+c.value[C.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var HD=It(m3e,[["__file","basic-month-table.vue"]]);const v3e=Et({...Ak,selectionMode:Sk("year")}),g3e=Ie({__name:"basic-year-table",props:v3e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const i=n,r=(b,A)=>{const S=An(String(b)).locale(A).startOf("year"),_=S.endOf("year").dayOfYear();return zh(_).map(M=>S.add(M,"day").toDate())},s=St("year-table"),{t:a,lang:o}=ci(),l=ae(),c=ae(),u=V(()=>Math.floor(i.date.year()/10)*10),d=ae([[],[],[]]),f=ae(),h=ae(),p=V(()=>{var b;const A=d.value,S=An().locale(o.value).startOf("year");for(let C=0;C<3;C++){const _=A[C];for(let M=0;M<4&&!(C*4+M>=10);M++){let T=_[M];T||(T={row:C,column:M,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),T.type="normal";const E=C*4+M+u.value,I=An().year(E),L=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;T.inRange=!!(i.minDate&&I.isSameOrAfter(i.minDate,"year")&&L&&I.isSameOrBefore(L,"year"))||!!(i.minDate&&I.isSameOrBefore(i.minDate,"year")&&L&&I.isSameOrAfter(L,"year")),(b=i.minDate)!=null&&b.isSameOrAfter(L)?(T.start=!!(L&&I.isSame(L,"year")),T.end=!!(i.minDate&&I.isSame(i.minDate,"year"))):(T.start=!!(i.minDate&&I.isSame(i.minDate,"year")),T.end=!!(L&&I.isSame(L,"year"))),S.isSame(I)&&(T.type="today"),T.text=E;const B=I.toDate();T.disabled=i.disabledDate&&i.disabledDate(B)||!1,_[M]=T}}return A}),m=()=>{var b;(b=c.value)==null||b.focus()},v=b=>{const A={},S=An().locale(o.value),C=b.text;return A.disabled=i.disabledDate?r(C,o.value).every(i.disabledDate):!1,A.today=S.year()===C,A.current=mo(i.parsedValue).findIndex(_=>_.year()===C)>=0,b.inRange&&(A["in-range"]=!0,b.start&&(A["start-date"]=!0),b.end&&(A["end-date"]=!0)),A},g=b=>{const A=b.text;return mo(i.date).findIndex(S=>S.year()===A)>=0},y=b=>{var A;const S=(A=b.target)==null?void 0:A.closest("td");if(!S||!S.textContent||qo(S,"disabled"))return;const C=S.cellIndex,M=S.parentNode.rowIndex*4+C+u.value,T=An().year(M);if(i.selectionMode==="range")i.rangeState.selecting?(i.minDate&&T>=i.minDate?t("pick",{minDate:i.minDate,maxDate:T}):t("pick",{minDate:T,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:T,maxDate:null}),t("select",!0));else if(i.selectionMode==="years"){if(b.type==="keydown"){t("pick",mo(i.parsedValue),!1);return}const E=UD(T.startOf("year"),o.value,i.disabledDate),I=qo(S,"current")?mo(i.parsedValue).filter(L=>(L==null?void 0:L.year())!==M):mo(i.parsedValue).concat([E]);t("pick",I)}else t("pick",M)},x=b=>{var A;if(!i.rangeState.selecting)return;const S=(A=b.target)==null?void 0:A.closest("td");if(!S)return;const C=S.parentNode.rowIndex,_=S.cellIndex;p.value[C][_].disabled||(C!==f.value||_!==h.value)&&(f.value=C,h.value=_,t("changerange",{selecting:!0,endDate:An().year(u.value).add(C*4+_,"year")}))};return pt(()=>i.date,async()=>{var b,A;(b=l.value)!=null&&b.contains(document.activeElement)&&(await Yt(),(A=c.value)==null||A.focus())}),e({focus:m}),(b,A)=>(W(),ve("table",{role:"grid","aria-label":w(a)("el.datepicker.yearTablePrompt"),class:j(w(s).b()),onClick:y,onMousemove:x},[be("tbody",{ref_key:"tbodyRef",ref:l},[(W(!0),ve(Kt,null,Jn(w(p),(S,C)=>(W(),ve("tr",{key:C},[(W(!0),ve(Kt,null,Jn(S,(_,M)=>(W(),ve("td",{key:`${C}_${M}`,ref_for:!0,ref:T=>g(_)&&(c.value=T),class:j(["available",v(_)]),"aria-selected":g(_),"aria-label":String(_.text),tabindex:g(_)?0:-1,onKeydown:[Xi(ln(y,["prevent","stop"]),["space"]),Xi(ln(y,["prevent","stop"]),["enter"])]},[_e(w(Ck),{cell:_},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var GD=It(g3e,[["__file","basic-year-table.vue"]]);const y3e=Ie({__name:"panel-date-pick",props:a3e,emits:["pick","set-picker-option","panel-change"],setup(n,{emit:e}){const t=n,i=(le,fe,Me)=>!0,r=St("picker-panel"),s=St("date-picker"),a=Cf(),o=Ps(),{t:l,lang:c}=ci(),u=Nt("EP_PICKER_BASE"),d=Nt(AM),{shortcuts:f,disabledDate:h,cellClassName:p,defaultTime:m}=u.props,v=Ii(u.props,"defaultValue"),g=ae(),y=ae(An().locale(c.value)),x=ae(!1);let b=!1;const A=V(()=>An(m).locale(c.value)),S=V(()=>y.value.month()),C=V(()=>y.value.year()),_=ae([]),M=ae(null),T=ae(null),E=le=>_.value.length>0?i(le,_.value,t.format||"HH:mm:ss"):!0,I=le=>m&&!Xe.value&&!x.value&&!b?A.value.year(le.year()).month(le.month()).date(le.date()):ue.value?le.millisecond(0):le.startOf("day"),L=(le,...fe)=>{if(!le)e("pick",le,...fe);else if(Mt(le)){const Me=le.map(I);e("pick",Me,...fe)}else e("pick",I(le),...fe);M.value=null,T.value=null,x.value=!1,b=!1},F=async(le,fe)=>{if(H.value==="date"){le=le;let Me=t.parsedValue?t.parsedValue.year(le.year()).month(le.month()).date(le.date()):le;E(Me)||(Me=_.value[0][0].year(le.year()).month(le.month()).date(le.date())),y.value=Me,L(Me,ue.value||fe),t.type==="datetime"&&(await Yt(),At())}else H.value==="week"?L(le.date):H.value==="dates"&&L(le,!0)},B=le=>{const fe=le?"add":"subtract";y.value=y.value[fe](1,"month"),$("month")},P=le=>{const fe=y.value,Me=le?"add":"subtract";y.value=z.value==="year"?fe[Me](10,"year"):fe[Me](1,"year"),$("year")},z=ae("date"),O=V(()=>{const le=l("el.datepicker.year");if(z.value==="year"){const fe=Math.floor(C.value/10)*10;return le?`${fe} ${le} - ${fe+9} ${le}`:`${fe} - ${fe+9}`}return`${C.value} ${le}`}),N=le=>{const fe=Xt(le.value)?le.value():le.value;if(fe){b=!0,L(An(fe).locale(c.value));return}le.onClick&&le.onClick({attrs:a,slots:o,emit:e})},H=V(()=>{const{type:le}=t;return["week","month","months","year","years","dates"].includes(le)?le:"date"}),q=V(()=>H.value==="dates"||H.value==="months"||H.value==="years"),te=V(()=>H.value==="date"?z.value:H.value),Q=V(()=>!!f.length),ee=async(le,fe)=>{H.value==="month"?(y.value=ux(y.value.year(),le,c.value,h),L(y.value,!1)):H.value==="months"?L(le,fe??!0):(y.value=ux(y.value.year(),le,c.value,h),z.value="date",["month","year","date","week"].includes(H.value)&&(L(y.value,!0),await Yt(),At())),$("month")},de=async(le,fe)=>{if(H.value==="year"){const Me=y.value.startOf("year").year(le);y.value=UD(Me,c.value,h),L(y.value,!1)}else if(H.value==="years")L(le,fe??!0);else{const Me=y.value.year(le);y.value=UD(Me,c.value,h),z.value="month",["month","year","date","week"].includes(H.value)&&(L(y.value,!0),await Yt(),At())}$("year")},J=async le=>{z.value=le,await Yt(),At()},ue=V(()=>t.type==="datetime"||t.type==="datetimerange"),Te=V(()=>{const le=ue.value||H.value==="dates",fe=H.value==="years",Me=H.value==="months",me=z.value==="date",Ae=z.value==="year",dt=z.value==="month";return le&&me||fe&&Ae||Me&&dt}),De=V(()=>h?t.parsedValue?Mt(t.parsedValue)?h(t.parsedValue[0].toDate()):h(t.parsedValue.toDate()):!0:!1),Le=()=>{if(q.value)L(t.parsedValue);else{let le=t.parsedValue;if(!le){const fe=An(m).locale(c.value),Me=bt();le=fe.year(Me.year()).month(Me.month()).date(Me.date())}y.value=le,L(le)}},Ne=V(()=>h?h(An().locale(c.value).toDate()):!1),Y=()=>{const fe=An().locale(c.value).toDate();x.value=!0,(!h||!h(fe))&&E(fe)&&(y.value=An().locale(c.value),L(y.value))},oe=V(()=>t.timeFormat||aZ(t.format)),ne=V(()=>t.dateFormat||sZ(t.format)),Xe=V(()=>{if(T.value)return T.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||y.value).format(oe.value)}),ke=V(()=>{if(M.value)return M.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||y.value).format(ne.value)}),Ge=ae(!1),He=()=>{Ge.value=!0},qe=()=>{Ge.value=!1},tt=le=>({hour:le.hour(),minute:le.minute(),second:le.second(),year:le.year(),month:le.month(),date:le.date()}),pe=(le,fe,Me)=>{const{hour:me,minute:Ae,second:dt}=tt(le),we=t.parsedValue?t.parsedValue.hour(me).minute(Ae).second(dt):le;y.value=we,L(y.value,!0),Me||(Ge.value=fe)},G=le=>{const fe=An(le,oe.value).locale(c.value);if(fe.isValid()&&E(fe)){const{year:Me,month:me,date:Ae}=tt(y.value);y.value=fe.year(Me).month(me).date(Ae),T.value=null,Ge.value=!1,L(y.value,!0)}},Z=le=>{const fe=w1(le,ne.value,c.value);if(fe.isValid()){if(h&&h(fe.toDate()))return;const{hour:Me,minute:me,second:Ae}=tt(y.value);y.value=fe.hour(Me).minute(me).second(Ae),M.value=null,L(y.value,!0)}},ge=le=>An.isDayjs(le)&&le.isValid()&&(h?!h(le.toDate()):!0),Oe=le=>Mt(le)?le.map(fe=>fe.format(t.format)):le.format(t.format),je=le=>w1(le,t.format,c.value),bt=()=>{const le=An(v.value).locale(c.value);if(!v.value){const fe=A.value;return An().hour(fe.hour()).minute(fe.minute()).second(fe.second()).locale(c.value)}return le},At=()=>{var le;["week","month","year","date"].includes(H.value)&&((le=g.value)==null||le.focus())},Ee=()=>{At(),H.value==="week"&&lt(kt.down)},gt=le=>{const{code:fe}=le;[kt.up,kt.down,kt.left,kt.right,kt.home,kt.end,kt.pageUp,kt.pageDown].includes(fe)&&(lt(fe),le.stopPropagation(),le.preventDefault()),[kt.enter,kt.space,kt.numpadEnter].includes(fe)&&M.value===null&&T.value===null&&(le.preventDefault(),L(y.value,!1))},lt=le=>{var fe;const{up:Me,down:me,left:Ae,right:dt,home:we,end:_t,pageUp:it,pageDown:wt}=kt,Ft={year:{[Me]:-4,[me]:4,[Ae]:-1,[dt]:1,offset:(Wt,hn)=>Wt.setFullYear(Wt.getFullYear()+hn)},month:{[Me]:-4,[me]:4,[Ae]:-1,[dt]:1,offset:(Wt,hn)=>Wt.setMonth(Wt.getMonth()+hn)},week:{[Me]:-1,[me]:1,[Ae]:-1,[dt]:1,offset:(Wt,hn)=>Wt.setDate(Wt.getDate()+hn*7)},date:{[Me]:-7,[me]:7,[Ae]:-1,[dt]:1,[we]:Wt=>-Wt.getDay(),[_t]:Wt=>-Wt.getDay()+6,[it]:Wt=>-new Date(Wt.getFullYear(),Wt.getMonth(),0).getDate(),[wt]:Wt=>new Date(Wt.getFullYear(),Wt.getMonth()+1,0).getDate(),offset:(Wt,hn)=>Wt.setDate(Wt.getDate()+hn)}},Rt=y.value.toDate();for(;Math.abs(y.value.diff(Rt,"year",!0))<1;){const Wt=Ft[te.value];if(!Wt)return;if(Wt.offset(Rt,Xt(Wt[le])?Wt[le](Rt):(fe=Wt[le])!=null?fe:0),h&&h(Rt))break;const hn=An(Rt).locale(c.value);y.value=hn,e("pick",hn,!0);break}},$=le=>{e("panel-change",y.value.toDate(),le,z.value)};return pt(()=>H.value,le=>{if(["month","year"].includes(le)){z.value=le;return}else if(le==="years"){z.value="year";return}else if(le==="months"){z.value="month";return}z.value="date"},{immediate:!0}),pt(()=>z.value,()=>{d==null||d.updatePopper()}),pt(()=>v.value,le=>{le&&(y.value=bt())},{immediate:!0}),pt(()=>t.parsedValue,le=>{if(le){if(q.value||Mt(le))return;y.value=le}else y.value=bt()},{immediate:!0}),e("set-picker-option",["isValidValue",ge]),e("set-picker-option",["formatToString",Oe]),e("set-picker-option",["parseUserInput",je]),e("set-picker-option",["handleFocusPicker",Ee]),(le,fe)=>(W(),ve("div",{class:j([w(r).b(),w(s).b(),{"has-sidebar":le.$slots.sidebar||w(Q),"has-time":w(ue)}])},[be("div",{class:j(w(r).e("body-wrapper"))},[Qe(le.$slots,"sidebar",{class:j(w(r).e("sidebar"))}),w(Q)?(W(),ve("div",{key:0,class:j(w(r).e("sidebar"))},[(W(!0),ve(Kt,null,Jn(w(f),(Me,me)=>(W(),ve("button",{key:me,type:"button",class:j(w(r).e("shortcut")),onClick:Ae=>N(Me)},Tt(Me.text),11,["onClick"]))),128))],2)):et("v-if",!0),be("div",{class:j(w(r).e("body"))},[w(ue)?(W(),ve("div",{key:0,class:j(w(s).e("time-header"))},[be("span",{class:j(w(s).e("editor-wrap"))},[_e(w(Qa),{placeholder:w(l)("el.datepicker.selectDate"),"model-value":w(ke),size:"small","validate-event":!1,onInput:Me=>M.value=Me,onChange:Z},null,8,["placeholder","model-value","onInput"])],2),Cn((W(),ve("span",{class:j(w(s).e("editor-wrap"))},[_e(w(Qa),{placeholder:w(l)("el.datepicker.selectTime"),"model-value":w(Xe),size:"small","validate-event":!1,onFocus:He,onInput:Me=>T.value=Me,onChange:G},null,8,["placeholder","model-value","onInput"]),_e(w(bC),{visible:Ge.value,format:w(oe),"parsed-value":y.value,onPick:pe},null,8,["visible","format","parsed-value"])],2)),[[w(pf),qe]])],2)):et("v-if",!0),Cn(be("div",{class:j([w(s).e("header"),(z.value==="year"||z.value==="month")&&w(s).e("header--bordered")])},[be("span",{class:j(w(s).e("prev-btn"))},[be("button",{type:"button","aria-label":w(l)("el.datepicker.prevYear"),class:j(["d-arrow-left",w(r).e("icon-btn")]),onClick:Me=>P(!1)},[Qe(le.$slots,"prev-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(ip))]),_:1})])],10,["aria-label","onClick"]),Cn(be("button",{type:"button","aria-label":w(l)("el.datepicker.prevMonth"),class:j([w(r).e("icon-btn"),"arrow-left"]),onClick:Me=>B(!1)},[Qe(le.$slots,"prev-month",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(np))]),_:1})])],10,["aria-label","onClick"]),[[yi,z.value==="date"]])],2),be("span",{role:"button",class:j(w(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Xi(Me=>J("year"),["enter"]),onClick:Me=>J("year")},Tt(w(O)),43,["onKeydown","onClick"]),Cn(be("span",{role:"button","aria-live":"polite",tabindex:"0",class:j([w(s).e("header-label"),{active:z.value==="month"}]),onKeydown:Xi(Me=>J("month"),["enter"]),onClick:Me=>J("month")},Tt(w(l)(`el.datepicker.month${w(S)+1}`)),43,["onKeydown","onClick"]),[[yi,z.value==="date"]]),be("span",{class:j(w(s).e("next-btn"))},[Cn(be("button",{type:"button","aria-label":w(l)("el.datepicker.nextMonth"),class:j([w(r).e("icon-btn"),"arrow-right"]),onClick:Me=>B(!0)},[Qe(le.$slots,"next-month",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(xo))]),_:1})])],10,["aria-label","onClick"]),[[yi,z.value==="date"]]),be("button",{type:"button","aria-label":w(l)("el.datepicker.nextYear"),class:j([w(r).e("icon-btn"),"d-arrow-right"]),onClick:Me=>P(!0)},[Qe(le.$slots,"next-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(rp))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[yi,z.value!=="time"]]),be("div",{class:j(w(r).e("content")),onKeydown:gt},[z.value==="date"?(W(),rt(VD,{key:0,ref_key:"currentViewRef",ref:g,"selection-mode":w(H),date:y.value,"parsed-value":le.parsedValue,"disabled-date":w(h),"cell-class-name":w(p),onPick:F},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):et("v-if",!0),z.value==="year"?(W(),rt(GD,{key:1,ref_key:"currentViewRef",ref:g,"selection-mode":w(H),date:y.value,"disabled-date":w(h),"parsed-value":le.parsedValue,onPick:de},null,8,["selection-mode","date","disabled-date","parsed-value"])):et("v-if",!0),z.value==="month"?(W(),rt(HD,{key:2,ref_key:"currentViewRef",ref:g,"selection-mode":w(H),date:y.value,"parsed-value":le.parsedValue,"disabled-date":w(h),onPick:ee},null,8,["selection-mode","date","parsed-value","disabled-date"])):et("v-if",!0)],34)],2)],2),Cn(be("div",{class:j(w(r).e("footer"))},[Cn(_e(w(ea),{text:"",size:"small",class:j(w(r).e("link-btn")),disabled:w(Ne),onClick:Y},{default:Re(()=>[Hn(Tt(w(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[yi,!w(q)&&le.showNow]]),_e(w(ea),{plain:"",size:"small",class:j(w(r).e("link-btn")),disabled:w(De),onClick:Le},{default:Re(()=>[Hn(Tt(w(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[yi,w(Te)]])],2))}});var b3e=It(y3e,[["__file","panel-date-pick.vue"]]);const x3e=Et({...zZ,...wk,visible:Boolean}),VZ=n=>{const{emit:e}=Nn(),t=Cf(),i=Ps();return s=>{const a=Xt(s.value)?s.value():s.value;if(a){e("pick",[An(a[0]).locale(n.value),An(a[1]).locale(n.value)]);return}s.onClick&&s.onClick({attrs:t,slots:i,emit:e})}},HZ=(n,{defaultValue:e,leftDate:t,rightDate:i,unit:r,onParsedValueChanged:s})=>{const{emit:a}=Nn(),{pickerNs:o}=Nt(SM),l=St("date-range-picker"),{t:c,lang:u}=ci(),d=VZ(u),f=ae(),h=ae(),p=ae({endDate:null,selecting:!1}),m=b=>{p.value=b},v=(b=!1)=>{const A=w(f),S=w(h);A1([A,S])&&a("pick",[A,S],b)},g=b=>{p.value.selecting=b,b||(p.value.endDate=null)},y=b=>{if(Mt(b)&&b.length===2){const[A,S]=b;f.value=A,t.value=A,h.value=S,s(w(f),w(h))}else x()},x=()=>{const[b,A]=_k(w(e),{lang:w(u),unit:r,unlinkPanels:n.unlinkPanels});f.value=void 0,h.value=void 0,t.value=b,i.value=A};return pt(e,b=>{b&&x()},{immediate:!0}),pt(()=>n.parsedValue,y,{immediate:!0}),{minDate:f,maxDate:h,rangeState:p,lang:u,ppNs:o,drpNs:l,handleChangeRange:m,handleRangeConfirm:v,handleShortcutClick:d,onSelect:g,onReset:y,t:c}},mw="month",A3e=Ie({__name:"panel-date-range",props:x3e,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(n,{emit:e}){const t=n,i=Nt("EP_PICKER_BASE"),{disabledDate:r,cellClassName:s,defaultTime:a,clearable:o}=i.props,l=Ii(i.props,"format"),c=Ii(i.props,"shortcuts"),u=Ii(i.props,"defaultValue"),{lang:d}=ci(),f=ae(An().locale(d.value)),h=ae(An().locale(d.value).add(1,mw)),{minDate:p,maxDate:m,rangeState:v,ppNs:g,drpNs:y,handleChangeRange:x,handleRangeConfirm:b,handleShortcutClick:A,onSelect:S,onReset:C,t:_}=HZ(t,{defaultValue:u,leftDate:f,rightDate:h,unit:mw,onParsedValueChanged:le});pt(()=>t.visible,fe=>{!fe&&v.value.selecting&&(C(t.parsedValue),S(!1))});const M=ae({min:null,max:null}),T=ae({min:null,max:null}),E=V(()=>`${f.value.year()} ${_("el.datepicker.year")} ${_(`el.datepicker.month${f.value.month()+1}`)}`),I=V(()=>`${h.value.year()} ${_("el.datepicker.year")} ${_(`el.datepicker.month${h.value.month()+1}`)}`),L=V(()=>f.value.year()),F=V(()=>f.value.month()),B=V(()=>h.value.year()),P=V(()=>h.value.month()),z=V(()=>!!c.value.length),O=V(()=>M.value.min!==null?M.value.min:p.value?p.value.format(Q.value):""),N=V(()=>M.value.max!==null?M.value.max:m.value||p.value?(m.value||p.value).format(Q.value):""),H=V(()=>T.value.min!==null?T.value.min:p.value?p.value.format(te.value):""),q=V(()=>T.value.max!==null?T.value.max:m.value||p.value?(m.value||p.value).format(te.value):""),te=V(()=>t.timeFormat||aZ(l.value)),Q=V(()=>t.dateFormat||sZ(l.value)),ee=fe=>A1(fe)&&(r?!r(fe[0].toDate())&&!r(fe[1].toDate()):!0),de=()=>{f.value=f.value.subtract(1,"year"),t.unlinkPanels||(h.value=f.value.add(1,"month")),oe("year")},J=()=>{f.value=f.value.subtract(1,"month"),t.unlinkPanels||(h.value=f.value.add(1,"month")),oe("month")},ue=()=>{t.unlinkPanels?h.value=h.value.add(1,"year"):(f.value=f.value.add(1,"year"),h.value=f.value.add(1,"month")),oe("year")},Te=()=>{t.unlinkPanels?h.value=h.value.add(1,"month"):(f.value=f.value.add(1,"month"),h.value=f.value.add(1,"month")),oe("month")},De=()=>{f.value=f.value.add(1,"year"),oe("year")},Le=()=>{f.value=f.value.add(1,"month"),oe("month")},Ne=()=>{h.value=h.value.subtract(1,"year"),oe("year")},Y=()=>{h.value=h.value.subtract(1,"month"),oe("month")},oe=fe=>{e("panel-change",[f.value.toDate(),h.value.toDate()],fe)},ne=V(()=>{const fe=(F.value+1)%12,Me=F.value+1>=12?1:0;return t.unlinkPanels&&new Date(L.value+Me,fe)<new Date(B.value,P.value)}),Xe=V(()=>t.unlinkPanels&&B.value*12+P.value-(L.value*12+F.value+1)>=12),ke=V(()=>!(p.value&&m.value&&!v.value.selecting&&A1([p.value,m.value]))),Ge=V(()=>t.type==="datetime"||t.type==="datetimerange"),He=(fe,Me)=>{if(fe)return a?An(a[Me]||a).locale(d.value).year(fe.year()).month(fe.month()).date(fe.date()):fe},qe=(fe,Me=!0)=>{const me=fe.minDate,Ae=fe.maxDate,dt=He(me,0),we=He(Ae,1);m.value===we&&p.value===dt||(e("calendar-change",[me.toDate(),Ae&&Ae.toDate()]),m.value=we,p.value=dt,!(!Me||Ge.value)&&b())},tt=ae(!1),pe=ae(!1),G=()=>{tt.value=!1},Z=()=>{pe.value=!1},ge=(fe,Me)=>{M.value[Me]=fe;const me=An(fe,Q.value).locale(d.value);if(me.isValid()){if(r&&r(me.toDate()))return;Me==="min"?(f.value=me,p.value=(p.value||f.value).year(me.year()).month(me.month()).date(me.date()),!t.unlinkPanels&&(!m.value||m.value.isBefore(p.value))&&(h.value=me.add(1,"month"),m.value=p.value.add(1,"month"))):(h.value=me,m.value=(m.value||h.value).year(me.year()).month(me.month()).date(me.date()),!t.unlinkPanels&&(!p.value||p.value.isAfter(m.value))&&(f.value=me.subtract(1,"month"),p.value=m.value.subtract(1,"month")))}},Oe=(fe,Me)=>{M.value[Me]=null},je=(fe,Me)=>{T.value[Me]=fe;const me=An(fe,te.value).locale(d.value);me.isValid()&&(Me==="min"?(tt.value=!0,p.value=(p.value||f.value).hour(me.hour()).minute(me.minute()).second(me.second())):(pe.value=!0,m.value=(m.value||h.value).hour(me.hour()).minute(me.minute()).second(me.second()),h.value=m.value))},bt=(fe,Me)=>{T.value[Me]=null,Me==="min"?(f.value=p.value,tt.value=!1,(!m.value||m.value.isBefore(p.value))&&(m.value=p.value)):(h.value=m.value,pe.value=!1,m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},At=(fe,Me,me)=>{T.value.min||(fe&&(f.value=fe,p.value=(p.value||f.value).hour(fe.hour()).minute(fe.minute()).second(fe.second())),me||(tt.value=Me),(!m.value||m.value.isBefore(p.value))&&(m.value=p.value,h.value=fe))},Ee=(fe,Me,me)=>{T.value.max||(fe&&(h.value=fe,m.value=(m.value||h.value).hour(fe.hour()).minute(fe.minute()).second(fe.second())),me||(pe.value=Me),m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},gt=()=>{f.value=_k(w(u),{lang:w(d),unit:"month",unlinkPanels:t.unlinkPanels})[0],h.value=f.value.add(1,"month"),m.value=void 0,p.value=void 0,e("pick",null)},lt=fe=>Mt(fe)?fe.map(Me=>Me.format(l.value)):fe.format(l.value),$=fe=>w1(fe,l.value,d.value);function le(fe,Me){if(t.unlinkPanels&&Me){const me=(fe==null?void 0:fe.year())||0,Ae=(fe==null?void 0:fe.month())||0,dt=Me.year(),we=Me.month();h.value=me===dt&&Ae===we?Me.add(1,mw):Me}else h.value=f.value.add(1,mw),Me&&(h.value=h.value.hour(Me.hour()).minute(Me.minute()).second(Me.second()))}return e("set-picker-option",["isValidValue",ee]),e("set-picker-option",["parseUserInput",$]),e("set-picker-option",["formatToString",lt]),e("set-picker-option",["handleClear",gt]),(fe,Me)=>(W(),ve("div",{class:j([w(g).b(),w(y).b(),{"has-sidebar":fe.$slots.sidebar||w(z),"has-time":w(Ge)}])},[be("div",{class:j(w(g).e("body-wrapper"))},[Qe(fe.$slots,"sidebar",{class:j(w(g).e("sidebar"))}),w(z)?(W(),ve("div",{key:0,class:j(w(g).e("sidebar"))},[(W(!0),ve(Kt,null,Jn(w(c),(me,Ae)=>(W(),ve("button",{key:Ae,type:"button",class:j(w(g).e("shortcut")),onClick:dt=>w(A)(me)},Tt(me.text),11,["onClick"]))),128))],2)):et("v-if",!0),be("div",{class:j(w(g).e("body"))},[w(Ge)?(W(),ve("div",{key:0,class:j(w(y).e("time-header"))},[be("span",{class:j(w(y).e("editors-wrap"))},[be("span",{class:j(w(y).e("time-picker-wrap"))},[_e(w(Qa),{size:"small",disabled:w(v).selecting,placeholder:w(_)("el.datepicker.startDate"),class:j(w(y).e("editor")),"model-value":w(O),"validate-event":!1,onInput:me=>ge(me,"min"),onChange:me=>Oe(me,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Cn((W(),ve("span",{class:j(w(y).e("time-picker-wrap"))},[_e(w(Qa),{size:"small",class:j(w(y).e("editor")),disabled:w(v).selecting,placeholder:w(_)("el.datepicker.startTime"),"model-value":w(H),"validate-event":!1,onFocus:me=>tt.value=!0,onInput:me=>je(me,"min"),onChange:me=>bt(me,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),_e(w(bC),{visible:tt.value,format:w(te),"datetime-role":"start","parsed-value":f.value,onPick:At},null,8,["visible","format","parsed-value"])],2)),[[w(pf),G]])],2),be("span",null,[_e(w(Ut),null,{default:Re(()=>[_e(w(xo))]),_:1})]),be("span",{class:j([w(y).e("editors-wrap"),"is-right"])},[be("span",{class:j(w(y).e("time-picker-wrap"))},[_e(w(Qa),{size:"small",class:j(w(y).e("editor")),disabled:w(v).selecting,placeholder:w(_)("el.datepicker.endDate"),"model-value":w(N),readonly:!w(p),"validate-event":!1,onInput:me=>ge(me,"max"),onChange:me=>Oe(me,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Cn((W(),ve("span",{class:j(w(y).e("time-picker-wrap"))},[_e(w(Qa),{size:"small",class:j(w(y).e("editor")),disabled:w(v).selecting,placeholder:w(_)("el.datepicker.endTime"),"model-value":w(q),readonly:!w(p),"validate-event":!1,onFocus:me=>w(p)&&(pe.value=!0),onInput:me=>je(me,"max"),onChange:me=>bt(me,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),_e(w(bC),{"datetime-role":"end",visible:pe.value,format:w(te),"parsed-value":h.value,onPick:Ee},null,8,["visible","format","parsed-value"])],2)),[[w(pf),Z]])],2)],2)):et("v-if",!0),be("div",{class:j([[w(g).e("content"),w(y).e("content")],"is-left"])},[be("div",{class:j(w(y).e("header"))},[be("button",{type:"button",class:j([w(g).e("icon-btn"),"d-arrow-left"]),"aria-label":w(_)("el.datepicker.prevYear"),onClick:de},[Qe(fe.$slots,"prev-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(ip))]),_:1})])],10,["aria-label"]),be("button",{type:"button",class:j([w(g).e("icon-btn"),"arrow-left"]),"aria-label":w(_)("el.datepicker.prevMonth"),onClick:J},[Qe(fe.$slots,"prev-month",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(np))]),_:1})])],10,["aria-label"]),fe.unlinkPanels?(W(),ve("button",{key:0,type:"button",disabled:!w(Xe),class:j([[w(g).e("icon-btn"),{"is-disabled":!w(Xe)}],"d-arrow-right"]),"aria-label":w(_)("el.datepicker.nextYear"),onClick:De},[Qe(fe.$slots,"next-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(rp))]),_:1})])],10,["disabled","aria-label"])):et("v-if",!0),fe.unlinkPanels?(W(),ve("button",{key:1,type:"button",disabled:!w(ne),class:j([[w(g).e("icon-btn"),{"is-disabled":!w(ne)}],"arrow-right"]),"aria-label":w(_)("el.datepicker.nextMonth"),onClick:Le},[Qe(fe.$slots,"next-month",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(xo))]),_:1})])],10,["disabled","aria-label"])):et("v-if",!0),be("div",null,Tt(w(E)),1)],2),_e(VD,{"selection-mode":"range",date:f.value,"min-date":w(p),"max-date":w(m),"range-state":w(v),"disabled-date":w(r),"cell-class-name":w(s),onChangerange:w(x),onPick:qe,onSelect:w(S)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),be("div",{class:j([[w(g).e("content"),w(y).e("content")],"is-right"])},[be("div",{class:j(w(y).e("header"))},[fe.unlinkPanels?(W(),ve("button",{key:0,type:"button",disabled:!w(Xe),class:j([[w(g).e("icon-btn"),{"is-disabled":!w(Xe)}],"d-arrow-left"]),"aria-label":w(_)("el.datepicker.prevYear"),onClick:Ne},[Qe(fe.$slots,"prev-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(ip))]),_:1})])],10,["disabled","aria-label"])):et("v-if",!0),fe.unlinkPanels?(W(),ve("button",{key:1,type:"button",disabled:!w(ne),class:j([[w(g).e("icon-btn"),{"is-disabled":!w(ne)}],"arrow-left"]),"aria-label":w(_)("el.datepicker.prevMonth"),onClick:Y},[Qe(fe.$slots,"prev-month",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(np))]),_:1})])],10,["disabled","aria-label"])):et("v-if",!0),be("button",{type:"button","aria-label":w(_)("el.datepicker.nextYear"),class:j([w(g).e("icon-btn"),"d-arrow-right"]),onClick:ue},[Qe(fe.$slots,"next-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(rp))]),_:1})])],10,["aria-label"]),be("button",{type:"button",class:j([w(g).e("icon-btn"),"arrow-right"]),"aria-label":w(_)("el.datepicker.nextMonth"),onClick:Te},[Qe(fe.$slots,"next-month",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(xo))]),_:1})])],10,["aria-label"]),be("div",null,Tt(w(I)),1)],2),_e(VD,{"selection-mode":"range",date:h.value,"min-date":w(p),"max-date":w(m),"range-state":w(v),"disabled-date":w(r),"cell-class-name":w(s),onChangerange:w(x),onPick:qe,onSelect:w(S)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),w(Ge)?(W(),ve("div",{key:0,class:j(w(g).e("footer"))},[w(o)?(W(),rt(w(ea),{key:0,text:"",size:"small",class:j(w(g).e("link-btn")),onClick:gt},{default:Re(()=>[Hn(Tt(w(_)("el.datepicker.clear")),1)]),_:1},8,["class"])):et("v-if",!0),_e(w(ea),{plain:"",size:"small",class:j(w(g).e("link-btn")),disabled:w(ke),onClick:me=>w(b)(!1)},{default:Re(()=>[Hn(Tt(w(_)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):et("v-if",!0)],2))}});var w3e=It(A3e,[["__file","panel-date-range.vue"]]);const S3e=Et({...wk}),_3e=["pick","set-picker-option","calendar-change"],C3e=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const{t:i}=ci(),r=()=>{e.value=e.value.subtract(1,"year"),n.value||(t.value=t.value.subtract(1,"year"))},s=()=>{n.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},a=()=>{e.value=e.value.add(1,"year")},o=()=>{t.value=t.value.subtract(1,"year")},l=V(()=>`${e.value.year()} ${i("el.datepicker.year")}`),c=V(()=>`${t.value.year()} ${i("el.datepicker.year")}`),u=V(()=>e.value.year()),d=V(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:r,rightNextYear:s,leftNextYear:a,rightPrevYear:o,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},vw="year",M3e=Ie({name:"DatePickerMonthRange"}),T3e=Ie({...M3e,props:S3e,emits:_3e,setup(n,{emit:e}){const t=n,{lang:i}=ci(),r=Nt("EP_PICKER_BASE"),{shortcuts:s,disabledDate:a}=r.props,o=Ii(r.props,"format"),l=Ii(r.props,"defaultValue"),c=ae(An().locale(i.value)),u=ae(An().locale(i.value).add(1,vw)),{minDate:d,maxDate:f,rangeState:h,ppNs:p,drpNs:m,handleChangeRange:v,handleRangeConfirm:g,handleShortcutClick:y,onSelect:x}=HZ(t,{defaultValue:l,leftDate:c,rightDate:u,unit:vw,onParsedValueChanged:O}),b=V(()=>!!s.length),{leftPrevYear:A,rightNextYear:S,leftNextYear:C,rightPrevYear:_,leftLabel:M,rightLabel:T,leftYear:E,rightYear:I}=C3e({unlinkPanels:Ii(t,"unlinkPanels"),leftDate:c,rightDate:u}),L=V(()=>t.unlinkPanels&&I.value>E.value+1),F=(N,H=!0)=>{const q=N.minDate,te=N.maxDate;f.value===te&&d.value===q||(e("calendar-change",[q.toDate(),te&&te.toDate()]),f.value=te,d.value=q,H&&g())},B=()=>{c.value=_k(w(l),{lang:w(i),unit:"year",unlinkPanels:t.unlinkPanels})[0],u.value=c.value.add(1,"year"),e("pick",null)},P=N=>Mt(N)?N.map(H=>H.format(o.value)):N.format(o.value),z=N=>w1(N,o.value,i.value);function O(N,H){if(t.unlinkPanels&&H){const q=(N==null?void 0:N.year())||0,te=H.year();u.value=q===te?H.add(1,vw):H}else u.value=c.value.add(1,vw)}return e("set-picker-option",["isValidValue",A1]),e("set-picker-option",["formatToString",P]),e("set-picker-option",["parseUserInput",z]),e("set-picker-option",["handleClear",B]),(N,H)=>(W(),ve("div",{class:j([w(p).b(),w(m).b(),{"has-sidebar":!!N.$slots.sidebar||w(b)}])},[be("div",{class:j(w(p).e("body-wrapper"))},[Qe(N.$slots,"sidebar",{class:j(w(p).e("sidebar"))}),w(b)?(W(),ve("div",{key:0,class:j(w(p).e("sidebar"))},[(W(!0),ve(Kt,null,Jn(w(s),(q,te)=>(W(),ve("button",{key:te,type:"button",class:j(w(p).e("shortcut")),onClick:Q=>w(y)(q)},Tt(q.text),11,["onClick"]))),128))],2)):et("v-if",!0),be("div",{class:j(w(p).e("body"))},[be("div",{class:j([[w(p).e("content"),w(m).e("content")],"is-left"])},[be("div",{class:j(w(m).e("header"))},[be("button",{type:"button",class:j([w(p).e("icon-btn"),"d-arrow-left"]),onClick:w(A)},[Qe(N.$slots,"prev-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(ip))]),_:1})])],10,["onClick"]),N.unlinkPanels?(W(),ve("button",{key:0,type:"button",disabled:!w(L),class:j([[w(p).e("icon-btn"),{[w(p).is("disabled")]:!w(L)}],"d-arrow-right"]),onClick:w(C)},[Qe(N.$slots,"next-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(rp))]),_:1})])],10,["disabled","onClick"])):et("v-if",!0),be("div",null,Tt(w(M)),1)],2),_e(HD,{"selection-mode":"range",date:c.value,"min-date":w(d),"max-date":w(f),"range-state":w(h),"disabled-date":w(a),onChangerange:w(v),onPick:F,onSelect:w(x)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),be("div",{class:j([[w(p).e("content"),w(m).e("content")],"is-right"])},[be("div",{class:j(w(m).e("header"))},[N.unlinkPanels?(W(),ve("button",{key:0,type:"button",disabled:!w(L),class:j([[w(p).e("icon-btn"),{"is-disabled":!w(L)}],"d-arrow-left"]),onClick:w(_)},[Qe(N.$slots,"prev-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(ip))]),_:1})])],10,["disabled","onClick"])):et("v-if",!0),be("button",{type:"button",class:j([w(p).e("icon-btn"),"d-arrow-right"]),onClick:w(S)},[Qe(N.$slots,"next-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(rp))]),_:1})])],10,["onClick"]),be("div",null,Tt(w(T)),1)],2),_e(HD,{"selection-mode":"range",date:u.value,"min-date":w(d),"max-date":w(f),"range-state":w(h),"disabled-date":w(a),onChangerange:w(v),onPick:F,onSelect:w(x)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var E3e=It(T3e,[["__file","panel-month-range.vue"]]);const I3e=Et({...wk}),D3e=["pick","set-picker-option","calendar-change"],R3e=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const i=()=>{e.value=e.value.subtract(10,"year"),n.value||(t.value=t.value.subtract(10,"year"))},r=()=>{n.value||(e.value=e.value.add(10,"year")),t.value=t.value.add(10,"year")},s=()=>{e.value=e.value.add(10,"year")},a=()=>{t.value=t.value.subtract(10,"year")},o=V(()=>{const d=Math.floor(e.value.year()/10)*10;return`${d}-${d+9}`}),l=V(()=>{const d=Math.floor(t.value.year()/10)*10;return`${d}-${d+9}`}),c=V(()=>Math.floor(e.value.year()/10)*10+9),u=V(()=>Math.floor(t.value.year()/10)*10);return{leftPrevYear:i,rightNextYear:r,leftNextYear:s,rightPrevYear:a,leftLabel:o,rightLabel:l,leftYear:c,rightYear:u}},kU="year",P3e=Ie({name:"DatePickerYearRange"}),L3e=Ie({...P3e,props:I3e,emits:D3e,setup(n,{emit:e}){const t=n,{lang:i}=ci(),r=ae(An().locale(i.value)),s=ae(r.value.add(10,"year")),{pickerNs:a}=Nt(SM),o=St("date-range-picker"),l=V(()=>!!F.length),c=V(()=>[a.b(),o.b(),{"has-sidebar":!!Ps().sidebar||l.value}]),u=V(()=>({content:[a.e("content"),o.e("content"),"is-left"],arrowLeftBtn:[a.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[a.e("icon-btn"),{[a.is("disabled")]:!A.value},"d-arrow-right"]})),d=V(()=>({content:[a.e("content"),o.e("content"),"is-right"],arrowLeftBtn:[a.e("icon-btn"),{"is-disabled":!A.value},"d-arrow-left"],arrowRightBtn:[a.e("icon-btn"),"d-arrow-right"]})),f=VZ(i),{leftPrevYear:h,rightNextYear:p,leftNextYear:m,rightPrevYear:v,leftLabel:g,rightLabel:y,leftYear:x,rightYear:b}=R3e({unlinkPanels:Ii(t,"unlinkPanels"),leftDate:r,rightDate:s}),A=V(()=>t.unlinkPanels&&b.value>x.value+1),S=ae(),C=ae(),_=ae({endDate:null,selecting:!1}),M=Q=>{_.value=Q},T=(Q,ee=!0)=>{const de=Q.minDate,J=Q.maxDate;C.value===J&&S.value===de||(e("calendar-change",[de.toDate(),J&&J.toDate()]),C.value=J,S.value=de,ee&&E())},E=(Q=!1)=>{A1([S.value,C.value])&&e("pick",[S.value,C.value],Q)},I=Q=>{_.value.selecting=Q,Q||(_.value.endDate=null)},L=Nt("EP_PICKER_BASE"),{shortcuts:F,disabledDate:B}=L.props,P=Ii(L.props,"format"),z=Ii(L.props,"defaultValue"),O=()=>{let Q;if(Mt(z.value)){const ee=An(z.value[0]);let de=An(z.value[1]);return t.unlinkPanels||(de=ee.add(10,kU)),[ee,de]}else z.value?Q=An(z.value):Q=An();return Q=Q.locale(i.value),[Q,Q.add(10,kU)]};pt(()=>z.value,Q=>{if(Q){const ee=O();r.value=ee[0],s.value=ee[1]}},{immediate:!0}),pt(()=>t.parsedValue,Q=>{if(Q&&Q.length===2)if(S.value=Q[0],C.value=Q[1],r.value=S.value,t.unlinkPanels&&C.value){const ee=S.value.year(),de=C.value.year();s.value=ee===de?C.value.add(10,"year"):C.value}else s.value=r.value.add(10,"year");else{const ee=O();S.value=void 0,C.value=void 0,r.value=ee[0],s.value=ee[1]}},{immediate:!0});const N=Q=>w1(Q,P.value,i.value),H=Q=>Mt(Q)?Q.map(ee=>ee.format(P.value)):Q.format(P.value),q=Q=>A1(Q)&&(B?!B(Q[0].toDate())&&!B(Q[1].toDate()):!0),te=()=>{const Q=O();r.value=Q[0],s.value=Q[1],C.value=void 0,S.value=void 0,e("pick",null)};return e("set-picker-option",["isValidValue",q]),e("set-picker-option",["parseUserInput",N]),e("set-picker-option",["formatToString",H]),e("set-picker-option",["handleClear",te]),(Q,ee)=>(W(),ve("div",{class:j(w(c))},[be("div",{class:j(w(a).e("body-wrapper"))},[Qe(Q.$slots,"sidebar",{class:j(w(a).e("sidebar"))}),w(l)?(W(),ve("div",{key:0,class:j(w(a).e("sidebar"))},[(W(!0),ve(Kt,null,Jn(w(F),(de,J)=>(W(),ve("button",{key:J,type:"button",class:j(w(a).e("shortcut")),onClick:ue=>w(f)(de)},Tt(de.text),11,["onClick"]))),128))],2)):et("v-if",!0),be("div",{class:j(w(a).e("body"))},[be("div",{class:j(w(u).content)},[be("div",{class:j(w(o).e("header"))},[be("button",{type:"button",class:j(w(u).arrowLeftBtn),onClick:w(h)},[Qe(Q.$slots,"prev-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(ip))]),_:1})])],10,["onClick"]),Q.unlinkPanels?(W(),ve("button",{key:0,type:"button",disabled:!w(A),class:j(w(u).arrowRightBtn),onClick:w(m)},[Qe(Q.$slots,"next-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(rp))]),_:1})])],10,["disabled","onClick"])):et("v-if",!0),be("div",null,Tt(w(g)),1)],2),_e(GD,{"selection-mode":"range",date:r.value,"min-date":S.value,"max-date":C.value,"range-state":_.value,"disabled-date":w(B),onChangerange:M,onPick:T,onSelect:I},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),be("div",{class:j(w(d).content)},[be("div",{class:j(w(o).e("header"))},[Q.unlinkPanels?(W(),ve("button",{key:0,type:"button",disabled:!w(A),class:j(w(d).arrowLeftBtn),onClick:w(v)},[Qe(Q.$slots,"prev-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(ip))]),_:1})])],10,["disabled","onClick"])):et("v-if",!0),be("button",{type:"button",class:j(w(d).arrowRightBtn),onClick:w(p)},[Qe(Q.$slots,"next-year",{},()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(rp))]),_:1})])],10,["onClick"]),be("div",null,Tt(w(y)),1)],2),_e(GD,{"selection-mode":"range",date:s.value,"min-date":S.value,"max-date":C.value,"range-state":_.value,"disabled-date":w(B),onChangerange:M,onPick:T,onSelect:I},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var k3e=It(L3e,[["__file","panel-year-range.vue"]]);const F3e=function(n){switch(n){case"daterange":case"datetimerange":return w3e;case"monthrange":return E3e;case"yearrange":return k3e;default:return b3e}};An.extend(oZ);An.extend(bSe);An.extend(bk);An.extend(SSe);An.extend(TSe);An.extend(RSe);An.extend(FSe);An.extend(USe);var B3e=Ie({name:"ElDatePicker",install:null,props:r3e,emits:["update:modelValue"],setup(n,{expose:e,emit:t,slots:i}){const r=St("picker-panel");Qn("ElPopperOptions",Si(Ii(n,"popperOptions"))),Qn(SM,{slots:i,pickerNs:r});const s=ae();e({focus:()=>{var l;(l=s.value)==null||l.focus()},blur:()=>{var l;(l=s.value)==null||l.blur()},handleOpen:()=>{var l;(l=s.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=s.value)==null||l.handleClose()}});const o=l=>{t("update:modelValue",l)};return()=>{var l;const c=(l=n.format)!=null?l:zSe[n.type]||ag,u=F3e(n.type);return _e(FZ,Kn(n,{format:c,type:n.type,ref:s,"onUpdate:modelValue":o}),{default:d=>_e(u,d,{"prev-month":i["prev-month"],"next-month":i["next-month"],"prev-year":i["prev-year"],"next-year":i["next-year"]}),"range-separator":i["range-separator"]})}}});const N3e=xn(B3e),Mk=Symbol("elDescriptions");var Xy=Ie({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:Nt(Mk,{})}},render(){var n;const e=kxe(this.cell),t=(((n=this.cell)==null?void 0:n.dirs)||[]).map(g=>{const{dir:y,arg:x,modifiers:b,value:A}=g;return[y,A,x,b]}),{border:i,direction:r}=this.descriptions,s=r==="vertical",a=()=>{var g,y,x;return((x=(y=(g=this.cell)==null?void 0:g.children)==null?void 0:y.label)==null?void 0:x.call(y))||e.label},o=()=>{var g,y,x;return(x=(y=(g=this.cell)==null?void 0:g.children)==null?void 0:y.default)==null?void 0:x.call(y)},l=e.span,c=e.rowspan,u=e.align?`is-${e.align}`:"",d=e.labelAlign?`is-${e.labelAlign}`:u,f=e.className,h=e.labelClassName,p=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,m={width:Hr(p),minWidth:Hr(e.minWidth)},v=St("descriptions");switch(this.type){case"label":return Cn(en(this.tag,{style:m,class:[v.e("cell"),v.e("label"),v.is("bordered-label",i),v.is("vertical-label",s),d,h],colSpan:s?l:1,rowspan:s?1:c},a()),t);case"content":return Cn(en(this.tag,{style:m,class:[v.e("cell"),v.e("content"),v.is("bordered-content",i),v.is("vertical-content",s),u,f],colSpan:s?l:l*2-1,rowspan:s?c*2-1:c},o()),t);default:{const g=a(),y={},x=Hr(e.labelWidth||this.descriptions.labelWidth);return x&&(y.width=x,y.display="inline-block"),Cn(en("td",{style:m,class:[v.e("cell"),u],colSpan:l,rowspan:c},[Us(g)?void 0:en("span",{style:y,class:[v.e("label"),h]},g),en("span",{class:[v.e("content"),f]},o())]),t)}}}});const O3e=Et({row:{type:Ke(Array),default:()=>[]}}),U3e=Ie({name:"ElDescriptionsRow"}),z3e=Ie({...U3e,props:O3e,setup(n){const e=Nt(Mk,{});return(t,i)=>w(e).direction==="vertical"?(W(),ve(Kt,{key:0},[be("tr",null,[(W(!0),ve(Kt,null,Jn(t.row,(r,s)=>(W(),rt(w(Xy),{key:`tr1-${s}`,cell:r,tag:"th",type:"label"},null,8,["cell"]))),128))]),be("tr",null,[(W(!0),ve(Kt,null,Jn(t.row,(r,s)=>(W(),rt(w(Xy),{key:`tr2-${s}`,cell:r,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(W(),ve("tr",{key:1},[(W(!0),ve(Kt,null,Jn(t.row,(r,s)=>(W(),ve(Kt,{key:`tr3-${s}`},[w(e).border?(W(),ve(Kt,{key:0},[_e(w(Xy),{cell:r,tag:"td",type:"label"},null,8,["cell"]),_e(w(Xy),{cell:r,tag:"td",type:"content"},null,8,["cell"])],64)):(W(),rt(w(Xy),{key:1,cell:r,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var V3e=It(z3e,[["__file","descriptions-row.vue"]]);const H3e=Et({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:ws,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),G3e=Ie({name:"ElDescriptions"}),W3e=Ie({...G3e,props:H3e,setup(n){const e=n,t=St("descriptions"),i=gs(),r=Ps();Qn(Mk,e);const s=V(()=>[t.b(),t.m(i.value)]),a=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),o=()=>{if(!r.default)return[];const l=Xd(r.default()).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)==="ElDescriptionsItem"}),c=[];let u=[],d=e.column,f=0;const h=[];return l.forEach((p,m)=>{var v,g,y;const x=((v=p.props)==null?void 0:v.span)||1,b=((g=p.props)==null?void 0:g.rowspan)||1,A=c.length;if(h[A]||(h[A]=0),b>1)for(let S=1;S<b;S++)h[y=A+S]||(h[y]=0),h[A+S]++,f++;if(h[A]>0&&(d-=h[A],h[A]=0),m<l.length-1&&(f+=x>d?d:x),m===l.length-1){const S=e.column-f%e.column;u.push(a(p,S,d,!0)),c.push(u);return}x<d?(d-=x,u.push(p)):(u.push(a(p,x,d)),c.push(u),d=e.column,u=[])}),c};return(l,c)=>(W(),ve("div",{class:j(w(s))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(W(),ve("div",{key:0,class:j(w(t).e("header"))},[be("div",{class:j(w(t).e("title"))},[Qe(l.$slots,"title",{},()=>[Hn(Tt(l.title),1)])],2),be("div",{class:j(w(t).e("extra"))},[Qe(l.$slots,"extra",{},()=>[Hn(Tt(l.extra),1)])],2)],2)):et("v-if",!0),be("div",{class:j(w(t).e("body"))},[be("table",{class:j([w(t).e("table"),w(t).is("bordered",l.border)])},[be("tbody",null,[(W(!0),ve(Kt,null,Jn(o(),(u,d)=>(W(),rt(V3e,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var q3e=It(W3e,[["__file","description.vue"]]);const K3e=Et({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),GZ=Ie({name:"ElDescriptionsItem",props:K3e}),Y3e=xn(q3e,{DescriptionsItem:GZ}),X3e=Or(GZ),Tk=n=>{if(!n)return{onClick:Pi,onMousedown:Pi,onMouseup:Pi};let e=!1,t=!1;return{onClick:a=>{e&&t&&n(a),e=t=!1},onMousedown:a=>{e=a.target===a.currentTarget},onMouseup:a=>{t=a.target===a.currentTarget}}},j3e=Et({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Ke([String,Array,Object])},zIndex:{type:Ke([String,Number])}}),$3e={click:n=>n instanceof MouseEvent},Q3e="overlay";var Z3e=Ie({name:"ElOverlay",props:j3e,emits:$3e,setup(n,{slots:e,emit:t}){const i=St(Q3e),r=l=>{t("click",l)},{onClick:s,onMousedown:a,onMouseup:o}=Tk(n.customMaskEvent?void 0:r);return()=>n.mask?_e("div",{class:[i.b(),n.overlayClass],style:{zIndex:n.zIndex},onClick:s,onMousedown:a,onMouseup:o},[Qe(e,"default")],Wl.STYLE|Wl.CLASS|Wl.PROPS,["onClick","onMouseup","onMousedown"]):en("div",{class:n.overlayClass,style:{zIndex:n.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Qe(e,"default")])}});const Ek=Z3e,WZ=Symbol("dialogInjectionKey"),qZ=Et({center:Boolean,alignCenter:Boolean,closeIcon:{type:Hi},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),J3e={close:()=>!0},KZ=(n,e,t,i)=>{let r={offsetX:0,offsetY:0};const s=c=>{const u=c.clientX,d=c.clientY,{offsetX:f,offsetY:h}=r,p=n.value.getBoundingClientRect(),m=p.left,v=p.top,g=p.width,y=p.height,x=document.documentElement.clientWidth,b=document.documentElement.clientHeight,A=-m+f,S=-v+h,C=x-m-g+f,_=b-v-y+h,M=E=>{let I=f+E.clientX-u,L=h+E.clientY-d;i!=null&&i.value||(I=Math.min(Math.max(I,A),C),L=Math.min(Math.max(L,S),_)),r={offsetX:I,offsetY:L},n.value&&(n.value.style.transform=`translate(${Hr(I)}, ${Hr(L)})`)},T=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",T)},a=()=>{e.value&&n.value&&e.value.addEventListener("mousedown",s)},o=()=>{e.value&&n.value&&e.value.removeEventListener("mousedown",s)},l=()=>{r={offsetX:0,offsetY:0},n.value&&(n.value.style.transform="none")};return Mn(()=>{Js(()=>{t.value?a():o()})}),Fi(()=>{o()}),{resetPosition:l}},_M=(...n)=>e=>{n.forEach(t=>{Xt(t)?t(e):t.value=e})},e_e=Ie({name:"ElDialogContent"}),t_e=Ie({...e_e,props:qZ,emits:J3e,setup(n,{expose:e}){const t=n,{t:i}=ci(),{Close:r}=ZL,{dialogRef:s,headerRef:a,bodyId:o,ns:l,style:c}=Nt(WZ),{focusTrapRef:u}=Nt(rk),d=V(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center}]),f=_M(u,s),h=V(()=>t.draggable),p=V(()=>t.overflow),{resetPosition:m}=KZ(s,a,h,p);return e({resetPosition:m}),(v,g)=>(W(),ve("div",{ref:w(f),class:j(w(d)),style:jt(w(c)),tabindex:"-1"},[be("header",{ref_key:"headerRef",ref:a,class:j([w(l).e("header"),v.headerClass,{"show-close":v.showClose}])},[Qe(v.$slots,"header",{},()=>[be("span",{role:"heading","aria-level":v.ariaLevel,class:j(w(l).e("title"))},Tt(v.title),11,["aria-level"])]),v.showClose?(W(),ve("button",{key:0,"aria-label":w(i)("el.dialog.close"),class:j(w(l).e("headerbtn")),type:"button",onClick:y=>v.$emit("close")},[_e(w(Ut),{class:j(w(l).e("close"))},{default:Re(()=>[(W(),rt(On(v.closeIcon||w(r))))]),_:1},8,["class"])],10,["aria-label","onClick"])):et("v-if",!0)],2),be("div",{id:w(o),class:j([w(l).e("body"),v.bodyClass])},[Qe(v.$slots,"default")],10,["id"]),v.$slots.footer?(W(),ve("footer",{key:0,class:j([w(l).e("footer"),v.footerClass])},[Qe(v.$slots,"footer")],2)):et("v-if",!0)],6))}});var n_e=It(t_e,[["__file","dialog-content.vue"]]);const YZ=Et({...qZ,appendToBody:Boolean,appendTo:{type:Ke([String,Object]),default:"body"},beforeClose:{type:Ke(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),XZ={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Tn]:n=>ji(n),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ik=(n,e={})=>{ir(n)||Rs("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||St("popup"),i=V(()=>t.bm("parent","hidden"));if(!li||qo(document.body,i.value))return;let r=0,s=!1,a="0";const o=()=>{setTimeout(()=>{typeof document>"u"||s&&document&&(document.body.style.width=a,Za(document.body,i.value))},200)};pt(n,l=>{if(!l){o();return}s=!qo(document.body,i.value),s&&(a=document.body.style.width,tc(document.body,i.value)),r=mQ(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=Gd(document.body,"overflowY");r>0&&(c||u==="scroll")&&s&&(document.body.style.width=`calc(100% - ${r}px)`)}),WX(()=>o())},jZ=(n,e)=>{var t;const r=Nn().emit,{nextZIndex:s}=ry();let a="";const o=ma(),l=ma(),c=ae(!1),u=ae(!1),d=ae(!1),f=ae((t=n.zIndex)!=null?t:s());let h,p;const m=pM("namespace",sb),v=V(()=>{const B={},P=`--${m.value}-dialog`;return n.fullscreen||(n.top&&(B[`${P}-margin-top`]=n.top),n.width&&(B[`${P}-width`]=Hr(n.width))),B}),g=V(()=>n.alignCenter?{display:"flex"}:{});function y(){r("opened")}function x(){r("closed"),r(Tn,!1),n.destroyOnClose&&(d.value=!1)}function b(){r("close")}function A(){p==null||p(),h==null||h(),n.openDelay&&n.openDelay>0?{stop:h}=am(()=>M(),n.openDelay):M()}function S(){h==null||h(),p==null||p(),n.closeDelay&&n.closeDelay>0?{stop:p}=am(()=>T(),n.closeDelay):T()}function C(){function B(P){P||(u.value=!0,c.value=!1)}n.beforeClose?n.beforeClose(B):S()}function _(){n.closeOnClickModal&&C()}function M(){li&&(c.value=!0)}function T(){c.value=!1}function E(){r("openAutoFocus")}function I(){r("closeAutoFocus")}function L(B){var P;((P=B.detail)==null?void 0:P.focusReason)==="pointer"&&B.preventDefault()}n.lockScroll&&Ik(c);function F(){n.closeOnPressEscape&&C()}return pt(()=>n.modelValue,B=>{B?(u.value=!1,A(),d.value=!0,f.value=Q$(n.zIndex)?s():f.value++,Yt(()=>{r("open"),e.value&&(e.value.parentElement.scrollTop=0,e.value.parentElement.scrollLeft=0,e.value.scrollTop=0)})):c.value&&S()}),pt(()=>n.fullscreen,B=>{e.value&&(B?(a=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=a)}),Mn(()=>{n.modelValue&&(c.value=!0,d.value=!0,A())}),{afterEnter:y,afterLeave:x,beforeLeave:b,handleClose:C,onModalClick:_,close:S,doClose:T,onOpenAutoFocus:E,onCloseAutoFocus:I,onCloseRequested:F,onFocusoutPrevented:L,titleId:o,bodyId:l,closed:u,style:v,overlayDialogStyle:g,rendered:d,visible:c,zIndex:f}},i_e=Ie({name:"ElDialog",inheritAttrs:!1}),r_e=Ie({...i_e,props:YZ,emits:XZ,setup(n,{expose:e}){const t=n,i=Ps();Uh({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},V(()=>!!i.title));const r=St("dialog"),s=ae(),a=ae(),o=ae(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:f,rendered:h,zIndex:p,afterEnter:m,afterLeave:v,beforeLeave:g,handleClose:y,onModalClick:x,onOpenAutoFocus:b,onCloseAutoFocus:A,onCloseRequested:S,onFocusoutPrevented:C}=jZ(t,s);Qn(WZ,{dialogRef:s,headerRef:a,bodyId:u,ns:r,rendered:h,style:d});const _=Tk(x),M=V(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:o,resetPosition:()=>{var E;(E=o.value)==null||E.resetPosition()}}),(E,I)=>(W(),rt(w(oy),{to:E.appendTo,disabled:E.appendTo!=="body"?!1:!E.appendToBody},{default:Re(()=>[_e(na,{name:"dialog-fade",onAfterEnter:w(m),onAfterLeave:w(v),onBeforeLeave:w(g),persisted:""},{default:Re(()=>[Cn(_e(w(Ek),{"custom-mask-event":"",mask:E.modal,"overlay-class":E.modalClass,"z-index":w(p)},{default:Re(()=>[be("div",{role:"dialog","aria-modal":"true","aria-label":E.title||void 0,"aria-labelledby":E.title?void 0:w(c),"aria-describedby":w(u),class:j(`${w(r).namespace.value}-overlay-dialog`),style:jt(w(f)),onClick:w(_).onClick,onMousedown:w(_).onMousedown,onMouseup:w(_).onMouseup},[_e(w(ay),{loop:"",trapped:w(l),"focus-start-el":"container",onFocusAfterTrapped:w(b),onFocusAfterReleased:w(A),onFocusoutPrevented:w(C),onReleaseRequested:w(S)},{default:Re(()=>[w(h)?(W(),rt(n_e,Kn({key:0,ref_key:"dialogContentRef",ref:o},E.$attrs,{center:E.center,"align-center":E.alignCenter,"close-icon":E.closeIcon,draggable:w(M),overflow:E.overflow,fullscreen:E.fullscreen,"header-class":E.headerClass,"body-class":E.bodyClass,"footer-class":E.footerClass,"show-close":E.showClose,title:E.title,"aria-level":E.headerAriaLevel,onClose:w(y)}),Il({header:Re(()=>[E.$slots.title?Qe(E.$slots,"title",{key:1}):Qe(E.$slots,"header",{key:0,close:w(y),titleId:w(c),titleClass:w(r).e("title")})]),default:Re(()=>[Qe(E.$slots,"default")]),_:2},[E.$slots.footer?{name:"footer",fn:Re(()=>[Qe(E.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):et("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[yi,w(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var s_e=It(r_e,[["__file","dialog.vue"]]);const a_e=xn(s_e),o_e=Et({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Ke(String),default:"solid"}}),l_e=Ie({name:"ElDivider"}),c_e=Ie({...l_e,props:o_e,setup(n){const e=n,t=St("divider"),i=V(()=>t.cssVar({"border-style":e.borderStyle}));return(r,s)=>(W(),ve("div",{class:j([w(t).b(),w(t).m(r.direction)]),style:jt(w(i)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(W(),ve("div",{key:0,class:j([w(t).e("text"),w(t).is(r.contentPosition)])},[Qe(r.$slots,"default")],2)):et("v-if",!0)],6))}});var u_e=It(c_e,[["__file","divider.vue"]]);const $Z=xn(u_e),d_e=Et({...YZ,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),f_e=XZ,h_e=Ie({name:"ElDrawer",inheritAttrs:!1}),p_e=Ie({...h_e,props:d_e,emits:f_e,setup(n,{expose:e}){const t=n,i=Ps();Uh({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},V(()=>!!i.title));const r=ae(),s=ae(),a=St("drawer"),{t:o}=ci(),{afterEnter:l,afterLeave:c,beforeLeave:u,visible:d,rendered:f,titleId:h,bodyId:p,zIndex:m,onModalClick:v,onOpenAutoFocus:g,onCloseAutoFocus:y,onFocusoutPrevented:x,onCloseRequested:b,handleClose:A}=jZ(t,r),S=V(()=>t.direction==="rtl"||t.direction==="ltr"),C=V(()=>Hr(t.size));return e({handleClose:A,afterEnter:l,afterLeave:c}),(_,M)=>(W(),rt(w(oy),{to:_.appendTo,disabled:_.appendTo!=="body"?!1:!_.appendToBody},{default:Re(()=>[_e(na,{name:w(a).b("fade"),onAfterEnter:w(l),onAfterLeave:w(c),onBeforeLeave:w(u),persisted:""},{default:Re(()=>[Cn(_e(w(Ek),{mask:_.modal,"overlay-class":_.modalClass,"z-index":w(m),onClick:w(v)},{default:Re(()=>[_e(w(ay),{loop:"",trapped:w(d),"focus-trap-el":r.value,"focus-start-el":s.value,onFocusAfterTrapped:w(g),onFocusAfterReleased:w(y),onFocusoutPrevented:w(x),onReleaseRequested:w(b)},{default:Re(()=>[be("div",Kn({ref_key:"drawerRef",ref:r,"aria-modal":"true","aria-label":_.title||void 0,"aria-labelledby":_.title?void 0:w(h),"aria-describedby":w(p)},_.$attrs,{class:[w(a).b(),_.direction,w(d)&&"open"],style:w(S)?"width: "+w(C):"height: "+w(C),role:"dialog",onClick:ln(()=>{},["stop"])}),[be("span",{ref_key:"focusStartRef",ref:s,class:j(w(a).e("sr-focus")),tabindex:"-1"},null,2),_.withHeader?(W(),ve("header",{key:0,class:j([w(a).e("header"),_.headerClass])},[_.$slots.title?Qe(_.$slots,"title",{key:1},()=>[et(" DEPRECATED SLOT ")]):Qe(_.$slots,"header",{key:0,close:w(A),titleId:w(h),titleClass:w(a).e("title")},()=>[_.$slots.title?et("v-if",!0):(W(),ve("span",{key:0,id:w(h),role:"heading","aria-level":_.headerAriaLevel,class:j(w(a).e("title"))},Tt(_.title),11,["id","aria-level"]))]),_.showClose?(W(),ve("button",{key:2,"aria-label":w(o)("el.drawer.close"),class:j(w(a).e("close-btn")),type:"button",onClick:w(A)},[_e(w(Ut),{class:j(w(a).e("close"))},{default:Re(()=>[_e(w(nu))]),_:1},8,["class"])],10,["aria-label","onClick"])):et("v-if",!0)],2)):et("v-if",!0),w(f)?(W(),ve("div",{key:1,id:w(p),class:j([w(a).e("body"),_.bodyClass])},[Qe(_.$slots,"default")],10,["id"])):et("v-if",!0),_.$slots.footer?(W(),ve("div",{key:2,class:j([w(a).e("footer"),_.footerClass])},[Qe(_.$slots,"footer")],2)):et("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[yi,w(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var m_e=It(p_e,[["__file","drawer.vue"]]);const v_e=xn(m_e),g_e=Ie({inheritAttrs:!1});function y_e(n,e,t,i,r,s){return Qe(n.$slots,"default")}var b_e=It(g_e,[["render",y_e],["__file","collection.vue"]]);const x_e=Ie({name:"ElCollectionItem",inheritAttrs:!1});function A_e(n,e,t,i,r,s){return Qe(n.$slots,"default")}var w_e=It(x_e,[["render",A_e],["__file","collection-item.vue"]]);const QZ="data-el-collection-item",ZZ=n=>{const e=`El${n}Collection`,t=`${e}Item`,i=Symbol(e),r=Symbol(t),s={...b_e,name:e,setup(){const o=ae(),l=new Map;Qn(i,{itemMap:l,getItems:()=>{const u=w(o);if(!u)return[];const d=Array.from(u.querySelectorAll(`[${QZ}]`));return[...l.values()].sort((h,p)=>d.indexOf(h.ref)-d.indexOf(p.ref))},collectionRef:o})}},a={...w_e,name:t,setup(o,{attrs:l}){const c=ae(),u=Nt(i,void 0);Qn(r,{collectionItemRef:c}),Mn(()=>{const d=w(c);d&&u.itemMap.set(d,{ref:d,...l})}),Fi(()=>{const d=w(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:r,ElCollection:s,ElCollectionItem:a}},S_e=Et({style:{type:Ke([String,Array,Object])},currentTabId:{type:Ke(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Ke(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:__e,ElCollectionItem:C_e,COLLECTION_INJECTION_KEY:Dk,COLLECTION_ITEM_INJECTION_KEY:M_e}=ZZ("RovingFocusGroup"),Rk=Symbol("elRovingFocusGroup"),JZ=Symbol("elRovingFocusGroupItem"),T_e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},E_e=(n,e)=>n,I_e=(n,e,t)=>{const i=E_e(n.code);return T_e[i]},D_e=(n,e)=>n.map((t,i)=>n[(i+e)%n.length]),Pk=n=>{const{activeElement:e}=document;for(const t of n)if(t===e||(t.focus(),e!==document.activeElement))return},FU="currentTabIdChange",BU="rovingFocusGroup.entryFocus",R_e={bubbles:!1,cancelable:!0},P_e=Ie({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:S_e,emits:[FU,"entryFocus"],setup(n,{emit:e}){var t;const i=ae((t=n.currentTabId||n.defaultCurrentTabId)!=null?t:null),r=ae(!1),s=ae(!1),a=ae(),{getItems:o}=Nt(Dk,void 0),l=V(()=>[{outline:"none"},n.style]),c=m=>{e(FU,m)},u=()=>{r.value=!0},d=Yr(m=>{var v;(v=n.onMousedown)==null||v.call(n,m)},()=>{s.value=!0}),f=Yr(m=>{var v;(v=n.onFocus)==null||v.call(n,m)},m=>{const v=!w(s),{target:g,currentTarget:y}=m;if(g===y&&v&&!w(r)){const x=new Event(BU,R_e);if(y==null||y.dispatchEvent(x),!x.defaultPrevented){const b=o().filter(M=>M.focusable),A=b.find(M=>M.active),S=b.find(M=>M.id===w(i)),_=[A,S,...b].filter(Boolean).map(M=>M.ref);Pk(_)}}s.value=!1}),h=Yr(m=>{var v;(v=n.onBlur)==null||v.call(n,m)},()=>{r.value=!1}),p=(...m)=>{e("entryFocus",...m)};Qn(Rk,{currentTabbedId:Z1(i),loop:Ii(n,"loop"),tabIndex:V(()=>w(r)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:l,orientation:Ii(n,"orientation"),dir:Ii(n,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:h,onFocus:f,onMousedown:d}),pt(()=>n.currentTabId,m=>{i.value=m??null}),Li(a,BU,p)}});function L_e(n,e,t,i,r,s){return Qe(n.$slots,"default")}var k_e=It(P_e,[["render",L_e],["__file","roving-focus-group-impl.vue"]]);const F_e=Ie({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:__e,ElRovingFocusGroupImpl:k_e}});function B_e(n,e,t,i,r,s){const a=an("el-roving-focus-group-impl"),o=an("el-focus-group-collection");return W(),rt(o,null,{default:Re(()=>[_e(a,yl(Yu(n.$attrs)),{default:Re(()=>[Qe(n.$slots,"default")]),_:3},16)]),_:3})}var N_e=It(F_e,[["render",B_e],["__file","roving-focus-group.vue"]]);const i_=Et({trigger:lx.trigger,triggerKeys:{type:Ke(Array),default:()=>[kt.enter,kt.numpadEnter,kt.space,kt.down]},effect:{...Ks.effect,default:"light"},type:{type:Ke(String)},placement:{type:Ke(String),default:"bottom"},popperOptions:{type:Ke(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Ke([Number,String]),default:0},maxHeight:{type:Ke([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,values:CQ,default:"menu"},buttonProps:{type:Ke(Object)},teleported:Ks.teleported,persistent:{type:Boolean,default:!0}}),eJ=Et({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Hi}}),O_e=Et({onKeydown:{type:Ke(Function)}}),U_e=[kt.down,kt.pageDown,kt.home],tJ=[kt.up,kt.pageUp,kt.end],z_e=[...U_e,...tJ],{ElCollection:V_e,ElCollectionItem:H_e,COLLECTION_INJECTION_KEY:G_e,COLLECTION_ITEM_INJECTION_KEY:W_e}=ZZ("Dropdown"),CM=Symbol("elDropdown"),{ButtonGroup:q_e}=ea,K_e=Ie({name:"ElDropdown",components:{ElButton:ea,ElButtonGroup:q_e,ElScrollbar:sd,ElDropdownCollection:V_e,ElTooltip:Da,ElRovingFocusGroup:N_e,ElOnlyChild:PQ,ElIcon:Ut,ArrowDown:Ef},props:i_,emits:["visible-change","click","command"],setup(n,{emit:e}){const t=Nn(),i=St("dropdown"),{t:r}=ci(),s=ae(),a=ae(),o=ae(),l=ae(),c=ae(null),u=ae(null),d=ae(!1),f=V(()=>({maxHeight:Hr(n.maxHeight)})),h=V(()=>[i.m(b.value)]),p=V(()=>Xa(n.trigger)),m=ma().value,v=V(()=>n.id||m);pt([s,p],([P,z],[O])=>{var N,H,q;(N=O==null?void 0:O.$el)!=null&&N.removeEventListener&&O.$el.removeEventListener("pointerenter",S),(H=P==null?void 0:P.$el)!=null&&H.removeEventListener&&P.$el.removeEventListener("pointerenter",S),(q=P==null?void 0:P.$el)!=null&&q.addEventListener&&z.includes("hover")&&P.$el.addEventListener("pointerenter",S)},{immediate:!0}),Fi(()=>{var P,z;(z=(P=s.value)==null?void 0:P.$el)!=null&&z.removeEventListener&&s.value.$el.removeEventListener("pointerenter",S)});function g(){y()}function y(){var P;(P=o.value)==null||P.onClose()}function x(){var P;(P=o.value)==null||P.onOpen()}const b=gs();function A(...P){e("command",...P)}function S(){var P,z;(z=(P=s.value)==null?void 0:P.$el)==null||z.focus()}function C(){}function _(){const P=w(l);p.value.includes("hover")&&(P==null||P.focus()),u.value=null}function M(P){u.value=P}function T(P){d.value||(P.preventDefault(),P.stopImmediatePropagation())}function E(){e("visible-change",!0)}function I(P){var z;(P==null?void 0:P.type)==="keydown"&&((z=l.value)==null||z.focus())}function L(){e("visible-change",!1)}return Qn(CM,{contentRef:l,role:V(()=>n.role),triggerId:v,isUsingKeyboard:d,onItemEnter:C,onItemLeave:_}),Qn("elDropdown",{instance:t,dropdownSize:b,handleClick:g,commandHandler:A,trigger:Ii(n,"trigger"),hideOnClick:Ii(n,"hideOnClick")}),{t:r,ns:i,scrollbar:c,wrapStyle:f,dropdownTriggerKls:h,dropdownSize:b,triggerId:v,currentTabId:u,handleCurrentTabIdChange:M,handlerMainButtonClick:P=>{e("click",P)},handleEntryFocus:T,handleClose:y,handleOpen:x,handleBeforeShowTooltip:E,handleShowTooltip:I,handleBeforeHideTooltip:L,onFocusAfterTrapped:P=>{var z,O;P.preventDefault(),(O=(z=l.value)==null?void 0:z.focus)==null||O.call(z,{preventScroll:!0})},popperRef:o,contentRef:l,triggeringElementRef:s,referenceElementRef:a}}});function Y_e(n,e,t,i,r,s){var a;const o=an("el-dropdown-collection"),l=an("el-roving-focus-group"),c=an("el-scrollbar"),u=an("el-only-child"),d=an("el-tooltip"),f=an("el-button"),h=an("arrow-down"),p=an("el-icon"),m=an("el-button-group");return W(),ve("div",{class:j([n.ns.b(),n.ns.is("disabled",n.disabled)])},[_e(d,{ref:"popperRef",role:n.role,effect:n.effect,"fallback-placements":["bottom","top"],"popper-options":n.popperOptions,"gpu-acceleration":!1,"hide-after":n.trigger==="hover"?n.hideTimeout:0,"manual-mode":!0,placement:n.placement,"popper-class":[n.ns.e("popper"),n.popperClass],"reference-element":(a=n.referenceElementRef)==null?void 0:a.$el,trigger:n.trigger,"trigger-keys":n.triggerKeys,"trigger-target-el":n.contentRef,"show-after":n.trigger==="hover"?n.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":n.triggeringElementRef,"virtual-triggering":n.splitButton,disabled:n.disabled,transition:`${n.ns.namespace.value}-zoom-in-top`,teleported:n.teleported,pure:"",persistent:n.persistent,onBeforeShow:n.handleBeforeShowTooltip,onShow:n.handleShowTooltip,onBeforeHide:n.handleBeforeHideTooltip},Il({content:Re(()=>[_e(c,{ref:"scrollbar","wrap-style":n.wrapStyle,tag:"div","view-class":n.ns.e("list")},{default:Re(()=>[_e(l,{loop:n.loop,"current-tab-id":n.currentTabId,orientation:"horizontal",onCurrentTabIdChange:n.handleCurrentTabIdChange,onEntryFocus:n.handleEntryFocus},{default:Re(()=>[_e(o,null,{default:Re(()=>[Qe(n.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[n.splitButton?void 0:{name:"default",fn:Re(()=>[_e(u,{id:n.triggerId,ref:"triggeringElementRef",role:"button",tabindex:n.tabindex},{default:Re(()=>[Qe(n.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),n.splitButton?(W(),rt(m,{key:0},{default:Re(()=>[_e(f,Kn({ref:"referenceElementRef"},n.buttonProps,{size:n.dropdownSize,type:n.type,disabled:n.disabled,tabindex:n.tabindex,onClick:n.handlerMainButtonClick}),{default:Re(()=>[Qe(n.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),_e(f,Kn({id:n.triggerId,ref:"triggeringElementRef"},n.buttonProps,{role:"button",size:n.dropdownSize,type:n.type,class:n.ns.e("caret-button"),disabled:n.disabled,tabindex:n.tabindex,"aria-label":n.t("el.dropdown.toggleDropdown")}),{default:Re(()=>[_e(p,{class:j(n.ns.e("icon"))},{default:Re(()=>[_e(h)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):et("v-if",!0)],2)}var X_e=It(K_e,[["render",Y_e],["__file","dropdown.vue"]]);const j_e=Ie({components:{ElRovingFocusCollectionItem:C_e},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(n,{emit:e}){const{currentTabbedId:t,loop:i,onItemFocus:r,onItemShiftTab:s}=Nt(Rk,void 0),{getItems:a}=Nt(Dk,void 0),o=ma(),l=ae(),c=Yr(h=>{e("mousedown",h)},h=>{n.focusable?r(w(o)):h.preventDefault()}),u=Yr(h=>{e("focus",h)},()=>{r(w(o))}),d=Yr(h=>{e("keydown",h)},h=>{const{code:p,shiftKey:m,target:v,currentTarget:g}=h;if(p===kt.tab&&m){s();return}if(v!==g)return;const y=I_e(h);if(y){h.preventDefault();let b=a().filter(A=>A.focusable).map(A=>A.ref);switch(y){case"last":{b.reverse();break}case"prev":case"next":{y==="prev"&&b.reverse();const A=b.indexOf(g);b=i.value?D_e(b,A+1):b.slice(A+1);break}}Yt(()=>{Pk(b)})}}),f=V(()=>t.value===w(o));return Qn(JZ,{rovingFocusGroupItemRef:l,tabIndex:V(()=>w(f)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:o,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function $_e(n,e,t,i,r,s){const a=an("el-roving-focus-collection-item");return W(),rt(a,{id:n.id,focusable:n.focusable,active:n.active},{default:Re(()=>[Qe(n.$slots,"default")]),_:3},8,["id","focusable","active"])}var Q_e=It(j_e,[["render",$_e],["__file","roving-focus-item.vue"]]);const Z_e=Ie({name:"DropdownItemImpl",components:{ElIcon:Ut},props:eJ,emits:["pointermove","pointerleave","click","clickimpl"],setup(n,{emit:e}){const t=St("dropdown"),{role:i}=Nt(CM,void 0),{collectionItemRef:r}=Nt(W_e,void 0),{collectionItemRef:s}=Nt(M_e,void 0),{rovingFocusGroupItemRef:a,tabIndex:o,handleFocus:l,handleKeydown:c,handleMousedown:u}=Nt(JZ,void 0),d=_M(r,s,a),f=V(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),h=Yr(p=>{if([kt.enter,kt.numpadEnter,kt.space].includes(p.code))return p.preventDefault(),p.stopImmediatePropagation(),e("clickimpl",p),!0},c);return{ns:t,itemRef:d,dataset:{[QZ]:""},role:f,tabIndex:o,handleFocus:l,handleKeydown:h,handleMousedown:u}}});function J_e(n,e,t,i,r,s){const a=an("el-icon");return W(),ve(Kt,null,[n.divided?(W(),ve("li",{key:0,role:"separator",class:j(n.ns.bem("menu","item","divided"))},null,2)):et("v-if",!0),be("li",Kn({ref:n.itemRef},{...n.dataset,...n.$attrs},{"aria-disabled":n.disabled,class:[n.ns.be("menu","item"),n.ns.is("disabled",n.disabled)],tabindex:n.tabIndex,role:n.role,onClick:o=>n.$emit("clickimpl",o),onFocus:n.handleFocus,onKeydown:ln(n.handleKeydown,["self"]),onMousedown:n.handleMousedown,onPointermove:o=>n.$emit("pointermove",o),onPointerleave:o=>n.$emit("pointerleave",o)}),[n.icon?(W(),rt(a,{key:0},{default:Re(()=>[(W(),rt(On(n.icon)))]),_:1})):et("v-if",!0),Qe(n.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var eCe=It(Z_e,[["render",J_e],["__file","dropdown-item-impl.vue"]]);const nJ=()=>{const n=Nt("elDropdown",{}),e=V(()=>n==null?void 0:n.dropdownSize);return{elDropdown:n,_elDropdownSize:e}},tCe=Ie({name:"ElDropdownItem",components:{ElDropdownCollectionItem:H_e,ElRovingFocusItem:Q_e,ElDropdownItemImpl:eCe},inheritAttrs:!1,props:eJ,emits:["pointermove","pointerleave","click"],setup(n,{emit:e,attrs:t}){const{elDropdown:i}=nJ(),r=Nn(),s=ae(null),a=V(()=>{var h,p;return(p=(h=w(s))==null?void 0:h.textContent)!=null?p:""}),{onItemEnter:o,onItemLeave:l}=Nt(CM,void 0),c=Yr(h=>(e("pointermove",h),h.defaultPrevented),iU(h=>{if(n.disabled){l(h);return}const p=h.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(o(h),h.defaultPrevented||p==null||p.focus())})),u=Yr(h=>(e("pointerleave",h),h.defaultPrevented),iU(l)),d=Yr(h=>{if(!n.disabled)return e("click",h),h.type!=="keydown"&&h.defaultPrevented},h=>{var p,m,v;if(n.disabled){h.stopImmediatePropagation();return}(p=i==null?void 0:i.hideOnClick)!=null&&p.value&&((m=i.handleClick)==null||m.call(i)),(v=i.commandHandler)==null||v.call(i,n.command,r,h)}),f=V(()=>({...n,...t}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:a,propsAndAttrs:f}}});function nCe(n,e,t,i,r,s){var a;const o=an("el-dropdown-item-impl"),l=an("el-roving-focus-item"),c=an("el-dropdown-collection-item");return W(),rt(c,{disabled:n.disabled,"text-value":(a=n.textValue)!=null?a:n.textContent},{default:Re(()=>[_e(l,{focusable:!n.disabled},{default:Re(()=>[_e(o,Kn(n.propsAndAttrs,{onPointerleave:n.handlePointerLeave,onPointermove:n.handlePointerMove,onClickimpl:n.handleClick}),{default:Re(()=>[Qe(n.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var iJ=It(tCe,[["render",nCe],["__file","dropdown-item.vue"]]);const iCe=Ie({name:"ElDropdownMenu",props:O_e,setup(n){const e=St("dropdown"),{_elDropdownSize:t}=nJ(),i=t.value,{focusTrapRef:r,onKeydown:s}=Nt(rk,void 0),{contentRef:a,role:o,triggerId:l}=Nt(CM,void 0),{collectionRef:c,getItems:u}=Nt(G_e,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:f,tabIndex:h,onBlur:p,onFocus:m,onMousedown:v}=Nt(Rk,void 0),{collectionRef:g}=Nt(Dk,void 0),y=V(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),x=_M(a,c,r,d,g),b=Yr(S=>{var C;(C=n.onKeydown)==null||C.call(n,S)},S=>{const{currentTarget:C,code:_,target:M}=S;if(C.contains(M),kt.tab===_&&S.stopImmediatePropagation(),S.preventDefault(),M!==w(a)||!z_e.includes(_))return;const E=u().filter(I=>!I.disabled).map(I=>I.ref);tJ.includes(_)&&E.reverse(),Pk(E)});return{size:i,rovingFocusGroupRootStyle:f,tabIndex:h,dropdownKls:y,role:o,triggerId:l,dropdownListWrapperRef:x,handleKeydown:S=>{b(S),s(S)},onBlur:p,onFocus:m,onMousedown:v}}});function rCe(n,e,t,i,r,s){return W(),ve("ul",{ref:n.dropdownListWrapperRef,class:j(n.dropdownKls),style:jt(n.rovingFocusGroupRootStyle),tabindex:-1,role:n.role,"aria-labelledby":n.triggerId,onBlur:n.onBlur,onFocus:n.onFocus,onKeydown:ln(n.handleKeydown,["self"]),onMousedown:ln(n.onMousedown,["self"])},[Qe(n.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var rJ=It(iCe,[["render",rCe],["__file","dropdown-menu.vue"]]);const sCe=xn(X_e,{DropdownItem:iJ,DropdownMenu:rJ}),aCe=Or(iJ),oCe=Or(rJ),lCe=Ie({name:"ImgEmpty"}),cCe=Ie({...lCe,setup(n){const e=St("empty"),t=ma();return(i,r)=>(W(),ve("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[be("defs",null,[be("linearGradient",{id:`linearGradient-1-${w(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[be("stop",{"stop-color":`var(${w(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),be("stop",{"stop-color":`var(${w(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),be("linearGradient",{id:`linearGradient-2-${w(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[be("stop",{"stop-color":`var(${w(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),be("stop",{"stop-color":`var(${w(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),be("rect",{id:`path-3-${w(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),be("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[be("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[be("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[be("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${w(e).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),be("polygon",{id:"Rectangle-Copy-14",fill:`var(${w(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),be("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[be("polygon",{id:"Rectangle-Copy-10",fill:`var(${w(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),be("polygon",{id:"Rectangle-Copy-11",fill:`var(${w(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),be("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${w(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),be("polygon",{id:"Rectangle-Copy-13",fill:`var(${w(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),be("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${w(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),be("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[be("use",{id:"Mask",fill:`var(${w(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${w(t)}`},null,8,["fill","xlink:href"]),be("polygon",{id:"Rectangle-Copy",fill:`var(${w(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${w(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),be("polygon",{id:"Rectangle-Copy-18",fill:`var(${w(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var uCe=It(cCe,[["__file","img-empty.vue"]]);const dCe=Et({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),fCe=Ie({name:"ElEmpty"}),hCe=Ie({...fCe,props:dCe,setup(n){const e=n,{t}=ci(),i=St("empty"),r=V(()=>e.description||t("el.table.emptyText")),s=V(()=>({width:Hr(e.imageSize)}));return(a,o)=>(W(),ve("div",{class:j(w(i).b())},[be("div",{class:j(w(i).e("image")),style:jt(w(s))},[a.image?(W(),ve("img",{key:0,src:a.image,ondragstart:"return false"},null,8,["src"])):Qe(a.$slots,"image",{key:1},()=>[_e(uCe)])],6),be("div",{class:j(w(i).e("description"))},[a.$slots.description?Qe(a.$slots,"description",{key:0}):(W(),ve("p",{key:1},Tt(w(r)),1))],2),a.$slots.default?(W(),ve("div",{key:0,class:j(w(i).e("bottom"))},[Qe(a.$slots,"default")],2)):et("v-if",!0)],2))}});var pCe=It(hCe,[["__file","empty.vue"]]);const sJ=xn(pCe),mCe=Et({size:{type:String,values:rd},disabled:Boolean}),vCe=Et({...mCe,model:Object,rules:{type:Ke(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),gCe={validate:(n,e,t)=>(Mt(n)||qt(n))&&ji(e)&&qt(t)};function yCe(){const n=ae([]),e=V(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function t(s){const a=n.value.indexOf(s);return a===-1&&e.value,a}function i(s,a){if(s&&a){const o=t(a);n.value.splice(o,1,s)}else s&&n.value.push(s)}function r(s){const a=t(s);a>-1&&n.value.splice(a,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:r}}const gw=(n,e)=>{const t=Xa(e);return t.length>0?n.filter(i=>i.prop&&t.includes(i.prop)):n},bCe="ElForm",xCe=Ie({name:bCe}),ACe=Ie({...xCe,props:vCe,emits:gCe,setup(n,{expose:e,emit:t}){const i=n,r=[],s=gs(),a=St("form"),o=V(()=>{const{labelPosition:x,inline:b}=i;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${x}`)]:x,[a.m("inline")]:b}]}),l=x=>r.find(b=>b.prop===x),c=x=>{r.push(x)},u=x=>{x.prop&&r.splice(r.indexOf(x),1)},d=(x=[])=>{i.model&&gw(r,x).forEach(b=>b.resetField())},f=(x=[])=>{gw(r,x).forEach(b=>b.clearValidate())},h=V(()=>!!i.model),p=x=>{if(r.length===0)return[];const b=gw(r,x);return b.length?b:[]},m=async x=>g(void 0,x),v=async(x=[])=>{if(!h.value)return!1;const b=p(x);if(b.length===0)return!0;let A={};for(const S of b)try{await S.validate(""),S.validateState==="error"&&S.resetField()}catch(C){A={...A,...C}}return Object.keys(A).length===0?!0:Promise.reject(A)},g=async(x=[],b)=>{const A=!Xt(b);try{const S=await v(x);return S===!0&&await(b==null?void 0:b(S)),S}catch(S){if(S instanceof Error)throw S;const C=S;return i.scrollToError&&y(Object.keys(C)[0]),await(b==null?void 0:b(!1,C)),A&&Promise.reject(C)}},y=x=>{var b;const A=gw(r,x)[0];A&&((b=A.$el)==null||b.scrollIntoView(i.scrollIntoViewOptions))};return pt(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(x=>void 0)},{deep:!0,flush:"post"}),Qn(Dm,Si({...Vs(i),emit:t,resetFields:d,clearValidate:f,validateField:g,getField:l,addField:c,removeField:u,...yCe()})),e({validate:m,validateField:g,resetFields:d,clearValidate:f,scrollToField:y,fields:r}),(x,b)=>(W(),ve("form",{class:j(w(o))},[Qe(x.$slots,"default")],2))}});var wCe=It(ACe,[["__file","form.vue"]]);function R0(){return R0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},R0.apply(this,arguments)}function SCe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,dx(n,e)}function WD(n){return WD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WD(n)}function dx(n,e){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},dx(n,e)}function _Ce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r_(n,e,t){return _Ce()?r_=Reflect.construct.bind():r_=function(r,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(r,o),c=new l;return a&&dx(c,a.prototype),c},r_.apply(null,arguments)}function CCe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function qD(n){var e=typeof Map=="function"?new Map:void 0;return qD=function(i){if(i===null||!CCe(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return r_(i,arguments,WD(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),dx(r,i)},qD(n)}var MCe=/%[sdj%]/g,TCe=function(){};function KD(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function xl(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var a=n.replace(MCe,function(o){if(o==="%%")return"%";if(r>=s)return o;switch(o){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch{return"[Circular]"}break;default:return o}});return a}return n}function ECe(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function ia(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||ECe(e)&&typeof n=="string"&&!n)}function ICe(n,e,t){var i=[],r=0,s=n.length;function a(o){i.push.apply(i,o||[]),r++,r===s&&t(i)}n.forEach(function(o){e(o,a)})}function NU(n,e,t){var i=0,r=n.length;function s(a){if(a&&a.length){t(a);return}var o=i;i=i+1,o<r?e(n[o],s):t([])}s([])}function DCe(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var OU=function(n){SCe(e,n);function e(t,i){var r;return r=n.call(this,"Async Validation Error")||this,r.errors=t,r.fields=i,r}return e}(qD(Error));function RCe(n,e,t,i,r){if(e.first){var s=new Promise(function(f,h){var p=function(g){return i(g),g.length?h(new OU(g,KD(g))):f(r)},m=DCe(n);NU(m,t,p)});return s.catch(function(f){return f}),s}var a=e.firstFields===!0?Object.keys(n):e.firstFields||[],o=Object.keys(n),l=o.length,c=0,u=[],d=new Promise(function(f,h){var p=function(v){if(u.push.apply(u,v),c++,c===l)return i(u),u.length?h(new OU(u,KD(u))):f(r)};o.length||(i(u),f(r)),o.forEach(function(m){var v=n[m];a.indexOf(m)!==-1?NU(v,t,p):ICe(v,t,p)})});return d.catch(function(f){return f}),d}function PCe(n){return!!(n&&n.message!==void 0)}function LCe(n,e){for(var t=n,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function UU(n,e){return function(t){var i;return n.fullFields?i=LCe(e,n.fullFields):i=e[t.field||n.fullField],PCe(t)?(t.field=t.field||n.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||n.fullField}}}function zU(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof n[t]=="object"?n[t]=R0({},n[t],i):n[t]=i}}return n}var aJ=function(e,t,i,r,s,a){e.required&&(!i.hasOwnProperty(e.field)||ia(t,a||e.type))&&r.push(xl(s.messages.required,e.fullField))},kCe=function(e,t,i,r,s){(/^\s+$/.test(t)||t==="")&&r.push(xl(s.messages.whitespace,e.fullField))},yw,FCe=function(){if(yw)return yw;var n="[a-fA-F\\d:]",e=function(b){return b&&b.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+r+"$)"),a=new RegExp("^"+t+"$"),o=new RegExp("^"+r+"$"),l=function(b){return b&&b.exact?s:new RegExp("(?:"+e(b)+t+e(b)+")|(?:"+e(b)+r+e(b)+")","g")};l.v4=function(x){return x&&x.exact?a:new RegExp(""+e(x)+t+e(x),"g")},l.v6=function(x){return x&&x.exact?o:new RegExp(""+e(x)+r+e(x),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,f=l.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?',y="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+f+"|"+h+p+m+")"+v+g;return yw=new RegExp("(?:^"+y+"$)","i"),yw},VU={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},O2={integer:function(e){return O2.number(e)&&parseInt(e,10)===e},float:function(e){return O2.number(e)&&!O2.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!O2.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(VU.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(FCe())},hex:function(e){return typeof e=="string"&&!!e.match(VU.hex)}},BCe=function(e,t,i,r,s){if(e.required&&t===void 0){aJ(e,t,i,r,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?O2[o](t)||r.push(xl(s.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&r.push(xl(s.messages.types[o],e.fullField,e.type))},NCe=function(e,t,i,r,s){var a=typeof e.len=="number",o=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,f=typeof t=="number",h=typeof t=="string",p=Array.isArray(t);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(u=t.length),h&&(u=t.replace(c,"_").length),a?u!==e.len&&r.push(xl(s.messages[d].len,e.fullField,e.len)):o&&!l&&u<e.min?r.push(xl(s.messages[d].min,e.fullField,e.min)):l&&!o&&u>e.max?r.push(xl(s.messages[d].max,e.fullField,e.max)):o&&l&&(u<e.min||u>e.max)&&r.push(xl(s.messages[d].range,e.fullField,e.min,e.max))},Xm="enum",OCe=function(e,t,i,r,s){e[Xm]=Array.isArray(e[Xm])?e[Xm]:[],e[Xm].indexOf(t)===-1&&r.push(xl(s.messages[Xm],e.fullField,e[Xm].join(", ")))},UCe=function(e,t,i,r,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(xl(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(t)||r.push(xl(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},er={required:aJ,whitespace:kCe,type:BCe,range:NCe,enum:OCe,pattern:UCe},zCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t,"string")&&!e.required)return i();er.required(e,t,r,a,s,"string"),ia(t,"string")||(er.type(e,t,r,a,s),er.range(e,t,r,a,s),er.pattern(e,t,r,a,s),e.whitespace===!0&&er.whitespace(e,t,r,a,s))}i(a)},VCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s),t!==void 0&&er.type(e,t,r,a,s)}i(a)},HCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t===""&&(t=void 0),ia(t)&&!e.required)return i();er.required(e,t,r,a,s),t!==void 0&&(er.type(e,t,r,a,s),er.range(e,t,r,a,s))}i(a)},GCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s),t!==void 0&&er.type(e,t,r,a,s)}i(a)},WCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s),ia(t)||er.type(e,t,r,a,s)}i(a)},qCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s),t!==void 0&&(er.type(e,t,r,a,s),er.range(e,t,r,a,s))}i(a)},KCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s),t!==void 0&&(er.type(e,t,r,a,s),er.range(e,t,r,a,s))}i(a)},YCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t==null&&!e.required)return i();er.required(e,t,r,a,s,"array"),t!=null&&(er.type(e,t,r,a,s),er.range(e,t,r,a,s))}i(a)},XCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s),t!==void 0&&er.type(e,t,r,a,s)}i(a)},jCe="enum",$Ce=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s),t!==void 0&&er[jCe](e,t,r,a,s)}i(a)},QCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t,"string")&&!e.required)return i();er.required(e,t,r,a,s),ia(t,"string")||er.pattern(e,t,r,a,s)}i(a)},ZCe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t,"date")&&!e.required)return i();if(er.required(e,t,r,a,s),!ia(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),er.type(e,l,r,a,s),l&&er.range(e,l.getTime(),r,a,s)}}i(a)},JCe=function(e,t,i,r,s){var a=[],o=Array.isArray(t)?"array":typeof t;er.required(e,t,r,a,s,o),i(a)},P5=function(e,t,i,r,s){var a=e.type,o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(ia(t,a)&&!e.required)return i();er.required(e,t,r,o,s,a),ia(t,a)||er.type(e,t,r,o,s)}i(o)},e4e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ia(t)&&!e.required)return i();er.required(e,t,r,a,s)}i(a)},db={string:zCe,method:VCe,number:HCe,boolean:GCe,regexp:WCe,integer:qCe,float:KCe,array:YCe,object:XCe,enum:$Ce,pattern:QCe,date:ZCe,url:P5,hex:P5,email:P5,required:JCe,any:e4e};function YD(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var XD=YD(),wA=function(){function n(t){this.rules=null,this._messages=XD,this.define(t)}var e=n.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(s){var a=i[s];r.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(i){return i&&(this._messages=zU(YD(),i)),this._messages},e.validate=function(i,r,s){var a=this;r===void 0&&(r={}),s===void 0&&(s=function(){});var o=i,l=r,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,o),Promise.resolve(o);function u(m){var v=[],g={};function y(b){if(Array.isArray(b)){var A;v=(A=v).concat.apply(A,b)}else v.push(b)}for(var x=0;x<m.length;x++)y(m[x]);v.length?(g=KD(v),c(v,g)):c(null,o)}if(l.messages){var d=this.messages();d===XD&&(d=YD()),zU(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(m){var v=a.rules[m],g=o[m];v.forEach(function(y){var x=y;typeof x.transform=="function"&&(o===i&&(o=R0({},o)),g=o[m]=x.transform(g)),typeof x=="function"?x={validator:x}:x=R0({},x),x.validator=a.getValidationMethod(x),x.validator&&(x.field=m,x.fullField=x.fullField||m,x.type=a.getType(x),f[m]=f[m]||[],f[m].push({rule:x,value:g,source:o,field:m}))})});var p={};return RCe(f,l,function(m,v){var g=m.rule,y=(g.type==="object"||g.type==="array")&&(typeof g.fields=="object"||typeof g.defaultField=="object");y=y&&(g.required||!g.required&&m.value),g.field=m.field;function x(S,C){return R0({},C,{fullField:g.fullField+"."+S,fullFields:g.fullFields?[].concat(g.fullFields,[S]):[S]})}function b(S){S===void 0&&(S=[]);var C=Array.isArray(S)?S:[S];!l.suppressWarning&&C.length&&n.warning("async-validator:",C),C.length&&g.message!==void 0&&(C=[].concat(g.message));var _=C.map(UU(g,o));if(l.first&&_.length)return p[g.field]=1,v(_);if(!y)v(_);else{if(g.required&&!m.value)return g.message!==void 0?_=[].concat(g.message).map(UU(g,o)):l.error&&(_=[l.error(g,xl(l.messages.required,g.field))]),v(_);var M={};g.defaultField&&Object.keys(m.value).map(function(I){M[I]=g.defaultField}),M=R0({},M,m.rule.fields);var T={};Object.keys(M).forEach(function(I){var L=M[I],F=Array.isArray(L)?L:[L];T[I]=F.map(x.bind(null,I))});var E=new n(T);E.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),E.validate(m.value,m.rule.options||l,function(I){var L=[];_&&_.length&&L.push.apply(L,_),I&&I.length&&L.push.apply(L,I),v(L.length?L:null)})}}var A;if(g.asyncValidator)A=g.asyncValidator(g,m.value,b,m.source,l);else if(g.validator){try{A=g.validator(g,m.value,b,m.source,l)}catch(S){console.error==null||console.error(S),l.suppressValidatorError||setTimeout(function(){throw S},0),b(S.message)}A===!0?b():A===!1?b(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||(g.fullField||g.field)+" fails"):A instanceof Array?b(A):A instanceof Error&&b(A.message)}A&&A.then&&A.then(function(){return b()},function(S){return b(S)})},function(m){u(m)},o)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!db.hasOwnProperty(i.type))throw new Error(xl("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?db.required:db[this.getType(i)]||void 0},n}();wA.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");db[e]=t};wA.warning=TCe;wA.messages=XD;wA.validators=db;const t4e=["","error","validating","success"],n4e=Et({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Ke([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Ke([Object,Array])},error:String,validateStatus:{type:String,values:t4e},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:rd}}),HU="ElLabelWrap";var i4e=Ie({name:HU,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=Nt(Dm,void 0),i=Nt($u);i||Rs(HU,"usage: <el-form-item><label-wrap /></el-form-item>");const r=St("form"),s=ae(),a=ae(0),o=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{Yt(()=>{e.default&&n.isAutoWidth&&(u==="update"?a.value=o():u==="remove"&&(t==null||t.deregisterLabelWidth(a.value)))})},c=()=>l("update");return Mn(()=>{c()}),Fi(()=>{l("remove")}),au(()=>c()),pt(a,(u,d)=>{n.updateAll&&(t==null||t.registerLabelWidth(u,d))}),Fr(V(()=>{var u,d;return(d=(u=s.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:f}=n;if(f){const h=t==null?void 0:t.autoLabelWidth,p=i==null?void 0:i.hasLabel,m={};if(p&&h&&h!=="auto"){const v=Math.max(0,Number.parseInt(h,10)-a.value),y=(i.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";v&&(m[y]=`${v}px`)}return _e("div",{ref:s,class:[r.be("item","label-wrap")],style:m},[(u=e.default)==null?void 0:u.call(e)])}else return _e(Kt,{ref:s},[(d=e.default)==null?void 0:d.call(e)])}}});const r4e=Ie({name:"ElFormItem"}),s4e=Ie({...r4e,props:n4e,setup(n,{expose:e}){const t=n,i=Ps(),r=Nt(Dm,void 0),s=Nt($u,void 0),a=gs(void 0,{formItem:!1}),o=St("form-item"),l=ma().value,c=ae([]),u=ae(""),d=sve(u,100),f=ae(""),h=ae();let p,m=!1;const v=V(()=>t.labelPosition||(r==null?void 0:r.labelPosition)),g=V(()=>{if(v.value==="top")return{};const Te=Hr(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return Te?{width:Te}:{}}),y=V(()=>{if(v.value==="top"||r!=null&&r.inline)return{};if(!t.label&&!t.labelWidth&&T)return{};const Te=Hr(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return!t.label&&!i.label?{marginLeft:Te}:{}}),x=V(()=>[o.b(),o.m(a.value),o.is("error",u.value==="error"),o.is("validating",u.value==="validating"),o.is("success",u.value==="success"),o.is("required",B.value||t.required),o.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:r==null?void 0:r.statusIcon,[o.m(`label-${v.value}`)]:v.value}]),b=V(()=>ji(t.inlineMessage)?t.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),A=V(()=>[o.e("error"),{[o.em("error","inline")]:b.value}]),S=V(()=>t.prop?qt(t.prop)?t.prop:t.prop.join("."):""),C=V(()=>!!(t.label||i.label)),_=V(()=>t.for||(c.value.length===1?c.value[0]:void 0)),M=V(()=>!_.value&&C.value),T=!!s,E=V(()=>{const Te=r==null?void 0:r.model;if(!(!Te||!t.prop))return ob(Te,t.prop).value}),I=V(()=>{const{required:Te}=t,De=[];t.rules&&De.push(...Xa(t.rules));const Le=r==null?void 0:r.rules;if(Le&&t.prop){const Ne=ob(Le,t.prop).value;Ne&&De.push(...Xa(Ne))}if(Te!==void 0){const Ne=De.map((Y,oe)=>[Y,oe]).filter(([Y])=>Object.keys(Y).includes("required"));if(Ne.length>0)for(const[Y,oe]of Ne)Y.required!==Te&&(De[oe]={...Y,required:Te});else De.push({required:Te})}return De}),L=V(()=>I.value.length>0),F=Te=>I.value.filter(Le=>!Le.trigger||!Te?!0:Mt(Le.trigger)?Le.trigger.includes(Te):Le.trigger===Te).map(({trigger:Le,...Ne})=>Ne),B=V(()=>I.value.some(Te=>Te.required)),P=V(()=>{var Te;return d.value==="error"&&t.showMessage&&((Te=r==null?void 0:r.showMessage)!=null?Te:!0)}),z=V(()=>`${t.label||""}${(r==null?void 0:r.labelSuffix)||""}`),O=Te=>{u.value=Te},N=Te=>{var De,Le;const{errors:Ne,fields:Y}=Te;(!Ne||!Y)&&console.error(Te),O("error"),f.value=Ne?(Le=(De=Ne==null?void 0:Ne[0])==null?void 0:De.message)!=null?Le:`${t.prop} is required`:"",r==null||r.emit("validate",t.prop,!1,f.value)},H=()=>{O("success"),r==null||r.emit("validate",t.prop,!0,"")},q=async Te=>{const De=S.value;return new wA({[De]:Te}).validate({[De]:E.value},{firstFields:!0}).then(()=>(H(),!0)).catch(Ne=>(N(Ne),Promise.reject(Ne)))},te=async(Te,De)=>{if(m||!t.prop)return!1;const Le=Xt(De);if(!L.value)return De==null||De(!1),!1;const Ne=F(Te);return Ne.length===0?(De==null||De(!0),!0):(O("validating"),q(Ne).then(()=>(De==null||De(!0),!0)).catch(Y=>{const{fields:oe}=Y;return De==null||De(!1,oe),Le?!1:Promise.reject(oe)}))},Q=()=>{O(""),f.value="",m=!1},ee=async()=>{const Te=r==null?void 0:r.model;if(!Te||!t.prop)return;const De=ob(Te,t.prop);m=!0,De.value=d9(p),await Yt(),Q(),m=!1},de=Te=>{c.value.includes(Te)||c.value.push(Te)},J=Te=>{c.value=c.value.filter(De=>De!==Te)};pt(()=>t.error,Te=>{f.value=Te||"",O(Te?"error":"")},{immediate:!0}),pt(()=>t.validateStatus,Te=>O(Te||""));const ue=Si({...Vs(t),$el:h,size:a,validateState:u,labelId:l,inputIds:c,isGroup:M,hasLabel:C,fieldValue:E,addInputId:de,removeInputId:J,resetField:ee,clearValidate:Q,validate:te});return Qn($u,ue),Mn(()=>{t.prop&&(r==null||r.addField(ue),p=d9(E.value))}),Fi(()=>{r==null||r.removeField(ue)}),e({size:a,validateMessage:f,validateState:u,validate:te,clearValidate:Q,resetField:ee}),(Te,De)=>{var Le;return W(),ve("div",{ref_key:"formItemRef",ref:h,class:j(w(x)),role:w(M)?"group":void 0,"aria-labelledby":w(M)?w(l):void 0},[_e(w(i4e),{"is-auto-width":w(g).width==="auto","update-all":((Le=w(r))==null?void 0:Le.labelWidth)==="auto"},{default:Re(()=>[w(C)?(W(),rt(On(w(_)?"label":"div"),{key:0,id:w(l),for:w(_),class:j(w(o).e("label")),style:jt(w(g))},{default:Re(()=>[Qe(Te.$slots,"label",{label:w(z)},()=>[Hn(Tt(w(z)),1)])]),_:3},8,["id","for","class","style"])):et("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),be("div",{class:j(w(o).e("content")),style:jt(w(y))},[Qe(Te.$slots,"default"),_e(s$,{name:`${w(o).namespace.value}-zoom-in-top`},{default:Re(()=>[w(P)?Qe(Te.$slots,"error",{key:0,error:f.value},()=>[be("div",{class:j(w(A))},Tt(f.value),3)]):et("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var oJ=It(s4e,[["__file","form-item.vue"]]);const a4e=xn(wCe,{FormItem:oJ}),o4e=Or(oJ),l4e=Et({urlList:{type:Ke(Array),default:()=>Br([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:Ke(String)}}),c4e={close:()=>!0,switch:n=>Jt(n),rotate:n=>Jt(n)},u4e=Ie({name:"ElImageViewer"}),d4e=Ie({...u4e,props:l4e,emits:c4e,setup(n,{expose:e,emit:t}){var i;const r=n,s={CONTAIN:{name:"contain",icon:tf(xge)},ORIGINAL:{name:"original",icon:tf(Hge)}};let a,o="";const{t:l}=ci(),c=St("image-viewer"),{nextZIndex:u}=ry(),d=ae(),f=ae([]),h=uce(),p=ae(!0),m=ae(r.initialIndex),v=Ui(s.CONTAIN),g=ae({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),y=ae((i=r.zIndex)!=null?i:u()),x=V(()=>{const{urlList:J}=r;return J.length<=1}),b=V(()=>m.value===0),A=V(()=>m.value===r.urlList.length-1),S=V(()=>r.urlList[m.value]),C=V(()=>[c.e("btn"),c.e("prev"),c.is("disabled",!r.infinite&&b.value)]),_=V(()=>[c.e("btn"),c.e("next"),c.is("disabled",!r.infinite&&A.value)]),M=V(()=>{const{scale:J,deg:ue,offsetX:Te,offsetY:De,enableTransition:Le}=g.value;let Ne=Te/J,Y=De/J;const oe=ue*Math.PI/180,ne=Math.cos(oe),Xe=Math.sin(oe);Ne=Ne*ne+Y*Xe,Y=Y*ne-Te/J*Xe;const ke={transform:`scale(${J}) rotate(${ue}deg) translate(${Ne}px, ${Y}px)`,transition:Le?"transform .3s":""};return v.value.name===s.CONTAIN.name&&(ke.maxWidth=ke.maxHeight="100%"),ke}),T=V(()=>`${m.value+1} / ${r.urlList.length}`);function E(){L(),a==null||a(),document.body.style.overflow=o,t("close")}function I(){const J=K0(Te=>{switch(Te.code){case kt.esc:r.closeOnPressEscape&&E();break;case kt.space:O();break;case kt.left:H();break;case kt.up:te("zoomIn");break;case kt.right:q();break;case kt.down:te("zoomOut");break}}),ue=K0(Te=>{const De=Te.deltaY||Te.deltaX;te(De<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})});h.run(()=>{Li(document,"keydown",J),Li(document,"wheel",ue)})}function L(){h.stop()}function F(){p.value=!1}function B(J){p.value=!1,J.target.alt=l("el.image.error")}function P(J){if(p.value||J.button!==0||!d.value)return;g.value.enableTransition=!1;const{offsetX:ue,offsetY:Te}=g.value,De=J.pageX,Le=J.pageY,Ne=K0(oe=>{g.value={...g.value,offsetX:ue+oe.pageX-De,offsetY:Te+oe.pageY-Le}}),Y=Li(document,"mousemove",Ne);Li(document,"mouseup",()=>{Y()}),J.preventDefault()}function z(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function O(){if(p.value)return;const J=p1(s),ue=Object.values(s),Te=v.value.name,Le=(ue.findIndex(Ne=>Ne.name===Te)+1)%J.length;v.value=s[J[Le]],z()}function N(J){const ue=r.urlList.length;m.value=(J+ue)%ue}function H(){b.value&&!r.infinite||N(m.value-1)}function q(){A.value&&!r.infinite||N(m.value+1)}function te(J,ue={}){if(p.value)return;const{minScale:Te,maxScale:De}=r,{zoomRate:Le,rotateDeg:Ne,enableTransition:Y}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...ue};switch(J){case"zoomOut":g.value.scale>Te&&(g.value.scale=Number.parseFloat((g.value.scale/Le).toFixed(3)));break;case"zoomIn":g.value.scale<De&&(g.value.scale=Number.parseFloat((g.value.scale*Le).toFixed(3)));break;case"clockwise":g.value.deg+=Ne,t("rotate",g.value.deg);break;case"anticlockwise":g.value.deg-=Ne,t("rotate",g.value.deg);break}g.value.enableTransition=Y}function Q(J){var ue;((ue=J.detail)==null?void 0:ue.focusReason)==="pointer"&&J.preventDefault()}function ee(){r.closeOnPressEscape&&E()}function de(J){if(J.ctrlKey){if(J.deltaY<0)return J.preventDefault(),!1;if(J.deltaY>0)return J.preventDefault(),!1}}return pt(S,()=>{Yt(()=>{const J=f.value[0];J!=null&&J.complete||(p.value=!0)})}),pt(m,J=>{z(),t("switch",J)}),Mn(()=>{I(),a=Li("wheel",de,{passive:!1}),o=document.body.style.overflow,document.body.style.overflow="hidden"}),e({setActiveItem:N}),(J,ue)=>(W(),rt(w(oy),{to:"body",disabled:!J.teleported},{default:Re(()=>[_e(na,{name:"viewer-fade",appear:""},{default:Re(()=>[be("div",{ref_key:"wrapper",ref:d,tabindex:-1,class:j(w(c).e("wrapper")),style:jt({zIndex:y.value})},[_e(w(ay),{loop:"",trapped:"","focus-trap-el":d.value,"focus-start-el":"container",onFocusoutPrevented:Q,onReleaseRequested:ee},{default:Re(()=>[be("div",{class:j(w(c).e("mask")),onClick:ln(Te=>J.hideOnClickModal&&E(),["self"])},null,10,["onClick"]),et(" CLOSE "),be("span",{class:j([w(c).e("btn"),w(c).e("close")]),onClick:E},[_e(w(Ut),null,{default:Re(()=>[_e(w(nu))]),_:1})],2),et(" ARROW "),w(x)?et("v-if",!0):(W(),ve(Kt,{key:0},[be("span",{class:j(w(C)),onClick:H},[_e(w(Ut),null,{default:Re(()=>[_e(w(np))]),_:1})],2),be("span",{class:j(w(_)),onClick:q},[_e(w(Ut),null,{default:Re(()=>[_e(w(xo))]),_:1})],2)],64)),J.showProgress?(W(),ve("div",{key:1,class:j([w(c).e("btn"),w(c).e("progress")])},[Qe(J.$slots,"progress",{activeIndex:m.value,total:J.urlList.length},()=>[Hn(Tt(w(T)),1)])],2)):et("v-if",!0),et(" ACTIONS "),be("div",{class:j([w(c).e("btn"),w(c).e("actions")])},[be("div",{class:j(w(c).e("actions__inner"))},[Qe(J.$slots,"toolbar",{actions:te,prev:H,next:q,reset:O,activeIndex:m.value},()=>[_e(w(Ut),{onClick:Te=>te("zoomOut")},{default:Re(()=>[_e(w(r1e))]),_:1},8,["onClick"]),_e(w(Ut),{onClick:Te=>te("zoomIn")},{default:Re(()=>[_e(w(AQ))]),_:1},8,["onClick"]),be("i",{class:j(w(c).e("actions__divider"))},null,2),_e(w(Ut),{onClick:O},{default:Re(()=>[(W(),rt(On(w(v).icon)))]),_:1}),be("i",{class:j(w(c).e("actions__divider"))},null,2),_e(w(Ut),{onClick:Te=>te("anticlockwise")},{default:Re(()=>[_e(w(Oge))]),_:1},8,["onClick"]),_e(w(Ut),{onClick:Te=>te("clockwise")},{default:Re(()=>[_e(w(zge))]),_:1},8,["onClick"])])],2)],2),et(" CANVAS "),be("div",{class:j(w(c).e("canvas"))},[(W(!0),ve(Kt,null,Jn(J.urlList,(Te,De)=>Cn((W(),ve("img",{ref_for:!0,ref:Le=>f.value[De]=Le,key:Te,src:Te,style:jt(w(M)),class:j(w(c).e("img")),crossorigin:J.crossorigin,onLoad:F,onError:B,onMousedown:P},null,46,["src","crossorigin"])),[[yi,De===m.value]])),128))],2),Qe(J.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var f4e=It(d4e,[["__file","image-viewer.vue"]]);const lJ=xn(f4e),h4e=Et({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Ke([String,Object])},previewSrcList:{type:Ke(Array),default:()=>Br([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:Ke(String)}}),p4e={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>Jt(n),close:()=>!0,show:()=>!0},m4e=Ie({name:"ElImage",inheritAttrs:!1}),v4e=Ie({...m4e,props:h4e,emits:p4e,setup(n,{expose:e,emit:t}){const i=n,{t:r}=ci(),s=St("image"),a=Cf(),o=V(()=>sx(Object.entries(a).filter(([P])=>/^(data-|on[A-Z])/i.test(P)||["id","style"].includes(P)))),l=yA({excludeListeners:!0,excludeKeys:V(()=>Object.keys(o.value))}),c=ae(),u=ae(!1),d=ae(!0),f=ae(!1),h=ae(),p=ae(),m=li&&"loading"in HTMLImageElement.prototype;let v;const g=V(()=>[s.e("inner"),x.value&&s.e("preview"),d.value&&s.is("loading")]),y=V(()=>{const{fit:P}=i;return li&&P?{objectFit:P}:{}}),x=V(()=>{const{previewSrcList:P}=i;return Mt(P)&&P.length>0}),b=V(()=>{const{previewSrcList:P,initialIndex:z}=i;let O=z;return z>P.length-1&&(O=0),O}),A=V(()=>i.loading==="eager"?!1:!m&&i.loading==="lazy"||i.lazy),S=()=>{li&&(d.value=!0,u.value=!1,c.value=i.src)};function C(P){d.value=!1,u.value=!1,t("load",P)}function _(P){d.value=!1,u.value=!0,t("error",P)}function M(){Swe(h.value,p.value)&&(S(),I())}const T=tQ(M,200,!0);async function E(){var P;if(!li)return;await Yt();const{scrollContainer:z}=i;bo(z)?p.value=z:qt(z)&&z!==""?p.value=(P=document.querySelector(z))!=null?P:void 0:h.value&&(p.value=qL(h.value)),p.value&&(v=Li(p,"scroll",T),setTimeout(()=>M(),100))}function I(){!li||!p.value||!T||(v==null||v(),p.value=void 0)}function L(){x.value&&(f.value=!0,t("show"))}function F(){f.value=!1,t("close")}function B(P){t("switch",P)}return pt(()=>i.src,()=>{A.value?(d.value=!0,u.value=!1,I(),E()):S()}),Mn(()=>{A.value?E():S()}),e({showPreview:L}),(P,z)=>(W(),ve("div",Kn({ref_key:"container",ref:h},w(o),{class:[w(s).b(),P.$attrs.class]}),[u.value?Qe(P.$slots,"error",{key:0},()=>[be("div",{class:j(w(s).e("error"))},Tt(w(r)("el.image.error")),3)]):(W(),ve(Kt,{key:1},[c.value!==void 0?(W(),ve("img",Kn({key:0},w(l),{src:c.value,loading:P.loading,style:w(y),class:w(g),crossorigin:P.crossorigin,onClick:L,onLoad:C,onError:_}),null,16,["src","loading","crossorigin"])):et("v-if",!0),d.value?(W(),ve("div",{key:1,class:j(w(s).e("wrapper"))},[Qe(P.$slots,"placeholder",{},()=>[be("div",{class:j(w(s).e("placeholder"))},null,2)])],2)):et("v-if",!0)],64)),w(x)?(W(),ve(Kt,{key:2},[f.value?(W(),rt(w(lJ),{key:0,"z-index":P.zIndex,"initial-index":w(b),infinite:P.infinite,"zoom-rate":P.zoomRate,"min-scale":P.minScale,"max-scale":P.maxScale,"show-progress":P.showProgress,"url-list":P.previewSrcList,crossorigin:P.crossorigin,"hide-on-click-modal":P.hideOnClickModal,teleported:P.previewTeleported,"close-on-press-escape":P.closeOnPressEscape,onClose:F,onSwitch:B},{progress:Re(O=>[Qe(P.$slots,"progress",yl(Yu(O)))]),toolbar:Re(O=>[Qe(P.$slots,"toolbar",yl(Yu(O)))]),default:Re(()=>[P.$slots.viewer?(W(),ve("div",{key:0},[Qe(P.$slots,"viewer")])):et("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):et("v-if",!0)],64)):et("v-if",!0)],16))}});var g4e=It(v4e,[["__file","image.vue"]]);const y4e=xn(g4e),b4e=Et({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ws,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||Jt(n)||["min","max"].includes(n),default:null},name:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...ga(["ariaLabel"])}),x4e={[zi]:(n,e)=>e!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[Ea]:n=>Jt(n)||Us(n),[Tn]:n=>Jt(n)||Us(n)},A4e=Ie({name:"ElInputNumber"}),w4e=Ie({...A4e,props:b4e,emits:x4e,setup(n,{expose:e,emit:t}){const i=n,{t:r}=ci(),s=St("input-number"),a=ae(),o=Si({currentValue:i.modelValue,userInput:null}),{formItem:l}=La(),c=V(()=>Jt(i.modelValue)&&i.modelValue<=i.min),u=V(()=>Jt(i.modelValue)&&i.modelValue>=i.max),d=V(()=>{const B=g(i.step);return bi(i.precision)?Math.max(g(i.modelValue),B):(B>i.precision,i.precision)}),f=V(()=>i.controls&&i.controlsPosition==="right"),h=gs(),p=ka(),m=V(()=>{if(o.userInput!==null)return o.userInput;let B=o.currentValue;if(Us(B))return"";if(Jt(B)){if(Number.isNaN(B))return"";bi(i.precision)||(B=B.toFixed(i.precision))}return B}),v=(B,P)=>{if(bi(P)&&(P=d.value),P===0)return Math.round(B);let z=String(B);const O=z.indexOf(".");if(O===-1||!z.replace(".","").split("")[O+P])return B;const q=z.length;return z.charAt(q-1)==="5"&&(z=`${z.slice(0,Math.max(0,q-1))}6`),Number.parseFloat(Number(z).toFixed(P))},g=B=>{if(Us(B))return 0;const P=B.toString(),z=P.indexOf(".");let O=0;return z!==-1&&(O=P.length-z-1),O},y=(B,P=1)=>Jt(B)?v(B+i.step*P):o.currentValue,x=()=>{if(i.readonly||p.value||u.value)return;const B=Number(m.value)||0,P=y(B);S(P),t(Ea,o.currentValue),L()},b=()=>{if(i.readonly||p.value||c.value)return;const B=Number(m.value)||0,P=y(B,-1);S(P),t(Ea,o.currentValue),L()},A=(B,P)=>{const{max:z,min:O,step:N,precision:H,stepStrictly:q,valueOnClear:te}=i;z<O&&Rs("InputNumber","min should not be greater than max.");let Q=Number(B);if(Us(B)||Number.isNaN(Q))return null;if(B===""){if(te===null)return null;Q=qt(te)?{min:O,max:z}[te]:te}return q&&(Q=v(Math.round(Q/N)*N,H),Q!==B&&P&&t(Tn,Q)),bi(H)||(Q=v(Q,H)),(Q>z||Q<O)&&(Q=Q>z?z:O,P&&t(Tn,Q)),Q},S=(B,P=!0)=>{var z;const O=o.currentValue,N=A(B);if(!P){t(Tn,N);return}O===N&&B||(o.userInput=null,t(Tn,N),O!==N&&t(zi,N,O),i.validateEvent&&((z=l==null?void 0:l.validate)==null||z.call(l,"change").catch(H=>void 0)),o.currentValue=N)},C=B=>{o.userInput=B;const P=B===""?null:Number(B);t(Ea,P),S(P,!1)},_=B=>{const P=B!==""?Number(B):"";(Jt(P)&&!Number.isNaN(P)||B==="")&&S(P),L(),o.userInput=null},M=()=>{var B,P;(P=(B=a.value)==null?void 0:B.focus)==null||P.call(B)},T=()=>{var B,P;(P=(B=a.value)==null?void 0:B.blur)==null||P.call(B)},E=B=>{t("focus",B)},I=B=>{var P,z;o.userInput=null,yM()&&o.currentValue===null&&((P=a.value)!=null&&P.input)&&(a.value.input.value=""),t("blur",B),i.validateEvent&&((z=l==null?void 0:l.validate)==null||z.call(l,"blur").catch(O=>void 0))},L=()=>{o.currentValue!==i.modelValue&&(o.currentValue=i.modelValue)},F=B=>{document.activeElement===B.target&&B.preventDefault()};return pt(()=>i.modelValue,(B,P)=>{const z=A(B,!0);o.userInput===null&&z!==P&&(o.currentValue=z)},{immediate:!0}),Mn(()=>{var B;const{min:P,max:z,modelValue:O}=i,N=(B=a.value)==null?void 0:B.input;if(N.setAttribute("role","spinbutton"),Number.isFinite(z)?N.setAttribute("aria-valuemax",String(z)):N.removeAttribute("aria-valuemax"),Number.isFinite(P)?N.setAttribute("aria-valuemin",String(P)):N.removeAttribute("aria-valuemin"),N.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),N.setAttribute("aria-disabled",String(p.value)),!Jt(O)&&O!=null){let H=Number(O);Number.isNaN(H)&&(H=null),t(Tn,H)}N.addEventListener("wheel",F,{passive:!1})}),au(()=>{var B,P;const z=(B=a.value)==null?void 0:B.input;z==null||z.setAttribute("aria-valuenow",`${(P=o.currentValue)!=null?P:""}`)}),e({focus:M,blur:T}),(B,P)=>(W(),ve("div",{class:j([w(s).b(),w(s).m(w(h)),w(s).is("disabled",w(p)),w(s).is("without-controls",!B.controls),w(s).is("controls-right",w(f))]),onDragstart:ln(()=>{},["prevent"])},[B.controls?Cn((W(),ve("span",{key:0,role:"button","aria-label":w(r)("el.inputNumber.decrease"),class:j([w(s).e("decrease"),w(s).is("disabled",w(c))]),onKeydown:Xi(b,["enter"])},[Qe(B.$slots,"decrease-icon",{},()=>[_e(w(Ut),null,{default:Re(()=>[w(f)?(W(),rt(w(Ef),{key:0})):(W(),rt(w(Ege),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(yC),b]]):et("v-if",!0),B.controls?Cn((W(),ve("span",{key:1,role:"button","aria-label":w(r)("el.inputNumber.increase"),class:j([w(s).e("increase"),w(s).is("disabled",w(u))]),onKeydown:Xi(x,["enter"])},[Qe(B.$slots,"increase-icon",{},()=>[_e(w(Ut),null,{default:Re(()=>[w(f)?(W(),rt(w(YL),{key:0})):(W(),rt(w(xQ),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(yC),x]]):et("v-if",!0),_e(w(Qa),{id:B.id,ref_key:"input",ref:a,type:"number",step:B.step,"model-value":w(m),placeholder:B.placeholder,readonly:B.readonly,disabled:w(p),size:w(h),max:B.max,min:B.min,name:B.name,"aria-label":B.ariaLabel,"validate-event":!1,onKeydown:[Xi(ln(x,["prevent"]),["up"]),Xi(ln(b,["prevent"]),["down"])],onBlur:I,onFocus:E,onInput:C,onChange:_},Il({_:2},[B.$slots.prefix?{name:"prefix",fn:Re(()=>[Qe(B.$slots,"prefix")])}:void 0,B.$slots.suffix?{name:"suffix",fn:Re(()=>[Qe(B.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var S4e=It(w4e,[["__file","input-number.vue"]]);const cJ=xn(S4e),_4e=Et({modelValue:{type:Ke(Array)},max:Number,tagType:{...hf.type,default:"info"},tagEffect:hf.effect,trigger:{type:Ke(String),default:kt.enter},draggable:{type:Boolean,default:!1},size:ws,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},ariaLabel:String}),C4e={[Tn]:n=>Mt(n)||bi(n),[zi]:n=>Mt(n)||bi(n),[Ea]:n=>qt(n),"add-tag":n=>qt(n),"remove-tag":n=>qt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0};function M4e({props:n,emit:e,formItem:t}){const i=ka(),r=gs(),s=Ui(),a=ae(),o=V(()=>["small"].includes(r.value)?"small":"default"),l=V(()=>{var M;return(M=n.modelValue)!=null&&M.length?void 0:n.placeholder}),c=V(()=>!(n.readonly||i.value)),u=V(()=>{var M,T;return bi(n.max)?!1:((T=(M=n.modelValue)==null?void 0:M.length)!=null?T:0)>=n.max}),d=M=>{if(u.value){a.value=void 0;return}A.value||e(Ea,M.target.value)},f=M=>{var T;if(!A.value)switch(M.code){case n.trigger:M.preventDefault(),M.stopPropagation(),h();break;case kt.numpadEnter:n.trigger===kt.enter&&(M.preventDefault(),M.stopPropagation(),h());break;case kt.backspace:!a.value&&((T=n.modelValue)!=null&&T.length)&&(M.preventDefault(),M.stopPropagation(),p(n.modelValue.length-1));break}},h=()=>{var M,T;const E=(M=a.value)==null?void 0:M.trim();if(!E||u.value)return;const I=[...(T=n.modelValue)!=null?T:[],E];e(Tn,I),e(zi,I),e("add-tag",E),a.value=void 0},p=M=>{var T;const E=((T=n.modelValue)!=null?T:[]).slice(),[I]=E.splice(M,1);e(Tn,E),e(zi,E),e("remove-tag",I)},m=()=>{a.value=void 0,e(Tn,void 0),e(zi,void 0),e("clear")},v=(M,T,E)=>{var I;const L=((I=n.modelValue)!=null?I:[]).slice(),[F]=L.splice(M,1),B=T>M&&E==="before"?-1:T<M&&E==="after"?1:0;L.splice(T+B,0,F),e(Tn,L),e(zi,L)},g=()=>{var M;(M=s.value)==null||M.focus()},y=()=>{var M;(M=s.value)==null||M.blur()},{wrapperRef:x,isFocused:b}=Sp(s,{beforeFocus(){return i.value},afterBlur(){var M;h(),n.validateEvent&&((M=t==null?void 0:t.validate)==null||M.call(t,"blur").catch(T=>void 0))}}),{isComposing:A,handleCompositionStart:S,handleCompositionUpdate:C,handleCompositionEnd:_}=bA({afterComposition:d});return pt(()=>n.modelValue,()=>{var M;n.validateEvent&&((M=t==null?void 0:t.validate)==null||M.call(t,zi).catch(T=>void 0))}),{inputRef:s,wrapperRef:x,isFocused:b,isComposing:A,inputValue:a,size:r,tagSize:o,placeholder:l,closable:c,disabled:i,inputLimit:u,handleDragged:v,handleInput:d,handleKeydown:f,handleAddTag:h,handleRemoveTag:p,handleClear:m,handleCompositionStart:S,handleCompositionUpdate:C,handleCompositionEnd:_,focus:g,blur:y}}function T4e(){const n=ae(!1);return{hovering:n,handleMouseEnter:()=>{n.value=!0},handleMouseLeave:()=>{n.value=!1}}}function Lk(){const n=Ui(),e=ae(0),t=11,i=V(()=>({minWidth:`${Math.max(e.value,t)}px`}));return Fr(n,()=>{var s,a;e.value=(a=(s=n.value)==null?void 0:s.getBoundingClientRect().width)!=null?a:0}),{calculatorRef:n,calculatorWidth:e,inputStyle:i}}function E4e({wrapperRef:n,handleDragged:e,afterDragged:t}){const i=St("input-tag"),r=Ui(),s=ae(!1);let a,o,l,c;function u(p){return`.${i.e("inner")} .${i.namespace.value}-tag:nth-child(${p+1})`}function d(p,m){a=m,o=n.value.querySelector(u(m)),o&&(o.style.opacity="0.5"),p.dataTransfer.effectAllowed="move"}function f(p,m){if(l=m,p.preventDefault(),p.dataTransfer.dropEffect="move",bi(a)||a===m){s.value=!1;return}const v=n.value.querySelector(u(m)).getBoundingClientRect(),g=a+1!==m,y=a-1!==m,x=p.clientX-v.left,b=g?y?.5:1:-1,A=y?g?.5:0:1;x<=v.width*b?c="before":x>v.width*A?c="after":c=void 0;const S=n.value.querySelector(`.${i.e("inner")}`),C=S.getBoundingClientRect(),_=Number.parseFloat(Gd(S,"gap"))/2,M=v.top-C.top;let T=-9999;if(c==="before")T=Math.max(v.left-C.left-_,Math.floor(-_/2));else if(c==="after"){const E=v.right-C.left;T=E+(C.width===E?Math.floor(_/2):_)}pQ(r.value,{top:`${M}px`,left:`${T}px`}),s.value=!!c}function h(p){p.preventDefault(),o&&(o.style.opacity=""),c&&!bi(a)&&!bi(l)&&a!==l&&e(a,l,c),s.value=!1,a=void 0,o=null,l=void 0,c=void 0,t==null||t()}return{dropIndicatorRef:r,showDropIndicator:s,handleDragStart:d,handleDragOver:f,handleDragEnd:h}}function I4e({props:n,isFocused:e,hovering:t,disabled:i,inputValue:r,size:s,validateState:a,validateIcon:o,needStatusIcon:l}){const c=Cf(),u=Ps(),d=St("input-tag"),f=St("input"),h=V(()=>[d.b(),d.is("focused",e.value),d.is("hovering",t.value),d.is("disabled",i.value),d.m(s.value),d.e("wrapper"),c.class]),p=V(()=>[c.style]),m=V(()=>{var y,x;return[d.e("inner"),d.is("draggable",n.draggable),d.is("left-space",!((y=n.modelValue)!=null&&y.length)&&!u.prefix),d.is("right-space",!((x=n.modelValue)!=null&&x.length)&&!g.value)]}),v=V(()=>{var y;return n.clearable&&!i.value&&!n.readonly&&(((y=n.modelValue)==null?void 0:y.length)||r.value)&&(e.value||t.value)}),g=V(()=>u.suffix||v.value||a.value&&o.value&&l.value);return{ns:d,nsInput:f,containerKls:h,containerStyle:p,innerKls:m,showClear:v,showSuffix:g}}const D4e=Ie({name:"ElInputTag",inheritAttrs:!1}),R4e=Ie({...D4e,props:_4e,emits:C4e,setup(n,{expose:e,emit:t}){const i=n,r=yA(),s=Ps(),{form:a,formItem:o}=La(),{inputId:l}=bc(i,{formItemContext:o}),c=V(()=>{var Y;return(Y=a==null?void 0:a.statusIcon)!=null?Y:!1}),u=V(()=>(o==null?void 0:o.validateState)||""),d=V(()=>u.value&&gM[u.value]),{inputRef:f,wrapperRef:h,isFocused:p,inputValue:m,size:v,tagSize:g,placeholder:y,closable:x,disabled:b,handleDragged:A,handleInput:S,handleKeydown:C,handleRemoveTag:_,handleClear:M,handleCompositionStart:T,handleCompositionUpdate:E,handleCompositionEnd:I,focus:L,blur:F}=M4e({props:i,emit:t,formItem:o}),{hovering:B,handleMouseEnter:P,handleMouseLeave:z}=T4e(),{calculatorRef:O,inputStyle:N}=Lk(),{dropIndicatorRef:H,showDropIndicator:q,handleDragStart:te,handleDragOver:Q,handleDragEnd:ee}=E4e({wrapperRef:h,handleDragged:A,afterDragged:L}),{ns:de,nsInput:J,containerKls:ue,containerStyle:Te,innerKls:De,showClear:Le,showSuffix:Ne}=I4e({props:i,hovering:B,isFocused:p,inputValue:m,disabled:b,size:v,validateState:u,validateIcon:d,needStatusIcon:c});return e({focus:L,blur:F}),(Y,oe)=>(W(),ve("div",{ref_key:"wrapperRef",ref:h,class:j(w(ue)),style:jt(w(Te)),onMouseenter:w(P),onMouseleave:w(z)},[w(s).prefix?(W(),ve("div",{key:0,class:j(w(de).e("prefix"))},[Qe(Y.$slots,"prefix")],2)):et("v-if",!0),be("div",{class:j(w(De))},[(W(!0),ve(Kt,null,Jn(Y.modelValue,(ne,Xe)=>(W(),rt(w(x1),{key:Xe,size:w(g),closable:w(x),type:Y.tagType,effect:Y.tagEffect,draggable:w(x)&&Y.draggable,"disable-transitions":"",onClose:ke=>w(_)(Xe),onDragstart:ke=>w(te)(ke,Xe),onDragover:ke=>w(Q)(ke,Xe),onDragend:w(ee),onDrop:ln(()=>{},["stop"])},{default:Re(()=>[Qe(Y.$slots,"tag",{value:ne,index:Xe},()=>[Hn(Tt(ne),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),be("div",{class:j(w(de).e("input-wrapper"))},[Cn(be("input",Kn({id:w(l),ref_key:"inputRef",ref:f,"onUpdate:modelValue":ne=>ir(m)?m.value=ne:null},w(r),{type:"text",minlength:Y.minlength,maxlength:Y.maxlength,disabled:w(b),readonly:Y.readonly,autocomplete:Y.autocomplete,tabindex:Y.tabindex,placeholder:w(y),autofocus:Y.autofocus,ariaLabel:Y.ariaLabel,class:w(de).e("input"),style:w(N),onCompositionstart:w(T),onCompositionupdate:w(E),onCompositionend:w(I),onInput:w(S),onKeydown:w(C)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[rM,w(m)]]),be("span",{ref_key:"calculatorRef",ref:O,"aria-hidden":"true",class:j(w(de).e("input-calculator")),textContent:Tt(w(m))},null,10,["textContent"])],2),Cn(be("div",{ref_key:"dropIndicatorRef",ref:H,class:j(w(de).e("drop-indicator"))},null,2),[[yi,w(q)]])],2),w(Ne)?(W(),ve("div",{key:1,class:j(w(de).e("suffix"))},[Qe(Y.$slots,"suffix"),w(Le)?(W(),rt(w(Ut),{key:0,class:j([w(de).e("icon"),w(de).e("clear")]),onMousedown:ln(w(Pi),["prevent"]),onClick:w(M)},{default:Re(()=>[_e(w(If))]),_:1},8,["class","onMousedown","onClick"])):et("v-if",!0),w(u)&&w(d)&&w(c)?(W(),rt(w(Ut),{key:1,class:j([w(J).e("icon"),w(J).e("validateIcon"),w(J).is("loading",w(u)==="validating")])},{default:Re(()=>[(W(),rt(On(w(d))))]),_:1},8,["class"])):et("v-if",!0)],2)):et("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var P4e=It(R4e,[["__file","input-tag.vue"]]);const L4e=xn(P4e),k4e=Et({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:Hi}}),F4e={click:n=>n instanceof MouseEvent},B4e=Ie({name:"ElLink"}),N4e=Ie({...B4e,props:k4e,emits:F4e,setup(n,{emit:e}){const t=n,i=St("link"),r=V(()=>[i.b(),i.m(t.type),i.is("disabled",t.disabled),i.is("underline",t.underline&&!t.disabled)]);function s(a){t.disabled||e("click",a)}return(a,o)=>(W(),ve("a",{class:j(w(r)),href:a.disabled||!a.href?void 0:a.href,target:a.disabled||!a.href?void 0:a.target,onClick:s},[a.icon?(W(),rt(w(Ut),{key:0},{default:Re(()=>[(W(),rt(On(a.icon)))]),_:1})):et("v-if",!0),a.$slots.default?(W(),ve("span",{key:1,class:j(w(i).e("inner"))},[Qe(a.$slots,"default")],2)):et("v-if",!0),a.$slots.icon?Qe(a.$slots,"icon",{key:2}):et("v-if",!0)],10,["href","target"]))}});var O4e=It(N4e,[["__file","link.vue"]]);const U4e=xn(O4e);let z4e=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",i=>{let r=!1;switch(i.code){case kt.down:{this.gotoSubIndex(this.subIndex+1),r=!0;break}case kt.up:{this.gotoSubIndex(this.subIndex-1),r=!0;break}case kt.tab:{W3(e,"mouseleave");break}case kt.enter:case kt.numpadEnter:case kt.space:{r=!0,i.currentTarget.click();break}}return r&&(i.preventDefault(),i.stopPropagation()),!1})})}},V4e=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new z4e(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let t=!1;switch(e.code){case kt.down:{W3(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case kt.up:{W3(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case kt.tab:{W3(e.currentTarget,"mouseleave");break}case kt.enter:case kt.numpadEnter:case kt.space:{t=!0,e.currentTarget.click();break}}t&&e.preventDefault()})}},H4e=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach(i=>{i.nodeType===1&&new V4e(i,e)})}};const G4e=Ie({name:"ElMenuCollapseTransition"}),W4e=Ie({...G4e,setup(n){const e=St("menu"),t={onBeforeEnter:i=>i.style.opacity="0.2",onEnter(i,r){tc(i,`${e.namespace.value}-opacity-transition`),i.style.opacity="1",r()},onAfterEnter(i){Za(i,`${e.namespace.value}-opacity-transition`),i.style.opacity=""},onBeforeLeave(i){i.dataset||(i.dataset={}),qo(i,e.m("collapse"))?(Za(i,e.m("collapse")),i.dataset.oldOverflow=i.style.overflow,i.dataset.scrollWidth=i.clientWidth.toString(),tc(i,e.m("collapse"))):(tc(i,e.m("collapse")),i.dataset.oldOverflow=i.style.overflow,i.dataset.scrollWidth=i.clientWidth.toString(),Za(i,e.m("collapse"))),i.style.width=`${i.scrollWidth}px`,i.style.overflow="hidden"},onLeave(i){tc(i,"horizontal-collapse-transition"),i.style.width=`${i.dataset.scrollWidth}px`}};return(i,r)=>(W(),rt(na,Kn({mode:"out-in"},w(t)),{default:Re(()=>[Qe(i.$slots,"default")]),_:3},16))}});var q4e=It(W4e,[["__file","menu-collapse-transition.vue"]]);function uJ(n,e){const t=V(()=>{let r=n.parent;const s=[e.value];for(;r.type.name!=="ElMenu";)r.props.index&&s.unshift(r.props.index),r=r.parent;return s});return{parentMenu:V(()=>{let r=n.parent;for(;r&&!["ElMenu","ElSubMenu"].includes(r.type.name);)r=r.parent;return r}),indexPath:t}}function K4e(n){return V(()=>{const t=n.backgroundColor;return t?new nZ(t).shade(20).toString():""})}const dJ=(n,e)=>{const t=St("menu");return V(()=>t.cssVarBlock({"text-color":n.textColor||"","hover-text-color":n.textColor||"","bg-color":n.backgroundColor||"","hover-bg-color":K4e(n).value||"","active-color":n.activeTextColor||"",level:`${e}`}))},Y4e=Et({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:Hi},expandOpenIcon:{type:Hi},collapseCloseIcon:{type:Hi},collapseOpenIcon:{type:Hi}}),L5="ElSubMenu";var kk=Ie({name:L5,props:Y4e,setup(n,{slots:e,expose:t}){const i=Nn(),{indexPath:r,parentMenu:s}=uJ(i,V(()=>n.index)),a=St("menu"),o=St("sub-menu"),l=Nt("rootMenu");l||Rs(L5,"can not inject root menu");const c=Nt(`subMenu:${s.value.uid}`);c||Rs(L5,"can not inject sub menu");const u=ae({}),d=ae({});let f;const h=ae(!1),p=ae(),m=ae(),v=V(()=>_.value==="horizontal"&&y.value?"bottom-start":"right-start"),g=V(()=>_.value==="horizontal"&&y.value||_.value==="vertical"&&!l.props.collapse?n.expandCloseIcon&&n.expandOpenIcon?S.value?n.expandOpenIcon:n.expandCloseIcon:Ef:n.collapseCloseIcon&&n.collapseOpenIcon?S.value?n.collapseOpenIcon:n.collapseCloseIcon:xo),y=V(()=>c.level===0),x=V(()=>{const q=n.teleported;return q===void 0?y.value:q}),b=V(()=>l.props.collapse?`${a.namespace.value}-zoom-in-left`:`${a.namespace.value}-zoom-in-top`),A=V(()=>_.value==="horizontal"&&y.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),S=V(()=>l.openedMenus.includes(n.index)),C=V(()=>[...Object.values(u.value),...Object.values(d.value)].some(({active:q})=>q)),_=V(()=>l.props.mode),M=V(()=>l.props.persistent),T=Si({index:n.index,indexPath:r,active:C}),E=dJ(l.props,c.level+1),I=V(()=>{var q;return(q=n.popperOffset)!=null?q:l.props.popperOffset}),L=V(()=>{var q;return(q=n.popperClass)!=null?q:l.props.popperClass}),F=V(()=>{var q;return(q=n.showTimeout)!=null?q:l.props.showTimeout}),B=V(()=>{var q;return(q=n.hideTimeout)!=null?q:l.props.hideTimeout}),P=()=>{var q,te,Q;return(Q=(te=(q=m.value)==null?void 0:q.popperRef)==null?void 0:te.popperInstanceRef)==null?void 0:Q.destroy()},z=q=>{q||P()},O=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||n.disabled||l.handleSubMenuClick({index:n.index,indexPath:r.value,active:C.value})},N=(q,te=F.value)=>{var Q;if(q.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||n.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,f==null||f(),{stop:f}=am(()=>{l.openMenu(n.index,r.value)},te),x.value&&((Q=s.value.vnode.el)==null||Q.dispatchEvent(new MouseEvent("mouseenter")))}},H=(q=!1)=>{var te;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}f==null||f(),c.mouseInChild.value=!1,{stop:f}=am(()=>!h.value&&l.closeMenu(n.index,r.value),B.value),x.value&&q&&((te=c.handleMouseleave)==null||te.call(c,!0))};pt(()=>l.props.collapse,q=>z(!!q));{const q=Q=>{d.value[Q.index]=Q},te=Q=>{delete d.value[Q.index]};Qn(`subMenu:${i.uid}`,{addSubMenu:q,removeSubMenu:te,handleMouseleave:H,mouseInChild:h,level:c.level+1})}return t({opened:S}),Mn(()=>{l.addSubMenu(T),c.addSubMenu(T)}),Fi(()=>{c.removeSubMenu(T),l.removeSubMenu(T)}),()=>{var q;const te=[(q=e.title)==null?void 0:q.call(e),en(Ut,{class:o.e("icon-arrow"),style:{transform:S.value?n.expandCloseIcon&&n.expandOpenIcon||n.collapseCloseIcon&&n.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>qt(g.value)?en(i.appContext.components[g.value]):en(g.value)})],Q=l.isMenuPopup?en(Da,{ref:m,visible:S.value,effect:"light",pure:!0,offset:I.value,showArrow:!1,persistent:M.value,popperClass:L.value,placement:v.value,teleported:x.value,fallbackPlacements:A.value,transition:b.value,gpuAcceleration:!1},{content:()=>{var ee;return en("div",{class:[a.m(_.value),a.m("popup-container"),L.value],onMouseenter:de=>N(de,100),onMouseleave:()=>H(!0),onFocus:de=>N(de,100)},[en("ul",{class:[a.b(),a.m("popup"),a.m(`popup-${v.value}`)],style:E.value},[(ee=e.default)==null?void 0:ee.call(e)])])},default:()=>en("div",{class:o.e("title"),onClick:O},te)}):en(Kt,{},[en("div",{class:o.e("title"),ref:p,onClick:O},te),en(wM,{},{default:()=>{var ee;return Cn(en("ul",{role:"menu",class:[a.b(),a.m("inline")],style:E.value},[(ee=e.default)==null?void 0:ee.call(e)]),[[yi,S.value]])}})]);return en("li",{class:[o.b(),o.is("active",C.value),o.is("opened",S.value),o.is("disabled",n.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:S.value,onMouseenter:N,onMouseleave:()=>H(),onFocus:N},[Q])}}});const X4e=Et({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Ke(Array),default:()=>Br([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:Hi,default:()=>Rge},popperEffect:{type:Ke(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),k5=n=>Mt(n)&&n.every(e=>qt(e)),j4e={close:(n,e)=>qt(n)&&k5(e),open:(n,e)=>qt(n)&&k5(e),select:(n,e,t,i)=>qt(n)&&k5(e)&&Rn(t)&&(i===void 0||i instanceof Promise)};var $4e=Ie({name:"ElMenu",props:X4e,emits:j4e,setup(n,{emit:e,slots:t,expose:i}){const r=Nn(),s=r.appContext.config.globalProperties.$router,a=ae(),o=St("menu"),l=St("sub-menu"),c=ae(-1),u=ae(n.defaultOpeneds&&!n.collapse?n.defaultOpeneds.slice(0):[]),d=ae(n.defaultActive),f=ae({}),h=ae({}),p=V(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse),m=()=>{const B=d.value&&f.value[d.value];if(!B||n.mode==="horizontal"||n.collapse)return;B.indexPath.forEach(z=>{const O=h.value[z];O&&v(z,O.indexPath)})},v=(B,P)=>{u.value.includes(B)||(n.uniqueOpened&&(u.value=u.value.filter(z=>P.includes(z))),u.value.push(B),e("open",B,P))},g=B=>{const P=u.value.indexOf(B);P!==-1&&u.value.splice(P,1)},y=(B,P)=>{g(B),e("close",B,P)},x=({index:B,indexPath:P})=>{u.value.includes(B)?y(B,P):v(B,P)},b=B=>{(n.mode==="horizontal"||n.collapse)&&(u.value=[]);const{index:P,indexPath:z}=B;if(!(Us(P)||Us(z)))if(n.router&&s){const O=B.route||P,N=s.push(O).then(H=>(H||(d.value=P),H));e("select",P,z,{index:P,indexPath:z,route:O},N)}else d.value=P,e("select",P,z,{index:P,indexPath:z})},A=B=>{var P;const z=f.value,O=z[B]||d.value&&z[d.value]||z[n.defaultActive];d.value=(P=O==null?void 0:O.index)!=null?P:B},S=B=>{const P=getComputedStyle(B),z=Number.parseInt(P.marginLeft,10),O=Number.parseInt(P.marginRight,10);return B.offsetWidth+z+O||0},C=()=>{var B,P;if(!a.value)return-1;const z=Array.from((P=(B=a.value)==null?void 0:B.childNodes)!=null?P:[]).filter(de=>de.nodeName!=="#text"||de.nodeValue),O=64,N=getComputedStyle(a.value),H=Number.parseInt(N.paddingLeft,10),q=Number.parseInt(N.paddingRight,10),te=a.value.clientWidth-H-q;let Q=0,ee=0;return z.forEach((de,J)=>{de.nodeName!=="#comment"&&(Q+=S(de),Q<=te-O&&(ee=J+1))}),ee===z.length?-1:ee},_=B=>h.value[B].indexPath,M=(B,P=33.34)=>{let z;return()=>{z&&clearTimeout(z),z=setTimeout(()=>{B()},P)}};let T=!0;const E=()=>{if(c.value===C())return;const B=()=>{c.value=-1,Yt(()=>{c.value=C()})};T?B():M(B)(),T=!1};pt(()=>n.defaultActive,B=>{f.value[B]||(d.value=""),A(B)}),pt(()=>n.collapse,B=>{B&&(u.value=[])}),pt(f.value,m);let I;Js(()=>{n.mode==="horizontal"&&n.ellipsis?I=Fr(a,E).stop:I==null||I()});const L=ae(!1);{const B=N=>{h.value[N.index]=N},P=N=>{delete h.value[N.index]};Qn("rootMenu",Si({props:n,openedMenus:u,items:f,subMenus:h,activeIndex:d,isMenuPopup:p,addMenuItem:N=>{f.value[N.index]=N},removeMenuItem:N=>{delete f.value[N.index]},addSubMenu:B,removeSubMenu:P,openMenu:v,closeMenu:y,handleMenuItemClick:b,handleSubMenuClick:x})),Qn(`subMenu:${r.uid}`,{addSubMenu:B,removeSubMenu:P,mouseInChild:L,level:0})}Mn(()=>{n.mode==="horizontal"&&new H4e(r.vnode.el,o.namespace.value)}),i({open:P=>{const{indexPath:z}=h.value[P];z.forEach(O=>v(O,z))},close:g,handleResize:E});const F=dJ(n,0);return()=>{var B,P;let z=(P=(B=t.default)==null?void 0:B.call(t))!=null?P:[];const O=[];if(n.mode==="horizontal"&&a.value){const q=Xd(z),te=c.value===-1?q:q.slice(0,c.value),Q=c.value===-1?[]:q.slice(c.value);Q!=null&&Q.length&&n.ellipsis&&(z=te,O.push(en(kk,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:n.popperOffset},{title:()=>en(Ut,{class:l.e("icon-more")},{default:()=>en(n.ellipsisIcon)}),default:()=>Q})))}const N=n.closeOnClickOutside?[[pf,()=>{u.value.length&&(L.value||(u.value.forEach(q=>e("close",q,_(q))),u.value=[]))}]]:[],H=Cn(en("ul",{key:String(n.collapse),role:"menubar",ref:a,style:F.value,class:{[o.b()]:!0,[o.m(n.mode)]:!0,[o.m("collapse")]:n.collapse}},[...z,...O]),N);return n.collapseTransition&&n.mode==="vertical"?en(q4e,()=>H):H}}});const Q4e=Et({index:{type:Ke([String,null]),default:null},route:{type:Ke([String,Object])},disabled:Boolean}),Z4e={click:n=>qt(n.index)&&Mt(n.indexPath)},jD="ElMenuItem",J4e=Ie({name:jD}),eMe=Ie({...J4e,props:Q4e,emits:Z4e,setup(n,{expose:e,emit:t}){const i=n,r=Nn(),s=Nt("rootMenu"),a=St("menu"),o=St("menu-item");s||Rs(jD,"can not inject root menu");const{parentMenu:l,indexPath:c}=uJ(r,Ii(i,"index")),u=Nt(`subMenu:${l.value.uid}`);u||Rs(jD,"can not inject sub menu");const d=V(()=>i.index===s.activeIndex),f=Si({index:i.index,indexPath:c,active:d}),h=()=>{i.disabled||(s.handleMenuItemClick({index:i.index,indexPath:c.value,route:i.route}),t("click",f))};return Mn(()=>{u.addSubMenu(f),s.addMenuItem(f)}),Fi(()=>{u.removeSubMenu(f),s.removeMenuItem(f)}),e({parentMenu:l,rootMenu:s,active:d,nsMenu:a,nsMenuItem:o,handleClick:h}),(p,m)=>(W(),ve("li",{class:j([w(o).b(),w(o).is("active",w(d)),w(o).is("disabled",p.disabled)]),role:"menuitem",tabindex:"-1",onClick:h},[w(l).type.name==="ElMenu"&&w(s).props.collapse&&p.$slots.title?(W(),rt(w(Da),{key:0,effect:w(s).props.popperEffect,placement:"right","fallback-placements":["left"],persistent:w(s).props.persistent},{content:Re(()=>[Qe(p.$slots,"title")]),default:Re(()=>[be("div",{class:j(w(a).be("tooltip","trigger"))},[Qe(p.$slots,"default")],2)]),_:3},8,["effect","persistent"])):(W(),ve(Kt,{key:1},[Qe(p.$slots,"default"),Qe(p.$slots,"title")],64))],2))}});var fJ=It(eMe,[["__file","menu-item.vue"]]);const tMe={title:String},nMe=Ie({name:"ElMenuItemGroup"}),iMe=Ie({...nMe,props:tMe,setup(n){const e=St("menu-item-group");return(t,i)=>(W(),ve("li",{class:j(w(e).b())},[be("div",{class:j(w(e).e("title"))},[t.$slots.title?Qe(t.$slots,"title",{key:1}):(W(),ve(Kt,{key:0},[Hn(Tt(t.title),1)],64))],2),be("ul",null,[Qe(t.$slots,"default")])],2))}});var hJ=It(iMe,[["__file","menu-item-group.vue"]]);const rMe=xn($4e,{MenuItem:fJ,MenuItemGroup:hJ,SubMenu:kk}),sMe=Or(fJ),aMe=Or(hJ),oMe=Or(kk),lMe=Et({icon:{type:Hi,default:()=>Jve},title:String,content:{type:String,default:""}}),cMe={back:()=>!0},uMe=Ie({name:"ElPageHeader"}),dMe=Ie({...uMe,props:lMe,emits:cMe,setup(n,{emit:e}){const{t}=ci(),i=St("page-header");function r(){e("back")}return(s,a)=>(W(),ve("div",{class:j([w(i).b(),{[w(i).m("has-breadcrumb")]:!!s.$slots.breadcrumb,[w(i).m("has-extra")]:!!s.$slots.extra,[w(i).is("contentful")]:!!s.$slots.default}])},[s.$slots.breadcrumb?(W(),ve("div",{key:0,class:j(w(i).e("breadcrumb"))},[Qe(s.$slots,"breadcrumb")],2)):et("v-if",!0),be("div",{class:j(w(i).e("header"))},[be("div",{class:j(w(i).e("left"))},[be("div",{class:j(w(i).e("back")),role:"button",tabindex:"0",onClick:r},[s.icon||s.$slots.icon?(W(),ve("div",{key:0,"aria-label":s.title||w(t)("el.pageHeader.title"),class:j(w(i).e("icon"))},[Qe(s.$slots,"icon",{},()=>[s.icon?(W(),rt(w(Ut),{key:0},{default:Re(()=>[(W(),rt(On(s.icon)))]),_:1})):et("v-if",!0)])],10,["aria-label"])):et("v-if",!0),be("div",{class:j(w(i).e("title"))},[Qe(s.$slots,"title",{},()=>[Hn(Tt(s.title||w(t)("el.pageHeader.title")),1)])],2)],2),_e(w($Z),{direction:"vertical"}),be("div",{class:j(w(i).e("content"))},[Qe(s.$slots,"content",{},()=>[Hn(Tt(s.content),1)])],2)],2),s.$slots.extra?(W(),ve("div",{key:0,class:j(w(i).e("extra"))},[Qe(s.$slots,"extra")],2)):et("v-if",!0)],2),s.$slots.default?(W(),ve("div",{key:1,class:j(w(i).e("main"))},[Qe(s.$slots,"default")],2)):et("v-if",!0)],2))}});var fMe=It(dMe,[["__file","page-header.vue"]]);const hMe=xn(fMe),pJ=Symbol("elPaginationKey"),pMe=Et({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Hi}}),mMe={click:n=>n instanceof MouseEvent},vMe=Ie({name:"ElPaginationPrev"}),gMe=Ie({...vMe,props:pMe,emits:mMe,setup(n){const e=n,{t}=ci(),i=V(()=>e.disabled||e.currentPage<=1);return(r,s)=>(W(),ve("button",{type:"button",class:"btn-prev",disabled:w(i),"aria-label":r.prevText||w(t)("el.pagination.prev"),"aria-disabled":w(i),onClick:a=>r.$emit("click",a)},[r.prevText?(W(),ve("span",{key:0},Tt(r.prevText),1)):(W(),rt(w(Ut),{key:1},{default:Re(()=>[(W(),rt(On(r.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var yMe=It(gMe,[["__file","prev.vue"]]);const bMe=Et({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Hi}}),xMe=Ie({name:"ElPaginationNext"}),AMe=Ie({...xMe,props:bMe,emits:["click"],setup(n){const e=n,{t}=ci(),i=V(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(r,s)=>(W(),ve("button",{type:"button",class:"btn-next",disabled:w(i),"aria-label":r.nextText||w(t)("el.pagination.next"),"aria-disabled":w(i),onClick:a=>r.$emit("click",a)},[r.nextText?(W(),ve("span",{key:0},Tt(r.nextText),1)):(W(),rt(w(Ut),{key:1},{default:Re(()=>[(W(),rt(On(r.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var wMe=It(AMe,[["__file","next.vue"]]);const mJ=Symbol("ElSelectGroup"),cy=Symbol("ElSelect");function SMe(n,e){const t=Nt(cy),i=Nt(mJ,{disabled:!1}),r=V(()=>u(Xa(t.props.modelValue),n.value)),s=V(()=>{var h;if(t.props.multiple){const p=Xa((h=t.props.modelValue)!=null?h:[]);return!r.value&&p.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),a=V(()=>n.label||(Rn(n.value)?"":n.value)),o=V(()=>n.value||n.label||""),l=V(()=>n.disabled||e.groupDisabled||s.value),c=Nn(),u=(h=[],p)=>{if(Rn(n.value)){const m=t.props.valueKey;return h&&h.some(v=>Ki(fs(v,m))===fs(p,m))}else return h&&h.includes(p)},d=()=>{!n.disabled&&!i.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(c.proxy))},f=h=>{const p=new RegExp(gk(h),"i");e.visible=p.test(a.value)||n.created};return pt(()=>a.value,()=>{!n.created&&!t.props.remote&&t.setSelected()}),pt(()=>n.value,(h,p)=>{const{remote:m,valueKey:v}=t.props;if((m?h!==p:!ha(h,p))&&(t.onOptionDestroy(p,c.proxy),t.onOptionCreate(c.proxy)),!n.created&&!m){if(v&&Rn(h)&&Rn(p)&&h[v]===p[v])return;t.setSelected()}}),pt(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:t,currentLabel:a,currentValue:o,itemSelected:r,isDisabled:l,hoverItem:d,updateOption:f}}const _Me=Ie({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(n){const e=St("select"),t=ma(),i=V(()=>[e.be("dropdown","item"),e.is("disabled",w(o)),e.is("selected",w(a)),e.is("hovering",w(f))]),r=Si({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:a,isDisabled:o,select:l,hoverItem:c,updateOption:u}=SMe(n,r),{visible:d,hover:f}=Vs(r),h=Nn().proxy;l.onOptionCreate(h),Fi(()=>{const m=h.value,{selected:v}=l.states,g=v.some(y=>y.value===h.value);Yt(()=>{l.states.cachedOptions.get(m)===h&&!g&&l.states.cachedOptions.delete(m)}),l.onOptionDestroy(m,h)});function p(){o.value||l.handleOptionSelect(h)}return{ns:e,id:t,containerKls:i,currentLabel:s,itemSelected:a,isDisabled:o,select:l,hoverItem:c,updateOption:u,visible:d,hover:f,selectOptionClick:p,states:r}}});function CMe(n,e,t,i,r,s){return Cn((W(),ve("li",{id:n.id,class:j(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMousemove:n.hoverItem,onClick:ln(n.selectOptionClick,["stop"])},[Qe(n.$slots,"default",{},()=>[be("span",null,Tt(n.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[yi,n.visible]])}var Fk=It(_Me,[["render",CMe],["__file","option.vue"]]);const MMe=Ie({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=Nt(cy),e=St("select"),t=V(()=>n.props.popperClass),i=V(()=>n.props.multiple),r=V(()=>n.props.fitInputWidth),s=ae("");function a(){var o;s.value=`${(o=n.selectRef)==null?void 0:o.offsetWidth}px`}return Mn(()=>{a(),Fr(n.selectRef,a)}),{ns:e,minWidth:s,popperClass:t,isMultiple:i,isFitInputWidth:r}}});function TMe(n,e,t,i,r,s){return W(),ve("div",{class:j([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:jt({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?(W(),ve("div",{key:0,class:j(n.ns.be("dropdown","header"))},[Qe(n.$slots,"header")],2)):et("v-if",!0),Qe(n.$slots,"default"),n.$slots.footer?(W(),ve("div",{key:1,class:j(n.ns.be("dropdown","footer"))},[Qe(n.$slots,"footer")],2)):et("v-if",!0)],6)}var EMe=It(MMe,[["render",TMe],["__file","select-dropdown.vue"]]);const IMe=(n,e)=>{const{t}=ci(),i=ma(),r=St("select"),s=St("input"),a=Si({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),o=ae(null),l=ae(null),c=ae(null),u=ae(null),d=ae(null),f=ae(null),h=ae(null),p=ae(null),m=ae(null),v=ae(null),g=ae(null),{isComposing:y,handleCompositionStart:x,handleCompositionUpdate:b,handleCompositionEnd:A}=bA({afterComposition:We=>At(We)}),{wrapperRef:S,isFocused:C,handleBlur:_}=Sp(d,{beforeFocus(){return P.value},afterFocus(){n.automaticDropdown&&!M.value&&(M.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(We){var xt,Pt;return((xt=c.value)==null?void 0:xt.isFocusInsideContent(We))||((Pt=u.value)==null?void 0:Pt.isFocusInsideContent(We))},afterBlur(){M.value=!1,a.menuVisibleOnFocus=!1}}),M=ae(!1),T=ae(),{form:E,formItem:I}=La(),{inputId:L}=bc(n,{formItemContext:I}),{valueOnClear:F,isEmptyValue:B}=hM(n),P=V(()=>n.disabled||(E==null?void 0:E.disabled)),z=V(()=>Mt(n.modelValue)?n.modelValue.length>0:!B(n.modelValue)),O=V(()=>{var We;return(We=E==null?void 0:E.statusIcon)!=null?We:!1}),N=V(()=>n.clearable&&!P.value&&a.inputHovering&&z.value),H=V(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),q=V(()=>r.is("reverse",H.value&&M.value)),te=V(()=>(I==null?void 0:I.validateState)||""),Q=V(()=>gM[te.value]),ee=V(()=>n.remote?300:0),de=V(()=>n.remote&&!a.inputValue&&a.options.size===0),J=V(()=>n.loading?n.loadingText||t("el.select.loading"):n.filterable&&a.inputValue&&a.options.size>0&&ue.value===0?n.noMatchText||t("el.select.noMatch"):a.options.size===0?n.noDataText||t("el.select.noData"):null),ue=V(()=>Te.value.filter(We=>We.visible).length),Te=V(()=>{const We=Array.from(a.options.values()),xt=[];return a.optionValues.forEach(Pt=>{const dn=We.findIndex(En=>En.value===Pt);dn>-1&&xt.push(We[dn])}),xt.length>=We.length?xt:We}),De=V(()=>Array.from(a.cachedOptions.values())),Le=V(()=>{const We=Te.value.filter(xt=>!xt.created).some(xt=>xt.currentLabel===a.inputValue);return n.filterable&&n.allowCreate&&a.inputValue!==""&&!We}),Ne=()=>{n.filterable&&Xt(n.filterMethod)||n.filterable&&n.remote&&Xt(n.remoteMethod)||Te.value.forEach(We=>{var xt;(xt=We.updateOption)==null||xt.call(We,a.inputValue)})},Y=gs(),oe=V(()=>["small"].includes(Y.value)?"small":"default"),ne=V({get(){return M.value&&!de.value},set(We){M.value=We}}),Xe=V(()=>{if(n.multiple&&!bi(n.modelValue))return Xa(n.modelValue).length===0&&!a.inputValue;const We=Mt(n.modelValue)?n.modelValue[0]:n.modelValue;return n.filterable||bi(We)?!a.inputValue:!0}),ke=V(()=>{var We;const xt=(We=n.placeholder)!=null?We:t("el.select.placeholder");return n.multiple||!z.value?xt:a.selectedLabel}),Ge=V(()=>pC?null:"mouseenter");pt(()=>n.modelValue,(We,xt)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(a.inputValue="",He("")),tt(),!ha(We,xt)&&n.validateEvent&&(I==null||I.validate("change").catch(Pt=>void 0))},{flush:"post",deep:!0}),pt(()=>M.value,We=>{We?He(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),e("visible-change",We)}),pt(()=>a.options.entries(),()=>{li&&(tt(),n.defaultFirstOption&&(n.filterable||n.remote)&&ue.value&&qe())},{flush:"post"}),pt(()=>a.hoveringIndex,We=>{Jt(We)&&We>-1?T.value=Te.value[We]||{}:T.value={},Te.value.forEach(xt=>{xt.hover=T.value===xt})}),Js(()=>{a.isBeforeHide||Ne()});const He=We=>{a.previousQuery===We||y.value||(a.previousQuery=We,n.filterable&&Xt(n.filterMethod)?n.filterMethod(We):n.filterable&&n.remote&&Xt(n.remoteMethod)&&n.remoteMethod(We),n.defaultFirstOption&&(n.filterable||n.remote)&&ue.value?Yt(qe):Yt(G))},qe=()=>{const We=Te.value.filter(En=>En.visible&&!En.disabled&&!En.states.groupDisabled),xt=We.find(En=>En.created),Pt=We[0],dn=Te.value.map(En=>En.value);a.hoveringIndex=me(dn,xt||Pt)},tt=()=>{if(n.multiple)a.selectedLabel="";else{const xt=Mt(n.modelValue)?n.modelValue[0]:n.modelValue,Pt=pe(xt);a.selectedLabel=Pt.currentLabel,a.selected=[Pt];return}const We=[];bi(n.modelValue)||Xa(n.modelValue).forEach(xt=>{We.push(pe(xt))}),a.selected=We},pe=We=>{let xt;const Pt=Yb(We);for(let ei=a.cachedOptions.size-1;ei>=0;ei--){const Je=De.value[ei];if(Pt?fs(Je.value,n.valueKey)===fs(We,n.valueKey):Je.value===We){xt={value:We,currentLabel:Je.currentLabel,get isDisabled(){return Je.isDisabled}};break}}if(xt)return xt;const dn=Pt?We.label:We??"";return{value:We,currentLabel:dn}},G=()=>{a.hoveringIndex=Te.value.findIndex(We=>a.selected.some(xt=>Qi(xt)===Qi(We)))},Z=()=>{a.selectionWidth=l.value.getBoundingClientRect().width},ge=()=>{a.collapseItemWidth=v.value.getBoundingClientRect().width},Oe=()=>{var We,xt;(xt=(We=c.value)==null?void 0:We.updatePopper)==null||xt.call(We)},je=()=>{var We,xt;(xt=(We=u.value)==null?void 0:We.updatePopper)==null||xt.call(We)},bt=()=>{a.inputValue.length>0&&!M.value&&(M.value=!0),He(a.inputValue)},At=We=>{if(a.inputValue=We.target.value,n.remote)Ee();else return bt()},Ee=Jo(()=>{bt()},ee.value),gt=We=>{ha(n.modelValue,We)||e(zi,We)},lt=We=>$$(We,xt=>{const Pt=a.cachedOptions.get(xt);return Pt&&!Pt.disabled&&!Pt.states.groupDisabled}),$=We=>{if(n.multiple&&We.code!==kt.delete&&We.target.value.length<=0){const xt=Xa(n.modelValue).slice(),Pt=lt(xt);if(Pt<0)return;const dn=xt[Pt];xt.splice(Pt,1),e(Tn,xt),gt(xt),e("remove-tag",dn)}},le=(We,xt)=>{const Pt=a.selected.indexOf(xt);if(Pt>-1&&!P.value){const dn=Xa(n.modelValue).slice();dn.splice(Pt,1),e(Tn,dn),gt(dn),e("remove-tag",xt.value)}We.stopPropagation(),wt()},fe=We=>{We.stopPropagation();const xt=n.multiple?[]:F.value;if(n.multiple)for(const Pt of a.selected)Pt.isDisabled&&xt.push(Pt.value);e(Tn,xt),gt(xt),a.hoveringIndex=-1,M.value=!1,e("clear"),wt()},Me=We=>{var xt;if(n.multiple){const Pt=Xa((xt=n.modelValue)!=null?xt:[]).slice(),dn=me(Pt,We);dn>-1?Pt.splice(dn,1):(n.multipleLimit<=0||Pt.length<n.multipleLimit)&&Pt.push(We.value),e(Tn,Pt),gt(Pt),We.created&&He(""),n.filterable&&!n.reserveKeyword&&(a.inputValue="")}else e(Tn,We.value),gt(We.value),M.value=!1;wt(),!M.value&&Yt(()=>{Ae(We)})},me=(We=[],xt)=>bi(xt)?-1:Rn(xt.value)?We.findIndex(Pt=>ha(fs(Pt,n.valueKey),Qi(xt))):We.indexOf(xt.value),Ae=We=>{var xt,Pt,dn,En,ei;const Je=Mt(We)?We[0]:We;let ti=null;if(Je!=null&&Je.value){const st=Te.value.filter(nr=>nr.value===Je.value);st.length>0&&(ti=st[0].$el)}if(c.value&&ti){const st=(En=(dn=(Pt=(xt=c.value)==null?void 0:xt.popperRef)==null?void 0:Pt.contentRef)==null?void 0:dn.querySelector)==null?void 0:En.call(dn,`.${r.be("dropdown","wrap")}`);st&&KL(st,ti)}(ei=g.value)==null||ei.handleScroll()},dt=We=>{a.options.set(We.value,We),a.cachedOptions.set(We.value,We)},we=(We,xt)=>{a.options.get(We)===xt&&a.options.delete(We)},_t=V(()=>{var We,xt;return(xt=(We=c.value)==null?void 0:We.popperRef)==null?void 0:xt.contentRef}),it=()=>{a.isBeforeHide=!1,Yt(()=>{var We;(We=g.value)==null||We.update(),Ae(a.selected)})},wt=()=>{var We;(We=d.value)==null||We.focus()},Ft=()=>{var We;if(M.value){M.value=!1,Yt(()=>{var xt;return(xt=d.value)==null?void 0:xt.blur()});return}(We=d.value)==null||We.blur()},Rt=We=>{fe(We)},Wt=We=>{if(M.value=!1,C.value){const xt=new FocusEvent("focus",We);Yt(()=>_(xt))}},hn=()=>{a.inputValue.length>0?a.inputValue="":M.value=!1},pi=()=>{P.value||(pC&&(a.inputHovering=!0),a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:M.value=!M.value)},Pn=()=>{if(!M.value)pi();else{const We=Te.value[a.hoveringIndex];We&&!We.isDisabled&&Me(We)}},Qi=We=>Rn(We.value)?fs(We.value,n.valueKey):We.value,ai=V(()=>Te.value.filter(We=>We.visible).every(We=>We.isDisabled)),X=V(()=>n.multiple?n.collapseTags?a.selected.slice(0,n.maxCollapseTags):a.selected:[]),se=V(()=>n.multiple?n.collapseTags?a.selected.slice(n.maxCollapseTags):[]:[]),zt=We=>{if(!M.value){M.value=!0;return}if(!(a.options.size===0||ue.value===0||y.value)&&!ai.value){We==="next"?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):We==="prev"&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const xt=Te.value[a.hoveringIndex];(xt.isDisabled||!xt.visible)&&zt(We),Yt(()=>Ae(T.value))}},Ce=()=>{if(!l.value)return 0;const We=window.getComputedStyle(l.value);return Number.parseFloat(We.gap||"6px")},ce=V(()=>{const We=Ce();return{maxWidth:`${v.value&&n.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-We:a.selectionWidth}px`}}),Ct=V(()=>({maxWidth:`${a.selectionWidth}px`})),vt=We=>{e("popup-scroll",We)};return Fr(l,Z),Fr(p,Oe),Fr(S,Oe),Fr(m,je),Fr(v,ge),Mn(()=>{tt()}),{inputId:L,contentId:i,nsSelect:r,nsInput:s,states:a,isFocused:C,expanded:M,optionsArray:Te,hoverOption:T,selectSize:Y,filteredOptionsCount:ue,updateTooltip:Oe,updateTagTooltip:je,debouncedOnInputChange:Ee,onInput:At,deletePrevTag:$,deleteTag:le,deleteSelected:fe,handleOptionSelect:Me,scrollToOption:Ae,hasModelValue:z,shouldShowPlaceholder:Xe,currentPlaceholder:ke,mouseEnterEventName:Ge,needStatusIcon:O,showClose:N,iconComponent:H,iconReverse:q,validateState:te,validateIcon:Q,showNewOption:Le,updateOptions:Ne,collapseTagSize:oe,setSelected:tt,selectDisabled:P,emptyText:J,handleCompositionStart:x,handleCompositionUpdate:b,handleCompositionEnd:A,onOptionCreate:dt,onOptionDestroy:we,handleMenuEnter:it,focus:wt,blur:Ft,handleClearClick:Rt,handleClickOutside:Wt,handleEsc:hn,toggleMenu:pi,selectOption:Pn,getValueKey:Qi,navigateOptions:zt,dropdownMenuVisible:ne,showTagList:X,collapseTagList:se,popupScroll:vt,tagStyle:ce,collapseTagStyle:Ct,popperRef:_t,inputRef:d,tooltipRef:c,tagTooltipRef:u,prefixRef:f,suffixRef:h,selectRef:o,wrapperRef:S,selectionRef:l,scrollbarRef:g,menuRef:p,tagMenuRef:m,collapseItemRef:v}};var DMe=Ie({name:"ElOptions",setup(n,{slots:e}){const t=Nt(cy);let i=[];return()=>{var r,s;const a=(r=e.default)==null?void 0:r.call(e),o=[];function l(c){Mt(c)&&c.forEach(u=>{var d,f,h,p;const m=(d=(u==null?void 0:u.type)||{})==null?void 0:d.name;m==="ElOptionGroup"?l(!qt(u.children)&&!Mt(u.children)&&Xt((f=u.children)==null?void 0:f.default)?(h=u.children)==null?void 0:h.default():u.children):m==="ElOption"?o.push((p=u.props)==null?void 0:p.value):Mt(u.children)&&l(u.children)})}return a.length&&l((s=a[0])==null?void 0:s.children),ha(o,i)||(i=o,t&&(t.states.optionValues=o)),a}}});const RMe=Et({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:ws,effect:{type:Ke(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ke(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Ks.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Hi,default:If},fitInputWidth:Boolean,suffixIcon:{type:Hi,default:Ef},tagType:{...hf.type,default:"info"},tagEffect:{...hf.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Ke(String),values:Df,default:"bottom-start"},fallbackPlacements:{type:Ke(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String,...sy,...ga(["ariaLabel"])}),GU="ElSelect",PMe=Ie({name:GU,componentName:GU,components:{ElSelectMenu:EMe,ElOption:Fk,ElOptions:DMe,ElTag:x1,ElScrollbar:sd,ElTooltip:Da,ElIcon:Ut},directives:{ClickOutside:pf},props:RMe,emits:[Tn,zi,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(n,{emit:e}){const t=V(()=>{const{modelValue:l,multiple:c}=n,u=c?[]:void 0;return Mt(l)?c?l:u:c?u:l}),i=Si({...Vs(n),modelValue:t}),r=IMe(i,e),{calculatorRef:s,inputStyle:a}=Lk();Qn(cy,Si({props:i,states:r.states,optionsArray:r.optionsArray,handleOptionSelect:r.handleOptionSelect,onOptionCreate:r.onOptionCreate,onOptionDestroy:r.onOptionDestroy,selectRef:r.selectRef,setSelected:r.setSelected}));const o=V(()=>n.multiple?r.states.selected.map(l=>l.currentLabel):r.states.selectedLabel);return{...r,modelValue:t,selectedLabel:o,calculatorRef:s,inputStyle:a}}});function LMe(n,e,t,i,r,s){const a=an("el-tag"),o=an("el-tooltip"),l=an("el-icon"),c=an("el-option"),u=an("el-options"),d=an("el-scrollbar"),f=an("el-select-menu"),h=tM("click-outside");return Cn((W(),ve("div",{ref:"selectRef",class:j([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),[J2(n.mouseEnterEventName)]:p=>n.states.inputHovering=!0,onMouseleave:p=>n.states.inputHovering=!1},[_e(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:p=>n.states.isBeforeHide=!1},{default:Re(()=>{var p;return[be("div",{ref:"wrapperRef",class:j([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:ln(n.toggleMenu,["prevent"])},[n.$slots.prefix?(W(),ve("div",{key:0,ref:"prefixRef",class:j(n.nsSelect.e("prefix"))},[Qe(n.$slots,"prefix")],2)):et("v-if",!0),be("div",{ref:"selectionRef",class:j([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?Qe(n.$slots,"tag",{key:0},()=>[(W(!0),ve(Kt,null,Jn(n.showTagList,m=>(W(),ve("div",{key:n.getValueKey(m),class:j(n.nsSelect.e("selected-item"))},[_e(a,{closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:jt(n.tagStyle),onClose:v=>n.deleteTag(v,m)},{default:Re(()=>[be("span",{class:j(n.nsSelect.e("tags-text"))},[Qe(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Hn(Tt(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?(W(),rt(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:Re(()=>[be("div",{ref:"collapseItemRef",class:j(n.nsSelect.e("selected-item"))},[_e(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:jt(n.collapseTagStyle)},{default:Re(()=>[be("span",{class:j(n.nsSelect.e("tags-text"))}," + "+Tt(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Re(()=>[be("div",{ref:"tagMenuRef",class:j(n.nsSelect.e("selection"))},[(W(!0),ve(Kt,null,Jn(n.collapseTagList,m=>(W(),ve("div",{key:n.getValueKey(m),class:j(n.nsSelect.e("selected-item"))},[_e(a,{class:"in-tooltip",closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:v=>n.deleteTag(v,m)},{default:Re(()=>[be("span",{class:j(n.nsSelect.e("tags-text"))},[Qe(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Hn(Tt(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):et("v-if",!0)]):et("v-if",!0),be("div",{class:j([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Cn(be("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":m=>n.states.inputValue=m,type:"text",name:n.name,class:j([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:jt(n.inputStyle),tabindex:n.tabindex,role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((p=n.hoverOption)==null?void 0:p.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Xi(ln(m=>n.navigateOptions("next"),["stop","prevent"]),["down"]),Xi(ln(m=>n.navigateOptions("prev"),["stop","prevent"]),["up"]),Xi(ln(n.handleEsc,["stop","prevent"]),["esc"]),Xi(ln(n.selectOption,["stop","prevent"]),["enter"]),Xi(ln(n.deletePrevTag,["stop"]),["delete"])],onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onInput:n.onInput,onClick:ln(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[rM,n.states.inputValue]]),n.filterable?(W(),ve("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:j(n.nsSelect.e("input-calculator")),textContent:Tt(n.states.inputValue)},null,10,["textContent"])):et("v-if",!0)],2),n.shouldShowPlaceholder?(W(),ve("div",{key:1,class:j([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?Qe(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[be("span",null,Tt(n.currentPlaceholder),1)]):(W(),ve("span",{key:1},Tt(n.currentPlaceholder),1))],2)):et("v-if",!0)],2),be("div",{ref:"suffixRef",class:j(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?(W(),rt(l,{key:0,class:j([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:Re(()=>[(W(),rt(On(n.iconComponent)))]),_:1},8,["class"])):et("v-if",!0),n.showClose&&n.clearIcon?(W(),rt(l,{key:1,class:j([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.nsSelect.e("clear")]),onClick:n.handleClearClick},{default:Re(()=>[(W(),rt(On(n.clearIcon)))]),_:1},8,["class","onClick"])):et("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(W(),rt(l,{key:2,class:j([n.nsInput.e("icon"),n.nsInput.e("validateIcon"),n.nsInput.is("loading",n.validateState==="validating")])},{default:Re(()=>[(W(),rt(On(n.validateIcon)))]),_:1},8,["class"])):et("v-if",!0)],2)],10,["onClick"])]}),content:Re(()=>[_e(f,{ref:"menuRef"},{default:Re(()=>[n.$slots.header?(W(),ve("div",{key:0,class:j(n.nsSelect.be("dropdown","header")),onClick:ln(()=>{},["stop"])},[Qe(n.$slots,"header")],10,["onClick"])):et("v-if",!0),Cn(_e(d,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:j([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical",onScroll:n.popupScroll},{default:Re(()=>[n.showNewOption?(W(),rt(c,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):et("v-if",!0),_e(u,null,{default:Re(()=>[Qe(n.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[yi,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?(W(),ve("div",{key:1,class:j(n.nsSelect.be("dropdown","loading"))},[Qe(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?(W(),ve("div",{key:2,class:j(n.nsSelect.be("dropdown","empty"))},[Qe(n.$slots,"empty",{},()=>[be("span",null,Tt(n.emptyText),1)])],2)):et("v-if",!0),n.$slots.footer?(W(),ve("div",{key:3,class:j(n.nsSelect.be("dropdown","footer")),onClick:ln(()=>{},["stop"])},[Qe(n.$slots,"footer")],10,["onClick"])):et("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[h,n.handleClickOutside,n.popperRef]])}var kMe=It(PMe,[["render",LMe],["__file","select.vue"]]);const FMe=Ie({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const e=St("select"),t=ae(null),i=Nn(),r=ae([]);Qn(mJ,Si({...Vs(n)}));const s=V(()=>r.value.some(c=>c.visible===!0)),a=c=>{var u,d;return((u=c.type)==null?void 0:u.name)==="ElOption"&&!!((d=c.component)!=null&&d.proxy)},o=c=>{const u=Xa(c),d=[];return u.forEach(f=>{var h,p;a(f)?d.push(f.component.proxy):(h=f.children)!=null&&h.length?d.push(...o(f.children)):(p=f.component)!=null&&p.subTree&&d.push(...o(f.component.subTree))}),d},l=()=>{r.value=o(i.subTree)};return Mn(()=>{l()}),iQ(t,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:t,visible:s,ns:e}}});function BMe(n,e,t,i,r,s){return Cn((W(),ve("ul",{ref:"groupRef",class:j(n.ns.be("group","wrap"))},[be("li",{class:j(n.ns.be("group","title"))},Tt(n.label),3),be("li",null,[be("ul",{class:j(n.ns.b("group"))},[Qe(n.$slots,"default")],2)])],2)),[[yi,n.visible]])}var vJ=It(FMe,[["render",BMe],["__file","option-group.vue"]]);const lm=xn(kMe,{Option:Fk,OptionGroup:vJ}),AC=Or(Fk),NMe=Or(vJ),Bk=()=>Nt(pJ,{}),OMe=Et({pageSize:{type:Number,required:!0},pageSizes:{type:Ke(Array),default:()=>Br([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:rd},appendSizeTo:String}),UMe=Ie({name:"ElPaginationSizes"}),zMe=Ie({...UMe,props:OMe,emits:["page-size-change"],setup(n,{emit:e}){const t=n,{t:i}=ci(),r=St("pagination"),s=Bk(),a=ae(t.pageSize);pt(()=>t.pageSizes,(c,u)=>{if(!ha(c,u)&&Mt(c)){const d=c.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),pt(()=>t.pageSize,c=>{a.value=c});const o=V(()=>t.pageSizes);function l(c){var u;c!==a.value&&(a.value=c,(u=s.handleSizeChange)==null||u.call(s,Number(c)))}return(c,u)=>(W(),ve("span",{class:j(w(r).e("sizes"))},[_e(w(lm),{"model-value":a.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,"append-to":c.appendSizeTo,onChange:l},{default:Re(()=>[(W(!0),ve(Kt,null,Jn(w(o),d=>(W(),rt(w(AC),{key:d,value:d,label:d+w(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var VMe=It(zMe,[["__file","sizes.vue"]]);const HMe=Et({size:{type:String,values:rd}}),GMe=Ie({name:"ElPaginationJumper"}),WMe=Ie({...GMe,props:HMe,setup(n){const{t:e}=ci(),t=St("pagination"),{pageCount:i,disabled:r,currentPage:s,changeEvent:a}=Bk(),o=ae(),l=V(()=>{var d;return(d=o.value)!=null?d:s==null?void 0:s.value});function c(d){o.value=d?+d:""}function u(d){d=Math.trunc(+d),a==null||a(d),o.value=void 0}return(d,f)=>(W(),ve("span",{class:j(w(t).e("jump")),disabled:w(r)},[be("span",{class:j([w(t).e("goto")])},Tt(w(e)("el.pagination.goto")),3),_e(w(Qa),{size:d.size,class:j([w(t).e("editor"),w(t).is("in-pagination")]),min:1,max:w(i),disabled:w(r),"model-value":w(l),"validate-event":!1,"aria-label":w(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","aria-label"]),be("span",{class:j([w(t).e("classifier")])},Tt(w(e)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var qMe=It(WMe,[["__file","jumper.vue"]]);const KMe=Et({total:{type:Number,default:1e3}}),YMe=Ie({name:"ElPaginationTotal"}),XMe=Ie({...YMe,props:KMe,setup(n){const{t:e}=ci(),t=St("pagination"),{disabled:i}=Bk();return(r,s)=>(W(),ve("span",{class:j(w(t).e("total")),disabled:w(i)},Tt(w(e)("el.pagination.total",{total:r.total})),11,["disabled"]))}});var jMe=It(XMe,[["__file","total.vue"]]);const $Me=Et({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),QMe=Ie({name:"ElPaginationPager"}),ZMe=Ie({...QMe,props:$Me,emits:["change"],setup(n,{emit:e}){const t=n,i=St("pager"),r=St("icon"),{t:s}=ci(),a=ae(!1),o=ae(!1),l=ae(!1),c=ae(!1),u=ae(!1),d=ae(!1),f=V(()=>{const b=t.pagerCount,A=(b-1)/2,S=Number(t.currentPage),C=Number(t.pageCount);let _=!1,M=!1;C>b&&(S>b-A&&(_=!0),S<C-A&&(M=!0));const T=[];if(_&&!M){const E=C-(b-2);for(let I=E;I<C;I++)T.push(I)}else if(!_&&M)for(let E=2;E<b;E++)T.push(E);else if(_&&M){const E=Math.floor(b/2)-1;for(let I=S-E;I<=S+E;I++)T.push(I)}else for(let E=2;E<C;E++)T.push(E);return T}),h=V(()=>["more","btn-quickprev",r.b(),i.is("disabled",t.disabled)]),p=V(()=>["more","btn-quicknext",r.b(),i.is("disabled",t.disabled)]),m=V(()=>t.disabled?-1:0);Js(()=>{const b=(t.pagerCount-1)/2;a.value=!1,o.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-b&&(a.value=!0),t.currentPage<t.pageCount-b&&(o.value=!0))});function v(b=!1){t.disabled||(b?l.value=!0:c.value=!0)}function g(b=!1){b?u.value=!0:d.value=!0}function y(b){const A=b.target;if(A.tagName.toLowerCase()==="li"&&Array.from(A.classList).includes("number")){const S=Number(A.textContent);S!==t.currentPage&&e("change",S)}else A.tagName.toLowerCase()==="li"&&Array.from(A.classList).includes("more")&&x(b)}function x(b){const A=b.target;if(A.tagName.toLowerCase()==="ul"||t.disabled)return;let S=Number(A.textContent);const C=t.pageCount,_=t.currentPage,M=t.pagerCount-2;A.className.includes("more")&&(A.className.includes("quickprev")?S=_-M:A.className.includes("quicknext")&&(S=_+M)),Number.isNaN(+S)||(S<1&&(S=1),S>C&&(S=C)),S!==_&&e("change",S)}return(b,A)=>(W(),ve("ul",{class:j(w(i).b()),onClick:x,onKeyup:Xi(y,["enter"])},[b.pageCount>0?(W(),ve("li",{key:0,class:j([[w(i).is("active",b.currentPage===1),w(i).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===1,"aria-label":w(s)("el.pagination.currentPage",{pager:1}),tabindex:w(m)}," 1 ",10,["aria-current","aria-label","tabindex"])):et("v-if",!0),a.value?(W(),ve("li",{key:1,class:j(w(h)),tabindex:w(m),"aria-label":w(s)("el.pagination.prevPages",{pager:b.pagerCount-2}),onMouseenter:S=>v(!0),onMouseleave:S=>l.value=!1,onFocus:S=>g(!0),onBlur:S=>u.value=!1},[(l.value||u.value)&&!b.disabled?(W(),rt(w(ip),{key:0})):(W(),rt(w(L9),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):et("v-if",!0),(W(!0),ve(Kt,null,Jn(w(f),S=>(W(),ve("li",{key:S,class:j([[w(i).is("active",b.currentPage===S),w(i).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===S,"aria-label":w(s)("el.pagination.currentPage",{pager:S}),tabindex:w(m)},Tt(S),11,["aria-current","aria-label","tabindex"]))),128)),o.value?(W(),ve("li",{key:2,class:j(w(p)),tabindex:w(m),"aria-label":w(s)("el.pagination.nextPages",{pager:b.pagerCount-2}),onMouseenter:S=>v(),onMouseleave:S=>c.value=!1,onFocus:S=>g(),onBlur:S=>d.value=!1},[(c.value||d.value)&&!b.disabled?(W(),rt(w(rp),{key:0})):(W(),rt(w(L9),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):et("v-if",!0),b.pageCount>1?(W(),ve("li",{key:3,class:j([[w(i).is("active",b.currentPage===b.pageCount),w(i).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===b.pageCount,"aria-label":w(s)("el.pagination.currentPage",{pager:b.pageCount}),tabindex:w(m)},Tt(b.pageCount),11,["aria-current","aria-label","tabindex"])):et("v-if",!0)],42,["onKeyup"]))}});var JMe=It(ZMe,[["__file","pager.vue"]]);const no=n=>typeof n!="number",eTe=Et({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:n=>Jt(n)&&Math.trunc(n)===n&&n>4&&n<22&&n%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Ke(Array),default:()=>Br([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Hi,default:()=>np},nextText:{type:String,default:""},nextIcon:{type:Hi,default:()=>xo},teleported:{type:Boolean,default:!0},small:Boolean,size:ws,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),tTe={"update:current-page":n=>Jt(n),"update:page-size":n=>Jt(n),"size-change":n=>Jt(n),change:(n,e)=>Jt(n)&&Jt(e),"current-change":n=>Jt(n),"prev-click":n=>Jt(n),"next-click":n=>Jt(n)},WU="ElPagination";var nTe=Ie({name:WU,props:eTe,emits:tTe,setup(n,{emit:e,slots:t}){const{t:i}=ci(),r=St("pagination"),s=Nn().vnode.props||{},a=uQ(),o=V(()=>{var A;return n.small?"small":(A=n.size)!=null?A:a.value});Uh({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},V(()=>!!n.small));const l="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,c="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,u=V(()=>{if(no(n.total)&&no(n.pageCount)||!no(n.currentPage)&&!l)return!1;if(n.layout.includes("sizes")){if(no(n.pageCount)){if(!no(n.total)&&!no(n.pageSize)&&!c)return!1}else if(!c)return!1}return!0}),d=ae(no(n.defaultPageSize)?10:n.defaultPageSize),f=ae(no(n.defaultCurrentPage)?1:n.defaultCurrentPage),h=V({get(){return no(n.pageSize)?d.value:n.pageSize},set(A){no(n.pageSize)&&(d.value=A),c&&(e("update:page-size",A),e("size-change",A))}}),p=V(()=>{let A=0;return no(n.pageCount)?no(n.total)||(A=Math.max(1,Math.ceil(n.total/h.value))):A=n.pageCount,A}),m=V({get(){return no(n.currentPage)?f.value:n.currentPage},set(A){let S=A;A<1?S=1:A>p.value&&(S=p.value),no(n.currentPage)&&(f.value=S),l&&(e("update:current-page",S),e("current-change",S))}});pt(p,A=>{m.value>A&&(m.value=A)}),pt([m,h],A=>{e("change",...A)},{flush:"post"});function v(A){m.value=A}function g(A){h.value=A;const S=p.value;m.value>S&&(m.value=S)}function y(){n.disabled||(m.value-=1,e("prev-click",m.value))}function x(){n.disabled||(m.value+=1,e("next-click",m.value))}function b(A,S){A&&(A.props||(A.props={}),A.props.class=[A.props.class,S].join(" "))}return Qn(pJ,{pageCount:p,disabled:V(()=>n.disabled),currentPage:m,changeEvent:v,handleSizeChange:g}),()=>{var A,S;if(!u.value)return i("el.pagination.deprecationWarning"),null;if(!n.layout||n.hideOnSinglePage&&p.value<=1)return null;const C=[],_=[],M=en("div",{class:r.e("rightwrapper")},_),T={prev:en(yMe,{disabled:n.disabled,currentPage:m.value,prevText:n.prevText,prevIcon:n.prevIcon,onClick:y}),jumper:en(qMe,{size:o.value}),pager:en(JMe,{currentPage:m.value,pageCount:p.value,pagerCount:n.pagerCount,onChange:v,disabled:n.disabled}),next:en(wMe,{disabled:n.disabled,currentPage:m.value,pageCount:p.value,nextText:n.nextText,nextIcon:n.nextIcon,onClick:x}),sizes:en(VMe,{pageSize:h.value,pageSizes:n.pageSizes,popperClass:n.popperClass,disabled:n.disabled,teleported:n.teleported,size:o.value,appendSizeTo:n.appendSizeTo}),slot:(S=(A=t==null?void 0:t.default)==null?void 0:A.call(t))!=null?S:null,total:en(jMe,{total:no(n.total)?0:n.total})},E=n.layout.split(",").map(L=>L.trim());let I=!1;return E.forEach(L=>{if(L==="->"){I=!0;return}I?_.push(T[L]):C.push(T[L])}),b(C[0],r.is("first")),b(C[C.length-1],r.is("last")),I&&_.length>0&&(b(_[0],r.is("first")),b(_[_.length-1],r.is("last")),C.push(M)),en("div",{class:[r.b(),r.is("background",n.background),r.m(o.value)]},C)}}});const iTe=xn(nTe),rTe=Et({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:ED,default:"primary"},cancelButtonType:{type:String,values:ED,default:"text"},icon:{type:Hi,default:()=>Bge},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Ks.teleported,persistent:Ks.persistent,width:{type:[String,Number],default:150}}),sTe={confirm:n=>n instanceof MouseEvent,cancel:n=>n instanceof MouseEvent},aTe=Ie({name:"ElPopconfirm"}),oTe=Ie({...aTe,props:rTe,emits:sTe,setup(n,{emit:e}){const t=n,{t:i}=ci(),r=St("popconfirm"),s=ae(),a=()=>{var f,h;(h=(f=s.value)==null?void 0:f.onClose)==null||h.call(f)},o=V(()=>({width:Hr(t.width)})),l=f=>{e("confirm",f),a()},c=f=>{e("cancel",f),a()},u=V(()=>t.confirmButtonText||i("el.popconfirm.confirmButtonText")),d=V(()=>t.cancelButtonText||i("el.popconfirm.cancelButtonText"));return(f,h)=>(W(),rt(w(Da),Kn({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},f.$attrs,{"popper-class":`${w(r).namespace.value}-popover`,"popper-style":w(o),teleported:f.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":f.hideAfter,persistent:f.persistent}),{content:Re(()=>[be("div",{class:j(w(r).b())},[be("div",{class:j(w(r).e("main"))},[!f.hideIcon&&f.icon?(W(),rt(w(Ut),{key:0,class:j(w(r).e("icon")),style:jt({color:f.iconColor})},{default:Re(()=>[(W(),rt(On(f.icon)))]),_:1},8,["class","style"])):et("v-if",!0),Hn(" "+Tt(f.title),1)],2),be("div",{class:j(w(r).e("action"))},[Qe(f.$slots,"actions",{confirm:l,cancel:c},()=>[_e(w(ea),{size:"small",type:f.cancelButtonType==="text"?"":f.cancelButtonType,text:f.cancelButtonType==="text",onClick:c},{default:Re(()=>[Hn(Tt(w(d)),1)]),_:1},8,["type","text"]),_e(w(ea),{size:"small",type:f.confirmButtonType==="text"?"":f.confirmButtonType,text:f.confirmButtonType==="text",onClick:l},{default:Re(()=>[Hn(Tt(w(u)),1)]),_:1},8,["type","text"])])],2)],2)]),default:Re(()=>[f.$slots.reference?Qe(f.$slots,"reference",{key:0}):et("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var lTe=It(oTe,[["__file","popconfirm.vue"]]);const cTe=xn(lTe),uTe=Et({trigger:lx.trigger,placement:i_.placement,disabled:lx.disabled,visible:Ks.visible,transition:Ks.transition,popperOptions:i_.popperOptions,tabindex:i_.tabindex,content:Ks.content,popperStyle:Ks.popperStyle,popperClass:Ks.popperClass,enterable:{...Ks.enterable,default:!0},effect:{...Ks.effect,default:"light"},teleported:Ks.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),dTe={"update:visible":n=>ji(n),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},fTe="onUpdate:visible",hTe=Ie({name:"ElPopover"}),pTe=Ie({...hTe,props:uTe,emits:dTe,setup(n,{expose:e,emit:t}){const i=n,r=V(()=>i[fTe]),s=St("popover"),a=ae(),o=V(()=>{var v;return(v=w(a))==null?void 0:v.popperRef}),l=V(()=>[{width:Hr(i.width)},i.popperStyle]),c=V(()=>[s.b(),i.popperClass,{[s.m("plain")]:!!i.content}]),u=V(()=>i.transition===`${s.namespace.value}-fade-in-linear`),d=()=>{var v;(v=a.value)==null||v.hide()},f=()=>{t("before-enter")},h=()=>{t("before-leave")},p=()=>{t("after-enter")},m=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:o,hide:d}),(v,g)=>(W(),rt(w(Da),Kn({ref_key:"tooltipRef",ref:a},v.$attrs,{trigger:v.trigger,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":w(c),"popper-style":w(l),teleported:v.teleported,persistent:v.persistent,"gpu-acceleration":w(u),"onUpdate:visible":w(r),onBeforeShow:f,onBeforeHide:h,onShow:p,onHide:m}),{content:Re(()=>[v.title?(W(),ve("div",{key:0,class:j(w(s).e("title")),role:"title"},Tt(v.title),3)):et("v-if",!0),Qe(v.$slots,"default",{},()=>[Hn(Tt(v.content),1)])]),default:Re(()=>[v.$slots.reference?Qe(v.$slots,"reference",{key:0}):et("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var mTe=It(pTe,[["__file","popover.vue"]]);const qU=(n,e)=>{const t=e.arg||e.value,i=t==null?void 0:t.popperRef;i&&(i.triggerRef=n)};var vTe={mounted(n,e){qU(n,e)},updated(n,e){qU(n,e)}};const gTe="popover",gJ=Hve(vTe,gTe),yTe=xn(mTe,{directive:gJ}),bTe=Et({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Ke(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Ke([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Ke(Function),default:n=>`${n}%`}}),xTe=Ie({name:"ElProgress"}),ATe=Ie({...xTe,props:bTe,setup(n){const e=n,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=St("progress"),r=V(()=>{const x={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},b=y(e.percentage);return b.includes("gradient")?x.background=b:x.backgroundColor=b,x}),s=V(()=>(e.strokeWidth/e.width*100).toFixed(1)),a=V(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),o=V(()=>{const x=a.value,b=e.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${x}
          a ${x} ${x} 0 1 1 0 ${b?"-":""}${x*2}
          a ${x} ${x} 0 1 1 0 ${b?"":"-"}${x*2}
          `}),l=V(()=>2*Math.PI*a.value),c=V(()=>e.type==="dashboard"?.75:1),u=V(()=>`${-1*l.value*(1-c.value)/2}px`),d=V(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),f=V(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),h=V(()=>{let x;return e.color?x=y(e.percentage):x=t[e.status]||t.default,x}),p=V(()=>e.status==="warning"?vM:e.type==="line"?e.status==="success"?XL:If:e.status==="success"?gA:nu),m=V(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),v=V(()=>e.format(e.percentage));function g(x){const b=100/x.length;return x.map((S,C)=>qt(S)?{color:S,percentage:(C+1)*b}:S).sort((S,C)=>S.percentage-C.percentage)}const y=x=>{var b;const{color:A}=e;if(Xt(A))return A(x);if(qt(A))return A;{const S=g(A);for(const C of S)if(C.percentage>x)return C.color;return(b=S[S.length-1])==null?void 0:b.color}};return(x,b)=>(W(),ve("div",{class:j([w(i).b(),w(i).m(x.type),w(i).is(x.status),{[w(i).m("without-text")]:!x.showText,[w(i).m("text-inside")]:x.textInside}]),role:"progressbar","aria-valuenow":x.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[x.type==="line"?(W(),ve("div",{key:0,class:j(w(i).b("bar"))},[be("div",{class:j(w(i).be("bar","outer")),style:jt({height:`${x.strokeWidth}px`})},[be("div",{class:j([w(i).be("bar","inner"),{[w(i).bem("bar","inner","indeterminate")]:x.indeterminate},{[w(i).bem("bar","inner","striped")]:x.striped},{[w(i).bem("bar","inner","striped-flow")]:x.stripedFlow}]),style:jt(w(r))},[(x.showText||x.$slots.default)&&x.textInside?(W(),ve("div",{key:0,class:j(w(i).be("bar","innerText"))},[Qe(x.$slots,"default",{percentage:x.percentage},()=>[be("span",null,Tt(w(v)),1)])],2)):et("v-if",!0)],6)],6)],2)):(W(),ve("div",{key:1,class:j(w(i).b("circle")),style:jt({height:`${x.width}px`,width:`${x.width}px`})},[(W(),ve("svg",{viewBox:"0 0 100 100"},[be("path",{class:j(w(i).be("circle","track")),d:w(o),stroke:`var(${w(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":x.strokeLinecap,"stroke-width":w(s),fill:"none",style:jt(w(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),be("path",{class:j(w(i).be("circle","path")),d:w(o),stroke:w(h),fill:"none",opacity:x.percentage?1:0,"stroke-linecap":x.strokeLinecap,"stroke-width":w(s),style:jt(w(f))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(x.showText||x.$slots.default)&&!x.textInside?(W(),ve("div",{key:2,class:j(w(i).e("text")),style:jt({fontSize:`${w(m)}px`})},[Qe(x.$slots,"default",{percentage:x.percentage},()=>[x.status?(W(),rt(w(Ut),{key:1},{default:Re(()=>[(W(),rt(On(w(p))))]),_:1})):(W(),ve("span",{key:0},Tt(w(v)),1))])],6)):et("v-if",!0)],10,["aria-valuenow"]))}});var wTe=It(ATe,[["__file","progress.vue"]]);const yJ=xn(wTe),STe=Et({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Ke([Array,Object]),default:()=>Br(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Ke([Array,Object]),default:()=>[ow,ow,ow]},voidIcon:{type:Hi,default:()=>Qge},disabledVoidIcon:{type:Hi,default:()=>ow},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Ke(Array),default:()=>Br(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:ws,clearable:Boolean,...ga(["ariaLabel"])}),_Te={[zi]:n=>Jt(n),[Tn]:n=>Jt(n)},CTe=Ie({name:"ElRate"}),MTe=Ie({...CTe,props:STe,emits:_Te,setup(n,{expose:e,emit:t}){const i=n;function r(P,z){const O=q=>Rn(q),N=Object.keys(z).map(q=>+q).filter(q=>{const te=z[q];return(O(te)?te.excluded:!1)?P<q:P<=q}).sort((q,te)=>q-te),H=z[N[0]];return O(H)&&H.value||H}const s=Nt(Dm,void 0),a=Nt($u,void 0),o=gs(),l=St("rate"),{inputId:c,isLabeledByFormItem:u}=bc(i,{formItemContext:a}),d=ae(i.modelValue),f=ae(-1),h=ae(!0),p=V(()=>[l.b(),l.m(o.value)]),m=V(()=>i.disabled||(s==null?void 0:s.disabled)),v=V(()=>l.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":b.value})),g=V(()=>{let P="";return i.showScore?P=i.scoreTemplate.replace(/\{\s*value\s*\}/,m.value?`${i.modelValue}`:`${d.value}`):i.showText&&(P=i.texts[Math.ceil(d.value)-1]),P}),y=V(()=>i.modelValue*100-Math.floor(i.modelValue)*100),x=V(()=>Mt(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),b=V(()=>{const P=r(d.value,x.value);return Rn(P)?"":P}),A=V(()=>{let P="";return m.value?P=`${y.value}%`:i.allowHalf&&(P="50%"),{color:b.value,width:P}}),S=V(()=>{let P=Mt(i.icons)?[...i.icons]:{...i.icons};return P=tf(P),Mt(P)?{[i.lowThreshold]:P[0],[i.highThreshold]:{value:P[1],excluded:!0},[i.max]:P[2]}:P}),C=V(()=>r(i.modelValue,S.value)),_=V(()=>m.value?qt(i.disabledVoidIcon)?i.disabledVoidIcon:tf(i.disabledVoidIcon):qt(i.voidIcon)?i.voidIcon:tf(i.voidIcon)),M=V(()=>r(d.value,S.value));function T(P){const z=m.value&&y.value>0&&P-1<i.modelValue&&P>i.modelValue,O=i.allowHalf&&h.value&&P-.5<=d.value&&P>d.value;return z||O}function E(P){i.clearable&&P===i.modelValue&&(P=0),t(Tn,P),i.modelValue!==P&&t("change",P)}function I(P){m.value||(i.allowHalf&&h.value?E(d.value):E(P))}function L(P){if(m.value)return;let z=d.value;const O=P.code;return O===kt.up||O===kt.right?(i.allowHalf?z+=.5:z+=1,P.stopPropagation(),P.preventDefault()):(O===kt.left||O===kt.down)&&(i.allowHalf?z-=.5:z-=1,P.stopPropagation(),P.preventDefault()),z=z<0?0:z,z=z>i.max?i.max:z,t(Tn,z),t("change",z),z}function F(P,z){if(!m.value){if(i.allowHalf&&z){let O=z.target;qo(O,l.e("item"))&&(O=O.querySelector(`.${l.e("icon")}`)),(O.clientWidth===0||qo(O,l.e("decimal")))&&(O=O.parentNode),h.value=z.offsetX*2<=O.clientWidth,d.value=h.value?P-.5:P}else d.value=P;f.value=P}}function B(){m.value||(i.allowHalf&&(h.value=i.modelValue!==Math.floor(i.modelValue)),d.value=i.modelValue,f.value=-1)}return pt(()=>i.modelValue,P=>{d.value=P,h.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||t(Tn,0),e({setCurrentValue:F,resetCurrentValue:B}),(P,z)=>{var O;return W(),ve("div",{id:w(c),class:j([w(p),w(l).is("disabled",w(m))]),role:"slider","aria-label":w(u)?void 0:P.ariaLabel||"rating","aria-labelledby":w(u)?(O=w(a))==null?void 0:O.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":w(g)||void 0,"aria-valuemin":"0","aria-valuemax":P.max,tabindex:"0",style:jt(w(v)),onKeydown:L},[(W(!0),ve(Kt,null,Jn(P.max,(N,H)=>(W(),ve("span",{key:H,class:j(w(l).e("item")),onMousemove:q=>F(N,q),onMouseleave:B,onClick:q=>I(N)},[_e(w(Ut),{class:j([w(l).e("icon"),{hover:f.value===N},w(l).is("active",N<=d.value)])},{default:Re(()=>[T(N)?et("v-if",!0):(W(),ve(Kt,{key:0},[Cn((W(),rt(On(w(M)),null,null,512)),[[yi,N<=d.value]]),Cn((W(),rt(On(w(_)),null,null,512)),[[yi,!(N<=d.value)]])],64)),T(N)?(W(),ve(Kt,{key:1},[(W(),rt(On(w(_)),{class:j([w(l).em("decimal","box")])},null,8,["class"])),_e(w(Ut),{style:jt(w(A)),class:j([w(l).e("icon"),w(l).e("decimal")])},{default:Re(()=>[(W(),rt(On(w(C))))]),_:1},8,["style","class"])],64)):et("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),P.showText||P.showScore?(W(),ve("span",{key:0,class:j(w(l).e("text")),style:jt({color:P.textColor})},Tt(w(g)),7)):et("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var TTe=It(MTe,[["__file","rate.vue"]]);const ETe=xn(TTe),bg={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},KU={[bg.success]:oge,[bg.warning]:vM,[bg.error]:jL,[bg.info]:$L},ITe=Et({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),DTe=Ie({name:"ElResult"}),RTe=Ie({...DTe,props:ITe,setup(n){const e=n,t=St("result"),i=V(()=>{const r=e.icon,s=r&&bg[r]?bg[r]:"icon-info",a=KU[s]||KU["icon-info"];return{class:s,component:a}});return(r,s)=>(W(),ve("div",{class:j(w(t).b())},[be("div",{class:j(w(t).e("icon"))},[Qe(r.$slots,"icon",{},()=>[w(i).component?(W(),rt(On(w(i).component),{key:0,class:j(w(i).class)},null,8,["class"])):et("v-if",!0)])],2),r.title||r.$slots.title?(W(),ve("div",{key:0,class:j(w(t).e("title"))},[Qe(r.$slots,"title",{},()=>[be("p",null,Tt(r.title),1)])],2)):et("v-if",!0),r.subTitle||r.$slots["sub-title"]?(W(),ve("div",{key:1,class:j(w(t).e("subtitle"))},[Qe(r.$slots,"sub-title",{},()=>[be("p",null,Tt(r.subTitle),1)])],2)):et("v-if",!0),r.$slots.extra?(W(),ve("div",{key:2,class:j(w(t).e("extra"))},[Qe(r.$slots,"extra")],2)):et("v-if",!0)],2))}});var PTe=It(RTe,[["__file","result.vue"]]);const LTe=xn(PTe),kTe=["start","center","end","space-around","space-between","space-evenly"],FTe=["top","middle","bottom"],BTe=Et({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:kTe,default:"start"},align:{type:String,values:FTe}}),NTe=Ie({name:"ElRow"}),OTe=Ie({...NTe,props:BTe,setup(n){const e=n,t=St("row"),i=V(()=>e.gutter);Qn(CZ,{gutter:i});const r=V(()=>{const a={};return e.gutter&&(a.marginRight=a.marginLeft=`-${e.gutter/2}px`),a}),s=V(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(a,o)=>(W(),rt(On(a.tag),{class:j(w(s)),style:jt(w(r))},{default:Re(()=>[Qe(a.$slots,"default")]),_:3},8,["class","style"]))}});var UTe=It(OTe,[["__file","row.vue"]]);const zTe=xn(UTe),VTe=Ie({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:St("select")}}});function HTe(n,e,t,i,r,s){return W(),ve("div",{class:j(n.ns.be("group","title")),style:jt({...n.style,lineHeight:`${n.height}px`})},Tt(n.item.label),7)}var GTe=It(VTe,[["render",HTe],["__file","group-item.vue"]]);function WTe(n,{emit:e}){return{hoverItem:()=>{n.disabled||e("hover",n.index)},selectOptionClick:()=>{n.disabled||e("select",n.item,n.index)}}}const bJ={label:"label",value:"value",disabled:"disabled",options:"options"};function MM(n){const e=V(()=>({...bJ,...n.props}));return{aliasProps:e,getLabel:a=>fs(a,e.value.label),getValue:a=>fs(a,e.value.value),getDisabled:a=>fs(a,e.value.disabled),getOptions:a=>fs(a,e.value.options)}}const qTe=Et({allowCreate:Boolean,autocomplete:{type:Ke(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:Hi,default:If},effect:{type:Ke(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:Ke([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Ke(Array),required:!0},placeholder:{type:String},teleported:Ks.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Ke(Object),default:()=>({})},remote:Boolean,size:ws,props:{type:Ke(Object),default:()=>bJ},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:Ke(String),values:Df,default:"bottom-start"},fallbackPlacements:{type:Ke(Array),default:["bottom-start","top-start","right","left"]},tagType:{...hf.type,default:"info"},tagEffect:{...hf.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:String,fitInputWidth:{type:[Boolean,Number],default:!0,validator(n){return ji(n)||Jt(n)}},...sy,...ga(["ariaLabel"])}),KTe=Et({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Ke(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),YTe={[Tn]:n=>!0,[zi]:n=>!0,"remove-tag":n=>!0,"visible-change":n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0},XTe={hover:n=>Jt(n),select:(n,e)=>!0},Nk=Symbol("ElSelectV2Injection"),jTe=Ie({props:KTe,emits:XTe,setup(n,{emit:e}){const t=Nt(Nk),i=St("select"),{hoverItem:r,selectOptionClick:s}=WTe(n,{emit:e}),{getLabel:a}=MM(t.props);return{ns:i,hoverItem:r,selectOptionClick:s,getLabel:a}}});function $Te(n,e,t,i,r,s){return W(),ve("li",{"aria-selected":n.selected,style:jt(n.style),class:j([n.ns.be("dropdown","item"),n.ns.is("selected",n.selected),n.ns.is("disabled",n.disabled),n.ns.is("created",n.created),n.ns.is("hovering",n.hovering)]),onMousemove:n.hoverItem,onClick:ln(n.selectOptionClick,["stop"])},[Qe(n.$slots,"default",{item:n.item,index:n.index,disabled:n.disabled},()=>[be("span",null,Tt(n.getLabel(n.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var QTe=It(jTe,[["render",$Te],["__file","option-item.vue"]]),YU=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ZTe(n,e){return!!(n===e||YU(n)&&YU(e))}function JTe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!ZTe(n[t],e[t]))return!1;return!0}function e5e(n,e){e===void 0&&(e=JTe);var t=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var a=n.apply(this,r);return t={lastResult:a,lastArgs:r,lastThis:this},a}return i.clear=function(){t=null},i}const xJ=()=>{const e=Nn().proxy.$props;return V(()=>{const t=(i,r,s)=>({});return e.perfMode?cM(t):e5e(t)})},$D=50,wC="itemRendered",SC="scroll",xg="forward",_C="backward",nc="auto",TM="smart",fx="start",Nu="center",hx="end",S1="horizontal",Ok="vertical",t5e="ltr",qg="rtl",px="negative",Uk="positive-ascending",zk="positive-descending",n5e={[S1]:"left",[Ok]:"top"},i5e=20,r5e={[S1]:"deltaX",[Ok]:"deltaY"},s5e=({atEndEdge:n,atStartEdge:e,layout:t},i)=>{let r,s=0;const a=l=>l<0&&e.value||l>0&&n.value;return{hasReachedEdge:a,onWheel:l=>{om(r);const c=l[r5e[t.value]];a(s)&&a(s+c)||(s+=c,yM()||l.preventDefault(),r=tp(()=>{i(s),s=0}))}}},QD=lu({type:Ke([Number,Function]),required:!0}),ZD=lu({type:Number}),JD=lu({type:Number,default:2}),a5e=lu({type:String,values:["ltr","rtl"],default:"ltr"}),e8=lu({type:Number,default:0}),CC=lu({type:Number,required:!0}),AJ=lu({type:String,values:["horizontal","vertical"],default:Ok}),wJ=Et({className:{type:String,default:""},containerElement:{type:Ke([String,Object]),default:"div"},data:{type:Ke(Array),default:()=>Br([])},direction:a5e,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Ke([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),SJ=Et({cache:JD,estimatedItemSize:ZD,layout:AJ,initScrollOffset:e8,total:CC,itemSize:QD,...wJ}),t8={type:Number,default:6},_J={type:Number,default:0},CJ={type:Number,default:2},X0=Et({columnCache:JD,columnWidth:QD,estimatedColumnWidth:ZD,estimatedRowHeight:ZD,initScrollLeft:e8,initScrollTop:e8,itemKey:{type:Ke(Function),default:({columnIndex:n,rowIndex:e})=>`${e}:${n}`},rowCache:JD,rowHeight:QD,totalColumn:CC,totalRow:CC,hScrollbarSize:t8,vScrollbarSize:t8,scrollbarStartGap:_J,scrollbarEndGap:CJ,role:String,...wJ}),MJ=Et({alwaysOn:Boolean,class:String,layout:AJ,total:CC,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:t8,startGap:_J,endGap:CJ,visible:Boolean}),P0=(n,e)=>n<e?xg:_C,mx=n=>n===t5e||n===qg||n===S1,XU=n=>n===qg;let jm=null;function MC(n=!1){if(jm===null||n){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?jm=zk:(e.scrollLeft=1,e.scrollLeft===0?jm=px:jm=Uk),document.body.removeChild(e),jm}return jm}function o5e({move:n,size:e,bar:t},i){const r={},s=`translate${t.axis}(${n}px)`;return r[t.size]=e,r.transform=s,r.msTransform=s,r.webkitTransform=s,i==="horizontal"?r.height="100%":r.width="100%",r}const n8=Ie({name:"ElVirtualScrollBar",props:MJ,emits:["scroll","start-move","stop-move"],setup(n,{emit:e}){const t=V(()=>n.startGap+n.endGap),i=St("virtual-scrollbar"),r=St("scrollbar"),s=ae(),a=ae();let o=null,l=null;const c=Si({isDragging:!1,traveled:0}),u=V(()=>SQ[n.layout]),d=V(()=>n.clientSize-w(t)),f=V(()=>({position:"absolute",width:`${S1===n.layout?d.value:n.scrollbarSize}px`,height:`${S1===n.layout?n.scrollbarSize:d.value}px`,[n5e[n.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),h=V(()=>{const S=n.ratio,C=n.clientSize;if(S>=100)return Number.POSITIVE_INFINITY;if(S>=50)return S*C/100;const _=C/3;return Math.floor(Math.min(Math.max(S*C,i5e),_))}),p=V(()=>{if(!Number.isFinite(h.value))return{display:"none"};const S=`${h.value}px`;return o5e({bar:u.value,size:S,move:c.traveled},n.layout)}),m=V(()=>Math.floor(n.clientSize-h.value-w(t))),v=()=>{window.addEventListener("mousemove",b),window.addEventListener("mouseup",x);const S=w(a);S&&(l=document.onselectstart,document.onselectstart=()=>!1,S.addEventListener("touchmove",b,{passive:!0}),S.addEventListener("touchend",x))},g=()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x),document.onselectstart=l,l=null;const S=w(a);S&&(S.removeEventListener("touchmove",b),S.removeEventListener("touchend",x))},y=S=>{S.stopImmediatePropagation(),!(S.ctrlKey||[1,2].includes(S.button))&&(c.isDragging=!0,c[u.value.axis]=S.currentTarget[u.value.offset]-(S[u.value.client]-S.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),v())},x=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),g()},b=S=>{const{isDragging:C}=c;if(!C||!a.value||!s.value)return;const _=c[u.value.axis];if(!_)return;om(o);const M=(s.value.getBoundingClientRect()[u.value.direction]-S[u.value.client])*-1,T=a.value[u.value.offset]-_,E=M-T;o=tp(()=>{c.traveled=Math.max(n.startGap,Math.min(E,m.value)),e("scroll",E,m.value)})},A=S=>{const C=Math.abs(S.target.getBoundingClientRect()[u.value.direction]-S[u.value.client]),_=a.value[u.value.offset]/2,M=C-_;c.traveled=Math.max(0,Math.min(M,m.value)),e("scroll",M,m.value)};return pt(()=>n.scrollFrom,S=>{c.isDragging||(c.traveled=Math.ceil(S*m.value))}),Fi(()=>{g()}),()=>en("div",{role:"presentation",ref:s,class:[i.b(),n.class,(n.alwaysOn||c.isDragging)&&"always-on"],style:f.value,onMousedown:ln(A,["stop","prevent"]),onTouchstartPrevent:y},en("div",{ref:a,class:r.e("thumb"),style:p.value,onMousedown:y},[]))}}),TJ=({name:n,getOffset:e,getItemSize:t,getItemOffset:i,getEstimatedTotalSize:r,getStartIndexForOffset:s,getStopIndexForStartIndex:a,initCache:o,clearCache:l,validateProps:c})=>Ie({name:n??"ElVirtualList",props:SJ,emits:[wC,SC],setup(u,{emit:d,expose:f}){c(u);const h=Nn(),p=St("vl"),m=ae(o(u,h)),v=xJ(),g=ae(),y=ae(),x=ae(),b=ae({isScrolling:!1,scrollDir:"forward",scrollOffset:Jt(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),A=V(()=>{const{total:Q,cache:ee}=u,{isScrolling:de,scrollDir:J,scrollOffset:ue}=w(b);if(Q===0)return[0,0,0,0];const Te=s(u,ue,w(m)),De=a(u,Te,ue,w(m)),Le=!de||J===_C?Math.max(1,ee):1,Ne=!de||J===xg?Math.max(1,ee):1;return[Math.max(0,Te-Le),Math.max(0,Math.min(Q-1,De+Ne)),Te,De]}),S=V(()=>r(u,w(m))),C=V(()=>mx(u.layout)),_=V(()=>[{position:"relative",[`overflow-${C.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:Jt(u.height)?`${u.height}px`:u.height,width:Jt(u.width)?`${u.width}px`:u.width},u.style]),M=V(()=>{const Q=w(S),ee=w(C);return{height:ee?"100%":`${Q}px`,pointerEvents:w(b).isScrolling?"none":void 0,width:ee?`${Q}px`:"100%"}}),T=V(()=>C.value?u.width:u.height),{onWheel:E}=s5e({atStartEdge:V(()=>b.value.scrollOffset<=0),atEndEdge:V(()=>b.value.scrollOffset>=S.value),layout:V(()=>u.layout)},Q=>{var ee,de;(de=(ee=x.value).onMouseUp)==null||de.call(ee),z(Math.min(b.value.scrollOffset+Q,S.value-T.value))});Li(g,"wheel",E,{passive:!1});const I=()=>{const{total:Q}=u;if(Q>0){const[ue,Te,De,Le]=w(A);d(wC,ue,Te,De,Le)}const{scrollDir:ee,scrollOffset:de,updateRequested:J}=w(b);d(SC,ee,de,J)},L=Q=>{const{clientHeight:ee,scrollHeight:de,scrollTop:J}=Q.currentTarget,ue=w(b);if(ue.scrollOffset===J)return;const Te=Math.max(0,Math.min(J,de-ee));b.value={...ue,isScrolling:!0,scrollDir:P0(ue.scrollOffset,Te),scrollOffset:Te,updateRequested:!1},Yt(H)},F=Q=>{const{clientWidth:ee,scrollLeft:de,scrollWidth:J}=Q.currentTarget,ue=w(b);if(ue.scrollOffset===de)return;const{direction:Te}=u;let De=de;if(Te===qg)switch(MC()){case px:{De=-de;break}case zk:{De=J-ee-de;break}}De=Math.max(0,Math.min(De,J-ee)),b.value={...ue,isScrolling:!0,scrollDir:P0(ue.scrollOffset,De),scrollOffset:De,updateRequested:!1},Yt(H)},B=Q=>{w(C)?F(Q):L(Q),I()},P=(Q,ee)=>{const de=(S.value-T.value)/ee*Q;z(Math.min(S.value-T.value,de))},z=Q=>{Q=Math.max(Q,0),Q!==w(b).scrollOffset&&(b.value={...w(b),scrollOffset:Q,scrollDir:P0(w(b).scrollOffset,Q),updateRequested:!0},Yt(H))},O=(Q,ee=nc)=>{const{scrollOffset:de}=w(b);Q=Math.max(0,Math.min(Q,u.total-1)),z(e(u,Q,ee,de,w(m)))},N=Q=>{const{direction:ee,itemSize:de,layout:J}=u,ue=v.value(l&&de,l&&J,l&&ee);let Te;if(vi(ue,String(Q)))Te=ue[Q];else{const De=i(u,Q,w(m)),Le=t(u,Q,w(m)),Ne=w(C),Y=ee===qg,oe=Ne?De:0;ue[Q]=Te={position:"absolute",left:Y?void 0:`${oe}px`,right:Y?`${oe}px`:void 0,top:Ne?0:`${De}px`,height:Ne?"100%":`${Le}px`,width:Ne?`${Le}px`:"100%"}}return Te},H=()=>{b.value.isScrolling=!1,Yt(()=>{v.value(-1,null,null)})},q=()=>{const Q=g.value;Q&&(Q.scrollTop=0)};Mn(()=>{if(!li)return;const{initScrollOffset:Q}=u,ee=w(g);Jt(Q)&&ee&&(w(C)?ee.scrollLeft=Q:ee.scrollTop=Q),I()}),au(()=>{const{direction:Q,layout:ee}=u,{scrollOffset:de,updateRequested:J}=w(b),ue=w(g);if(J&&ue)if(ee===S1)if(Q===qg)switch(MC()){case px:{ue.scrollLeft=-de;break}case Uk:{ue.scrollLeft=de;break}default:{const{clientWidth:Te,scrollWidth:De}=ue;ue.scrollLeft=De-Te-de;break}}else ue.scrollLeft=de;else ue.scrollTop=de}),bL(()=>{w(g).scrollTop=w(b).scrollOffset});const te={ns:p,clientSize:T,estimatedTotalSize:S,windowStyle:_,windowRef:g,innerRef:y,innerStyle:M,itemsToRender:A,scrollbarRef:x,states:b,getItemStyle:N,onScroll:B,onScrollbarScroll:P,onWheel:E,scrollTo:z,scrollToItem:O,resetScrollTop:q};return f({windowRef:g,innerRef:y,getItemStyleCache:v,scrollTo:z,scrollToItem:O,resetScrollTop:q,states:b}),te},render(u){var d;const{$slots:f,className:h,clientSize:p,containerElement:m,data:v,getItemStyle:g,innerElement:y,itemsToRender:x,innerStyle:b,layout:A,total:S,onScroll:C,onScrollbarScroll:_,states:M,useIsScrolling:T,windowStyle:E,ns:I}=u,[L,F]=x,B=On(m),P=On(y),z=[];if(S>0)for(let q=L;q<=F;q++)z.push(en(Kt,{key:q},(d=f.default)==null?void 0:d.call(f,{data:v,index:q,isScrolling:T?M.isScrolling:void 0,style:g(q)})));const O=[en(P,{style:b,ref:"innerRef"},qt(P)?z:{default:()=>z})],N=en(n8,{ref:"scrollbarRef",clientSize:p,layout:A,onScroll:_,ratio:p*100/this.estimatedTotalSize,scrollFrom:M.scrollOffset/(this.estimatedTotalSize-p),total:S}),H=en(B,{class:[I.e("window"),h],style:E,onScroll:C,ref:"windowRef",key:0},qt(B)?[O]:{default:()=>[O]});return en("div",{key:0,class:[I.e("wrapper"),M.scrollbarAlwaysOn?"always-on":""]},[H,N])}}),EJ=TJ({name:"ElFixedSizeList",getItemOffset:({itemSize:n},e)=>e*n,getItemSize:({itemSize:n})=>n,getEstimatedTotalSize:({total:n,itemSize:e})=>e*n,getOffset:({height:n,total:e,itemSize:t,layout:i,width:r},s,a,o)=>{const l=mx(i)?r:n,c=Math.max(0,e*t-l),u=Math.min(c,s*t),d=Math.max(0,(s+1)*t-l);switch(a===TM&&(o>=d-l&&o<=u+l?a=nc:a=Nu),a){case fx:return u;case hx:return d;case Nu:{const f=Math.round(d+(u-d)/2);return f<Math.ceil(l/2)?0:f>c+Math.floor(l/2)?c:f}case nc:default:return o>=d&&o<=u?o:o<d?d:u}},getStartIndexForOffset:({total:n,itemSize:e},t)=>Math.max(0,Math.min(n-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:n,total:e,itemSize:t,layout:i,width:r},s,a)=>{const o=s*t,l=mx(i)?r:n,c=Math.ceil((l+a-o)/t);return Math.max(0,Math.min(e-1,s+c-1))},initCache(){},clearCache:!0,validateProps(){}}),Ag=(n,e,t)=>{const{itemSize:i}=n,{items:r,lastVisitedIndex:s}=t;if(e>s){let a=0;if(s>=0){const o=r[s];a=o.offset+o.size}for(let o=s+1;o<=e;o++){const l=i(o);r[o]={offset:a,size:l},a+=l}t.lastVisitedIndex=e}return r[e]},l5e=(n,e,t)=>{const{items:i,lastVisitedIndex:r}=e;return(r>0?i[r].offset:0)>=t?IJ(n,e,0,r,t):c5e(n,e,Math.max(0,r),t)},IJ=(n,e,t,i,r)=>{for(;t<=i;){const s=t+Math.floor((i-t)/2),a=Ag(n,s,e).offset;if(a===r)return s;a<r?t=s+1:a>r&&(i=s-1)}return Math.max(0,t-1)},c5e=(n,e,t,i)=>{const{total:r}=n;let s=1;for(;t<r&&Ag(n,t,e).offset<i;)t+=s,s*=2;return IJ(n,e,Math.floor(t/2),Math.min(t,r-1),i)},jU=({total:n},{items:e,estimatedItemSize:t,lastVisitedIndex:i})=>{let r=0;if(i>=n&&(i=n-1),i>=0){const o=e[i];r=o.offset+o.size}const a=(n-i-1)*t;return r+a},u5e=TJ({name:"ElDynamicSizeList",getItemOffset:(n,e,t)=>Ag(n,e,t).offset,getItemSize:(n,e,{items:t})=>t[e].size,getEstimatedTotalSize:jU,getOffset:(n,e,t,i,r)=>{const{height:s,layout:a,width:o}=n,l=mx(a)?o:s,c=Ag(n,e,r),u=jU(n,r),d=Math.max(0,Math.min(u-l,c.offset)),f=Math.max(0,c.offset-l+c.size);switch(t===TM&&(i>=f-l&&i<=d+l?t=nc:t=Nu),t){case fx:return d;case hx:return f;case Nu:return Math.round(f+(d-f)/2);case nc:default:return i>=f&&i<=d?i:i<f?f:d}},getStartIndexForOffset:(n,e,t)=>l5e(n,t,e),getStopIndexForStartIndex:(n,e,t,i)=>{const{height:r,total:s,layout:a,width:o}=n,l=mx(a)?o:r,c=Ag(n,e,i),u=t+l;let d=c.offset+c.size,f=e;for(;f<s-1&&d<u;)f++,d+=Ag(n,f,i).size;return f},initCache({estimatedItemSize:n=$D},e){const t={items:{},estimatedItemSize:n,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(i,r=!0)=>{var s,a;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,i-1),(s=e.exposed)==null||s.getItemStyleCache(-1),r&&((a=e.proxy)==null||a.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:n})=>{}}),d5e={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var f5e=Ie({name:"ElSelectDropdown",props:d5e,setup(n,{slots:e,expose:t}){const i=Nt(Nk),r=St("select"),{getLabel:s,getValue:a,getDisabled:o}=MM(i.props),l=ae([]),c=ae(),u=V(()=>n.data.length);pt(()=>u.value,()=>{var E,I;(I=(E=i.tooltipRef.value).updatePopper)==null||I.call(E)});const d=V(()=>bi(i.props.estimatedOptionHeight)),f=V(()=>d.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:E=>l.value[E]}),h=(E=[],I)=>{const{props:{valueKey:L}}=i;return Rn(I)?E&&E.some(F=>Ki(fs(F,L))===fs(I,L)):E.includes(I)},p=(E,I)=>{if(Rn(I)){const{valueKey:L}=i.props;return fs(E,L)===fs(I,L)}else return E===I},m=(E,I)=>i.props.multiple?h(E,a(I)):p(E,a(I)),v=(E,I)=>{const{disabled:L,multiple:F,multipleLimit:B}=i.props;return L||!I&&(F?B>0&&E.length>=B:!1)},g=E=>n.hoveringIndex===E;t({listRef:c,isSized:d,isItemDisabled:v,isItemHovering:g,isItemSelected:m,scrollToItem:E=>{const I=c.value;I&&I.scrollToItem(E)},resetScrollTop:()=>{const E=c.value;E&&E.resetScrollTop()}});const A=E=>{const{index:I,data:L,style:F}=E,B=w(d),{itemSize:P,estimatedSize:z}=w(f),{modelValue:O}=i.props,{onSelect:N,onHover:H}=i,q=L[I];if(q.type==="Group")return _e(GTe,{item:q,style:F,height:B?P:z},null);const te=m(O,q),Q=v(O,te),ee=g(I);return _e(QTe,Kn(E,{selected:te,disabled:o(q)||Q,created:!!q.created,hovering:ee,item:q,onSelect:N,onHover:H}),{default:de=>{var J;return((J=e.default)==null?void 0:J.call(e,de))||_e("span",null,[s(q)])}})},{onKeyboardNavigate:S,onKeyboardSelect:C}=i,_=()=>{S("forward")},M=()=>{S("backward")},T=E=>{const{code:I}=E,{tab:L,esc:F,down:B,up:P,enter:z,numpadEnter:O}=kt;switch([F,B,P,z,O].includes(I)&&(E.preventDefault(),E.stopPropagation()),I){case L:case F:break;case B:_();break;case P:M();break;case z:case O:C();break}};return()=>{var E,I,L,F;const{data:B,width:P}=n,{height:z,multiple:O,scrollbarAlwaysOn:N}=i.props,H=V(()=>pC?!0:N),q=w(d)?EJ:u5e;return _e("div",{class:[r.b("dropdown"),r.is("multiple",O)],style:{width:`${P}px`}},[(E=e.header)==null?void 0:E.call(e),((I=e.loading)==null?void 0:I.call(e))||((L=e.empty)==null?void 0:L.call(e))||_e(q,Kn({ref:c},w(f),{className:r.be("dropdown","list"),scrollbarAlwaysOn:H.value,data:B,height:z,width:P,total:B.length,onKeydown:T}),{default:te=>_e(A,te,null)}),(F=e.footer)==null?void 0:F.call(e)])}}});function h5e(n,e){const{aliasProps:t,getLabel:i,getValue:r}=MM(n),s=ae(0),a=ae(),o=V(()=>n.allowCreate&&n.filterable);function l(h){const p=m=>i(m)===h;return n.options&&n.options.some(p)||e.createdOptions.some(p)}function c(h){o.value&&(n.multiple&&h.created?s.value++:a.value=h)}function u(h){if(o.value)if(h&&h.length>0){if(l(h))return;const p={[t.value.value]:h,[t.value.label]:h,created:!0,[t.value.disabled]:!1};e.createdOptions.length>=s.value?e.createdOptions[s.value]=p:e.createdOptions.push(p)}else if(n.multiple)e.createdOptions.length=s.value;else{const p=a.value;e.createdOptions.length=0,p&&p.created&&e.createdOptions.push(p)}}function d(h){if(!o.value||!h||!h.created||h.created&&n.reserveKeyword&&e.inputValue===i(h))return;const p=e.createdOptions.findIndex(m=>r(m)===r(h));~p&&(e.createdOptions.splice(p,1),s.value--)}function f(){o.value&&(e.createdOptions.length=0,s.value=0)}return{createNewOption:u,removeNewOption:d,selectNewOption:c,clearAllNewOption:f}}const p5e=(n,e)=>{const{t}=ci(),i=St("select"),r=St("input"),{form:s,formItem:a}=La(),{inputId:o}=bc(n,{formItemContext:a}),{aliasProps:l,getLabel:c,getValue:u,getDisabled:d,getOptions:f}=MM(n),{valueOnClear:h,isEmptyValue:p}=hM(n),m=Si({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),v=ae(-1),g=ae(),y=ae(),x=ae(),b=ae(),A=ae(),S=ae(),C=ae(),_=ae(),M=ae(),T=ae(),{isComposing:E,handleCompositionStart:I,handleCompositionEnd:L,handleCompositionUpdate:F}=bA({afterComposition:he=>En(he)}),{wrapperRef:B,isFocused:P,handleBlur:z}=Sp(A,{beforeFocus(){return te.value},afterFocus(){n.automaticDropdown&&!q.value&&(q.value=!0,m.menuVisibleOnFocus=!0)},beforeBlur(he){var Ze,ft;return((Ze=x.value)==null?void 0:Ze.isFocusInsideContent(he))||((ft=b.value)==null?void 0:ft.isFocusInsideContent(he))},afterBlur(){q.value=!1,m.menuVisibleOnFocus=!1}}),O=V(()=>oe("")),N=V(()=>n.loading?!1:n.options.length>0||m.createdOptions.length>0),H=ae([]),q=ae(!1),te=V(()=>n.disabled||(s==null?void 0:s.disabled)),Q=V(()=>{var he;return(he=s==null?void 0:s.statusIcon)!=null?he:!1}),ee=V(()=>{const he=H.value.length*n.itemHeight;return he>n.height?n.height:he}),de=V(()=>n.multiple?Mt(n.modelValue)&&n.modelValue.length>0:!p(n.modelValue)),J=V(()=>n.clearable&&!te.value&&m.inputHovering&&de.value),ue=V(()=>n.remote&&n.filterable?"":Ef),Te=V(()=>ue.value&&i.is("reverse",q.value)),De=V(()=>(a==null?void 0:a.validateState)||""),Le=V(()=>{if(De.value)return gM[De.value]}),Ne=V(()=>n.remote?300:0),Y=V(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!m.inputValue&&!N.value?!1:n.filterable&&m.inputValue&&N.value&&H.value.length===0?n.noMatchText||t("el.select.noMatch"):N.value?null:n.noDataText||t("el.select.noData")),oe=he=>{const Ze=new RegExp(gk(he),"i"),ft=n.filterable&&Xt(n.filterMethod),yt=n.filterable&&n.remote&&Xt(n.remoteMethod),ct=Ht=>ft||yt?!0:he?Ze.test(c(Ht)||""):!0;return n.loading?[]:[...m.createdOptions,...n.options].reduce((Ht,$t)=>{const cn=f($t);if(Mt(cn)){const mn=cn.filter(ct);mn.length>0&&Ht.push({label:c($t),type:"Group"},...mn)}else(n.remote||ct($t))&&Ht.push($t);return Ht},[])},ne=()=>{H.value=oe(m.inputValue)},Xe=V(()=>{const he=new Map;return O.value.forEach((Ze,ft)=>{he.set(Rt(u(Ze)),{option:Ze,index:ft})}),he}),ke=V(()=>{const he=new Map;return H.value.forEach((Ze,ft)=>{he.set(Rt(u(Ze)),{option:Ze,index:ft})}),he}),Ge=V(()=>H.value.every(he=>d(he))),He=gs(),qe=V(()=>He.value==="small"?"small":"default"),tt=()=>{var he;if(Jt(n.fitInputWidth)){v.value=n.fitInputWidth;return}const Ze=((he=g.value)==null?void 0:he.offsetWidth)||200;!n.fitInputWidth&&N.value?Yt(()=>{v.value=Math.max(Ze,pe())}):v.value=Ze},pe=()=>{var he,Ze;const yt=document.createElement("canvas").getContext("2d"),ct=i.be("dropdown","item"),$t=(((Ze=(he=_.value)==null?void 0:he.listRef)==null?void 0:Ze.innerRef)||document).querySelector(`.${ct}`);if($t===null||yt===null)return 0;const cn=getComputedStyle($t),mn=Number.parseFloat(cn.paddingLeft)+Number.parseFloat(cn.paddingRight);return yt.font=cn.font,H.value.reduce((Fn,on)=>{const ni=yt.measureText(c(on));return Math.max(ni.width,Fn)},0)+mn},G=()=>{if(!y.value)return 0;const he=window.getComputedStyle(y.value);return Number.parseFloat(he.gap||"6px")},Z=V(()=>{const he=G();return{maxWidth:`${T.value&&n.maxCollapseTags===1?m.selectionWidth-m.collapseItemWidth-he:m.selectionWidth}px`}}),ge=V(()=>({maxWidth:`${m.selectionWidth}px`})),Oe=V(()=>Mt(n.modelValue)?n.modelValue.length===0&&!m.inputValue:n.filterable?!m.inputValue:!0),je=V(()=>{var he;const Ze=(he=n.placeholder)!=null?he:t("el.select.placeholder");return n.multiple||!de.value?Ze:m.selectedLabel}),bt=V(()=>{var he,Ze;return(Ze=(he=x.value)==null?void 0:he.popperRef)==null?void 0:Ze.contentRef}),At=V(()=>{if(n.multiple){const he=n.modelValue.length;if(n.modelValue.length>0&&ke.value.has(n.modelValue[he-1])){const{index:Ze}=ke.value.get(n.modelValue[he-1]);return Ze}}else if(!p(n.modelValue)&&ke.value.has(n.modelValue)){const{index:he}=ke.value.get(n.modelValue);return he}return-1}),Ee=V({get(){return q.value&&Y.value!==!1},set(he){q.value=he}}),gt=V(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(0,n.maxCollapseTags):m.cachedOptions:[]),lt=V(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(n.maxCollapseTags):[]:[]),{createNewOption:$,removeNewOption:le,selectNewOption:fe,clearAllNewOption:Me}=h5e(n,m),me=()=>{te.value||(m.menuVisibleOnFocus?m.menuVisibleOnFocus=!1:q.value=!q.value)},Ae=()=>{m.inputValue.length>0&&!q.value&&(q.value=!0),$(m.inputValue),we(m.inputValue)},dt=Jo(Ae,Ne.value),we=he=>{m.previousQuery===he||E.value||(m.previousQuery=he,n.filterable&&Xt(n.filterMethod)?n.filterMethod(he):n.filterable&&n.remote&&Xt(n.remoteMethod)&&n.remoteMethod(he),n.defaultFirstOption&&(n.filterable||n.remote)&&H.value.length?Yt(_t):Yt(dn))},_t=()=>{const he=H.value.filter(yt=>!yt.disabled&&yt.type!=="Group"),Ze=he.find(yt=>yt.created),ft=he[0];m.hoveringIndex=Ft(H.value,Ze||ft)},it=he=>{ha(n.modelValue,he)||e(zi,he)},wt=he=>{e(Tn,he),it(he),m.previousValue=n.multiple?String(he):he},Ft=(he=[],Ze)=>{if(!Rn(Ze))return he.indexOf(Ze);const ft=n.valueKey;let yt=-1;return he.some((ct,Ht)=>fs(ct,ft)===fs(Ze,ft)?(yt=Ht,!0):!1),yt},Rt=he=>Rn(he)?fs(he,n.valueKey):he,Wt=()=>{tt()},hn=()=>{m.selectionWidth=y.value.getBoundingClientRect().width},pi=()=>{m.collapseItemWidth=T.value.getBoundingClientRect().width},Pn=()=>{var he,Ze;(Ze=(he=x.value)==null?void 0:he.updatePopper)==null||Ze.call(he)},Qi=()=>{var he,Ze;(Ze=(he=b.value)==null?void 0:he.updatePopper)==null||Ze.call(he)},ai=he=>{if(n.multiple){let Ze=n.modelValue.slice();const ft=Ft(Ze,u(he));ft>-1?(Ze=[...Ze.slice(0,ft),...Ze.slice(ft+1)],m.cachedOptions.splice(ft,1),le(he)):(n.multipleLimit<=0||Ze.length<n.multipleLimit)&&(Ze=[...Ze,u(he)],m.cachedOptions.push(he),fe(he)),wt(Ze),he.created&&we(""),n.filterable&&!n.reserveKeyword&&(m.inputValue="")}else m.selectedLabel=c(he),wt(u(he)),q.value=!1,fe(he),he.created||Me();se()},X=(he,Ze)=>{let ft=n.modelValue.slice();const yt=Ft(ft,u(Ze));yt>-1&&!te.value&&(ft=[...n.modelValue.slice(0,yt),...n.modelValue.slice(yt+1)],m.cachedOptions.splice(yt,1),wt(ft),e("remove-tag",u(Ze)),le(Ze)),he.stopPropagation(),se()},se=()=>{var he;(he=A.value)==null||he.focus()},zt=()=>{var he;if(q.value){q.value=!1,Yt(()=>{var Ze;return(Ze=A.value)==null?void 0:Ze.blur()});return}(he=A.value)==null||he.blur()},Ce=()=>{m.inputValue.length>0?m.inputValue="":q.value=!1},ce=he=>$$(he,Ze=>!m.cachedOptions.some(ft=>u(ft)===Ze&&d(ft))),Ct=he=>{if(n.multiple&&he.code!==kt.delete&&m.inputValue.length===0){he.preventDefault();const Ze=n.modelValue.slice(),ft=ce(Ze);if(ft<0)return;const yt=Ze[ft];Ze.splice(ft,1);const ct=m.cachedOptions[ft];m.cachedOptions.splice(ft,1),le(ct),wt(Ze),e("remove-tag",yt)}},vt=()=>{let he;Mt(n.modelValue)?he=[]:he=h.value,n.multiple?m.cachedOptions=[]:m.selectedLabel="",q.value=!1,wt(he),e("clear"),Me(),se()},We=(he,Ze=void 0)=>{const ft=H.value;if(!["forward","backward"].includes(he)||te.value||ft.length<=0||Ge.value||E.value)return;if(!q.value)return me();Ze===void 0&&(Ze=m.hoveringIndex);let yt=-1;he==="forward"?(yt=Ze+1,yt>=ft.length&&(yt=0)):he==="backward"&&(yt=Ze-1,(yt<0||yt>=ft.length)&&(yt=ft.length-1));const ct=ft[yt];if(d(ct)||ct.type==="Group")return We(he,yt);m.hoveringIndex=yt,ti(yt)},xt=()=>{if(q.value)~m.hoveringIndex&&H.value[m.hoveringIndex]&&ai(H.value[m.hoveringIndex]);else return me()},Pt=he=>{m.hoveringIndex=he??-1},dn=()=>{n.multiple?m.hoveringIndex=H.value.findIndex(he=>n.modelValue.some(Ze=>Rt(Ze)===Rt(he))):m.hoveringIndex=H.value.findIndex(he=>Rt(he)===Rt(n.modelValue))},En=he=>{if(m.inputValue=he.target.value,n.remote)dt();else return Ae()},ei=he=>{if(q.value=!1,P.value){const Ze=new FocusEvent("focus",he);z(Ze)}},Je=()=>(m.isBeforeHide=!1,Yt(()=>{~At.value&&ti(m.hoveringIndex)})),ti=he=>{_.value.scrollToItem(he)},st=(he,Ze)=>{const ft=Rt(he);if(Xe.value.has(ft)){const{option:yt}=Xe.value.get(ft);return yt}if(Ze&&Ze.length){const yt=Ze.find(ct=>Rt(u(ct))===ft);if(yt)return yt}return{[l.value.value]:he,[l.value.label]:he}},nr=(he=!1)=>{if(n.multiple)if(n.modelValue.length>0){const Ze=m.cachedOptions.slice();m.cachedOptions.length=0,m.previousValue=n.modelValue.toString();for(const ft of n.modelValue){const yt=st(ft,Ze);m.cachedOptions.push(yt)}}else m.cachedOptions=[],m.previousValue=void 0;else if(de.value){m.previousValue=n.modelValue;const Ze=H.value,ft=Ze.findIndex(yt=>Rt(u(yt))===Rt(n.modelValue));~ft?m.selectedLabel=c(Ze[ft]):(!m.selectedLabel||he)&&(m.selectedLabel=Rt(n.modelValue))}else m.selectedLabel="",m.previousValue=void 0;Me(),tt()};return pt(()=>n.fitInputWidth,()=>{tt()}),pt(q,he=>{he?(n.persistent||tt(),we("")):(m.inputValue="",m.previousQuery=null,m.isBeforeHide=!0,$("")),e("visible-change",he)}),pt(()=>n.modelValue,(he,Ze)=>{var ft;(!he||Mt(he)&&he.length===0||n.multiple&&!ha(he.toString(),m.previousValue)||!n.multiple&&Rt(he)!==Rt(m.previousValue))&&nr(!0),!ha(he,Ze)&&n.validateEvent&&((ft=a==null?void 0:a.validate)==null||ft.call(a,"change").catch(ct=>void 0))},{deep:!0}),pt(()=>n.options,()=>{const he=A.value;(!he||he&&document.activeElement!==he)&&nr()},{deep:!0,flush:"post"}),pt(()=>H.value,()=>(tt(),_.value&&Yt(_.value.resetScrollTop))),Js(()=>{m.isBeforeHide||ne()}),Js(()=>{const{valueKey:he,options:Ze}=n,ft=new Map;for(const yt of Ze){const ct=u(yt);let Ht=ct;if(Rn(Ht)&&(Ht=fs(ct,he)),ft.get(Ht))break;ft.set(Ht,!0)}}),Mn(()=>{nr()}),Fr(g,Wt),Fr(y,hn),Fr(_,Pn),Fr(B,Pn),Fr(M,Qi),Fr(T,pi),{inputId:o,collapseTagSize:qe,currentPlaceholder:je,expanded:q,emptyText:Y,popupHeight:ee,debounce:Ne,allOptions:O,filteredOptions:H,iconComponent:ue,iconReverse:Te,tagStyle:Z,collapseTagStyle:ge,popperSize:v,dropdownMenuVisible:Ee,hasModelValue:de,shouldShowPlaceholder:Oe,selectDisabled:te,selectSize:He,needStatusIcon:Q,showClearBtn:J,states:m,isFocused:P,nsSelect:i,nsInput:r,inputRef:A,menuRef:_,tagMenuRef:M,tooltipRef:x,tagTooltipRef:b,selectRef:g,wrapperRef:B,selectionRef:y,prefixRef:S,suffixRef:C,collapseItemRef:T,popperRef:bt,validateState:De,validateIcon:Le,showTagList:gt,collapseTagList:lt,debouncedOnInputChange:dt,deleteTag:X,getLabel:c,getValue:u,getDisabled:d,getValueKey:Rt,handleClear:vt,handleClickOutside:ei,handleDel:Ct,handleEsc:Ce,focus:se,blur:zt,handleMenuEnter:Je,handleResize:Wt,resetSelectionWidth:hn,updateTooltip:Pn,updateTagTooltip:Qi,updateOptions:ne,toggleMenu:me,scrollTo:ti,onInput:En,onKeyboardNavigate:We,onKeyboardSelect:xt,onSelect:ai,onHover:Pt,handleCompositionStart:I,handleCompositionEnd:L,handleCompositionUpdate:F}},m5e=Ie({name:"ElSelectV2",components:{ElSelectMenu:f5e,ElTag:x1,ElTooltip:Da,ElIcon:Ut},directives:{ClickOutside:pf},props:qTe,emits:YTe,setup(n,{emit:e}){const t=V(()=>{const{modelValue:o,multiple:l}=n,c=l?[]:void 0;return Mt(o)?l?o:c:l?c:o}),i=p5e(Si({...Vs(n),modelValue:t}),e),{calculatorRef:r,inputStyle:s}=Lk();Qn(Nk,{props:Si({...Vs(n),height:i.popupHeight,modelValue:t}),expanded:i.expanded,tooltipRef:i.tooltipRef,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect});const a=V(()=>n.multiple?i.states.cachedOptions.map(o=>o.label):i.states.selectedLabel);return{...i,modelValue:t,selectedLabel:a,calculatorRef:r,inputStyle:s}}});function v5e(n,e,t,i,r,s){const a=an("el-tag"),o=an("el-tooltip"),l=an("el-icon"),c=an("el-select-menu"),u=tM("click-outside");return Cn((W(),ve("div",{ref:"selectRef",class:j([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),onMouseenter:d=>n.states.inputHovering=!0,onMouseleave:d=>n.states.inputHovering=!1},[_e(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,placement:n.placement,pure:"",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:d=>n.states.isBeforeHide=!1},{default:Re(()=>[be("div",{ref:"wrapperRef",class:j([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:ln(n.toggleMenu,["prevent"])},[n.$slots.prefix?(W(),ve("div",{key:0,ref:"prefixRef",class:j(n.nsSelect.e("prefix"))},[Qe(n.$slots,"prefix")],2)):et("v-if",!0),be("div",{ref:"selectionRef",class:j([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.modelValue.length)])},[n.multiple?Qe(n.$slots,"tag",{key:0},()=>[(W(!0),ve(Kt,null,Jn(n.showTagList,d=>(W(),ve("div",{key:n.getValueKey(n.getValue(d)),class:j(n.nsSelect.e("selected-item"))},[_e(a,{closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:jt(n.tagStyle),onClose:f=>n.deleteTag(f,d)},{default:Re(()=>[be("span",{class:j(n.nsSelect.e("tags-text"))},[Qe(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Hn(Tt(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.modelValue.length>n.maxCollapseTags?(W(),rt(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:Re(()=>[be("div",{ref:"collapseItemRef",class:j(n.nsSelect.e("selected-item"))},[_e(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,style:jt(n.collapseTagStyle),"disable-transitions":""},{default:Re(()=>[be("span",{class:j(n.nsSelect.e("tags-text"))}," + "+Tt(n.modelValue.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Re(()=>[be("div",{ref:"tagMenuRef",class:j(n.nsSelect.e("selection"))},[(W(!0),ve(Kt,null,Jn(n.collapseTagList,d=>(W(),ve("div",{key:n.getValueKey(n.getValue(d)),class:j(n.nsSelect.e("selected-item"))},[_e(a,{class:"in-tooltip",closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:f=>n.deleteTag(f,d)},{default:Re(()=>[be("span",{class:j(n.nsSelect.e("tags-text"))},[Qe(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Hn(Tt(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):et("v-if",!0)]):et("v-if",!0),be("div",{class:j([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Cn(be("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":d=>n.states.inputValue=d,style:jt(n.inputStyle),autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":n.expanded,"aria-label":n.ariaLabel,class:j([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,role:"combobox",readonly:!n.filterable,spellcheck:"false",type:"text",name:n.name,onInput:n.onInput,onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onKeydown:[Xi(ln(d=>n.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),Xi(ln(d=>n.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),Xi(ln(n.onKeyboardSelect,["stop","prevent"]),["enter"]),Xi(ln(n.handleEsc,["stop","prevent"]),["esc"]),Xi(ln(n.handleDel,["stop"]),["delete"])],onClick:ln(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[rM,n.states.inputValue]]),n.filterable?(W(),ve("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:j(n.nsSelect.e("input-calculator")),textContent:Tt(n.states.inputValue)},null,10,["textContent"])):et("v-if",!0)],2),n.shouldShowPlaceholder?(W(),ve("div",{key:1,class:j([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?Qe(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[be("span",null,Tt(n.currentPlaceholder),1)]):(W(),ve("span",{key:1},Tt(n.currentPlaceholder),1))],2)):et("v-if",!0)],2),be("div",{ref:"suffixRef",class:j(n.nsSelect.e("suffix"))},[n.iconComponent?Cn((W(),rt(l,{key:0,class:j([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.iconReverse])},{default:Re(()=>[(W(),rt(On(n.iconComponent)))]),_:1},8,["class"])),[[yi,!n.showClearBtn]]):et("v-if",!0),n.showClearBtn&&n.clearIcon?(W(),rt(l,{key:1,class:j([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.nsSelect.e("clear")]),onClick:ln(n.handleClear,["prevent","stop"])},{default:Re(()=>[(W(),rt(On(n.clearIcon)))]),_:1},8,["class","onClick"])):et("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(W(),rt(l,{key:2,class:j([n.nsInput.e("icon"),n.nsInput.e("validateIcon"),n.nsInput.is("loading",n.validateState==="validating")])},{default:Re(()=>[(W(),rt(On(n.validateIcon)))]),_:1},8,["class"])):et("v-if",!0)],2)],10,["onClick"])]),content:Re(()=>[_e(c,{ref:"menuRef",data:n.filteredOptions,width:n.popperSize,"hovering-index":n.states.hoveringIndex,"scrollbar-always-on":n.scrollbarAlwaysOn},Il({default:Re(d=>[Qe(n.$slots,"default",yl(Yu(d)))]),_:2},[n.$slots.header?{name:"header",fn:Re(()=>[be("div",{class:j(n.nsSelect.be("dropdown","header"))},[Qe(n.$slots,"header")],2)])}:void 0,n.$slots.loading&&n.loading?{name:"loading",fn:Re(()=>[be("div",{class:j(n.nsSelect.be("dropdown","loading"))},[Qe(n.$slots,"loading")],2)])}:n.loading||n.filteredOptions.length===0?{name:"empty",fn:Re(()=>[be("div",{class:j(n.nsSelect.be("dropdown","empty"))},[Qe(n.$slots,"empty",{},()=>[be("span",null,Tt(n.emptyText),1)])],2)])}:void 0,n.$slots.footer?{name:"footer",fn:Re(()=>[be("div",{class:j(n.nsSelect.be("dropdown","footer"))},[Qe(n.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[u,n.handleClickOutside,n.popperRef]])}var g5e=It(m5e,[["render",v5e],["__file","select.vue"]]);const y5e=xn(g5e),b5e=Et({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Ke([Number,Object])}}),x5e=Et({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),A5e=Ie({name:"ElSkeletonItem"}),w5e=Ie({...A5e,props:x5e,setup(n){const e=St("skeleton");return(t,i)=>(W(),ve("div",{class:j([w(e).e("item"),w(e).e(t.variant)])},[t.variant==="image"?(W(),rt(w(Lge),{key:0})):et("v-if",!0)],2))}});var TC=It(w5e,[["__file","skeleton-item.vue"]]);const S5e=(n,e=0)=>{if(e===0)return n;const t=Rn(e)&&!!e.initVal,i=ae(t);let r=null;const s=o=>{if(bi(o)){i.value=n.value;return}r&&clearTimeout(r),r=setTimeout(()=>{i.value=n.value},o)},a=o=>{o==="leading"?Jt(e)?s(e):s(e.leading):Rn(e)?s(e.trailing):i.value=!1};return Mn(()=>a("leading")),pt(()=>n.value,o=>{a(o?"leading":"trailing")}),i},_5e=Ie({name:"ElSkeleton"}),C5e=Ie({..._5e,props:b5e,setup(n,{expose:e}){const t=n,i=St("skeleton"),r=S5e(Ii(t,"loading"),t.throttle);return e({uiLoading:r}),(s,a)=>w(r)?(W(),ve("div",Kn({key:0,class:[w(i).b(),w(i).is("animated",s.animated)]},s.$attrs),[(W(!0),ve(Kt,null,Jn(s.count,o=>(W(),ve(Kt,{key:o},[w(r)?Qe(s.$slots,"template",{key:o},()=>[_e(TC,{class:j(w(i).is("first")),variant:"p"},null,8,["class"]),(W(!0),ve(Kt,null,Jn(s.rows,l=>(W(),rt(TC,{key:l,class:j([w(i).e("paragraph"),w(i).is("last",l===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):et("v-if",!0)],64))),128))],16)):Qe(s.$slots,"default",yl(Kn({key:1},s.$attrs)))}});var M5e=It(C5e,[["__file","skeleton.vue"]]);const T5e=xn(M5e,{SkeletonItem:TC}),E5e=Or(TC),DJ=Symbol("sliderContextKey"),I5e=Et({modelValue:{type:Ke([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:ws,inputSize:ws,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Ke(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Ke(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Df,default:"top"},marks:{type:Ke(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...ga(["ariaLabel"])}),F5=n=>Jt(n)||Mt(n)&&n.every(Jt),D5e={[Tn]:F5,[Ea]:F5,[zi]:F5},R5e=Et({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Df,default:"top"}}),P5e={[Tn]:n=>Jt(n)},L5e=(n,e,t)=>{const i=ae(),r=ae(!1),s=V(()=>e.value instanceof Function),a=V(()=>s.value&&e.value(n.modelValue)||n.modelValue),o=Jo(()=>{t.value&&(r.value=!0)},50),l=Jo(()=>{t.value&&(r.value=!1)},50);return{tooltip:i,tooltipVisible:r,formatValue:a,displayTooltip:o,hideTooltip:l}},k5e=(n,e,t)=>{const{disabled:i,min:r,max:s,step:a,showTooltip:o,persistent:l,precision:c,sliderSize:u,formatTooltip:d,emitChange:f,resetSize:h,updateDragging:p}=Nt(DJ),{tooltip:m,tooltipVisible:v,formatValue:g,displayTooltip:y,hideTooltip:x}=L5e(n,d,o),b=ae(),A=V(()=>`${(n.modelValue-r.value)/(s.value-r.value)*100}%`),S=V(()=>n.vertical?{bottom:A.value}:{left:A.value}),C=()=>{e.hovering=!0,y()},_=()=>{e.hovering=!1,e.dragging||x()},M=Q=>{i.value||(Q.preventDefault(),N(Q),window.addEventListener("mousemove",H),window.addEventListener("touchmove",H),window.addEventListener("mouseup",q),window.addEventListener("touchend",q),window.addEventListener("contextmenu",q),b.value.focus())},T=Q=>{i.value||(e.newPosition=Number.parseFloat(A.value)+Q/(s.value-r.value)*100,te(e.newPosition),f())},E=()=>{T(-a.value)},I=()=>{T(a.value)},L=()=>{T(-a.value*4)},F=()=>{T(a.value*4)},B=()=>{i.value||(te(0),f())},P=()=>{i.value||(te(100),f())},z=Q=>{let ee=!0;switch(Q.code){case kt.left:case kt.down:E();break;case kt.right:case kt.up:I();break;case kt.home:B();break;case kt.end:P();break;case kt.pageDown:L();break;case kt.pageUp:F();break;default:ee=!1;break}ee&&Q.preventDefault()},O=Q=>{let ee,de;return Q.type.startsWith("touch")?(de=Q.touches[0].clientY,ee=Q.touches[0].clientX):(de=Q.clientY,ee=Q.clientX),{clientX:ee,clientY:de}},N=Q=>{e.dragging=!0,e.isClick=!0;const{clientX:ee,clientY:de}=O(Q);n.vertical?e.startY=de:e.startX=ee,e.startPosition=Number.parseFloat(A.value),e.newPosition=e.startPosition},H=Q=>{if(e.dragging){e.isClick=!1,y(),h();let ee;const{clientX:de,clientY:J}=O(Q);n.vertical?(e.currentY=J,ee=(e.startY-e.currentY)/u.value*100):(e.currentX=de,ee=(e.currentX-e.startX)/u.value*100),e.newPosition=e.startPosition+ee,te(e.newPosition)}},q=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||x(),e.isClick||te(e.newPosition),f()},0),window.removeEventListener("mousemove",H),window.removeEventListener("touchmove",H),window.removeEventListener("mouseup",q),window.removeEventListener("touchend",q),window.removeEventListener("contextmenu",q))},te=async Q=>{if(Q===null||Number.isNaN(+Q))return;Q<0?Q=0:Q>100&&(Q=100);const ee=100/((s.value-r.value)/a.value);let J=Math.round(Q/ee)*ee*(s.value-r.value)*.01+r.value;J=Number.parseFloat(J.toFixed(c.value)),J!==n.modelValue&&t(Tn,J),!e.dragging&&n.modelValue!==e.oldValue&&(e.oldValue=n.modelValue),await Yt(),e.dragging&&y(),m.value.updatePopper()};return pt(()=>e.dragging,Q=>{p(Q)}),Li(b,"touchstart",M,{passive:!1}),{disabled:i,button:b,tooltip:m,tooltipVisible:v,showTooltip:o,persistent:l,wrapperStyle:S,formatValue:g,handleMouseEnter:C,handleMouseLeave:_,onButtonDown:M,onKeyDown:z,setPosition:te}},F5e=Ie({name:"ElSliderButton"}),B5e=Ie({...F5e,props:R5e,emits:P5e,setup(n,{expose:e,emit:t}){const i=n,r=St("slider"),s=Si({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),a=V(()=>u.value?d.value:!1),{disabled:o,button:l,tooltip:c,showTooltip:u,persistent:d,tooltipVisible:f,wrapperStyle:h,formatValue:p,handleMouseEnter:m,handleMouseLeave:v,onButtonDown:g,onKeyDown:y,setPosition:x}=k5e(i,s,t),{hovering:b,dragging:A}=Vs(s);return e({onButtonDown:g,onKeyDown:y,setPosition:x,hovering:b,dragging:A}),(S,C)=>(W(),ve("div",{ref_key:"button",ref:l,class:j([w(r).e("button-wrapper"),{hover:w(b),dragging:w(A)}]),style:jt(w(h)),tabindex:w(o)?-1:0,onMouseenter:w(m),onMouseleave:w(v),onMousedown:w(g),onFocus:w(m),onBlur:w(v),onKeydown:w(y)},[_e(w(Da),{ref_key:"tooltip",ref:c,visible:w(f),placement:S.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":S.tooltipClass,disabled:!w(u),persistent:w(a)},{content:Re(()=>[be("span",null,Tt(w(p)),1)]),default:Re(()=>[be("div",{class:j([w(r).e("button"),{hover:w(b),dragging:w(A)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var $U=It(B5e,[["__file","button.vue"]]);const N5e=Et({mark:{type:Ke([String,Object]),default:void 0}});var O5e=Ie({name:"ElSliderMarker",props:N5e,setup(n){const e=St("slider"),t=V(()=>qt(n.mark)?n.mark:n.mark.label),i=V(()=>qt(n.mark)?void 0:n.mark.style);return()=>en("div",{class:e.e("marks-text"),style:i.value},t.value)}});const U5e=(n,e,t)=>{const{form:i,formItem:r}=La(),s=Ui(),a=ae(),o=ae(),l={firstButton:a,secondButton:o},c=V(()=>n.disabled||(i==null?void 0:i.disabled)||!1),u=V(()=>Math.min(e.firstValue,e.secondValue)),d=V(()=>Math.max(e.firstValue,e.secondValue)),f=V(()=>n.range?`${100*(d.value-u.value)/(n.max-n.min)}%`:`${100*(e.firstValue-n.min)/(n.max-n.min)}%`),h=V(()=>n.range?`${100*(u.value-n.min)/(n.max-n.min)}%`:"0%"),p=V(()=>n.vertical?{height:n.height}:{}),m=V(()=>n.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),v=()=>{s.value&&(e.sliderSize=s.value[`client${n.vertical?"Height":"Width"}`])},g=I=>{const L=n.min+I*(n.max-n.min)/100;if(!n.range)return a;let F;return Math.abs(u.value-L)<Math.abs(d.value-L)?F=e.firstValue<e.secondValue?"firstButton":"secondButton":F=e.firstValue>e.secondValue?"firstButton":"secondButton",l[F]},y=I=>{const L=g(I);return L.value.setPosition(I),L},x=I=>{e.firstValue=I??n.min,A(n.range?[u.value,d.value]:I??n.min)},b=I=>{e.secondValue=I,n.range&&A([u.value,d.value])},A=I=>{t(Tn,I),t(Ea,I)},S=async()=>{await Yt(),t(zi,n.range?[u.value,d.value]:n.modelValue)},C=I=>{var L,F,B,P,z,O;if(c.value||e.dragging)return;v();let N=0;if(n.vertical){const H=(B=(F=(L=I.touches)==null?void 0:L.item(0))==null?void 0:F.clientY)!=null?B:I.clientY;N=(s.value.getBoundingClientRect().bottom-H)/e.sliderSize*100}else{const H=(O=(z=(P=I.touches)==null?void 0:P.item(0))==null?void 0:z.clientX)!=null?O:I.clientX,q=s.value.getBoundingClientRect().left;N=(H-q)/e.sliderSize*100}if(!(N<0||N>100))return y(N)};return{elFormItem:r,slider:s,firstButton:a,secondButton:o,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:p,barStyle:m,resetSize:v,setPosition:y,emitChange:S,onSliderWrapperPrevent:I=>{var L,F;((L=l.firstButton.value)!=null&&L.dragging||(F=l.secondButton.value)!=null&&F.dragging)&&I.preventDefault()},onSliderClick:I=>{C(I)&&S()},onSliderDown:async I=>{const L=C(I);L&&(await Yt(),L.value.onButtonDown(I))},onSliderMarkerDown:I=>{c.value||e.dragging||y(I)},setFirstValue:x,setSecondValue:b}},z5e=(n,e,t,i)=>({stops:V(()=>{if(!n.showStops||n.min>n.max)return[];if(n.step===0)return[];const a=(n.max-n.min)/n.step,o=100*n.step/(n.max-n.min),l=Array.from({length:a-1}).map((c,u)=>(u+1)*o);return n.range?l.filter(c=>c<100*(t.value-n.min)/(n.max-n.min)||c>100*(i.value-n.min)/(n.max-n.min)):l.filter(c=>c>100*(e.firstValue-n.min)/(n.max-n.min))}),getStopStyle:a=>n.vertical?{bottom:`${a}%`}:{left:`${a}%`}}),V5e=n=>V(()=>n.marks?Object.keys(n.marks).map(Number.parseFloat).sort((t,i)=>t-i).filter(t=>t<=n.max&&t>=n.min).map(t=>({point:t,position:(t-n.min)*100/(n.max-n.min),mark:n.marks[t]})):[]),H5e=(n,e,t,i,r,s)=>{const a=c=>{r(Tn,c),r(Ea,c)},o=()=>n.range?![t.value,i.value].every((c,u)=>c===e.oldValue[u]):n.modelValue!==e.oldValue,l=()=>{var c,u;n.min>n.max&&Rs("Slider","min should not be greater than max.");const d=n.modelValue;n.range&&Mt(d)?d[1]<n.min?a([n.min,n.min]):d[0]>n.max?a([n.max,n.max]):d[0]<n.min?a([n.min,d[1]]):d[1]>n.max?a([d[0],n.max]):(e.firstValue=d[0],e.secondValue=d[1],o()&&(n.validateEvent&&((c=s==null?void 0:s.validate)==null||c.call(s,"change").catch(f=>void 0)),e.oldValue=d.slice())):!n.range&&Jt(d)&&!Number.isNaN(d)&&(d<n.min?a(n.min):d>n.max?a(n.max):(e.firstValue=d,o()&&(n.validateEvent&&((u=s==null?void 0:s.validate)==null||u.call(s,"change").catch(f=>void 0)),e.oldValue=d)))};l(),pt(()=>e.dragging,c=>{c||l()}),pt(()=>n.modelValue,(c,u)=>{e.dragging||Mt(c)&&Mt(u)&&c.every((d,f)=>d===u[f])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),pt(()=>[n.min,n.max],()=>{l()})},G5e=(n,e,t)=>{const i=ae();return Mn(async()=>{n.range?(Mt(n.modelValue)?(e.firstValue=Math.max(n.min,n.modelValue[0]),e.secondValue=Math.min(n.max,n.modelValue[1])):(e.firstValue=n.min,e.secondValue=n.max),e.oldValue=[e.firstValue,e.secondValue]):(!Jt(n.modelValue)||Number.isNaN(n.modelValue)?e.firstValue=n.min:e.firstValue=Math.min(n.max,Math.max(n.min,n.modelValue)),e.oldValue=e.firstValue),Li(window,"resize",t),await Yt(),t()}),{sliderWrapper:i}},W5e=Ie({name:"ElSlider"}),q5e=Ie({...W5e,props:I5e,emits:D5e,setup(n,{expose:e,emit:t}){const i=n,r=St("slider"),{t:s}=ci(),a=Si({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:f,maxValue:h,runwayStyle:p,barStyle:m,resetSize:v,emitChange:g,onSliderWrapperPrevent:y,onSliderClick:x,onSliderDown:b,onSliderMarkerDown:A,setFirstValue:S,setSecondValue:C}=U5e(i,a,t),{stops:_,getStopStyle:M}=z5e(i,a,f,h),{inputId:T,isLabeledByFormItem:E}=bc(i,{formItemContext:o}),I=gs(),L=V(()=>i.inputSize||I.value),F=V(()=>i.ariaLabel||s("el.slider.defaultLabel",{min:i.min,max:i.max})),B=V(()=>i.range?i.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):F.value),P=V(()=>i.formatValueText?i.formatValueText(Q.value):`${Q.value}`),z=V(()=>i.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),O=V(()=>i.formatValueText?i.formatValueText(ee.value):`${ee.value}`),N=V(()=>[r.b(),r.m(I.value),r.is("vertical",i.vertical),{[r.m("with-input")]:i.showInput}]),H=V5e(i);H5e(i,a,f,h,t,o);const q=V(()=>{const ue=[i.min,i.max,i.step].map(Te=>{const De=`${Te}`.split(".")[1];return De?De.length:0});return Math.max.apply(null,ue)}),{sliderWrapper:te}=G5e(i,a,v),{firstValue:Q,secondValue:ee,sliderSize:de}=Vs(a),J=ue=>{a.dragging=ue};return Li(te,"touchstart",y,{passive:!1}),Li(te,"touchmove",y,{passive:!1}),Qn(DJ,{...Vs(i),sliderSize:de,disabled:d,precision:q,emitChange:g,resetSize:v,updateDragging:J}),e({onSliderClick:x}),(ue,Te)=>{var De,Le;return W(),ve("div",{id:ue.range?w(T):void 0,ref_key:"sliderWrapper",ref:te,class:j(w(N)),role:ue.range?"group":void 0,"aria-label":ue.range&&!w(E)?w(F):void 0,"aria-labelledby":ue.range&&w(E)?(De=w(o))==null?void 0:De.labelId:void 0},[be("div",{ref_key:"slider",ref:l,class:j([w(r).e("runway"),{"show-input":ue.showInput&&!ue.range},w(r).is("disabled",w(d))]),style:jt(w(p)),onMousedown:w(b),onTouchstartPassive:w(b)},[be("div",{class:j(w(r).e("bar")),style:jt(w(m))},null,6),_e($U,{id:ue.range?void 0:w(T),ref_key:"firstButton",ref:c,"model-value":w(Q),vertical:ue.vertical,"tooltip-class":ue.tooltipClass,placement:ue.placement,role:"slider","aria-label":ue.range||!w(E)?w(B):void 0,"aria-labelledby":!ue.range&&w(E)?(Le=w(o))==null?void 0:Le.labelId:void 0,"aria-valuemin":ue.min,"aria-valuemax":ue.range?w(ee):ue.max,"aria-valuenow":w(Q),"aria-valuetext":w(P),"aria-orientation":ue.vertical?"vertical":"horizontal","aria-disabled":w(d),"onUpdate:modelValue":w(S)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),ue.range?(W(),rt($U,{key:0,ref_key:"secondButton",ref:u,"model-value":w(ee),vertical:ue.vertical,"tooltip-class":ue.tooltipClass,placement:ue.placement,role:"slider","aria-label":w(z),"aria-valuemin":w(Q),"aria-valuemax":ue.max,"aria-valuenow":w(ee),"aria-valuetext":w(O),"aria-orientation":ue.vertical?"vertical":"horizontal","aria-disabled":w(d),"onUpdate:modelValue":w(C)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):et("v-if",!0),ue.showStops?(W(),ve("div",{key:1},[(W(!0),ve(Kt,null,Jn(w(_),(Ne,Y)=>(W(),ve("div",{key:Y,class:j(w(r).e("stop")),style:jt(w(M)(Ne))},null,6))),128))])):et("v-if",!0),w(H).length>0?(W(),ve(Kt,{key:2},[be("div",null,[(W(!0),ve(Kt,null,Jn(w(H),(Ne,Y)=>(W(),ve("div",{key:Y,style:jt(w(M)(Ne.position)),class:j([w(r).e("stop"),w(r).e("marks-stop")])},null,6))),128))]),be("div",{class:j(w(r).e("marks"))},[(W(!0),ve(Kt,null,Jn(w(H),(Ne,Y)=>(W(),rt(w(O5e),{key:Y,mark:Ne.mark,style:jt(w(M)(Ne.position)),onMousedown:ln(oe=>w(A)(Ne.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):et("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),ue.showInput&&!ue.range?(W(),rt(w(cJ),{key:0,ref:"input","model-value":w(Q),class:j(w(r).e("input")),step:ue.step,disabled:w(d),controls:ue.showInputControls,min:ue.min,max:ue.max,precision:w(q),debounce:ue.debounce,size:w(L),"onUpdate:modelValue":w(S),onChange:w(g)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):et("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var K5e=It(q5e,[["__file","slider.vue"]]);const Y5e=xn(K5e),X5e=Et({prefixCls:{type:String}}),QU=Ie({name:"ElSpaceItem",props:X5e,setup(n,{slots:e}){const t=St("space"),i=V(()=>`${n.prefixCls||t.b()}__item`);return()=>en("div",{class:i.value},Qe(e,"default"))}}),ZU={small:8,default:12,large:16};function j5e(n){const e=St("space"),t=V(()=>[e.b(),e.m(n.direction),n.class]),i=ae(0),r=ae(0),s=V(()=>{const o=n.wrap||n.fill?{flexWrap:"wrap"}:{},l={alignItems:n.alignment},c={rowGap:`${r.value}px`,columnGap:`${i.value}px`};return[o,l,c,n.style]}),a=V(()=>n.fill?{flexGrow:1,minWidth:`${n.fillRatio}%`}:{});return Js(()=>{const{size:o="small",wrap:l,direction:c,fill:u}=n;if(Mt(o)){const[d=0,f=0]=o;i.value=d,r.value=f}else{let d;Jt(o)?d=o:d=ZU[o||"small"]||ZU.small,(l||u)&&c==="horizontal"?i.value=r.value=d:c==="horizontal"?(i.value=d,r.value=0):(r.value=d,i.value=0)}}),{classes:t,containerStyle:s,itemStyle:a}}const $5e=Et({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Ke([String,Object,Array]),default:""},style:{type:Ke([String,Array,Object]),default:""},alignment:{type:Ke(String),default:"center"},prefixCls:{type:String},spacer:{type:Ke([Object,String,Number,Array]),default:null,validator:n=>mr(n)||Jt(n)||qt(n)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:rd,validator:n=>Jt(n)||Mt(n)&&n.length===2&&n.every(Jt)}}),Q5e=Ie({name:"ElSpace",props:$5e,setup(n,{slots:e}){const{classes:t,containerStyle:i,itemStyle:r}=j5e(n);function s(a,o="",l=[]){const{prefixCls:c}=n;return a.forEach((u,d)=>{PD(u)?Mt(u.children)&&u.children.forEach((f,h)=>{PD(f)&&Mt(f.children)?s(f.children,`${o+h}-`,l):l.push(_e(QU,{style:r.value,prefixCls:c,key:`nested-${o+h}`},{default:()=>[f]},Wl.PROPS|Wl.STYLE,["style","prefixCls"]))}):Lxe(u)&&l.push(_e(QU,{style:r.value,prefixCls:c,key:`LoopKey${o+d}`},{default:()=>[u]},Wl.PROPS|Wl.STYLE,["style","prefixCls"]))}),l}return()=>{var a;const{spacer:o,direction:l}=n,c=Qe(e,"default",{key:0},()=>[]);if(((a=c.children)!=null?a:[]).length===0)return null;if(Mt(c.children)){let u=s(c.children);if(o){const d=u.length-1;u=u.reduce((f,h,p)=>{const m=[...f,h];return p!==d&&m.push(_e("span",{style:[r.value,l==="vertical"?"width: 100%":null],key:p},[mr(o)?o:Hn(o,Wl.TEXT)],Wl.STYLE)),m},[])}return _e("div",{class:t.value,style:i.value},u,Wl.STYLE|Wl.CLASS)}return c.children}}}),Z5e=xn(Q5e),J5e=Et({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Ke([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Ke([String,Object,Array])}}),eEe=Ie({name:"ElStatistic"}),tEe=Ie({...eEe,props:J5e,setup(n,{expose:e}){const t=n,i=St("statistic"),r=V(()=>{const{value:s,formatter:a,precision:o,decimalSeparator:l,groupSeparator:c}=t;if(Xt(a))return a(s);if(!Jt(s)||Number.isNaN(s))return s;let[u,d=""]=String(s).split(".");return d=d.padEnd(o,"0").slice(0,o>0?o:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:r}),(s,a)=>(W(),ve("div",{class:j(w(i).b())},[s.$slots.title||s.title?(W(),ve("div",{key:0,class:j(w(i).e("head"))},[Qe(s.$slots,"title",{},()=>[Hn(Tt(s.title),1)])],2)):et("v-if",!0),be("div",{class:j(w(i).e("content"))},[s.$slots.prefix||s.prefix?(W(),ve("div",{key:0,class:j(w(i).e("prefix"))},[Qe(s.$slots,"prefix",{},()=>[be("span",null,Tt(s.prefix),1)])],2)):et("v-if",!0),be("span",{class:j(w(i).e("number")),style:jt(s.valueStyle)},Tt(w(r)),7),s.$slots.suffix||s.suffix?(W(),ve("div",{key:1,class:j(w(i).e("suffix"))},[Qe(s.$slots,"suffix",{},()=>[be("span",null,Tt(s.suffix),1)])],2)):et("v-if",!0)],2)],2))}});var nEe=It(tEe,[["__file","statistic.vue"]]);const RJ=xn(nEe),iEe=Et({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Ke([Number,Object]),default:0},valueStyle:{type:Ke([String,Object,Array])}}),rEe={finish:()=>!0,[zi]:n=>Jt(n)},sEe=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],JU=n=>Jt(n)?new Date(n).getTime():n.valueOf(),ez=(n,e)=>{let t=n;const i=/\[([^\]]*)]/g;return sEe.reduce((s,[a,o])=>{const l=new RegExp(`${a}+(?![^\\[\\]]*\\])`,"g");if(l.test(s)){const c=Math.floor(t/o);return t-=c*o,s.replace(l,u=>String(c).padStart(u.length,"0"))}return s},e).replace(i,"$1")},aEe=Ie({name:"ElCountdown"}),oEe=Ie({...aEe,props:iEe,emits:rEe,setup(n,{expose:e,emit:t}){const i=n;let r;const s=ae(0),a=V(()=>ez(s.value,i.format)),o=u=>ez(u,i.format),l=()=>{r&&(om(r),r=void 0)},c=()=>{const u=JU(i.value),d=()=>{let f=u-Date.now();t("change",f),f<=0?(f=0,l(),t("finish")):r=tp(d),s.value=f};r=tp(d)};return Mn(()=>{s.value=JU(i.value)-Date.now(),pt(()=>[i.value,i.format],()=>{l(),c()},{immediate:!0})}),Fi(()=>{l()}),e({displayValue:a}),(u,d)=>(W(),rt(w(RJ),{value:s.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:o},Il({_:2},[Jn(u.$slots,(f,h)=>({name:h,fn:Re(()=>[Qe(u.$slots,h)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var lEe=It(oEe,[["__file","countdown.vue"]]);const cEe=xn(lEe),uEe=Et({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),dEe={[zi]:(n,e)=>[n,e].every(Jt)},fEe=Ie({name:"ElSteps"}),hEe=Ie({...fEe,props:uEe,emits:dEe,setup(n,{emit:e}){const t=n,i=St("steps"),{children:r,addChild:s,removeChild:a}=mk(Nn(),"ElStep");return pt(r,()=>{r.value.forEach((o,l)=>{o.setIndex(l)})}),Qn("ElSteps",{props:t,steps:r,addStep:s,removeStep:a}),pt(()=>t.active,(o,l)=>{e(zi,o,l)}),(o,l)=>(W(),ve("div",{class:j([w(i).b(),w(i).m(o.simple?"simple":o.direction)])},[Qe(o.$slots,"default")],2))}});var pEe=It(hEe,[["__file","steps.vue"]]);const mEe=Et({title:{type:String,default:""},icon:{type:Hi},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),vEe=Ie({name:"ElStep"}),gEe=Ie({...vEe,props:mEe,setup(n){const e=n,t=St("step"),i=ae(-1),r=ae({}),s=ae(""),a=Nt("ElSteps"),o=Nn();Mn(()=>{pt([()=>a.props.active,()=>a.props.processStatus,()=>a.props.finishStatus],([S])=>{b(S)},{immediate:!0})}),Fi(()=>{a.removeStep(A.uid)});const l=V(()=>e.status||s.value),c=V(()=>{const S=a.steps.value[i.value-1];return S?S.currentStatus:"wait"}),u=V(()=>a.props.alignCenter),d=V(()=>a.props.direction==="vertical"),f=V(()=>a.props.simple),h=V(()=>a.steps.value.length),p=V(()=>{var S;return((S=a.steps.value[h.value-1])==null?void 0:S.uid)===(o==null?void 0:o.uid)}),m=V(()=>f.value?"":a.props.space),v=V(()=>[t.b(),t.is(f.value?"simple":a.props.direction),t.is("flex",p.value&&!m.value&&!u.value),t.is("center",u.value&&!d.value&&!f.value)]),g=V(()=>{const S={flexBasis:Jt(m.value)?`${m.value}px`:m.value?m.value:`${100/(h.value-(u.value?0:1))}%`};return d.value||p.value&&(S.maxWidth=`${100/h.value}%`),S}),y=S=>{i.value=S},x=S=>{const C=S==="wait",_={transitionDelay:`${C?"-":""}${150*i.value}ms`},M=S===a.props.processStatus||C?0:100;_.borderWidth=M&&!f.value?"1px":0,_[a.props.direction==="vertical"?"height":"width"]=`${M}%`,r.value=_},b=S=>{S>i.value?s.value=a.props.finishStatus:S===i.value&&c.value!=="error"?s.value=a.props.processStatus:s.value="wait";const C=a.steps.value[i.value-1];C&&C.calcProgress(s.value)},A=Si({uid:o.uid,currentStatus:l,setIndex:y,calcProgress:x});return a.addStep(A),(S,C)=>(W(),ve("div",{style:jt(w(g)),class:j(w(v))},[et(" icon & line "),be("div",{class:j([w(t).e("head"),w(t).is(w(l))])},[w(f)?et("v-if",!0):(W(),ve("div",{key:0,class:j(w(t).e("line"))},[be("i",{class:j(w(t).e("line-inner")),style:jt(r.value)},null,6)],2)),be("div",{class:j([w(t).e("icon"),w(t).is(S.icon||S.$slots.icon?"icon":"text")])},[Qe(S.$slots,"icon",{},()=>[S.icon?(W(),rt(w(Ut),{key:0,class:j(w(t).e("icon-inner"))},{default:Re(()=>[(W(),rt(On(S.icon)))]),_:1},8,["class"])):w(l)==="success"?(W(),rt(w(Ut),{key:1,class:j([w(t).e("icon-inner"),w(t).is("status")])},{default:Re(()=>[_e(w(gA))]),_:1},8,["class"])):w(l)==="error"?(W(),rt(w(Ut),{key:2,class:j([w(t).e("icon-inner"),w(t).is("status")])},{default:Re(()=>[_e(w(nu))]),_:1},8,["class"])):w(f)?et("v-if",!0):(W(),ve("div",{key:3,class:j(w(t).e("icon-inner"))},Tt(i.value+1),3))])],2)],2),et(" title & description "),be("div",{class:j(w(t).e("main"))},[be("div",{class:j([w(t).e("title"),w(t).is(w(l))])},[Qe(S.$slots,"title",{},()=>[Hn(Tt(S.title),1)])],2),w(f)?(W(),ve("div",{key:0,class:j(w(t).e("arrow"))},null,2)):(W(),ve("div",{key:1,class:j([w(t).e("description"),w(t).is(w(l))])},[Qe(S.$slots,"description",{},()=>[Hn(Tt(S.description),1)])],2))],2)],6))}});var PJ=It(gEe,[["__file","item.vue"]]);const yEe=xn(pEe,{Step:PJ}),bEe=Or(PJ),LJ=n=>["",...rd].includes(n),xEe=Et({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:LJ},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:Hi},activeActionIcon:{type:Hi},activeIcon:{type:Hi},inactiveIcon:{type:Hi},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Ke(Function)},id:String,tabindex:{type:[String,Number]},...ga(["ariaLabel"])}),AEe={[Tn]:n=>ji(n)||qt(n)||Jt(n),[zi]:n=>ji(n)||qt(n)||Jt(n),[Ea]:n=>ji(n)||qt(n)||Jt(n)},kJ="ElSwitch",wEe=Ie({name:kJ}),SEe=Ie({...wEe,props:xEe,emits:AEe,setup(n,{expose:e,emit:t}){const i=n,{formItem:r}=La(),s=gs(),a=St("switch"),{inputId:o}=bc(i,{formItemContext:r}),l=ka(V(()=>i.loading)),c=ae(i.modelValue!==!1),u=ae(),d=ae(),f=V(()=>[a.b(),a.m(s.value),a.is("disabled",l.value),a.is("checked",g.value)]),h=V(()=>[a.e("label"),a.em("label","left"),a.is("active",!g.value)]),p=V(()=>[a.e("label"),a.em("label","right"),a.is("active",g.value)]),m=V(()=>({width:Hr(i.width)}));pt(()=>i.modelValue,()=>{c.value=!0});const v=V(()=>c.value?i.modelValue:!1),g=V(()=>v.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(v.value)||(t(Tn,i.inactiveValue),t(zi,i.inactiveValue),t(Ea,i.inactiveValue)),pt(g,A=>{var S;u.value.checked=A,i.validateEvent&&((S=r==null?void 0:r.validate)==null||S.call(r,"change").catch(C=>void 0))});const y=()=>{const A=g.value?i.inactiveValue:i.activeValue;t(Tn,A),t(zi,A),t(Ea,A),Yt(()=>{u.value.checked=g.value})},x=()=>{if(l.value)return;const{beforeChange:A}=i;if(!A){y();return}const S=A();[Kb(S),ji(S)].includes(!0)||Rs(kJ,"beforeChange must return type `Promise<boolean>` or `boolean`"),Kb(S)?S.then(_=>{_&&y()}).catch(_=>{}):S&&y()},b=()=>{var A,S;(S=(A=u.value)==null?void 0:A.focus)==null||S.call(A)};return Mn(()=>{u.value.checked=g.value}),e({focus:b,checked:g}),(A,S)=>(W(),ve("div",{class:j(w(f)),onClick:ln(x,["prevent"])},[be("input",{id:w(o),ref_key:"input",ref:u,class:j(w(a).e("input")),type:"checkbox",role:"switch","aria-checked":w(g),"aria-disabled":w(l),"aria-label":A.ariaLabel,name:A.name,"true-value":A.activeValue,"false-value":A.inactiveValue,disabled:w(l),tabindex:A.tabindex,onChange:y,onKeydown:Xi(x,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!A.inlinePrompt&&(A.inactiveIcon||A.inactiveText)?(W(),ve("span",{key:0,class:j(w(h))},[A.inactiveIcon?(W(),rt(w(Ut),{key:0},{default:Re(()=>[(W(),rt(On(A.inactiveIcon)))]),_:1})):et("v-if",!0),!A.inactiveIcon&&A.inactiveText?(W(),ve("span",{key:1,"aria-hidden":w(g)},Tt(A.inactiveText),9,["aria-hidden"])):et("v-if",!0)],2)):et("v-if",!0),be("span",{ref_key:"core",ref:d,class:j(w(a).e("core")),style:jt(w(m))},[A.inlinePrompt?(W(),ve("div",{key:0,class:j(w(a).e("inner"))},[A.activeIcon||A.inactiveIcon?(W(),rt(w(Ut),{key:0,class:j(w(a).is("icon"))},{default:Re(()=>[(W(),rt(On(w(g)?A.activeIcon:A.inactiveIcon)))]),_:1},8,["class"])):A.activeText||A.inactiveText?(W(),ve("span",{key:1,class:j(w(a).is("text")),"aria-hidden":!w(g)},Tt(w(g)?A.activeText:A.inactiveText),11,["aria-hidden"])):et("v-if",!0)],2)):et("v-if",!0),be("div",{class:j(w(a).e("action"))},[A.loading?(W(),rt(w(Ut),{key:0,class:j(w(a).is("loading"))},{default:Re(()=>[_e(w(ju))]),_:1},8,["class"])):w(g)?Qe(A.$slots,"active-action",{key:1},()=>[A.activeActionIcon?(W(),rt(w(Ut),{key:0},{default:Re(()=>[(W(),rt(On(A.activeActionIcon)))]),_:1})):et("v-if",!0)]):w(g)?et("v-if",!0):Qe(A.$slots,"inactive-action",{key:2},()=>[A.inactiveActionIcon?(W(),rt(w(Ut),{key:0},{default:Re(()=>[(W(),rt(On(A.inactiveActionIcon)))]),_:1})):et("v-if",!0)])],2)],6),!A.inlinePrompt&&(A.activeIcon||A.activeText)?(W(),ve("span",{key:1,class:j(w(p))},[A.activeIcon?(W(),rt(w(Ut),{key:0},{default:Re(()=>[(W(),rt(On(A.activeIcon)))]),_:1})):et("v-if",!0),!A.activeIcon&&A.activeText?(W(),ve("span",{key:1,"aria-hidden":!w(g)},Tt(A.activeText),9,["aria-hidden"])):et("v-if",!0)],2)):et("v-if",!0)],10,["onClick"]))}});var _Ee=It(SEe,[["__file","switch.vue"]]);const CEe=xn(_Ee),B5=function(n){var e;return(e=n.target)==null?void 0:e.closest("td")},MEe=function(n,e,t,i,r){if(!e&&!i&&(!r||Mt(r)&&!r.length))return n;qt(t)?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const s=i?null:function(o,l){return r?(Mt(r)||(r=[r]),r.map(c=>qt(c)?fs(o,c):c(o,l,n))):(e!=="$key"&&Rn(o)&&"$value"in o&&(o=o.$value),[Rn(o)?fs(o,e):o])},a=function(o,l){if(i)return i(o.value,l.value);for(let c=0,u=o.key.length;c<u;c++){if(o.key[c]<l.key[c])return-1;if(o.key[c]>l.key[c])return 1}return 0};return n.map((o,l)=>({value:o,index:l,key:s?s(o,l):null})).sort((o,l)=>{let c=a(o,l);return c||(c=o.index-l.index),c*+t}).map(o=>o.value)},FJ=function(n,e){let t=null;return n.columns.forEach(i=>{i.id===e&&(t=i)}),t},TEe=function(n,e){let t=null;for(let i=0;i<n.columns.length;i++){const r=n.columns[i];if(r.columnKey===e){t=r;break}}return t||Rs("ElTable",`No column matching with column-key: ${e}`),t},tz=function(n,e,t){const i=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return i?FJ(n,i[0]):null},ja=(n,e)=>{if(!n)throw new Error("Row is required when get row identity");if(qt(e)){if(!e.includes("."))return`${n[e]}`;const t=e.split(".");let i=n;for(const r of t)i=i[r];return`${i}`}else if(Xt(e))return e.call(null,n)},fb=function(n,e){const t={};return(n||[]).forEach((i,r)=>{t[ja(i,e)]={row:i,index:r}}),t};function EEe(n,e){const t={};let i;for(i in n)t[i]=n[i];for(i in e)if(vi(e,i)){const r=e[i];bi(r)||(t[i]=r)}return t}function Vk(n){return n===""||bi(n)||(n=Number.parseInt(n,10),Number.isNaN(n)&&(n="")),n}function BJ(n){return n===""||bi(n)||(n=Vk(n),Number.isNaN(n)&&(n=80)),n}function IEe(n){return Jt(n)?n:qt(n)?/^\d+(?:px)?$/.test(n)?Number.parseInt(n,10):n:null}function DEe(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function EC(n,e,t,i,r,s){let a=s??0,o=!1;const l=n.indexOf(e),c=l!==-1,u=r==null?void 0:r.call(null,e,a),d=h=>{h==="add"?n.push(e):n.splice(l,1),o=!0},f=h=>{let p=0;const m=(i==null?void 0:i.children)&&h[i.children];return m&&Mt(m)&&(p+=m.length,m.forEach(v=>{p+=f(v)})),p};return(!r||u)&&(ji(t)?t&&!c?d("add"):!t&&c&&d("remove"):d(c?"remove":"add")),!(i!=null&&i.checkStrictly)&&(i!=null&&i.children)&&Mt(e[i.children])&&e[i.children].forEach(h=>{const p=EC(n,h,t??!c,i,r,a+1);a+=f(h)+1,p&&(o=p)}),o}function REe(n,e,t="children",i="hasChildren"){const r=a=>!(Mt(a)&&a.length);function s(a,o,l){e(a,o,l),o.forEach(c=>{if(c[i]){e(c,null,l+1);return}const u=c[t];r(u)||s(c,u,l+1)})}n.forEach(a=>{if(a[i]){e(a,null,0);return}const o=a[t];r(o)||s(a,o,0)})}const PEe=(n,e,t,i)=>{const r={strategy:"fixed",...n.popperOptions},s=Xt(i.tooltipFormatter)?i.tooltipFormatter({row:t,column:i,cellValue:ob(t,i.property).value}):void 0;return mr(s)?{slotContent:s,content:null,...n,popperOptions:r}:{slotContent:null,content:s??e,...n,popperOptions:r}};let No=null;function LEe(n,e,t,i,r,s){const a=PEe(n,e,t,i),o={...a,slotContent:void 0};if((No==null?void 0:No.trigger)===r){const h=No.vm.component;Z$(h.props,o),a.slotContent&&(h.slots.content=()=>[a.slotContent]);return}No==null||No();const l=s==null?void 0:s.refs.tableWrapper,c=l==null?void 0:l.dataset.prefix,u=_e(Da,{virtualTriggering:!0,virtualRef:r,appendTo:l,placement:"top",transition:"none",offset:0,hideAfter:0,...o},a.slotContent?{content:()=>a.slotContent}:void 0);u.appContext={...s.appContext,...s};const d=document.createElement("div");Jh(u,d),u.component.exposed.onOpen();const f=l==null?void 0:l.querySelector(`.${c}-scrollbar__wrap`);No=()=>{Jh(null,d),f==null||f.removeEventListener("scroll",No),No=null},No.trigger=r,No.vm=u,f==null||f.addEventListener("scroll",No)}function NJ(n){return n.children?Mme(n.children,NJ):[n]}function nz(n,e){return n+e.colSpan}const OJ=(n,e,t,i)=>{let r=0,s=n;const a=t.states.columns.value;if(i){const l=NJ(i[n]);r=a.slice(0,a.indexOf(l[0])).reduce(nz,0),s=r+l.reduce(nz,0)-1}else r=n;let o;switch(e){case"left":s<t.states.fixedLeafColumnsLength.value&&(o="left");break;case"right":r>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right");break;default:s<t.states.fixedLeafColumnsLength.value?o="left":r>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right")}return o?{direction:o,start:r,after:s}:{}},Hk=(n,e,t,i,r,s=0)=>{const a=[],{direction:o,start:l,after:c}=OJ(e,t,i,r);if(o){const u=o==="left";a.push(`${n}-fixed-column--${o}`),u&&c+s===i.states.fixedLeafColumnsLength.value-1?a.push("is-last-column"):!u&&l-s===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&a.push("is-first-column")}return a};function iz(n,e){return n+(mA(e.realWidth)||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const Gk=(n,e,t,i)=>{const{direction:r,start:s=0,after:a=0}=OJ(n,e,t,i);if(!r)return;const o={},l=r==="left",c=t.states.columns.value;return l?o.left=c.slice(0,s).reduce(iz,0):o.right=c.slice(a+1).reverse().reduce(iz,0),o},_1=(n,e)=>{n&&(Number.isNaN(n[e])||(n[e]=`${n[e]}px`))};function kEe(n){const e=Nn(),t=ae(!1),i=ae([]);return{updateExpandRows:()=>{const l=n.data.value||[],c=n.rowKey.value;if(t.value)i.value=l.slice();else if(c){const u=fb(i.value,c);i.value=l.reduce((d,f)=>{const h=ja(f,c);return u[h]&&d.push(f),d},[])}else i.value=[]},toggleRowExpansion:(l,c)=>{EC(i.value,l,c)&&e.emit("expand-change",l,i.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const c=n.data.value||[],u=n.rowKey.value,d=fb(c,u);i.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const c=n.rowKey.value;return c?!!fb(i.value,c)[ja(l,c)]:i.value.includes(l)},states:{expandRows:i,defaultExpandAll:t}}}function FEe(n){const e=Nn(),t=ae(null),i=ae(null),r=c=>{e.store.assertRowKey(),t.value=c,a(c)},s=()=>{t.value=null},a=c=>{const{data:u,rowKey:d}=n;let f=null;d.value&&(f=(w(u)||[]).find(h=>ja(h,d.value)===c)),i.value=f,e.emit("current-change",i.value,null)};return{setCurrentRowKey:r,restoreCurrentRowKey:s,setCurrentRowByKey:a,updateCurrentRow:c=>{const u=i.value;if(c&&c!==u){i.value=c,e.emit("current-change",i.value,u);return}!c&&u&&(i.value=null,e.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=n.rowKey.value,u=n.data.value||[],d=i.value;if(!u.includes(d)&&d){if(c){const f=ja(d,c);a(f)}else i.value=null;mA(i.value)&&e.emit("current-change",null,d)}else t.value&&(a(t.value),s())},states:{_currentRowKey:t,currentRow:i}}}function BEe(n){const e=ae([]),t=ae({}),i=ae(16),r=ae(!1),s=ae({}),a=ae("hasChildren"),o=ae("children"),l=ae(!1),c=Nn(),u=V(()=>{if(!n.rowKey.value)return{};const b=n.data.value||[];return f(b)}),d=V(()=>{const b=n.rowKey.value,A=Object.keys(s.value),S={};return A.length&&A.forEach(C=>{if(s.value[C].length){const _={children:[]};s.value[C].forEach(M=>{const T=ja(M,b);_.children.push(T),M[a.value]&&!S[T]&&(S[T]={children:[]})}),S[C]=_}}),S}),f=b=>{const A=n.rowKey.value,S={};return REe(b,(C,_,M)=>{const T=ja(C,A);Mt(_)?S[T]={children:_.map(E=>ja(E,A)),level:M}:r.value&&(S[T]={children:[],lazy:!0,level:M})},o.value,a.value),S},h=(b=!1,A=(S=>(S=c.store)==null?void 0:S.states.defaultExpandAll.value)())=>{var S;const C=u.value,_=d.value,M=Object.keys(C),T={};if(M.length){const E=w(t),I=[],L=(B,P)=>{if(b)return e.value?A||e.value.includes(P):!!(A||B!=null&&B.expanded);{const z=A||e.value&&e.value.includes(P);return!!(B!=null&&B.expanded||z)}};M.forEach(B=>{const P=E[B],z={...C[B]};if(z.expanded=L(P,B),z.lazy){const{loaded:O=!1,loading:N=!1}=P||{};z.loaded=!!O,z.loading=!!N,I.push(B)}T[B]=z});const F=Object.keys(_);r.value&&F.length&&I.length&&F.forEach(B=>{const P=E[B],z=_[B].children;if(I.includes(B)){if(T[B].children.length!==0)throw new Error("[ElTable]children must be an empty array.");T[B].children=z}else{const{loaded:O=!1,loading:N=!1}=P||{};T[B]={lazy:!0,loaded:!!O,loading:!!N,expanded:L(P,B),children:z,level:""}}})}t.value=T,(S=c.store)==null||S.updateTableScrollY()};pt(()=>e.value,()=>{h(!0)}),pt(()=>u.value,()=>{h()}),pt(()=>d.value,()=>{h()});const p=b=>{e.value=b,h()},m=b=>r.value&&b&&"loaded"in b&&!b.loaded,v=(b,A)=>{c.store.assertRowKey();const S=n.rowKey.value,C=ja(b,S),_=C&&t.value[C];if(C&&_&&"expanded"in _){const M=_.expanded;A=bi(A)?!_.expanded:A,t.value[C].expanded=A,M!==A&&c.emit("expand-change",b,A),m(_)&&y(b,C,_),c.store.updateTableScrollY()}},g=b=>{c.store.assertRowKey();const A=n.rowKey.value,S=ja(b,A),C=t.value[S];m(C)?y(b,S,C):v(b,void 0)},y=(b,A,S)=>{const{load:C}=c.props;C&&!t.value[A].loaded&&(t.value[A].loading=!0,C(b,S,_=>{if(!Mt(_))throw new TypeError("[ElTable] data must be an array");t.value[A].loading=!1,t.value[A].loaded=!0,t.value[A].expanded=!0,_.length&&(s.value[A]=_),c.emit("expand-change",b,!0)}))};return{loadData:y,loadOrToggle:g,toggleTreeExpansion:v,updateTreeExpandKeys:p,updateTreeData:h,updateKeyChildren:(b,A)=>{const{lazy:S,rowKey:C}=c.props;if(S){if(!C)throw new Error("[Table] rowKey is required in updateKeyChild");s.value[b]&&(s.value[b]=A)}},normalize:f,states:{expandRowKeys:e,treeData:t,indent:i,lazy:r,lazyTreeNodeMap:s,lazyColumnIdentifier:a,childrenColumnName:o,checkStrictly:l}}}const NEe=(n,e)=>{const t=e.sortingColumn;return!t||qt(t.sortable)?n:MEe(n,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},s_=n=>{const e=[];return n.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,s_(t.children)):e.push(t)}),e};function OEe(){var n;const e=Nn(),{size:t}=Vs((n=e.proxy)==null?void 0:n.$props),i=ae(null),r=ae([]),s=ae([]),a=ae(!1),o=ae([]),l=ae([]),c=ae([]),u=ae([]),d=ae([]),f=ae([]),h=ae([]),p=ae([]),m=[],v=ae(0),g=ae(0),y=ae(0),x=ae(!1),b=ae([]),A=ae(!1),S=ae(!1),C=ae(null),_=ae({}),M=ae(null),T=ae(null),E=ae(null),I=ae(null),L=ae(null),F=V(()=>i.value?fb(b.value,i.value):void 0);pt(r,()=>{var $;e.state&&(O(!1),e.props.tableLayout==="auto"&&(($=e.refs.tableHeaderRef)==null||$.updateFixedColumnStyle()))},{deep:!0});const B=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},P=$=>{var le;(le=$.children)==null||le.forEach(fe=>{fe.fixed=$.fixed,P(fe)})},z=()=>{var $,le;o.value.forEach(we=>{P(we)}),u.value=o.value.filter(we=>we.type!=="selection"&&[!0,"left"].includes(we.fixed));let fe;if(((le=($=o.value)==null?void 0:$[0])==null?void 0:le.type)==="selection"){const we=o.value[0];fe=[!0,"left"].includes(we.fixed)||u.value.length&&we.fixed!=="right",fe&&u.value.unshift(we)}d.value=o.value.filter(we=>we.fixed==="right");const Me=o.value.filter(we=>(fe?we.type!=="selection":!0)&&!we.fixed);l.value=[].concat(u.value).concat(Me).concat(d.value);const me=s_(Me),Ae=s_(u.value),dt=s_(d.value);v.value=me.length,g.value=Ae.length,y.value=dt.length,c.value=[].concat(Ae).concat(me).concat(dt),a.value=u.value.length>0||d.value.length>0},O=($,le=!1)=>{$&&z(),le?e.state.doLayout():e.state.debouncedUpdateLayout()},N=$=>F.value?!!F.value[ja($,i.value)]:b.value.includes($),H=()=>{x.value=!1;const $=b.value;b.value=[],$.length&&e.emit("selection-change",[])},q=()=>{let $;if(i.value){$=[];const le=fb(r.value,i.value);for(const fe in F.value)vi(F.value,fe)&&!le[fe]&&$.push(F.value[fe].row)}else $=b.value.filter(le=>!r.value.includes(le));if($.length){const le=b.value.filter(fe=>!$.includes(fe));b.value=le,e.emit("selection-change",le.slice())}},te=()=>(b.value||[]).slice(),Q=($,le,fe=!0,Me=!1)=>{var me,Ae,dt,we;const _t={children:(Ae=(me=e==null?void 0:e.store)==null?void 0:me.states)==null?void 0:Ae.childrenColumnName.value,checkStrictly:(we=(dt=e==null?void 0:e.store)==null?void 0:dt.states)==null?void 0:we.checkStrictly.value};if(EC(b.value,$,le,_t,Me?void 0:C.value,r.value.indexOf($))){const wt=(b.value||[]).slice();fe&&e.emit("select",wt,$),e.emit("selection-change",wt)}},ee=()=>{var $,le;const fe=S.value?!x.value:!(x.value||b.value.length);x.value=fe;let Me=!1,me=0;const Ae=(le=($=e==null?void 0:e.store)==null?void 0:$.states)==null?void 0:le.rowKey.value,{childrenColumnName:dt}=e.store.states,we={children:dt.value,checkStrictly:!1};r.value.forEach((_t,it)=>{const wt=it+me;EC(b.value,_t,fe,we,C.value,wt)&&(Me=!0),me+=ue(ja(_t,Ae))}),Me&&e.emit("selection-change",b.value?b.value.slice():[]),e.emit("select-all",(b.value||[]).slice())},de=()=>{r.value.forEach($=>{const le=ja($,i.value),fe=F.value[le];fe&&(b.value[fe.index]=$)})},J=()=>{var $;if((($=r.value)==null?void 0:$.length)===0){x.value=!1;return}const{childrenColumnName:le}=e.store.states;let fe=0,Me=0;const me=dt=>{var we;for(const _t of dt){const it=C.value&&C.value.call(null,_t,fe);if(N(_t))Me++;else if(!C.value||it)return!1;if(fe++,(we=_t[le.value])!=null&&we.length&&!me(_t[le.value]))return!1}return!0},Ae=me(r.value||[]);x.value=Me===0?!1:Ae},ue=$=>{var le;if(!e||!e.store)return 0;const{treeData:fe}=e.store.states;let Me=0;const me=(le=fe.value[$])==null?void 0:le.children;return me&&(Me+=me.length,me.forEach(Ae=>{Me+=ue(Ae)})),Me},Te=($,le)=>{Mt($)||($=[$]);const fe={};return $.forEach(Me=>{_.value[Me.id]=le,fe[Me.columnKey||Me.id]=le}),fe},De=($,le,fe)=>{T.value&&T.value!==$&&(T.value.order=null),T.value=$,E.value=le,I.value=fe},Le=()=>{let $=w(s);Object.keys(_.value).forEach(le=>{const fe=_.value[le];if(!fe||fe.length===0)return;const Me=FJ({columns:c.value},le);Me&&Me.filterMethod&&($=$.filter(me=>fe.some(Ae=>Me.filterMethod.call(null,Ae,me,Me))))}),M.value=$},Ne=()=>{r.value=NEe(M.value,{sortingColumn:T.value,sortProp:E.value,sortOrder:I.value})},Y=($=void 0)=>{$&&$.filter||Le(),Ne()},oe=$=>{const{tableHeaderRef:le}=e.refs;if(!le)return;const fe=Object.assign({},le.filterPanels),Me=Object.keys(fe);if(Me.length)if(qt($)&&($=[$]),Mt($)){const me=$.map(Ae=>TEe({columns:c.value},Ae));Me.forEach(Ae=>{const dt=me.find(we=>we.id===Ae);dt&&(dt.filteredValue=[])}),e.store.commit("filterChange",{column:me,values:[],silent:!0,multi:!0})}else Me.forEach(me=>{const Ae=c.value.find(dt=>dt.id===me);Ae&&(Ae.filteredValue=[])}),_.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},ne=()=>{T.value&&(De(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Xe,toggleRowExpansion:ke,updateExpandRows:Ge,states:He,isRowExpanded:qe}=kEe({data:r,rowKey:i}),{updateTreeExpandKeys:tt,toggleTreeExpansion:pe,updateTreeData:G,updateKeyChildren:Z,loadOrToggle:ge,states:Oe}=BEe({data:r,rowKey:i}),{updateCurrentRowData:je,updateCurrentRow:bt,setCurrentRowKey:At,states:Ee}=FEe({data:r,rowKey:i});return{assertRowKey:B,updateColumns:z,scheduleLayout:O,isSelected:N,clearSelection:H,cleanSelection:q,getSelectionRows:te,toggleRowSelection:Q,_toggleAllSelection:ee,toggleAllSelection:null,updateSelectionByRowKey:de,updateAllSelected:J,updateFilters:Te,updateCurrentRow:bt,updateSort:De,execFilter:Le,execSort:Ne,execQuery:Y,clearFilter:oe,clearSort:ne,toggleRowExpansion:ke,setExpandRowKeysAdapter:$=>{Xe($),tt($)},setCurrentRowKey:At,toggleRowExpansionAdapter:($,le)=>{c.value.some(({type:Me})=>Me==="expand")?ke($,le):pe($,le)},isRowExpanded:qe,updateExpandRows:Ge,updateCurrentRowData:je,loadOrToggle:ge,updateTreeData:G,updateKeyChildren:Z,states:{tableSize:t,rowKey:i,data:r,_data:s,isComplex:a,_columns:o,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,updateOrderFns:m,leafColumnsLength:v,fixedLeafColumnsLength:g,rightFixedLeafColumnsLength:y,isAllSelected:x,selection:b,reserveSelection:A,selectOnIndeterminate:S,selectable:C,filters:_,filteredData:M,sortingColumn:T,sortProp:E,sortOrder:I,hoverRow:L,...He,...Oe,...Ee}}}function i8(n,e){return n.map(t=>{var i;return t.id===e.id?e:((i=t.children)!=null&&i.length&&(t.children=i8(t.children,e)),t)})}function r8(n){n.forEach(e=>{var t,i;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(i=e.children)!=null&&i.length&&r8(e.children)}),n.sort((e,t)=>e.no-t.no)}function UEe(){const n=Nn(),e=OEe();return{ns:St("table"),...e,mutations:{setData(a,o){const l=w(a._data)!==o;a.data.value=o,a._data.value=o,n.store.execQuery(),n.store.updateCurrentRowData(),n.store.updateExpandRows(),n.store.updateTreeData(n.store.states.defaultExpandAll.value),w(a.reserveSelection)?(n.store.assertRowKey(),n.store.updateSelectionByRowKey()):l?n.store.clearSelection():n.store.cleanSelection(),n.store.updateAllSelected(),n.$ready&&n.store.scheduleLayout()},insertColumn(a,o,l,c){const u=w(a._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(o),d=i8(u,l)):(u.push(o),d=u),r8(d),a._columns.value=d,a.updateOrderFns.push(c),o.type==="selection"&&(a.selectable.value=o.selectable,a.reserveSelection.value=o.reserveSelection),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},updateColumnOrder(a,o){var l;((l=o.getColumnIndex)==null?void 0:l.call(o))!==o.no&&(r8(a._columns.value),n.$ready&&n.store.updateColumns())},removeColumn(a,o,l,c){const u=w(a._columns)||[];if(l)l.children.splice(l.children.findIndex(f=>f.id===o.id),1),Yt(()=>{var f;((f=l.children)==null?void 0:f.length)===0&&delete l.children}),a._columns.value=i8(u,l);else{const f=u.indexOf(o);f>-1&&(u.splice(f,1),a._columns.value=u)}const d=a.updateOrderFns.indexOf(c);d>-1&&a.updateOrderFns.splice(d,1),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},sort(a,o){const{prop:l,order:c,init:u}=o;if(l){const d=w(a.columns).find(f=>f.property===l);d&&(d.order=c,n.store.updateSort(d,l,c),n.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(a,o){const{sortingColumn:l,sortProp:c,sortOrder:u}=a,d=w(l),f=w(c),h=w(u);mA(h)&&(a.sortingColumn.value=null,a.sortProp.value=null);const p={filter:!0};n.store.execQuery(p),(!o||!(o.silent||o.init))&&n.emit("sort-change",{column:d,prop:f,order:h}),n.store.updateTableScrollY()},filterChange(a,o){const{column:l,values:c,silent:u}=o,d=n.store.updateFilters(l,c);n.store.execQuery(),u||n.emit("filter-change",d),n.store.updateTableScrollY()},toggleAllSelection(){n.store.toggleAllSelection()},rowSelectedChanged(a,o){n.store.toggleRowSelection(o),n.store.updateAllSelected()},setHoverRow(a,o){a.hoverRow.value=o},setCurrentRow(a,o){n.store.updateCurrentRow(o)}},commit:function(a,...o){const l=n.store.mutations;if(l[a])l[a].apply(n,[n.store.states].concat(o));else throw new Error(`Action not found: ${a}`)},updateTableScrollY:function(){Yt(()=>n.layout.updateScrollY.apply(n.layout))}}}const hb={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function zEe(n,e){if(!n)throw new Error("Table is required.");const t=UEe();return t.toggleAllSelection=Jo(t._toggleAllSelection,10),Object.keys(hb).forEach(i=>{UJ(zJ(e,i),i,t)}),VEe(t,e),t}function VEe(n,e){Object.keys(hb).forEach(t=>{pt(()=>zJ(e,t),i=>{UJ(i,t,n)})})}function UJ(n,e,t){let i=n,r=hb[e];Rn(hb[e])&&(r=r.key,i=i||hb[e].default),t.states[r].value=i}function zJ(n,e){if(e.includes(".")){const t=e.split(".");let i=n;return t.forEach(r=>{i=i[r]}),i}else return n[e]}class HEe{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ae(null),this.scrollX=ae(!1),this.scrollY=ae(!1),this.bodyWidth=ae(null),this.fixedWidth=ae(null),this.rightFixedWidth=ae(null),this.gutterWidth=0;for(const t in e)vi(e,t)&&(ir(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){const e=this.height.value;if(mA(e))return!1;const t=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(t!=null&&t.wrapRef)){let i=!0;const r=this.scrollY.value;return i=t.wrapRef.scrollHeight>t.wrapRef.clientHeight,this.scrollY.value=i,r!==i}return!1}setHeight(e,t="height"){if(!li)return;const i=this.table.vnode.el;if(e=IEe(e),this.height.value=Number(e),!i&&(e||e===0))return Yt(()=>this.setHeight(e,t));Jt(e)?(i.style[t]=`${e}px`,this.updateElsHeight()):qt(e)&&(i.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(i=>{i.isColumnGroup?e.push.apply(e,i.columns):e.push(i)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!li)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let i=0;const r=this.getFlattenColumns(),s=r.filter(l=>!Jt(l.width));if(r.forEach(l=>{Jt(l.width)&&l.realWidth&&(l.realWidth=null)}),s.length>0&&e){if(r.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=t){this.scrollX.value=!1;const l=t-i;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+l;else{const c=s.reduce((f,h)=>f+Number(h.minWidth||80),0),u=l/c;let d=0;s.forEach((f,h)=>{if(h===0)return;const p=Math.floor(Number(f.minWidth||80)*u);d+=p,f.realWidth=Number(f.minWidth||80)+p}),s[0].realWidth=Number(s[0].minWidth||80)+l-d}}else this.scrollX.value=!0,s.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else r.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>t,this.bodyWidth.value=i;const a=this.store.states.fixedColumns.value;if(a.length>0){let l=0;a.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const o=this.store.states.rightFixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(i=>{var r,s;switch(e){case"columns":(r=i.state)==null||r.onColumnsChange(this);break;case"scrollable":(s=i.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:GEe}=vc,WEe=Ie({name:"ElTableFilterPanel",components:{ElCheckbox:vc,ElCheckboxGroup:GEe,ElScrollbar:sd,ElTooltip:Da,ElIcon:Ut,ArrowDown:Ef,ArrowUp:YL},directives:{ClickOutside:pf},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(n){const e=Nn(),{t}=ci(),i=St("table-filter"),r=e==null?void 0:e.parent;r.filterPanels.value[n.column.id]||(r.filterPanels.value[n.column.id]=e);const s=ae(!1),a=ae(null),o=V(()=>n.column&&n.column.filters),l=V(()=>n.column.filterClassName?`${i.b()} ${n.column.filterClassName}`:i.b()),c=V({get:()=>{var A;return(((A=n.column)==null?void 0:A.filteredValue)||[])[0]},set:A=>{u.value&&($c(A)?u.value.splice(0,1):u.value.splice(0,1,A))}}),u=V({get(){return n.column?n.column.filteredValue||[]:[]},set(A){n.column&&n.upDataColumn("filteredValue",A)}}),d=V(()=>n.column?n.column.filterMultiple:!0),f=A=>A.value===c.value,h=()=>{s.value=!1},p=A=>{A.stopPropagation(),s.value=!s.value},m=()=>{s.value=!1},v=()=>{x(u.value),h()},g=()=>{u.value=[],x(u.value),h()},y=A=>{c.value=A,$c(A)?x([]):x(u.value),h()},x=A=>{n.store.commit("filterChange",{column:n.column,values:A}),n.store.updateAllSelected()};pt(s,A=>{n.column&&n.upDataColumn("filterOpened",A)},{immediate:!0});const b=V(()=>{var A,S;return(S=(A=a.value)==null?void 0:A.popperRef)==null?void 0:S.contentRef});return{tooltipVisible:s,multiple:d,filterClassName:l,filteredValue:u,filterValue:c,filters:o,handleConfirm:v,handleReset:g,handleSelect:y,isPropAbsent:$c,isActive:f,t,ns:i,showFilterPanel:p,hideFilterPanel:m,popperPaneRef:b,tooltip:a}}});function qEe(n,e,t,i,r,s){const a=an("el-checkbox"),o=an("el-checkbox-group"),l=an("el-scrollbar"),c=an("arrow-up"),u=an("arrow-down"),d=an("el-icon"),f=an("el-tooltip"),h=tM("click-outside");return W(),rt(f,{ref:"tooltip",visible:n.tooltipVisible,offset:0,placement:n.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":n.filterClassName,persistent:"","append-to":n.appendTo},{content:Re(()=>[n.multiple?(W(),ve("div",{key:0},[be("div",{class:j(n.ns.e("content"))},[_e(l,{"wrap-class":n.ns.e("wrap")},{default:Re(()=>[_e(o,{modelValue:n.filteredValue,"onUpdate:modelValue":p=>n.filteredValue=p,class:j(n.ns.e("checkbox-group"))},{default:Re(()=>[(W(!0),ve(Kt,null,Jn(n.filters,p=>(W(),rt(a,{key:p.value,value:p.value},{default:Re(()=>[Hn(Tt(p.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),be("div",{class:j(n.ns.e("bottom"))},[be("button",{class:j({[n.ns.is("disabled")]:n.filteredValue.length===0}),disabled:n.filteredValue.length===0,type:"button",onClick:n.handleConfirm},Tt(n.t("el.table.confirmFilter")),11,["disabled","onClick"]),be("button",{type:"button",onClick:n.handleReset},Tt(n.t("el.table.resetFilter")),9,["onClick"])],2)])):(W(),ve("ul",{key:1,class:j(n.ns.e("list"))},[be("li",{class:j([n.ns.e("list-item"),{[n.ns.is("active")]:n.isPropAbsent(n.filterValue)}]),onClick:p=>n.handleSelect(null)},Tt(n.t("el.table.clearFilter")),11,["onClick"]),(W(!0),ve(Kt,null,Jn(n.filters,p=>(W(),ve("li",{key:p.value,class:j([n.ns.e("list-item"),n.ns.is("active",n.isActive(p))]),label:p.value,onClick:m=>n.handleSelect(p.value)},Tt(p.text),11,["label","onClick"]))),128))],2))]),default:Re(()=>[Cn((W(),ve("span",{class:j([`${n.ns.namespace.value}-table__column-filter-trigger`,`${n.ns.namespace.value}-none-outline`]),onClick:n.showFilterPanel},[_e(d,null,{default:Re(()=>[Qe(n.$slots,"filter-icon",{},()=>[n.column.filterOpened?(W(),rt(c,{key:0})):(W(),rt(u,{key:1}))])]),_:3})],10,["onClick"])),[[h,n.hideFilterPanel,n.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var KEe=It(WEe,[["render",qEe],["__file","filter-panel.vue"]]);function Wk(n){const e=Nn();eM(()=>{t.value.addObserver(e)}),Mn(()=>{i(t.value),r(t.value)}),au(()=>{i(t.value),r(t.value)}),Ap(()=>{t.value.removeObserver(e)});const t=V(()=>{const s=n.layout;if(!s)throw new Error("Can not find table layout.");return s}),i=s=>{var a;const o=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col"))||[];if(!o.length)return;const l=s.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=o.length;u<d;u++){const f=o[u],h=f.getAttribute("name"),p=c[h];p&&f.setAttribute("width",p.realWidth||p.width)}},r=s=>{var a,o;const l=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const c=((o=n.vnode.el)==null?void 0:o.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const f=c[u];f.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",f.style.display=s.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:i,onScrollableChange:r}}const du=Symbol("ElTable");function YEe(n,e){const t=Nn(),i=Nt(du),r=m=>{m.stopPropagation()},s=(m,v)=>{!v.filters&&v.sortable?p(m,v,!1):v.filterable&&!v.sortable&&r(m),i==null||i.emit("header-click",v,m)},a=(m,v)=>{i==null||i.emit("header-contextmenu",v,m)},o=ae(null),l=ae(!1),c=ae({}),u=(m,v)=>{if(li&&!(v.children&&v.children.length>0)&&o.value&&n.border){l.value=!0;const g=i;e("set-drag-visible",!0);const x=(g==null?void 0:g.vnode.el).getBoundingClientRect().left,b=t.vnode.el.querySelector(`th.${v.id}`),A=b.getBoundingClientRect(),S=A.left-x+30;tc(b,"noclick"),c.value={startMouseLeft:m.clientX,startLeft:A.right-x,startColumnLeft:A.left-x,tableLeft:x};const C=g==null?void 0:g.refs.resizeProxy;C.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const _=T=>{const E=T.clientX-c.value.startMouseLeft,I=c.value.startLeft+E;C.style.left=`${Math.max(S,I)}px`},M=()=>{if(l.value){const{startColumnLeft:T,startLeft:E}=c.value,L=Number.parseInt(C.style.left,10)-T;v.width=v.realWidth=L,g==null||g.emit("header-dragend",v.width,E-T,v,m),requestAnimationFrame(()=>{n.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,o.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",M),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Za(b,"noclick")},0)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",M)}},d=(m,v)=>{var g;if(v.children&&v.children.length>0)return;const y=m.target;if(!bo(y))return;const x=y==null?void 0:y.closest("th");if(!(!v||!v.resizable||!x)&&!l.value&&n.border){const b=x.getBoundingClientRect(),A=document.body.style,S=((g=x.parentNode)==null?void 0:g.lastElementChild)===x,C=n.allowDragLastColumn||!S;b.width>12&&b.right-m.clientX<8&&C?(A.cursor="col-resize",qo(x,"is-sortable")&&(x.style.cursor="col-resize"),o.value=v):l.value||(A.cursor="",qo(x,"is-sortable")&&(x.style.cursor="pointer"),o.value=null)}},f=()=>{li&&(document.body.style.cursor="")},h=({order:m,sortOrders:v})=>{if(m==="")return v[0];const g=v.indexOf(m||null);return v[g>v.length-2?0:g+1]},p=(m,v,g)=>{var y;m.stopPropagation();const x=v.order===g?null:g||h(v),b=(y=m.target)==null?void 0:y.closest("th");if(b&&qo(b,"noclick")){Za(b,"noclick");return}if(!v.sortable)return;const A=m.currentTarget;if(["ascending","descending"].some(T=>qo(A,T)&&!v.sortOrders.includes(T)))return;const S=n.store.states;let C=S.sortProp.value,_;const M=S.sortingColumn.value;(M!==v||M===v&&mA(M.order))&&(M&&(M.order=null),S.sortingColumn.value=v,C=v.property),x?_=v.order=x:_=v.order=null,S.sortProp.value=C,S.sortOrder.value=_,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:a,handleMouseDown:u,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:r}}function XEe(n){const e=Nt(du),t=St("table");return{getHeaderRowStyle:o=>{const l=e==null?void 0:e.props.headerRowStyle;return Xt(l)?l.call(null,{rowIndex:o}):l},getHeaderRowClass:o=>{const l=[],c=e==null?void 0:e.props.headerRowClassName;return qt(c)?l.push(c):Xt(c)&&l.push(c.call(null,{rowIndex:o})),l.join(" ")},getHeaderCellStyle:(o,l,c,u)=>{var d;let f=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};Xt(f)&&(f=f.call(null,{rowIndex:o,columnIndex:l,row:c,column:u}));const h=Gk(l,u.fixed,n.store,c);return _1(h,"left"),_1(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(o,l,c,u)=>{const d=Hk(t.b(),l,u.fixed,n.store,c),f=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||f.push("is-leaf"),u.sortable&&f.push("is-sortable");const h=e==null?void 0:e.props.headerCellClassName;return qt(h)?f.push(h):Xt(h)&&f.push(h.call(null,{rowIndex:o,columnIndex:l,row:c,column:u})),f.push(t.e("cell")),f.filter(p=>!!p).join(" ")}}}const VJ=n=>{const e=[];return n.forEach(t=>{t.children?(e.push(t),e.push.apply(e,VJ(t.children))):e.push(t)}),e},HJ=n=>{let e=1;const t=(s,a)=>{if(a&&(s.level=a.level+1,e<s.level&&(e=s.level)),s.children){let o=0;s.children.forEach(l=>{t(l,s),o+=l.colSpan}),s.colSpan=o}else s.colSpan=1};n.forEach(s=>{s.level=1,t(s,void 0)});const i=[];for(let s=0;s<e;s++)i.push([]);return VJ(n).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(a=>a.isSubColumn=!0)):s.rowSpan=e-s.level+1,i[s.level-1].push(s)}),i};function jEe(n){const e=Nt(du),t=V(()=>HJ(n.store.states.originColumns.value));return{isGroup:V(()=>{const s=t.value.length>1;return s&&e&&(e.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var $Ee=Ie({name:"ElTableHeader",components:{ElCheckbox:vc},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String},allowDragLastColumn:{type:Boolean}},setup(n,{emit:e}){const t=Nn(),i=Nt(du),r=St("table"),s=ae({}),{onColumnsChange:a,onScrollableChange:o}=Wk(i),l=(i==null?void 0:i.props.tableLayout)==="auto",c=Si(new Map),u=ae(),d=()=>{setTimeout(()=>{c.size>0&&(c.forEach((T,E)=>{const I=u.value.querySelector(`.${E.replace(/\s/g,".")}`);if(I){const L=I.getBoundingClientRect().width;T.width=L}}),c.clear())})};pt(c,d),Mn(async()=>{await Yt(),await Yt();const{prop:T,order:E}=n.defaultSort;i==null||i.store.commit("sort",{prop:T,order:E,init:!0}),d()});const{handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:g,handleFilterClick:y}=YEe(n,e),{getHeaderRowStyle:x,getHeaderRowClass:b,getHeaderCellStyle:A,getHeaderCellClass:S}=XEe(n),{isGroup:C,toggleAllSelection:_,columnRows:M}=jEe(n);return t.state={onColumnsChange:a,onScrollableChange:o},t.filterPanels=s,{ns:r,filterPanels:s,onColumnsChange:a,onScrollableChange:o,columnRows:M,getHeaderRowClass:b,getHeaderRowStyle:x,getHeaderCellClass:S,getHeaderCellStyle:A,handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:g,handleFilterClick:y,isGroup:C,toggleAllSelection:_,saveIndexSelection:c,isTableLayoutAuto:l,theadRef:u,updateFixedColumnStyle:d}},render(){const{ns:n,isGroup:e,columnRows:t,getHeaderCellStyle:i,getHeaderCellClass:r,getHeaderRowClass:s,getHeaderRowStyle:a,handleHeaderClick:o,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:f,store:h,$parent:p,saveIndexSelection:m,isTableLayoutAuto:v}=this;let g=1;return en("thead",{ref:"theadRef",class:{[n.is("group")]:e}},t.map((y,x)=>en("tr",{class:s(x),key:x,style:a(x)},y.map((b,A)=>{b.rowSpan>g&&(g=b.rowSpan);const S=r(x,A,y,b);return v&&b.fixed&&m.set(S,b),en("th",{class:S,colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:i(x,A,y,b),onClick:C=>{C.currentTarget.classList.contains("noclick")||o(C,b)},onContextmenu:C=>l(C,b),onMousedown:C=>c(C,b),onMousemove:C=>u(C,b),onMouseout:f},[en("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:A,store:h,_self:p}):b.label,b.sortable&&en("span",{onClick:C=>d(C,b),class:"caret-wrapper"},[en("i",{onClick:C=>d(C,b,"ascending"),class:"sort-caret ascending"}),en("i",{onClick:C=>d(C,b,"descending"),class:"sort-caret descending"})]),b.filterable&&en(KEe,{store:h,placement:b.filterPlacement||"bottom-start",appendTo:p.appendFilterPanelTo,column:b,upDataColumn:(C,_)=>{b[C]=_}},{"filter-icon":()=>b.renderFilterIcon?b.renderFilterIcon({filterOpened:b.filterOpened}):null})])])}))))}});function N5(n,e,t=.03){return n-e>t}function QEe(n){const e=Nt(du),t=ae(""),i=ae(en("div")),r=(p,m,v)=>{var g;const y=e,x=B5(p);let b;const A=(g=y==null?void 0:y.vnode.el)==null?void 0:g.dataset.prefix;x&&(b=tz({columns:n.store.states.columns.value},x,A),b&&(y==null||y.emit(`cell-${v}`,m,b,x,p))),y==null||y.emit(`row-${v}`,m,b,p)},s=(p,m)=>{r(p,m,"dblclick")},a=(p,m)=>{n.store.commit("setCurrentRow",m),r(p,m,"click")},o=(p,m)=>{r(p,m,"contextmenu")},l=Jo(p=>{n.store.commit("setHoverRow",p)},30),c=Jo(()=>{n.store.commit("setHoverRow",null)},30),u=p=>{const m=window.getComputedStyle(p,null),v=Number.parseInt(m.paddingLeft,10)||0,g=Number.parseInt(m.paddingRight,10)||0,y=Number.parseInt(m.paddingTop,10)||0,x=Number.parseInt(m.paddingBottom,10)||0;return{left:v,right:g,top:y,bottom:x}},d=(p,m,v)=>{let g=m.target.parentNode;for(;p>1&&(g=g==null?void 0:g.nextSibling,!(!g||g.nodeName!=="TR"));)v(g,"hover-row hover-fixed-row"),p--};return{handleDoubleClick:s,handleClick:a,handleContextMenu:o,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(p,m,v)=>{var g,y,x;const b=e,A=B5(p),S=(g=b==null?void 0:b.vnode.el)==null?void 0:g.dataset.prefix;let C;if(A){C=tz({columns:n.store.states.columns.value},A,S),A.rowSpan>1&&d(A.rowSpan,p,tc);const H=b.hoverState={cell:A,column:C,row:m};b==null||b.emit("cell-mouse-enter",H.row,H.column,H.cell,p)}if(!v)return;const _=p.target.querySelector(".cell");if(!(qo(_,`${S}-tooltip`)&&_.childNodes.length))return;const M=document.createRange();M.setStart(_,0),M.setEnd(_,_.childNodes.length);const{width:T,height:E}=M.getBoundingClientRect(),{width:I,height:L}=_.getBoundingClientRect(),{top:F,left:B,right:P,bottom:z}=u(_),O=B+P,N=F+z;N5(T+O,I)||N5(E+N,L)||N5(_.scrollWidth,I)?LEe(v,A.innerText||A.textContent,m,C,A,b):((y=No)==null?void 0:y.trigger)===A&&((x=No)==null||x())},handleCellMouseLeave:p=>{const m=B5(p);if(!m)return;m.rowSpan>1&&d(m.rowSpan,p,Za);const v=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",v==null?void 0:v.row,v==null?void 0:v.column,v==null?void 0:v.cell,p)},tooltipContent:t,tooltipTrigger:i}}function ZEe(n){const e=Nt(du),t=St("table");return{getRowStyle:(c,u)=>{const d=e==null?void 0:e.props.rowStyle;return Xt(d)?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{const d=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&c===n.store.states.currentRow.value&&d.push("current-row"),n.stripe&&u%2===1&&d.push(t.em("row","striped"));const f=e==null?void 0:e.props.rowClassName;return qt(f)?d.push(f):Xt(f)&&d.push(f.call(null,{row:c,rowIndex:u})),d},getCellStyle:(c,u,d,f)=>{const h=e==null?void 0:e.props.cellStyle;let p=h??{};Xt(h)&&(p=h.call(null,{rowIndex:c,columnIndex:u,row:d,column:f}));const m=Gk(u,n==null?void 0:n.fixed,n.store);return _1(m,"left"),_1(m,"right"),Object.assign({},p,m)},getCellClass:(c,u,d,f,h)=>{const p=Hk(t.b(),u,n==null?void 0:n.fixed,n.store,void 0,h),m=[f.id,f.align,f.className,...p],v=e==null?void 0:e.props.cellClassName;return qt(v)?m.push(v):Xt(v)&&m.push(v.call(null,{rowIndex:c,columnIndex:u,row:d,column:f})),m.push(t.e("cell")),m.filter(g=>!!g).join(" ")},getSpan:(c,u,d,f)=>{let h=1,p=1;const m=e==null?void 0:e.props.spanMethod;if(Xt(m)){const v=m({row:c,column:u,rowIndex:d,columnIndex:f});Mt(v)?(h=v[0],p=v[1]):Rn(v)&&(h=v.rowspan,p=v.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const f=c.map(({realWidth:h,width:p})=>h||p).slice(d,d+u);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}const JEe=Ie({name:"TableTdWrapper"}),e6e=Ie({...JEe,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(n){return(e,t)=>(W(),ve("td",{colspan:n.colspan,rowspan:n.rowspan},[Qe(e.$slots,"default")],8,["colspan","rowspan"]))}});var t6e=It(e6e,[["__file","td-wrapper.vue"]]);function n6e(n){const e=Nt(du),t=St("table"),{handleDoubleClick:i,handleClick:r,handleContextMenu:s,handleMouseEnter:a,handleMouseLeave:o,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=QEe(n),{getRowStyle:f,getRowClass:h,getCellStyle:p,getCellClass:m,getSpan:v,getColspanRealWidth:g}=ZEe(n),y=V(()=>n.store.states.columns.value.findIndex(({type:C})=>C==="default")),x=(C,_)=>{const M=e.props.rowKey;return M?ja(C,M):_},b=(C,_,M,T=!1)=>{const{tooltipEffect:E,tooltipOptions:I,store:L}=n,{indent:F,columns:B}=L.states,P=h(C,_);let z=!0;return M&&(P.push(t.em("row",`level-${M.level}`)),z=M.display),en("tr",{style:[z?null:{display:"none"},f(C,_)],class:P,key:x(C,_),onDblclick:N=>i(N,C),onClick:N=>r(N,C),onContextmenu:N=>s(N,C),onMouseenter:()=>a(_),onMouseleave:o},B.value.map((N,H)=>{const{rowspan:q,colspan:te}=v(C,N,_,H);if(!q||!te)return null;const Q=Object.assign({},N);Q.realWidth=g(B.value,te,H);const ee={store:n.store,_self:n.context||e,column:Q,row:C,$index:_,cellIndex:H,expanded:T};H===y.value&&M&&(ee.treeNode={indent:M.level*F.value,level:M.level},ji(M.expanded)&&(ee.treeNode.expanded=M.expanded,"loading"in M&&(ee.treeNode.loading=M.loading),"noLazyChildren"in M&&(ee.treeNode.noLazyChildren=M.noLazyChildren)));const de=`${x(C,_)},${H}`,J=Q.columnKey||Q.rawColumnKey||"",ue=N.showOverflowTooltip&&Z$({effect:E},I,N.showOverflowTooltip);return en(t6e,{style:p(_,H,C,N),class:m(_,H,C,N,te-1),key:`${J}${de}`,rowspan:q,colspan:te,onMouseenter:Te=>l(Te,C,ue),onMouseleave:c},{default:()=>A(H,N,ee)})}))},A=(C,_,M)=>_.renderCell(M);return{wrappedRowRender:(C,_)=>{const M=n.store,{isRowExpanded:T,assertRowKey:E}=M,{treeData:I,lazyTreeNodeMap:L,childrenColumnName:F,rowKey:B}=M.states,P=M.states.columns.value;if(P.some(({type:O})=>O==="expand")){const O=T(C),N=b(C,_,void 0,O),H=e.renderExpanded;return O?H?[[N,en("tr",{key:`expanded-row__${N.key}`},[en("td",{colspan:P.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[H({row:C,$index:_,store:M,expanded:O})])])]]:(console.error("[Element Error]renderExpanded is required."),N):[[N]]}else if(Object.keys(I.value).length){E();const O=ja(C,B.value);let N=I.value[O],H=null;N&&(H={expanded:N.expanded,level:N.level,display:!0},ji(N.lazy)&&(ji(N.loaded)&&N.loaded&&(H.noLazyChildren=!(N.children&&N.children.length)),H.loading=N.loading));const q=[b(C,_,H)];if(N){let te=0;const Q=(de,J)=>{de&&de.length&&J&&de.forEach(ue=>{const Te={display:J.display&&J.expanded,level:J.level+1,expanded:!1,noLazyChildren:!1,loading:!1},De=ja(ue,B.value);if($c(De))throw new Error("For nested data item, row-key is required.");if(N={...I.value[De]},N&&(Te.expanded=N.expanded,N.level=N.level||Te.level,N.display=!!(N.expanded&&Te.display),ji(N.lazy)&&(ji(N.loaded)&&N.loaded&&(Te.noLazyChildren=!(N.children&&N.children.length)),Te.loading=N.loading)),te++,q.push(b(ue,_+te,Te)),N){const Le=L.value[De]||ue[F.value];Q(Le,N)}})};N.display=!0;const ee=L.value[O]||C[F.value];Q(ee,N)}return q}else return b(C,_,void 0)},tooltipContent:u,tooltipTrigger:d}}const i6e={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var r6e=Ie({name:"ElTableBody",props:i6e,setup(n){const e=Nn(),t=Nt(du),i=St("table"),{wrappedRowRender:r,tooltipContent:s,tooltipTrigger:a}=n6e(n),{onColumnsChange:o,onScrollableChange:l}=Wk(t),c=[];return pt(n.store.states.hoverRow,(u,d)=>{var f;const h=e==null?void 0:e.vnode.el,p=Array.from((h==null?void 0:h.children)||[]).filter(g=>g==null?void 0:g.classList.contains(`${i.e("row")}`));let m=u;const v=(f=p[m])==null?void 0:f.childNodes;if(v!=null&&v.length){let g=0;Array.from(v).reduce((x,b,A)=>{var S,C;return((S=v[A])==null?void 0:S.colSpan)>1&&(g=(C=v[A])==null?void 0:C.colSpan),b.nodeName!=="TD"&&g===0&&x.push(A),g>0&&g--,x},[]).forEach(x=>{var b;for(m=u;m>0;){const A=(b=p[m-1])==null?void 0:b.childNodes;if(A[x]&&A[x].nodeName==="TD"&&A[x].rowSpan>1){tc(A[x],"hover-cell"),c.push(A[x]);break}m--}})}else c.forEach(g=>Za(g,"hover-cell")),c.length=0;!n.store.states.isComplex.value||!li||tp(()=>{const g=p[d],y=p[u];g&&!g.classList.contains("hover-fixed-row")&&Za(g,"hover-row"),y&&tc(y,"hover-row")})}),Ap(()=>{var u;(u=No)==null||u()}),{ns:i,onColumnsChange:o,onScrollableChange:l,wrappedRowRender:r,tooltipContent:s,tooltipTrigger:a}},render(){const{wrappedRowRender:n,store:e}=this,t=e.states.data.value||[];return en("tbody",{tabIndex:-1},[t.reduce((i,r)=>i.concat(n(r,i.length)),[])])}});function s6e(){const n=Nt(du),e=n==null?void 0:n.store,t=V(()=>e.states.fixedLeafColumnsLength.value),i=V(()=>e.states.rightFixedColumns.value.length),r=V(()=>e.states.columns.value.length),s=V(()=>e.states.fixedColumns.value.length),a=V(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:t,rightFixedLeafCount:i,columnsCount:r,leftFixedCount:s,rightFixedCount:a,columns:e.states.columns}}function a6e(n){const{columns:e}=s6e(),t=St("table");return{getCellClasses:(s,a)=>{const o=s[a],l=[t.e("cell"),o.id,o.align,o.labelClassName,...Hk(t.b(),a,o.fixed,n.store)];return o.className&&l.push(o.className),o.children||l.push(t.is("leaf")),l},getCellStyles:(s,a)=>{const o=Gk(a,s.fixed,n.store);return _1(o,"left"),_1(o,"right"),o},columns:e}}var o6e=Ie({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(n){const e=Nt(du),t=St("table"),{getCellClasses:i,getCellStyles:r,columns:s}=a6e(n),{onScrollableChange:a,onColumnsChange:o}=Wk(e);return{ns:t,onScrollableChange:a,onColumnsChange:o,getCellClasses:i,getCellStyles:r,columns:s}},render(){const{columns:n,getCellStyles:e,getCellClasses:t,summaryMethod:i,sumText:r}=this,s=this.store.states.data.value;let a=[];return i?a=i({columns:n,data:s}):n.forEach((o,l)=>{if(l===0){a[l]=r;return}const c=s.map(h=>Number(h[o.property])),u=[];let d=!0;c.forEach(h=>{if(!Number.isNaN(+h)){d=!1;const p=`${h}`.split(".")[1];u.push(p?p.length:0)}});const f=Math.max.apply(null,u);d?a[l]="":a[l]=c.reduce((h,p)=>{const m=Number(p);return Number.isNaN(+m)?h:Number.parseFloat((h+p).toFixed(Math.min(f,20)))},0)}),en(en("tfoot",[en("tr",{},[...n.map((o,l)=>en("td",{key:l,colspan:o.colSpan,rowspan:o.rowSpan,class:t(n,l),style:e(o,l)},[en("div",{class:["cell",o.labelClassName]},[a[l]])]))])]))}});function l6e(n){return{setCurrentRow:d=>{n.commit("setCurrentRow",d)},getSelectionRows:()=>n.getSelectionRows(),toggleRowSelection:(d,f,h=!0)=>{n.toggleRowSelection(d,f,!1,h),n.updateAllSelected()},clearSelection:()=>{n.clearSelection()},clearFilter:d=>{n.clearFilter(d)},toggleAllSelection:()=>{n.commit("toggleAllSelection")},toggleRowExpansion:(d,f)=>{n.toggleRowExpansionAdapter(d,f)},clearSort:()=>{n.clearSort()},sort:(d,f)=>{n.commit("sort",{prop:d,order:f})},updateKeyChildren:(d,f)=>{n.updateKeyChildren(d,f)}}}function c6e(n,e,t,i){const r=ae(!1),s=ae(null),a=ae(!1),o=O=>{a.value=O},l=ae({width:null,height:null,headerHeight:null}),c=ae(!1),u={display:"inline-block",verticalAlign:"middle"},d=ae(),f=ae(0),h=ae(0),p=ae(0),m=ae(0),v=ae(0);Js(()=>{e.setHeight(n.height)}),Js(()=>{e.setMaxHeight(n.maxHeight)}),pt(()=>[n.currentRowKey,t.states.rowKey],([O,N])=>{!w(N)||!w(O)||t.setCurrentRowKey(`${O}`)},{immediate:!0}),pt(()=>n.data,O=>{i.store.commit("setData",O)},{immediate:!0,deep:!0}),Js(()=>{n.expandRowKeys&&t.setExpandRowKeysAdapter(n.expandRowKeys)});const g=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},y=(O,N)=>{const{pixelX:H,pixelY:q}=N;Math.abs(H)>=Math.abs(q)&&(i.refs.bodyWrapper.scrollLeft+=N.pixelX/5)},x=V(()=>n.height||n.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),b=V(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),A=()=>{x.value&&e.updateElsHeight(),e.updateColumnsWidth(),!(typeof window>"u")&&requestAnimationFrame(M)};Mn(async()=>{await Yt(),t.updateColumns(),T(),requestAnimationFrame(A);const O=i.vnode.el,N=i.refs.headerWrapper;n.flexible&&O&&O.parentElement&&(O.parentElement.style.minWidth="0"),l.value={width:d.value=O.offsetWidth,height:O.offsetHeight,headerHeight:n.showHeader&&N?N.offsetHeight:null},t.states.columns.value.forEach(H=>{H.filteredValue&&H.filteredValue.length&&i.store.commit("filterChange",{column:H,values:H.filteredValue,silent:!0})}),i.$ready=!0});const S=(O,N)=>{if(!O)return;const H=Array.from(O.classList).filter(q=>!q.startsWith("is-scrolling-"));H.push(e.scrollX.value?N:"is-scrolling-none"),O.className=H.join(" ")},C=O=>{const{tableWrapper:N}=i.refs;S(N,O)},_=O=>{const{tableWrapper:N}=i.refs;return!!(N&&N.classList.contains(O))},M=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const de="is-scrolling-none";_(de)||C(de);return}const O=i.refs.scrollBarRef.wrapRef;if(!O)return;const{scrollLeft:N,offsetWidth:H,scrollWidth:q}=O,{headerWrapper:te,footerWrapper:Q}=i.refs;te&&(te.scrollLeft=N),Q&&(Q.scrollLeft=N);const ee=q-H-1;N>=ee?C("is-scrolling-right"):C(N===0?"is-scrolling-left":"is-scrolling-middle")},T=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&Li(i.refs.scrollBarRef.wrapRef,"scroll",M,{passive:!0}),n.fit?Fr(i.vnode.el,E):Li(window,"resize",E),Fr(i.refs.bodyWrapper,()=>{var O,N;E(),(N=(O=i.refs)==null?void 0:O.scrollBarRef)==null||N.update()}))},E=()=>{var O,N,H,q;const te=i.vnode.el;if(!i.$ready||!te)return;let Q=!1;const{width:ee,height:de,headerHeight:J}=l.value,ue=d.value=te.offsetWidth;ee!==ue&&(Q=!0);const Te=te.offsetHeight;(n.height||x.value)&&de!==Te&&(Q=!0);const De=n.tableLayout==="fixed"?i.refs.headerWrapper:(O=i.refs.tableHeaderRef)==null?void 0:O.$el;n.showHeader&&(De==null?void 0:De.offsetHeight)!==J&&(Q=!0),f.value=((N=i.refs.tableWrapper)==null?void 0:N.scrollHeight)||0,p.value=(De==null?void 0:De.scrollHeight)||0,m.value=((H=i.refs.footerWrapper)==null?void 0:H.offsetHeight)||0,v.value=((q=i.refs.appendWrapper)==null?void 0:q.offsetHeight)||0,h.value=f.value-p.value-m.value-v.value,Q&&(l.value={width:ue,height:Te,headerHeight:n.showHeader&&(De==null?void 0:De.offsetHeight)||0},A())},I=gs(),L=V(()=>{const{bodyWidth:O,scrollY:N,gutterWidth:H}=e;return O.value?`${O.value-(N.value?H:0)}px`:""}),F=V(()=>n.maxHeight?"fixed":n.tableLayout),B=V(()=>{if(n.data&&n.data.length)return null;let O="100%";n.height&&h.value&&(O=`${h.value}px`);const N=d.value;return{width:N?`${N}px`:"",height:O}}),P=V(()=>n.height?{height:"100%"}:n.maxHeight?Number.isNaN(Number(n.maxHeight))?{maxHeight:`calc(${n.maxHeight} - ${p.value+m.value}px)`}:{maxHeight:`${n.maxHeight-p.value-m.value}px`}:{});return{isHidden:r,renderExpanded:s,setDragVisible:o,isGroup:c,handleMouseLeave:g,handleHeaderFooterMousewheel:y,tableSize:I,emptyBlockStyle:B,handleFixedMousewheel:(O,N)=>{const H=i.refs.bodyWrapper;if(Math.abs(N.spinY)>0){const q=H.scrollTop;N.pixelY<0&&q!==0&&O.preventDefault(),N.pixelY>0&&H.scrollHeight-H.clientHeight>q&&O.preventDefault(),H.scrollTop+=Math.ceil(N.pixelY/5)}else H.scrollLeft+=Math.ceil(N.pixelX/5)},resizeProxyVisible:a,bodyWidth:L,resizeState:l,doLayout:A,tableBodyStyles:b,tableLayout:F,scrollbarViewStyle:u,scrollbarStyle:P}}function u6e(n){const e=ae(),t=()=>{const r=n.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},a=n.store.states.updateOrderFns;e.value=new MutationObserver(()=>{a.forEach(o=>o())}),e.value.observe(r,s)};Mn(()=>{t()}),Ap(()=>{var i;(i=e.value)==null||i.disconnect()})}var d6e={data:{type:Array,default:()=>[]},size:ws,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],tooltipFormatter:Function,appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0},allowDragLastColumn:{type:Boolean,default:!0}};function GJ(n){const e=n.tableLayout==="auto";let t=n.columns||[];e&&t.every(({width:r})=>bi(r))&&(t=[]);const i=r=>{const s={key:`${n.tableLayout}_${r.id}`,style:{},name:void 0};return e?s.style={width:`${r.width}px`}:s.name=r.id,s};return en("colgroup",{},t.map(r=>en("col",i(r))))}GJ.props=["columns","tableLayout"];const f6e=()=>{const n=ae(),e=(s,a)=>{const o=n.value;o&&o.scrollTo(s,a)},t=(s,a)=>{const o=n.value;o&&Jt(a)&&["Top","Left"].includes(s)&&o[`setScroll${s}`](a)};return{scrollBarRef:n,scrollTo:e,setScrollTop:s=>t("Top",s),setScrollLeft:s=>t("Left",s)}};var rz=!1,A0,s8,a8,a_,o_,WJ,l_,o8,l8,c8,qJ,u8,d8,KJ,YJ;function Io(){if(!rz){rz=!0;var n=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(n),t=/(Mac OS X)|(Windows)|(Linux)/.exec(n);if(u8=/\b(iPhone|iP[ao]d)/.exec(n),d8=/\b(iP[ao]d)/.exec(n),c8=/Android/i.exec(n),KJ=/FBAN\/\w+;/i.exec(n),YJ=/Mobile/i.exec(n),qJ=!!/Win64/.exec(n),e){A0=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,A0&&document&&document.documentMode&&(A0=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(n);WJ=i?parseFloat(i[1])+4:A0,s8=e[2]?parseFloat(e[2]):NaN,a8=e[3]?parseFloat(e[3]):NaN,a_=e[4]?parseFloat(e[4]):NaN,a_?(e=/(?:Chrome\/(\d+\.\d+))/.exec(n),o_=e&&e[1]?parseFloat(e[1]):NaN):o_=NaN}else A0=s8=a8=o_=a_=NaN;if(t){if(t[1]){var r=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(n);l_=r?parseFloat(r[1].replace("_",".")):!0}else l_=!1;o8=!!t[2],l8=!!t[3]}else l_=o8=l8=!1}}var f8={ie:function(){return Io()||A0},ieCompatibilityMode:function(){return Io()||WJ>A0},ie64:function(){return f8.ie()&&qJ},firefox:function(){return Io()||s8},opera:function(){return Io()||a8},webkit:function(){return Io()||a_},safari:function(){return f8.webkit()},chrome:function(){return Io()||o_},windows:function(){return Io()||o8},osx:function(){return Io()||l_},linux:function(){return Io()||l8},iphone:function(){return Io()||u8},mobile:function(){return Io()||u8||d8||c8||YJ},nativeApp:function(){return Io()||KJ},android:function(){return Io()||c8},ipad:function(){return Io()||d8}},h6e=f8,p6e=!!(typeof window<"u"&&window.document&&window.document.createElement),m6e={canUseDOM:p6e},XJ=m6e,jJ;XJ.canUseDOM&&(jJ=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function v6e(n,e){if(!XJ.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+n,i=t in document;if(!i){var r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return!i&&jJ&&n==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var g6e=v6e,sz=10,az=40,oz=800;function $J(n){var e=0,t=0,i=0,r=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(e=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(e=t,t=0),i=e*sz,r=t*sz,"deltaY"in n&&(r=n.deltaY),"deltaX"in n&&(i=n.deltaX),(i||r)&&n.deltaMode&&(n.deltaMode==1?(i*=az,r*=az):(i*=oz,r*=oz)),i&&!e&&(e=i<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:e,spinY:t,pixelX:i,pixelY:r}}$J.getEventType=function(){return h6e.firefox()?"DOMMouseScroll":g6e("wheel")?"wheel":"mousewheel"};var y6e=$J;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const b6e=function(n,e){if(n&&n.addEventListener){const t=function(i){const r=y6e(i);e&&Reflect.apply(e,this,[i,r])};n.addEventListener("wheel",t,{passive:!0})}},x6e={beforeMount(n,e){b6e(n,e.value)}};let A6e=1;const w6e=Ie({name:"ElTable",directives:{Mousewheel:x6e},components:{TableHeader:$Ee,TableBody:r6e,TableFooter:o6e,ElScrollbar:sd,hColgroup:GJ},props:d6e,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(n){const{t:e}=ci(),t=St("table"),i=Nn();Qn(du,i);const r=zEe(i,n);i.store=r;const s=new HEe({store:i.store,table:i,fit:n.fit,showHeader:n.showHeader});i.layout=s;const a=V(()=>(r.states.data.value||[]).length===0),{setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,sort:m,updateKeyChildren:v}=l6e(r),{isHidden:g,renderExpanded:y,setDragVisible:x,isGroup:b,handleMouseLeave:A,handleHeaderFooterMousewheel:S,tableSize:C,emptyBlockStyle:_,handleFixedMousewheel:M,resizeProxyVisible:T,bodyWidth:E,resizeState:I,doLayout:L,tableBodyStyles:F,tableLayout:B,scrollbarViewStyle:P,scrollbarStyle:z}=c6e(n,s,r,i),{scrollBarRef:O,scrollTo:N,setScrollLeft:H,setScrollTop:q}=f6e(),te=Jo(L,50),Q=`${t.namespace.value}-table_${A6e++}`;i.tableId=Q,i.state={isGroup:b,resizeState:I,doLayout:L,debouncedUpdateLayout:te};const ee=V(()=>{var ue;return(ue=n.sumText)!=null?ue:e("el.table.sumText")}),de=V(()=>{var ue;return(ue=n.emptyText)!=null?ue:e("el.table.emptyText")}),J=V(()=>HJ(r.states.originColumns.value)[0]);return u6e(i),Fi(()=>{te.cancel()}),{ns:t,layout:s,store:r,columns:J,handleHeaderFooterMousewheel:S,handleMouseLeave:A,tableId:Q,tableSize:C,isHidden:g,isEmpty:a,renderExpanded:y,resizeProxyVisible:T,resizeState:I,isGroup:b,bodyWidth:E,tableBodyStyles:F,emptyBlockStyle:_,debouncedUpdateLayout:te,handleFixedMousewheel:M,setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,doLayout:L,sort:m,updateKeyChildren:v,t:e,setDragVisible:x,context:i,computedSumText:ee,computedEmptyText:de,tableLayout:B,scrollbarViewStyle:P,scrollbarStyle:z,scrollBarRef:O,scrollTo:N,setScrollLeft:H,setScrollTop:q,allowDragLastColumn:n.allowDragLastColumn}}});function S6e(n,e,t,i,r,s){const a=an("hColgroup"),o=an("table-header"),l=an("table-body"),c=an("table-footer"),u=an("el-scrollbar"),d=tM("mousewheel");return W(),ve("div",{ref:"tableWrapper",class:j([{[n.ns.m("fit")]:n.fit,[n.ns.m("striped")]:n.stripe,[n.ns.m("border")]:n.border||n.isGroup,[n.ns.m("hidden")]:n.isHidden,[n.ns.m("group")]:n.isGroup,[n.ns.m("fluid-height")]:n.maxHeight,[n.ns.m("scrollable-x")]:n.layout.scrollX.value,[n.ns.m("scrollable-y")]:n.layout.scrollY.value,[n.ns.m("enable-row-hover")]:!n.store.states.isComplex.value,[n.ns.m("enable-row-transition")]:(n.store.states.data.value||[]).length!==0&&(n.store.states.data.value||[]).length<100,"has-footer":n.showSummary},n.ns.m(n.tableSize),n.className,n.ns.b(),n.ns.m(`layout-${n.tableLayout}`)]),style:jt(n.style),"data-prefix":n.ns.namespace.value,onMouseleave:n.handleMouseLeave},[be("div",{class:j(n.ns.e("inner-wrapper"))},[be("div",{ref:"hiddenColumns",class:"hidden-columns"},[Qe(n.$slots,"default")],512),n.showHeader&&n.tableLayout==="fixed"?Cn((W(),ve("div",{key:0,ref:"headerWrapper",class:j(n.ns.e("header-wrapper"))},[be("table",{ref:"tableHeader",class:j(n.ns.e("header")),style:jt(n.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[_e(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),_e(o,{ref:"tableHeaderRef",border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,"allow-drag-last-column":n.allowDragLastColumn,onSetDragVisible:n.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","allow-drag-last-column","onSetDragVisible"])],6)],2)),[[d,n.handleHeaderFooterMousewheel]]):et("v-if",!0),be("div",{ref:"bodyWrapper",class:j(n.ns.e("body-wrapper"))},[_e(u,{ref:"scrollBarRef","view-style":n.scrollbarViewStyle,"wrap-style":n.scrollbarStyle,always:n.scrollbarAlwaysOn,tabindex:n.scrollbarTabindex,onScroll:f=>n.$emit("scroll",f)},{default:Re(()=>[be("table",{ref:"tableBody",class:j(n.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:jt({width:n.bodyWidth,tableLayout:n.tableLayout})},[_e(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),n.showHeader&&n.tableLayout==="auto"?(W(),rt(o,{key:0,ref:"tableHeaderRef",class:j(n.ns.e("body-header")),border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):et("v-if",!0),_e(l,{context:n.context,highlight:n.highlightCurrentRow,"row-class-name":n.rowClassName,"tooltip-effect":n.tooltipEffect,"tooltip-options":n.tooltipOptions,"row-style":n.rowStyle,store:n.store,stripe:n.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),n.showSummary&&n.tableLayout==="auto"?(W(),rt(c,{key:1,class:j(n.ns.e("body-footer")),border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):et("v-if",!0)],6),n.isEmpty?(W(),ve("div",{key:0,ref:"emptyBlock",style:jt(n.emptyBlockStyle),class:j(n.ns.e("empty-block"))},[be("span",{class:j(n.ns.e("empty-text"))},[Qe(n.$slots,"empty",{},()=>[Hn(Tt(n.computedEmptyText),1)])],2)],6)):et("v-if",!0),n.$slots.append?(W(),ve("div",{key:1,ref:"appendWrapper",class:j(n.ns.e("append-wrapper"))},[Qe(n.$slots,"append")],2)):et("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","onScroll"])],2),n.showSummary&&n.tableLayout==="fixed"?Cn((W(),ve("div",{key:1,ref:"footerWrapper",class:j(n.ns.e("footer-wrapper"))},[be("table",{class:j(n.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:jt(n.tableBodyStyles)},[_e(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),_e(c,{border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[yi,!n.isEmpty],[d,n.handleHeaderFooterMousewheel]]):et("v-if",!0),n.border||n.isGroup?(W(),ve("div",{key:2,class:j(n.ns.e("border-left-patch"))},null,2)):et("v-if",!0)],2),Cn(be("div",{ref:"resizeProxy",class:j(n.ns.e("column-resize-proxy"))},null,2),[[yi,n.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var _6e=It(w6e,[["render",S6e],["__file","table.vue"]]);const C6e={selection:"table-column--selection",expand:"table__expand-column"},M6e={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},T6e=n=>C6e[n]||"",E6e={selection:{renderHeader({store:n,column:e}){function t(){return n.states.data.value&&n.states.data.value.length===0}return en(vc,{disabled:t(),size:n.states.tableSize.value,indeterminate:n.states.selection.value.length>0&&!n.states.isAllSelected.value,"onUpdate:modelValue":n.toggleAllSelection,modelValue:n.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:n,column:e,store:t,$index:i}){return en(vc,{disabled:e.selectable?!e.selectable.call(null,n,i):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",n)},onClick:r=>r.stopPropagation(),modelValue:t.isSelected(n),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:n}){return n.label||"#"},renderCell({column:n,$index:e}){let t=e+1;const i=n.index;return Jt(i)?t=e+i:Xt(i)&&(t=i(e)),en("div",{},[t])},sortable:!1},expand:{renderHeader({column:n}){return n.label||""},renderCell({row:n,store:e,expanded:t}){const{ns:i}=e,r=[i.e("expand-icon")];return t&&r.push(i.em("expand-icon","expanded")),en("div",{class:r,onClick:function(a){a.stopPropagation(),e.toggleRowExpansion(n)}},{default:()=>[en(Ut,null,{default:()=>[en(xo)]})]})},sortable:!1,resizable:!1}};function I6e({row:n,column:e,$index:t}){var i;const r=e.property,s=r&&ob(n,r).value;return e&&e.formatter?e.formatter(n,e,s,t):((i=s==null?void 0:s.toString)==null?void 0:i.call(s))||""}function D6e({row:n,treeNode:e,store:t},i=!1){const{ns:r}=t;if(!e)return i?[en("span",{class:r.e("placeholder")})]:null;const s=[],a=function(o){o.stopPropagation(),!e.loading&&t.loadOrToggle(n)};if(e.indent&&s.push(en("span",{class:r.e("indent"),style:{"padding-left":`${e.indent}px`}})),ji(e.expanded)&&!e.noLazyChildren){const o=[r.e("expand-icon"),e.expanded?r.em("expand-icon","expanded"):""];let l=xo;e.loading&&(l=ju),s.push(en("div",{class:o,onClick:a},{default:()=>[en(Ut,{class:{[r.is("loading")]:e.loading}},{default:()=>[en(l)]})]}))}else s.push(en("span",{class:r.e("placeholder")}));return s}function lz(n,e){return n.reduce((t,i)=>(t[i]=i,t),e)}function R6e(n,e){const t=Nn();return{registerComplexWatchers:()=>{const s=["fixed"],a={realWidth:"width",realMinWidth:"minWidth"},o=lz(s,a);Object.keys(o).forEach(l=>{const c=a[l];vi(e,c)&&pt(()=>e[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=Vk(u)),c==="minWidth"&&l==="realMinWidth"&&(d=BJ(u)),t.columnConfig.value[c]=d,t.columnConfig.value[l]=d;const f=c==="fixed";n.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip","tooltipFormatter"],a={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},o=lz(s,a);Object.keys(o).forEach(l=>{const c=a[l];vi(e,c)&&pt(()=>e[c],u=>{t.columnConfig.value[l]=u})})}}}function P6e(n,e,t){const i=Nn(),r=ae(""),s=ae(!1),a=ae(),o=ae(),l=St("table");Js(()=>{a.value=n.align?`is-${n.align}`:null,a.value}),Js(()=>{o.value=n.headerAlign?`is-${n.headerAlign}`:a.value,o.value});const c=V(()=>{let b=i.vnode.vParent||i.parent;for(;b&&!b.tableId&&!b.columnId;)b=b.vnode.vParent||b.parent;return b}),u=V(()=>{const{store:b}=i.parent;if(!b)return!1;const{treeData:A}=b.states,S=A.value;return S&&Object.keys(S).length>0}),d=ae(Vk(n.width)),f=ae(BJ(n.minWidth)),h=b=>(d.value&&(b.width=d.value),f.value&&(b.minWidth=f.value),!d.value&&f.value&&(b.width=void 0),b.minWidth||(b.minWidth=80),b.realWidth=Number(bi(b.width)?b.minWidth:b.width),b),p=b=>{const A=b.type,S=E6e[A]||{};Object.keys(S).forEach(_=>{const M=S[_];_!=="className"&&!bi(M)&&(b[_]=M)});const C=T6e(A);if(C){const _=`${w(l.namespace)}-${C}`;b.className=b.className?`${b.className} ${_}`:_}return b},m=b=>{Mt(b)?b.forEach(S=>A(S)):A(b);function A(S){var C;((C=S==null?void 0:S.type)==null?void 0:C.name)==="ElTableColumn"&&(S.vParent=i)}};return{columnId:r,realAlign:a,isSubColumn:s,realHeaderAlign:o,columnOrTableParent:c,setColumnWidth:h,setColumnForcedProps:p,setColumnRenders:b=>{n.renderHeader||b.type!=="selection"&&(b.renderHeader=S=>(i.columnConfig.value.label,Qe(e,"header",S,()=>[b.label]))),e["filter-icon"]&&(b.renderFilterIcon=S=>Qe(e,"filter-icon",S));let A=b.renderCell;return b.type==="expand"?(b.renderCell=S=>en("div",{class:"cell"},[A(S)]),t.value.renderExpanded=S=>e.default?e.default(S):e.default):(A=A||I6e,b.renderCell=S=>{let C=null;if(e.default){const L=e.default(S);C=L.some(F=>F.type!==js)?L:A(S)}else C=A(S);const{columns:_}=t.value.store.states,M=_.value.findIndex(L=>L.type==="default"),T=u.value&&S.cellIndex===M,E=D6e(S,T),I={class:"cell",style:{}};return b.showOverflowTooltip&&(I.class=`${I.class} ${w(l.namespace)}-tooltip`,I.style={width:`${(S.column.realWidth||Number(S.column.width))-1}px`}),m(C),en("div",I,[E,C])}),b},getPropsData:(...b)=>b.reduce((A,S)=>(Mt(S)&&S.forEach(C=>{A[C]=n[C]}),A),{}),getColumnElIndex:(b,A)=>Array.prototype.indexOf.call(b,A),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var L6e={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},tooltipFormatter:Function,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:n=>n.every(e=>["ascending","descending",null].includes(e))}};let k6e=1;var QJ=Ie({name:"ElTableColumn",components:{ElCheckbox:vc},props:L6e,setup(n,{slots:e}){const t=Nn(),i=ae({}),r=V(()=>{let x=t.parent;for(;x&&!x.tableId;)x=x.parent;return x}),{registerNormalWatchers:s,registerComplexWatchers:a}=R6e(r,n),{columnId:o,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:m,realAlign:v,updateColumnOrder:g}=P6e(n,e,r),y=u.value;o.value=`${y.tableId||y.columnId}_column_${k6e++}`,eM(()=>{l.value=r.value!==y;const x=n.type||"default",b=n.sortable===""?!0:n.sortable,A=bi(n.showOverflowTooltip)?y.props.showOverflowTooltip:n.showOverflowTooltip,S=bi(n.tooltipFormatter)?y.props.tooltipFormatter:n.tooltipFormatter,C={...M6e[x],id:o.value,type:x,property:n.prop||n.property,align:v,headerAlign:c,showOverflowTooltip:A,tooltipFormatter:S,filterable:n.filters||n.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:b,index:n.index,rawColumnKey:t.vnode.key};let I=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);I=EEe(C,I),I=DEe(h,d,f)(I),i.value=I,s(),a()}),Mn(()=>{var x;const b=u.value,A=l.value?b.vnode.el.children:(x=b.refs.hiddenColumns)==null?void 0:x.children,S=()=>m(A||[],t.vnode.el);i.value.getColumnIndex=S,S()>-1&&r.value.store.commit("insertColumn",i.value,l.value?b.columnConfig.value:null,g)}),Fi(()=>{const x=i.value.getColumnIndex;(x?x():-1)>-1&&r.value.store.commit("removeColumn",i.value,l.value?y.columnConfig.value:null,g)}),t.columnId=o.value,t.columnConfig=i},render(){var n,e,t;try{const i=(e=(n=this.$slots).default)==null?void 0:e.call(n,{row:{},column:{},$index:-1}),r=[];if(Mt(i))for(const a of i)((t=a.type)==null?void 0:t.name)==="ElTableColumn"||a.shapeFlag&2?r.push(a):a.type===Kt&&Mt(a.children)&&a.children.forEach(o=>{(o==null?void 0:o.patchFlag)!==1024&&!qt(o==null?void 0:o.children)&&r.push(o)});return en("div",r)}catch{return en("div",[])}}});const F6e=xn(_6e,{TableColumn:QJ}),B6e=Or(QJ);var vx=(n=>(n.ASC="asc",n.DESC="desc",n))(vx||{}),gx=(n=>(n.CENTER="center",n.RIGHT="right",n))(gx||{}),ZJ=(n=>(n.LEFT="left",n.RIGHT="right",n))(ZJ||{});const h8={asc:"desc",desc:"asc"},yx=Symbol("placeholder"),N6e=(n,e,t)=>{var i;const r={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:n.flexGrow||0,flexShrink:n.flexShrink||1}};t||(r.flexShrink=1);const s={...(i=n.style)!=null?i:{},...r,flexBasis:"auto",width:n.width};return e||(n.maxWidth&&(s.maxWidth=n.maxWidth),n.minWidth&&(s.minWidth=n.minWidth)),s};function O6e(n,e,t){const i=V(()=>w(e).map((v,g)=>{var y,x;return{...v,key:(x=(y=v.key)!=null?y:v.dataKey)!=null?x:g}})),r=V(()=>w(i).filter(v=>!v.hidden)),s=V(()=>w(r).filter(v=>v.fixed==="left"||v.fixed===!0)),a=V(()=>w(r).filter(v=>v.fixed==="right")),o=V(()=>w(r).filter(v=>!v.fixed)),l=V(()=>{const v=[];return w(s).forEach(g=>{v.push({...g,placeholderSign:yx})}),w(o).forEach(g=>{v.push(g)}),w(a).forEach(g=>{v.push({...g,placeholderSign:yx})}),v}),c=V(()=>w(s).length||w(a).length),u=V(()=>w(i).reduce((v,g)=>(v[g.key]=N6e(g,w(t),n.fixed),v),{})),d=V(()=>w(r).reduce((v,g)=>v+g.width,0)),f=v=>w(i).find(g=>g.key===v),h=v=>w(u)[v],p=(v,g)=>{v.width=g};function m(v){var g;const{key:y}=v.currentTarget.dataset;if(!y)return;const{sortState:x,sortBy:b}=n;let A=vx.ASC;Rn(x)?A=h8[x[y]]:A=h8[b.order],(g=n.onColumnSort)==null||g.call(n,{column:f(y),key:y,order:A})}return{columns:i,columnsStyles:u,columnsTotalWidth:d,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,hasFixedColumns:c,mainColumns:l,normalColumns:o,visibleColumns:r,getColumn:f,getColumnStyle:h,updateColumnWidth:p,onColumnSorted:m}}const U6e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:r})=>{const s=ae({scrollLeft:0,scrollTop:0});function a(h){var p,m,v;const{scrollTop:g}=h;(p=e.value)==null||p.scrollTo(h),(m=t.value)==null||m.scrollToTop(g),(v=i.value)==null||v.scrollToTop(g)}function o(h){s.value=h,a(h)}function l(h){s.value.scrollTop=h,a(w(s))}function c(h){var p,m;s.value.scrollLeft=h,(m=(p=e.value)==null?void 0:p.scrollTo)==null||m.call(p,w(s))}function u(h){var p;o(h),(p=n.onScroll)==null||p.call(n,h)}function d({scrollTop:h}){const{scrollTop:p}=w(s);h!==p&&l(h)}function f(h,p="auto"){var m;(m=e.value)==null||m.scrollToRow(h,p)}return pt(()=>w(s).scrollTop,(h,p)=>{h>p&&r()}),{scrollPos:s,scrollTo:o,scrollToLeft:c,scrollToTop:l,scrollToRow:f,onScroll:u,onVerticalScroll:d}},z6e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:r,ns:s,isScrolling:a})=>{const o=Nn(),{emit:l}=o,c=Ui(!1),u=ae(n.defaultExpandedRowKeys||[]),d=ae(-1),f=Ui(null),h=ae({}),p=ae({}),m=Ui({}),v=Ui({}),g=Ui({}),y=V(()=>Jt(n.estimatedRowHeight));function x(T){var E;(E=n.onRowsRendered)==null||E.call(n,T),T.rowCacheEnd>w(d)&&(d.value=T.rowCacheEnd)}function b({hovered:T,rowKey:E}){if(a.value)return;r.vnode.el.querySelectorAll(`[rowkey="${String(E)}"]`).forEach(F=>{T?F.classList.add(s.is("hovered")):F.classList.remove(s.is("hovered"))})}function A({expanded:T,rowData:E,rowIndex:I,rowKey:L}){var F,B;const P=[...w(u)],z=P.indexOf(L);T?z===-1&&P.push(L):z>-1&&P.splice(z,1),u.value=P,l("update:expandedRowKeys",P),(F=n.onRowExpand)==null||F.call(n,{expanded:T,rowData:E,rowIndex:I,rowKey:L}),(B=n.onExpandedRowsChange)==null||B.call(n,P)}const S=Jo(()=>{var T,E,I,L;c.value=!0,h.value={...w(h),...w(p)},C(w(f),!1),p.value={},f.value=null,(T=e.value)==null||T.forceUpdate(),(E=t.value)==null||E.forceUpdate(),(I=i.value)==null||I.forceUpdate(),(L=o.proxy)==null||L.$forceUpdate(),c.value=!1},0);function C(T,E=!1){w(y)&&[e,t,i].forEach(I=>{const L=w(I);L&&L.resetAfterRowIndex(T,E)})}function _(T,E,I){const L=w(f);(L===null||L>I)&&(f.value=I),p.value[T]=E}function M({rowKey:T,height:E,rowIndex:I},L){L?L===ZJ.RIGHT?g.value[T]=E:m.value[T]=E:v.value[T]=E;const F=Math.max(...[m,g,v].map(B=>B.value[T]||0));w(h)[T]!==F&&(_(T,F,I),S())}return{expandedRowKeys:u,lastRenderedRowIndex:d,isDynamic:y,isResetting:c,rowHeights:h,resetAfterIndex:C,onRowExpanded:A,onRowHovered:b,onRowsRendered:x,onRowHeightChange:M}},V6e=(n,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:i})=>{const r=ae({}),s=V(()=>{const o={},{data:l,rowKey:c}=n,u=w(e);if(!u||!u.length)return l;const d=[],f=new Set;u.forEach(p=>f.add(p));let h=l.slice();for(h.forEach(p=>o[p[c]]=0);h.length>0;){const p=h.shift();d.push(p),f.has(p[c])&&Mt(p.children)&&p.children.length>0&&(h=[...p.children,...h],p.children.forEach(m=>o[m[c]]=o[p[c]]+1))}return r.value=o,d}),a=V(()=>{const{data:o,expandColumnKey:l}=n;return l?w(s):o});return pt(a,(o,l)=>{o!==l&&(t.value=-1,i(0,!0))}),{data:a,depthMap:r}},H6e=(n,e)=>n+e,c_=n=>Mt(n)?n.reduce(H6e,0):n,cm=(n,e,t={})=>Xt(n)?n(e):n??t,Rh=n=>(["width","maxWidth","minWidth","height"].forEach(e=>{n[e]=Hr(n[e])}),n),JJ=n=>mr(n)?e=>en(n,e):n,G6e=(n,{columnsTotalWidth:e,rowsHeight:t,fixedColumnsOnLeft:i,fixedColumnsOnRight:r})=>{const s=V(()=>{const{fixed:y,width:x,vScrollbarSize:b}=n,A=x-b;return y?Math.max(Math.round(w(e)),A):A}),a=V(()=>w(s)+n.vScrollbarSize),o=V(()=>{const{height:y=0,maxHeight:x=0,footerHeight:b,hScrollbarSize:A}=n;if(x>0){const S=w(h),C=w(t),M=w(f)+S+C+A;return Math.min(M,x-b)}return y-b}),l=V(()=>{const{maxHeight:y}=n,x=w(o);if(Jt(y)&&y>0)return x;const b=w(t)+w(f)+w(h);return Math.min(x,b)}),c=y=>y.width,u=V(()=>c_(w(i).map(c))),d=V(()=>c_(w(r).map(c))),f=V(()=>c_(n.headerHeight)),h=V(()=>{var y;return(((y=n.fixedData)==null?void 0:y.length)||0)*n.rowHeight}),p=V(()=>w(o)-w(f)-w(h)),m=V(()=>{const{style:y={},height:x,width:b}=n;return Rh({...y,height:x,width:b})}),v=V(()=>Rh({height:n.footerHeight})),g=V(()=>({top:Hr(w(f)),bottom:Hr(n.footerHeight),width:Hr(n.width)}));return{bodyWidth:s,fixedTableHeight:l,mainTableHeight:o,leftTableWidth:u,rightTableWidth:d,headerWidth:a,windowHeight:p,footerHeight:v,emptyStyle:g,rootStyle:m,headerHeight:f}};function W6e(n){const e=ae(),t=ae(),i=ae(),{columns:r,columnsStyles:s,columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=O6e(n,Ii(n,"columns"),Ii(n,"fixed")),{scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g,scrollPos:y}=U6e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:oe}),x=St("table-v2"),b=Nn(),A=Ui(!1),{expandedRowKeys:S,lastRenderedRowIndex:C,isDynamic:_,isResetting:M,rowHeights:T,resetAfterIndex:E,onRowExpanded:I,onRowHeightChange:L,onRowHovered:F,onRowsRendered:B}=z6e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:b,ns:x,isScrolling:A}),{data:P,depthMap:z}=V6e(n,{expandedRowKeys:S,lastRenderedRowIndex:C,resetAfterIndex:E}),O=V(()=>{const{estimatedRowHeight:ne,rowHeight:Xe}=n,ke=w(P);return Jt(ne)?Object.values(w(T)).reduce((Ge,He)=>Ge+He,0):ke.length*Xe}),{bodyWidth:N,fixedTableHeight:H,mainTableHeight:q,leftTableWidth:te,rightTableWidth:Q,headerWidth:ee,windowHeight:de,footerHeight:J,emptyStyle:ue,rootStyle:Te,headerHeight:De}=G6e(n,{columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,rowsHeight:O}),Le=ae(),Ne=V(()=>{const ne=w(P).length===0;return Mt(n.fixedData)?n.fixedData.length===0&&ne:ne});function Y(ne){const{estimatedRowHeight:Xe,rowHeight:ke,rowKey:Ge}=n;return Xe?w(T)[w(P)[ne][Ge]]||Xe:ke}function oe(){const{onEndReached:ne}=n;if(!ne)return;const{scrollTop:Xe}=w(y),ke=w(O),Ge=w(de),He=ke-(Xe+Ge)+n.hScrollbarSize;w(C)>=0&&ke===Xe+w(q)-w(De)&&ne(He)}return pt(()=>n.expandedRowKeys,ne=>S.value=ne,{deep:!0}),{columns:r,containerRef:Le,mainTableRef:e,leftTableRef:t,rightTableRef:i,isDynamic:_,isResetting:M,isScrolling:A,hasFixedColumns:c,columnsStyles:s,columnsTotalWidth:a,data:P,expandedRowKeys:S,depthMap:z,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:N,emptyStyle:ue,rootStyle:Te,headerWidth:ee,footerHeight:J,mainTableHeight:q,fixedTableHeight:H,leftTableWidth:te,rightTableWidth:Q,showEmpty:Ne,getRowHeight:Y,onColumnSorted:d,onRowHovered:F,onRowExpanded:I,onRowsRendered:B,onRowHeightChange:L,scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g}}const qk=Symbol("tableV2"),eee=String,SA={type:Ke(Array),required:!0},Kk={type:Ke(Array)},tee={...Kk,required:!0},q6e=String,cz={type:Ke(Array),default:()=>Br([])},w0={type:Number,required:!0},nee={type:Ke([String,Number,Symbol]),default:"id"},uz={type:Ke(Object)},L0=Et({class:String,columns:SA,columnsStyles:{type:Ke(Object),required:!0},depth:Number,expandColumnKey:q6e,estimatedRowHeight:{...X0.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Ke(Function)},onRowHover:{type:Ke(Function)},onRowHeightChange:{type:Ke(Function)},rowData:{type:Ke(Object),required:!0},rowEventHandlers:{type:Ke(Object)},rowIndex:{type:Number,required:!0},rowKey:nee,style:{type:Ke(Object)}}),O5={type:Number,required:!0},Yk=Et({class:String,columns:SA,fixedHeaderData:{type:Ke(Array)},headerData:{type:Ke(Array),required:!0},headerHeight:{type:Ke([Number,Array]),default:50},rowWidth:O5,rowHeight:{type:Number,default:50},height:O5,width:O5}),u_=Et({columns:SA,data:tee,fixedData:Kk,estimatedRowHeight:L0.estimatedRowHeight,width:w0,height:w0,headerWidth:w0,headerHeight:Yk.headerHeight,bodyWidth:w0,rowHeight:w0,cache:SJ.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:X0.scrollbarAlwaysOn,scrollbarStartGap:X0.scrollbarStartGap,scrollbarEndGap:X0.scrollbarEndGap,class:eee,style:uz,containerStyle:uz,getRowHeight:{type:Ke(Function),required:!0},rowKey:L0.rowKey,onRowsRendered:{type:Ke(Function)},onScroll:{type:Ke(Function)}}),K6e=Et({cache:u_.cache,estimatedRowHeight:L0.estimatedRowHeight,rowKey:nee,headerClass:{type:Ke([String,Function])},headerProps:{type:Ke([Object,Function])},headerCellProps:{type:Ke([Object,Function])},headerHeight:Yk.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Ke([String,Function])},rowProps:{type:Ke([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Ke([Object,Function])},columns:SA,data:tee,dataGetter:{type:Ke(Function)},fixedData:Kk,expandColumnKey:L0.expandColumnKey,expandedRowKeys:cz,defaultExpandedRowKeys:cz,class:eee,fixed:Boolean,style:{type:Ke(Object)},width:w0,height:w0,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:X0.hScrollbarSize,vScrollbarSize:X0.vScrollbarSize,scrollbarAlwaysOn:MJ.alwaysOn,sortBy:{type:Ke(Object),default:()=>({})},sortState:{type:Ke(Object),default:void 0},onColumnSort:{type:Ke(Function)},onExpandedRowsChange:{type:Ke(Function)},onEndReached:{type:Ke(Function)},onRowExpand:L0.onRowExpand,onScroll:u_.onScroll,onRowsRendered:u_.onRowsRendered,rowEventHandlers:L0.rowEventHandlers}),Y6e="ElTableV2Header",X6e=Ie({name:Y6e,props:Yk,setup(n,{slots:e,expose:t}){const i=St("table-v2"),r=Nt("tableV2GridScrollLeft"),s=ae(),a=V(()=>Rh({width:n.width,height:n.height})),o=V(()=>Rh({width:n.rowWidth,height:n.height})),l=V(()=>Xa(w(n.headerHeight))),c=f=>{const h=w(s);Yt(()=>{h!=null&&h.scroll&&h.scroll({left:f})})},u=()=>{const f=i.e("fixed-header-row"),{columns:h,fixedHeaderData:p,rowHeight:m}=n;return p==null?void 0:p.map((v,g)=>{var y;const x=Rh({height:m,width:"100%"});return(y=e.fixed)==null?void 0:y.call(e,{class:f,columns:h,rowData:v,rowIndex:-(g+1),style:x})})},d=()=>{const f=i.e("dynamic-header-row"),{columns:h}=n;return w(l).map((p,m)=>{var v;const g=Rh({width:"100%",height:p});return(v=e.dynamic)==null?void 0:v.call(e,{class:f,columns:h,headerIndex:m,style:g})})};return au(()=>{r!=null&&r.value&&c(r.value)}),t({scrollToLeft:c}),()=>{if(!(n.height<=0))return _e("div",{ref:s,class:n.class,style:w(a),role:"rowgroup"},[_e("div",{style:w(o),class:i.e("header")},[d(),u()])])}}});var j6e=X6e;const $6e=({atXEndEdge:n,atXStartEdge:e,atYEndEdge:t,atYStartEdge:i},r)=>{let s=null,a=0,o=0;const l=(u,d)=>{const f=u<=0&&e.value||u>=0&&n.value,h=d<=0&&i.value||d>=0&&t.value;return f&&h};return{hasReachedEdge:l,onWheel:u=>{om(s);let d=u.deltaX,f=u.deltaY;Math.abs(d)>Math.abs(f)?f=0:d=0,u.shiftKey&&f!==0&&(d=f,f=0),!(l(a,o)&&l(a+d,o+f))&&(a+=d,o+=f,u.preventDefault(),s=tp(()=>{r(a,o),a=0,o=0}))}}},iee=({name:n,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:r,getEstimatedTotalHeight:s,getEstimatedTotalWidth:a,getColumnOffset:o,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:f,injectToInstance:h,validateProps:p})=>Ie({name:n??"ElVirtualList",props:X0,emits:[wC,SC],setup(m,{emit:v,expose:g,slots:y}){const x=St("vl");p(m);const b=Nn(),A=ae(f(m,b));h==null||h(b,A);const S=ae(),C=ae(),_=ae(),M=ae(null),T=ae({isScrolling:!1,scrollLeft:Jt(m.initScrollLeft)?m.initScrollLeft:0,scrollTop:Jt(m.initScrollTop)?m.initScrollTop:0,updateRequested:!1,xAxisScrollDir:xg,yAxisScrollDir:xg}),E=xJ(),I=V(()=>Number.parseInt(`${m.height}`,10)),L=V(()=>Number.parseInt(`${m.width}`,10)),F=V(()=>{const{totalColumn:Ge,totalRow:He,columnCache:qe}=m,{isScrolling:tt,xAxisScrollDir:pe,scrollLeft:G}=w(T);if(Ge===0||He===0)return[0,0,0,0];const Z=i(m,G,w(A)),ge=r(m,Z,G,w(A)),Oe=!tt||pe===_C?Math.max(1,qe):1,je=!tt||pe===xg?Math.max(1,qe):1;return[Math.max(0,Z-Oe),Math.max(0,Math.min(Ge-1,ge+je)),Z,ge]}),B=V(()=>{const{totalColumn:Ge,totalRow:He,rowCache:qe}=m,{isScrolling:tt,yAxisScrollDir:pe,scrollTop:G}=w(T);if(Ge===0||He===0)return[0,0,0,0];const Z=u(m,G,w(A)),ge=d(m,Z,G,w(A)),Oe=!tt||pe===_C?Math.max(1,qe):1,je=!tt||pe===xg?Math.max(1,qe):1;return[Math.max(0,Z-Oe),Math.max(0,Math.min(He-1,ge+je)),Z,ge]}),P=V(()=>s(m,w(A))),z=V(()=>a(m,w(A))),O=V(()=>{var Ge;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:m.direction,height:Jt(m.height)?`${m.height}px`:m.height,width:Jt(m.width)?`${m.width}px`:m.width},(Ge=m.style)!=null?Ge:{}]}),N=V(()=>{const Ge=`${w(z)}px`;return{height:`${w(P)}px`,pointerEvents:w(T).isScrolling?"none":void 0,width:Ge}}),H=()=>{const{totalColumn:Ge,totalRow:He}=m;if(Ge>0&&He>0){const[ge,Oe,je,bt]=w(F),[At,Ee,gt,lt]=w(B);v(wC,{columnCacheStart:ge,columnCacheEnd:Oe,rowCacheStart:At,rowCacheEnd:Ee,columnVisibleStart:je,columnVisibleEnd:bt,rowVisibleStart:gt,rowVisibleEnd:lt})}const{scrollLeft:qe,scrollTop:tt,updateRequested:pe,xAxisScrollDir:G,yAxisScrollDir:Z}=w(T);v(SC,{xAxisScrollDir:G,scrollLeft:qe,yAxisScrollDir:Z,scrollTop:tt,updateRequested:pe})},q=Ge=>{const{clientHeight:He,clientWidth:qe,scrollHeight:tt,scrollLeft:pe,scrollTop:G,scrollWidth:Z}=Ge.currentTarget,ge=w(T);if(ge.scrollTop===G&&ge.scrollLeft===pe)return;let Oe=pe;if(XU(m.direction))switch(MC()){case px:Oe=-pe;break;case zk:Oe=Z-qe-pe;break}T.value={...ge,isScrolling:!0,scrollLeft:Oe,scrollTop:Math.max(0,Math.min(G,tt-He)),updateRequested:!0,xAxisScrollDir:P0(ge.scrollLeft,Oe),yAxisScrollDir:P0(ge.scrollTop,G)},Yt(()=>Te()),De(),H()},te=(Ge,He)=>{const qe=w(I),tt=(P.value-qe)/He*Ge;de({scrollTop:Math.min(P.value-qe,tt)})},Q=(Ge,He)=>{const qe=w(L),tt=(z.value-qe)/He*Ge;de({scrollLeft:Math.min(z.value-qe,tt)})},{onWheel:ee}=$6e({atXStartEdge:V(()=>T.value.scrollLeft<=0),atXEndEdge:V(()=>T.value.scrollLeft>=z.value-w(L)),atYStartEdge:V(()=>T.value.scrollTop<=0),atYEndEdge:V(()=>T.value.scrollTop>=P.value-w(I))},(Ge,He)=>{var qe,tt,pe,G;(tt=(qe=C.value)==null?void 0:qe.onMouseUp)==null||tt.call(qe),(G=(pe=_.value)==null?void 0:pe.onMouseUp)==null||G.call(pe);const Z=w(L),ge=w(I);de({scrollLeft:Math.min(T.value.scrollLeft+Ge,z.value-Z),scrollTop:Math.min(T.value.scrollTop+He,P.value-ge)})});Li(S,"wheel",ee,{passive:!1});const de=({scrollLeft:Ge=T.value.scrollLeft,scrollTop:He=T.value.scrollTop})=>{Ge=Math.max(Ge,0),He=Math.max(He,0);const qe=w(T);He===qe.scrollTop&&Ge===qe.scrollLeft||(T.value={...qe,xAxisScrollDir:P0(qe.scrollLeft,Ge),yAxisScrollDir:P0(qe.scrollTop,He),scrollLeft:Ge,scrollTop:He,updateRequested:!0},Yt(()=>Te()),De(),H())},J=(Ge=0,He=0,qe=nc)=>{const tt=w(T);He=Math.max(0,Math.min(He,m.totalColumn-1)),Ge=Math.max(0,Math.min(Ge,m.totalRow-1));const pe=mQ(x.namespace.value),G=w(A),Z=s(m,G),ge=a(m,G);de({scrollLeft:o(m,He,qe,tt.scrollLeft,G,ge>m.width?pe:0),scrollTop:l(m,Ge,qe,tt.scrollTop,G,Z>m.height?pe:0)})},ue=(Ge,He)=>{const{columnWidth:qe,direction:tt,rowHeight:pe}=m,G=E.value(e&&qe,e&&pe,e&&tt),Z=`${Ge},${He}`;if(vi(G,Z))return G[Z];{const[,ge]=t(m,He,w(A)),Oe=w(A),je=XU(tt),[bt,At]=c(m,Ge,Oe),[Ee]=t(m,He,Oe);return G[Z]={position:"absolute",left:je?void 0:`${ge}px`,right:je?`${ge}px`:void 0,top:`${At}px`,height:`${bt}px`,width:`${Ee}px`},G[Z]}},Te=()=>{T.value.isScrolling=!1,Yt(()=>{E.value(-1,null,null)})};Mn(()=>{if(!li)return;const{initScrollLeft:Ge,initScrollTop:He}=m,qe=w(S);qe&&(Jt(Ge)&&(qe.scrollLeft=Ge),Jt(He)&&(qe.scrollTop=He)),H()});const De=()=>{const{direction:Ge}=m,{scrollLeft:He,scrollTop:qe,updateRequested:tt}=w(T),pe=w(S);if(tt&&pe){if(Ge===qg)switch(MC()){case px:{pe.scrollLeft=-He;break}case Uk:{pe.scrollLeft=He;break}default:{const{clientWidth:G,scrollWidth:Z}=pe;pe.scrollLeft=Z-G-He;break}}else pe.scrollLeft=Math.max(0,He);pe.scrollTop=Math.max(0,qe)}},{resetAfterColumnIndex:Le,resetAfterRowIndex:Ne,resetAfter:Y}=b.proxy;g({windowRef:S,innerRef:M,getItemStyleCache:E,scrollTo:de,scrollToItem:J,states:T,resetAfterColumnIndex:Le,resetAfterRowIndex:Ne,resetAfter:Y});const oe=()=>{const{scrollbarAlwaysOn:Ge,scrollbarStartGap:He,scrollbarEndGap:qe,totalColumn:tt,totalRow:pe}=m,G=w(L),Z=w(I),ge=w(z),Oe=w(P),{scrollLeft:je,scrollTop:bt}=w(T),At=en(n8,{ref:C,alwaysOn:Ge,startGap:He,endGap:qe,class:x.e("horizontal"),clientSize:G,layout:"horizontal",onScroll:Q,ratio:G*100/ge,scrollFrom:je/(ge-G),total:pe,visible:!0}),Ee=en(n8,{ref:_,alwaysOn:Ge,startGap:He,endGap:qe,class:x.e("vertical"),clientSize:Z,layout:"vertical",onScroll:te,ratio:Z*100/Oe,scrollFrom:bt/(Oe-Z),total:tt,visible:!0});return{horizontalScrollbar:At,verticalScrollbar:Ee}},ne=()=>{var Ge;const[He,qe]=w(F),[tt,pe]=w(B),{data:G,totalColumn:Z,totalRow:ge,useIsScrolling:Oe,itemKey:je}=m,bt=[];if(ge>0&&Z>0)for(let At=tt;At<=pe;At++)for(let Ee=He;Ee<=qe;Ee++){const gt=je({columnIndex:Ee,data:G,rowIndex:At});bt.push(en(Kt,{key:gt},(Ge=y.default)==null?void 0:Ge.call(y,{columnIndex:Ee,data:G,isScrolling:Oe?w(T).isScrolling:void 0,style:ue(At,Ee),rowIndex:At})))}return bt},Xe=()=>{const Ge=On(m.innerElement),He=ne();return[en(Ge,{style:w(N),ref:M},qt(Ge)?He:{default:()=>He})]};return()=>{const Ge=On(m.containerElement),{horizontalScrollbar:He,verticalScrollbar:qe}=oe(),tt=Xe();return en("div",{key:0,class:x.e("wrapper"),role:m.role},[en(Ge,{class:m.className,style:w(O),onScroll:q,ref:S},qt(Ge)?tt:{default:()=>tt}),He,qe])}}}),{max:IC,min:ree,floor:see}=Math,Q6e={column:"columnWidth",row:"rowHeight"},p8={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Ud=(n,e,t,i)=>{const[r,s,a]=[t[i],n[Q6e[i]],t[p8[i]]];if(e>a){let o=0;if(a>=0){const l=r[a];o=l.offset+l.size}for(let l=a+1;l<=e;l++){const c=s(l);r[l]={offset:o,size:c},o+=c}t[p8[i]]=e}return r[e]},aee=(n,e,t,i,r,s)=>{for(;t<=i;){const a=t+see((i-t)/2),o=Ud(n,a,e,s).offset;if(o===r)return a;o<r?t=a+1:i=a-1}return IC(0,t-1)},Z6e=(n,e,t,i,r)=>{const s=r==="column"?n.totalColumn:n.totalRow;let a=1;for(;t<s&&Ud(n,t,e,r).offset<i;)t+=a,a*=2;return aee(n,e,see(t/2),ree(t,s-1),i,r)},dz=(n,e,t,i)=>{const[r,s]=[e[i],e[p8[i]]];return(s>0?r[s].offset:0)>=t?aee(n,e,0,s,t,i):Z6e(n,e,IC(0,s),t,i)},oee=({totalRow:n},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:i})=>{let r=0;if(t>=n&&(t=n-1),t>=0){const o=i[t];r=o.offset+o.size}const a=(n-t-1)*e;return r+a},lee=({totalColumn:n},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:i})=>{let r=0;if(i>n&&(i=n-1),i>=0){const o=e[i];r=o.offset+o.size}const a=(n-i-1)*t;return r+a},J6e={column:lee,row:oee},fz=(n,e,t,i,r,s,a)=>{const[o,l]=[s==="row"?n.height:n.width,J6e[s]],c=Ud(n,e,r,s),u=l(n,r),d=IC(0,ree(u-o,c.offset)),f=IC(0,c.offset-o+a+c.size);switch(t===TM&&(i>=f-o&&i<=d+o?t=nc:t=Nu),t){case fx:return d;case hx:return f;case Nu:return Math.round(f+(d-f)/2);case nc:default:return i>=f&&i<=d?i:f>d||i<f?f:d}},eIe=iee({name:"ElDynamicSizeGrid",getColumnPosition:(n,e,t)=>{const i=Ud(n,e,t,"column");return[i.size,i.offset]},getRowPosition:(n,e,t)=>{const i=Ud(n,e,t,"row");return[i.size,i.offset]},getColumnOffset:(n,e,t,i,r,s)=>fz(n,e,t,i,r,"column",s),getRowOffset:(n,e,t,i,r,s)=>fz(n,e,t,i,r,"row",s),getColumnStartIndexForOffset:(n,e,t)=>dz(n,t,e,"column"),getColumnStopIndexForStartIndex:(n,e,t,i)=>{const r=Ud(n,e,i,"column"),s=t+n.width;let a=r.offset+r.size,o=e;for(;o<n.totalColumn-1&&a<s;)o++,a+=Ud(n,e,i,"column").size;return o},getEstimatedTotalHeight:oee,getEstimatedTotalWidth:lee,getRowStartIndexForOffset:(n,e,t)=>dz(n,t,e,"row"),getRowStopIndexForStartIndex:(n,e,t,i)=>{const{totalRow:r,height:s}=n,a=Ud(n,e,i,"row"),o=t+s;let l=a.size+a.offset,c=e;for(;c<r-1&&l<o;)c++,l+=Ud(n,c,i,"row").size;return c},injectToInstance:(n,e)=>{const t=({columnIndex:s,rowIndex:a},o)=>{var l,c;o=bi(o)?!0:o,Jt(s)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,s-1)),Jt(a)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,a-1)),(l=n.exposed)==null||l.getItemStyleCache.value(-1,null,null),o&&((c=n.proxy)==null||c.$forceUpdate())},i=(s,a)=>{t({columnIndex:s},a)},r=(s,a)=>{t({rowIndex:s},a)};Object.assign(n.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:r,resetAfter:t})},initCache:({estimatedColumnWidth:n=$D,estimatedRowHeight:e=$D})=>({column:{},estimatedColumnWidth:n,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:n,rowHeight:e})=>{}}),tIe=iee({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:n},e)=>[n,e*n],getRowPosition:({rowHeight:n},e)=>[n,e*n],getEstimatedTotalHeight:({totalRow:n,rowHeight:e})=>e*n,getEstimatedTotalWidth:({totalColumn:n,columnWidth:e})=>e*n,getColumnOffset:({totalColumn:n,columnWidth:e,width:t},i,r,s,a,o)=>{t=Number(t);const l=Math.max(0,n*e-t),c=Math.min(l,i*e),u=Math.max(0,i*e-t+o+e);switch(r==="smart"&&(s>=u-t&&s<=c+t?r=nc:r=Nu),r){case fx:return c;case hx:return u;case Nu:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case nc:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getRowOffset:({rowHeight:n,height:e,totalRow:t},i,r,s,a,o)=>{e=Number(e);const l=Math.max(0,t*n-e),c=Math.min(l,i*n),u=Math.max(0,i*n-e+o+n);switch(r===TM&&(s>=u-e&&s<=c+e?r=nc:r=Nu),r){case fx:return c;case hx:return u;case Nu:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case nc:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getColumnStartIndexForOffset:({columnWidth:n,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getColumnStopIndexForStartIndex:({columnWidth:n,totalColumn:e,width:t},i,r)=>{const s=i*n,a=Math.ceil((t+r-s)/n);return Math.max(0,Math.min(e-1,i+a-1))},getRowStartIndexForOffset:({rowHeight:n,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getRowStopIndexForStartIndex:({rowHeight:n,totalRow:e,height:t},i,r)=>{const s=i*n,a=Math.ceil((t+r-s)/n);return Math.max(0,Math.min(e-1,i+a-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:n,rowHeight:e})=>{}}),nIe="ElTableV2Grid",iIe=n=>{const e=ae(),t=ae(),i=ae(0),r=V(()=>{const{data:v,rowHeight:g,estimatedRowHeight:y}=n;if(!y)return v.length*g}),s=V(()=>{const{fixedData:v,rowHeight:g}=n;return((v==null?void 0:v.length)||0)*g}),a=V(()=>c_(n.headerHeight)),o=V(()=>{const{height:v}=n;return Math.max(0,v-w(a)-w(s))}),l=V(()=>w(a)+w(s)>0),c=({data:v,rowIndex:g})=>v[g][n.rowKey];function u({rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:y,rowVisibleEnd:x}){var b;(b=n.onRowsRendered)==null||b.call(n,{rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:y,rowVisibleEnd:x})}function d(v,g){var y;(y=t.value)==null||y.resetAfterRowIndex(v,g)}function f(v,g){const y=w(e),x=w(t);Rn(v)?(y==null||y.scrollToLeft(v.scrollLeft),i.value=v.scrollLeft,x==null||x.scrollTo(v)):(y==null||y.scrollToLeft(v),i.value=v,x==null||x.scrollTo({scrollLeft:v,scrollTop:g}))}function h(v){var g;(g=w(t))==null||g.scrollTo({scrollTop:v})}function p(v,g){var y;(y=w(t))==null||y.scrollToItem(v,1,g)}function m(){var v,g;(v=w(t))==null||v.$forceUpdate(),(g=w(e))==null||g.$forceUpdate()}return pt(()=>n.bodyWidth,()=>{var v;Jt(n.estimatedRowHeight)&&((v=t.value)==null||v.resetAfter({columnIndex:0},!1))}),{bodyRef:t,forceUpdate:m,fixedRowHeight:s,gridHeight:o,hasHeader:l,headerHeight:a,headerRef:e,totalHeight:r,itemKey:c,onItemRendered:u,resetAfterRowIndex:d,scrollTo:f,scrollToTop:h,scrollToRow:p,scrollLeft:i}},rIe=Ie({name:nIe,props:u_,setup(n,{slots:e,expose:t}){const{ns:i}=Nt(qk),{bodyRef:r,fixedRowHeight:s,gridHeight:a,hasHeader:o,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:f,onItemRendered:h,resetAfterRowIndex:p,scrollTo:m,scrollToTop:v,scrollToRow:g,scrollLeft:y}=iIe(n);Qn("tableV2GridScrollLeft",y),t({forceUpdate:d,totalHeight:u,scrollTo:m,scrollToTop:v,scrollToRow:g,resetAfterRowIndex:p});const x=()=>n.bodyWidth;return()=>{const{cache:b,columns:A,data:S,fixedData:C,useIsScrolling:_,scrollbarAlwaysOn:M,scrollbarEndGap:T,scrollbarStartGap:E,style:I,rowHeight:L,bodyWidth:F,estimatedRowHeight:B,headerWidth:P,height:z,width:O,getRowHeight:N,onScroll:H}=n,q=Jt(B),te=q?eIe:tIe,Q=w(c);return _e("div",{role:"table",class:[i.e("table"),n.class],style:I},[_e(te,{ref:r,data:S,useIsScrolling:_,itemKey:f,columnCache:0,columnWidth:q?x:F,totalColumn:1,totalRow:S.length,rowCache:b,rowHeight:q?N:L,width:O,height:w(a),class:i.e("body"),role:"rowgroup",scrollbarStartGap:E,scrollbarEndGap:T,scrollbarAlwaysOn:M,onScroll:H,onItemRendered:h,perfMode:!1},{default:ee=>{var de;const J=S[ee.rowIndex];return(de=e.row)==null?void 0:de.call(e,{...ee,columns:A,rowData:J})}}),w(o)&&_e(j6e,{ref:l,class:i.e("header-wrapper"),columns:A,headerData:S,headerHeight:n.headerHeight,fixedHeaderData:C,rowWidth:P,rowHeight:L,width:O,height:Math.min(Q+w(s),z)},{dynamic:e.header,fixed:e.row})])}}});var Xk=rIe;function sIe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!mr(n)}const aIe=(n,{slots:e})=>{const{mainTableRef:t,...i}=n;return _e(Xk,Kn({ref:t},i),sIe(e)?e:{default:()=>[e]})};var oIe=aIe;function lIe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!mr(n)}const cIe=(n,{slots:e})=>{if(!n.columns.length)return;const{leftTableRef:t,...i}=n;return _e(Xk,Kn({ref:t},i),lIe(e)?e:{default:()=>[e]})};var uIe=cIe;function dIe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!mr(n)}const fIe=(n,{slots:e})=>{if(!n.columns.length)return;const{rightTableRef:t,...i}=n;return _e(Xk,Kn({ref:t},i),dIe(e)?e:{default:()=>[e]})};var hIe=fIe;const pIe=n=>{const{isScrolling:e}=Nt(qk),t=ae(!1),i=ae(),r=V(()=>Jt(n.estimatedRowHeight)&&n.rowIndex>=0),s=(l=!1)=>{const c=w(i);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:f,rowIndex:h,style:p}=n,{height:m}=c.getBoundingClientRect();t.value=!0,Yt(()=>{if(l||m!==Number.parseInt(p.height)){const v=u[0],g=(v==null?void 0:v.placeholderSign)===yx;d==null||d({rowKey:f,height:m,rowIndex:h},v&&!g&&v.fixed)}})},a=V(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=n,f=n.rowEventHandlers||{},h={};return Object.entries(f).forEach(([p,m])=>{Xt(m)&&(h[p]=v=>{m({event:v,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:p,hovered:m})=>{const v=h[p];h[p]=g=>{d({event:g,hovered:m,rowData:l,rowIndex:c,rowKey:u}),v==null||v(g)}}),h}),o=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:f}=n;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:f})};return Mn(()=>{w(r)&&s(!0)}),{isScrolling:e,measurable:r,measured:t,rowRef:i,eventHandlers:a,onExpand:o}},mIe="ElTableV2TableRow",vIe=Ie({name:mIe,props:L0,setup(n,{expose:e,slots:t,attrs:i}){const{eventHandlers:r,isScrolling:s,measurable:a,measured:o,rowRef:l,onExpand:c}=pIe(n);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:f,depth:h,rowData:p,rowIndex:m,style:v}=n;let g=u.map((y,x)=>{const b=Mt(p.children)&&p.children.length>0&&y.key===f;return t.cell({column:y,columns:u,columnIndex:x,depth:h,style:d[y.key],rowData:p,rowIndex:m,isScrolling:w(s),expandIconProps:b?{rowData:p,rowIndex:m,onExpand:c}:void 0})});if(t.row&&(g=t.row({cells:g.map(y=>Mt(y)&&y.length===1?y[0]:y),style:v,columns:u,depth:h,rowData:p,rowIndex:m,isScrolling:w(s)})),w(a)){const{height:y,...x}=v||{},b=w(o);return _e("div",Kn({ref:l,class:n.class,style:b?v:x,role:"row"},i,w(r)),[g])}return _e("div",Kn(i,{ref:l,class:n.class,style:v,role:"row"},w(r)),[g])}}});var gIe=vIe;function yIe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!mr(n)}const bIe=(n,{slots:e})=>{const{columns:t,columnsStyles:i,depthMap:r,expandColumnKey:s,expandedRowKeys:a,estimatedRowHeight:o,hasFixedColumns:l,rowData:c,rowIndex:u,style:d,isScrolling:f,rowProps:h,rowClass:p,rowKey:m,rowEventHandlers:v,ns:g,onRowHovered:y,onRowExpanded:x}=n,b=cm(p,{columns:t,rowData:c,rowIndex:u},""),A=cm(h,{columns:t,rowData:c,rowIndex:u}),S=c[m],C=r[S]||0,_=!!s,M=u<0,T=[g.e("row"),b,{[g.e(`row-depth-${C}`)]:_&&u>=0,[g.is("expanded")]:_&&a.includes(S),[g.is("fixed")]:!C&&M,[g.is("customized")]:!!e.row}],E=l?y:void 0,I={...A,columns:t,columnsStyles:i,class:T,depth:C,expandColumnKey:s,estimatedRowHeight:M?void 0:o,isScrolling:f,rowIndex:u,rowData:c,rowKey:S,rowEventHandlers:v,style:d};return _e(gIe,Kn(I,{onRowExpand:x,onMouseenter:B=>{E==null||E({hovered:!0,rowKey:S,event:B,rowData:c,rowIndex:u})},onMouseleave:B=>{E==null||E({hovered:!1,rowKey:S,event:B,rowData:c,rowIndex:u})},rowkey:S}),yIe(e)?e:{default:()=>[e]})};var xIe=bIe;const jk=(n,{slots:e})=>{var t;const{cellData:i,style:r}=n,s=((t=i==null?void 0:i.toString)==null?void 0:t.call(i))||"",a=Qe(e,"default",n,()=>[s]);return _e("div",{class:n.class,title:s,style:r},[a])};jk.displayName="ElTableV2Cell";jk.inheritAttrs=!1;var AIe=jk;const wIe=n=>{const{expanded:e,expandable:t,onExpand:i,style:r,size:s}=n,a={onClick:t?()=>i(!e):void 0,class:n.class};return _e(Ut,Kn(a,{size:s,style:r}),{default:()=>[_e(xo,null,null)]})};var SIe=wIe;const cee=({columns:n,column:e,columnIndex:t,depth:i,expandIconProps:r,isScrolling:s,rowData:a,rowIndex:o,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:f,indentSize:h,iconSize:p,rowKey:m},{slots:v})=>{const g=Rh(l);if(e.placeholderSign===yx)return _e("div",{class:u.em("row-cell","placeholder"),style:g},null);const{cellRenderer:y,dataKey:x,dataGetter:b}=e,A=Xt(b)?b({columns:n,column:e,columnIndex:t,rowData:a,rowIndex:o}):fs(a,x??""),S=cm(d,{cellData:A,columns:n,column:e,columnIndex:t,rowIndex:o,rowData:a}),C={class:u.e("cell-text"),columns:n,column:e,columnIndex:t,cellData:A,isScrolling:s,rowData:a,rowIndex:o},_=JJ(y),M=_?_(C):Qe(v,"default",C,()=>[_e(AIe,C,null)]),T=[u.e("row-cell"),e.class,e.align===gx.CENTER&&u.is("align-center"),e.align===gx.RIGHT&&u.is("align-right")],E=o>=0&&f&&e.key===f,I=o>=0&&c.includes(a[m]);let L;const F=`margin-inline-start: ${i*h}px;`;return E&&(Rn(r)?L=_e(SIe,Kn(r,{class:[u.e("expand-icon"),u.is("expanded",I)],size:p,expanded:I,style:F,expandable:!0}),null):L=_e("div",{style:[F,`width: ${p}px; height: ${p}px;`].join(" ")},null)),_e("div",Kn({class:T,style:g},S,{role:"cell"}),[L,M])};cee.inheritAttrs=!1;var hz=cee;const _Ie=Et({class:String,columns:SA,columnsStyles:{type:Ke(Object),required:!0},headerIndex:Number,style:{type:Ke(Object)}}),CIe=Ie({name:"ElTableV2HeaderRow",props:_Ie,setup(n,{slots:e}){return()=>{const{columns:t,columnsStyles:i,headerIndex:r,style:s}=n;let a=t.map((o,l)=>e.cell({columns:t,column:o,columnIndex:l,headerIndex:r,style:i[o.key]}));return e.header&&(a=e.header({cells:a.map(o=>Mt(o)&&o.length===1?o[0]:o),columns:t,headerIndex:r})),_e("div",{class:n.class,style:s,role:"row"},[a])}}});var MIe=CIe;function TIe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!mr(n)}const EIe=({columns:n,columnsStyles:e,headerIndex:t,style:i,headerClass:r,headerProps:s,ns:a},{slots:o})=>{const l={columns:n,headerIndex:t},c=[a.e("header-row"),cm(r,l,""),{[a.is("customized")]:!!o.header}],u={...cm(s,l),columnsStyles:e,class:c,columns:n,headerIndex:t,style:i};return _e(MIe,u,TIe(o)?o:{default:()=>[o]})};var IIe=EIe;const $k=(n,{slots:e})=>Qe(e,"default",n,()=>{var t,i;return[_e("div",{class:n.class,title:(t=n.column)==null?void 0:t.title},[(i=n.column)==null?void 0:i.title])]});$k.displayName="ElTableV2HeaderCell";$k.inheritAttrs=!1;var DIe=$k;const RIe=n=>{const{sortOrder:e}=n;return _e(Ut,{size:14,class:n.class},{default:()=>[e===vx.ASC?_e(Xge,null,null):_e(Kge,null,null)]})};var PIe=RIe;const LIe=(n,{slots:e})=>{const{column:t,ns:i,style:r,onColumnSorted:s}=n,a=Rh(r);if(t.placeholderSign===yx)return _e("div",{class:i.em("header-row-cell","placeholder"),style:a},null);const{headerCellRenderer:o,headerClass:l,sortable:c}=t,u={...n,class:i.e("header-cell-text")},d=JJ(o),f=d?d(u):Qe(e,"default",u,()=>[_e(DIe,u,null)]),{sortBy:h,sortState:p,headerCellProps:m}=n;let v,g;if(p){const b=p[t.key];v=!!h8[b],g=v?b:vx.ASC}else v=t.key===h.key,g=v?h.order:vx.ASC;const y=[i.e("header-cell"),cm(l,n,""),t.align===gx.CENTER&&i.is("align-center"),t.align===gx.RIGHT&&i.is("align-right"),c&&i.is("sortable")],x={...cm(m,n),onClick:t.sortable?s:void 0,class:y,style:a,"data-key":t.key};return _e("div",Kn(x,{role:"columnheader"}),[f,c&&_e(PIe,{class:[i.e("sort-icon"),v&&i.is("sorting")],sortOrder:g},null)])};var pz=LIe;const uee=(n,{slots:e})=>{var t;return _e("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};uee.displayName="ElTableV2Footer";var kIe=uee;const dee=(n,{slots:e})=>{const t=Qe(e,"default",{},()=>[_e(sJ,null,null)]);return _e("div",{class:n.class,style:n.style},[t])};dee.displayName="ElTableV2Empty";var FIe=dee;const fee=(n,{slots:e})=>{var t;return _e("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};fee.displayName="ElTableV2Overlay";var BIe=fee;function jy(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!mr(n)}const NIe="ElTableV2",OIe=Ie({name:NIe,props:K6e,setup(n,{slots:e,expose:t}){const i=St("table-v2"),{columnsStyles:r,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,mainColumns:o,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:f,depthMap:h,expandedRowKeys:p,hasFixedColumns:m,mainTableRef:v,leftTableRef:g,rightTableRef:y,isDynamic:x,isResetting:b,isScrolling:A,bodyWidth:S,emptyStyle:C,rootStyle:_,headerWidth:M,footerHeight:T,showEmpty:E,scrollTo:I,scrollToLeft:L,scrollToTop:F,scrollToRow:B,getRowHeight:P,onColumnSorted:z,onRowHeightChange:O,onRowHovered:N,onRowExpanded:H,onRowsRendered:q,onScroll:te,onVerticalScroll:Q}=W6e(n);return t({scrollTo:I,scrollToLeft:L,scrollToTop:F,scrollToRow:B}),Qn(qk,{ns:i,isResetting:b,isScrolling:A}),()=>{const{cache:ee,cellProps:de,estimatedRowHeight:J,expandColumnKey:ue,fixedData:Te,headerHeight:De,headerClass:Le,headerProps:Ne,headerCellProps:Y,sortBy:oe,sortState:ne,rowHeight:Xe,rowClass:ke,rowEventHandlers:Ge,rowKey:He,rowProps:qe,scrollbarAlwaysOn:tt,indentSize:pe,iconSize:G,useIsScrolling:Z,vScrollbarSize:ge,width:Oe}=n,je=w(f),bt={cache:ee,class:i.e("main"),columns:w(o),data:je,fixedData:Te,estimatedRowHeight:J,bodyWidth:w(S)+ge,headerHeight:De,headerWidth:w(M),height:w(l),mainTableRef:v,rowKey:He,rowHeight:Xe,scrollbarAlwaysOn:tt,scrollbarStartGap:2,scrollbarEndGap:ge,useIsScrolling:Z,width:Oe,getRowHeight:P,onRowsRendered:q,onScroll:te},At=w(u),Ee=w(c),gt={cache:ee,class:i.e("left"),columns:w(s),data:je,fixedData:Te,estimatedRowHeight:J,leftTableRef:g,rowHeight:Xe,bodyWidth:At,headerWidth:At,headerHeight:De,height:Ee,rowKey:He,scrollbarAlwaysOn:tt,scrollbarStartGap:2,scrollbarEndGap:ge,useIsScrolling:Z,width:At,getRowHeight:P,onScroll:Q},$=w(d)+ge,le={cache:ee,class:i.e("right"),columns:w(a),data:je,fixedData:Te,estimatedRowHeight:J,rightTableRef:y,rowHeight:Xe,bodyWidth:$,headerWidth:$,headerHeight:De,height:Ee,rowKey:He,scrollbarAlwaysOn:tt,scrollbarStartGap:2,scrollbarEndGap:ge,width:$,style:`--${w(i.namespace)}-table-scrollbar-size: ${ge}px`,useIsScrolling:Z,getRowHeight:P,onScroll:Q},fe=w(r),Me={ns:i,depthMap:w(h),columnsStyles:fe,expandColumnKey:ue,expandedRowKeys:w(p),estimatedRowHeight:J,hasFixedColumns:w(m),rowProps:qe,rowClass:ke,rowKey:He,rowEventHandlers:Ge,onRowHovered:N,onRowExpanded:H,onRowHeightChange:O},me={cellProps:de,expandColumnKey:ue,indentSize:pe,iconSize:G,rowKey:He,expandedRowKeys:w(p),ns:i},Ae={ns:i,headerClass:Le,headerProps:Ne,columnsStyles:fe},dt={ns:i,sortBy:oe,sortState:ne,headerCellProps:Y,onColumnSorted:z},we={row:wt=>_e(xIe,Kn(wt,Me),{row:e.row,cell:Ft=>{let Rt;return e.cell?_e(hz,Kn(Ft,me,{style:fe[Ft.column.key]}),jy(Rt=e.cell(Ft))?Rt:{default:()=>[Rt]}):_e(hz,Kn(Ft,me,{style:fe[Ft.column.key]}),null)}}),header:wt=>_e(IIe,Kn(wt,Ae),{header:e.header,cell:Ft=>{let Rt;return e["header-cell"]?_e(pz,Kn(Ft,dt,{style:fe[Ft.column.key]}),jy(Rt=e["header-cell"](Ft))?Rt:{default:()=>[Rt]}):_e(pz,Kn(Ft,dt,{style:fe[Ft.column.key]}),null)}})},_t=[n.class,i.b(),i.e("root"),{[i.is("dynamic")]:w(x)}],it={class:i.e("footer"),style:w(T)};return _e("div",{class:_t,style:w(_)},[_e(oIe,bt,jy(we)?we:{default:()=>[we]}),_e(uIe,gt,jy(we)?we:{default:()=>[we]}),_e(hIe,le,jy(we)?we:{default:()=>[we]}),e.footer&&_e(kIe,it,{default:e.footer}),w(E)&&_e(FIe,{class:i.e("empty"),style:w(C)},{default:e.empty}),e.overlay&&_e(BIe,{class:i.e("overlay")},{default:e.overlay})])}}});var UIe=OIe;const zIe=Et({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Ke(Function)}}),VIe=n=>{const e=ae(),t=ae(0),i=ae(0);let r;return Mn(()=>{r=Fr(e,([s])=>{const{width:a,height:o}=s.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(s.target),f=Number.parseInt(l)||0,h=Number.parseInt(c)||0,p=Number.parseInt(u)||0,m=Number.parseInt(d)||0;t.value=a-f-h,i.value=o-p-m}).stop}),Fi(()=>{r==null||r()}),pt([t,i],([s,a])=>{var o;(o=n.onResize)==null||o.call(n,{width:s,height:a})}),{sizer:e,width:t,height:i}},HIe=Ie({name:"ElAutoResizer",props:zIe,setup(n,{slots:e}){const t=St("auto-resizer"),{height:i,width:r,sizer:s}=VIe(n),a={width:"100%",height:"100%"};return()=>{var o;return _e("div",{ref:s,class:t.b(),style:a},[(o=e.default)==null?void 0:o.call(e,{height:i.value,width:r.value})])}}});var GIe=HIe;const WIe=xn(UIe),qIe=xn(GIe),EM=Symbol("tabsRootContextKey"),KIe=Et({tabs:{type:Ke(Array),default:()=>Br([])}}),hee="ElTabBar",YIe=Ie({name:hee}),XIe=Ie({...YIe,props:KIe,setup(n,{expose:e}){const t=n,i=Nn(),r=Nt(EM);r||Rs(hee,"<el-tabs><el-tab-bar /></el-tabs>");const s=St("tabs"),a=ae(),o=ae(),l=()=>{let h=0,p=0;const m=["top","bottom"].includes(r.props.tabPosition)?"width":"height",v=m==="width"?"x":"y",g=v==="x"?"left":"top";return t.tabs.every(y=>{var x,b;const A=(b=(x=i.parent)==null?void 0:x.refs)==null?void 0:b[`tab-${y.uid}`];if(!A)return!1;if(!y.active)return!0;h=A[`offset${ku(g)}`],p=A[`client${ku(m)}`];const S=window.getComputedStyle(A);return m==="width"&&(p-=Number.parseFloat(S.paddingLeft)+Number.parseFloat(S.paddingRight),h+=Number.parseFloat(S.paddingLeft)),!1}),{[m]:`${p}px`,transform:`translate${ku(v)}(${h}px)`}},c=()=>o.value=l(),u=[],d=()=>{var h;u.forEach(m=>m.stop()),u.length=0;const p=(h=i.parent)==null?void 0:h.refs;if(p){for(const m in p)if(m.startsWith("tab-")){const v=p[m];v&&u.push(Fr(v,c))}}};pt(()=>t.tabs,async()=>{await Yt(),c(),d()},{immediate:!0});const f=Fr(a,()=>c());return Fi(()=>{u.forEach(h=>h.stop()),u.length=0,f.stop()}),e({ref:a,update:c}),(h,p)=>(W(),ve("div",{ref_key:"barRef",ref:a,class:j([w(s).e("active-bar"),w(s).is(w(r).props.tabPosition)]),style:jt(o.value)},null,6))}});var jIe=It(XIe,[["__file","tab-bar.vue"]]);const $Ie=Et({panes:{type:Ke(Array),default:()=>Br([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),QIe={tabClick:(n,e,t)=>t instanceof Event,tabRemove:(n,e)=>e instanceof Event},mz="ElTabNav",ZIe=Ie({name:mz,props:$Ie,emits:QIe,setup(n,{expose:e,emit:t}){const i=Nt(EM);i||Rs(mz,"<el-tabs><tab-nav /></el-tabs>");const r=St("tabs"),s=uve(),a=wve(),o=ae(),l=ae(),c=ae(),u=ae(),d=ae(!1),f=ae(0),h=ae(!1),p=ae(!0),m=V(()=>["top","bottom"].includes(i.props.tabPosition)?"width":"height"),v=V(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${f.value}px)`})),g=()=>{if(!o.value)return;const _=o.value[`offset${ku(m.value)}`],M=f.value;if(!M)return;const T=M>_?M-_:0;f.value=T},y=()=>{if(!o.value||!l.value)return;const _=l.value[`offset${ku(m.value)}`],M=o.value[`offset${ku(m.value)}`],T=f.value;if(_-T<=M)return;const E=_-T>M*2?T+M:_-M;f.value=E},x=async()=>{const _=l.value;if(!d.value||!c.value||!o.value||!_)return;await Yt();const M=c.value.querySelector(".is-active");if(!M)return;const T=o.value,E=["top","bottom"].includes(i.props.tabPosition),I=M.getBoundingClientRect(),L=T.getBoundingClientRect(),F=E?_.offsetWidth-L.width:_.offsetHeight-L.height,B=f.value;let P=B;E?(I.left<L.left&&(P=B-(L.left-I.left)),I.right>L.right&&(P=B+I.right-L.right)):(I.top<L.top&&(P=B-(L.top-I.top)),I.bottom>L.bottom&&(P=B+(I.bottom-L.bottom))),P=Math.max(P,0),f.value=Math.min(P,F)},b=()=>{var _;if(!l.value||!o.value)return;n.stretch&&((_=u.value)==null||_.update());const M=l.value[`offset${ku(m.value)}`],T=o.value[`offset${ku(m.value)}`],E=f.value;T<M?(d.value=d.value||{},d.value.prev=E,d.value.next=E+T<M,M-E<T&&(f.value=M-T)):(d.value=!1,E>0&&(f.value=0))},A=_=>{let M=0;switch(_.code){case kt.left:case kt.up:M=-1;break;case kt.right:case kt.down:M=1;break;default:return}const T=Array.from(_.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let I=T.indexOf(_.target)+M;I<0?I=T.length-1:I>=T.length&&(I=0),T[I].focus({preventScroll:!0}),T[I].click(),S()},S=()=>{p.value&&(h.value=!0)},C=()=>h.value=!1;return pt(s,_=>{_==="hidden"?p.value=!1:_==="visible"&&setTimeout(()=>p.value=!0,50)}),pt(a,_=>{_?setTimeout(()=>p.value=!0,50):p.value=!1}),Fr(c,b),Mn(()=>setTimeout(()=>x(),0)),au(()=>b()),e({scrollToActiveTab:x,removeFocus:C}),()=>{const _=d.value?[_e("span",{class:[r.e("nav-prev"),r.is("disabled",!d.value.prev)],onClick:g},[_e(Ut,null,{default:()=>[_e(np,null,null)]})]),_e("span",{class:[r.e("nav-next"),r.is("disabled",!d.value.next)],onClick:y},[_e(Ut,null,{default:()=>[_e(xo,null,null)]})])]:null,M=n.panes.map((T,E)=>{var I,L,F,B;const P=T.uid,z=T.props.disabled,O=(L=(I=T.props.name)!=null?I:T.index)!=null?L:`${E}`,N=!z&&(T.isClosable||n.editable);T.index=`${E}`;const H=N?_e(Ut,{class:"is-icon-close",onClick:Q=>t("tabRemove",T,Q)},{default:()=>[_e(nu,null,null)]}):null,q=((B=(F=T.slots).label)==null?void 0:B.call(F))||T.props.label,te=!z&&T.active?0:-1;return _e("div",{ref:`tab-${P}`,class:[r.e("item"),r.is(i.props.tabPosition),r.is("active",T.active),r.is("disabled",z),r.is("closable",N),r.is("focus",h.value)],id:`tab-${O}`,key:`tab-${P}`,"aria-controls":`pane-${O}`,role:"tab","aria-selected":T.active,tabindex:te,onFocus:()=>S(),onBlur:()=>C(),onClick:Q=>{C(),t("tabClick",T,O,Q)},onKeydown:Q=>{N&&(Q.code===kt.delete||Q.code===kt.backspace)&&t("tabRemove",T,Q)}},[q,H])});return _e("div",{ref:c,class:[r.e("nav-wrap"),r.is("scrollable",!!d.value),r.is(i.props.tabPosition)]},[_,_e("div",{class:r.e("nav-scroll"),ref:o},[_e("div",{class:[r.e("nav"),r.is(i.props.tabPosition),r.is("stretch",n.stretch&&["top","bottom"].includes(i.props.tabPosition))],ref:l,style:v.value,role:"tablist",onKeydown:A},[n.type?null:_e(jIe,{ref:u,tabs:[...n.panes]},null),M])])])}}}),JIe=Et({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Ke(Function),default:()=>!0},stretch:Boolean}),U5=n=>qt(n)||Jt(n),eDe={[Tn]:n=>U5(n),tabClick:(n,e)=>e instanceof Event,tabChange:n=>U5(n),edit:(n,e)=>["remove","add"].includes(e),tabRemove:n=>U5(n),tabAdd:()=>!0},tDe=Ie({name:"ElTabs",props:JIe,emits:eDe,setup(n,{emit:e,slots:t,expose:i}){var r;const s=St("tabs"),a=V(()=>["left","right"].includes(n.tabPosition)),{children:o,addChild:l,removeChild:c}=mk(Nn(),"ElTabPane"),u=ae(),d=ae((r=n.modelValue)!=null?r:"0"),f=async(g,y=!1)=>{var x,b;if(!(d.value===g||bi(g)))try{let A;if(n.beforeLeave){const S=n.beforeLeave(g,d.value);A=S instanceof Promise?await S:S}else A=!0;A!==!1&&(d.value=g,y&&(e(Tn,g),e("tabChange",g)),(b=(x=u.value)==null?void 0:x.removeFocus)==null||b.call(x))}catch{}},h=(g,y,x)=>{g.props.disabled||(f(y,!0),e("tabClick",g,x))},p=(g,y)=>{g.props.disabled||bi(g.props.name)||(y.stopPropagation(),e("edit",g.props.name,"remove"),e("tabRemove",g.props.name))},m=()=>{e("edit",void 0,"add"),e("tabAdd")};pt(()=>n.modelValue,g=>f(g)),pt(d,async()=>{var g;await Yt(),(g=u.value)==null||g.scrollToActiveTab()}),Qn(EM,{props:n,currentName:d,registerPane:g=>{o.value.push(g)},sortPane:l,unregisterPane:c}),i({currentName:d});const v=({render:g})=>g();return()=>{const g=t["add-icon"],y=n.editable||n.addable?_e("div",{class:[s.e("new-tab"),a.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:A=>{[kt.enter,kt.numpadEnter].includes(A.code)&&m()}},[g?Qe(t,"add-icon"):_e(Ut,{class:s.is("icon-plus")},{default:()=>[_e(xQ,null,null)]})]):null,x=_e("div",{class:[s.e("header"),a.value&&s.e("header-vertical"),s.is(n.tabPosition)]},[_e(v,{render:()=>{const A=o.value.some(S=>S.slots.label);return _e(ZIe,{ref:u,currentName:d.value,editable:n.editable,type:n.type,panes:o.value,stretch:n.stretch,onTabClick:h,onTabRemove:p},{$stable:!A})}},null),y]),b=_e("div",{class:s.e("content")},[Qe(t,"default")]);return _e("div",{class:[s.b(),s.m(n.tabPosition),{[s.m("card")]:n.type==="card",[s.m("border-card")]:n.type==="border-card"}]},[b,x])}}});var nDe=tDe;const iDe=Et({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),pee="ElTabPane",rDe=Ie({name:pee}),sDe=Ie({...rDe,props:iDe,setup(n){const e=n,t=Nn(),i=Ps(),r=Nt(EM);r||Rs(pee,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=St("tab-pane"),a=ae(),o=V(()=>e.closable||r.props.closable),l=CD(()=>{var h;return r.currentName.value===((h=e.name)!=null?h:a.value)}),c=ae(l.value),u=V(()=>{var h;return(h=e.name)!=null?h:a.value}),d=CD(()=>!e.lazy||c.value||l.value);pt(l,h=>{h&&(c.value=!0)});const f=Si({uid:t.uid,slots:i,props:e,paneName:u,active:l,index:a,isClosable:o});return r.registerPane(f),Mn(()=>{r.sortPane(f)}),Ap(()=>{r.unregisterPane(f.uid)}),(h,p)=>w(d)?Cn((W(),ve("div",{key:0,id:`pane-${w(u)}`,class:j(w(s).b()),role:"tabpanel","aria-hidden":!w(l),"aria-labelledby":`tab-${w(u)}`},[Qe(h.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[yi,w(l)]]):et("v-if",!0)}});var mee=It(sDe,[["__file","tab-pane.vue"]]);const aDe=xn(nDe,{TabPane:mee}),oDe=Or(mee),lDe=Et({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:rd,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),cDe=Ie({name:"ElText"}),uDe=Ie({...cDe,props:lDe,setup(n){const e=n,t=ae(),i=gs(),r=St("text"),s=V(()=>[r.b(),r.m(e.type),r.m(i.value),r.is("truncated",e.truncated),r.is("line-clamp",!bi(e.lineClamp))]),a=Cf().title,o=()=>{var l,c,u,d,f;if(a)return;let h=!1;const p=((l=t.value)==null?void 0:l.textContent)||"";if(e.truncated){const m=(c=t.value)==null?void 0:c.offsetWidth,v=(u=t.value)==null?void 0:u.scrollWidth;m&&v&&v>m&&(h=!0)}else if(!bi(e.lineClamp)){const m=(d=t.value)==null?void 0:d.offsetHeight,v=(f=t.value)==null?void 0:f.scrollHeight;m&&v&&v>m&&(h=!0)}h?t.value.setAttribute("title",p):t.value.removeAttribute("title")};return Mn(o),au(o),(l,c)=>(W(),rt(On(l.tag),{ref_key:"textRef",ref:t,class:j(w(s)),style:jt({"-webkit-line-clamp":l.lineClamp})},{default:Re(()=>[Qe(l.$slots,"default")]),_:3},8,["class","style"]))}});var dDe=It(uDe,[["__file","text.vue"]]);const fDe=xn(dDe),hDe=Et({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:Ke(String),default:"light"},clearable:{type:Boolean,default:!0},size:ws,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,includeEndTime:{type:Boolean,default:!1},name:String,prefixIcon:{type:Ke([String,Object]),default:()=>bQ},clearIcon:{type:Ke([String,Object]),default:()=>If},...sy}),Wd=n=>{const e=(n||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),r=n.toUpperCase();return r.includes("AM")&&t===12?t=0:r.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:i}}return null},z5=(n,e)=>{const t=Wd(n);if(!t)return-1;const i=Wd(e);if(!i)return-1;const r=t.minutes+t.hours*60,s=i.minutes+i.hours*60;return r===s?0:r>s?1:-1},vz=n=>`${n}`.padStart(2,"0"),og=n=>`${vz(n.hours)}:${vz(n.minutes)}`,pDe=(n,e)=>{const t=Wd(n);if(!t)return"";const i=Wd(e);if(!i)return"";const r={hours:t.hours,minutes:t.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,og(r)},mDe=Ie({name:"ElTimeSelect"}),vDe=Ie({...mDe,props:hDe,emits:["change","blur","focus","clear","update:modelValue"],setup(n,{expose:e}){const t=n;An.extend(bk);const{Option:i}=lm,r=St("input"),s=ae(),a=ka(),{lang:o}=ci(),l=V(()=>t.modelValue),c=V(()=>{const g=Wd(t.start);return g?og(g):null}),u=V(()=>{const g=Wd(t.end);return g?og(g):null}),d=V(()=>{const g=Wd(t.step);return g?og(g):null}),f=V(()=>{const g=Wd(t.minTime||"");return g?og(g):null}),h=V(()=>{const g=Wd(t.maxTime||"");return g?og(g):null}),p=V(()=>{var g;const y=[],x=(b,A)=>{y.push({value:b,disabled:z5(A,f.value||"-1:-1")<=0||z5(A,h.value||"100:100")>=0})};if(t.start&&t.end&&t.step){let b=c.value,A;for(;b&&u.value&&z5(b,u.value)<=0;)A=An(b,"HH:mm").locale(o.value).format(t.format),x(A,b),b=pDe(b,d.value);if(t.includeEndTime&&u.value&&((g=y[y.length-1])==null?void 0:g.value)!==u.value){const S=An(u.value,"HH:mm").locale(o.value).format(t.format);x(S,u.value)}}return y});return e({blur:()=>{var g,y;(y=(g=s.value)==null?void 0:g.blur)==null||y.call(g)},focus:()=>{var g,y;(y=(g=s.value)==null?void 0:g.focus)==null||y.call(g)}}),(g,y)=>(W(),rt(w(lm),{ref_key:"select",ref:s,"model-value":w(l),disabled:w(a),clearable:g.clearable,"clear-icon":g.clearIcon,size:g.size,effect:g.effect,placeholder:g.placeholder,"default-first-option":"",filterable:g.editable,"empty-values":g.emptyValues,"value-on-clear":g.valueOnClear,"onUpdate:modelValue":x=>g.$emit("update:modelValue",x),onChange:x=>g.$emit("change",x),onBlur:x=>g.$emit("blur",x),onFocus:x=>g.$emit("focus",x),onClear:()=>g.$emit("clear")},{prefix:Re(()=>[g.prefixIcon?(W(),rt(w(Ut),{key:0,class:j(w(r).e("prefix-icon"))},{default:Re(()=>[(W(),rt(On(g.prefixIcon)))]),_:1},8,["class"])):et("v-if",!0)]),default:Re(()=>[(W(!0),ve(Kt,null,Jn(w(p),x=>(W(),rt(w(i),{key:x.value,label:x.value,value:x.value,disabled:x.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var gDe=It(vDe,[["__file","time-select.vue"]]);const yDe=xn(gDe),bDe=Ie({name:"ElTimeline",setup(n,{slots:e}){const t=St("timeline");return Qn("timeline",e),()=>en("ul",{class:[t.b()]},[Qe(e,"default")])}}),xDe=Et({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Hi},hollow:Boolean}),ADe=Ie({name:"ElTimelineItem"}),wDe=Ie({...ADe,props:xDe,setup(n){const e=n,t=St("timeline-item"),i=V(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(r,s)=>(W(),ve("li",{class:j([w(t).b(),{[w(t).e("center")]:r.center}])},[be("div",{class:j(w(t).e("tail"))},null,2),r.$slots.dot?et("v-if",!0):(W(),ve("div",{key:0,class:j(w(i)),style:jt({backgroundColor:r.color})},[r.icon?(W(),rt(w(Ut),{key:0,class:j(w(t).e("icon"))},{default:Re(()=>[(W(),rt(On(r.icon)))]),_:1},8,["class"])):et("v-if",!0)],6)),r.$slots.dot?(W(),ve("div",{key:1,class:j(w(t).e("dot"))},[Qe(r.$slots,"dot")],2)):et("v-if",!0),be("div",{class:j(w(t).e("wrapper"))},[!r.hideTimestamp&&r.placement==="top"?(W(),ve("div",{key:0,class:j([w(t).e("timestamp"),w(t).is("top")])},Tt(r.timestamp),3)):et("v-if",!0),be("div",{class:j(w(t).e("content"))},[Qe(r.$slots,"default")],2),!r.hideTimestamp&&r.placement==="bottom"?(W(),ve("div",{key:1,class:j([w(t).e("timestamp"),w(t).is("bottom")])},Tt(r.timestamp),3)):et("v-if",!0)],2)],2))}});var vee=It(wDe,[["__file","timeline-item.vue"]]);const SDe=xn(bDe,{TimelineItem:vee}),_De=Or(vee),gee=Et({nowrap:Boolean});var yee=(n=>(n.top="top",n.bottom="bottom",n.left="left",n.right="right",n))(yee||{});const CDe=Object.values(yee),Qk=Et({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Ke(Object),default:null}}),MDe=Et({side:{type:Ke(String),values:CDe,required:!0}}),TDe=["absolute","fixed"],EDe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],Zk=Et({arrowPadding:{type:Ke(Number),default:5},effect:{type:Ke(String),default:"light"},contentClass:String,placement:{type:Ke(String),values:EDe,default:"bottom"},reference:{type:Ke(Object),default:null},offset:{type:Number,default:8},strategy:{type:Ke(String),values:TDe,default:"absolute"},showArrow:Boolean,...ga(["ariaLabel"])}),Jk=Et({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Ke(Function)},"onUpdate:open":{type:Ke(Function)}}),$m={type:Ke(Function)},e7=Et({onBlur:$m,onClick:$m,onFocus:$m,onMouseDown:$m,onMouseEnter:$m,onMouseLeave:$m}),IDe=Et({...Jk,...Qk,...e7,...Zk,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Ke(Object),default:null},teleported:Boolean,to:{type:Ke(String),default:"body"}}),IM=Symbol("tooltipV2"),bee=Symbol("tooltipV2Content"),V5="tooltip_v2.open",DDe=Ie({name:"ElTooltipV2Root"}),RDe=Ie({...DDe,props:Jk,setup(n,{expose:e}){const t=n,i=ae(t.defaultOpen),r=ae(null),s=V({get:()=>$c(t.open)?i.value:t.open,set:v=>{var g;i.value=v,(g=t["onUpdate:open"])==null||g.call(t,v)}}),a=V(()=>Jt(t.delayDuration)&&t.delayDuration>0),{start:o,stop:l}=am(()=>{s.value=!0},V(()=>t.delayDuration),{immediate:!1}),c=St("tooltip-v2"),u=ma(),d=()=>{l(),s.value=!0},f=()=>{w(a)?o():d()},h=d,p=()=>{l(),s.value=!1};return pt(s,v=>{var g;v&&(document.dispatchEvent(new CustomEvent(V5)),h()),(g=t.onOpenChange)==null||g.call(t,v)}),Mn(()=>{document.addEventListener(V5,p)}),Fi(()=>{l(),document.removeEventListener(V5,p)}),Qn(IM,{contentId:u,triggerRef:r,ns:c,onClose:p,onDelayOpen:f,onOpen:h}),e({onOpen:h,onClose:p}),(v,g)=>Qe(v.$slots,"default",{open:w(s)})}});var PDe=It(RDe,[["__file","root.vue"]]);const LDe=Ie({name:"ElTooltipV2Arrow"}),kDe=Ie({...LDe,props:{...Qk,...MDe},setup(n){const e=n,{ns:t}=Nt(IM),{arrowRef:i}=Nt(bee),r=V(()=>{const{style:s,width:a,height:o}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${a}px`,[`--${l}-tooltip-v2-arrow-height`]:`${o}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${a/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:a/2-1,...s||{}}});return(s,a)=>(W(),ve("span",{ref_key:"arrowRef",ref:i,style:jt(w(r)),class:j(w(t).e("arrow"))},null,6))}});var gz=It(kDe,[["__file","arrow.vue"]]);const C1=Math.min,j0=Math.max,DC=Math.round,bw=Math.floor,Wu=n=>({x:n,y:n}),FDe={left:"right",right:"left",bottom:"top",top:"bottom"},BDe={start:"end",end:"start"};function m8(n,e,t){return j0(n,C1(e,t))}function _A(n,e){return typeof n=="function"?n(e):n}function um(n){return n.split("-")[0]}function CA(n){return n.split("-")[1]}function xee(n){return n==="x"?"y":"x"}function t7(n){return n==="y"?"height":"width"}function M1(n){return["top","bottom"].includes(um(n))?"y":"x"}function n7(n){return xee(M1(n))}function NDe(n,e,t){t===void 0&&(t=!1);const i=CA(n),r=n7(n),s=t7(r);let a=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=RC(a)),[a,RC(a)]}function ODe(n){const e=RC(n);return[v8(n),e,v8(e)]}function v8(n){return n.replace(/start|end/g,e=>BDe[e])}function UDe(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:a;default:return[]}}function zDe(n,e,t,i){const r=CA(n);let s=UDe(um(n),t==="start",i);return r&&(s=s.map(a=>a+"-"+r),e&&(s=s.concat(s.map(v8)))),s}function RC(n){return n.replace(/left|right|bottom|top/g,e=>FDe[e])}function VDe(n){return{top:0,right:0,bottom:0,left:0,...n}}function Aee(n){return typeof n!="number"?VDe(n):{top:n,right:n,bottom:n,left:n}}function PC(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function yz(n,e,t){let{reference:i,floating:r}=n;const s=M1(e),a=n7(e),o=t7(a),l=um(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[o]/2-r[o]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(CA(e)){case"start":h[a]-=f*(t&&c?-1:1);break;case"end":h[a]+=f*(t&&c?-1:1);break}return h}const HDe=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:d}=yz(c,i,l),f=i,h={},p=0;for(let m=0;m<o.length;m++){const{name:v,fn:g}=o[m],{x:y,y:x,data:b,reset:A}=await g({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:a,elements:{reference:n,floating:e}});u=y??u,d=x??d,h={...h,[v]:{...h[v],...b}},A&&p<=50&&(p++,typeof A=="object"&&(A.placement&&(f=A.placement),A.rects&&(c=A.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):A.rects),{x:u,y:d}=yz(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function i7(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:a,elements:o,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=_A(e,n),p=Aee(h),v=o[f?d==="floating"?"reference":"floating":d],g=PC(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(v)))==null||t?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:i,y:r,width:a.floating.width,height:a.floating.height}:a.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),b=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},A=PC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:x,strategy:l}):y);return{top:(g.top-A.top+p.top)/b.y,bottom:(A.bottom-g.bottom+p.bottom)/b.y,left:(g.left-A.left+p.left)/b.x,right:(A.right-g.right+p.right)/b.x}}const GDe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=_A(n,e)||{};if(c==null)return{};const d=Aee(u),f={x:t,y:i},h=n7(r),p=t7(h),m=await a.getDimensions(c),v=h==="y",g=v?"top":"left",y=v?"bottom":"right",x=v?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[h]-f[h]-s.floating[p],A=f[h]-s.reference[h],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let C=S?S[x]:0;(!C||!await(a.isElement==null?void 0:a.isElement(S)))&&(C=o.floating[x]||s.floating[p]);const _=b/2-A/2,M=C/2-m[p]/2-1,T=C1(d[g],M),E=C1(d[y],M),I=T,L=C-m[p]-E,F=C/2-m[p]/2+_,B=m8(I,F,L),P=!l.arrow&&CA(r)!=null&&F!==B&&s.reference[p]/2-(F<I?T:E)-m[p]/2<0,z=P?F<I?F-I:F-L:0;return{[h]:f[h]+z,data:{[h]:B,centerOffset:F-B-z,...P&&{alignmentOffset:z}},reset:P}}}),WDe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...v}=_A(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=um(r),y=M1(o),x=um(o)===o,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=f||(x||!m?[RC(o)]:ODe(o)),S=p!=="none";!f&&S&&A.push(...zDe(o,m,p,b));const C=[o,...A],_=await i7(e,v),M=[];let T=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&M.push(_[g]),d){const F=NDe(r,a,b);M.push(_[F[0]],_[F[1]])}if(T=[...T,{placement:r,overflows:M}],!M.every(F=>F<=0)){var E,I;const F=(((E=s.flip)==null?void 0:E.index)||0)+1,B=C[F];if(B)return{data:{index:F,overflows:T},reset:{placement:B}};let P=(I=T.filter(z=>z.overflows[0]<=0).sort((z,O)=>z.overflows[1]-O.overflows[1])[0])==null?void 0:I.placement;if(!P)switch(h){case"bestFit":{var L;const z=(L=T.filter(O=>{if(S){const N=M1(O.placement);return N===y||N==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(N=>N>0).reduce((N,H)=>N+H,0)]).sort((O,N)=>O[1]-N[1])[0])==null?void 0:L[0];z&&(P=z);break}case"initialPlacement":P=o;break}if(r!==P)return{reset:{placement:P}}}return{}}}};async function qDe(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=um(t),o=CA(t),l=M1(t)==="y",c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=_A(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof p=="number"&&(h=o==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const KDe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:s,placement:a,middlewareData:o}=e,l=await qDe(e,n);return a===((t=o.offset)==null?void 0:t.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:a}}}}},YDe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=_A(n,e),c={x:t,y:i},u=await i7(e,l),d=M1(um(r)),f=xee(d);let h=c[f],p=c[d];if(s){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=h+u[v],x=h-u[g];h=m8(y,h,x)}if(a){const v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=p+u[v],x=p-u[g];p=m8(y,p,x)}const m=o.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-t,y:m.y-i,enabled:{[f]:s,[d]:a}}}}}};function DM(){return typeof window<"u"}function uy(n){return wee(n)?(n.nodeName||"").toLowerCase():"#document"}function _l(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ad(n){var e;return(e=(wee(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function wee(n){return DM()?n instanceof Node||n instanceof _l(n).Node:!1}function iu(n){return DM()?n instanceof Element||n instanceof _l(n).Element:!1}function Zu(n){return DM()?n instanceof HTMLElement||n instanceof _l(n).HTMLElement:!1}function bz(n){return!DM()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof _l(n).ShadowRoot}function MA(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=ru(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function XDe(n){return["table","td","th"].includes(uy(n))}function RM(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function r7(n){const e=s7(),t=iu(n)?ru(n):n;return["transform","translate","scale","rotate","perspective"].some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function jDe(n){let e=ap(n);for(;Zu(e)&&!T1(e);){if(r7(e))return e;if(RM(e))return null;e=ap(e)}return null}function s7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function T1(n){return["html","body","#document"].includes(uy(n))}function ru(n){return _l(n).getComputedStyle(n)}function PM(n){return iu(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ap(n){if(uy(n)==="html")return n;const e=n.assignedSlot||n.parentNode||bz(n)&&n.host||ad(n);return bz(e)?e.host:e}function See(n){const e=ap(n);return T1(e)?n.ownerDocument?n.ownerDocument.body:n.body:Zu(e)&&MA(e)?e:See(e)}function bx(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=See(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),a=_l(r);if(s){const o=g8(a);return e.concat(a,a.visualViewport||[],MA(r)?r:[],o&&t?bx(o):[])}return e.concat(r,bx(r,[],t))}function g8(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function _ee(n){const e=ru(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Zu(n),s=r?n.offsetWidth:t,a=r?n.offsetHeight:i,o=DC(t)!==s||DC(i)!==a;return o&&(t=s,i=a),{width:t,height:i,$:o}}function a7(n){return iu(n)?n:n.contextElement}function Kg(n){const e=a7(n);if(!Zu(e))return Wu(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=_ee(e);let a=(s?DC(t.width):t.width)/i,o=(s?DC(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const $De=Wu(0);function Cee(n){const e=_l(n);return!s7()||!e.visualViewport?$De:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function QDe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==_l(n)?!1:e}function dm(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=a7(n);let a=Wu(1);e&&(i?iu(i)&&(a=Kg(i)):a=Kg(n));const o=QDe(s,t,i)?Cee(s):Wu(0);let l=(r.left+o.x)/a.x,c=(r.top+o.y)/a.y,u=r.width/a.x,d=r.height/a.y;if(s){const f=_l(s),h=i&&iu(i)?_l(i):i;let p=f,m=g8(p);for(;m&&i&&h!==p;){const v=Kg(m),g=m.getBoundingClientRect(),y=ru(m),x=g.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,b=g.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=x,c+=b,p=_l(m),m=g8(p)}}return PC({width:u,height:d,x:l,y:c})}function o7(n,e){const t=PM(n).scrollLeft;return e?e.left+t:dm(ad(n)).left+t}function Mee(n,e,t){t===void 0&&(t=!1);const i=n.getBoundingClientRect(),r=i.left+e.scrollLeft-(t?0:o7(n,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function ZDe(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const s=r==="fixed",a=ad(i),o=e?RM(e.floating):!1;if(i===a||o&&s)return t;let l={scrollLeft:0,scrollTop:0},c=Wu(1);const u=Wu(0),d=Zu(i);if((d||!d&&!s)&&((uy(i)!=="body"||MA(a))&&(l=PM(i)),Zu(i))){const h=dm(i);c=Kg(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=a&&!d&&!s?Mee(a,l,!0):Wu(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:t.y*c.y-l.scrollTop*c.y+u.y+f.y}}function JDe(n){return Array.from(n.getClientRects())}function e8e(n){const e=ad(n),t=PM(n),i=n.ownerDocument.body,r=j0(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=j0(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-t.scrollLeft+o7(n);const o=-t.scrollTop;return ru(i).direction==="rtl"&&(a+=j0(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:o}}function t8e(n,e){const t=_l(n),i=ad(n),r=t.visualViewport;let s=i.clientWidth,a=i.clientHeight,o=0,l=0;if(r){s=r.width,a=r.height;const c=s7();(!c||c&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:s,height:a,x:o,y:l}}function n8e(n,e){const t=dm(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=Zu(n)?Kg(n):Wu(1),a=n.clientWidth*s.x,o=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:a,height:o,x:l,y:c}}function xz(n,e,t){let i;if(e==="viewport")i=t8e(n,t);else if(e==="document")i=e8e(ad(n));else if(iu(e))i=n8e(e,t);else{const r=Cee(n);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return PC(i)}function Tee(n,e){const t=ap(n);return t===e||!iu(t)||T1(t)?!1:ru(t).position==="fixed"||Tee(t,e)}function i8e(n,e){const t=e.get(n);if(t)return t;let i=bx(n,[],!1).filter(o=>iu(o)&&uy(o)!=="body"),r=null;const s=ru(n).position==="fixed";let a=s?ap(n):n;for(;iu(a)&&!T1(a);){const o=ru(a),l=r7(a);!l&&o.position==="fixed"&&(r=null),(s?!l&&!r:!l&&o.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||MA(a)&&!l&&Tee(n,a))?i=i.filter(u=>u!==a):r=o,a=ap(a)}return e.set(n,i),i}function r8e(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const a=[...t==="clippingAncestors"?RM(e)?[]:i8e(e,this._c):[].concat(t),i],o=a[0],l=a.reduce((c,u)=>{const d=xz(e,u,r);return c.top=j0(d.top,c.top),c.right=C1(d.right,c.right),c.bottom=C1(d.bottom,c.bottom),c.left=j0(d.left,c.left),c},xz(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function s8e(n){const{width:e,height:t}=_ee(n);return{width:e,height:t}}function a8e(n,e,t){const i=Zu(e),r=ad(e),s=t==="fixed",a=dm(n,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Wu(0);if(i||!i&&!s)if((uy(e)!=="body"||MA(r))&&(o=PM(e)),i){const f=dm(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else r&&(l.x=o7(r));const c=r&&!i&&!s?Mee(r,o):Wu(0),u=a.left+o.scrollLeft-l.x-c.x,d=a.top+o.scrollTop-l.y-c.y;return{x:u,y:d,width:a.width,height:a.height}}function H5(n){return ru(n).position==="static"}function Az(n,e){if(!Zu(n)||ru(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ad(n)===t&&(t=t.ownerDocument.body),t}function Eee(n,e){const t=_l(n);if(RM(n))return t;if(!Zu(n)){let r=ap(n);for(;r&&!T1(r);){if(iu(r)&&!H5(r))return r;r=ap(r)}return t}let i=Az(n,e);for(;i&&XDe(i)&&H5(i);)i=Az(i,e);return i&&T1(i)&&H5(i)&&!r7(i)?t:i||jDe(n)||t}const o8e=async function(n){const e=this.getOffsetParent||Eee,t=this.getDimensions,i=await t(n.floating);return{reference:a8e(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function l8e(n){return ru(n).direction==="rtl"}const c8e={convertOffsetParentRelativeRectToViewportRelativeRect:ZDe,getDocumentElement:ad,getClippingRect:r8e,getOffsetParent:Eee,getElementRects:o8e,getClientRects:JDe,getDimensions:s8e,getScale:Kg,isElement:iu,isRTL:l8e};function Iee(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function u8e(n,e){let t=null,i;const r=ad(n);function s(){var o;clearTimeout(i),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(o||e(),!f||!h)return;const p=bw(d),m=bw(r.clientWidth-(u+f)),v=bw(r.clientHeight-(d+h)),g=bw(u),x={rootMargin:-p+"px "+-m+"px "+-v+"px "+-g+"px",threshold:j0(0,C1(1,l))||1};let b=!0;function A(S){const C=S[0].intersectionRatio;if(C!==l){if(!b)return a();C?a(!1,C):i=setTimeout(()=>{a(!1,1e-7)},1e3)}C===1&&!Iee(c,n.getBoundingClientRect())&&a(),b=!1}try{t=new IntersectionObserver(A,{...x,root:r.ownerDocument})}catch{t=new IntersectionObserver(A,x)}t.observe(n)}return a(!0),s}function d8e(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=a7(n),u=r||s?[...c?bx(c):[],...bx(e)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const d=c&&o?u8e(c,t):null;let f=-1,h=null;a&&(h=new ResizeObserver(g=>{let[y]=g;y&&y.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(e)})),t()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?dm(n):null;l&&v();function v(){const g=dm(n);m&&!Iee(m,g)&&t(),m=g,p=requestAnimationFrame(v)}return t(),()=>{var g;u.forEach(y=>{r&&y.removeEventListener("scroll",t),s&&y.removeEventListener("resize",t)}),d==null||d(),(g=h)==null||g.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const f8e=i7,Dee=KDe,h8e=YDe,p8e=WDe,Ree=GDe,Pee=(n,e,t)=>{const i=new Map,r={platform:c8e,...t},s={...r.platform,_c:i};return HDe(n,e,{...r,platform:s})},m8e=Et({style:{type:Ke([String,Object,Array]),default:()=>({})}}),v8e=Ie({name:"ElVisuallyHidden"}),g8e=Ie({...v8e,props:m8e,setup(n){const e=n,t=V(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,r)=>(W(),ve("span",Kn(i.$attrs,{style:w(t)}),[Qe(i.$slots,"default")],16))}});var y8e=It(g8e,[["__file","visual-hidden.vue"]]);Et({});const b8e=n=>{if(!li)return;if(!n)return n;const e=go(n);return e||(ir(n)?e:n)},x8e=({middleware:n,placement:e,strategy:t})=>{const i=ae(),r=ae(),s=ae(),a=ae(),o=ae({}),l={x:s,y:a,placement:e,strategy:t,middlewareData:o},c=async()=>{if(!li)return;const u=b8e(i),d=go(r);if(!u||!d)return;const f=await Pee(u,d,{placement:w(e),strategy:w(t),middleware:w(n)});p1(l).forEach(h=>{l[h].value=f[h]})};return Mn(()=>{Js(()=>{c()})}),{...l,update:c,referenceRef:i,contentRef:r}},A8e=({arrowRef:n,padding:e})=>({name:"arrow",options:{element:n,padding:e},fn(t){const i=w(n);return i?Ree({element:i,padding:e}).fn(t):{}}}),w8e=Ie({name:"ElTooltipV2Content"}),S8e=Ie({...w8e,props:{...Zk,...gee},setup(n){const e=n,{triggerRef:t,contentId:i}=Nt(IM),r=ae(e.placement),s=ae(e.strategy),a=ae(null),{referenceRef:o,contentRef:l,middlewareData:c,x:u,y:d,update:f}=x8e({placement:r,strategy:s,middleware:V(()=>{const x=[Dee(e.offset)];return e.showArrow&&x.push(A8e({arrowRef:a})),x})}),h=ry().nextZIndex(),p=St("tooltip-v2"),m=V(()=>r.value.split("-")[0]),v=V(()=>({position:w(s),top:`${w(d)||0}px`,left:`${w(u)||0}px`,zIndex:h})),g=V(()=>{if(!e.showArrow)return{};const{arrow:x}=w(c);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${x==null?void 0:x.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${x==null?void 0:x.y}px`||""}}),y=V(()=>[p.e("content"),p.is("dark",e.effect==="dark"),p.is(w(s)),e.contentClass]);return pt(a,()=>f()),pt(()=>e.placement,x=>r.value=x),Mn(()=>{pt(()=>e.reference||t.value,x=>{o.value=x||void 0},{immediate:!0})}),Qn(bee,{arrowRef:a}),(x,b)=>(W(),ve("div",{ref_key:"contentRef",ref:l,style:jt(w(v)),"data-tooltip-v2-root":""},[x.nowrap?et("v-if",!0):(W(),ve("div",{key:0,"data-side":w(m),class:j(w(y))},[Qe(x.$slots,"default",{contentStyle:w(v),contentClass:w(y)}),_e(w(y8e),{id:w(i),role:"tooltip"},{default:Re(()=>[x.ariaLabel?(W(),ve(Kt,{key:0},[Hn(Tt(x.ariaLabel),1)],64)):Qe(x.$slots,"default",{key:1})]),_:3},8,["id"]),Qe(x.$slots,"arrow",{style:jt(w(g)),side:w(m)})],10,["data-side"]))],4))}});var wz=It(S8e,[["__file","content.vue"]]);const _8e=Et({setRef:{type:Ke(Function),required:!0},onlyChild:Boolean});var C8e=Ie({props:_8e,setup(n,{slots:e}){const t=ae(),i=_M(t,r=>{r?n.setRef(r.nextElementSibling):n.setRef(null)});return()=>{var r;const[s]=((r=e.default)==null?void 0:r.call(e))||[],a=n.onlyChild?Fxe(s.children):s.children;return _e(Kt,{ref:i},[a])}}});const M8e=Ie({name:"ElTooltipV2Trigger"}),T8e=Ie({...M8e,props:{...gee,...e7},setup(n){const e=n,{onClose:t,onOpen:i,onDelayOpen:r,triggerRef:s,contentId:a}=Nt(IM);let o=!1;const l=y=>{s.value=y},c=()=>{o=!1},u=Yr(e.onMouseEnter,r),d=Yr(e.onMouseLeave,t),f=Yr(e.onMouseDown,()=>{t(),o=!0,document.addEventListener("mouseup",c,{once:!0})}),h=Yr(e.onFocus,()=>{o||i()}),p=Yr(e.onBlur,t),m=Yr(e.onClick,y=>{y.detail===0&&t()}),v={blur:p,click:m,focus:h,mousedown:f,mouseenter:u,mouseleave:d},g=(y,x,b)=>{y&&Object.entries(x).forEach(([A,S])=>{y[b](A,S)})};return pt(s,(y,x)=>{g(y,v,"addEventListener"),g(x,v,"removeEventListener"),y&&y.setAttribute("aria-describedby",a.value)}),Fi(()=>{g(s.value,v,"removeEventListener"),document.removeEventListener("mouseup",c)}),(y,x)=>y.nowrap?(W(),rt(w(C8e),{key:0,"set-ref":l,"only-child":""},{default:Re(()=>[Qe(y.$slots,"default")]),_:3})):(W(),ve("button",Kn({key:1,ref_key:"triggerRef",ref:s},y.$attrs),[Qe(y.$slots,"default")],16))}});var E8e=It(T8e,[["__file","trigger.vue"]]);const I8e=Ie({name:"ElTooltipV2"}),D8e=Ie({...I8e,props:IDe,setup(n){const t=Vs(n),i=Si(Gc(t,Object.keys(Qk))),r=Si(Gc(t,Object.keys(Zk))),s=Si(Gc(t,Object.keys(Jk))),a=Si(Gc(t,Object.keys(e7)));return(o,l)=>(W(),rt(PDe,yl(Yu(s)),{default:Re(({open:c})=>[_e(E8e,Kn(a,{nowrap:""}),{default:Re(()=>[Qe(o.$slots,"trigger")]),_:3},16),_e(w(oy),{to:o.to,disabled:!o.teleported},{default:Re(()=>[o.fullTransition?(W(),rt(na,yl(Kn({key:0},o.transitionProps)),{default:Re(()=>[o.alwaysOn||c?(W(),rt(wz,yl(Kn({key:0},r)),{arrow:Re(({style:u,side:d})=>[o.showArrow?(W(),rt(gz,Kn({key:0},i,{style:u,side:d}),null,16,["style","side"])):et("v-if",!0)]),default:Re(()=>[Qe(o.$slots,"default")]),_:3},16)):et("v-if",!0)]),_:2},1040)):(W(),ve(Kt,{key:1},[o.alwaysOn||c?(W(),rt(wz,yl(Kn({key:0},r)),{arrow:Re(({style:u,side:d})=>[o.showArrow?(W(),rt(gz,Kn({key:0},i,{style:u,side:d}),null,16,["style","side"])):et("v-if",!0)]),default:Re(()=>[Qe(o.$slots,"default")]),_:3},16)):et("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var R8e=It(D8e,[["__file","tooltip.vue"]]);const P8e=xn(R8e),Lee="left-check-change",kee="right-check-change",lg=Et({data:{type:Ke(Array),default:()=>[]},titles:{type:Ke(Array),default:()=>[]},buttonTexts:{type:Ke(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Ke(Function)},leftDefaultChecked:{type:Ke(Array),default:()=>[]},rightDefaultChecked:{type:Ke(Array),default:()=>[]},renderContent:{type:Ke(Function)},modelValue:{type:Ke(Array),default:()=>[]},format:{type:Ke(Object),default:()=>({})},filterable:Boolean,props:{type:Ke(Object),default:()=>Br({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),y8=(n,e)=>[n,e].every(Mt)||Mt(n)&&Us(e),L8e={[zi]:(n,e,t)=>[n,t].every(Mt)&&["left","right"].includes(e),[Tn]:n=>Mt(n),[Lee]:y8,[kee]:y8},b8="checked-change",k8e=Et({data:lg.data,optionRender:{type:Ke(Function)},placeholder:String,title:String,filterable:Boolean,format:lg.format,filterMethod:lg.filterMethod,defaultChecked:lg.leftDefaultChecked,props:lg.props}),F8e={[b8]:y8},TA=n=>{const e={label:"label",key:"key",disabled:"disabled"};return V(()=>({...e,...n.props}))},B8e=(n,e,t)=>{const i=TA(n),r=V(()=>n.data.filter(u=>Xt(n.filterMethod)?n.filterMethod(e.query,u):String(u[i.value.label]||u[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),s=V(()=>r.value.filter(u=>!u[i.value.disabled])),a=V(()=>{const u=e.checked.length,d=n.data.length,{noChecked:f,hasChecked:h}=n.format;return f&&h?u>0?h.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):f.replace(/\${total}/g,d.toString()):`${u}/${d}`}),o=V(()=>{const u=e.checked.length;return u>0&&u<s.value.length}),l=()=>{const u=s.value.map(d=>d[i.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?s.value.map(d=>d[i.value.key]):[]};return pt(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const f=u.concat(d).filter(h=>!u.includes(h)||!d.includes(h));t(b8,u,f)}else t(b8,u),e.checkChangeByUser=!0}),pt(s,()=>{l()}),pt(()=>n.data,()=>{const u=[],d=r.value.map(f=>f[i.value.key]);e.checked.forEach(f=>{d.includes(f)&&u.push(f)}),e.checkChangeByUser=!1,e.checked=u}),pt(()=>n.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(p=>d.includes(p)))return;const f=[],h=s.value.map(p=>p[i.value.key]);u.forEach(p=>{h.includes(p)&&f.push(p)}),e.checkChangeByUser=!1,e.checked=f},{immediate:!0}),{filteredData:r,checkableData:s,checkedSummary:a,isIndeterminate:o,updateAllChecked:l,handleAllCheckedChange:c}},N8e=Ie({name:"ElTransferPanel"}),O8e=Ie({...N8e,props:k8e,emits:F8e,setup(n,{expose:e,emit:t}){const i=n,r=Ps(),s=({option:x})=>x,{t:a}=ci(),o=St("transfer"),l=Si({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=TA(i),{filteredData:u,checkedSummary:d,isIndeterminate:f,handleAllCheckedChange:h}=B8e(i,l,t),p=V(()=>!vl(l.query)&&vl(u.value)),m=V(()=>!vl(r.default()[0].children)),{checked:v,allChecked:g,query:y}=Vs(l);return e({query:y}),(x,b)=>(W(),ve("div",{class:j(w(o).b("panel"))},[be("p",{class:j(w(o).be("panel","header"))},[_e(w(vc),{modelValue:w(g),"onUpdate:modelValue":A=>ir(g)?g.value=A:null,indeterminate:w(f),"validate-event":!1,onChange:w(h)},{default:Re(()=>[Hn(Tt(x.title)+" ",1),be("span",null,Tt(w(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),be("div",{class:j([w(o).be("panel","body"),w(o).is("with-footer",w(m))])},[x.filterable?(W(),rt(w(Qa),{key:0,modelValue:w(y),"onUpdate:modelValue":A=>ir(y)?y.value=A:null,class:j(w(o).be("panel","filter")),size:"default",placeholder:x.placeholder,"prefix-icon":w(Wge),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):et("v-if",!0),Cn(_e(w(mZ),{modelValue:w(v),"onUpdate:modelValue":A=>ir(v)?v.value=A:null,"validate-event":!1,class:j([w(o).is("filterable",x.filterable),w(o).be("panel","list")])},{default:Re(()=>[(W(!0),ve(Kt,null,Jn(w(u),A=>(W(),rt(w(vc),{key:A[w(c).key],class:j(w(o).be("panel","item")),value:A[w(c).key],disabled:A[w(c).disabled],"validate-event":!1},{default:Re(()=>{var S;return[_e(s,{option:(S=x.optionRender)==null?void 0:S.call(x,A)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[yi,!w(p)&&!w(vl)(x.data)]]),Cn(be("div",{class:j(w(o).be("panel","empty"))},[Qe(x.$slots,"empty",{},()=>[Hn(Tt(w(p)?w(a)("el.transfer.noMatch"):w(a)("el.transfer.noData")),1)])],2),[[yi,w(p)||w(vl)(x.data)]])],2),w(m)?(W(),ve("p",{key:0,class:j(w(o).be("panel","footer"))},[Qe(x.$slots,"default")],2)):et("v-if",!0)],2))}});var Sz=It(O8e,[["__file","transfer-panel.vue"]]);const U8e=n=>{const e=TA(n),t=V(()=>n.data.reduce((s,a)=>(s[a[e.value.key]]=a)&&s,{})),i=V(()=>n.data.filter(s=>!n.modelValue.includes(s[e.value.key]))),r=V(()=>n.targetOrder==="original"?n.data.filter(s=>n.modelValue.includes(s[e.value.key])):n.modelValue.reduce((s,a)=>{const o=t.value[a];return o&&s.push(o),s},[]));return{sourceData:i,targetData:r}},z8e=(n,e,t)=>{const i=TA(n),r=(o,l,c)=>{t(Tn,o),t(zi,o,l,c)};return{addToLeft:()=>{const o=n.modelValue.slice();e.rightChecked.forEach(l=>{const c=o.indexOf(l);c>-1&&o.splice(c,1)}),r(o,"left",e.rightChecked)},addToRight:()=>{let o=n.modelValue.slice();const l=n.data.filter(c=>{const u=c[i.value.key];return e.leftChecked.includes(u)&&!n.modelValue.includes(u)}).map(c=>c[i.value.key]);o=n.targetOrder==="unshift"?l.concat(o):o.concat(l),n.targetOrder==="original"&&(o=n.data.filter(c=>o.includes(c[i.value.key])).map(c=>c[i.value.key])),r(o,"right",e.leftChecked)}}},V8e=(n,e)=>({onSourceCheckedChange:(r,s)=>{n.leftChecked=r,s&&e(Lee,r,s)},onTargetCheckedChange:(r,s)=>{n.rightChecked=r,s&&e(kee,r,s)}}),H8e=Ie({name:"ElTransfer"}),G8e=Ie({...H8e,props:lg,emits:L8e,setup(n,{expose:e,emit:t}){const i=n,r=Ps(),{t:s}=ci(),a=St("transfer"),{formItem:o}=La(),l=Si({leftChecked:[],rightChecked:[]}),c=TA(i),{sourceData:u,targetData:d}=U8e(i),{onSourceCheckedChange:f,onTargetCheckedChange:h}=V8e(l,t),{addToLeft:p,addToRight:m}=z8e(i,l,t),v=ae(),g=ae(),y=_=>{switch(_){case"left":v.value.query="";break;case"right":g.value.query="";break}},x=V(()=>i.buttonTexts.length===2),b=V(()=>i.titles[0]||s("el.transfer.titles.0")),A=V(()=>i.titles[1]||s("el.transfer.titles.1")),S=V(()=>i.filterPlaceholder||s("el.transfer.filterPlaceholder"));pt(()=>i.modelValue,()=>{var _;i.validateEvent&&((_=o==null?void 0:o.validate)==null||_.call(o,"change").catch(M=>void 0))});const C=V(()=>_=>{var M;if(i.renderContent)return i.renderContent(en,_);const T=(((M=r.default)==null?void 0:M.call(r,{option:_}))||[]).filter(E=>E.type!==js);return T.length?T:en("span",_[c.value.label]||_[c.value.key])});return e({clearQuery:y,leftPanel:v,rightPanel:g}),(_,M)=>(W(),ve("div",{class:j(w(a).b())},[_e(Sz,{ref_key:"leftPanel",ref:v,data:w(u),"option-render":w(C),placeholder:w(S),title:w(b),filterable:_.filterable,format:_.format,"filter-method":_.filterMethod,"default-checked":_.leftDefaultChecked,props:i.props,onCheckedChange:w(f)},{empty:Re(()=>[Qe(_.$slots,"left-empty")]),default:Re(()=>[Qe(_.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),be("div",{class:j(w(a).e("buttons"))},[_e(w(ea),{type:"primary",class:j([w(a).e("button"),w(a).is("with-texts",w(x))]),disabled:w(vl)(l.rightChecked),onClick:w(p)},{default:Re(()=>[_e(w(Ut),null,{default:Re(()=>[_e(w(np))]),_:1}),w(bi)(_.buttonTexts[0])?et("v-if",!0):(W(),ve("span",{key:0},Tt(_.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),_e(w(ea),{type:"primary",class:j([w(a).e("button"),w(a).is("with-texts",w(x))]),disabled:w(vl)(l.leftChecked),onClick:w(m)},{default:Re(()=>[w(bi)(_.buttonTexts[1])?et("v-if",!0):(W(),ve("span",{key:0},Tt(_.buttonTexts[1]),1)),_e(w(Ut),null,{default:Re(()=>[_e(w(xo))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),_e(Sz,{ref_key:"rightPanel",ref:g,data:w(d),"option-render":w(C),placeholder:w(S),filterable:_.filterable,format:_.format,"filter-method":_.filterMethod,title:w(A),"default-checked":_.rightDefaultChecked,props:i.props,onCheckedChange:w(h)},{empty:Re(()=>[Qe(_.$slots,"right-empty")]),default:Re(()=>[Qe(_.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var W8e=It(G8e,[["__file","transfer.vue"]]);const q8e=xn(W8e),Yg="$treeNodeId",_z=function(n,e){!e||e[Yg]||Object.defineProperty(e,Yg,{value:n.id,enumerable:!1,configurable:!1,writable:!1})},l7=(n,e)=>e==null?void 0:e[n||Yg],x8=(n,e,t)=>{const i=n.value.currentNode;t();const r=n.value.currentNode;i!==r&&e("current-change",r?r.data:null,r)},A8=n=>{let e=!0,t=!0,i=!0;for(let r=0,s=n.length;r<s;r++){const a=n[r];(a.checked!==!0||a.indeterminate)&&(e=!1,a.disabled||(i=!1)),(a.checked!==!1||a.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:i,half:!e&&!t}},U2=function(n){if(n.childNodes.length===0||n.loading)return;const{all:e,none:t,half:i}=A8(n.childNodes);e?(n.checked=!0,n.indeterminate=!1):i?(n.checked=!1,n.indeterminate=!0):t&&(n.checked=!1,n.indeterminate=!1);const r=n.parent;!r||r.level===0||n.store.checkStrictly||U2(r)},xw=function(n,e){const t=n.store.props,i=n.data||{},r=t[e];if(Xt(r))return r(i,n);if(qt(r))return i[r];if(bi(r)){const s=i[e];return s===void 0?"":s}};let K8e=0,w8=class d_{constructor(e){this.id=K8e++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)vi(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&typeof t.isLeaf<"u"){const s=xw(this,"isLeaf");ji(s)&&(this.isLeafByUser=s)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&!this.isLeafByUser&&this.expand(),Mt(this.data)||_z(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,r=e.key;r&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),r&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Mt(e)||_z(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&Mt(this.data)?t=this.data:t=xw(this,"children")||[];for(let i=0,r=t.length;i<r;i++)this.insertChild({data:t[i]})}get label(){return xw(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return xw(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(i=>i===e||t&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof d_)){if(!i){const r=this.getChildren(!0);r.includes(e.data)||(bi(t)||t<0?r.push(e.data):r.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Si(new d_(e)),e instanceof d_&&e.initialize()}e.level=this.level+1,bi(t)||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);const r=this.childNodes.indexOf(e);r>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(r,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}expand(e,t){const i=()=>{if(t){let r=this.parent;for(;r.level>0;)r.expanded=!0,r=r.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(r=>{r.canFocus=!0})};this.shouldLoadData()?this.loadData(r=>{Mt(r)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||U2(this),i())}):i()}doCreateChildren(e,t={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},t),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,i,r){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:a,allWithoutDisable:o}=A8(this.childNodes);!this.isLeaf&&!a&&o&&(this.checked=!1,e=!1);const l=()=>{if(t){const c=this.childNodes;for(let f=0,h=c.length;f<h;f++){const p=c[f];r=r||e!==!1;const m=p.disabled?p.checked:r;p.setChecked(m,t,!0,r)}const{half:u,all:d}=A8(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),U2(this)},{checked:e!==!1});return}else l()}const s=this.parent;!s||s.level===0||i||U2(s)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const i=this.store.props;let r="children";return i&&(r=i.children||"children"),t[r]===void 0&&(t[r]=null),e&&!t[r]&&(t[r]=[]),t[r]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(s=>s.data),i={},r=[];e.forEach((s,a)=>{const o=s[Yg];!!o&&t.findIndex(c=>c[Yg]===o)>=0?i[o]={index:a,data:s}:r.push({index:a,data:s})}),this.store.lazy||t.forEach(s=>{i[s[Yg]]||this.removeChildByData(s)}),r.forEach(({index:s,data:a})=>{this.insertChild({data:a},s)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const i=s=>{this.childNodes=[],this.doCreateChildren(s,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,s)},r=()=>{this.loading=!1};this.store.load(this,i,r)}else e&&e.call(this)}eachNode(e){const t=[this];for(;t.length;){const i=t.shift();t.unshift(...i.childNodes),e(i)}}reInitChecked(){this.store.checkStrictly||U2(this)}};class Y8e{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)vi(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new w8({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,i=this.lazy,r=async function(s){const a=s.root?s.root.childNodes:s.childNodes;for(const[o,l]of a.entries())l.visible=t.call(l,e,l.data,l),o%80===0&&o>0&&await Yt(),r(l);if(!s.visible&&a.length){let o=!0;o=!a.some(l=>l.visible),s.root?s.root.visible=o===!1:s.visible=o===!1}e&&s.visible&&!s.isLeaf&&(!i||s.loaded)&&s.expand()};r(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof w8)return e;const t=Rn(e)?l7(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const i=this.getNode(t);i.parent.insertBefore({data:e},i)}insertAfter(e,t){const i=this.getNode(t);i.parent.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const i=$c(t)?this.root:this.getNode(t);i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(i=>{const r=t[i];r&&r.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;!e||!e.data||(t?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(i=>{this.deregisterNode(i)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const i=[],r=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(o=>{(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&i.push(o.data),r(o)})};return r(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(s=>{s.indeterminate&&e.push(s.data),t(s)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const i in t)vi(t,i)&&e.push(t[i]);return e}updateChildren(e,t){const i=this.nodesMap[e];if(!i)return;const r=i.childNodes;for(let s=r.length-1;s>=0;s--){const a=r[s];this.remove(a.data)}for(let s=0,a=t.length;s<a;s++){const o=t[s];this.append(o,i.data)}}_setCheckedKeys(e,t=!1,i){const r=this._getAllNodes().sort((l,c)=>l.level-c.level),s=Object.create(null),a=Object.keys(i);r.forEach(l=>l.setChecked(!1,!1));const o=l=>{l.childNodes.forEach(c=>{var u;s[c.data[e]]=!0,(u=c.childNodes)!=null&&u.length&&o(c)})};for(let l=0,c=r.length;l<c;l++){const u=r[l],d=u.data[e].toString();if(!a.includes(d)){u.checked&&!s[d]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&o(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),t){u.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(v=>{v.isLeaf||v.setChecked(!1,!1),h(v)})};h(u)}}}setCheckedNodes(e,t=!1){const i=this.key,r={};e.forEach(s=>{r[(s||{})[i]]=!0}),this._setCheckedKeys(i,t,r)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const i=this.key,r={};e.forEach(s=>{r[s]=!0}),this._setCheckedKeys(i,t,r)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const i=this.getNode(t);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,t,i){const r=this.getNode(e);r&&r.setChecked(!!t,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const i=e[this.key],r=this.nodesMap[i];this.setCurrentNode(r),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(this.currentNodeKey=e,e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const X8e=Ie({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(n){const e=St("tree"),t=Nt("NodeInstance"),i=Nt("RootTree");return()=>{const r=n.node,{data:s,store:a}=r;return n.renderContent?n.renderContent(en,{_self:t,node:r,data:s,store:a}):Qe(i.ctx.slots,"default",{node:r,data:s},()=>[en("span",{class:e.be("node","label")},[r.label])])}}});var j8e=It(X8e,[["__file","tree-node-content.vue"]]);function Fee(n){const e=Nt("TreeNodeMap",null),t={treeNodeExpand:i=>{n.node!==i&&n.node.collapse()},children:[]};return e&&e.children.push(t),Qn("TreeNodeMap",t),{broadcastExpanded:i=>{if(n.accordion)for(const r of t.children)r.treeNodeExpand(i)}}}const Bee=Symbol("dragEvents");function $8e({props:n,ctx:e,el$:t,dropIndicator$:i,store:r}){const s=St("tree"),a=ae({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Qn(Bee,{treeNodeDragStart:({event:u,treeNode:d})=>{if(Xt(n.allowDrag)&&!n.allowDrag(d.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}a.value.draggingNode=d,e.emit("node-drag-start",d.node,u)},treeNodeDragOver:({event:u,treeNode:d})=>{const f=d,h=a.value.dropNode;h&&h.node.id!==f.node.id&&Za(h.$el,s.is("drop-inner"));const p=a.value.draggingNode;if(!p||!f)return;let m=!0,v=!0,g=!0,y=!0;Xt(n.allowDrop)&&(m=n.allowDrop(p.node,f.node,"prev"),y=v=n.allowDrop(p.node,f.node,"inner"),g=n.allowDrop(p.node,f.node,"next")),u.dataTransfer.dropEffect=v||m||g?"move":"none",(m||v||g)&&(h==null?void 0:h.node.id)!==f.node.id&&(h&&e.emit("node-drag-leave",p.node,h.node,u),e.emit("node-drag-enter",p.node,f.node,u)),m||v||g?a.value.dropNode=f:a.value.dropNode=null,f.node.nextSibling===p.node&&(g=!1),f.node.previousSibling===p.node&&(m=!1),f.node.contains(p.node,!1)&&(v=!1),(p.node===f.node||p.node.contains(f.node))&&(m=!1,v=!1,g=!1);const x=f.$el.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),b=t.value.getBoundingClientRect();let A;const S=m?v?.25:g?.45:1:-1,C=g?v?.75:m?.55:0:1;let _=-9999;const M=u.clientY-x.top;M<x.height*S?A="before":M>x.height*C?A="after":v?A="inner":A="none";const T=f.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),E=i.value;A==="before"?_=T.top-b.top:A==="after"&&(_=T.bottom-b.top),E.style.top=`${_}px`,E.style.left=`${T.right-b.left}px`,A==="inner"?tc(f.$el,s.is("drop-inner")):Za(f.$el,s.is("drop-inner")),a.value.showDropIndicator=A==="before"||A==="after",a.value.allowDrop=a.value.showDropIndicator||y,a.value.dropType=A,e.emit("node-drag-over",p.node,f.node,u)},treeNodeDragEnd:u=>{const{draggingNode:d,dropType:f,dropNode:h}=a.value;if(u.preventDefault(),u.dataTransfer&&(u.dataTransfer.dropEffect="move"),d&&h){const p={data:d.node.data};f!=="none"&&d.node.remove(),f==="before"?h.node.parent.insertBefore(p,h.node):f==="after"?h.node.parent.insertAfter(p,h.node):f==="inner"&&h.node.insertChild(p),f!=="none"&&(r.value.registerNode(p),r.value.key&&d.node.eachNode(m=>{var v;(v=r.value.nodesMap[m.data[r.value.key]])==null||v.setChecked(m.checked,!r.value.checkStrictly)})),Za(h.$el,s.is("drop-inner")),e.emit("node-drag-end",d.node,h.node,f,u),f!=="none"&&e.emit("node-drop",d.node,h.node,f,u)}d&&!h&&e.emit("node-drag-end",d.node,null,f,u),a.value.showDropIndicator=!1,a.value.draggingNode=null,a.value.dropNode=null,a.value.allowDrop=!0}}),{dragState:a}}const Q8e=Ie({name:"ElTreeNode",components:{ElCollapseTransition:wM,ElCheckbox:vc,NodeContent:j8e,ElIcon:Ut,Loading:ju},props:{node:{type:w8,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(n,e){const t=St("tree"),{broadcastExpanded:i}=Fee(n),r=Nt("RootTree"),s=ae(!1),a=ae(!1),o=ae(),l=ae(),c=ae(),u=Nt(Bee),d=Nn();Qn("NodeInstance",d),n.node.expanded&&(s.value=!0,a.value=!0);const f=r.props.props.children||"children";pt(()=>{var M;const T=(M=n.node.data)==null?void 0:M[f];return T&&[...T]},()=>{n.node.updateChildren()}),pt(()=>n.node.indeterminate,M=>{m(n.node.checked,M)}),pt(()=>n.node.checked,M=>{m(M,n.node.indeterminate)}),pt(()=>n.node.childNodes.length,()=>n.node.reInitChecked()),pt(()=>n.node.expanded,M=>{Yt(()=>s.value=M),M&&(a.value=!0)});const h=M=>l7(r.props.nodeKey,M.data),p=M=>{const T=n.props.class;if(!T)return{};let E;if(Xt(T)){const{data:I}=M;E=T(I,M)}else E=T;return qt(E)?{[E]:!0}:E},m=(M,T)=>{(o.value!==M||l.value!==T)&&r.ctx.emit("check-change",n.node.data,M,T),o.value=M,l.value=T},v=M=>{x8(r.store,r.ctx.emit,()=>{var T;if((T=r==null?void 0:r.props)==null?void 0:T.nodeKey){const I=h(n.node);r.store.value.setCurrentNodeKey(I)}else r.store.value.setCurrentNode(n.node)}),r.currentNode.value=n.node,r.props.expandOnClickNode&&y(),(r.props.checkOnClickNode||n.node.isLeaf&&r.props.checkOnClickLeaf)&&!n.node.disabled&&x(!n.node.checked),r.ctx.emit("node-click",n.node.data,n.node,d,M)},g=M=>{var T;(T=r.instance.vnode.props)!=null&&T.onNodeContextmenu&&(M.stopPropagation(),M.preventDefault()),r.ctx.emit("node-contextmenu",M,n.node.data,n.node,d)},y=()=>{n.node.isLeaf||(s.value?(r.ctx.emit("node-collapse",n.node.data,n.node,d),n.node.collapse()):n.node.expand(()=>{e.emit("node-expand",n.node.data,n.node,d)}))},x=M=>{n.node.setChecked(M,!(r!=null&&r.props.checkStrictly)),Yt(()=>{const T=r.store.value;r.ctx.emit("check",n.node.data,{checkedNodes:T.getCheckedNodes(),checkedKeys:T.getCheckedKeys(),halfCheckedNodes:T.getHalfCheckedNodes(),halfCheckedKeys:T.getHalfCheckedKeys()})})};return{ns:t,node$:c,tree:r,expanded:s,childNodeRendered:a,oldChecked:o,oldIndeterminate:l,getNodeKey:h,getNodeClass:p,handleSelectChange:m,handleClick:v,handleContextMenu:g,handleExpandIconClick:y,handleCheckChange:x,handleChildNodeExpand:(M,T,E)=>{i(T),r.ctx.emit("node-expand",M,T,E)},handleDragStart:M=>{r.props.draggable&&u.treeNodeDragStart({event:M,treeNode:n})},handleDragOver:M=>{M.preventDefault(),r.props.draggable&&u.treeNodeDragOver({event:M,treeNode:{$el:c.value,node:n.node}})},handleDrop:M=>{M.preventDefault()},handleDragEnd:M=>{r.props.draggable&&u.treeNodeDragEnd(M)},CaretRight:yQ}}});function Z8e(n,e,t,i,r,s){const a=an("el-icon"),o=an("el-checkbox"),l=an("loading"),c=an("node-content"),u=an("el-tree-node"),d=an("el-collapse-transition");return Cn((W(),ve("div",{ref:"node$",class:j([n.ns.b("node"),n.ns.is("expanded",n.expanded),n.ns.is("current",n.node.isCurrent),n.ns.is("hidden",!n.node.visible),n.ns.is("focusable",!n.node.disabled),n.ns.is("checked",!n.node.disabled&&n.node.checked),n.getNodeClass(n.node)]),role:"treeitem",tabindex:"-1","aria-expanded":n.expanded,"aria-disabled":n.node.disabled,"aria-checked":n.node.checked,draggable:n.tree.props.draggable,"data-key":n.getNodeKey(n.node),onClick:ln(n.handleClick,["stop"]),onContextmenu:n.handleContextMenu,onDragstart:ln(n.handleDragStart,["stop"]),onDragover:ln(n.handleDragOver,["stop"]),onDragend:ln(n.handleDragEnd,["stop"]),onDrop:ln(n.handleDrop,["stop"])},[be("div",{class:j(n.ns.be("node","content")),style:jt({paddingLeft:(n.node.level-1)*n.tree.props.indent+"px"})},[n.tree.props.icon||n.CaretRight?(W(),rt(a,{key:0,class:j([n.ns.be("node","expand-icon"),n.ns.is("leaf",n.node.isLeaf),{expanded:!n.node.isLeaf&&n.expanded}]),onClick:ln(n.handleExpandIconClick,["stop"])},{default:Re(()=>[(W(),rt(On(n.tree.props.icon||n.CaretRight)))]),_:1},8,["class","onClick"])):et("v-if",!0),n.showCheckbox?(W(),rt(o,{key:1,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:!!n.node.disabled,onClick:ln(()=>{},["stop"]),onChange:n.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):et("v-if",!0),n.node.loading?(W(),rt(a,{key:2,class:j([n.ns.be("node","loading-icon"),n.ns.is("loading")])},{default:Re(()=>[_e(l)]),_:1},8,["class"])):et("v-if",!0),_e(c,{node:n.node,"render-content":n.renderContent},null,8,["node","render-content"])],6),_e(d,null,{default:Re(()=>[!n.renderAfterExpand||n.childNodeRendered?Cn((W(),ve("div",{key:0,class:j(n.ns.be("node","children")),role:"group","aria-expanded":n.expanded},[(W(!0),ve(Kt,null,Jn(n.node.childNodes,f=>(W(),rt(u,{key:n.getNodeKey(f),"render-content":n.renderContent,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,node:f,accordion:n.accordion,props:n.props,onNodeExpand:n.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[yi,n.expanded]]):et("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[yi,n.node.visible]])}var J8e=It(Q8e,[["render",Z8e],["__file","tree-node.vue"]]);function eRe({el$:n},e){const t=St("tree"),i=Ui([]),r=Ui([]);Mn(()=>{a()}),au(()=>{i.value=Array.from(n.value.querySelectorAll("[role=treeitem]")),r.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"))}),pt(r,o=>{o.forEach(l=>{l.setAttribute("tabindex","-1")})}),Li(n,"keydown",o=>{const l=o.target;if(!l.className.includes(t.b("node")))return;const c=o.code;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));const u=i.value.indexOf(l);let d;if([kt.up,kt.down].includes(c)){if(o.preventDefault(),c===kt.up){d=u===-1?0:u!==0?u-1:i.value.length-1;const h=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d--,d===h){d=-1;break}d<0&&(d=i.value.length-1)}}else{d=u===-1?0:u<i.value.length-1?u+1:0;const h=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d++,d===h){d=-1;break}d>=i.value.length&&(d=0)}}d!==-1&&i.value[d].focus()}[kt.left,kt.right].includes(c)&&(o.preventDefault(),l.click());const f=l.querySelector('[type="checkbox"]');[kt.enter,kt.numpadEnter,kt.space].includes(c)&&f&&(o.preventDefault(),f.click())});const a=()=>{var o;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),r.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"));const l=n.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(o=i.value[0])==null||o.setAttribute("tabindex","0")}}const tRe=Ie({name:"ElTree",components:{ElTreeNode:J8e},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Hi}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(n,e){const{t}=ci(),i=St("tree"),r=Nt(cy,null),s=ae(new Y8e({key:n.nodeKey,data:n.data,lazy:n.lazy,props:n.props,load:n.load,currentNodeKey:n.currentNodeKey,checkStrictly:n.checkStrictly,checkDescendants:n.checkDescendants,defaultCheckedKeys:n.defaultCheckedKeys,defaultExpandedKeys:n.defaultExpandedKeys,autoExpandParent:n.autoExpandParent,defaultExpandAll:n.defaultExpandAll,filterNodeMethod:n.filterNodeMethod}));s.value.initialize();const a=ae(s.value.root),o=ae(null),l=ae(null),c=ae(null),{broadcastExpanded:u}=Fee(n),{dragState:d}=$8e({props:n,ctx:e,el$:l,dropIndicator$:c,store:s});eRe({el$:l},s);const f=V(()=>{const{childNodes:O}=a.value,N=r?r.hasFilteredOptions!==0:!1;return(!O||O.length===0||O.every(({visible:H})=>!H))&&!N});pt(()=>n.currentNodeKey,O=>{s.value.setCurrentNodeKey(O)}),pt(()=>n.defaultCheckedKeys,O=>{s.value.setDefaultCheckedKey(O)}),pt(()=>n.defaultExpandedKeys,O=>{s.value.setDefaultExpandedKeys(O)}),pt(()=>n.data,O=>{s.value.setData(O)},{deep:!0}),pt(()=>n.checkStrictly,O=>{s.value.checkStrictly=O});const h=O=>{if(!n.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(O)},p=O=>l7(n.nodeKey,O.data),m=O=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const N=s.value.getNode(O);if(!N)return[];const H=[N.data];let q=N.parent;for(;q&&q!==a.value;)H.push(q.data),q=q.parent;return H.reverse()},v=(O,N)=>s.value.getCheckedNodes(O,N),g=O=>s.value.getCheckedKeys(O),y=()=>{const O=s.value.getCurrentNode();return O?O.data:null},x=()=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const O=y();return O?O[n.nodeKey]:null},b=(O,N)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(O,N)},A=(O,N)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(O,N)},S=(O,N,H)=>{s.value.setChecked(O,N,H)},C=()=>s.value.getHalfCheckedNodes(),_=()=>s.value.getHalfCheckedKeys(),M=(O,N=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");x8(s,e.emit,()=>{u(O),s.value.setUserCurrentNode(O,N)})},T=(O,N=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");x8(s,e.emit,()=>{u(),s.value.setCurrentNodeKey(O,N)})},E=O=>s.value.getNode(O),I=O=>{s.value.remove(O)},L=(O,N)=>{s.value.append(O,N)},F=(O,N)=>{s.value.insertBefore(O,N)},B=(O,N)=>{s.value.insertAfter(O,N)},P=(O,N,H)=>{u(N),e.emit("node-expand",O,N,H)},z=(O,N)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(O,N)};return Qn("RootTree",{ctx:e,props:n,store:s,root:a,currentNode:o,instance:Nn()}),Qn($u,void 0),{ns:i,store:s,root:a,currentNode:o,dragState:d,el$:l,dropIndicator$:c,isEmpty:f,filter:h,getNodeKey:p,getNodePath:m,getCheckedNodes:v,getCheckedKeys:g,getCurrentNode:y,getCurrentKey:x,setCheckedNodes:b,setCheckedKeys:A,setChecked:S,getHalfCheckedNodes:C,getHalfCheckedKeys:_,setCurrentNode:M,setCurrentKey:T,t,getNode:E,remove:I,append:L,insertBefore:F,insertAfter:B,handleNodeExpand:P,updateKeyChildren:z}}});function nRe(n,e,t,i,r,s){const a=an("el-tree-node");return W(),ve("div",{ref:"el$",class:j([n.ns.b(),n.ns.is("dragging",!!n.dragState.draggingNode),n.ns.is("drop-not-allow",!n.dragState.allowDrop),n.ns.is("drop-inner",n.dragState.dropType==="inner"),{[n.ns.m("highlight-current")]:n.highlightCurrent}]),role:"tree"},[(W(!0),ve(Kt,null,Jn(n.root.childNodes,o=>(W(),rt(a,{key:n.getNodeKey(o),node:o,props:n.props,accordion:n.accordion,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,"render-content":n.renderContent,onNodeExpand:n.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),n.isEmpty?(W(),ve("div",{key:0,class:j(n.ns.e("empty-block"))},[Qe(n.$slots,"empty",{},()=>{var o;return[be("span",{class:j(n.ns.e("empty-text"))},Tt((o=n.emptyText)!=null?o:n.t("el.tree.emptyText")),3)]})],2)):et("v-if",!0),Cn(be("div",{ref:"dropIndicator$",class:j(n.ns.e("drop-indicator"))},null,2),[[yi,n.dragState.showDropIndicator]])],2)}var iRe=It(tRe,[["render",nRe],["__file","tree.vue"]]);const LC=xn(iRe),rRe=(n,{attrs:e,emit:t},{select:i,tree:r,key:s})=>{const a=St("tree-select");return pt(()=>n.data,()=>{n.filterable&&Yt(()=>{var l,c;(c=r.value)==null||c.filter((l=i.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Gc(Vs(n),Object.keys(lm.props)),...e,class:V(()=>e.class),style:V(()=>e.style),"onUpdate:modelValue":l=>t(Tn,l),valueKey:s,popperClass:V(()=>{const l=[a.e("popper")];return n.popperClass&&l.push(n.popperClass),l.join(" ")}),filterMethod:(l="")=>{var c;n.filterMethod?n.filterMethod(l):n.remoteMethod?n.remoteMethod(l):(c=r.value)==null||c.filter(l)}}},sRe=Ie({extends:AC,setup(n,e){const t=AC.setup(n,e);delete t.selectOptionClick;const i=Nn().proxy;return Yt(()=>{t.select.states.cachedOptions.get(i.value)||t.select.onOptionCreate(i)}),pt(()=>e.attrs.visible,r=>{Yt(()=>{t.states.visible=r})},{immediate:!0}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function S8(n){return n||n===0}function c7(n){return Mt(n)&&n.length}function Qm(n){return Mt(n)?n:S8(n)?[n]:[]}function f_(n,e,t,i,r){for(let s=0;s<n.length;s++){const a=n[s];if(e(a,s,n,r))return i?i(a,s,n,r):a;{const o=t(a);if(c7(o)){const l=f_(o,e,t,i,a);if(l)return l}}}}function h_(n,e,t,i){for(let r=0;r<n.length;r++){const s=n[r];e(s,r,n,i);const a=t(s);c7(a)&&h_(a,e,t,s)}}const aRe=(n,{attrs:e,slots:t,emit:i},{select:r,tree:s,key:a})=>{pt(()=>n.modelValue,()=>{n.showCheckbox&&Yt(()=>{const f=s.value;f&&!ha(f.getCheckedKeys(),Qm(n.modelValue))&&f.setCheckedKeys(Qm(n.modelValue))})},{immediate:!0,deep:!0});const o=V(()=>({value:a.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...n.props})),l=(f,h)=>{var p;const m=o.value[f];return Xt(m)?m(h,(p=s.value)==null?void 0:p.getNode(l("value",h))):h[m]},c=Qm(n.modelValue).map(f=>f_(n.data||[],h=>l("value",h)===f,h=>l("children",h),(h,p,m,v)=>v&&l("value",v))).filter(f=>S8(f)),u=V(()=>{if(!n.renderAfterExpand&&!n.lazy)return[];const f=[];return h_(n.data.concat(n.cacheData),h=>{const p=l("value",h);f.push({value:p,currentLabel:l("label",h),isDisabled:l("disabled",h)})},h=>l("children",h)),f}),d=()=>{var f;return(f=s.value)==null?void 0:f.getCheckedKeys().filter(h=>{var p;const m=(p=s.value)==null?void 0:p.getNode(h);return!Us(m)&&vl(m.childNodes)})};return{...Gc(Vs(n),Object.keys(LC.props)),...e,nodeKey:a,expandOnClickNode:V(()=>!n.checkStrictly&&n.expandOnClickNode),defaultExpandedKeys:V(()=>n.defaultExpandedKeys?n.defaultExpandedKeys.concat(c):c),renderContent:(f,{node:h,data:p,store:m})=>f(sRe,{value:l("value",p),label:l("label",p),disabled:l("disabled",p),visible:h.visible},n.renderContent?()=>n.renderContent(f,{node:h,data:p,store:m}):t.default?()=>t.default({node:h,data:p,store:m}):void 0),filterNodeMethod:(f,h,p)=>n.filterNodeMethod?n.filterNodeMethod(f,h,p):f?new RegExp(gk(f),"i").test(l("label",h)||""):!0,onNodeClick:(f,h,p)=>{var m,v,g,y;if((m=e.onNodeClick)==null||m.call(e,f,h,p),!(n.showCheckbox&&n.checkOnClickNode)){if(!n.showCheckbox&&(n.checkStrictly||h.isLeaf)){if(!l("disabled",f)){const x=(v=r.value)==null?void 0:v.states.options.get(l("value",f));(g=r.value)==null||g.handleOptionSelect(x)}}else n.expandOnClickNode&&p.proxy.handleExpandIconClick();(y=r.value)==null||y.focus()}},onCheck:(f,h)=>{var p;if(!n.showCheckbox)return;const m=l("value",f),v={};h_([s.value.store.root],b=>v[b.key]=b,b=>b.childNodes);const g=h.checkedKeys,y=n.multiple?Qm(n.modelValue).filter(b=>!(b in v)&&!g.includes(b)):[],x=y.concat(g);if(n.checkStrictly)i(Tn,n.multiple?x:x.includes(m)?m:void 0);else if(n.multiple){const b=d();i(Tn,y.concat(b))}else{const b=f_([f],C=>!c7(l("children",C))&&!l("disabled",C),C=>l("children",C)),A=b?l("value",b):void 0,S=S8(n.modelValue)&&!!f_([f],C=>l("value",C)===n.modelValue,C=>l("children",C));i(Tn,A===n.modelValue||S?void 0:A)}Yt(()=>{var b;const A=Qm(n.modelValue);s.value.setCheckedKeys(A),(b=e.onCheck)==null||b.call(e,f,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(p=r.value)==null||p.focus()},onNodeExpand:(f,h,p)=>{var m;(m=e.onNodeExpand)==null||m.call(e,f,h,p),Yt(()=>{if(!n.checkStrictly&&n.lazy&&n.multiple&&h.checked){const v={},g=s.value.getCheckedKeys();h_([s.value.store.root],b=>v[b.key]=b,b=>b.childNodes);const y=Qm(n.modelValue).filter(b=>!(b in v)&&!g.includes(b)),x=d();i(Tn,y.concat(x))}})},cacheOptions:u}};var oRe=Ie({props:{data:{type:Array,default:()=>[]}},setup(n){const e=Nt(cy);return pt(()=>n.data,()=>{var t;n.data.forEach(r=>{e.states.cachedOptions.has(r.value)||e.states.cachedOptions.set(r.value,r)});const i=((t=e.selectRef)==null?void 0:t.querySelectorAll("input"))||[];li&&!Array.from(i).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const lRe=Ie({name:"ElTreeSelect",inheritAttrs:!1,props:{...lm.props,...LC.props,cacheData:{type:Array,default:()=>[]}},setup(n,e){const{slots:t,expose:i}=e,r=ae(),s=ae(),a=V(()=>n.nodeKey||n.valueKey||"value"),o=rRe(n,e,{select:r,tree:s,key:a}),{cacheOptions:l,...c}=aRe(n,e,{select:r,tree:s,key:a}),u=Si({});return i(u),Mn(()=>{Object.assign(u,{...Gc(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Gc(r.value,["focus","blur","selectedLabel"])})}),()=>en(lm,Si({...o,ref:d=>r.value=d}),{...t,default:()=>[en(oRe,{data:l.value}),en(LC,Si({...c,ref:d=>s.value=d}))]})}});var cRe=It(lRe,[["__file","tree-select.vue"]]);const uRe=xn(cRe),u7=Symbol(),dRe={key:-1,level:-1,data:{}};var z2=(n=>(n.KEY="id",n.LABEL="label",n.CHILDREN="children",n.DISABLED="disabled",n.CLASS="",n))(z2||{}),_8=(n=>(n.ADD="add",n.DELETE="delete",n))(_8||{});const Nee={type:Number,default:26},fRe=Et({data:{type:Ke(Array),default:()=>Br([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Ke(Object),default:()=>Br({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Ke(Array),default:()=>Br([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Ke(Array),default:()=>Br([])},indent:{type:Number,default:16},itemSize:Nee,icon:{type:Hi},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},checkOnClickLeaf:{type:Boolean,default:!0},currentNodeKey:{type:Ke([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Ke(Function)},perfMode:{type:Boolean,default:!0}}),hRe=Et({node:{type:Ke(Object),default:()=>Br(dRe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:Nee}),pRe=Et({node:{type:Ke(Object),required:!0}}),Oee="node-click",Uee="node-drop",zee="node-expand",Vee="node-collapse",Hee="current-change",Gee="check",Wee="check-change",qee="node-contextmenu",mRe={[Oee]:(n,e,t)=>n&&e&&t,[Uee]:(n,e,t)=>n&&e&&t,[zee]:(n,e)=>n&&e,[Vee]:(n,e)=>n&&e,[Hee]:(n,e)=>n&&e,[Gee]:(n,e)=>n&&e,[Wee]:(n,e)=>n&&ji(e),[qee]:(n,e,t)=>n&&e&&t},vRe={click:(n,e)=>!!(n&&e),drop:(n,e)=>!!(n&&e),toggle:n=>!!n,check:(n,e)=>n&&ji(e)};function gRe(n,e){const t=ae(new Set),i=ae(new Set),{emit:r}=Nn();pt([()=>e.value,()=>n.defaultCheckedKeys],()=>Yt(()=>{y(n.defaultCheckedKeys)}),{immediate:!0});const s=()=>{if(!e.value||!n.showCheckbox||n.checkStrictly)return;const{levelTreeNodeMap:x,maxLevel:b}=e.value,A=t.value,S=new Set;for(let C=b-1;C>=1;--C){const _=x.get(C);_&&_.forEach(M=>{const T=M.children;if(T){let E=!0,I=!1;for(const L of T){const F=L.key;if(A.has(F))I=!0;else if(S.has(F)){E=!1,I=!0;break}else E=!1}E?A.add(M.key):I?(S.add(M.key),A.delete(M.key)):(A.delete(M.key),S.delete(M.key))}})}i.value=S},a=x=>t.value.has(x.key),o=x=>i.value.has(x.key),l=(x,b,A=!0,S=!0)=>{const C=t.value,_=(M,T)=>{C[T?_8.ADD:_8.DELETE](M.key);const E=M.children;!n.checkStrictly&&E&&E.forEach(I=>{I.disabled||_(I,T)})};_(x,b),S&&s(),A&&c(x,b)},c=(x,b)=>{const{checkedNodes:A,checkedKeys:S}=p(),{halfCheckedNodes:C,halfCheckedKeys:_}=m();r(Gee,x.data,{checkedKeys:S,checkedNodes:A,halfCheckedKeys:_,halfCheckedNodes:C}),r(Wee,x.data,b)};function u(x=!1){return p(x).checkedKeys}function d(x=!1){return p(x).checkedNodes}function f(){return m().halfCheckedKeys}function h(){return m().halfCheckedNodes}function p(x=!1){const b=[],A=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:S}=e.value;t.value.forEach(C=>{const _=S.get(C);_&&(!x||x&&_.isLeaf)&&(A.push(C),b.push(_.data))})}return{checkedKeys:A,checkedNodes:b}}function m(){const x=[],b=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:A}=e.value;i.value.forEach(S=>{const C=A.get(S);C&&(b.push(S),x.push(C.data))})}return{halfCheckedNodes:x,halfCheckedKeys:b}}function v(x){t.value.clear(),i.value.clear(),Yt(()=>{y(x)})}function g(x,b){if(e!=null&&e.value&&n.showCheckbox){const A=e.value.treeNodeMap.get(x);A&&l(A,b,!1)}}function y(x){if(e!=null&&e.value){const{treeNodeMap:b}=e.value;if(n.showCheckbox&&b&&(x==null?void 0:x.length)>0){for(const A of x){const S=b.get(A);S&&!a(S)&&l(S,!0,!1,!1)}s()}}}return{updateCheckedKeys:s,toggleCheckbox:l,isChecked:a,isIndeterminate:o,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:g,setCheckedKeys:v}}function yRe(n,e){const t=ae(new Set([])),i=ae(new Set([])),r=V(()=>Xt(n.filterMethod));function s(o){var l;if(!r.value)return;const c=new Set,u=i.value,d=t.value,f=[],h=((l=e.value)==null?void 0:l.treeNodes)||[],p=n.filterMethod;d.clear();function m(v){v.forEach(g=>{f.push(g),p!=null&&p(o,g.data,g)?f.forEach(x=>{c.add(x.key)}):g.isLeaf&&d.add(g.key);const y=g.children;if(y&&m(y),!g.isLeaf){if(!c.has(g.key))d.add(g.key);else if(y){let x=!0;for(const b of y)if(!d.has(b.key)){x=!1;break}x?u.add(g.key):u.delete(g.key)}}f.pop()})}return m(h),c}function a(o){return i.value.has(o.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:t,doFilter:s,isForceHiddenExpandIcon:a}}function bRe(n,e){const t=ae(new Set(n.defaultExpandedKeys)),i=ae(),r=Ui(),s=ae();pt(()=>n.currentNodeKey,Y=>{i.value=Y},{immediate:!0}),pt(()=>n.data,Y=>{Te(Y)},{immediate:!0});const{isIndeterminate:a,isChecked:o,toggleCheckbox:l,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p}=gRe(n,r),{doFilter:m,hiddenNodeKeySet:v,isForceHiddenExpandIcon:g}=yRe(n,r),y=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.value)||z2.KEY}),x=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.children)||z2.CHILDREN}),b=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.disabled)||z2.DISABLED}),A=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.label)||z2.LABEL}),S=V(()=>{var Y;const oe=t.value,ne=v.value,Xe=[],ke=((Y=r.value)==null?void 0:Y.treeNodes)||[],Ge=[];for(let He=ke.length-1;He>=0;--He)Ge.push(ke[He]);for(;Ge.length;){const He=Ge.pop();if(!ne.has(He.key)&&(Xe.push(He),He.children&&oe.has(He.key)))for(let qe=He.children.length-1;qe>=0;--qe)Ge.push(He.children[qe])}return Xe}),C=V(()=>S.value.length>0);function _(Y){const oe=new Map,ne=new Map;let Xe=1;function ke(He,qe=1,tt=void 0){var pe;const G=[];for(const Z of He){const ge=E(Z),Oe={level:qe,key:ge,data:Z};Oe.label=L(Z),Oe.parent=tt;const je=T(Z);Oe.disabled=I(Z),Oe.isLeaf=!je||je.length===0,je&&je.length&&(Oe.children=ke(je,qe+1,Oe)),G.push(Oe),oe.set(ge,Oe),ne.has(qe)||ne.set(qe,[]),(pe=ne.get(qe))==null||pe.push(Oe)}return qe>Xe&&(Xe=qe),G}const Ge=ke(Y);return{treeNodeMap:oe,levelTreeNodeMap:ne,maxLevel:Xe,treeNodes:Ge}}function M(Y){const oe=m(Y);oe&&(t.value=oe)}function T(Y){return Y[x.value]}function E(Y){return Y?Y[y.value]:""}function I(Y){return Y[b.value]}function L(Y){return Y[A.value]}function F(Y){t.value.has(Y.key)?q(Y):H(Y)}function B(Y){const oe=new Set,ne=r.value.treeNodeMap;Y.forEach(Xe=>{let ke=ne.get(Xe);for(;ke&&!oe.has(ke.key);)oe.add(ke.key),ke=ke.parent}),t.value=oe}function P(Y,oe){e(Oee,Y.data,Y,oe),O(Y),n.expandOnClickNode&&F(Y),n.showCheckbox&&(n.checkOnClickNode||Y.isLeaf&&n.checkOnClickLeaf)&&!Y.disabled&&l(Y,!o(Y),!0)}function z(Y,oe){e(Uee,Y.data,Y,oe)}function O(Y){ee(Y)||(i.value=Y.key,e(Hee,Y.data,Y))}function N(Y,oe){l(Y,oe)}function H(Y){const oe=t.value;if(r.value&&n.accordion){const{treeNodeMap:ne}=r.value;oe.forEach(Xe=>{const ke=ne.get(Xe);Y&&Y.level===(ke==null?void 0:ke.level)&&oe.delete(Xe)})}oe.add(Y.key),e(zee,Y.data,Y)}function q(Y){t.value.delete(Y.key),e(Vee,Y.data,Y)}function te(Y){return t.value.has(Y.key)}function Q(Y){return!!Y.disabled}function ee(Y){const oe=i.value;return oe!==void 0&&oe===Y.key}function de(){var Y,oe;if(i.value)return(oe=(Y=r.value)==null?void 0:Y.treeNodeMap.get(i.value))==null?void 0:oe.data}function J(){return i.value}function ue(Y){i.value=Y}function Te(Y){Yt(()=>r.value=_(Y))}function De(Y){var oe;const ne=Rn(Y)?E(Y):Y;return(oe=r.value)==null?void 0:oe.treeNodeMap.get(ne)}function Le(Y,oe="auto"){const ne=De(Y);ne&&s.value&&s.value.scrollToItem(S.value.indexOf(ne),oe)}function Ne(Y){var oe;(oe=s.value)==null||oe.scrollTo(Y)}return{tree:r,flattenTree:S,isNotEmpty:C,listRef:s,getKey:E,getChildren:T,toggleExpand:F,toggleCheckbox:l,isExpanded:te,isChecked:o,isIndeterminate:a,isDisabled:Q,isCurrent:ee,isForceHiddenExpandIcon:g,handleNodeClick:P,handleNodeDrop:z,handleNodeCheck:N,getCurrentNode:de,getCurrentKey:J,setCurrentKey:ue,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p,filter:M,setData:Te,getNode:De,expandNode:H,collapseNode:q,setExpandedKeys:B,scrollToNode:Le,scrollTo:Ne}}var xRe=Ie({name:"ElTreeNodeContent",props:pRe,setup(n){const e=Nt(u7),t=St("tree");return()=>{const i=n.node,{data:r}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:r}):en("span",{class:t.be("node","label")},[i==null?void 0:i.label])}}});const ARe=Ie({name:"ElTreeNode"}),wRe=Ie({...ARe,props:hRe,emits:vRe,setup(n,{emit:e}){const t=n,i=Nt(u7),r=St("tree"),s=V(()=>{var h;return(h=i==null?void 0:i.props.indent)!=null?h:16}),a=V(()=>{var h;return(h=i==null?void 0:i.props.icon)!=null?h:yQ}),o=h=>{const p=i==null?void 0:i.props.props.class;if(!p)return{};let m;if(Xt(p)){const{data:v}=h;m=p(v,h)}else m=p;return qt(m)?{[m]:!0}:m},l=h=>{e("click",t.node,h)},c=h=>{e("drop",t.node,h)},u=()=>{e("toggle",t.node)},d=h=>{e("check",t.node,h)},f=h=>{var p,m,v,g;(v=(m=(p=i==null?void 0:i.instance)==null?void 0:p.vnode)==null?void 0:m.props)!=null&&v.onNodeContextmenu&&(h.stopPropagation(),h.preventDefault()),i==null||i.ctx.emit(qee,h,(g=t.node)==null?void 0:g.data,t.node)};return(h,p)=>{var m,v,g;return W(),ve("div",{ref:"node$",class:j([w(r).b("node"),w(r).is("expanded",h.expanded),w(r).is("current",h.current),w(r).is("focusable",!h.disabled),w(r).is("checked",!h.disabled&&h.checked),o(h.node)]),role:"treeitem",tabindex:"-1","aria-expanded":h.expanded,"aria-disabled":h.disabled,"aria-checked":h.checked,"data-key":(m=h.node)==null?void 0:m.key,onClick:ln(l,["stop"]),onContextmenu:f,onDragover:ln(()=>{},["prevent"]),onDragenter:ln(()=>{},["prevent"]),onDrop:ln(c,["stop"])},[be("div",{class:j(w(r).be("node","content")),style:jt({paddingLeft:`${(h.node.level-1)*w(s)}px`,height:h.itemSize+"px"})},[w(a)?(W(),rt(w(Ut),{key:0,class:j([w(r).is("leaf",!!((v=h.node)!=null&&v.isLeaf)),w(r).is("hidden",h.hiddenExpandIcon),{expanded:!((g=h.node)!=null&&g.isLeaf)&&h.expanded},w(r).be("node","expand-icon")]),onClick:ln(u,["stop"])},{default:Re(()=>[(W(),rt(On(w(a))))]),_:1},8,["class","onClick"])):et("v-if",!0),h.showCheckbox?(W(),rt(w(vc),{key:1,"model-value":h.checked,indeterminate:h.indeterminate,disabled:h.disabled,onChange:d,onClick:ln(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):et("v-if",!0),_e(w(xRe),{node:h.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var SRe=It(wRe,[["__file","tree-node.vue"]]);const _Re=Ie({name:"ElTreeV2"}),CRe=Ie({..._Re,props:fRe,emits:mRe,setup(n,{expose:e,emit:t}){const i=n,r=Ps(),s=V(()=>i.itemSize);Qn(u7,{ctx:{emit:t,slots:r},props:i,instance:Nn()}),Qn($u,void 0);const{t:a}=ci(),o=St("tree"),{flattenTree:l,isNotEmpty:c,listRef:u,toggleExpand:d,isExpanded:f,isIndeterminate:h,isChecked:p,isDisabled:m,isCurrent:v,isForceHiddenExpandIcon:g,handleNodeClick:y,handleNodeDrop:x,handleNodeCheck:b,toggleCheckbox:A,getCurrentNode:S,getCurrentKey:C,setCurrentKey:_,getCheckedKeys:M,getCheckedNodes:T,getHalfCheckedKeys:E,getHalfCheckedNodes:I,setChecked:L,setCheckedKeys:F,filter:B,setData:P,getNode:z,expandNode:O,collapseNode:N,setExpandedKeys:H,scrollToNode:q,scrollTo:te}=bRe(i,t);return e({toggleCheckbox:A,getCurrentNode:S,getCurrentKey:C,setCurrentKey:_,getCheckedKeys:M,getCheckedNodes:T,getHalfCheckedKeys:E,getHalfCheckedNodes:I,setChecked:L,setCheckedKeys:F,filter:B,setData:P,getNode:z,expandNode:O,collapseNode:N,setExpandedKeys:H,scrollToNode:q,scrollTo:te}),(Q,ee)=>(W(),ve("div",{class:j([w(o).b(),{[w(o).m("highlight-current")]:Q.highlightCurrent}]),role:"tree"},[w(c)?(W(),rt(w(EJ),{key:0,ref_key:"listRef",ref:u,"class-name":w(o).b("virtual-list"),data:w(l),total:w(l).length,height:Q.height,"item-size":w(s),"perf-mode":Q.perfMode},{default:Re(({data:de,index:J,style:ue})=>[(W(),rt(SRe,{key:de[J].key,style:jt(ue),node:de[J],expanded:w(f)(de[J]),"show-checkbox":Q.showCheckbox,checked:w(p)(de[J]),indeterminate:w(h)(de[J]),"item-size":w(s),disabled:w(m)(de[J]),current:w(v)(de[J]),"hidden-expand-icon":w(g)(de[J]),onClick:w(y),onToggle:w(d),onCheck:w(b),onDrop:w(x)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(W(),ve("div",{key:1,class:j(w(o).e("empty-block"))},[Qe(Q.$slots,"empty",{},()=>{var de;return[be("span",{class:j(w(o).e("empty-text"))},Tt((de=Q.emptyText)!=null?de:w(a)("el.tree.emptyText")),3)]})],2))],2))}});var MRe=It(CRe,[["__file","tree.vue"]]);const TRe=xn(MRe),Kee=Symbol("uploadContextKey"),ERe="ElUpload";class IRe extends Error{constructor(e,t,i,r){super(e),this.name="UploadAjaxError",this.status=t,this.method=i,this.url=r}}function Cz(n,e,t){let i;return t.response?i=`${t.response.error||t.response}`:t.responseText?i=`${t.responseText}`:i=`fail to ${e.method} ${n} ${t.status}`,new IRe(i,t.status,e.method,n)}function DRe(n){const e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const RRe=n=>{typeof XMLHttpRequest>"u"&&Rs(ERe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=n.action;e.upload&&e.upload.addEventListener("progress",s=>{const a=s;a.percent=s.total>0?s.loaded/s.total*100:0,n.onProgress(a)});const i=new FormData;if(n.data)for(const[s,a]of Object.entries(n.data))Mt(a)&&a.length?i.append(s,...a):i.append(s,a);i.append(n.filename,n.file,n.file.name),e.addEventListener("error",()=>{n.onError(Cz(t,n,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return n.onError(Cz(t,n,e));n.onSuccess(DRe(e))}),e.open(n.method,t,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const r=n.headers||{};if(r instanceof Headers)r.forEach((s,a)=>e.setRequestHeader(a,s));else for(const[s,a]of Object.entries(r))Us(a)||e.setRequestHeader(s,String(a));return e.send(i),e},Yee=["text","picture","picture-card"];let PRe=1;const C8=()=>Date.now()+PRe++,Xee=Et({action:{type:String,default:"#"},headers:{type:Ke(Object)},method:{type:String,default:"post"},data:{type:Ke([Object,Function,Promise]),default:()=>Br({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Ke(Array),default:()=>Br([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Yee,default:"text"},httpRequest:{type:Ke(Function),default:RRe},disabled:Boolean,limit:Number}),LRe=Et({...Xee,beforeUpload:{type:Ke(Function),default:Pi},beforeRemove:{type:Ke(Function)},onRemove:{type:Ke(Function),default:Pi},onChange:{type:Ke(Function),default:Pi},onPreview:{type:Ke(Function),default:Pi},onSuccess:{type:Ke(Function),default:Pi},onProgress:{type:Ke(Function),default:Pi},onError:{type:Ke(Function),default:Pi},onExceed:{type:Ke(Function),default:Pi},crossorigin:{type:Ke(String)}}),kRe=Et({files:{type:Ke(Array),default:()=>Br([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Ke(Function),default:Pi},listType:{type:String,values:Yee,default:"text"},crossorigin:{type:Ke(String)}}),FRe={remove:n=>!!n},BRe=Ie({name:"ElUploadList"}),NRe=Ie({...BRe,props:kRe,emits:FRe,setup(n,{emit:e}){const t=n,{t:i}=ci(),r=St("upload"),s=St("icon"),a=St("list"),o=ka(),l=ae(!1),c=V(()=>[r.b("list"),r.bm("list",t.listType),r.is("disabled",t.disabled)]),u=d=>{e("remove",d)};return(d,f)=>(W(),rt(s$,{tag:"ul",class:j(w(c)),name:w(a).b()},{default:Re(()=>[(W(!0),ve(Kt,null,Jn(d.files,(h,p)=>(W(),ve("li",{key:h.uid||h.name,class:j([w(r).be("list","item"),w(r).is(h.status),{focusing:l.value}]),tabindex:"0",onKeydown:Xi(m=>!w(o)&&u(h),["delete"]),onFocus:m=>l.value=!0,onBlur:m=>l.value=!1,onClick:m=>l.value=!1},[Qe(d.$slots,"default",{file:h,index:p},()=>[d.listType==="picture"||h.status!=="uploading"&&d.listType==="picture-card"?(W(),ve("img",{key:0,class:j(w(r).be("list","item-thumbnail")),src:h.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):et("v-if",!0),h.status==="uploading"||d.listType!=="picture-card"?(W(),ve("div",{key:1,class:j(w(r).be("list","item-info"))},[be("a",{class:j(w(r).be("list","item-name")),onClick:ln(m=>d.handlePreview(h),["prevent"])},[_e(w(Ut),{class:j(w(s).m("document"))},{default:Re(()=>[_e(w(yge))]),_:1},8,["class"]),be("span",{class:j(w(r).be("list","item-file-name")),title:h.name},Tt(h.name),11,["title"])],10,["onClick"]),h.status==="uploading"?(W(),rt(w(yJ),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:jt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):et("v-if",!0)],2)):et("v-if",!0),be("label",{class:j(w(r).be("list","item-status-label"))},[d.listType==="text"?(W(),rt(w(Ut),{key:0,class:j([w(s).m("upload-success"),w(s).m("circle-check")])},{default:Re(()=>[_e(w(XL))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(W(),rt(w(Ut),{key:1,class:j([w(s).m("upload-success"),w(s).m("check")])},{default:Re(()=>[_e(w(gA))]),_:1},8,["class"])):et("v-if",!0)],2),w(o)?et("v-if",!0):(W(),rt(w(Ut),{key:2,class:j(w(s).m("close")),onClick:m=>u(h)},{default:Re(()=>[_e(w(nu))]),_:2},1032,["class","onClick"])),et(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),et(" This is a bug which needs to be fixed "),et(" TODO: Fix the incorrect navigation interaction "),w(o)?et("v-if",!0):(W(),ve("i",{key:3,class:j(w(s).m("close-tip"))},Tt(w(i)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(W(),ve("span",{key:4,class:j(w(r).be("list","item-actions"))},[be("span",{class:j(w(r).be("list","item-preview")),onClick:m=>d.handlePreview(h)},[_e(w(Ut),{class:j(w(s).m("zoom-in"))},{default:Re(()=>[_e(w(AQ))]),_:1},8,["class"])],10,["onClick"]),w(o)?et("v-if",!0):(W(),ve("span",{key:0,class:j(w(r).be("list","item-delete")),onClick:m=>u(h)},[_e(w(Ut),{class:j(w(s).m("delete"))},{default:Re(()=>[_e(w(vge))]),_:1},8,["class"])],10,["onClick"]))],2)):et("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Qe(d.$slots,"append")]),_:3},8,["class","name"]))}});var Mz=It(NRe,[["__file","upload-list.vue"]]);const ORe=Et({disabled:{type:Boolean,default:!1}}),URe={file:n=>Mt(n)},jee="ElUploadDrag",zRe=Ie({name:jee}),VRe=Ie({...zRe,props:ORe,emits:URe,setup(n,{emit:e}){Nt(Kee)||Rs(jee,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=St("upload"),r=ae(!1),s=ka(),a=l=>{if(s.value)return;r.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files);e("file",c)},o=()=>{s.value||(r.value=!0)};return(l,c)=>(W(),ve("div",{class:j([w(i).b("dragger"),w(i).is("dragover",r.value)]),onDrop:ln(a,["prevent"]),onDragover:ln(o,["prevent"]),onDragleave:ln(u=>r.value=!1,["prevent"])},[Qe(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var HRe=It(VRe,[["__file","upload-dragger.vue"]]);const GRe=Et({...Xee,beforeUpload:{type:Ke(Function),default:Pi},onRemove:{type:Ke(Function),default:Pi},onStart:{type:Ke(Function),default:Pi},onSuccess:{type:Ke(Function),default:Pi},onProgress:{type:Ke(Function),default:Pi},onError:{type:Ke(Function),default:Pi},onExceed:{type:Ke(Function),default:Pi}}),WRe=Ie({name:"ElUploadContent",inheritAttrs:!1}),qRe=Ie({...WRe,props:GRe,setup(n,{expose:e}){const t=n,i=St("upload"),r=ka(),s=Ui({}),a=Ui(),o=m=>{if(m.length===0)return;const{autoUpload:v,limit:g,fileList:y,multiple:x,onStart:b,onExceed:A}=t;if(g&&y.length+m.length>g){A(m,y);return}x||(m=m.slice(0,1));for(const S of m){const C=S;C.uid=C8(),b(C),v&&l(C)}},l=async m=>{if(a.value.value="",!t.beforeUpload)return u(m);let v,g={};try{const x=t.data,b=t.beforeUpload(m);g=Yb(t.data)?hC(t.data):t.data,v=await b,Yb(t.data)&&ha(x,g)&&(g=hC(t.data))}catch{v=!1}if(v===!1){t.onRemove(m);return}let y=m;v instanceof Blob&&(v instanceof File?y=v:y=new File([v],m.name,{type:m.type})),u(Object.assign(y,{uid:m.uid}),g)},c=async(m,v)=>Xt(m)?m(v):m,u=async(m,v)=>{const{headers:g,data:y,method:x,withCredentials:b,name:A,action:S,onProgress:C,onSuccess:_,onError:M,httpRequest:T}=t;try{v=await c(v??y,m)}catch{t.onRemove(m);return}const{uid:E}=m,I={headers:g||{},withCredentials:b,file:m,data:v,method:x,filename:A,action:S,onProgress:F=>{C(F,m)},onSuccess:F=>{_(F,m),delete s.value[E]},onError:F=>{M(F,m),delete s.value[E]}},L=T(I);s.value[E]=L,L instanceof Promise&&L.then(I.onSuccess,I.onError)},d=m=>{const v=m.target.files;v&&o(Array.from(v))},f=()=>{r.value||(a.value.value="",a.value.click())},h=()=>{f()};return e({abort:m=>{fQ(s.value).filter(m?([g])=>String(m.uid)===g:()=>!0).forEach(([g,y])=>{y instanceof XMLHttpRequest&&y.abort(),delete s.value[g]})},upload:l}),(m,v)=>(W(),ve("div",{class:j([w(i).b(),w(i).m(m.listType),w(i).is("drag",m.drag),w(i).is("disabled",w(r))]),tabindex:w(r)?"-1":"0",onClick:f,onKeydown:Xi(ln(h,["self"]),["enter","space"])},[m.drag?(W(),rt(HRe,{key:0,disabled:w(r),onFile:o},{default:Re(()=>[Qe(m.$slots,"default")]),_:3},8,["disabled"])):Qe(m.$slots,"default",{key:1}),be("input",{ref_key:"inputRef",ref:a,class:j(w(i).e("input")),name:m.name,disabled:w(r),multiple:m.multiple,accept:m.accept,type:"file",onChange:d,onClick:ln(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Tz=It(qRe,[["__file","upload-content.vue"]]);const Ez="ElUpload",Iz=n=>{var e;(e=n.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(n.url)},KRe=(n,e)=>{const t=rQ(n,"fileList",void 0,{passive:!0}),i=h=>t.value.find(p=>p.uid===h.uid);function r(h){var p;(p=e.value)==null||p.abort(h)}function s(h=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!h.includes(p.status))}function a(h){t.value=t.value.filter(p=>p.uid!==h.uid)}const o=(h,p)=>{const m=i(p);m&&(console.error(h),m.status="fail",a(m),n.onError(h,m,t.value),n.onChange(m,t.value))},l=(h,p)=>{const m=i(p);m&&(n.onProgress(h,m,t.value),m.status="uploading",m.percentage=Math.round(h.percent))},c=(h,p)=>{const m=i(p);m&&(m.status="success",m.response=h,n.onSuccess(h,m,t.value),n.onChange(m,t.value))},u=h=>{Us(h.uid)&&(h.uid=C8());const p={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(n.listType==="picture-card"||n.listType==="picture")try{p.url=URL.createObjectURL(h)}catch(m){m.message,n.onError(m,p,t.value)}t.value=[...t.value,p],n.onChange(p,t.value)},d=async h=>{const p=h instanceof File?i(h):h;p||Rs(Ez,"file to be removed not found");const m=v=>{r(v),a(v),n.onRemove(v,t.value),Iz(v)};n.beforeRemove?await n.beforeRemove(p,t.value)!==!1&&m(p):m(p)};function f(){t.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var p;return h&&((p=e.value)==null?void 0:p.upload(h))})}return pt(()=>n.listType,h=>{h!=="picture-card"&&h!=="picture"||(t.value=t.value.map(p=>{const{raw:m,url:v}=p;if(!v&&m)try{p.url=URL.createObjectURL(m)}catch(g){n.onError(g,p,t.value)}return p}))}),pt(t,h=>{for(const p of h)p.uid||(p.uid=C8()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:r,clearFiles:s,handleError:o,handleProgress:l,handleStart:u,handleSuccess:c,handleRemove:d,submit:f,revokeFileObjectURL:Iz}},YRe=Ie({name:"ElUpload"}),XRe=Ie({...YRe,props:LRe,setup(n,{expose:e}){const t=n,i=ka(),r=Ui(),{abort:s,submit:a,clearFiles:o,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:f,handleProgress:h,revokeFileObjectURL:p}=KRe(t,r),m=V(()=>t.listType==="picture-card"),v=V(()=>({...t,fileList:l.value,onStart:c,onProgress:h,onSuccess:f,onError:u,onRemove:d}));return Fi(()=>{l.value.forEach(p)}),Qn(Kee,{accept:Ii(t,"accept")}),e({abort:s,submit:a,clearFiles:o,handleStart:c,handleRemove:d}),(g,y)=>(W(),ve("div",null,[w(m)&&g.showFileList?(W(),rt(Mz,{key:0,disabled:w(i),"list-type":g.listType,files:w(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:w(d)},Il({append:Re(()=>[_e(Tz,Kn({ref_key:"uploadRef",ref:r},w(v)),{default:Re(()=>[g.$slots.trigger?Qe(g.$slots,"trigger",{key:0}):et("v-if",!0),!g.$slots.trigger&&g.$slots.default?Qe(g.$slots,"default",{key:1}):et("v-if",!0)]),_:3},16)]),_:2},[g.$slots.file?{name:"default",fn:Re(({file:x,index:b})=>[Qe(g.$slots,"file",{file:x,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):et("v-if",!0),!w(m)||w(m)&&!g.showFileList?(W(),rt(Tz,Kn({key:1,ref_key:"uploadRef",ref:r},w(v)),{default:Re(()=>[g.$slots.trigger?Qe(g.$slots,"trigger",{key:0}):et("v-if",!0),!g.$slots.trigger&&g.$slots.default?Qe(g.$slots,"default",{key:1}):et("v-if",!0)]),_:3},16)):et("v-if",!0),g.$slots.trigger?Qe(g.$slots,"default",{key:2}):et("v-if",!0),Qe(g.$slots,"tip"),!w(m)&&g.showFileList?(W(),rt(Mz,{key:3,disabled:w(i),"list-type":g.listType,files:w(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:w(d)},Il({_:2},[g.$slots.file?{name:"default",fn:Re(({file:x,index:b})=>[Qe(g.$slots,"file",{file:x,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):et("v-if",!0)]))}});var jRe=It(XRe,[["__file","upload.vue"]]);const $Re=xn(jRe),QRe=Et({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Ke([String,Array]),default:"Element Plus"},font:{type:Ke(Object)},gap:{type:Ke(Array),default:()=>[100,100]},offset:{type:Ke(Array)}});function ZRe(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase()}function JRe(n){return Object.keys(n).map(e=>`${ZRe(e)}: ${n[e]};`).join(" ")}function ePe(){return window.devicePixelRatio||1}const tPe=(n,e)=>{let t=!1;return n.removedNodes.length&&e&&(t=Array.from(n.removedNodes).includes(e)),n.type==="attributes"&&n.target===e&&(t=!0),t},$ee=3;function G5(n,e,t=1){const i=document.createElement("canvas"),r=i.getContext("2d"),s=n*t,a=e*t;return i.setAttribute("width",`${s}px`),i.setAttribute("height",`${a}px`),r.save(),[r,i,s,a]}function nPe(){function n(e,t,i,r,s,a,o,l){const[c,u,d,f]=G5(r,s,i);if(e instanceof HTMLImageElement)c.drawImage(e,0,0,d,f);else{const{color:q,fontSize:te,fontStyle:Q,fontWeight:ee,fontFamily:de,textAlign:J,textBaseline:ue}=a,Te=Number(te)*i;c.font=`${Q} normal ${ee} ${Te}px/${s}px ${de}`,c.fillStyle=q,c.textAlign=J,c.textBaseline=ue;const De=Mt(e)?e:[e];De==null||De.forEach((Le,Ne)=>{c.fillText(Le??"",d/2,Ne*(Te+$ee*i))})}const h=Math.PI/180*Number(t),p=Math.max(r,s),[m,v,g]=G5(p,p,i);m.translate(g/2,g/2),m.rotate(h),d>0&&f>0&&m.drawImage(u,-d/2,-f/2);function y(q,te){const Q=q*Math.cos(h)-te*Math.sin(h),ee=q*Math.sin(h)+te*Math.cos(h);return[Q,ee]}let x=0,b=0,A=0,S=0;const C=d/2,_=f/2;[[0-C,0-_],[0+C,0-_],[0+C,0+_],[0-C,0+_]].forEach(([q,te])=>{const[Q,ee]=y(q,te);x=Math.min(x,Q),b=Math.max(b,Q),A=Math.min(A,ee),S=Math.max(S,ee)});const T=x+g/2,E=A+g/2,I=b-x,L=S-A,F=o*i,B=l*i,P=(I+F)*2,z=L+B,[O,N]=G5(P,z);function H(q=0,te=0){O.drawImage(v,T,E,I,L,q,te,I,L)}return H(),H(I+F,-L/2-B/2),H(I+F,+L/2+B/2),[N.toDataURL(),P/i,z/i]}return n}const iPe=Ie({name:"ElWatermark"}),rPe=Ie({...iPe,props:QRe,setup(n){const e=n,t={position:"relative"},i=V(()=>{var T,E;return(E=(T=e.font)==null?void 0:T.color)!=null?E:"rgba(0,0,0,.15)"}),r=V(()=>{var T,E;return(E=(T=e.font)==null?void 0:T.fontSize)!=null?E:16}),s=V(()=>{var T,E;return(E=(T=e.font)==null?void 0:T.fontWeight)!=null?E:"normal"}),a=V(()=>{var T,E;return(E=(T=e.font)==null?void 0:T.fontStyle)!=null?E:"normal"}),o=V(()=>{var T,E;return(E=(T=e.font)==null?void 0:T.fontFamily)!=null?E:"sans-serif"}),l=V(()=>{var T,E;return(E=(T=e.font)==null?void 0:T.textAlign)!=null?E:"center"}),c=V(()=>{var T,E;return(E=(T=e.font)==null?void 0:T.textBaseline)!=null?E:"hanging"}),u=V(()=>e.gap[0]),d=V(()=>e.gap[1]),f=V(()=>u.value/2),h=V(()=>d.value/2),p=V(()=>{var T,E;return(E=(T=e.offset)==null?void 0:T[0])!=null?E:f.value}),m=V(()=>{var T,E;return(E=(T=e.offset)==null?void 0:T[1])!=null?E:h.value}),v=()=>{const T={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let E=p.value-f.value,I=m.value-h.value;return E>0&&(T.left=`${E}px`,T.width=`calc(100% - ${E}px)`,E=0),I>0&&(T.top=`${I}px`,T.height=`calc(100% - ${I}px)`,I=0),T.backgroundPosition=`${E}px ${I}px`,T},g=Ui(null),y=Ui(),x=ae(!1),b=()=>{y.value&&(y.value.remove(),y.value=void 0)},A=(T,E)=>{var I;g.value&&y.value&&(x.value=!0,y.value.setAttribute("style",JRe({...v(),backgroundImage:`url('${T}')`,backgroundSize:`${Math.floor(E)}px`})),(I=g.value)==null||I.append(y.value),setTimeout(()=>{x.value=!1}))},S=T=>{let E=120,I=64;const L=e.image,F=e.content,B=e.width,P=e.height;if(!L&&T.measureText){T.font=`${Number(r.value)}px ${o.value}`;const z=Mt(F)?F:[F],O=z.map(N=>{const H=T.measureText(N);return[H.width,H.fontBoundingBoxAscent!==void 0?H.fontBoundingBoxAscent+H.fontBoundingBoxDescent:H.actualBoundingBoxAscent+H.actualBoundingBoxDescent]});E=Math.ceil(Math.max(...O.map(N=>N[0]))),I=Math.ceil(Math.max(...O.map(N=>N[1])))*z.length+(z.length-1)*$ee}return[B??E,P??I]},C=nPe(),_=()=>{const E=document.createElement("canvas").getContext("2d"),I=e.image,L=e.content,F=e.rotate;if(E){y.value||(y.value=document.createElement("div"));const B=ePe(),[P,z]=S(E),O=N=>{const[H,q]=C(N||"",F,B,P,z,{color:i.value,fontSize:r.value,fontStyle:a.value,fontWeight:s.value,fontFamily:o.value,textAlign:l.value,textBaseline:c.value},u.value,d.value);A(H,q)};if(I){const N=new Image;N.onload=()=>{O(N)},N.onerror=()=>{O(L)},N.crossOrigin="anonymous",N.referrerPolicy="no-referrer",N.src=I}else O(L)}};return Mn(()=>{_()}),pt(()=>e,()=>{_()},{deep:!0,flush:"post"}),Fi(()=>{b()}),iQ(g,T=>{x.value||T.forEach(E=>{tPe(E,y.value)&&(b(),_())})},{attributes:!0,subtree:!0,childList:!0}),(T,E)=>(W(),ve("div",{ref_key:"containerRef",ref:g,style:jt([t])},[Qe(T.$slots,"default")],4))}});var sPe=It(rPe,[["__file","watermark.vue"]]);const aPe=xn(sPe),oPe=Et({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Ke(Object)},targetAreaClickable:{type:Boolean,default:!0}}),lPe=(n,e,t,i,r)=>{const s=ae(null),a=()=>{let d;return qt(n.value)?d=document.querySelector(n.value):Xt(n.value)?d=n.value():d=n.value,d},o=()=>{const d=a();if(!d||!e.value){s.value=null;return}cPe(d)||d.scrollIntoView(r.value);const{left:f,top:h,width:p,height:m}=d.getBoundingClientRect();s.value={left:f,top:h,width:p,height:m,radius:0}};Mn(()=>{pt([e,n],()=>{o()},{immediate:!0}),window.addEventListener("resize",o)}),Fi(()=>{window.removeEventListener("resize",o)});const l=d=>{var f;return(f=Mt(t.value.offset)?t.value.offset[d]:t.value.offset)!=null?f:6},c=V(()=>{var d;if(!s.value)return s.value;const f=l(0),h=l(1),p=((d=t.value)==null?void 0:d.radius)||2;return{left:s.value.left-f,top:s.value.top-h,width:s.value.width+f*2,height:s.value.height+h*2,radius:p}}),u=V(()=>{const d=a();return!i.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var f,h,p,m;return window.DOMRect.fromRect({width:((f=c.value)==null?void 0:f.width)||0,height:((h=c.value)==null?void 0:h.height)||0,x:((p=c.value)==null?void 0:p.left)||0,y:((m=c.value)==null?void 0:m.top)||0})}}});return{mergedPosInfo:c,triggerTarget:u}},LM=Symbol("ElTour");function cPe(n){const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,{top:i,right:r,bottom:s,left:a}=n.getBoundingClientRect();return i>=0&&a>=0&&r<=e&&s<=t}const uPe=(n,e,t,i,r,s,a,o)=>{const l=ae(),c=ae(),u=ae({}),d={x:l,y:c,placement:i,strategy:r,middlewareData:u},f=V(()=>{const g=[Dee(w(s)),p8e(),h8e(),dPe()];return w(o)&&w(t)&&g.push(Ree({element:w(t)})),g}),h=async()=>{if(!li)return;const g=w(n),y=w(e);if(!g||!y)return;const x=await Pee(g,y,{placement:w(i),strategy:w(r),middleware:w(f)});p1(d).forEach(b=>{d[b].value=x[b]})},p=V(()=>{if(!w(n))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:w(a)};const{overflow:g}=w(u);return{position:w(r),zIndex:w(a),top:w(c)!=null?`${w(c)}px`:"",left:w(l)!=null?`${w(l)}px`:"",maxWidth:g!=null&&g.maxWidth?`${g==null?void 0:g.maxWidth}px`:""}}),m=V(()=>{if(!w(o))return{};const{arrow:g}=w(u);return{left:(g==null?void 0:g.x)!=null?`${g==null?void 0:g.x}px`:"",top:(g==null?void 0:g.y)!=null?`${g==null?void 0:g.y}px`:""}});let v;return Mn(()=>{const g=w(n),y=w(e);g&&y&&(v=d8e(g,y,h)),Js(()=>{h()})}),Fi(()=>{v&&v()}),{update:h,contentStyle:p,arrowStyle:m}},dPe=()=>({name:"overflow",async fn(n){const e=await f8e(n);let t=0;return e.left>0&&(t=e.left),e.right>0&&(t=e.right),{data:{maxWidth:n.rects.floating.width-t}}}}),fPe=Ie({name:"ElTourMask",inheritAttrs:!1}),hPe=Ie({...fPe,props:oPe,setup(n){const e=n,{ns:t}=Nt(LM),i=V(()=>{var o,l;return(l=(o=e.pos)==null?void 0:o.radius)!=null?l:2}),r=V(()=>{const o=i.value,l=`a${o},${o} 0 0 1`;return{topRight:`${l} ${o},${o}`,bottomRight:`${l} ${-o},${o}`,bottomLeft:`${l} ${-o},${-o}`,topLeft:`${l} ${o},${-o}`}}),s=V(()=>{const o=window.innerWidth,l=window.innerHeight,c=r.value,u=`M${o},0 L0,0 L0,${l} L${o},${l} L${o},0 Z`,d=i.value;return e.pos?`${u} M${e.pos.left+d},${e.pos.top} h${e.pos.width-d*2} ${c.topRight} v${e.pos.height-d*2} ${c.bottomRight} h${-e.pos.width+d*2} ${c.bottomLeft} v${-e.pos.height+d*2} ${c.topLeft} z`:u}),a=V(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return Ik(Ii(e,"visible"),{ns:t}),(o,l)=>o.visible?(W(),ve("div",Kn({key:0,class:w(t).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:o.zIndex,pointerEvents:o.pos&&o.targetAreaClickable?"none":"auto"}},o.$attrs),[(W(),ve("svg",{style:{width:"100%",height:"100%"}},[be("path",{class:j(w(t).e("hollow")),style:jt(w(a)),d:w(s)},null,14,["d"])]))],16)):et("v-if",!0)}});var pPe=It(hPe,[["__file","mask.vue"]]);const mPe=["absolute","fixed"],vPe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],d7=Et({placement:{type:Ke(String),values:vPe,default:"bottom"},reference:{type:Ke(Object),default:null},strategy:{type:Ke(String),values:mPe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),gPe={close:()=>!0},yPe=Ie({name:"ElTourContent"}),bPe=Ie({...yPe,props:d7,emits:gPe,setup(n,{emit:e}){const t=n,i=ae(t.placement),r=ae(t.strategy),s=ae(null),a=ae(null);pt(()=>t.placement,()=>{i.value=t.placement});const{contentStyle:o,arrowStyle:l}=uPe(Ii(t,"reference"),s,a,i,r,Ii(t,"offset"),Ii(t,"zIndex"),Ii(t,"showArrow")),c=V(()=>i.value.split("-")[0]),{ns:u}=Nt(LM),d=()=>{e("close")},f=h=>{h.detail.focusReason==="pointer"&&h.preventDefault()};return(h,p)=>(W(),ve("div",{ref_key:"contentRef",ref:s,style:jt(w(o)),class:j(w(u).e("content")),"data-side":w(c),tabindex:"-1"},[_e(w(ay),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":s.value||void 0,onReleaseRequested:d,onFocusoutPrevented:f},{default:Re(()=>[Qe(h.$slots,"default")]),_:3},8,["focus-trap-el"]),h.showArrow?(W(),ve("span",{key:0,ref_key:"arrowRef",ref:a,style:jt(w(l)),class:j(w(u).e("arrow"))},null,6)):et("v-if",!0)],14,["data-side"]))}});var xPe=It(bPe,[["__file","content.vue"]]),APe=Ie({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(n,{slots:e,emit:t}){let i=0;return()=>{var r,s;const a=(r=e.default)==null?void 0:r.call(e),o=[];let l=0;function c(u){Mt(u)&&u.forEach(d=>{var f;((f=(d==null?void 0:d.type)||{})==null?void 0:f.name)==="ElTourStep"&&(o.push(d),l+=1)})}return a.length&&c(Xd((s=a[0])==null?void 0:s.children)),i!==l&&(i=l,t("update-total",l)),o.length?o[n.current]:null}}});const wPe=Et({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:Hi},placement:d7.placement,contentStyle:{type:Ke([Object])},mask:{type:Ke([Boolean,Object]),default:!0},gap:{type:Ke(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Ke([Boolean,Object]),default:()=>({block:"center"})},type:{type:Ke(String)},appendTo:{type:Ke([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),SPe={[Tn]:n=>ji(n),"update:current":n=>Jt(n),close:n=>Jt(n),finish:()=>!0,change:n=>Jt(n)},_Pe=Ie({name:"ElTour"}),CPe=Ie({..._Pe,props:wPe,emits:SPe,setup(n,{emit:e}){const t=n,i=St("tour"),r=ae(0),s=ae(),a=rQ(t,"current",e,{passive:!0}),o=V(()=>{var M;return(M=s.value)==null?void 0:M.target}),l=V(()=>[i.b(),v.value==="primary"?i.m("primary"):""]),c=V(()=>{var M;return((M=s.value)==null?void 0:M.placement)||t.placement}),u=V(()=>{var M,T;return(T=(M=s.value)==null?void 0:M.contentStyle)!=null?T:t.contentStyle}),d=V(()=>{var M,T;return(T=(M=s.value)==null?void 0:M.mask)!=null?T:t.mask}),f=V(()=>!!d.value&&t.modelValue),h=V(()=>ji(d.value)?void 0:d.value),p=V(()=>{var M,T;return!!o.value&&((T=(M=s.value)==null?void 0:M.showArrow)!=null?T:t.showArrow)}),m=V(()=>{var M,T;return(T=(M=s.value)==null?void 0:M.scrollIntoViewOptions)!=null?T:t.scrollIntoViewOptions}),v=V(()=>{var M,T;return(T=(M=s.value)==null?void 0:M.type)!=null?T:t.type}),{nextZIndex:g}=ry(),y=g(),x=V(()=>{var M;return(M=t.zIndex)!=null?M:y}),{mergedPosInfo:b,triggerTarget:A}=lPe(o,Ii(t,"modelValue"),Ii(t,"gap"),d,m);pt(()=>t.modelValue,M=>{M||(a.value=0)});const S=()=>{t.closeOnPressEscape&&(e("update:modelValue",!1),e("close",a.value))},C=M=>{r.value=M},_=Ps();return Qn(LM,{currentStep:s,current:a,total:r,showClose:Ii(t,"showClose"),closeIcon:Ii(t,"closeIcon"),mergedType:v,ns:i,slots:_,updateModelValue(M){e("update:modelValue",M)},onClose(){e("close",a.value)},onFinish(){e("finish")},onChange(){e("change",a.value)}}),(M,T)=>(W(),ve(Kt,null,[_e(w(oy),{to:M.appendTo},{default:Re(()=>{var E,I;return[be("div",Kn({class:w(l)},M.$attrs),[_e(pPe,{visible:w(f),fill:(E=w(h))==null?void 0:E.color,style:jt((I=w(h))==null?void 0:I.style),pos:w(b),"z-index":w(x),"target-area-clickable":M.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),M.modelValue?(W(),rt(xPe,{key:w(a),reference:w(A),placement:w(c),"show-arrow":w(p),"z-index":w(x),style:jt(w(u)),onClose:S},{default:Re(()=>[_e(w(APe),{current:w(a),onUpdateTotal:C},{default:Re(()=>[Qe(M.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):et("v-if",!0)],16)]}),_:3},8,["to"]),et(" just for IDE "),et("v-if",!0)],64))}});var MPe=It(CPe,[["__file","tour.vue"]]);const TPe=Et({target:{type:Ke([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:Hi},showArrow:{type:Boolean,default:void 0},placement:d7.placement,mask:{type:Ke([Boolean,Object]),default:void 0},contentStyle:{type:Ke([Object])},prevButtonProps:{type:Ke(Object)},nextButtonProps:{type:Ke(Object)},scrollIntoViewOptions:{type:Ke([Boolean,Object]),default:void 0},type:{type:Ke(String)}}),EPe={close:()=>!0},IPe=Ie({name:"ElTourStep"}),DPe=Ie({...IPe,props:TPe,emits:EPe,setup(n,{emit:e}){const t=n,{Close:i}=ZL,{t:r}=ci(),{currentStep:s,current:a,total:o,showClose:l,closeIcon:c,mergedType:u,ns:d,slots:f,updateModelValue:h,onClose:p,onFinish:m,onChange:v}=Nt(LM);pt(t,_=>{s.value=_},{immediate:!0});const g=V(()=>{var _;return(_=t.showClose)!=null?_:l.value}),y=V(()=>{var _,M;return(M=(_=t.closeIcon)!=null?_:c.value)!=null?M:i}),x=_=>{if(_)return Fme(_,["children","onClick"])},b=()=>{var _,M;a.value-=1,(_=t.prevButtonProps)!=null&&_.onClick&&((M=t.prevButtonProps)==null||M.onClick()),v()},A=()=>{var _;a.value>=o.value-1?S():a.value+=1,(_=t.nextButtonProps)!=null&&_.onClick&&t.nextButtonProps.onClick(),v()},S=()=>{C(),m()},C=()=>{h(!1),p(),e("close")};return(_,M)=>(W(),ve(Kt,null,[w(g)?(W(),ve("button",{key:0,"aria-label":"Close",class:j(w(d).e("closebtn")),type:"button",onClick:C},[_e(w(Ut),{class:j(w(d).e("close"))},{default:Re(()=>[(W(),rt(On(w(y))))]),_:1},8,["class"])],2)):et("v-if",!0),be("header",{class:j([w(d).e("header"),{"show-close":w(l)}])},[Qe(_.$slots,"header",{},()=>[be("span",{role:"heading",class:j(w(d).e("title"))},Tt(_.title),3)])],2),be("div",{class:j(w(d).e("body"))},[Qe(_.$slots,"default",{},()=>[be("span",null,Tt(_.description),1)])],2),be("footer",{class:j(w(d).e("footer"))},[be("div",{class:j(w(d).b("indicators"))},[w(f).indicators?(W(),rt(On(w(f).indicators),{key:0,current:w(a),total:w(o)},null,8,["current","total"])):(W(!0),ve(Kt,{key:1},Jn(w(o),(T,E)=>(W(),ve("span",{key:T,class:j([w(d).b("indicator"),E===w(a)?"is-active":""])},null,2))),128))],2),be("div",{class:j(w(d).b("buttons"))},[w(a)>0?(W(),rt(w(ea),Kn({key:0,size:"small",type:w(u)},x(_.prevButtonProps),{onClick:b}),{default:Re(()=>{var T,E;return[Hn(Tt((E=(T=_.prevButtonProps)==null?void 0:T.children)!=null?E:w(r)("el.tour.previous")),1)]}),_:1},16,["type"])):et("v-if",!0),w(a)<=w(o)-1?(W(),rt(w(ea),Kn({key:1,size:"small",type:w(u)==="primary"?"default":"primary"},x(_.nextButtonProps),{onClick:A}),{default:Re(()=>{var T,E;return[Hn(Tt((E=(T=_.nextButtonProps)==null?void 0:T.children)!=null?E:w(a)===w(o)-1?w(r)("el.tour.finish"):w(r)("el.tour.next")),1)]}),_:1},16,["type"])):et("v-if",!0)],2)],2)],64))}});var Qee=It(DPe,[["__file","step.vue"]]);const RPe=xn(MPe,{TourStep:Qee}),PPe=Or(Qee),LPe=Et({container:{type:Ke([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:Ke(String),default:"default"},direction:{type:Ke(String),default:"vertical"},selectScrollTop:{type:Boolean,default:!1}}),kPe={change:n=>qt(n),click:(n,e)=>n instanceof MouseEvent&&(qt(e)||bi(e))},Zee=Symbol("anchor"),Aw=n=>{if(!li||n==="")return null;if(qt(n))try{return document.querySelector(n)}catch{return null}return n};function FPe(n){let e=0;const t=(...i)=>{e&&om(e),e=tp(()=>{n(...i),e=0})};return t.cancel=()=>{om(e),e=0},t}const BPe=Ie({name:"ElAnchor"}),NPe=Ie({...BPe,props:LPe,emits:kPe,setup(n,{expose:e,emit:t}){const i=n,r=ae(""),s=ae(null),a=ae(null),o=ae(),l={};let c=!1,u=0;const d=St("anchor"),f=V(()=>[d.b(),i.type==="underline"?d.m("underline"):"",d.m(i.direction)]),h=_=>{l[_.href]=_.el},p=_=>{delete l[_]},m=_=>{r.value!==_&&(r.value=_,t("change",_))};let v=null;const g=_=>{if(!o.value)return;const M=Aw(_);if(!M)return;v&&v(),c=!0;const T=R9(M,o.value),E=BD(M,T),I=T.scrollHeight-T.clientHeight,L=Math.min(E-i.offset,I);v=Ove(o.value,u,L,i.duration,()=>{setTimeout(()=>{c=!1},20)})},y=_=>{_&&(m(_),g(_))},x=(_,M)=>{t("click",_,M),y(M)},b=FPe(()=>{o.value&&(u=P9(o.value));const _=A();c||bi(_)||m(_)}),A=()=>{if(!o.value)return;const _=P9(o.value),M=[];for(const T of Object.keys(l)){const E=Aw(T);if(!E)continue;const I=R9(E,o.value),L=BD(E,I);M.push({top:L-i.offset-i.bound,href:T})}M.sort((T,E)=>T.top-E.top);for(let T=0;T<M.length;T++){const E=M[T],I=M[T+1];if(T===0&&_===0)return i.selectScrollTop?E.href:"";if(E.top<=_&&(!I||I.top>_))return E.href}},S=()=>{const _=Aw(i.container);!_||fM(_)?o.value=window:o.value=_};Li(o,"scroll",b);const C=V(()=>{if(!s.value||!a.value||!r.value)return{};const _=l[r.value];if(!_)return{};const M=s.value.getBoundingClientRect(),T=a.value.getBoundingClientRect(),E=_.getBoundingClientRect();return i.direction==="horizontal"?{left:`${E.left-M.left}px`,width:`${E.width}px`,opacity:1}:{top:`${E.top-M.top+(E.height-T.height)/2}px`,opacity:1}});return Mn(()=>{S();const _=decodeURIComponent(window.location.hash);Aw(_)?y(_):b()}),pt(()=>i.container,()=>{S()}),Qn(Zee,{ns:d,direction:i.direction,currentAnchor:r,addLink:h,removeLink:p,handleClick:x}),e({scrollTo:y}),(_,M)=>(W(),ve("div",{ref_key:"anchorRef",ref:s,class:j(w(f))},[_.marker?(W(),ve("div",{key:0,ref_key:"markerRef",ref:a,class:j(w(d).e("marker")),style:jt(w(C))},null,6)):et("v-if",!0),be("div",{class:j(w(d).e("list"))},[Qe(_.$slots,"default")],2)],2))}});var OPe=It(NPe,[["__file","anchor.vue"]]);const UPe=Et({title:String,href:String}),zPe=Ie({name:"ElAnchorLink"}),VPe=Ie({...zPe,props:UPe,setup(n){const e=n,t=ae(null),{ns:i,direction:r,currentAnchor:s,addLink:a,removeLink:o,handleClick:l}=Nt(Zee),c=V(()=>[i.e("link"),i.is("active",s.value===e.href)]),u=d=>{l(d,e.href)};return pt(()=>e.href,(d,f)=>{Yt(()=>{f&&o(f),d&&a({href:d,el:t.value})})}),Mn(()=>{const{href:d}=e;d&&a({href:d,el:t.value})}),Fi(()=>{const{href:d}=e;d&&o(d)}),(d,f)=>(W(),ve("div",{class:j(w(i).e("item"))},[be("a",{ref_key:"linkRef",ref:t,class:j(w(c)),href:d.href,onClick:u},[Qe(d.$slots,"default",{},()=>[Hn(Tt(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&w(r)==="vertical"?(W(),ve("div",{key:0,class:j(w(i).e("list"))},[Qe(d.$slots,"sub-link")],2)):et("v-if",!0)],2))}});var Jee=It(VPe,[["__file","anchor-link.vue"]]);const HPe=xn(OPe,{AnchorLink:Jee}),GPe=Or(Jee),WPe=Et({direction:{type:Ke(String),default:"horizontal"},options:{type:Ke(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:ws,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...ga(["ariaLabel"])}),qPe={[Tn]:n=>qt(n)||Jt(n)||ji(n),[zi]:n=>qt(n)||Jt(n)||ji(n)},KPe=Ie({name:"ElSegmented"}),YPe=Ie({...KPe,props:WPe,emits:qPe,setup(n,{emit:e}){const t=n,i=St("segmented"),r=ma(),s=gs(),a=ka(),{formItem:o}=La(),{inputId:l,isLabeledByFormItem:c}=bc(t,{formItemContext:o}),u=ae(null),d=ove(),f=Si({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),h=M=>{const T=p(M);e(Tn,T),e(zi,T)},p=M=>Rn(M)?M.value:M,m=M=>Rn(M)?M.label:M,v=M=>!!(a.value||Rn(M)&&M.disabled),g=M=>t.modelValue===p(M),y=M=>t.options.find(T=>p(T)===M),x=M=>[i.e("item"),i.is("selected",g(M)),i.is("disabled",v(M))],b=()=>{if(!u.value)return;const M=u.value.querySelector(".is-selected"),T=u.value.querySelector(".is-selected input");if(!M||!T){f.width=0,f.height=0,f.translateX=0,f.translateY=0,f.focusVisible=!1;return}const E=M.getBoundingClientRect();f.isInit=!0,t.direction==="vertical"?(f.height=E.height,f.translateY=M.offsetTop):(f.width=E.width,f.translateX=M.offsetLeft);try{f.focusVisible=T.matches(":focus-visible")}catch{}},A=V(()=>[i.b(),i.m(s.value),i.is("block",t.block)]),S=V(()=>({width:t.direction==="vertical"?"100%":`${f.width}px`,height:t.direction==="vertical"?`${f.height}px`:"100%",transform:t.direction==="vertical"?`translateY(${f.translateY}px)`:`translateX(${f.translateX}px)`,display:f.isInit?"block":"none"})),C=V(()=>[i.e("item-selected"),i.is("disabled",v(y(t.modelValue))),i.is("focus-visible",f.focusVisible)]),_=V(()=>t.name||r.value);return Fr(u,b),pt(d,b),pt(()=>t.modelValue,()=>{var M;b(),t.validateEvent&&((M=o==null?void 0:o.validate)==null||M.call(o,"change").catch(T=>void 0))},{flush:"post"}),(M,T)=>M.options.length?(W(),ve("div",{key:0,id:w(l),ref_key:"segmentedRef",ref:u,class:j(w(A)),role:"radiogroup","aria-label":w(c)?void 0:M.ariaLabel||"segmented","aria-labelledby":w(c)?w(o).labelId:void 0},[be("div",{class:j([w(i).e("group"),w(i).m(t.direction)])},[be("div",{style:jt(w(S)),class:j(w(C))},null,6),(W(!0),ve(Kt,null,Jn(M.options,(E,I)=>(W(),ve("label",{key:I,class:j(x(E))},[be("input",{class:j(w(i).e("item-input")),type:"radio",name:w(_),disabled:v(E),checked:g(E),onChange:L=>h(E)},null,42,["name","disabled","checked","onChange"]),be("div",{class:j(w(i).e("item-label"))},[Qe(M.$slots,"default",{item:E},()=>[Hn(Tt(m(E)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):et("v-if",!0)}});var XPe=It(YPe,[["__file","segmented.vue"]]);const jPe=xn(XPe),$Pe=(n,e)=>{const t=n.toLowerCase();return(e.label||e.value).toLowerCase().includes(t)},QPe=(n,e,t)=>{const{selectionEnd:i}=n;if(i===null)return;const r=n.value,s=Xa(e);let a=-1,o;for(let l=i-1;l>=0;--l){const c=r[l];if(c===t||c===`
`||c==="\r"){a=l;continue}if(s.includes(c)){const u=a===-1?i:a;o={pattern:r.slice(l+1,u),start:l+1,end:u,prefix:c,prefixIndex:l,splitIndex:a,selectionEnd:i};break}}return o},ZPe=(n,e={debug:!1,useSelectionEnd:!1})=>{const t=n.selectionStart!==null?n.selectionStart:0,i=n.selectionEnd!==null?n.selectionEnd:0,r=e.useSelectionEnd?i:t,s=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(e.debug){const f=document.querySelector("#input-textarea-caret-position-mirror-div");f!=null&&f.parentNode&&f.parentNode.removeChild(f)}const a=document.createElement("div");a.id="input-textarea-caret-position-mirror-div",document.body.appendChild(a);const o=a.style,l=window.getComputedStyle(n),c=n.nodeName==="INPUT";o.whiteSpace=c?"nowrap":"pre-wrap",c||(o.wordWrap="break-word"),o.position="absolute",e.debug||(o.visibility="hidden"),s.forEach(f=>{if(c&&f==="lineHeight")if(l.boxSizing==="border-box"){const h=Number.parseInt(l.height),p=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),m=p+Number.parseInt(l.lineHeight);h>m?o.lineHeight=`${h-p}px`:h===m?o.lineHeight=l.lineHeight:o.lineHeight="0"}else o.lineHeight=l.height;else o[f]=l[f]}),yM()?n.scrollHeight>Number.parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",a.textContent=n.value.slice(0,Math.max(0,r)),c&&a.textContent&&(a.textContent=a.textContent.replace(/\s/g," "));const u=document.createElement("span");u.textContent=n.value.slice(Math.max(0,r))||".",u.style.position="relative",u.style.left=`${-n.scrollLeft}px`,u.style.top=`${-n.scrollTop}px`,a.appendChild(u);const d={top:u.offsetTop+Number.parseInt(l.borderTopWidth),left:u.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return e.debug?u.style.backgroundColor="#aaa":document.body.removeChild(a),d.left>=n.clientWidth&&(d.left=n.clientWidth),d},JPe=Et({...ek,options:{type:Ke(Array),default:()=>[]},prefix:{type:Ke([String,Array]),default:"@",validator:n=>qt(n)?n.length===1:n.every(e=>qt(e)&&e.length===1)},split:{type:String,default:" ",validator:n=>n.length===1},filterOption:{type:Ke([Boolean,Function]),default:()=>$Pe,validator:n=>n===!1?!0:Xt(n)},placement:{type:Ke(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:Ke(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ke(Object),default:()=>({})}}),eLe={[Tn]:n=>qt(n),search:(n,e)=>qt(n)&&qt(e),select:(n,e)=>qt(n.value)&&qt(e),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},tLe=Et({options:{type:Ke(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),nLe={select:n=>qt(n.value)},iLe=Ie({name:"ElMentionDropdown"}),rLe=Ie({...iLe,props:tLe,emits:nLe,setup(n,{expose:e,emit:t}){const i=n,r=St("mention"),{t:s}=ci(),a=ae(-1),o=ae(),l=ae(),c=ae(),u=(x,b)=>[r.be("dropdown","item"),r.is("hovering",a.value===b),r.is("disabled",x.disabled||i.disabled)],d=x=>{x.disabled||i.disabled||t("select",x)},f=x=>{a.value=x},h=V(()=>i.disabled||i.options.every(x=>x.disabled)),p=V(()=>i.options[a.value]),m=()=>{p.value&&t("select",p.value)},v=x=>{const{options:b}=i;if(b.length===0||h.value)return;x==="next"?(a.value++,a.value===b.length&&(a.value=0)):x==="prev"&&(a.value--,a.value<0&&(a.value=b.length-1));const A=b[a.value];if(A.disabled){v(x);return}Yt(()=>g(A))},g=x=>{var b,A,S,C;const{options:_}=i,M=_.findIndex(E=>E.value===x.value),T=(b=l.value)==null?void 0:b[M];if(T){const E=(S=(A=c.value)==null?void 0:A.querySelector)==null?void 0:S.call(A,`.${r.be("dropdown","wrap")}`);E&&KL(E,T)}(C=o.value)==null||C.handleScroll()};return pt(()=>i.options,()=>{h.value||i.options.length===0?a.value=-1:a.value=0},{immediate:!0}),e({hoveringIndex:a,navigateOptions:v,selectHoverOption:m,hoverOption:p}),(x,b)=>(W(),ve("div",{ref_key:"dropdownRef",ref:c,class:j(w(r).b("dropdown"))},[x.$slots.header?(W(),ve("div",{key:0,class:j(w(r).be("dropdown","header"))},[Qe(x.$slots,"header")],2)):et("v-if",!0),Cn(_e(w(sd),{id:x.contentId,ref_key:"scrollbarRef",ref:o,tag:"ul","wrap-class":w(r).be("dropdown","wrap"),"view-class":w(r).be("dropdown","list"),role:"listbox","aria-label":x.ariaLabel,"aria-orientation":"vertical"},{default:Re(()=>[(W(!0),ve(Kt,null,Jn(x.options,(A,S)=>(W(),ve("li",{id:`${x.contentId}-${S}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:S,class:j(u(A,S)),role:"option","aria-disabled":A.disabled||x.disabled||void 0,"aria-selected":a.value===S,onMousemove:C=>f(S),onClick:ln(C=>d(A),["stop"])},[Qe(x.$slots,"label",{item:A,index:S},()=>{var C;return[be("span",null,Tt((C=A.label)!=null?C:A.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[yi,x.options.length>0&&!x.loading]]),x.loading?(W(),ve("div",{key:1,class:j(w(r).be("dropdown","loading"))},[Qe(x.$slots,"loading",{},()=>[Hn(Tt(w(s)("el.mention.loading")),1)])],2)):et("v-if",!0),x.$slots.footer?(W(),ve("div",{key:2,class:j(w(r).be("dropdown","footer"))},[Qe(x.$slots,"footer")],2)):et("v-if",!0)],2))}});var sLe=It(rLe,[["__file","mention-dropdown.vue"]]);const aLe=Ie({name:"ElMention",inheritAttrs:!1}),oLe=Ie({...aLe,props:JPe,emits:eLe,setup(n,{expose:e,emit:t}){const i=n,r=V(()=>Gc(i,Object.keys(ek))),s=St("mention"),a=ka(),o=ma(),l=ae(),c=ae(),u=ae(),d=ae(!1),f=ae(),h=ae(),p=V(()=>i.showArrow?i.placement:`${i.placement}-start`),m=V(()=>i.showArrow?["bottom","top"]:["bottom-start","top-start"]),v=V(()=>{const{filterOption:I,options:L}=i;return!h.value||!I?L:L.filter(F=>I(h.value.pattern,F))}),g=V(()=>d.value&&(!!v.value.length||i.loading)),y=V(()=>{var I;return`${o.value}-${(I=u.value)==null?void 0:I.hoveringIndex}`}),x=I=>{t("update:modelValue",I),M()},b=I=>{var L,F,B,P;if(!(!("code"in I)||(L=l.value)!=null&&L.isComposing))switch(I.code){case kt.left:case kt.right:M();break;case kt.up:case kt.down:if(!d.value)return;I.preventDefault(),(F=u.value)==null||F.navigateOptions(I.code===kt.up?"prev":"next");break;case kt.enter:case kt.numpadEnter:if(!d.value)return;I.preventDefault(),(B=u.value)!=null&&B.hoverOption?(P=u.value)==null||P.selectHoverOption():d.value=!1;break;case kt.esc:if(!d.value)return;I.preventDefault(),d.value=!1;break;case kt.backspace:if(i.whole&&h.value){const{splitIndex:z,selectionEnd:O,pattern:N,prefixIndex:H,prefix:q}=h.value,te=_();if(!te)return;const Q=te.value,ee=i.options.find(J=>J.value===N);if((Xt(i.checkIsWhole)?i.checkIsWhole(N,q):ee)&&z!==-1&&z+1===O){I.preventDefault();const J=Q.slice(0,H)+Q.slice(z+1);t(Tn,J);const ue=H;Yt(()=>{te.selectionStart=ue,te.selectionEnd=ue,E()})}}}},{wrapperRef:A}=Sp(l,{beforeFocus(){return a.value},afterFocus(){M()},beforeBlur(I){var L;return(L=c.value)==null?void 0:L.isFocusInsideContent(I)},afterBlur(){d.value=!1}}),S=()=>{M()},C=I=>{if(!h.value)return;const L=_();if(!L)return;const F=L.value,{split:B}=i,P=F.slice(h.value.end),z=P.startsWith(B),O=`${I.value}${z?"":B}`,N=F.slice(0,h.value.start)+O+P;t(Tn,N),t("select",I,h.value.prefix);const H=h.value.start+O.length+(z?1:0);Yt(()=>{L.selectionStart=H,L.selectionEnd=H,L.focus(),E()})},_=()=>{var I,L;return i.type==="textarea"?(I=l.value)==null?void 0:I.textarea:(L=l.value)==null?void 0:L.input},M=()=>{setTimeout(()=>{T(),E(),Yt(()=>{var I;return(I=c.value)==null?void 0:I.updatePopper()})},0)},T=()=>{const I=_();if(!I)return;const L=ZPe(I),F=I.getBoundingClientRect(),B=l.value.$el.getBoundingClientRect();f.value={position:"absolute",width:0,height:`${L.height}px`,left:`${L.left+F.left-B.left}px`,top:`${L.top+F.top-B.top}px`}},E=()=>{const I=_();if(document.activeElement!==I){d.value=!1;return}const{prefix:L,split:F}=i;if(h.value=QPe(I,L,F),h.value&&h.value.splitIndex===-1){d.value=!0,t("search",h.value.pattern,h.value.prefix);return}d.value=!1};return e({input:l,tooltip:c,dropdownVisible:g}),(I,L)=>(W(),ve("div",{ref_key:"wrapperRef",ref:A,class:j([w(s).b(),w(s).is("disabled",w(a))])},[_e(w(Qa),Kn(Kn(w(r),I.$attrs),{ref_key:"elInputRef",ref:l,"model-value":I.modelValue,disabled:w(a),role:w(g)?"combobox":void 0,"aria-activedescendant":w(g)?w(y)||"":void 0,"aria-controls":w(g)?w(o):void 0,"aria-expanded":w(g)||void 0,"aria-label":I.ariaLabel,"aria-autocomplete":w(g)?"none":void 0,"aria-haspopup":w(g)?"listbox":void 0,onInput:x,onKeydown:b,onMousedown:S}),Il({_:2},[Jn(I.$slots,(F,B)=>({name:B,fn:Re(P=>[Qe(I.$slots,B,yl(Yu(P)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),_e(w(Da),{ref_key:"tooltipRef",ref:c,visible:w(g),"popper-class":[w(s).e("popper"),I.popperClass],"popper-options":I.popperOptions,placement:w(p),"fallback-placements":w(m),effect:"light",pure:"",offset:I.offset,"show-arrow":I.showArrow},{default:Re(()=>[be("div",{style:jt(f.value)},null,4)]),content:Re(()=>{var F;return[_e(sLe,{ref_key:"dropdownRef",ref:u,options:w(v),disabled:w(a),loading:I.loading,"content-id":w(o),"aria-label":I.ariaLabel,onSelect:C,onClick:ln((F=l.value)==null?void 0:F.focus,["stop"])},Il({_:2},[Jn(I.$slots,(B,P)=>({name:P,fn:Re(z=>[Qe(I.$slots,P,yl(Yu(z)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var lLe=It(oLe,[["__file","mention.vue"]]);const cLe=xn(lLe);var uLe=[Gve,d1e,rbe,qIe,ube,gbe,QQ,Ibe,Dbe,ea,rZ,_xe,Ixe,Kxe,Yxe,YAe,_Z,JAe,vc,oAe,mZ,rwe,xwe,Awe,wM,Ywe,$we,lSe,cSe,uSe,dSe,fSe,N3e,Y3e,X3e,a_e,$Z,v_e,sCe,aCe,oCe,sJ,a4e,o4e,Ut,y4e,lJ,Qa,cJ,L4e,U4e,rMe,sMe,aMe,oMe,hMe,iTe,cTe,yTe,YQ,yJ,wZ,xAe,bAe,ETe,LTe,zTe,sd,lm,AC,NMe,y5e,T5e,E5e,Y5e,Z5e,RJ,cEe,yEe,bEe,CEe,F6e,B6e,WIe,aDe,oDe,x1,fDe,i3e,yDe,SDe,_De,Da,P8e,q8e,LC,uRe,TRe,$Re,aPe,RPe,PPe,HPe,GPe,jPe,cLe];const Kl="ElInfiniteScroll",dLe=50,fLe=200,hLe=0,pLe={delay:{type:Number,default:fLe},distance:{type:Number,default:hLe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},f7=(n,e)=>Object.entries(pLe).reduce((t,[i,r])=>{var s,a;const{type:o,default:l}=r,c=n.getAttribute(`infinite-scroll-${i}`);let u=(a=(s=e[c])!=null?s:c)!=null?a:l;return u=u==="false"?!1:u,u=o(u),t[i]=Number.isNaN(u)?l:u,t},{}),ete=n=>{const{observer:e}=n[Kl];e&&(e.disconnect(),delete n[Kl].observer)},mLe=(n,e)=>{const{container:t,containerEl:i,instance:r,observer:s,lastScrollTop:a}=n[Kl],{disabled:o,distance:l}=f7(n,r),{clientHeight:c,scrollHeight:u,scrollTop:d}=i,f=d-a;if(n[Kl].lastScrollTop=d,s||o||f<0)return;let h=!1;if(t===n)h=u-(c+d)<=l;else{const{clientTop:p,scrollHeight:m}=n,v=BD(n,i);h=d+c>=v+p+m-l}h&&e.call(r)};function W5(n,e){const{containerEl:t,instance:i}=n[Kl],{disabled:r}=f7(n,i);r||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(i):ete(n))}const vLe={async mounted(n,e){const{instance:t,value:i}=e;Xt(i)||Rs(Kl,"'v-infinite-scroll' binding value must be a function"),await Yt();const{delay:r,immediate:s}=f7(n,t),a=qL(n,!0),o=a===window?document.documentElement:a,l=K0(mLe.bind(null,n,i),r);if(a){if(n[Kl]={instance:t,container:a,containerEl:o,delay:r,cb:i,onScroll:l,lastScrollTop:o.scrollTop},s){const c=new MutationObserver(K0(W5.bind(null,n,i),dLe));n[Kl].observer=c,c.observe(n,{childList:!0,subtree:!0}),W5(n,i)}a.addEventListener("scroll",l)}},unmounted(n){if(!n[Kl])return;const{container:e,onScroll:t}=n[Kl];e==null||e.removeEventListener("scroll",t),ete(n)},async updated(n){if(!n[Kl])await Yt();else{const{containerEl:e,cb:t,observer:i}=n[Kl];e.clientHeight&&i&&W5(n,t)}}},M8=vLe;M8.install=n=>{n.directive("InfiniteScroll",M8)};const gLe=M8;function yLe(n){let e;const t=ae(!1),i=Si({...n,originalPosition:"",originalOverflow:"",visible:!1});function r(f){i.text=f}function s(){const f=i.parent,h=d.ns;if(!f.vLoadingAddClassList){let p=f.getAttribute("loading-number");p=Number.parseInt(p)-1,p?f.setAttribute("loading-number",p.toString()):(Za(f,h.bm("parent","relative")),f.removeAttribute("loading-number")),Za(f,h.bm("parent","hidden"))}a(),u.unmount()}function a(){var f,h;(h=(f=d.$el)==null?void 0:f.parentNode)==null||h.removeChild(d.$el)}function o(){var f;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=setTimeout(l,400),i.visible=!1,(f=n.closed)==null||f.call(n))}function l(){if(!t.value)return;const f=i.parent;t.value=!1,f.vLoadingAddClassList=void 0,s()}const u=u$(Ie({name:"ElLoading",setup(f,{expose:h}){const{ns:p,zIndex:m}=mM("loading");return h({ns:p,zIndex:m}),()=>{const v=i.spinner||i.svg,g=en("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...v?{innerHTML:v}:{}},[en("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),y=i.text?en("p",{class:p.b("text")},[i.text]):void 0;return en(na,{name:p.b("fade"),onAfterLeave:l},{default:Re(()=>[Cn(_e("div",{style:{backgroundColor:i.background||""},class:[p.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[en("div",{class:p.b("spinner")},[g,y])]),[[yi,i.visible]])])})}}})),d=u.mount(document.createElement("div"));return{...Vs(i),setText:r,removeElLoadingChild:a,close:o,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let ww;const T8=function(n={}){if(!li)return;const e=bLe(n);if(e.fullscreen&&ww)return ww;const t=yLe({...e,closed:()=>{var r;(r=e.closed)==null||r.call(e),e.fullscreen&&(ww=void 0)}});xLe(e,e.parent,t),Dz(e,e.parent,t),e.parent.vLoadingAddClassList=()=>Dz(e,e.parent,t);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(t.$el),Yt(()=>t.visible.value=e.visible),e.fullscreen&&(ww=t),t},bLe=n=>{var e,t,i,r;let s;return qt(n.target)?s=(e=document.querySelector(n.target))!=null?e:document.body:s=n.target||document.body,{parent:s===document.body||n.body?document.body:s,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:s===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(i=n.lock)!=null?i:!1,customClass:n.customClass||"",visible:(r=n.visible)!=null?r:!0,beforeClose:n.beforeClose,closed:n.closed,target:s}},xLe=async(n,e,t)=>{const{nextZIndex:i}=t.vm.zIndex||t.vm._.exposed.zIndex,r={};if(n.fullscreen)t.originalPosition.value=Gd(document.body,"position"),t.originalOverflow.value=Gd(document.body,"overflow"),r.zIndex=i();else if(n.parent===document.body){t.originalPosition.value=Gd(document.body,"position"),await Yt();for(const s of["top","left"]){const a=s==="top"?"scrollTop":"scrollLeft";r[s]=`${n.target.getBoundingClientRect()[s]+document.body[a]+document.documentElement[a]-Number.parseInt(Gd(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])r[s]=`${n.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=Gd(e,"position");for(const[s,a]of Object.entries(r))t.$el.style[s]=a},Dz=(n,e,t)=>{const i=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?Za(e,i.bm("parent","relative")):tc(e,i.bm("parent","relative")),n.fullscreen&&n.lock?tc(e,i.bm("parent","hidden")):Za(e,i.bm("parent","hidden"))},p_=Symbol("ElLoading"),Rz=(n,e)=>{var t,i,r,s;const a=e.instance,o=f=>Rn(e.value)?e.value[f]:void 0,l=f=>{const h=qt(f)&&(a==null?void 0:a[f])||f;return h&&ae(h)},c=f=>l(o(f)||n.getAttribute(`element-loading-${Sf(f)}`)),u=(t=o("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(i=o("target"))!=null?i:u?void 0:n,body:(r=o("body"))!=null?r:e.modifiers.body,lock:(s=o("lock"))!=null?s:e.modifiers.lock};n[p_]={options:d,instance:T8(d)}},ALe=(n,e)=>{for(const t of Object.keys(e))ir(e[t])&&(e[t].value=n[t])},Pz={mounted(n,e){e.value&&Rz(n,e)},updated(n,e){const t=n[p_];e.oldValue!==e.value&&(e.value&&!e.oldValue?Rz(n,e):e.value&&e.oldValue?Rn(e.value)&&ALe(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[p_])==null||e.instance.close(),n[p_]=null}},wLe={install(n){n.directive("loading",Pz),n.config.globalProperties.$loading=T8},directive:Pz,service:T8},tte=["success","info","warning","error"],Ha=Br({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:li?document.body:void 0}),SLe=Et({customClass:{type:String,default:Ha.customClass},center:{type:Boolean,default:Ha.center},dangerouslyUseHTMLString:{type:Boolean,default:Ha.dangerouslyUseHTMLString},duration:{type:Number,default:Ha.duration},icon:{type:Hi,default:Ha.icon},id:{type:String,default:Ha.id},message:{type:Ke([String,Object,Function]),default:Ha.message},onClose:{type:Ke(Function),default:Ha.onClose},showClose:{type:Boolean,default:Ha.showClose},type:{type:String,values:tte,default:Ha.type},plain:{type:Boolean,default:Ha.plain},offset:{type:Number,default:Ha.offset},zIndex:{type:Number,default:Ha.zIndex},grouping:{type:Boolean,default:Ha.grouping},repeatNum:{type:Number,default:Ha.repeatNum}}),_Le={destroy:()=>!0},Wc=sj([]),CLe=n=>{const e=Wc.findIndex(r=>r.id===n),t=Wc[e];let i;return e>0&&(i=Wc[e-1]),{current:t,prev:i}},MLe=n=>{const{prev:e}=CLe(n);return e?e.vm.exposed.bottom.value:0},TLe=(n,e)=>Wc.findIndex(i=>i.id===n)>0?16:e,ELe=Ie({name:"ElMessage"}),ILe=Ie({...ELe,props:SLe,emits:_Le,setup(n,{expose:e}){const t=n,{Close:i}=JL,{ns:r,zIndex:s}=mM("message"),{currentZIndex:a,nextZIndex:o}=s,l=ae(),c=ae(!1),u=ae(0);let d;const f=V(()=>t.type?t.type==="error"?"danger":t.type:"info"),h=V(()=>{const C=t.type;return{[r.bm("icon",C)]:C&&sp[C]}}),p=V(()=>t.icon||sp[t.type]||""),m=V(()=>MLe(t.id)),v=V(()=>TLe(t.id,t.offset)+m.value),g=V(()=>u.value+v.value),y=V(()=>({top:`${v.value}px`,zIndex:a.value}));function x(){t.duration!==0&&({stop:d}=am(()=>{A()},t.duration))}function b(){d==null||d()}function A(){c.value=!1}function S({code:C}){C===kt.esc&&A()}return Mn(()=>{x(),o(),c.value=!0}),pt(()=>t.repeatNum,()=>{b(),x()}),Li(document,"keydown",S),Fr(l,()=>{u.value=l.value.getBoundingClientRect().height}),e({visible:c,bottom:g,close:A}),(C,_)=>(W(),rt(na,{name:w(r).b("fade"),onBeforeLeave:C.onClose,onAfterLeave:M=>C.$emit("destroy"),persisted:""},{default:Re(()=>[Cn(be("div",{id:C.id,ref_key:"messageRef",ref:l,class:j([w(r).b(),{[w(r).m(C.type)]:C.type},w(r).is("center",C.center),w(r).is("closable",C.showClose),w(r).is("plain",C.plain),C.customClass]),style:jt(w(y)),role:"alert",onMouseenter:b,onMouseleave:x},[C.repeatNum>1?(W(),rt(w(QQ),{key:0,value:C.repeatNum,type:w(f),class:j(w(r).e("badge"))},null,8,["value","type","class"])):et("v-if",!0),w(p)?(W(),rt(w(Ut),{key:1,class:j([w(r).e("icon"),w(h)])},{default:Re(()=>[(W(),rt(On(w(p))))]),_:1},8,["class"])):et("v-if",!0),Qe(C.$slots,"default",{},()=>[C.dangerouslyUseHTMLString?(W(),ve(Kt,{key:1},[et(" Caution here, message could've been compromised, never use user's input as message "),be("p",{class:j(w(r).e("content")),innerHTML:C.message},null,10,["innerHTML"])],2112)):(W(),ve("p",{key:0,class:j(w(r).e("content"))},Tt(C.message),3))]),C.showClose?(W(),rt(w(Ut),{key:2,class:j(w(r).e("closeBtn")),onClick:ln(A,["stop"])},{default:Re(()=>[_e(w(i))]),_:1},8,["class","onClick"])):et("v-if",!0)],46,["id"]),[[yi,c.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var DLe=It(ILe,[["__file","message.vue"]]);let RLe=1;const nte=n=>{const e=!n||qt(n)||mr(n)||Xt(n)?{message:n}:n,t={...Ha,...e};if(!t.appendTo)t.appendTo=document.body;else if(qt(t.appendTo)){let i=document.querySelector(t.appendTo);bo(i)||(i=document.body),t.appendTo=i}return ji(Uc.grouping)&&!t.grouping&&(t.grouping=Uc.grouping),Jt(Uc.duration)&&t.duration===3e3&&(t.duration=Uc.duration),Jt(Uc.offset)&&t.offset===16&&(t.offset=Uc.offset),ji(Uc.showClose)&&!t.showClose&&(t.showClose=Uc.showClose),t},PLe=n=>{const e=Wc.indexOf(n);if(e===-1)return;Wc.splice(e,1);const{handler:t}=n;t.close()},LLe=({appendTo:n,...e},t)=>{const i=`message_${RLe++}`,r=e.onClose,s=document.createElement("div"),a={...e,id:i,onClose:()=>{r==null||r(),PLe(u)},onDestroy:()=>{Jh(null,s)}},o=_e(DLe,a,Xt(a.message)||mr(a.message)?{default:Xt(a.message)?a.message:()=>a.message}:null);o.appContext=t||E1._context,Jh(o,s),n.appendChild(s.firstElementChild);const l=o.component,u={id:i,vnode:o,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:o.component.props};return u},E1=(n={},e)=>{if(!li)return{close:()=>{}};const t=nte(n);if(t.grouping&&Wc.length){const r=Wc.find(({vnode:s})=>{var a;return((a=s.props)==null?void 0:a.message)===t.message});if(r)return r.props.repeatNum+=1,r.props.type=t.type,r.handler}if(Jt(Uc.max)&&Wc.length>=Uc.max)return{close:()=>{}};const i=LLe(t,e);return Wc.push(i),i.handler};tte.forEach(n=>{E1[n]=(e={},t)=>{const i=nte(e);return E1({...i,type:n},t)}});function kLe(n){for(const e of Wc)(!n||n===e.props.type)&&e.handler.close()}E1.closeAll=kLe;E1._context=null;const FLe=gQ(E1,"$message"),E8="_trap-focus-children",k0=[],Lz=n=>{if(k0.length===0)return;const e=k0[k0.length-1][E8];if(e.length>0&&n.code===kt.tab){if(e.length===1){n.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=n.shiftKey,i=n.target===e[0],r=n.target===e[e.length-1];i&&t&&(n.preventDefault(),e[e.length-1].focus()),r&&!t&&(n.preventDefault(),e[0].focus())}},BLe={beforeMount(n){n[E8]=N9(n),k0.push(n),k0.length<=1&&document.addEventListener("keydown",Lz)},updated(n){Yt(()=>{n[E8]=N9(n)})},unmounted(){k0.shift(),k0.length===0&&document.removeEventListener("keydown",Lz)}},NLe=Ie({name:"ElMessageBox",directives:{TrapFocus:BLe},components:{ElButton:ea,ElFocusTrap:ay,ElInput:Qa,ElOverlay:Ek,ElIcon:Ut,...JL},inheritAttrs:!1,props:{buttonSize:{type:String,validator:LJ},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(n,{emit:e}){const{locale:t,zIndex:i,ns:r,size:s}=mM("message-box",V(()=>n.buttonSize)),{t:a}=t,{nextZIndex:o}=i,l=ae(!1),c=Si({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:tf(ju),cancelButtonLoadingIcon:tf(ju),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),u=V(()=>{const P=c.type;return{[r.bm("icon",P)]:P&&sp[P]}}),d=ma(),f=ma(),h=V(()=>{const P=c.type;return c.icon||P&&sp[P]||""}),p=V(()=>!!c.message),m=ae(),v=ae(),g=ae(),y=ae(),x=ae(),b=V(()=>c.confirmButtonClass);pt(()=>c.inputValue,async P=>{await Yt(),n.boxType==="prompt"&&P&&I()},{immediate:!0}),pt(()=>l.value,P=>{var z,O;P&&(n.boxType!=="prompt"&&(c.autofocus?g.value=(O=(z=x.value)==null?void 0:z.$el)!=null?O:m.value:g.value=m.value),c.zIndex=o()),n.boxType==="prompt"&&(P?Yt().then(()=>{var N;y.value&&y.value.$el&&(c.autofocus?g.value=(N=L())!=null?N:m.value:g.value=m.value)}):(c.editorErrorMessage="",c.validateError=!1))});const A=V(()=>n.draggable),S=V(()=>n.overflow);KZ(m,v,A,S),Mn(async()=>{await Yt(),n.closeOnHashChange&&window.addEventListener("hashchange",C)}),Fi(()=>{n.closeOnHashChange&&window.removeEventListener("hashchange",C)});function C(){l.value&&(l.value=!1,Yt(()=>{c.action&&e("action",c.action)}))}const _=()=>{n.closeOnClickModal&&E(c.distinguishCancelAndClose?"close":"cancel")},M=Tk(_),T=P=>{if(c.inputType!=="textarea")return P.preventDefault(),E("confirm")},E=P=>{var z;n.boxType==="prompt"&&P==="confirm"&&!I()||(c.action=P,c.beforeClose?(z=c.beforeClose)==null||z.call(c,P,c,C):C())},I=()=>{if(n.boxType==="prompt"){const P=c.inputPattern;if(P&&!P.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||a("el.messagebox.error"),c.validateError=!0,!1;const z=c.inputValidator;if(Xt(z)){const O=z(c.inputValue);if(O===!1)return c.editorErrorMessage=c.inputErrorMessage||a("el.messagebox.error"),c.validateError=!0,!1;if(qt(O))return c.editorErrorMessage=O,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},L=()=>{var P,z;const O=(P=y.value)==null?void 0:P.$refs;return(z=O==null?void 0:O.input)!=null?z:O==null?void 0:O.textarea},F=()=>{E("close")},B=()=>{n.closeOnPressEscape&&F()};return n.lockScroll&&Ik(l),{...Vs(c),ns:r,overlayEvent:M,visible:l,hasMessage:p,typeClass:u,contentId:d,inputId:f,btnSize:s,iconComponent:h,confirmButtonClasses:b,rootRef:m,focusStartRef:g,headerRef:v,inputRef:y,confirmRef:x,doClose:C,handleClose:F,onCloseRequested:B,handleWrapperClick:_,handleInputEnter:T,handleAction:E,t:a}}});function OLe(n,e,t,i,r,s){const a=an("el-icon"),o=an("el-input"),l=an("el-button"),c=an("el-focus-trap"),u=an("el-overlay");return W(),rt(na,{name:"fade-in-linear",onAfterLeave:d=>n.$emit("vanish"),persisted:""},{default:Re(()=>[Cn(_e(u,{"z-index":n.zIndex,"overlay-class":[n.ns.is("message-box"),n.modalClass],mask:n.modal},{default:Re(()=>[be("div",{role:"dialog","aria-label":n.title,"aria-modal":"true","aria-describedby":n.showInput?void 0:n.contentId,class:j(`${n.ns.namespace.value}-overlay-message-box`),onClick:n.overlayEvent.onClick,onMousedown:n.overlayEvent.onMousedown,onMouseup:n.overlayEvent.onMouseup},[_e(c,{loop:"",trapped:n.visible,"focus-trap-el":n.rootRef,"focus-start-el":n.focusStartRef,onReleaseRequested:n.onCloseRequested},{default:Re(()=>[be("div",{ref:"rootRef",class:j([n.ns.b(),n.customClass,n.ns.is("draggable",n.draggable),{[n.ns.m("center")]:n.center}]),style:jt(n.customStyle),tabindex:"-1",onClick:ln(()=>{},["stop"])},[n.title!==null&&n.title!==void 0?(W(),ve("div",{key:0,ref:"headerRef",class:j([n.ns.e("header"),{"show-close":n.showClose}])},[be("div",{class:j(n.ns.e("title"))},[n.iconComponent&&n.center?(W(),rt(a,{key:0,class:j([n.ns.e("status"),n.typeClass])},{default:Re(()=>[(W(),rt(On(n.iconComponent)))]),_:1},8,["class"])):et("v-if",!0),be("span",null,Tt(n.title),1)],2),n.showClose?(W(),ve("button",{key:0,type:"button",class:j(n.ns.e("headerbtn")),"aria-label":n.t("el.messagebox.close"),onClick:d=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),onKeydown:Xi(ln(d=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[_e(a,{class:j(n.ns.e("close"))},{default:Re(()=>[(W(),rt(On(n.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):et("v-if",!0)],2)):et("v-if",!0),be("div",{id:n.contentId,class:j(n.ns.e("content"))},[be("div",{class:j(n.ns.e("container"))},[n.iconComponent&&!n.center&&n.hasMessage?(W(),rt(a,{key:0,class:j([n.ns.e("status"),n.typeClass])},{default:Re(()=>[(W(),rt(On(n.iconComponent)))]),_:1},8,["class"])):et("v-if",!0),n.hasMessage?(W(),ve("div",{key:1,class:j(n.ns.e("message"))},[Qe(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?(W(),rt(On(n.showInput?"label":"p"),{key:1,for:n.showInput?n.inputId:void 0,innerHTML:n.message},null,8,["for","innerHTML"])):(W(),rt(On(n.showInput?"label":"p"),{key:0,for:n.showInput?n.inputId:void 0},{default:Re(()=>[Hn(Tt(n.dangerouslyUseHTMLString?"":n.message),1)]),_:1},8,["for"]))])],2)):et("v-if",!0)],2),Cn(be("div",{class:j(n.ns.e("input"))},[_e(o,{id:n.inputId,ref:"inputRef",modelValue:n.inputValue,"onUpdate:modelValue":d=>n.inputValue=d,type:n.inputType,placeholder:n.inputPlaceholder,"aria-invalid":n.validateError,class:j({invalid:n.validateError}),onKeydown:Xi(n.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),be("div",{class:j(n.ns.e("errormsg")),style:jt({visibility:n.editorErrorMessage?"visible":"hidden"})},Tt(n.editorErrorMessage),7)],2),[[yi,n.showInput]])],10,["id"]),be("div",{class:j(n.ns.e("btns"))},[n.showCancelButton?(W(),rt(l,{key:0,loading:n.cancelButtonLoading,"loading-icon":n.cancelButtonLoadingIcon,class:j([n.cancelButtonClass]),round:n.roundButton,size:n.btnSize,onClick:d=>n.handleAction("cancel"),onKeydown:Xi(ln(d=>n.handleAction("cancel"),["prevent"]),["enter"])},{default:Re(()=>[Hn(Tt(n.cancelButtonText||n.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):et("v-if",!0),Cn(_e(l,{ref:"confirmRef",type:"primary",loading:n.confirmButtonLoading,"loading-icon":n.confirmButtonLoadingIcon,class:j([n.confirmButtonClasses]),round:n.roundButton,disabled:n.confirmButtonDisabled,size:n.btnSize,onClick:d=>n.handleAction("confirm"),onKeydown:Xi(ln(d=>n.handleAction("confirm"),["prevent"]),["enter"])},{default:Re(()=>[Hn(Tt(n.confirmButtonText||n.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[yi,n.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[yi,n.visible]])]),_:3},8,["onAfterLeave"])}var ULe=It(NLe,[["render",OLe],["__file","index.vue"]]);const xx=new Map,zLe=n=>{let e=document.body;return n.appendTo&&(qt(n.appendTo)&&(e=document.querySelector(n.appendTo)),bo(n.appendTo)&&(e=n.appendTo),bo(e)||(e=document.body)),e},VLe=(n,e,t=null)=>{const i=_e(ULe,n,Xt(n.message)||mr(n.message)?{default:Xt(n.message)?n.message:()=>n.message}:null);return i.appContext=t,Jh(i,e),zLe(n).appendChild(e.firstElementChild),i.component},HLe=()=>document.createElement("div"),GLe=(n,e)=>{const t=HLe();n.onVanish=()=>{Jh(null,t),xx.delete(r)},n.onAction=s=>{const a=xx.get(r);let o;n.showInput?o={value:r.inputValue,action:s}:o=s,n.callback?n.callback(o,i.proxy):s==="cancel"||s==="close"?n.distinguishCancelAndClose&&s!=="cancel"?a.reject("close"):a.reject("cancel"):a.resolve(o)};const i=VLe(n,t,e),r=i.proxy;for(const s in n)vi(n,s)&&!vi(r.$props,s)&&(s==="closeIcon"&&Rn(n[s])?r[s]=tf(n[s]):r[s]=n[s]);return r.visible=!0,r};function dy(n,e=null){if(!li)return Promise.reject();let t;return qt(n)||mr(n)?n={message:n}:t=n.callback,new Promise((i,r)=>{const s=GLe(n,e??dy._context);xx.set(s,{options:n,callback:t,resolve:i,reject:r})})}const WLe=["alert","confirm","prompt"],qLe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};WLe.forEach(n=>{dy[n]=KLe(n)});function KLe(n){return(e,t,i,r)=>{let s="";return Rn(t)?(i=t,s=""):bi(t)?s="":s=t,dy(Object.assign({title:s,message:e,type:"",...qLe[n]},i,{boxType:n}),r)}}dy.close=()=>{xx.forEach((n,e)=>{e.doClose()}),xx.clear()};dy._context=null;const gh=dy;gh.install=n=>{gh._context=n._context,n.config.globalProperties.$msgbox=gh,n.config.globalProperties.$messageBox=gh,n.config.globalProperties.$alert=gh.alert,n.config.globalProperties.$confirm=gh.confirm,n.config.globalProperties.$prompt=gh.prompt};const YLe=gh,ite=["success","info","warning","error"],XLe=Et({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Hi},id:{type:String,default:""},message:{type:Ke([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:Ke(Function),default:()=>{}},onClose:{type:Ke(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...ite,""],default:""},zIndex:Number}),jLe={destroy:()=>!0},$Le=Ie({name:"ElNotification"}),QLe=Ie({...$Le,props:XLe,emits:jLe,setup(n,{expose:e}){const t=n,{ns:i,zIndex:r}=mM("notification"),{nextZIndex:s,currentZIndex:a}=r,{Close:o}=ZL,l=ae(!1);let c;const u=V(()=>{const x=t.type;return x&&sp[t.type]?i.m(x):""}),d=V(()=>t.type&&sp[t.type]||t.icon),f=V(()=>t.position.endsWith("right")?"right":"left"),h=V(()=>t.position.startsWith("top")?"top":"bottom"),p=V(()=>{var x;return{[h.value]:`${t.offset}px`,zIndex:(x=t.zIndex)!=null?x:a.value}});function m(){t.duration>0&&({stop:c}=am(()=>{l.value&&g()},t.duration))}function v(){c==null||c()}function g(){l.value=!1}function y({code:x}){x===kt.delete||x===kt.backspace?v():x===kt.esc?l.value&&g():m()}return Mn(()=>{m(),s(),l.value=!0}),Li(document,"keydown",y),e({visible:l,close:g}),(x,b)=>(W(),rt(na,{name:w(i).b("fade"),onBeforeLeave:x.onClose,onAfterLeave:A=>x.$emit("destroy"),persisted:""},{default:Re(()=>[Cn(be("div",{id:x.id,class:j([w(i).b(),x.customClass,w(f)]),style:jt(w(p)),role:"alert",onMouseenter:v,onMouseleave:m,onClick:x.onClick},[w(d)?(W(),rt(w(Ut),{key:0,class:j([w(i).e("icon"),w(u)])},{default:Re(()=>[(W(),rt(On(w(d))))]),_:1},8,["class"])):et("v-if",!0),be("div",{class:j(w(i).e("group"))},[be("h2",{class:j(w(i).e("title")),textContent:Tt(x.title)},null,10,["textContent"]),Cn(be("div",{class:j(w(i).e("content")),style:jt(x.title?void 0:{margin:0})},[Qe(x.$slots,"default",{},()=>[x.dangerouslyUseHTMLString?(W(),ve(Kt,{key:1},[et(" Caution here, message could've been compromised, never use user's input as message "),be("p",{innerHTML:x.message},null,8,["innerHTML"])],2112)):(W(),ve("p",{key:0},Tt(x.message),1))])],6),[[yi,x.message]]),x.showClose?(W(),rt(w(Ut),{key:0,class:j(w(i).e("closeBtn")),onClick:ln(g,["stop"])},{default:Re(()=>[_e(w(o))]),_:1},8,["class","onClick"])):et("v-if",!0)],2)],46,["id","onClick"]),[[yi,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var ZLe=It(QLe,[["__file","notification.vue"]]);const kC={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},I8=16;let JLe=1;const I1=function(n={},e){if(!li)return{close:()=>{}};(qt(n)||mr(n))&&(n={message:n});const t=n.position||"top-right";let i=n.offset||0;kC[t].forEach(({vm:u})=>{var d;i+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+I8}),i+=I8;const r=`notification_${JLe++}`,s=n.onClose,a={...n,offset:i,id:r,onClose:()=>{eke(r,t,s)}};let o=document.body;bo(n.appendTo)?o=n.appendTo:qt(n.appendTo)&&(o=document.querySelector(n.appendTo)),bo(o)||(o=document.body);const l=document.createElement("div"),c=_e(ZLe,a,Xt(a.message)?a.message:mr(a.message)?()=>a.message:null);return c.appContext=bi(e)?I1._context:e,c.props.onDestroy=()=>{Jh(null,l)},Jh(c,l),kC[t].push({vm:c}),o.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};ite.forEach(n=>{I1[n]=(e={},t)=>((qt(e)||mr(e))&&(e={message:e}),I1({...e,type:n},t))});function eke(n,e,t){const i=kC[e],r=i.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===n});if(r===-1)return;const{vm:s}=i[r];if(!s)return;t==null||t(s);const a=s.el.offsetHeight,o=e.split("-")[0];i.splice(r,1);const l=i.length;if(!(l<1))for(let c=r;c<l;c++){const{el:u,component:d}=i[c].vm,f=Number.parseInt(u.style[o],10)-a-I8;d.props.offset=f}}function tke(){for(const n of Object.values(kC))n.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}I1.closeAll=tke;I1._context=null;const nke=gQ(I1,"$notify");var ike=[gLe,wLe,FLe,YLe,nke,gJ],rke=Lve([...uLe,...ike]);const ske=["href"],ake=["href"],oke=["href"],lke=["href"],cke=["href"],uke=Ie({__name:"Header",setup(n){const e={name:"My Blog",link:"https://junyaohu.github.io/"},t={name:"Template",link:"#"},i={ExtDM:{name:"ExtDM - CVPR 2024",link:"https://zzcheng.top/ExtDM/"},MPOT:{name:"MPOT - ICCV 2023",link:"https://zzcheng.top/MPOT/"},ControlNet:{name:"ControlNet - ICCV 2023",link:"https://github.com/lllyasviel/ControlNet"}};return(r,s)=>{const a=an("el-menu-item"),o=an("el-sub-menu"),l=an("el-menu"),c=an("el-affix");return W(),rt(c,{offset:0,style:{width:"100%"}},{default:Re(()=>[_e(l,{"default-active":"1",class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:Re(()=>[_e(a,{index:"0"},{default:Re(()=>[_e(w(Ut),{size:20},{default:Re(()=>[_e(w(_ge))]),_:1}),be("a",{href:e.link},Tt(e.name),9,ske)]),_:1}),_e(a,{index:"1"},{default:Re(()=>[_e(w(Ut),{size:20},{default:Re(()=>[_e(w(QL))]),_:1}),be("a",{href:t.link},Tt(t.name),9,ake)]),_:1}),_e(o,{index:"2"},{title:Re(()=>s[0]||(s[0]=[Hn("More")])),default:Re(()=>[_e(a,{index:"2-1"},{default:Re(()=>[be("a",{href:i.ExtDM.link},Tt(i.ExtDM.name),9,oke)]),_:1}),_e(a,{index:"2-2"},{default:Re(()=>[be("a",{href:i.MPOT.link},Tt(i.MPOT.name),9,lke)]),_:1}),_e(a,{index:"2-3"},{default:Re(()=>[be("a",{href:i.ControlNet.link},Tt(i.ControlNet.name),9,cke)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Rm=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},dke=Rm(uke,[["__scopeId","data-v-0f788277"]]),fke={class:"paper-title"},kz="自由式三维超声重建示例页面",hke="#000000",Fz="Freehand 3D Ultrasound Reconstruction Demo Page",pke="#42B883",mke=Ie({__name:"Title",setup(n){return(e,t)=>{const i=an("el-col"),r=an("el-row");return W(),ve("div",null,[_e(r,{justify:"center"},{default:Re(()=>[_e(i,{span:20},{default:Re(()=>[be("h1",fke,[kz?(W(),ve("span",{key:0,style:jt({color:hke})},Tt(kz),4)):et("",!0),t[0]||(t[0]=be("br",null,null,-1)),Fz?(W(),ve("span",{key:1,style:jt({color:pke})},Tt(Fz),4)):et("",!0)])]),_:1})]),_:1})])}}}),vke=Rm(mke,[["__scopeId","data-v-5319fa1c"]]);function pb(n,e,t){const{children:i}=e;return delete e.children,arguments.length>2&&(e.key=t),en(n,e,i)}function Bz(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function h7(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:Bz(e[t])&&Bz(n[t])&&Object.keys(e[t]).length>0&&h7(n[t],e[t])})}const rte={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Pm(){const n=typeof document<"u"?document:{};return h7(n,rte),n}const gke={document:rte,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Dl(){const n=typeof window<"u"?window:{};return h7(n,gke),n}function yke(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function D8(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function FC(){return Date.now()}function bke(n){const e=Dl();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function xke(n,e){e===void 0&&(e="x");const t=Dl();let i,r,s;const a=bke(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Sw(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function Ake(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function hl(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!Ake(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,a=r.length;s<a;s+=1){const o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(Sw(n[o])&&Sw(i[o])?i[o].__swiper__?n[o]=i[o]:hl(n[o],i[o]):!Sw(n[o])&&Sw(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:hl(n[o],i[o])):n[o]=i[o])}}}return n}function _w(n,e,t){n.style.setProperty(e,t)}function ste(n){let{swiper:e,targetPosition:t,side:i}=n;const r=Dl(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",u=(f,h)=>c==="next"&&f>=h||c==="prev"&&f<=h,d=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),h=.5-Math.cos(f*Math.PI)/2;let p=s+h*(t-s);if(u(p,t)&&(p=t),e.wrapperEl.scrollTo({[i]:p}),u(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:p})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(d)};d()}function jd(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function wke(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:[e]),t}function Ske(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function _ke(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Ph(n,e){return Dl().getComputedStyle(n,null).getPropertyValue(e)}function Nz(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Cke(n,e){const t=[];let i=n.parentElement;for(;i;)t.push(i),i=i.parentElement;return t}function Oz(n,e,t){const i=Dl();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}let q5;function Mke(){const n=Dl(),e=Pm();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function ate(){return q5||(q5=Mke()),q5}let K5;function Tke(n){let{userAgent:e}=n===void 0?{}:n;const t=ate(),i=Dl(),r=i.navigator.platform,s=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const d=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=r==="Win32";let p=r==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&p&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),c&&!h&&(a.os="android",a.android=!0),(u||f||d)&&(a.os="ios",a.ios=!0),a}function Eke(n){return n===void 0&&(n={}),K5||(K5=Tke(n)),K5}let Y5;function Ike(){const n=Dl();let e=!1;function t(){const i=n.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(t()){const i=String(n.navigator.userAgent);if(i.includes("Version/")){const[r,s]=i.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=r<16||r===16&&s<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function Dke(){return Y5||(Y5=Ike()),Y5}function Rke(n){let{swiper:e,on:t,emit:i}=n;const r=Dl();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(d=>{a=r.requestAnimationFrame(()=>{const{width:f,height:h}=e;let p=f,m=h;d.forEach(v=>{let{contentBoxSize:g,contentRect:y,target:x}=v;x&&x!==e.el||(p=y?y.width:(g[0]||g).inlineSize,m=y?y.height:(g[0]||g).blockSize)}),(p!==f||m!==h)&&o()})}),s.observe(e.el))},c=()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",u)})}function Pke(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],a=Dl(),o=function(u,d){d===void 0&&(d={});const f=a.MutationObserver||a.WebkitMutationObserver,h=new f(p=>{if(e.__preventObserver__)return;if(p.length===1){r("observerUpdate",p[0]);return}const m=function(){r("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});h.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),s.push(h)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=Cke(e.hostEl);for(let d=0;d<u.length;d+=1)o(u[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var Lke={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(i,a)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function kke(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Ph(i,"padding-left")||0,10)-parseInt(Ph(i,"padding-right")||0,10),t=t-parseInt(Ph(i,"padding-top")||0,10)-parseInt(Ph(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function Fke(){const n=this;function e(E){return n.isHorizontal()?E:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[E]}function t(E,I){return parseFloat(E.getPropertyValue(e(I))||0)}const i=n.params,{wrapperEl:r,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=n,c=n.virtual&&i.virtual.enabled,u=c?n.virtual.slides.length:n.slides.length,d=jd(s,`.${n.params.slideClass}, swiper-slide`),f=c?n.virtual.slides.length:d.length;let h=[];const p=[],m=[];let v=i.slidesOffsetBefore;typeof v=="function"&&(v=i.slidesOffsetBefore.call(n));let g=i.slidesOffsetAfter;typeof g=="function"&&(g=i.slidesOffsetAfter.call(n));const y=n.snapGrid.length,x=n.slidesGrid.length;let b=i.spaceBetween,A=-v,S=0,C=0;if(typeof a>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*a:typeof b=="string"&&(b=parseFloat(b)),n.virtualSize=-b,d.forEach(E=>{o?E.style.marginLeft="":E.style.marginRight="",E.style.marginBottom="",E.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(_w(r,"--swiper-centered-offset-before",""),_w(r,"--swiper-centered-offset-after",""));const _=i.grid&&i.grid.rows>1&&n.grid;_&&n.grid.initSlides(f);let M;const T=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(E=>typeof i.breakpoints[E].slidesPerView<"u").length>0;for(let E=0;E<f;E+=1){M=0;let I;if(d[E]&&(I=d[E]),_&&n.grid.updateSlide(E,I,f,e),!(d[E]&&Ph(I,"display")==="none")){if(i.slidesPerView==="auto"){T&&(d[E].style[e("width")]="");const L=getComputedStyle(I),F=I.style.transform,B=I.style.webkitTransform;if(F&&(I.style.transform="none"),B&&(I.style.webkitTransform="none"),i.roundLengths)M=n.isHorizontal()?Oz(I,"width"):Oz(I,"height");else{const P=t(L,"width"),z=t(L,"padding-left"),O=t(L,"padding-right"),N=t(L,"margin-left"),H=t(L,"margin-right"),q=L.getPropertyValue("box-sizing");if(q&&q==="border-box")M=P+N+H;else{const{clientWidth:te,offsetWidth:Q}=I;M=P+z+O+N+H+(Q-te)}}F&&(I.style.transform=F),B&&(I.style.webkitTransform=B),i.roundLengths&&(M=Math.floor(M))}else M=(a-(i.slidesPerView-1)*b)/i.slidesPerView,i.roundLengths&&(M=Math.floor(M)),d[E]&&(d[E].style[e("width")]=`${M}px`);d[E]&&(d[E].swiperSlideSize=M),m.push(M),i.centeredSlides?(A=A+M/2+S/2+b,S===0&&E!==0&&(A=A-a/2-b),E===0&&(A=A-a/2-b),Math.abs(A)<1/1e3&&(A=0),i.roundLengths&&(A=Math.floor(A)),C%i.slidesPerGroup===0&&h.push(A),p.push(A)):(i.roundLengths&&(A=Math.floor(A)),(C-Math.min(n.params.slidesPerGroupSkip,C))%n.params.slidesPerGroup===0&&h.push(A),p.push(A),A=A+M+b),n.virtualSize+=M+b,S=M,C+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+g,o&&l&&(i.effect==="slide"||i.effect==="coverflow")&&(r.style.width=`${n.virtualSize+b}px`),i.setWrapperSize&&(r.style[e("width")]=`${n.virtualSize+b}px`),_&&n.grid.updateWrapperSize(M,h,e),!i.centeredSlides){const E=[];for(let I=0;I<h.length;I+=1){let L=h[I];i.roundLengths&&(L=Math.floor(L)),h[I]<=n.virtualSize-a&&E.push(L)}h=E,Math.floor(n.virtualSize-a)-Math.floor(h[h.length-1])>1&&h.push(n.virtualSize-a)}if(c&&i.loop){const E=m[0]+b;if(i.slidesPerGroup>1){const I=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/i.slidesPerGroup),L=E*i.slidesPerGroup;for(let F=0;F<I;F+=1)h.push(h[h.length-1]+L)}for(let I=0;I<n.virtual.slidesBefore+n.virtual.slidesAfter;I+=1)i.slidesPerGroup===1&&h.push(h[h.length-1]+E),p.push(p[p.length-1]+E),n.virtualSize+=E}if(h.length===0&&(h=[0]),b!==0){const E=n.isHorizontal()&&o?"marginLeft":e("marginRight");d.filter((I,L)=>!i.cssMode||i.loop?!0:L!==d.length-1).forEach(I=>{I.style[E]=`${b}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let E=0;m.forEach(L=>{E+=L+(b||0)}),E-=b;const I=E-a;h=h.map(L=>L<=0?-v:L>I?I+g:L)}if(i.centerInsufficientSlides){let E=0;if(m.forEach(I=>{E+=I+(b||0)}),E-=b,E<a){const I=(a-E)/2;h.forEach((L,F)=>{h[F]=L-I}),p.forEach((L,F)=>{p[F]=L+I})}}if(Object.assign(n,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){_w(r,"--swiper-centered-offset-before",`${-h[0]}px`),_w(r,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const E=-n.snapGrid[0],I=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(L=>L+E),n.slidesGrid=n.slidesGrid.map(L=>L+I)}if(f!==u&&n.emit("slidesLengthChange"),h.length!==y&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==x&&n.emit("slidesGridLengthChange"),i.watchSlidesProgress&&n.updateSlidesOffset(),!c&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const E=`${i.containerModifierClass}backface-hidden`,I=n.el.classList.contains(E);f<=i.maxBackfaceHiddenSlides?I||n.el.classList.add(E):I&&n.el.classList.remove(E)}}function Bke(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;r=o>r?o:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function Nke(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function Oke(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;r&&(a=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const c=i[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),f=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),h=-(a-u),p=h+e.slidesSizesGrid[l];(h>=0&&h<e.size-1||p>1&&p<=e.size||h<=0&&p>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),c.progress=r?-d:d,c.originalProgress=r?-f:f}}function Uke(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,c=a;if(i===0)r=0,s=!0,a=!0;else{r=(n-e.minTranslate())/i;const u=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;s=u||r<=0,a=d||r>=1,u&&(r=0),d&&(r=1)}if(t.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[u],h=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(n);m>=f?o=(m-f)/p:o=(m+p-h)/p,o>1&&(o-=1)}Object.assign(e,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}function zke(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,a=l=>jd(i,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(s)if(t.loop){let l=r-n.virtual.slidesBefore;l<0&&(l=n.virtual.slides.length+l),l>=n.virtual.slides.length&&(l-=n.virtual.slides.length),o=a(`[data-swiper-slide-index="${l}"]`)}else o=a(`[data-swiper-slide-index="${r}"]`);else o=e[r];if(o){o.classList.add(t.slideActiveClass);let l=_ke(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let c=Ske(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass)}n.emitSlidesClasses()}const m_=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},X5=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},R8=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=r,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+i+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&X5(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let a=r-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<r||o>s)&&X5(n,o)}else for(let a=Math.max(r-e,0);a<=Math.min(s+e,t-1);a+=1)a!==r&&(a>s||a<r)&&X5(n,a)};function Vke(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function Hke(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,c;const u=f=>{let h=f-e.virtual.slidesBefore;return h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),h};if(typeof l>"u"&&(l=Vke(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const f=Math.min(r.slidesPerGroupSkip,l);c=f+Math.floor((l-f)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=u(l));return}let d;e.virtual&&r.virtual.enabled&&r.loop?d=u(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:d,previousIndex:s,activeIndex:l}),e.initialized&&R8(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function Gke(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!r&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(r=o)});let s=!1,a;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){s=!0,a=o;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var Wke={updateSize:kke,updateSlides:Fke,updateAutoHeight:Bke,updateSlidesOffset:Nke,updateSlidesProgress:Oke,updateProgress:Uke,updateSlidesClasses:zke,updateActiveIndex:Hke,updateClickedSlide:Gke};function qke(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let a=xke(s,n);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function Kke(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=i?-n:n:l=n,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:r.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let u;const d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(n-t.minTranslate())/d,u!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function Yke(){return-this.snapGrid[0]}function Xke(){return-this.snapGrid[this.snapGrid.length-1]}function jke(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(i&&n>l?u=l:i&&n<c?u=c:u=n,s.updateProgress(u),a.cssMode){const d=s.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return ste({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var $ke={getTranslate:qke,setTranslate:Kke,minTranslate:Yke,maxTranslate:Xke,translateTo:jke};function Qke(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function ote(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:a}=e;let o=i;if(o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit(`transition${r}`),t&&s!==a){if(o==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),o==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function Zke(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),ote({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function Jke(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),ote({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var e7e={setTransition:Qke,transitionStart:Zke,transitionEnd:Jke};function t7e(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:f,wrapperEl:h,enabled:p}=s;if(s.animating&&o.preventInteractionOnTransition||!p&&!i&&!r)return!1;const m=Math.min(s.params.slidesPerGroupSkip,a);let v=m+Math.floor((a-m)/s.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const g=-l[v];if(o.normalizeSlideIndex)for(let x=0;x<c.length;x+=1){const b=-Math.floor(g*100),A=Math.floor(c[x]*100),S=Math.floor(c[x+1]*100);typeof c[x+1]<"u"?b>=A&&b<S-(S-A)/2?a=x:b>=A&&b<S&&(a=x+1):b>=A&&(a=x)}if(s.initialized&&a!==d&&(!s.allowSlideNext&&(f?g>s.translate&&g>s.minTranslate():g<s.translate&&g<s.minTranslate())||!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(g);let y;if(a>d?y="next":a<d?y="prev":y="reset",f&&-g===s.translate||!f&&g===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(g),y!=="reset"&&(s.transitionStart(t,y),s.transitionEnd(t,y)),!1;if(o.cssMode){const x=s.isHorizontal(),b=f?g:-g;if(e===0){const A=s.virtual&&s.params.virtual.enabled;A&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),A&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{h[x?"scrollLeft":"scrollTop"]=b})):h[x?"scrollLeft":"scrollTop"]=b,A&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return ste({swiper:s,targetPosition:b,side:x?"left":"top"}),!0;h.scrollTo({[x?"left":"top"]:b,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(g),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,y),e===0?s.transitionEnd(t,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(b){!s||s.destroyed||b.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function n7e(n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;let s=n;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?s=s+r.virtual.slidesBefore:s=r.getSlideIndexByData(s)),r.slideTo(s,e,t,i)}function i7e(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:a}=i;if(!r)return i;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,c=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function r7e(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=i;if(!l)return i;const u=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const d=o?i.translate:-i.translate;function f(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const h=f(d),p=s.map(g=>f(g));let m=s[p.indexOf(h)-1];if(typeof m>"u"&&r.cssMode){let g;s.forEach((y,x)=>{h>=y&&(g=x)}),typeof g<"u"&&(m=s[g>0?g-1:g])}let v=0;if(typeof m<"u"&&(v=a.indexOf(m),v<0&&(v=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(v=v-i.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),r.rewind&&i.isBeginning){const g=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(g,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(v,n,e,t)}),!0;return i.slideTo(v,n,e,t)}function s7e(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this;return i.slideTo(i.activeIndex,n,e,t)}function a7e(n,e,t,i){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const c=r.snapGrid[o],u=r.snapGrid[o+1];l-c>(u-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[o-1],u=r.snapGrid[o];l-c<=(u-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function o7e(){const n=this,{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const a=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(jd(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),D8(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(jd(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),D8(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var l7e={slideTo:t7e,slideToLoop:n7e,slideNext:i7e,slidePrev:r7e,slideReset:s7e,slideToClosest:a7e,slideToClickedSlide:o7e};function c7e(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;jd(i,`.${t.slideClass}, swiper-slide`).forEach((s,a)=>{s.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function u7e(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:d,slidesEl:f,params:h}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&h.virtual.enabled){t&&(!h.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):h.centeredSlides&&l.snapIndex<h.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=d,l.emit("loopFix");return}const p=h.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let m=h.loopedSlides||p;m%h.slidesPerGroup!==0&&(m+=h.slidesPerGroup-m%h.slidesPerGroup),l.loopedSlides=m;const v=[],g=[];let y=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter(C=>C.classList.contains(h.slideActiveClass))[0]):y=s;const x=i==="next"||!i,b=i==="prev"||!i;let A=0,S=0;if(s<m){A=Math.max(m-s,h.slidesPerGroup);for(let C=0;C<m-s;C+=1){const _=C-Math.floor(C/c.length)*c.length;v.push(c.length-_-1)}}else if(s>l.slides.length-m*2){S=Math.max(s-(l.slides.length-m*2),h.slidesPerGroup);for(let C=0;C<S;C+=1){const _=C-Math.floor(C/c.length)*c.length;g.push(_)}}if(b&&v.forEach(C=>{l.slides[C].swiperLoopMoveDOM=!0,f.prepend(l.slides[C]),l.slides[C].swiperLoopMoveDOM=!1}),x&&g.forEach(C=>{l.slides[C].swiperLoopMoveDOM=!0,f.append(l.slides[C]),l.slides[C].swiperLoopMoveDOM=!1}),l.recalcSlides(),h.slidesPerView==="auto"&&l.updateSlides(),h.watchSlidesProgress&&l.updateSlidesOffset(),t){if(v.length>0&&b)if(typeof e>"u"){const C=l.slidesGrid[y],M=l.slidesGrid[y+A]-C;o?l.setTranslate(l.translate-M):(l.slideTo(y+A,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=M,l.touchEventsData.currentTranslate=l.translate))}else r&&(l.slideToLoop(e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(g.length>0&&x)if(typeof e>"u"){const C=l.slidesGrid[y],M=l.slidesGrid[y-S]-C;o?l.setTranslate(l.translate-M):(l.slideTo(y-S,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=M,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=u,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const C={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(_=>{!_.destroyed&&_.params.loop&&_.loopFix({...C,slideTo:_.params.slidesPerView===h.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...C,slideTo:l.controller.control.params.slidesPerView===h.slidesPerView?t:!1})}l.emit("loopFix")}function d7e(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var f7e={loopCreate:c7e,loopFix:u7e,loopDestroy:d7e};function h7e(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function p7e(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var m7e={setGrabCursor:h7e,unsetGrabCursor:p7e};function v7e(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Pm()||i===Dl())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function g7e(n){const e=this,t=Pm(),i=Dl(),r=e.touchEventsData;r.evCache.push(n);const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&n.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=n;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||r.isTouched&&r.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=n.composedPath?n.composedPath():n.path;u&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const f=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,h=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(h?v7e(f,c):c.closest(f))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const p=a.currentX,m=a.currentY,v=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,g=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(v&&(p<=g||p>=i.innerWidth-g))if(v==="prevent")n.preventDefault();else return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=m,r.touchStartTime=FC(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let y=!0;c.matches(r.focusableElements)&&(y=!1,c.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==c&&t.activeElement.blur();const x=y&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||x)&&!c.isContentEditable&&l.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function y7e(n){const e=Pm(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=i.evCache.findIndex(C=>C.pointerId===l.pointerId);c>=0&&(i.evCache[c]=l);const u=i.evCache.length>1?i.evCache[0]:l,d=u.pageX,f=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=f;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:f,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:f}),i.touchStartTime=FC());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(f<s.startY&&t.translate<=t.maxTranslate()||f>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}if(i.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=f;const h=s.currentX-s.startX,p=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(h**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let C;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:h*h+p*p>=25&&(C=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,i.isScrolling=t.isHorizontal()?C>r.touchAngle:90-C>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&i.evCache.length>1){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let m=t.isHorizontal()?h:p,v=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),v=Math.abs(v)*(a?1:-1)),s.diff=m,m*=r.touchRatio,a&&(m=-m,v=-v);const g=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=v>0?"prev":"next";const y=t.params.loop&&!r.cssMode,x=t.swipeDirection==="next"&&t.allowSlideNext||t.swipeDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(y&&x&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const C=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(C)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let b;i.isMoved&&g!==t.touchesDirection&&y&&x&&Math.abs(m)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),b=!0),t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;let A=!0,S=r.resistanceRatio;if(r.touchReleaseOnEdges&&(S=0),m>0?(y&&x&&!b&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(A=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+m)**S))):m<0&&(y&&x&&!b&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(A=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-m)**S))),A&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function b7e(n){const e=this,t=e.touchEventsData,i=t.evCache.findIndex(x=>x.pointerId===n.pointerId);if(i>=0&&t.evCache.splice(i,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:r,touches:s,rtlTranslate:a,slidesGrid:o,enabled:l}=e;if(!l||!r.simulateTouch&&n.pointerType==="mouse")return;let c=n;if(c.originalEvent&&(c=c.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",c),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&r.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}r.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=FC(),d=u-t.touchStartTime;if(e.allowClick){const x=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(x&&x[0]||c.target,x),e.emit("tap click",c),d<300&&u-t.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(t.lastClickTime=FC(),D8(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||s.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let f;if(r.followFinger?f=a?e.translate:-e.translate:f=-t.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}let h=0,p=e.slidesSizesGrid[0];for(let x=0;x<o.length;x+=x<r.slidesPerGroupSkip?1:r.slidesPerGroup){const b=x<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof o[x+b]<"u"?f>=o[x]&&f<o[x+b]&&(h=x,p=o[x+b]-o[x]):f>=o[x]&&(h=x,p=o[o.length-1]-o[o.length-2])}let m=null,v=null;r.rewind&&(e.isBeginning?v=r.virtual&&r.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const g=(f-o[h])/p,y=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(d>r.longSwipesMs){if(!r.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(g>=r.longSwipesRatio?e.slideTo(r.rewind&&e.isEnd?m:h+y):e.slideTo(h)),e.swipeDirection==="prev"&&(g>1-r.longSwipesRatio?e.slideTo(h+y):v!==null&&g<0&&Math.abs(g)>r.longSwipesRatio?e.slideTo(v):e.slideTo(h))}else{if(!r.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(h+y):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:h+y),e.swipeDirection==="prev"&&e.slideTo(v!==null?v:h))}}function Uz(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function x7e(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function A7e(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function w7e(n){const e=this;m_(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let zz=!1;function S7e(){}const lte=(n,e)=>{const t=Pm(),{params:i,el:r,wrapperEl:s,device:a}=n,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Uz,!0):n[c]("observerUpdate",Uz,!0),r[l]("load",n.onLoad,{capture:!0})};function _7e(){const n=this,e=Pm(),{params:t}=n;n.onTouchStart=g7e.bind(n),n.onTouchMove=y7e.bind(n),n.onTouchEnd=b7e.bind(n),t.cssMode&&(n.onScroll=A7e.bind(n)),n.onClick=x7e.bind(n),n.onLoad=w7e.bind(n),zz||(e.addEventListener("touchstart",S7e),zz=!0),lte(n,"on")}function C7e(){lte(this,"off")}var M7e={attachEvents:_7e,detachEvents:C7e};const Vz=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function T7e(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||n.originalParams,c=Vz(n,i),u=Vz(n,l),d=i.enabled;c&&!u?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&u&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{if(typeof l[g]>"u")return;const y=i[g]&&i[g].enabled,x=l[g]&&l[g].enabled;y&&!x&&n[g].disable(),!y&&x&&n[g].enable()});const f=l.direction&&l.direction!==i.direction,h=i.loop&&(l.slidesPerView!==i.slidesPerView||f),p=i.loop;f&&t&&n.changeDirection(),hl(n.params,l);const m=n.params.enabled,v=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(h?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!p&&v?(n.loopCreate(e),n.updateSlides()):p&&!v&&n.loopDestroy()),n.emit("breakpoint",l)}function E7e(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=Dl(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var I7e={setBreakpoint:T7e,getBreakpoint:E7e};function D7e(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function R7e(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,a=D7e(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),n.emitContainerClasses()}function P7e(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var L7e={addClasses:R7e,removeClasses:P7e};function k7e(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var F7e={checkOverflow:k7e},Hz={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function B7e(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){hl(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){hl(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),hl(e,i)}}const j5={eventsEmitter:Lke,update:Wke,translate:$ke,transition:e7e,slide:l7e,loop:f7e,grabCursor:m7e,events:M7e,breakpoints:I7e,checkOverflow:F7e,classes:L7e},$5={};class zc{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=hl({},t),e&&!t.el&&(t.el=e);const a=Pm();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const u=[];return a.querySelectorAll(t.el).forEach(d=>{const f=hl({},t,{el:d});u.push(new zc(f))}),u}const o=this;o.__swiper__=!0,o.support=ate(),o.device=Eke({userAgent:t.userAgent}),o.browser=Dke(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(u=>{u({params:t,swiper:o,extendParams:B7e(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=hl({},Hz,l);return o.params=hl({},c,$5,t),o.originalParams=hl({},o.params),o.passedParams=hl({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=jd(t,`.${i.slideClass}, swiper-slide`),s=Nz(r[0]);return Nz(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=jd(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=s[c]?s[c].swiperSlideSize:0,f;for(let h=c+1;h<s.length;h+=1)s[h]&&!f&&(d+=s[h].swiperSlideSize,u+=1,d>l&&(f=!0));for(let h=c-1;h>=0;h-=1)s[h]&&!f&&(d+=s[h].swiperSlideSize,u+=1,d>l&&(f=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(t?a[d]+o[d]-a[c]<l:a[d]-a[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)a[c]-a[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&m_(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):jd(i,r())[0];return!a&&t.params.createElements&&(a=wke("div",t.params.wrapperClass),i.append(a),jd(i,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:i,wrapperEl:a,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Ph(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Ph(i,"direction")==="rtl"),wrongRTL:Ph(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?m_(t,s):s.addEventListener("load",a=>{m_(t,a.target)})}),R8(t),t.initialized=!0,R8(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,yke(i)),i.destroyed=!0),null}static extendDefaults(e){hl($5,e)}static get extendedDefaults(){return $5}static get defaults(){return Hz}static installModule(e){zc.prototype.__modules__||(zc.prototype.__modules__=[]);const t=zc.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>zc.installModule(t)),zc):(zc.installModule(e),zc)}}Object.keys(j5).forEach(n=>{Object.keys(j5[n]).forEach(e=>{zc.prototype[e]=j5[n][e]})});zc.use([Rke,Pke]);const N7e="/freehand-3d-us-demo/video/video.mp4";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P8=function(n,e){return P8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},P8(n,e)};function kn(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");P8(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var O7e=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),U7e=function(){function n(){this.browser=new O7e,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),Ai=new U7e;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ai.wxa=!0,Ai.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ai.worker=!0:!Ai.hasGlobalWindow||"Deno"in window?(Ai.node=!0,Ai.svgSupported=!0):z7e(navigator.userAgent,Ai);function z7e(n,e){var t=e.browser,i=n.match(/Firefox\/([\d.]+)/),r=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),s=n.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(n);i&&(t.firefox=!0,t.version=i[1]),r&&(t.ie=!0,t.version=r[1]),s&&(t.edge=!0,t.version=s[1],t.newEdge=+s[1].split(".")[0]>18),a&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var o=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in o||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var p7=12,V7e="sans-serif",fm=p7+"px "+V7e,H7e=20,G7e=100,W7e="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function q7e(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var i=String.fromCharCode(t+32),r=(n.charCodeAt(t)-H7e)/G7e;e[i]=r}return e}var K7e=q7e(W7e),fy={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,i){if(!n){var r=fy.createCanvas();n=r&&r.getContext("2d")}if(n)return e!==i&&(e=n.font=i||fm),n.measureText(t);t=t||"",i=i||fm;var s=/((?:\d+)?\.?\d*)px/.exec(i),a=s&&+s[1]||p7,o=0;if(i.indexOf("mono")>=0)o=a*t.length;else for(var l=0;l<t.length;l++){var c=K7e[t[l]];o+=c==null?a:c*a}return{width:o}}}(),loadImage:function(n,e,t){var i=new Image;return i.onload=e,i.onerror=t,i.src=n,i}},cte=op(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),ute=op(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),EA=Object.prototype.toString,kM=Array.prototype,Y7e=kM.forEach,X7e=kM.filter,m7=kM.slice,j7e=kM.map,Gz=(function(){}).constructor,Cw=Gz?Gz.prototype:null,v7="__proto__",$7e=2311;function dte(){return $7e++}function g7(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function or(n){if(n==null||typeof n!="object")return n;var e=n,t=EA.call(n);if(t==="[object Array]"){if(!vb(n)){e=[];for(var i=0,r=n.length;i<r;i++)e[i]=or(n[i])}}else if(ute[t]){if(!vb(n)){var s=n.constructor;if(s.from)e=s.from(n);else{e=new s(n.length);for(var i=0,r=n.length;i<r;i++)e[i]=n[i]}}}else if(!cte[t]&&!vb(n)&&!Ax(n)){e={};for(var a in n)n.hasOwnProperty(a)&&a!==v7&&(e[a]=or(n[a]))}return e}function Sr(n,e,t){if(!hi(e)||!hi(n))return t?or(e):n;for(var i in e)if(e.hasOwnProperty(i)&&i!==v7){var r=n[i],s=e[i];hi(s)&&hi(r)&&!Un(s)&&!Un(r)&&!Ax(s)&&!Ax(r)&&!Wz(s)&&!Wz(r)&&!vb(s)&&!vb(r)?Sr(r,s,t):(t||!(i in n))&&(n[i]=or(e[i]))}return n}function pn(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==v7&&(n[t]=e[t]);return n}function Cr(n,e,t){for(var i=hs(e),r=0,s=i.length;r<s;r++){var a=i[r];n[a]==null&&(n[a]=e[a])}return n}function Nr(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t}return-1}function Q7e(n,e){var t=n.prototype;function i(){}i.prototype=e.prototype,n.prototype=new i;for(var r in t)t.hasOwnProperty(r)&&(n.prototype[r]=t[r]);n.prototype.constructor=n,n.superClass=e}function od(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(e),r=0;r<i.length;r++){var s=i[r];s!=="constructor"&&n[s]==null&&(n[s]=e[s])}else Cr(n,e)}function el(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function mt(n,e,t){if(n&&e)if(n.forEach&&n.forEach===Y7e)n.forEach(e,t);else if(n.length===+n.length)for(var i=0,r=n.length;i<r;i++)e.call(t,n[i],i,n);else for(var s in n)n.hasOwnProperty(s)&&e.call(t,n[s],s,n)}function fi(n,e,t){if(!n)return[];if(!e)return y7(n);if(n.map&&n.map===j7e)return n.map(e,t);for(var i=[],r=0,s=n.length;r<s;r++)i.push(e.call(t,n[r],r,n));return i}function op(n,e,t,i){if(n&&e){for(var r=0,s=n.length;r<s;r++)t=e.call(i,t,n[r],r,n);return t}}function _a(n,e,t){if(!n)return[];if(!e)return y7(n);if(n.filter&&n.filter===X7e)return n.filter(e,t);for(var i=[],r=0,s=n.length;r<s;r++)e.call(t,n[r],r,n)&&i.push(n[r]);return i}function hs(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function Z7e(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return function(){return n.apply(e,t.concat(m7.call(arguments)))}}var Xr=Cw&&Ci(Cw.bind)?Cw.call.bind(Cw.bind):Z7e;function Ns(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(m7.call(arguments)))}}function Un(n){return Array.isArray?Array.isArray(n):EA.call(n)==="[object Array]"}function Ci(n){return typeof n=="function"}function ri(n){return typeof n=="string"}function L8(n){return EA.call(n)==="[object String]"}function jr(n){return typeof n=="number"}function hi(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function Wz(n){return!!cte[EA.call(n)]}function tl(n){return!!ute[EA.call(n)]}function Ax(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function FM(n){return n.colorStops!=null}function J7e(n){return n.image!=null}function BC(n){return n!==n}function Sx(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,i=n.length;t<i;t++)if(n[t]!=null)return n[t]}function ki(n,e){return n??e}function mb(n,e,t){return n??e??t}function y7(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return m7.apply(n,e)}function fte(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function mf(n,e){if(!n)throw new Error(e)}function Ou(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var hte="__ec_primitive__";function k8(n){n[hte]=!0}function vb(n){return n[hte]}var eFe=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return hs(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},n}(),pte=typeof Map=="function";function tFe(){return pte?new Map:new eFe}var nFe=function(){function n(e){var t=Un(e);this.data=tFe();var i=this;e instanceof n?e.each(r):e&&mt(e,r);function r(s,a){t?i.set(s,a):i.set(a,s)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(i,r){e.call(t,i,r)})},n.prototype.keys=function(){var e=this.data.keys();return pte?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function Vi(n){return new nFe(n)}function iFe(n,e){for(var t=new n.constructor(n.length+e.length),i=0;i<n.length;i++)t[i]=n[i];for(var r=n.length,i=0;i<e.length;i++)t[i+r]=e[i];return t}function BM(n,e){var t;if(Object.create)t=Object.create(n);else{var i=function(){};i.prototype=n,t=new i}return e&&pn(t,e),t}function mte(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function hm(n,e){return n.hasOwnProperty(e)}function $o(){}var rFe=180/Math.PI;function hy(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function sFe(n){return[n[0],n[1]]}function qz(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function aFe(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function oFe(n){return Math.sqrt(lFe(n))}function lFe(n){return n[0]*n[0]+n[1]*n[1]}function Q5(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function cFe(n,e){var t=oFe(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function F8(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var B8=F8;function uFe(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var Xg=uFe;function Z5(n,e,t,i){return n[0]=e[0]+i*(t[0]-e[0]),n[1]=e[1]+i*(t[1]-e[1]),n}function lc(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function wg(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function Sg(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var Zm=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),dFe=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Zm(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var i=e.offsetX,r=e.offsetY,s=i-this._x,a=r-this._y;this._x=i,this._y=r,t.drift(s,a,e),this.handler.dispatchToElement(new Zm(t,e),"drag",e.event);var o=this.handler.findHover(i,r,t).target,l=this._dropTarget;this._dropTarget=o,t!==o&&(l&&o!==l&&this.handler.dispatchToElement(new Zm(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new Zm(o,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Zm(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Zm(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}(),ld=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,i,r){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof t=="function"&&(r=i,i=t,t=null),!i||!e)return this;var a=this._$eventProcessor;t!=null&&a&&a.normalizeQuery&&(t=a.normalizeQuery(t)),s[e]||(s[e]=[]);for(var o=0;o<s[e].length;o++)if(s[e][o].h===i)return this;var l={h:i,query:t,ctx:r||this,callAtLast:i.zrEventfulCallAtLast},c=s[e].length-1,u=s[e][c];return u&&u.callAtLast?s[e].splice(c,0,l):s[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var i=this._$handlers;if(!i)return this;if(!e)return this._$handlers={},this;if(t){if(i[e]){for(var r=[],s=0,a=i[e].length;s<a;s++)i[e][s].h!==t&&r.push(i[e][s]);i[e]=r}i[e]&&i[e].length===0&&delete i[e]}else delete i[e];return this},n.prototype.trigger=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[e],s=this._$eventProcessor;if(r)for(var a=t.length,o=r.length,l=0;l<o;l++){var c=r[l];if(!(s&&s.filter&&c.query!=null&&!s.filter(e,c.query)))switch(a){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[e],s=this._$eventProcessor;if(r)for(var a=t.length,o=t[a-1],l=r.length,c=0;c<l;c++){var u=r[c];if(!(s&&s.filter&&u.query!=null&&!s.filter(e,u.query)))switch(a){case 0:u.h.call(o);break;case 1:u.h.call(o,t[0]);break;case 2:u.h.call(o,t[0],t[1]);break;default:u.h.apply(o,t.slice(1,a-1));break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n}(),fFe=Math.log(2);function N8(n,e,t,i,r,s){var a=i+"-"+r,o=n.length;if(s.hasOwnProperty(a))return s[a];if(e===1){var l=Math.round(Math.log((1<<o)-1&~r)/fFe);return n[t][l]}for(var c=i|1<<t,u=t+1;i&1<<u;)u++;for(var d=0,f=0,h=0;f<o;f++){var p=1<<f;p&r||(d+=(h%2?-1:1)*n[t][f]*N8(n,e-1,u,c,r|p,s),h++)}return s[a]=d,d}function Kz(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],i={},r=N8(t,8,0,0,0,i);if(r!==0){for(var s=[],a=0;a<8;a++)for(var o=0;o<8;o++)s[o]==null&&(s[o]=0),s[o]+=((a+o)%2?-1:1)*N8(t,7,a===0?1:0,1<<a,1<<o,i)/r*e[a];return function(l,c,u){var d=c*s[6]+u*s[7]+1;l[0]=(c*s[0]+u*s[1]+s[2])/d,l[1]=(c*s[3]+u*s[4]+s[5])/d}}}var Yz="___zrEVENTSAVED",J5=[];function hFe(n,e,t,i,r){return O8(J5,e,i,r,!0)&&O8(n,t,J5[0],J5[1])}function O8(n,e,t,i,r){if(e.getBoundingClientRect&&Ai.domSupported&&!vte(e)){var s=e[Yz]||(e[Yz]={}),a=pFe(e,s),o=mFe(a,s,r);if(o)return o(n,t,i),!0}return!1}function pFe(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var i=["left","right"],r=["top","bottom"],s=0;s<4;s++){var a=document.createElement("div"),o=a.style,l=s%2,c=(s>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",r[c]+":0",i[1-l]+":auto",r[1-c]+":auto",""].join("!important;"),n.appendChild(a),t.push(a)}return t}function mFe(n,e,t){for(var i=t?"invTrans":"trans",r=e[i],s=e.srcCoords,a=[],o=[],l=!0,c=0;c<4;c++){var u=n[c].getBoundingClientRect(),d=2*c,f=u.left,h=u.top;a.push(f,h),l=l&&s&&f===s[d]&&h===s[d+1],o.push(n[c].offsetLeft,n[c].offsetTop)}return l&&r?r:(e.srcCoords=a,e[i]=t?Kz(o,a):Kz(a,o))}function vte(n){return n.nodeName.toUpperCase()==="CANVAS"}var vFe=/([&<>"'])/g,gFe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Vo(n){return n==null?"":(n+"").replace(vFe,function(e,t){return gFe[t]})}var yFe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,eE=[],bFe=Ai.browser.firefox&&+Ai.browser.version.split(".")[0]<39;function U8(n,e,t,i){return t=t||{},i?Xz(n,e,t):bFe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):Xz(n,e,t),t}function Xz(n,e,t){if(Ai.domSupported&&n.getBoundingClientRect){var i=e.clientX,r=e.clientY;if(vte(n)){var s=n.getBoundingClientRect();t.zrX=i-s.left,t.zrY=r-s.top;return}else if(O8(eE,n,i,r)){t.zrX=eE[0],t.zrY=eE[1];return}}t.zrX=t.zrY=0}function b7(n){return n||window.event}function Hl(n,e,t){if(e=b7(e),e.zrX!=null)return e;var i=e.type,r=i&&i.indexOf("touch")>=0;if(r){var a=i!=="touchend"?e.targetTouches[0]:e.changedTouches[0];a&&U8(n,a,e,t)}else{U8(n,e,e,t);var s=xFe(e);e.zrDelta=s?s/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&yFe.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function xFe(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,i=n.deltaY;if(t==null||i==null)return e;var r=Math.abs(i!==0?i:t),s=i>0?-1:i<0?1:t>0?-1:1;return 3*r*s}function AFe(n,e,t,i){n.addEventListener(e,t,i)}function wFe(n,e,t,i){n.removeEventListener(e,t,i)}var gte=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0},SFe=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,i){return this._doTrack(e,t,i),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,i){var r=e.touches;if(r){for(var s={points:[],touches:[],target:t,event:e},a=0,o=r.length;a<o;a++){var l=r[a],c=U8(i,l,{});s.points.push([c.zrX,c.zrY]),s.touches.push(l)}this._track.push(s)}},n.prototype._recognize=function(e){for(var t in tE)if(tE.hasOwnProperty(t)){var i=tE[t](this._track,e);if(i)return i}},n}();function jz(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function _Fe(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var tE={pinch:function(n,e){var t=n.length;if(t){var i=(n[t-1]||{}).points,r=(n[t-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var s=jz(i)/jz(r);!isFinite(s)&&(s=1),e.pinchScale=s;var a=_Fe(i);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:n[0].target,event:e}}}}};function jg(){return[1,0,0,1,0,0]}function x7(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function CFe(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function $g(n,e,t){var i=e[0]*t[0]+e[2]*t[1],r=e[1]*t[0]+e[3]*t[1],s=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=i,n[1]=r,n[2]=s,n[3]=a,n[4]=o,n[5]=l,n}function z8(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function A7(n,e,t,i){i===void 0&&(i=[0,0]);var r=e[0],s=e[2],a=e[4],o=e[1],l=e[3],c=e[5],u=Math.sin(t),d=Math.cos(t);return n[0]=r*d+o*u,n[1]=-r*u+o*d,n[2]=s*d+l*u,n[3]=-s*u+d*l,n[4]=d*(a-i[0])+u*(c-i[1])+i[0],n[5]=d*(c-i[1])-u*(a-i[0])+i[1],n}function MFe(n,e,t){var i=t[0],r=t[1];return n[0]=e[0]*i,n[1]=e[1]*r,n[2]=e[2]*i,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*r,n}function w7(n,e){var t=e[0],i=e[2],r=e[4],s=e[1],a=e[3],o=e[5],l=t*a-s*i;return l?(l=1/l,n[0]=a*l,n[1]=-s*l,n[2]=-i*l,n[3]=t*l,n[4]=(i*o-a*r)*l,n[5]=(s*r-t*o)*l,n):null}var wi=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,i=this.y;return this.x=e[0]*t+e[2]*i+e[4],this.y=e[1]*t+e[3]*i+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,i){e.x=t,e.y=i},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,i){e.x=t.x+i.x,e.y=t.y+i.y},n.sub=function(e,t,i){e.x=t.x-i.x,e.y=t.y-i.y},n.scale=function(e,t,i){e.x=t.x*i,e.y=t.y*i},n.scaleAndAdd=function(e,t,i,r){e.x=t.x+i.x*r,e.y=t.y+i.y*r},n.lerp=function(e,t,i,r){var s=1-r;e.x=s*t.x+r*i.x,e.y=s*t.y+r*i.y},n}(),Mw=Math.min,Tw=Math.max,Bp=new wi,Np=new wi,Op=new wi,Up=new wi,$y=new wi,Qy=new wi,_r=function(){function n(e,t,i,r){i<0&&(e=e+i,i=-i),r<0&&(t=t+r,r=-r),this.x=e,this.y=t,this.width=i,this.height=r}return n.prototype.union=function(e){var t=Mw(e.x,this.x),i=Mw(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Tw(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Tw(e.y+e.height,this.y+this.height)-i:this.height=e.height,this.x=t,this.y=i},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,i=e.width/t.width,r=e.height/t.height,s=jg();return z8(s,s,[-t.x,-t.y]),MFe(s,s,[i,r]),z8(s,s,[e.x,e.y]),s},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var i=this,r=i.x,s=i.x+i.width,a=i.y,o=i.y+i.height,l=e.x,c=e.x+e.width,u=e.y,d=e.y+e.height,f=!(s<l||c<r||o<u||d<a);if(t){var h=1/0,p=0,m=Math.abs(s-l),v=Math.abs(c-r),g=Math.abs(o-u),y=Math.abs(d-a),x=Math.min(m,v),b=Math.min(g,y);s<l||c<r?x>p&&(p=x,m<v?wi.set(Qy,-m,0):wi.set(Qy,v,0)):x<h&&(h=x,m<v?wi.set($y,m,0):wi.set($y,-v,0)),o<u||d<a?b>p&&(p=b,g<y?wi.set(Qy,0,-g):wi.set(Qy,0,y)):x<h&&(h=x,g<y?wi.set($y,0,g):wi.set($y,0,-y))}return t&&wi.copy(t,f?$y:Qy),f},n.prototype.contain=function(e,t){var i=this;return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,i){if(!i){e!==t&&n.copy(e,t);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],s=i[3],a=i[4],o=i[5];e.x=t.x*r+a,e.y=t.y*s+o,e.width=t.width*r,e.height=t.height*s,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Bp.x=Op.x=t.x,Bp.y=Up.y=t.y,Np.x=Up.x=t.x+t.width,Np.y=Op.y=t.y+t.height,Bp.transform(i),Up.transform(i),Np.transform(i),Op.transform(i),e.x=Mw(Bp.x,Np.x,Op.x,Up.x),e.y=Mw(Bp.y,Np.y,Op.y,Up.y);var l=Tw(Bp.x,Np.x,Op.x,Up.x),c=Tw(Bp.y,Np.y,Op.y,Up.y);e.width=l-e.x,e.height=c-e.y},n}(),yte="silent";function TFe(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:EFe}}function EFe(){gte(this.event)}var IFe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(ld),Zy=function(){function n(e,t){this.x=e,this.y=t}return n}(),DFe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],nE=new _r(0,0,0,0),bte=function(n){kn(e,n);function e(t,i,r,s,a){var o=n.call(this)||this;return o._hovered=new Zy(0,0),o.storage=t,o.painter=i,o.painterRoot=s,o._pointerSize=a,r=r||new IFe,o.proxy=null,o.setHandlerProxy(r),o._draggingMgr=new dFe(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(mt(DFe,function(i){t.on&&t.on(i,this[i],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var i=t.zrX,r=t.zrY,s=xte(this,i,r),a=this._hovered,o=a.target;o&&!o.__zr&&(a=this.findHover(a.x,a.y),o=a.target);var l=this._hovered=s?new Zy(i,r):this.findHover(i,r),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),o&&c!==o&&this.dispatchToElement(a,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==o&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var i=t.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Zy(0,0)},e.prototype.dispatch=function(t,i){var r=this[t];r&&r.call(this,i)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var i=this.proxy;i.setCursor&&i.setCursor(t)},e.prototype.dispatchToElement=function(t,i,r){t=t||{};var s=t.target;if(!(s&&s.silent)){for(var a="on"+i,o=TFe(i,t,r);s&&(s[a]&&(o.cancelBubble=!!s[a].call(s,o)),s.trigger(i,o),s=s.__hostTarget?s.__hostTarget:s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(i,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,o),l.trigger&&l.trigger(i,o)}))}},e.prototype.findHover=function(t,i,r){var s=this.storage.getDisplayList(),a=new Zy(t,i);if($z(s,a,t,i,r),this._pointerSize&&!a.target){for(var o=[],l=this._pointerSize,c=l/2,u=new _r(t-c,i-c,l,l),d=s.length-1;d>=0;d--){var f=s[d];f!==r&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(nE.copy(f.getBoundingRect()),f.transform&&nE.applyTransform(f.transform),nE.intersect(u)&&o.push(f))}if(o.length)for(var h=4,p=Math.PI/12,m=Math.PI*2,v=0;v<c;v+=h)for(var g=0;g<m;g+=p){var y=t+v*Math.cos(g),x=i+v*Math.sin(g);if($z(o,a,y,x,r),a.target)return a}}return a},e.prototype.processGesture=function(t,i){this._gestureMgr||(this._gestureMgr=new SFe);var r=this._gestureMgr;i==="start"&&r.clear();var s=r.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(i==="end"&&r.clear(),s){var a=s.type;t.gestureEvent=a;var o=new Zy;o.target=s.target,this.dispatchToElement(o,a,s.event)}},e}(ld);mt(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){bte.prototype[n]=function(e){var t=e.zrX,i=e.zrY,r=xte(this,t,i),s,a;if((n!=="mouseup"||!r)&&(s=this.findHover(t,i),a=s.target),n==="mousedown")this._downEl=a,this._downPoint=[e.zrX,e.zrY],this._upEl=a;else if(n==="mouseup")this._upEl=a;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||B8(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,n,e)}});function RFe(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var i=n,r=void 0,s=!1;i;){if(i.ignoreClip&&(s=!0),!s){var a=i.getClipPath();if(a&&!a.contain(e,t))return!1}i.silent&&(r=!0);var o=i.__hostTarget;i=o||i.parent}return r?yte:!0}return!1}function $z(n,e,t,i,r){for(var s=n.length-1;s>=0;s--){var a=n[s],o=void 0;if(a!==r&&!a.ignore&&(o=RFe(a,t,i))&&(!e.topTarget&&(e.topTarget=a),o!==yte)){e.target=a;break}}}function xte(n,e,t){var i=n.painter;return e<0||e>i.getWidth()||t<0||t>i.getHeight()}var Ate=32,Jy=7;function PFe(n){for(var e=0;n>=Ate;)e|=n&1,n>>=1;return n+e}function Qz(n,e,t,i){var r=e+1;if(r===t)return 1;if(i(n[r++],n[e])<0){for(;r<t&&i(n[r],n[r-1])<0;)r++;LFe(n,e,r)}else for(;r<t&&i(n[r],n[r-1])>=0;)r++;return r-e}function LFe(n,e,t){for(t--;e<t;){var i=n[e];n[e++]=n[t],n[t--]=i}}function Zz(n,e,t,i,r){for(i===e&&i++;i<t;i++){for(var s=n[i],a=e,o=i,l;a<o;)l=a+o>>>1,r(s,n[l])<0?o=l:a=l+1;var c=i-a;switch(c){case 3:n[a+3]=n[a+2];case 2:n[a+2]=n[a+1];case 1:n[a+1]=n[a];break;default:for(;c>0;)n[a+c]=n[a+c-1],c--}n[a]=s}}function iE(n,e,t,i,r,s){var a=0,o=0,l=1;if(s(n,e[t+r])>0){for(o=i-r;l<o&&s(n,e[t+r+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}else{for(o=r+1;l<o&&s(n,e[t+r-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=a;a=r-l,l=r-c}for(a++;a<l;){var u=a+(l-a>>>1);s(n,e[t+u])>0?a=u+1:l=u}return l}function rE(n,e,t,i,r,s){var a=0,o=0,l=1;if(s(n,e[t+r])<0){for(o=r+1;l<o&&s(n,e[t+r-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=a;a=r-l,l=r-c}else{for(o=i-r;l<o&&s(n,e[t+r+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}for(a++;a<l;){var u=a+(l-a>>>1);s(n,e[t+u])<0?l=u:a=u+1}return l}function kFe(n,e){var t=Jy,i,r,s=0,a=[];i=[],r=[];function o(h,p){i[s]=h,r[s]=p,s+=1}function l(){for(;s>1;){var h=s-2;if(h>=1&&r[h-1]<=r[h]+r[h+1]||h>=2&&r[h-2]<=r[h]+r[h-1])r[h-1]<r[h+1]&&h--;else if(r[h]>r[h+1])break;u(h)}}function c(){for(;s>1;){var h=s-2;h>0&&r[h-1]<r[h+1]&&h--,u(h)}}function u(h){var p=i[h],m=r[h],v=i[h+1],g=r[h+1];r[h]=m+g,h===s-3&&(i[h+1]=i[h+2],r[h+1]=r[h+2]),s--;var y=rE(n[v],n,p,m,0,e);p+=y,m-=y,m!==0&&(g=iE(n[p+m-1],n,v,g,g-1,e),g!==0&&(m<=g?d(p,m,v,g):f(p,m,v,g)))}function d(h,p,m,v){var g=0;for(g=0;g<p;g++)a[g]=n[h+g];var y=0,x=m,b=h;if(n[b++]=n[x++],--v===0){for(g=0;g<p;g++)n[b+g]=a[y+g];return}if(p===1){for(g=0;g<v;g++)n[b+g]=n[x+g];n[b+v]=a[y];return}for(var A=t,S,C,_;;){S=0,C=0,_=!1;do if(e(n[x],a[y])<0){if(n[b++]=n[x++],C++,S=0,--v===0){_=!0;break}}else if(n[b++]=a[y++],S++,C=0,--p===1){_=!0;break}while((S|C)<A);if(_)break;do{if(S=rE(n[x],a,y,p,0,e),S!==0){for(g=0;g<S;g++)n[b+g]=a[y+g];if(b+=S,y+=S,p-=S,p<=1){_=!0;break}}if(n[b++]=n[x++],--v===0){_=!0;break}if(C=iE(a[y],n,x,v,0,e),C!==0){for(g=0;g<C;g++)n[b+g]=n[x+g];if(b+=C,x+=C,v-=C,v===0){_=!0;break}}if(n[b++]=a[y++],--p===1){_=!0;break}A--}while(S>=Jy||C>=Jy);if(_)break;A<0&&(A=0),A+=2}if(t=A,t<1&&(t=1),p===1){for(g=0;g<v;g++)n[b+g]=n[x+g];n[b+v]=a[y]}else{if(p===0)throw new Error;for(g=0;g<p;g++)n[b+g]=a[y+g]}}function f(h,p,m,v){var g=0;for(g=0;g<v;g++)a[g]=n[m+g];var y=h+p-1,x=v-1,b=m+v-1,A=0,S=0;if(n[b--]=n[y--],--p===0){for(A=b-(v-1),g=0;g<v;g++)n[A+g]=a[g];return}if(v===1){for(b-=p,y-=p,S=b+1,A=y+1,g=p-1;g>=0;g--)n[S+g]=n[A+g];n[b]=a[x];return}for(var C=t;;){var _=0,M=0,T=!1;do if(e(a[x],n[y])<0){if(n[b--]=n[y--],_++,M=0,--p===0){T=!0;break}}else if(n[b--]=a[x--],M++,_=0,--v===1){T=!0;break}while((_|M)<C);if(T)break;do{if(_=p-rE(a[x],n,h,p,p-1,e),_!==0){for(b-=_,y-=_,p-=_,S=b+1,A=y+1,g=_-1;g>=0;g--)n[S+g]=n[A+g];if(p===0){T=!0;break}}if(n[b--]=a[x--],--v===1){T=!0;break}if(M=v-iE(n[y],a,0,v,v-1,e),M!==0){for(b-=M,x-=M,v-=M,S=b+1,A=x+1,g=0;g<M;g++)n[S+g]=a[A+g];if(v<=1){T=!0;break}}if(n[b--]=n[y--],--p===0){T=!0;break}C--}while(_>=Jy||M>=Jy);if(T)break;C<0&&(C=0),C+=2}if(t=C,t<1&&(t=1),v===1){for(b-=p,y-=p,S=b+1,A=y+1,g=p-1;g>=0;g--)n[S+g]=n[A+g];n[b]=a[x]}else{if(v===0)throw new Error;for(A=b-(v-1),g=0;g<v;g++)n[A+g]=a[g]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:o}}function v_(n,e,t,i){t||(t=0),i||(i=n.length);var r=i-t;if(!(r<2)){var s=0;if(r<Ate){s=Qz(n,t,i,e),Zz(n,t,i,t+s,e);return}var a=kFe(n,e),o=PFe(r);do{if(s=Qz(n,t,i,e),s<o){var l=r;l>o&&(l=o),Zz(n,t,t+l,t+s,e),s=l}a.pushRun(t,s),a.mergeRuns(),r-=s,t+=s}while(r!==0);a.forceMergeRuns()}}var qu=1,g_=2,V2=4,Jz=!1;function sE(){Jz||(Jz=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function eV(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var FFe=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=eV}return n.prototype.traverse=function(e,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var i=this._displayList;return(e||!i.length)&&this.updateDisplayList(t),i},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,i=this._displayList,r=0,s=t.length;r<s;r++)this._updateAndAddDisplayable(t[r],null,e);i.length=this._displayListLen,v_(i,eV)},n.prototype._updateAndAddDisplayable=function(e,t,i){if(!(e.ignore&&!i)){e.beforeUpdate(),e.update(),e.afterUpdate();var r=e.getClipPath();if(e.ignoreClip)t=null;else if(r){t?t=t.slice():t=[];for(var s=r,a=e;s;)s.parent=a,s.updateTransform(),t.push(s),a=s,s=s.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var c=o[l];e.__dirty&&(c.__dirty|=qu),this._updateAndAddDisplayable(c,t,i)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(sE(),u.z=0),isNaN(u.z2)&&(sE(),u.z2=0),isNaN(u.zlevel)&&(sE(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,i);var f=e.getTextGuideLine();f&&this._updateAndAddDisplayable(f,t,i);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,t,i)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,i=e.length;t<i;t++)this.delRoot(e[t]);return}var r=Nr(this._roots,e);r>=0&&this._roots.splice(r,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),NC;NC=Ai.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var gb={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)))},elasticOut:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/i)+1)},elasticInOut:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-gb.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?gb.bounceIn(n*2)*.5:gb.bounceOut(n*2-1)*.5+.5}},Ew=Math.pow,Vh=Math.sqrt,wte=1e-8,Ste=1e-4,tV=Vh(3),Iw=1/3,Fu=hy(),Xl=hy(),Qg=hy();function Lh(n){return n>-1e-8&&n<wte}function _te(n){return n>wte||n<-1e-8}function Ca(n,e,t,i,r){var s=1-r;return s*s*(s*n+3*r*e)+r*r*(r*i+3*s*t)}function nV(n,e,t,i,r){var s=1-r;return 3*(((e-n)*s+2*(t-e)*r)*s+(i-t)*r*r)}function OC(n,e,t,i,r,s){var a=i+3*(e-t)-n,o=3*(t-e*2+n),l=3*(e-n),c=n-r,u=o*o-3*a*l,d=o*l-9*a*c,f=l*l-3*o*c,h=0;if(Lh(u)&&Lh(d))if(Lh(o))s[0]=0;else{var p=-l/o;p>=0&&p<=1&&(s[h++]=p)}else{var m=d*d-4*u*f;if(Lh(m)){var v=d/u,p=-o/a+v,g=-v/2;p>=0&&p<=1&&(s[h++]=p),g>=0&&g<=1&&(s[h++]=g)}else if(m>0){var y=Vh(m),x=u*o+1.5*a*(-d+y),b=u*o+1.5*a*(-d-y);x<0?x=-Ew(-x,Iw):x=Ew(x,Iw),b<0?b=-Ew(-b,Iw):b=Ew(b,Iw);var p=(-o-(x+b))/(3*a);p>=0&&p<=1&&(s[h++]=p)}else{var A=(2*u*o-3*a*d)/(2*Vh(u*u*u)),S=Math.acos(A)/3,C=Vh(u),_=Math.cos(S),p=(-o-2*C*_)/(3*a),g=(-o+C*(_+tV*Math.sin(S)))/(3*a),M=(-o+C*(_-tV*Math.sin(S)))/(3*a);p>=0&&p<=1&&(s[h++]=p),g>=0&&g<=1&&(s[h++]=g),M>=0&&M<=1&&(s[h++]=M)}}return h}function Cte(n,e,t,i,r){var s=6*t-12*e+6*n,a=9*e+3*i-3*n-9*t,o=3*e-3*n,l=0;if(Lh(a)){if(_te(s)){var c=-o/s;c>=0&&c<=1&&(r[l++]=c)}}else{var u=s*s-4*a*o;if(Lh(u))r[0]=-s/(2*a);else if(u>0){var d=Vh(u),c=(-s+d)/(2*a),f=(-s-d)/(2*a);c>=0&&c<=1&&(r[l++]=c),f>=0&&f<=1&&(r[l++]=f)}}return l}function UC(n,e,t,i,r,s){var a=(e-n)*r+n,o=(t-e)*r+e,l=(i-t)*r+t,c=(o-a)*r+a,u=(l-o)*r+o,d=(u-c)*r+c;s[0]=n,s[1]=a,s[2]=c,s[3]=d,s[4]=d,s[5]=u,s[6]=l,s[7]=i}function BFe(n,e,t,i,r,s,a,o,l,c,u){var d,f=.005,h=1/0,p,m,v,g;Fu[0]=l,Fu[1]=c;for(var y=0;y<1;y+=.05)Xl[0]=Ca(n,t,r,a,y),Xl[1]=Ca(e,i,s,o,y),v=Xg(Fu,Xl),v<h&&(d=y,h=v);h=1/0;for(var x=0;x<32&&!(f<Ste);x++)p=d-f,m=d+f,Xl[0]=Ca(n,t,r,a,p),Xl[1]=Ca(e,i,s,o,p),v=Xg(Xl,Fu),p>=0&&v<h?(d=p,h=v):(Qg[0]=Ca(n,t,r,a,m),Qg[1]=Ca(e,i,s,o,m),g=Xg(Qg,Fu),m<=1&&g<h?(d=m,h=g):f*=.5);return Vh(h)}function NFe(n,e,t,i,r,s,a,o,l){for(var c=n,u=e,d=0,f=1/l,h=1;h<=l;h++){var p=h*f,m=Ca(n,t,r,a,p),v=Ca(e,i,s,o,p),g=m-c,y=v-u;d+=Math.sqrt(g*g+y*y),c=m,u=v}return d}function Ho(n,e,t,i){var r=1-i;return r*(r*n+2*i*e)+i*i*t}function iV(n,e,t,i){return 2*((1-i)*(e-n)+i*(t-e))}function OFe(n,e,t,i,r){var s=n-2*e+t,a=2*(e-n),o=n-i,l=0;if(Lh(s)){if(_te(a)){var c=-o/a;c>=0&&c<=1&&(r[l++]=c)}}else{var u=a*a-4*s*o;if(Lh(u)){var c=-a/(2*s);c>=0&&c<=1&&(r[l++]=c)}else if(u>0){var d=Vh(u),c=(-a+d)/(2*s),f=(-a-d)/(2*s);c>=0&&c<=1&&(r[l++]=c),f>=0&&f<=1&&(r[l++]=f)}}return l}function Mte(n,e,t){var i=n+t-2*e;return i===0?.5:(n-e)/i}function zC(n,e,t,i,r){var s=(e-n)*i+n,a=(t-e)*i+e,o=(a-s)*i+s;r[0]=n,r[1]=s,r[2]=o,r[3]=o,r[4]=a,r[5]=t}function UFe(n,e,t,i,r,s,a,o,l){var c,u=.005,d=1/0;Fu[0]=a,Fu[1]=o;for(var f=0;f<1;f+=.05){Xl[0]=Ho(n,t,r,f),Xl[1]=Ho(e,i,s,f);var h=Xg(Fu,Xl);h<d&&(c=f,d=h)}d=1/0;for(var p=0;p<32&&!(u<Ste);p++){var m=c-u,v=c+u;Xl[0]=Ho(n,t,r,m),Xl[1]=Ho(e,i,s,m);var h=Xg(Xl,Fu);if(m>=0&&h<d)c=m,d=h;else{Qg[0]=Ho(n,t,r,v),Qg[1]=Ho(e,i,s,v);var g=Xg(Qg,Fu);v<=1&&g<d?(c=v,d=g):u*=.5}}return Vh(d)}function zFe(n,e,t,i,r,s,a){for(var o=n,l=e,c=0,u=1/a,d=1;d<=a;d++){var f=d*u,h=Ho(n,t,r,f),p=Ho(e,i,s,f),m=h-o,v=p-l;c+=Math.sqrt(m*m+v*v),o=h,l=p}return c}var VFe=/cubic-bezier\(([0-9,\.e ]+)\)/;function Tte(n){var e=n&&VFe.exec(n);if(e){var t=e[1].split(","),i=+Ou(t[0]),r=+Ou(t[1]),s=+Ou(t[2]),a=+Ou(t[3]);if(isNaN(i+r+s+a))return;var o=[];return function(l){return l<=0?0:l>=1?1:OC(0,i,s,1,l,o)&&Ca(0,r,a,1,o[0])}}}var HFe=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||$o,this.ondestroy=e.ondestroy||$o,this.onrestart=e.onrestart||$o,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var i=this._life,r=e-this._startTime-this._pausedTime,s=r/i;s<0&&(s=0),s=Math.min(s,1);var a=this.easingFunc,o=a?a(s):s;if(this.onframe(o),s===1)if(this.loop){var l=r%i;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Ci(e)?e:gb[e]||Tte(e)},n}(),Ete=function(){function n(e){this.value=e}return n}(),GFe=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new Ete(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,i=e.next;t?t.next=i:this.head=i,i?i.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),IA=function(){function n(e){this._list=new GFe,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var i=this._list,r=this._map,s=null;if(r[e]==null){var a=i.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=i.head;i.remove(l),delete r[l.key],s=l.value,this._lastRemovedEntry=l}o?o.value=t:o=new Ete(t),o.key=e,i.insertEntry(o),r[e]=o}return s},n.prototype.get=function(e){var t=this._map[e],i=this._list;if(t!=null)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),rV={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Hh(n){return n=Math.round(n),n<0?0:n>255?255:n}function V8(n){return n<0?0:n>1?1:n}function aE(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?Hh(parseFloat(e)/100*255):Hh(parseInt(e,10))}function yb(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?V8(parseFloat(e)/100):V8(parseFloat(e))}function oE(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Dw(n,e,t){return n+(e-n)*t}function Ul(n,e,t,i,r){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function H8(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var Ite=new IA(20),Rw=null;function Jm(n,e){Rw&&H8(Rw,e),Rw=Ite.put(n,Rw||e.slice())}function rf(n,e){if(n){e=e||[];var t=Ite.get(n);if(t)return H8(e,t);n=n+"";var i=n.replace(/ /g,"").toLowerCase();if(i in rV)return H8(e,rV[i]),Jm(n,e),e;var r=i.length;if(i.charAt(0)==="#"){if(r===4||r===5){var s=parseInt(i.slice(1,4),16);if(!(s>=0&&s<=4095)){Ul(e,0,0,0,1);return}return Ul(e,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,r===5?parseInt(i.slice(4),16)/15:1),Jm(n,e),e}else if(r===7||r===9){var s=parseInt(i.slice(1,7),16);if(!(s>=0&&s<=16777215)){Ul(e,0,0,0,1);return}return Ul(e,(s&16711680)>>16,(s&65280)>>8,s&255,r===9?parseInt(i.slice(7),16)/255:1),Jm(n,e),e}return}var a=i.indexOf("("),o=i.indexOf(")");if(a!==-1&&o+1===r){var l=i.substr(0,a),c=i.substr(a+1,o-(a+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?Ul(e,+c[0],+c[1],+c[2],1):Ul(e,0,0,0,1);u=yb(c.pop());case"rgb":if(c.length>=3)return Ul(e,aE(c[0]),aE(c[1]),aE(c[2]),c.length===3?u:yb(c[3])),Jm(n,e),e;Ul(e,0,0,0,1);return;case"hsla":if(c.length!==4){Ul(e,0,0,0,1);return}return c[3]=yb(c[3]),sV(c,e),Jm(n,e),e;case"hsl":if(c.length!==3){Ul(e,0,0,0,1);return}return sV(c,e),Jm(n,e),e;default:return}}Ul(e,0,0,0,1)}}function sV(n,e){var t=(parseFloat(n[0])%360+360)%360/360,i=yb(n[1]),r=yb(n[2]),s=r<=.5?r*(i+1):r+i-r*i,a=r*2-s;return e=e||[],Ul(e,Hh(oE(a,s,t+1/3)*255),Hh(oE(a,s,t)*255),Hh(oE(a,s,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function aV(n,e){var t=rf(n);if(t){for(var i=0;i<3;i++)t[i]=t[i]*(1-e)|0,t[i]>255?t[i]=255:t[i]<0&&(t[i]=0);return NM(t,t.length===4?"rgba":"rgb")}}function WFe(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var i=n*(e.length-1),r=Math.floor(i),s=Math.ceil(i),a=rf(e[r]),o=rf(e[s]),l=i-r,c=NM([Hh(Dw(a[0],o[0],l)),Hh(Dw(a[1],o[1],l)),Hh(Dw(a[2],o[2],l)),V8(Dw(a[3],o[3],l))],"rgba");return t?{color:c,leftIndex:r,rightIndex:s,value:i}:c}}function NM(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function VC(n,e){var t=rf(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var oV=new IA(100);function lV(n){if(ri(n)){var e=oV.get(n);return e||(e=aV(n,-.1),oV.put(n,e)),e}else if(FM(n)){var t=pn({},n);return t.colorStops=fi(n.colorStops,function(i){return{offset:i.offset,color:aV(i.color,-.1)}}),t}return n}function qFe(n){return n.type==="linear"}function KFe(n){return n.type==="radial"}(function(){return Ai.hasGlobalWindow&&Ci(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})();var G8=Array.prototype.slice;function Nd(n,e,t){return(e-n)*t+n}function lE(n,e,t,i){for(var r=e.length,s=0;s<r;s++)n[s]=Nd(e[s],t[s],i);return n}function YFe(n,e,t,i){for(var r=e.length,s=r&&e[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=Nd(e[a][o],t[a][o],i)}return n}function Pw(n,e,t,i){for(var r=e.length,s=0;s<r;s++)n[s]=e[s]+t[s]*i;return n}function cV(n,e,t,i){for(var r=e.length,s=r&&e[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=e[a][o]+t[a][o]*i}return n}function XFe(n,e){for(var t=n.length,i=e.length,r=t>i?e:n,s=Math.min(t,i),a=r[s-1]||{color:[0,0,0,0],offset:0},o=s;o<Math.max(t,i);o++)r.push({offset:a.offset,color:a.color.slice()})}function jFe(n,e,t){var i=n,r=e;if(!(!i.push||!r.push)){var s=i.length,a=r.length;if(s!==a){var o=s>a;if(o)i.length=a;else for(var l=s;l<a;l++)i.push(t===1?r[l]:G8.call(r[l]))}for(var c=i[0]&&i[0].length,l=0;l<i.length;l++)if(t===1)isNaN(i[l])&&(i[l]=r[l]);else for(var u=0;u<c;u++)isNaN(i[l][u])&&(i[l][u]=r[l][u])}}function y_(n){if(el(n)){var e=n.length;if(el(n[0])){for(var t=[],i=0;i<e;i++)t.push(G8.call(n[i]));return t}return G8.call(n)}return n}function b_(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function $Fe(n){return el(n&&n[0])?2:1}var Lw=0,x_=1,Dte=2,H2=3,W8=4,q8=5,uV=6;function dV(n){return n===W8||n===q8}function kw(n){return n===x_||n===Dte}var e2=[0,0,0,0],QFe=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,i){this._needsSort=!0;var r=this.keyframes,s=r.length,a=!1,o=uV,l=t;if(el(t)){var c=$Fe(t);o=c,(c===1&&!jr(t[0])||c===2&&!jr(t[0][0]))&&(a=!0)}else if(jr(t)&&!BC(t))o=Lw;else if(ri(t))if(!isNaN(+t))o=Lw;else{var u=rf(t);u&&(l=u,o=H2)}else if(FM(t)){var d=pn({},l);d.colorStops=fi(t.colorStops,function(h){return{offset:h.offset,color:rf(h.color)}}),qFe(t)?o=W8:KFe(t)&&(o=q8),l=d}s===0?this.valType=o:(o!==this.valType||o===uV)&&(a=!0),this.discrete=this.discrete||a;var f={time:e,value:l,rawValue:t,percent:0};return i&&(f.easing=i,f.easingFunc=Ci(i)?i:gb[i]||Tte(i)),r.push(f),f},n.prototype.prepare=function(e,t){var i=this.keyframes;this._needsSort&&i.sort(function(m,v){return m.time-v.time});for(var r=this.valType,s=i.length,a=i[s-1],o=this.discrete,l=kw(r),c=dV(r),u=0;u<s;u++){var d=i[u],f=d.value,h=a.value;d.percent=d.time/e,o||(l&&u!==s-1?jFe(f,h,r):c&&XFe(f.colorStops,h.colorStops))}if(!o&&r!==q8&&t&&this.needsAnimate()&&t.needsAnimate()&&r===t.valType&&!t._finished){this._additiveTrack=t;for(var p=i[0].value,u=0;u<s;u++)r===Lw?i[u].additiveValue=i[u].value-p:r===H2?i[u].additiveValue=Pw([],i[u].value,p,-1):kw(r)&&(i[u].additiveValue=r===x_?Pw([],i[u].value,p,-1):cV([],i[u].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,r=i?"additiveValue":"value",s=this.valType,a=this.keyframes,o=a.length,l=this.propName,c=s===H2,u,d=this._lastFr,f=Math.min,h,p;if(o===1)h=p=a[0];else{if(t<0)u=0;else if(t<this._lastFrP){var m=f(d+1,o-1);for(u=m;u>=0&&!(a[u].percent<=t);u--);u=f(u,o-2)}else{for(u=d;u<o&&!(a[u].percent>t);u++);u=f(u-1,o-2)}p=a[u+1],h=a[u]}if(h&&p){this._lastFr=u,this._lastFrP=t;var v=p.percent-h.percent,g=v===0?1:f((t-h.percent)/v,1);p.easingFunc&&(g=p.easingFunc(g));var y=i?this._additiveValue:c?e2:e[l];if((kw(s)||c)&&!y&&(y=this._additiveValue=[]),this.discrete)e[l]=g<1?h.rawValue:p.rawValue;else if(kw(s))s===x_?lE(y,h[r],p[r],g):YFe(y,h[r],p[r],g);else if(dV(s)){var x=h[r],b=p[r],A=s===W8;e[l]={type:A?"linear":"radial",x:Nd(x.x,b.x,g),y:Nd(x.y,b.y,g),colorStops:fi(x.colorStops,function(C,_){var M=b.colorStops[_];return{offset:Nd(C.offset,M.offset,g),color:b_(lE([],C.color,M.color,g))}}),global:b.global},A?(e[l].x2=Nd(x.x2,b.x2,g),e[l].y2=Nd(x.y2,b.y2,g)):e[l].r=Nd(x.r,b.r,g)}else if(c)lE(y,h[r],p[r],g),i||(e[l]=b_(y));else{var S=Nd(h[r],p[r],g);i?this._additiveValue=S:e[l]=S}i&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,i=this.propName,r=this._additiveValue;t===Lw?e[i]=e[i]+r:t===H2?(rf(e[i],e2),Pw(e2,e2,r,1),e[i]=b_(e2)):t===x_?Pw(e[i],e[i],r,1):t===Dte&&cV(e[i],e[i],r,1)},n}(),S7=function(){function n(e,t,i,r){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&r){g7("Can' use additive animation on looped animation.");return}this._additiveAnimators=r,this._allowDiscrete=i}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,i){return this.whenWithKeys(e,t,hs(t),i)},n.prototype.whenWithKeys=function(e,t,i,r){for(var s=this._tracks,a=0;a<i.length;a++){var o=i[a],l=s[o];if(!l){l=s[o]=new QFe(o);var c=void 0,u=this._getAdditiveTrack(o);if(u){var d=u.keyframes,f=d[d.length-1];c=f&&f.value,u.valType===H2&&c&&(c=b_(c))}else c=this._target[o];if(c==null)continue;e>0&&l.addKeyframe(0,y_(c),r),this._trackKeys.push(o)}l.addKeyframe(e,y_(t[o]),r)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,i=0;i<t;i++)e[i].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var i=0;i<t.length;i++)t[i].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,i=0;i<t.length;i++)e[t[i]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,i=this._additiveAnimators;if(i)for(var r=0;r<i.length;r++){var s=i[r].getTrack(e);s&&(t=s)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,i=[],r=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var a=this._trackKeys[s],o=this._tracks[a],l=this._getAdditiveTrack(a),c=o.keyframes,u=c.length;if(o.prepare(r,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var d=c[u-1];d&&(t._target[o.propName]=d.rawValue),o.setFinished()}else i.push(o)}if(i.length||this._force){var f=new HFe({life:r,loop:this._loop,delay:this._delay||0,onframe:function(h){t._started=2;var p=t._additiveAnimators;if(p){for(var m=!1,v=0;v<p.length;v++)if(p[v]._clip){m=!0;break}m||(t._additiveAnimators=null)}for(var v=0;v<i.length;v++)i[v].step(t._target,h);var g=t._onframeCbs;if(g)for(var v=0;v<g.length;v++)g[v](t._target,h)},ondestroy:function(){t._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),e&&f.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return fi(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var i=this._tracks,r=this._trackKeys,s=0;s<e.length;s++){var a=i[e[s]];a&&!a.isFinished()&&(t?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var o=!0,s=0;s<r.length;s++)if(!i[r[s]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},n.prototype.saveTo=function(e,t,i){if(e){t=t||this._trackKeys;for(var r=0;r<t.length;r++){var s=t[r],a=this._tracks[s];if(!(!a||a.isFinished())){var o=a.keyframes,l=o[i?0:o.length-1];l&&(e[s]=y_(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||hs(e);for(var i=0;i<t.length;i++){var r=t[i],s=this._tracks[r];if(s){var a=s.keyframes;if(a.length>1){var o=a.pop();s.addKeyframe(o.time,e[r]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},n}();function _g(){return new Date().getTime()}var ZFe=function(n){kn(e,n);function e(t){var i=n.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,t=t||{},i.stage=t.stage||{},i}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var i=t.getClip();i&&this.addClip(i)},e.prototype.removeClip=function(t){if(t.animation){var i=t.prev,r=t.next;i?i.next=r:this._head=r,r?r.prev=i:this._tail=i,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var i=t.getClip();i&&this.removeClip(i),t.animation=null},e.prototype.update=function(t){for(var i=_g()-this._pausedTime,r=i-this._time,s=this._head;s;){var a=s.next,o=s.step(i,r);o&&(s.ondestroy(),this.removeClip(s)),s=a}this._time=i,t||(this.trigger("frame",r),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function i(){t._running&&(NC(i),!t._paused&&t.update())}NC(i)},e.prototype.start=function(){this._running||(this._time=_g(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=_g(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=_g()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var i=t.next;t.prev=t.next=t.animation=null,t=i}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,i){i=i||{},this.start();var r=new S7(t,i.loop);return this.addAnimator(r),r},e}(ld),JFe=300,cE=Ai.domSupported,uE=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=fi(n,function(r){var s=r.replace("mouse","pointer");return t.hasOwnProperty(s)?s:r});return{mouse:n,touch:e,pointer:i}}(),fV={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},hV=!1;function K8(n){var e=n.pointerType;return e==="pen"||e==="touch"}function eBe(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function dE(n){n&&(n.zrByTouch=!0)}function tBe(n,e){return Hl(n.dom,new nBe(n,e),!0)}function Rte(n,e){for(var t=e,i=!1;t&&t.nodeType!==9&&!(i=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return i}var nBe=function(){function n(e,t){this.stopPropagation=$o,this.stopImmediatePropagation=$o,this.preventDefault=$o,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),Nc={mousedown:function(n){n=Hl(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=Hl(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=Hl(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=Hl(this.dom,n);var e=n.toElement||n.relatedTarget;Rte(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){hV=!0,n=Hl(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){hV||(n=Hl(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=Hl(this.dom,n),dE(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),Nc.mousemove.call(this,n),Nc.mousedown.call(this,n)},touchmove:function(n){n=Hl(this.dom,n),dE(n),this.handler.processGesture(n,"change"),Nc.mousemove.call(this,n)},touchend:function(n){n=Hl(this.dom,n),dE(n),this.handler.processGesture(n,"end"),Nc.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<JFe&&Nc.click.call(this,n)},pointerdown:function(n){Nc.mousedown.call(this,n)},pointermove:function(n){K8(n)||Nc.mousemove.call(this,n)},pointerup:function(n){Nc.mouseup.call(this,n)},pointerout:function(n){K8(n)||Nc.mouseout.call(this,n)}};mt(["click","dblclick","contextmenu"],function(n){Nc[n]=function(e){e=Hl(this.dom,e),this.trigger(n,e)}});var Y8={pointermove:function(n){K8(n)||Y8.mousemove.call(this,n)},pointerup:function(n){Y8.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function iBe(n,e){var t=e.domHandlers;Ai.pointerEventsSupported?mt(uE.pointer,function(i){A_(e,i,function(r){t[i].call(n,r)})}):(Ai.touchEventsSupported&&mt(uE.touch,function(i){A_(e,i,function(r){t[i].call(n,r),eBe(e)})}),mt(uE.mouse,function(i){A_(e,i,function(r){r=b7(r),e.touching||t[i].call(n,r)})}))}function rBe(n,e){Ai.pointerEventsSupported?mt(fV.pointer,t):Ai.touchEventsSupported||mt(fV.mouse,t);function t(i){function r(s){s=b7(s),Rte(n,s.target)||(s=tBe(n,s),e.domHandlers[i].call(n,s))}A_(e,i,r,{capture:!0})}}function A_(n,e,t,i){n.mounted[e]=t,n.listenerOpts[e]=i,AFe(n.domTarget,e,t,i)}function fE(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&wFe(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var pV=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),sBe=function(n){kn(e,n);function e(t,i){var r=n.call(this)||this;return r.__pointerCapturing=!1,r.dom=t,r.painterRoot=i,r._localHandlerScope=new pV(t,Nc),cE&&(r._globalHandlerScope=new pV(document,Y8)),iBe(r,r._localHandlerScope),r}return e.prototype.dispose=function(){fE(this._localHandlerScope),cE&&fE(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,cE&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var i=this._globalHandlerScope;t?rBe(this,i):fE(i)}},e}(ld),Pte=1;Ai.hasGlobalWindow&&(Pte=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var HC=Pte,X8=.4,j8="#333",$8="#ccc",aBe="#eee",mV=x7,oBe=5e-5;function zp(n){return n>oBe||n<-5e-5}var Vp=[],ev=[],hE=jg(),pE=Math.abs,_7=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return zp(this.rotation)||zp(this.x)||zp(this.y)||zp(this.scaleX-1)||zp(this.scaleY-1)||zp(this.skewX)||zp(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),i=this.transform;if(!(t||e)){i&&(mV(i),this.invTransform=null);return}i=i||jg(),t?this.getLocalTransform(i):mV(i),e&&(t?$g(i,e,i):CFe(i,e)),this.transform=i,this._resolveGlobalScaleRatio(i)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(Vp);var i=Vp[0]<0?-1:1,r=Vp[1]<0?-1:1,s=((Vp[0]-i)*t+i)/Vp[0]||0,a=((Vp[1]-r)*t+r)/Vp[1]||0;e[0]*=s,e[1]*=s,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||jg(),w7(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],i=e[2]*e[2]+e[3]*e[3],r=Math.atan2(e[1],e[0]),s=Math.PI/2+r-Math.atan2(e[3],e[2]);i=Math.sqrt(i)*Math.cos(s),t=Math.sqrt(t),this.skewX=s,this.skewY=0,this.rotation=-r,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=i,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||jg(),$g(ev,e.invTransform,t),t=ev);var i=this.originX,r=this.originY;(i||r)&&(hE[4]=i,hE[5]=r,$g(ev,t,hE),ev[4]-=i,ev[5]-=r,t=ev),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var i=[e,t],r=this.invTransform;return r&&lc(i,i,r),i},n.prototype.transformCoordToGlobal=function(e,t){var i=[e,t],r=this.transform;return r&&lc(i,i,r),i},n.prototype.getLineScale=function(){var e=this.transform;return e&&pE(e[0]-1)>1e-10&&pE(e[3]-1)>1e-10?Math.sqrt(pE(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){lBe(this,e)},n.getLocalTransform=function(e,t){t=t||[];var i=e.originX||0,r=e.originY||0,s=e.scaleX,a=e.scaleY,o=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,d=e.y,f=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(i||r||o||l){var p=i+o,m=r+l;t[4]=-p*s-f*m*a,t[5]=-m*a-h*p*s}else t[4]=t[5]=0;return t[0]=s,t[3]=a,t[1]=h*s,t[2]=f*a,c&&A7(t,t,c),t[4]+=i+u,t[5]+=r+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),_x=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function lBe(n,e){for(var t=0;t<_x.length;t++){var i=_x[t];n[i]=e[i]}}var vV={};function Cl(n,e){e=e||fm;var t=vV[e];t||(t=vV[e]=new IA(500));var i=t.get(n);return i==null&&(i=fy.measureText(n,e).width,t.put(n,i)),i}function gV(n,e,t,i){var r=Cl(n,e),s=M7(e),a=G2(0,r,t),o=cg(0,s,i),l=new _r(a,o,r,s);return l}function C7(n,e,t,i){var r=((n||"")+"").split(`
`),s=r.length;if(s===1)return gV(r[0],e,t,i);for(var a=new _r(0,0,0,0),o=0;o<r.length;o++){var l=gV(r[o],e,t,i);o===0?a.copy(l):a.union(l)}return a}function G2(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function cg(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function M7(n){return Cl("国",n)}function lp(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function Lte(n,e,t){var i=e.position||"inside",r=e.distance!=null?e.distance:5,s=t.height,a=t.width,o=s/2,l=t.x,c=t.y,u="left",d="top";if(i instanceof Array)l+=lp(i[0],t.width),c+=lp(i[1],t.height),u=null,d=null;else switch(i){case"left":l-=r,c+=o,u="right",d="middle";break;case"right":l+=r+a,c+=o,d="middle";break;case"top":l+=a/2,c-=r,u="center",d="bottom";break;case"bottom":l+=a/2,c+=s+r,u="center";break;case"inside":l+=a/2,c+=o,u="center",d="middle";break;case"insideLeft":l+=r,c+=o,d="middle";break;case"insideRight":l+=a-r,c+=o,u="right",d="middle";break;case"insideTop":l+=a/2,c+=r,u="center";break;case"insideBottom":l+=a/2,c+=s-r,u="center",d="bottom";break;case"insideTopLeft":l+=r,c+=r;break;case"insideTopRight":l+=a-r,c+=r,u="right";break;case"insideBottomLeft":l+=r,c+=s-r,d="bottom";break;case"insideBottomRight":l+=a-r,c+=s-r,u="right",d="bottom";break}return n=n||{},n.x=l,n.y=c,n.align=u,n.verticalAlign=d,n}var mE="__zr_normal__",vE=_x.concat(["ignore"]),cBe=op(_x,function(n,e){return n[e]=!0,n},{ignore:!1}),tv={},uBe=new _r(0,0,0,0),OM=function(){function n(e){this.id=dte(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,i){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=e,r[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var i=this.textConfig,r=i.local,s=t.innerTransformable,a=void 0,o=void 0,l=!1;s.parent=r?this:null;var c=!1;if(s.copyTransform(t),i.position!=null){var u=uBe;i.layoutRect?u.copy(i.layoutRect):u.copy(this.getBoundingRect()),r||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tv,i,u):Lte(tv,i,u),s.x=tv.x,s.y=tv.y,a=tv.align,o=tv.verticalAlign;var d=i.origin;if(d&&i.rotation!=null){var f=void 0,h=void 0;d==="center"?(f=u.width*.5,h=u.height*.5):(f=lp(d[0],u.width),h=lp(d[1],u.height)),c=!0,s.originX=-s.x+f+(r?0:u.x),s.originY=-s.y+h+(r?0:u.y)}}i.rotation!=null&&(s.rotation=i.rotation);var p=i.offset;p&&(s.x+=p[0],s.y+=p[1],c||(s.originX=-p[0],s.originY=-p[1]));var m=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,y=void 0,x=void 0;m&&this.canBeInsideText()?(g=i.insideFill,y=i.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(g),x=!0)):(g=i.outsideFill,y=i.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(g),x=!0)),g=g||"#000",(g!==v.fill||y!==v.stroke||x!==v.autoStroke||a!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=g,v.stroke=y,v.autoStroke=x,v.align=a,v.verticalAlign=o,t.setDefaultTextStyle(v)),t.__dirty|=qu,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?$8:j8},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),i=typeof t=="string"&&rf(t);i||(i=[255,255,255,1]);for(var r=i[3],s=this.__zr.isDarkMode(),a=0;a<3;a++)i[a]=i[a]*r+(s?0:255)*(1-r);return i[3]=1,NM(i,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},pn(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(hi(e))for(var i=e,r=hs(i),s=0;s<r.length;s++){var a=r[s];this.attrKV(a,e[a])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,i=0;i<this.animators.length;i++){var r=this.animators[i],s=r.__fromStateTransition;if(!(r.getLoop()||s&&s!==mE)){var a=r.targetName,o=a?t[a]:t;r.saveTo(o)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,vE)},n.prototype._savePrimaryToNormal=function(e,t,i){for(var r=0;r<i.length;r++){var s=i[r];e[s]!=null&&!(s in t)&&(t[s]=this[s])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(mE,!1,e)},n.prototype.useState=function(e,t,i,r){var s=e===mE,a=this.hasState();if(!(!a&&s)){var o=this.currentStates,l=this.stateTransition;if(!(Nr(o,e)>=0&&(t||o.length===1))){var c;if(this.stateProxy&&!s&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!s){g7("State "+e+" not exists.");return}s||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||r);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!i&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,f=this._textGuide;return d&&d.useState(e,t,i,u),f&&f.useState(e,t,i,u),s?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),c}}},n.prototype.useStates=function(e,t,i){if(!e.length)this.clearStates();else{var r=[],s=this.currentStates,a=e.length,o=a===s.length;if(o){for(var l=0;l<a;l++)if(e[l]!==s[l]){o=!1;break}}if(o)return;for(var l=0;l<a;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&r.push(u)}var d=r[a-1],f=!!(d&&d.hoverLayer||i);f&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(r),p=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,v=this._textGuide;m&&m.useStates(e,t,f),v&&v.useStates(e,t,f),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}},n.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=Nr(this.currentStates,e);if(t>=0){var i=this.currentStates.slice();i.splice(t,1),this.useStates(i)}},n.prototype.replaceState=function(e,t,i){var r=this.currentStates.slice(),s=Nr(r,e),a=Nr(r,t)>=0;s>=0?a?r.splice(s,1):r[s]=t:i&&!a&&r.push(t),this.useStates(r)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},i,r=0;r<e.length;r++){var s=e[r];pn(t,s),s.textConfig&&(i=i||{},pn(i,s.textConfig))}return i&&(t.textConfig=i),t},n.prototype._applyStateObj=function(e,t,i,r,s,a){var o=!(t&&r);t&&t.textConfig?(this.textConfig=pn({},r?this.textConfig:i.textConfig),pn(this.textConfig,t.textConfig)):o&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},c=!1,u=0;u<vE.length;u++){var d=vE[u],f=s&&cBe[d];t&&t[d]!=null?f?(c=!0,l[d]=t[d]):this[d]=t[d]:o&&i[d]!=null&&(f?(c=!0,l[d]=i[d]):this[d]=i[d])}if(!s)for(var u=0;u<this.animators.length;u++){var h=this.animators[u],p=h.targetName;h.getLoop()||h.__changeFinalValue(p?(t||i)[p]:t||i)}c&&this._transitionState(e,l,a)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new _7,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),pn(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=qu;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,i=this._textGuide;t&&(t.__inHover=e),i&&(i.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.addAnimator(t[i]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.removeAnimator(t[i]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,i){var r=e?this[e]:this,s=new S7(r,t,i);return e&&(s.targetName=e),this.addAnimator(s,e),s},n.prototype.addAnimator=function(e,t){var i=this.__zr,r=this;e.during(function(){r.updateDuringAnimation(t)}).done(function(){var s=r.animators,a=Nr(s,e);a>=0&&s.splice(a,1)}),this.animators.push(e),i&&i.animation.addAnimator(e),i&&i.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var i=this.animators,r=i.length,s=[],a=0;a<r;a++){var o=i[a];!e||e===o.scope?o.stop(t):s.push(o)}return this.animators=s,this},n.prototype.animateTo=function(e,t,i){gE(this,e,t,i)},n.prototype.animateFrom=function(e,t,i){gE(this,e,t,i,!0)},n.prototype._transitionState=function(e,t,i,r){for(var s=gE(this,t,i,r),a=0;a<s.length;a++)s[a].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=qu;function t(i,r,s,a){Object.defineProperty(e,i,{get:function(){if(!this[r]){var l=this[r]=[];o(this,l)}return this[r]},set:function(l){this[s]=l[0],this[a]=l[1],this[r]=l,o(this,l)}});function o(l,c){Object.defineProperty(c,0,{get:function(){return l[s]},set:function(u){l[s]=u}}),Object.defineProperty(c,1,{get:function(){return l[a]},set:function(u){l[a]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();od(OM,ld);od(OM,_7);function gE(n,e,t,i,r){t=t||{};var s=[];kte(n,"",n,e,t,i,s,r);var a=s.length,o=!1,l=t.done,c=t.aborted,u=function(){o=!0,a--,a<=0&&(o?l&&l():c&&c())},d=function(){a--,a<=0&&(o?l&&l():c&&c())};a||l&&l(),s.length>0&&t.during&&s[0].during(function(p,m){t.during(m)});for(var f=0;f<s.length;f++){var h=s[f];u&&h.done(u),d&&h.aborted(d),t.force&&h.duration(t.duration),h.start(t.easing)}return s}function yE(n,e,t){for(var i=0;i<t;i++)n[i]=e[i]}function dBe(n){return el(n[0])}function fBe(n,e,t){if(el(e[t]))if(el(n[t])||(n[t]=[]),tl(e[t])){var i=e[t].length;n[t].length!==i&&(n[t]=new e[t].constructor(i),yE(n[t],e[t],i))}else{var r=e[t],s=n[t],a=r.length;if(dBe(r))for(var o=r[0].length,l=0;l<a;l++)s[l]?yE(s[l],r[l],o):s[l]=Array.prototype.slice.call(r[l]);else yE(s,r,a);s.length=r.length}else n[t]=e[t]}function hBe(n,e){return n===e||el(n)&&el(e)&&pBe(n,e)}function pBe(n,e){var t=n.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function kte(n,e,t,i,r,s,a,o){for(var l=hs(i),c=r.duration,u=r.delay,d=r.additive,f=r.setToFinal,h=!hi(s),p=n.animators,m=[],v=0;v<l.length;v++){var g=l[v],y=i[g];if(y!=null&&t[g]!=null&&(h||s[g]))if(hi(y)&&!el(y)&&!FM(y)){if(e){o||(t[g]=y,n.updateDuringAnimation(e));continue}kte(n,g,t[g],y,r,s&&s[g],a,o)}else m.push(g);else o||(t[g]=y,n.updateDuringAnimation(e),m.push(g))}var x=m.length;if(!d&&x)for(var b=0;b<p.length;b++){var A=p[b];if(A.targetName===e){var S=A.stopTracks(m);if(S){var C=Nr(p,A);p.splice(C,1)}}}if(r.force||(m=_a(m,function(E){return!hBe(i[E],t[E])}),x=m.length),x>0||r.force&&!a.length){var _=void 0,M=void 0,T=void 0;if(o){M={},f&&(_={});for(var b=0;b<x;b++){var g=m[b];M[g]=t[g],f?_[g]=i[g]:t[g]=i[g]}}else if(f){T={};for(var b=0;b<x;b++){var g=m[b];T[g]=y_(t[g]),fBe(t,i,g)}}var A=new S7(t,!1,!1,d?_a(p,function(I){return I.targetName===e}):null);A.targetName=e,r.scope&&(A.scope=r.scope),f&&_&&A.whenWithKeys(0,_,m),T&&A.whenWithKeys(0,T,m),A.whenWithKeys(c??500,o?M:i,m).delay(u||0),n.addAnimator(A,e),a.push(A)}}var eo=function(n){kn(e,n);function e(t){var i=n.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var i=this._children,r=0;r<i.length;r++)if(i[r].name===t)return i[r]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,i){if(t&&t!==this&&t.parent!==this&&i&&i.parent===this){var r=this._children,s=r.indexOf(i);s>=0&&(r.splice(s,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,i){var r=Nr(this._children,t);return r>=0&&this.replaceAt(i,r),this},e.prototype.replaceAt=function(t,i){var r=this._children,s=r[i];if(t&&t!==this&&t.parent!==this&&t!==s){r[i]=t,s.parent=null;var a=this.__zr;a&&s.removeSelfFromZr(a),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var i=this.__zr;i&&i!==t.__zr&&t.addSelfToZr(i),i&&i.refresh()},e.prototype.remove=function(t){var i=this.__zr,r=this._children,s=Nr(r,t);return s<0?this:(r.splice(s,1),t.parent=null,i&&t.removeSelfFromZr(i),i&&i.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,i=this.__zr,r=0;r<t.length;r++){var s=t[r];i&&s.removeSelfFromZr(i),s.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,i){for(var r=this._children,s=0;s<r.length;s++){var a=r[s];t.call(i,a,s)}return this},e.prototype.traverse=function(t,i){for(var r=0;r<this._children.length;r++){var s=this._children[r],a=t.call(i,s);s.isGroup&&!a&&s.traverse(t,i)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var i=new _r(0,0,0,0),r=t||this._children,s=[],a=null,o=0;o<r.length;o++){var l=r[o];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(s);u?(_r.applyTransform(i,c,u),a=a||i.clone(),a.union(i)):(a=a||c.clone(),a.union(c))}}return a||i},e}(OM);eo.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var w_={},Fte={};function mBe(n){delete Fte[n]}function vBe(n){if(!n)return!1;if(typeof n=="string")return VC(n,1)<X8;if(n.colorStops){for(var e=n.colorStops,t=0,i=e.length,r=0;r<i;r++)t+=VC(e[r].color,1);return t/=i,t<X8}return!1}var gBe=function(){function n(e,t,i){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=t,this.id=e;var s=new FFe,a=i.renderer||"canvas";w_[a]||(a=hs(w_)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var o=new w_[a](t,s,i,e),l=i.ssr||o.ssrOnly;this.storage=s,this.painter=o;var c=!Ai.node&&!Ai.worker&&!l?new sBe(o.getViewportRoot(),o.root):null,u=i.useCoarsePointer,d=u==null||u==="auto"?Ai.touchEventsSupported:!!u,f=44,h;d&&(h=ki(i.pointerSize,f)),this.handler=new bte(s,o,c,o.root,h),this.animation=new ZFe({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},n.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=vBe(e))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(e){var t,i=_g();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var r=_g();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},n.prototype.on=function(e,t,i){return this._disposed||this.handler.on(e,t,i),this},n.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},n.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},n.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof eo&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,mBe(this.id))},n}();function yV(n,e){var t=new gBe(dte(),n,e);return Fte[t.id]=t,t}function yBe(n,e){w_[n]=e}var bBe=1e-4,Bte=20;function xBe(n){return n.replace(/^\s+|\s+$/g,"")}function Q8(n,e,t,i){var r=e[0],s=e[1],a=t[0],o=t[1],l=s-r,c=o-a;if(l===0)return c===0?a:(a+o)/2;if(i)if(l>0){if(n<=r)return a;if(n>=s)return o}else{if(n>=r)return a;if(n<=s)return o}else{if(n===r)return a;if(n===s)return o}return(n-r)/l*c+a}function cs(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return ri(n)?xBe(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function Os(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),Bte),n=(+n).toFixed(e),t?n:+n}function $d(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return ABe(n)}function ABe(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),i=t>0?+e.slice(t+1):0,r=t>0?t:e.length,s=e.indexOf("."),a=s<0?0:r-1-s;return Math.max(0,a-i)}function wBe(n,e){var t=Math.log,i=Math.LN10,r=Math.floor(t(n[1]-n[0])/i),s=Math.round(t(Math.abs(e[1]-e[0]))/i),a=Math.min(Math.max(-r+s,0),20);return isFinite(a)?a:20}function SBe(n,e){var t=op(n,function(h,p){return h+(isNaN(p)?0:p)},0);if(t===0)return[];for(var i=Math.pow(10,e),r=fi(n,function(h){return(isNaN(h)?0:h)/t*i*100}),s=i*100,a=fi(r,function(h){return Math.floor(h)}),o=op(a,function(h,p){return h+p},0),l=fi(r,function(h,p){return h-a[p]});o<s;){for(var c=Number.NEGATIVE_INFINITY,u=null,d=0,f=l.length;d<f;++d)l[d]>c&&(c=l[d],u=d);++a[u],l[u]=0,++o}return fi(a,function(h){return h/i})}function _Be(n,e){var t=Math.max($d(n),$d(e)),i=n+e;return t>Bte?i:Os(i,t)}function Nte(n){var e=Math.PI*2;return(n%e+e)%e}function GC(n){return n>-1e-4&&n<bBe}var CBe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function vf(n){if(n instanceof Date)return n;if(ri(n)){var e=CBe.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function MBe(n){return Math.pow(10,T7(n))}function T7(n){if(n===0)return 0;var e=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,e)>=10&&e++,e}function Ote(n,e){var t=T7(n),i=Math.pow(10,t),r=n/i,s;return r<1.5?s=1:r<2.5?s=2:r<4?s=3:r<7?s=5:s=10,n=s*i,t>=-20?+n.toFixed(t<0?-t:0):n}function WC(n){var e=parseFloat(n);return e==n&&(e!==0||!ri(n)||n.indexOf("x")<=0)?e:NaN}function TBe(n){return!isNaN(WC(n))}function Ute(){return Math.round(Math.random()*9)}function zte(n,e){return e===0?n:zte(e,n%e)}function bV(n,e){return n==null?e:e==null?n:n*e/zte(n,e)}function Go(n){throw new Error(n)}function xV(n,e,t){return(e-n)*t+n}var Vte="series\0",EBe="\0_ec_\0";function Ao(n){return n instanceof Array?n:n==null?[]:[n]}function Z8(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var i=0,r=t.length;i<r;i++){var s=t[i];!n.emphasis[e].hasOwnProperty(s)&&n[e].hasOwnProperty(s)&&(n.emphasis[e][s]=n[e][s])}}}var AV=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function DA(n){return hi(n)&&!Un(n)&&!(n instanceof Date)?n.value:n}function IBe(n){return hi(n)&&!(n instanceof Array)}function DBe(n,e,t){var i=t==="normalMerge",r=t==="replaceMerge",s=t==="replaceAll";n=n||[],e=(e||[]).slice();var a=Vi();mt(e,function(l,c){if(!hi(l)){e[c]=null;return}});var o=RBe(n,a,t);return(i||r)&&PBe(o,n,a,e),i&&LBe(o,e),i||r?kBe(o,e,r):s&&FBe(o,e),BBe(o),o}function RBe(n,e,t){var i=[];if(t==="replaceAll")return i;for(var r=0;r<n.length;r++){var s=n[r];s&&s.id!=null&&e.set(s.id,r),i.push({existing:t==="replaceMerge"||Cx(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return i}function PBe(n,e,t,i){mt(i,function(r,s){if(!(!r||r.id==null)){var a=bb(r.id),o=t.get(a);if(o!=null){var l=n[o];mf(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=r,l.existing=e[o],i[s]=null}}})}function LBe(n,e){mt(e,function(t,i){if(!(!t||t.name==null))for(var r=0;r<n.length;r++){var s=n[r].existing;if(!n[r].newOption&&s&&(s.id==null||t.id==null)&&!Cx(t)&&!Cx(s)&&Hte("name",s,t)){n[r].newOption=t,e[i]=null;return}}})}function kBe(n,e,t){mt(e,function(i){if(i){for(var r,s=0;(r=n[s])&&(r.newOption||Cx(r.existing)||r.existing&&i.id!=null&&!Hte("id",i,r.existing));)s++;r?(r.newOption=i,r.brandNew=t):n.push({newOption:i,brandNew:t,existing:null,keyInfo:null}),s++}})}function FBe(n,e){mt(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function BBe(n){var e=Vi();mt(n,function(t){var i=t.existing;i&&e.set(i.id,t)}),mt(n,function(t){var i=t.newOption;mf(!i||i.id==null||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),mt(n,function(t,i){var r=t.existing,s=t.newOption,a=t.keyInfo;if(hi(s)){if(a.name=s.name!=null?bb(s.name):r?r.name:Vte+i,r)a.id=bb(r.id);else if(s.id!=null)a.id=bb(s.id);else{var o=0;do a.id="\0"+a.name+"\0"+o++;while(e.get(a.id))}e.set(a.id,t)}})}function Hte(n,e,t){var i=Ku(e[n],null),r=Ku(t[n],null);return i!=null&&r!=null&&i===r}function bb(n){return Ku(n,"")}function Ku(n,e){return n==null?e:ri(n)?n:jr(n)||L8(n)?n+"":e}function E7(n){var e=n.name;return!!(e&&e.indexOf(Vte))}function Cx(n){return n&&n.id!=null&&bb(n.id).indexOf(EBe)===0}function NBe(n,e,t){mt(n,function(i){var r=i.newOption;hi(r)&&(i.keyInfo.mainType=e,i.keyInfo.subType=OBe(e,r,i.existing,t))})}function OBe(n,e,t,i){var r=e.type?e.type:t?t.subType:i.determineSubType(n,e);return r}function pm(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Un(e.dataIndex)?fi(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Un(e.name)?fi(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Ls(){var n="__ec_inner_"+UBe++;return function(e){return e[n]||(e[n]={})}}var UBe=Ute();function bE(n,e,t){var i=I7(e,t),r=i.mainTypeSpecified,s=i.queryOptionMap,a=i.others,o=a,l=t?t.defaultMainType:null;return!r&&l&&s.set(l,{}),s.each(function(c,u){var d=RA(n,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[u+"Models"]=d.models,o[u+"Model"]=d.models[0]}),o}function I7(n,e){var t;if(ri(n)){var i={};i[n+"Index"]=0,t=i}else t=n;var r=Vi(),s={},a=!1;return mt(t,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){s[l]=o;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],d=(c[2]||"").toLowerCase();if(!(!u||!d||e&&e.includeMainTypes&&Nr(e.includeMainTypes,u)<0)){a=a||!!u;var f=r.get(u)||r.set(u,{});f[d]=o}}),{mainTypeSpecified:a,queryOptionMap:r,others:s}}var qc={useDefault:!0,enableAll:!1,enableNone:!1};function RA(n,e,t,i){i=i||qc;var r=t.index,s=t.id,a=t.name,o={models:null,specified:r!=null||s!=null||a!=null};if(!o.specified){var l=void 0;return o.models=i.useDefault&&(l=n.getComponent(e))?[l]:[],o}return r==="none"||r===!1?(mf(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(r==="all"&&(mf(i.enableAll,'`"all"` is not a valid value on index option.'),r=s=a=null),o.models=n.queryComponents({mainType:e,index:r,id:s,name:a}),o)}function Gte(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function zBe(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function VBe(n){return n==="auto"?Ai.domSupported?"html":"richText":n||"html"}function HBe(n,e,t,i,r){var s=e==null||e==="auto";if(i==null)return i;if(jr(i)){var a=xV(t||0,i,r);return Os(a,s?Math.max($d(t||0),$d(i)):e)}else{if(ri(i))return r<1?t:i;for(var o=[],l=t,c=i,u=Math.max(l?l.length:0,c.length),d=0;d<u;++d){var f=n.getDimensionInfo(d);if(f&&f.type==="ordinal")o[d]=(r<1&&l?l:c)[d];else{var h=l&&l[d]?l[d]:0,p=c[d],a=xV(h,p,r);o[d]=Os(a,s?Math.max($d(h),$d(p)):e)}}return o}}var GBe=".",Hp="___EC__COMPONENT__CONTAINER___",Wte="___EC__EXTENDED_CLASS___";function Uu(n){var e={main:"",sub:""};if(n){var t=n.split(GBe);e.main=t[0]||"",e.sub=t[1]||""}return e}function WBe(n){mf(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function qBe(n){return!!(n&&n[Wte])}function D7(n,e){n.$constructor=n,n.extend=function(t){var i=this,r;return KBe(i)?r=function(s){kn(a,s);function a(){return s.apply(this,arguments)||this}return a}(i):(r=function(){(t.$constructor||i).apply(this,arguments)},Q7e(r,this)),pn(r.prototype,t),r[Wte]=!0,r.extend=this.extend,r.superCall=jBe,r.superApply=$Be,r.superClass=i,r}}function KBe(n){return Ci(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function qte(n,e){n.extend=e.extend}var YBe=Math.round(Math.random()*10);function XBe(n){var e=["__\0is_clz",YBe++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function jBe(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return this.superClass.prototype[e].apply(n,t)}function $Be(n,e,t){return this.superClass.prototype[e].apply(n,t)}function UM(n){var e={};n.registerClass=function(i){var r=i.type||i.prototype.type;if(r){WBe(r),i.prototype.type=r;var s=Uu(r);if(!s.sub)e[s.main]=i;else if(s.sub!==Hp){var a=t(s);a[s.sub]=i}}return i},n.getClass=function(i,r,s){var a=e[i];if(a&&a[Hp]&&(a=r?a[r]:null),s&&!a)throw new Error(r?"Component "+i+"."+(r||"")+" is used but not imported.":i+".type should be specified.");return a},n.getClassesByMainType=function(i){var r=Uu(i),s=[],a=e[r.main];return a&&a[Hp]?mt(a,function(o,l){l!==Hp&&s.push(o)}):s.push(a),s},n.hasClass=function(i){var r=Uu(i);return!!e[r.main]},n.getAllClassMainTypes=function(){var i=[];return mt(e,function(r,s){i.push(s)}),i},n.hasSubTypes=function(i){var r=Uu(i),s=e[r.main];return s&&s[Hp]};function t(i){var r=e[i.main];return(!r||!r[Hp])&&(r=e[i.main]={},r[Hp]=!0),r}}function Mx(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(i,r,s){for(var a={},o=0;o<n.length;o++){var l=n[o][1];if(!(r&&Nr(r,l)>=0||s&&Nr(s,l)<0)){var c=i.getShallow(l,e);c!=null&&(a[n[o][0]]=c)}}return a}}var QBe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],ZBe=Mx(QBe),JBe=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return ZBe(this,e,t)},n}(),J8=new IA(50);function eNe(n){if(typeof n=="string"){var e=J8.get(n);return e&&e.image}else return n}function Kte(n,e,t,i,r){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var s=J8.get(n),a={hostEl:t,cb:i,cbPayload:r};return s?(e=s.image,!zM(e)&&s.pending.push(a)):(e=fy.loadImage(n,wV,wV),e.__zrImageSrc=n,J8.put(n,e.__cachedImgObj={image:e,pending:[a]})),e}else return n;else return e}function wV(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],i=t.cb;i&&i(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function zM(n){return n&&n.width&&n.height}var xE=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function tNe(n,e,t,i,r,s){if(!t){n.text="",n.isTruncated=!1;return}var a=(e+"").split(`
`);s=Yte(t,i,r,s);for(var o=!1,l={},c=0,u=a.length;c<u;c++)Xte(l,a[c],s),a[c]=l.textLine,o=o||l.isTruncated;n.text=a.join(`
`),n.isTruncated=o}function Yte(n,e,t,i){i=i||{};var r=pn({},i);r.font=e,t=ki(t,"..."),r.maxIterations=ki(i.maxIterations,2);var s=r.minChar=ki(i.minChar,0);r.cnCharWidth=Cl("国",e);var a=r.ascCharWidth=Cl("a",e);r.placeholder=ki(i.placeholder,"");for(var o=n=Math.max(0,n-1),l=0;l<s&&o>=a;l++)o-=a;var c=Cl(t,e);return c>o&&(t="",c=0),o=n-c,r.ellipsis=t,r.ellipsisWidth=c,r.contentWidth=o,r.containerWidth=n,r}function Xte(n,e,t){var i=t.containerWidth,r=t.font,s=t.contentWidth;if(!i){n.textLine="",n.isTruncated=!1;return}var a=Cl(e,r);if(a<=i){n.textLine=e,n.isTruncated=!1;return}for(var o=0;;o++){if(a<=s||o>=t.maxIterations){e+=t.ellipsis;break}var l=o===0?nNe(e,s,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*s/a):0;e=e.substr(0,l),a=Cl(e,r)}e===""&&(e=t.placeholder),n.textLine=e,n.isTruncated=!0}function nNe(n,e,t,i){for(var r=0,s=0,a=n.length;s<a&&r<e;s++){var o=n.charCodeAt(s);r+=0<=o&&o<=127?t:i}return s}function iNe(n,e){n!=null&&(n+="");var t=e.overflow,i=e.padding,r=e.font,s=t==="truncate",a=M7(r),o=ki(e.lineHeight,a),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=!1,d=e.width,f;d!=null&&(t==="break"||t==="breakAll")?f=n?jte(n,e.font,d,t==="breakAll",0).lines:[]:f=n?n.split(`
`):[];var h=f.length*o,p=ki(e.height,h);if(h>p&&c){var m=Math.floor(p/o);u=u||f.length>m,f=f.slice(0,m)}if(n&&s&&d!=null)for(var v=Yte(d,r,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),g={},y=0;y<f.length;y++)Xte(g,f[y],v),f[y]=g.textLine,u=u||g.isTruncated;for(var x=p,b=0,y=0;y<f.length;y++)b=Math.max(Cl(f[y],r),b);d==null&&(d=b);var A=b;return i&&(x+=i[0]+i[2],A+=i[1]+i[3],d+=i[1]+i[3]),l&&(A=d),{lines:f,height:p,outerWidth:A,outerHeight:x,lineHeight:o,calculatedLineHeight:a,contentWidth:b,contentHeight:h,width:d,isTruncated:u}}var rNe=function(){function n(){}return n}(),SV=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),sNe=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n}();function aNe(n,e){var t=new sNe;if(n!=null&&(n+=""),!n)return t;for(var i=e.width,r=e.height,s=e.overflow,a=(s==="break"||s==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:s==="breakAll"}:null,o=xE.lastIndex=0,l;(l=xE.exec(n))!=null;){var c=l.index;c>o&&AE(t,n.substring(o,c),e,a),AE(t,l[2],e,a,l[1]),o=xE.lastIndex}o<n.length&&AE(t,n.substring(o,n.length),e,a);var u=[],d=0,f=0,h=e.padding,p=s==="truncate",m=e.lineOverflow==="truncate",v={};function g(H,q,te){H.width=q,H.lineHeight=te,d+=te,f=Math.max(f,q)}e:for(var y=0;y<t.lines.length;y++){for(var x=t.lines[y],b=0,A=0,S=0;S<x.tokens.length;S++){var C=x.tokens[S],_=C.styleName&&e.rich[C.styleName]||{},M=C.textPadding=_.padding,T=M?M[1]+M[3]:0,E=C.font=_.font||e.font;C.contentHeight=M7(E);var I=ki(_.height,C.contentHeight);if(C.innerHeight=I,M&&(I+=M[0]+M[2]),C.height=I,C.lineHeight=mb(_.lineHeight,e.lineHeight,I),C.align=_&&_.align||e.align,C.verticalAlign=_&&_.verticalAlign||"middle",m&&r!=null&&d+C.lineHeight>r){var L=t.lines.length;S>0?(x.tokens=x.tokens.slice(0,S),g(x,A,b),t.lines=t.lines.slice(0,y+1)):t.lines=t.lines.slice(0,y),t.isTruncated=t.isTruncated||t.lines.length<L;break e}var F=_.width,B=F==null||F==="auto";if(typeof F=="string"&&F.charAt(F.length-1)==="%")C.percentWidth=F,u.push(C),C.contentWidth=Cl(C.text,E);else{if(B){var P=_.backgroundColor,z=P&&P.image;z&&(z=eNe(z),zM(z)&&(C.width=Math.max(C.width,z.width*I/z.height)))}var O=p&&i!=null?i-A:null;O!=null&&O<C.width?!B||O<T?(C.text="",C.width=C.contentWidth=0):(tNe(v,C.text,O-T,E,e.ellipsis,{minChar:e.truncateMinChar}),C.text=v.text,t.isTruncated=t.isTruncated||v.isTruncated,C.width=C.contentWidth=Cl(C.text,E)):C.contentWidth=Cl(C.text,E)}C.width+=T,A+=C.width,_&&(b=Math.max(b,C.lineHeight))}g(x,A,b)}t.outerWidth=t.width=ki(i,f),t.outerHeight=t.height=ki(r,d),t.contentHeight=d,t.contentWidth=f,h&&(t.outerWidth+=h[1]+h[3],t.outerHeight+=h[0]+h[2]);for(var y=0;y<u.length;y++){var C=u[y],N=C.percentWidth;C.width=parseInt(N,10)/100*t.width}return t}function AE(n,e,t,i,r){var s=e==="",a=r&&t.rich[r]||{},o=n.lines,l=a.font||t.font,c=!1,u,d;if(i){var f=a.padding,h=f?f[1]+f[3]:0;if(a.width!=null&&a.width!=="auto"){var p=lp(a.width,i.width)+h;o.length>0&&p+i.accumWidth>i.width&&(u=e.split(`
`),c=!0),i.accumWidth=p}else{var m=jte(e,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=m.accumWidth+h,d=m.linesWidths,u=m.lines}}else u=e.split(`
`);for(var v=0;v<u.length;v++){var g=u[v],y=new rNe;if(y.styleName=r,y.text=g,y.isLineHolder=!g&&!s,typeof a.width=="number"?y.width=a.width:y.width=d?d[v]:Cl(g,l),!v&&!c){var x=(o[o.length-1]||(o[0]=new SV)).tokens,b=x.length;b===1&&x[0].isLineHolder?x[0]=y:(g||!b||s)&&x.push(y)}else o.push(new SV([y]))}}function oNe(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var lNe=op(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function cNe(n){return oNe(n)?!!lNe[n]:!0}function jte(n,e,t,i,r){for(var s=[],a=[],o="",l="",c=0,u=0,d=0;d<n.length;d++){var f=n.charAt(d);if(f===`
`){l&&(o+=l,u+=c),s.push(o),a.push(u),o="",l="",c=0,u=0;continue}var h=Cl(f,e),p=i?!1:!cNe(f);if(s.length?u+h>t:r+u+h>t){u?(o||l)&&(p?(o||(o=l,l="",c=0,u=c),s.push(o),a.push(u-c),l+=f,c+=h,o="",u=c):(l&&(o+=l,l="",c=0),s.push(o),a.push(u),o=f,u=h)):p?(s.push(l),a.push(c),l=f,c=h):(s.push(f),a.push(h));continue}u+=h,p?(l+=f,c+=h):(l&&(o+=l,l="",c=0),o+=f)}return!s.length&&!o&&(o=n,l="",c=0),l&&(o+=l),o&&(s.push(o),a.push(u)),s.length===1&&(u+=r),{accumWidth:u,lines:s,linesWidths:a}}var eR="__zr_style_"+Math.round(Math.random()*10),$0={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},VM={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};$0[eR]=!0;var _V=["z","z2","invisible"],uNe=["invisible"],PA=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var i=hs(t),r=0;r<i.length;r++){var s=i[r];s==="style"?this.useStyle(t[s]):n.prototype.attrKV.call(this,s,t[s])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,i,r,s){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&dNe(this,t,i)||a&&!a[0]&&!a[3])return!1;if(r&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(s&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,i){return this.rectContain(t,i)},e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.rectContain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect();return s.contain(r[0],r[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,r=this.getBoundingRect(),s=this.style,a=s.shadowBlur||0,o=s.shadowOffsetX||0,l=s.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new _r(0,0,0,0)),i?_r.applyTransform(t,r,i):t.copy(r),(a||o||l)&&(t.width+=a*2+Math.abs(o),t.height+=a*2+Math.abs(l),t.x=Math.min(t.x,t.x+o-a),t.y=Math.min(t.y,t.y+l-a));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new _r(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,i){t!=="style"?n.prototype.attrKV.call(this,t,i):this.style?this.setStyle(i):this.useStyle(i)},e.prototype.setStyle=function(t,i){return typeof t=="string"?this.style[t]=i:pn(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=g_,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&g_)},e.prototype.styleUpdated=function(){this.__dirty&=-3},e.prototype.createStyle=function(t){return BM($0,t)},e.prototype.useStyle=function(t){t[eR]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[eR]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,i,_V)},e.prototype._applyStateObj=function(t,i,r,s,a,o){n.prototype._applyStateObj.call(this,t,i,r,s,a,o);var l=!(i&&s),c;if(i&&i.style?a?s?c=i.style:(c=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(c,i.style)):(c=this._mergeStyle(this.createStyle(),s?this.style:r.style),this._mergeStyle(c,i.style)):l&&(c=r.style),c)if(a){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=hs(u),f=0;f<d.length;f++){var h=d[f];h in c&&(c[h]=c[h],this.style[h]=u[h])}for(var p=hs(c),f=0;f<p.length;f++){var h=p[f];this.style[h]=this.style[h]}this._transitionState(t,{style:c},o,this.getAnimationStyleProps())}else this.useStyle(c);for(var m=this.__inHover?uNe:_V,f=0;f<m.length;f++){var h=m[f];i&&i[h]!=null?this[h]=i[h]:l&&r[h]!=null&&(this[h]=r[h])}},e.prototype._mergeStates=function(t){for(var i=n.prototype._mergeStates.call(this,t),r,s=0;s<t.length;s++){var a=t[s];a.style&&(r=r||{},this._mergeStyle(r,a.style))}return r&&(i.style=r),i},e.prototype._mergeStyle=function(t,i){return pn(t,i),t},e.prototype.getAnimationStyleProps=function(){return VM},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=qu|g_}(),e}(OM),wE=new _r(0,0,0,0),SE=new _r(0,0,0,0);function dNe(n,e,t){return wE.copy(n.getBoundingRect()),n.transform&&wE.applyTransform(n.transform),SE.width=e,SE.height=t,!wE.intersect(SE)}var jl=Math.min,$l=Math.max,_E=Math.sin,CE=Math.cos,Gp=Math.PI*2,Fw=hy(),Bw=hy(),Nw=hy();function CV(n,e,t,i,r,s){r[0]=jl(n,t),r[1]=jl(e,i),s[0]=$l(n,t),s[1]=$l(e,i)}var MV=[],TV=[];function fNe(n,e,t,i,r,s,a,o,l,c){var u=Cte,d=Ca,f=u(n,t,r,a,MV);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var h=0;h<f;h++){var p=d(n,t,r,a,MV[h]);l[0]=jl(p,l[0]),c[0]=$l(p,c[0])}f=u(e,i,s,o,TV);for(var h=0;h<f;h++){var m=d(e,i,s,o,TV[h]);l[1]=jl(m,l[1]),c[1]=$l(m,c[1])}l[0]=jl(n,l[0]),c[0]=$l(n,c[0]),l[0]=jl(a,l[0]),c[0]=$l(a,c[0]),l[1]=jl(e,l[1]),c[1]=$l(e,c[1]),l[1]=jl(o,l[1]),c[1]=$l(o,c[1])}function hNe(n,e,t,i,r,s,a,o){var l=Mte,c=Ho,u=$l(jl(l(n,t,r),1),0),d=$l(jl(l(e,i,s),1),0),f=c(n,t,r,u),h=c(e,i,s,d);a[0]=jl(n,r,f),a[1]=jl(e,s,h),o[0]=$l(n,r,f),o[1]=$l(e,s,h)}function pNe(n,e,t,i,r,s,a,o,l){var c=wg,u=Sg,d=Math.abs(r-s);if(d%Gp<1e-4&&d>1e-4){o[0]=n-t,o[1]=e-i,l[0]=n+t,l[1]=e+i;return}if(Fw[0]=CE(r)*t+n,Fw[1]=_E(r)*i+e,Bw[0]=CE(s)*t+n,Bw[1]=_E(s)*i+e,c(o,Fw,Bw),u(l,Fw,Bw),r=r%Gp,r<0&&(r=r+Gp),s=s%Gp,s<0&&(s=s+Gp),r>s&&!a?s+=Gp:r<s&&a&&(r+=Gp),a){var f=s;s=r,r=f}for(var h=0;h<s;h+=Math.PI/2)h>r&&(Nw[0]=CE(h)*t+n,Nw[1]=_E(h)*i+e,c(o,Nw,o),u(l,Nw,l))}var xr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Wp=[],qp=[],xu=[],zf=[],Au=[],wu=[],ME=Math.min,TE=Math.max,Kp=Math.cos,Yp=Math.sin,bd=Math.abs,tR=Math.PI,yh=tR*2,EE=typeof Float32Array<"u",t2=[];function IE(n){var e=Math.round(n/tR*1e8)/1e8;return e%2*tR}function $te(n,e){var t=IE(n[0]);t<0&&(t+=yh);var i=t-n[0],r=n[1];r+=i,!e&&r-t>=yh?r=t+yh:e&&t-r>=yh?r=t-yh:!e&&t>r?r=t+(yh-IE(t-r)):e&&t<r&&(r=t-(yh-IE(r-t))),n[0]=t,n[1]=r}var mm=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,i){i=i||0,i>0&&(this._ux=bd(i/HC/e)||0,this._uy=bd(i/HC/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(xr.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var i=bd(e-this._xi),r=bd(t-this._yi),s=i>this._ux||r>this._uy;if(this.addData(xr.L,e,t),this._ctx&&s&&this._ctx.lineTo(e,t),s)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var a=i*i+r*r;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=a)}return this},n.prototype.bezierCurveTo=function(e,t,i,r,s,a){return this._drawPendingPt(),this.addData(xr.C,e,t,i,r,s,a),this._ctx&&this._ctx.bezierCurveTo(e,t,i,r,s,a),this._xi=s,this._yi=a,this},n.prototype.quadraticCurveTo=function(e,t,i,r){return this._drawPendingPt(),this.addData(xr.Q,e,t,i,r),this._ctx&&this._ctx.quadraticCurveTo(e,t,i,r),this._xi=i,this._yi=r,this},n.prototype.arc=function(e,t,i,r,s,a){this._drawPendingPt(),t2[0]=r,t2[1]=s,$te(t2,a),r=t2[0],s=t2[1];var o=s-r;return this.addData(xr.A,e,t,i,i,r,o,0,a?0:1),this._ctx&&this._ctx.arc(e,t,i,r,s,a),this._xi=Kp(s)*i+e,this._yi=Yp(s)*i+t,this},n.prototype.arcTo=function(e,t,i,r,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,i,r,s),this},n.prototype.rect=function(e,t,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,i,r),this.addData(xr.R,e,t,i,r),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(xr.Z);var e=this._ctx,t=this._x0,i=this._y0;return e&&e.closePath(),this._xi=t,this._yi=i,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&EE&&(this.data=new Float32Array(t));for(var i=0;i<t;i++)this.data[i]=e[i];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,i=0,r=this._len,s=0;s<t;s++)i+=e[s].len();EE&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+i));for(var s=0;s<t;s++)for(var a=e[s].data,o=0;o<a.length;o++)this.data[r++]=a[o];this._len=r},n.prototype.addData=function(e,t,i,r,s,a,o,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,EE&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){xu[0]=xu[1]=Au[0]=Au[1]=Number.MAX_VALUE,zf[0]=zf[1]=wu[0]=wu[1]=-Number.MAX_VALUE;var e=this.data,t=0,i=0,r=0,s=0,a;for(a=0;a<this._len;){var o=e[a++],l=a===1;switch(l&&(t=e[a],i=e[a+1],r=t,s=i),o){case xr.M:t=r=e[a++],i=s=e[a++],Au[0]=r,Au[1]=s,wu[0]=r,wu[1]=s;break;case xr.L:CV(t,i,e[a],e[a+1],Au,wu),t=e[a++],i=e[a++];break;case xr.C:fNe(t,i,e[a++],e[a++],e[a++],e[a++],e[a],e[a+1],Au,wu),t=e[a++],i=e[a++];break;case xr.Q:hNe(t,i,e[a++],e[a++],e[a],e[a+1],Au,wu),t=e[a++],i=e[a++];break;case xr.A:var c=e[a++],u=e[a++],d=e[a++],f=e[a++],h=e[a++],p=e[a++]+h;a+=1;var m=!e[a++];l&&(r=Kp(h)*d+c,s=Yp(h)*f+u),pNe(c,u,d,f,h,p,m,Au,wu),t=Kp(p)*d+c,i=Yp(p)*f+u;break;case xr.R:r=t=e[a++],s=i=e[a++];var v=e[a++],g=e[a++];CV(r,s,r+v,s+g,Au,wu);break;case xr.Z:t=r,i=s;break}wg(xu,xu,Au),Sg(zf,zf,wu)}return a===0&&(xu[0]=xu[1]=zf[0]=zf[1]=0),new _r(xu[0],xu[1],zf[0]-xu[0],zf[1]-xu[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,i=this._ux,r=this._uy,s=0,a=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,d=0,f=0;f<t;){var h=e[f++],p=f===1;p&&(s=e[f],a=e[f+1],o=s,l=a);var m=-1;switch(h){case xr.M:s=o=e[f++],a=l=e[f++];break;case xr.L:{var v=e[f++],g=e[f++],y=v-s,x=g-a;(bd(y)>i||bd(x)>r||f===t-1)&&(m=Math.sqrt(y*y+x*x),s=v,a=g);break}case xr.C:{var b=e[f++],A=e[f++],v=e[f++],g=e[f++],S=e[f++],C=e[f++];m=NFe(s,a,b,A,v,g,S,C,10),s=S,a=C;break}case xr.Q:{var b=e[f++],A=e[f++],v=e[f++],g=e[f++];m=zFe(s,a,b,A,v,g,10),s=v,a=g;break}case xr.A:var _=e[f++],M=e[f++],T=e[f++],E=e[f++],I=e[f++],L=e[f++],F=L+I;f+=1,p&&(o=Kp(I)*T+_,l=Yp(I)*E+M),m=TE(T,E)*ME(yh,Math.abs(L)),s=Kp(F)*T+_,a=Yp(F)*E+M;break;case xr.R:{o=s=e[f++],l=a=e[f++];var B=e[f++],P=e[f++];m=B*2+P*2;break}case xr.Z:{var y=o-s,x=l-a;m=Math.sqrt(y*y+x*x),s=o,a=l;break}}m>=0&&(c[d++]=m,u+=m)}return this._pathLen=u,u},n.prototype.rebuildPath=function(e,t){var i=this.data,r=this._ux,s=this._uy,a=this._len,o,l,c,u,d,f,h=t<1,p,m,v=0,g=0,y,x=0,b,A;if(!(h&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,m=this._pathLen,y=t*m,!y)))e:for(var S=0;S<a;){var C=i[S++],_=S===1;switch(_&&(c=i[S],u=i[S+1],o=c,l=u),C!==xr.L&&x>0&&(e.lineTo(b,A),x=0),C){case xr.M:o=c=i[S++],l=u=i[S++],e.moveTo(c,u);break;case xr.L:{d=i[S++],f=i[S++];var M=bd(d-c),T=bd(f-u);if(M>r||T>s){if(h){var E=p[g++];if(v+E>y){var I=(y-v)/E;e.lineTo(c*(1-I)+d*I,u*(1-I)+f*I);break e}v+=E}e.lineTo(d,f),c=d,u=f,x=0}else{var L=M*M+T*T;L>x&&(b=d,A=f,x=L)}break}case xr.C:{var F=i[S++],B=i[S++],P=i[S++],z=i[S++],O=i[S++],N=i[S++];if(h){var E=p[g++];if(v+E>y){var I=(y-v)/E;UC(c,F,P,O,I,Wp),UC(u,B,z,N,I,qp),e.bezierCurveTo(Wp[1],qp[1],Wp[2],qp[2],Wp[3],qp[3]);break e}v+=E}e.bezierCurveTo(F,B,P,z,O,N),c=O,u=N;break}case xr.Q:{var F=i[S++],B=i[S++],P=i[S++],z=i[S++];if(h){var E=p[g++];if(v+E>y){var I=(y-v)/E;zC(c,F,P,I,Wp),zC(u,B,z,I,qp),e.quadraticCurveTo(Wp[1],qp[1],Wp[2],qp[2]);break e}v+=E}e.quadraticCurveTo(F,B,P,z),c=P,u=z;break}case xr.A:var H=i[S++],q=i[S++],te=i[S++],Q=i[S++],ee=i[S++],de=i[S++],J=i[S++],ue=!i[S++],Te=te>Q?te:Q,De=bd(te-Q)>.001,Le=ee+de,Ne=!1;if(h){var E=p[g++];v+E>y&&(Le=ee+de*(y-v)/E,Ne=!0),v+=E}if(De&&e.ellipse?e.ellipse(H,q,te,Q,J,ee,Le,ue):e.arc(H,q,Te,ee,Le,ue),Ne)break e;_&&(o=Kp(ee)*te+H,l=Yp(ee)*Q+q),c=Kp(Le)*te+H,u=Yp(Le)*Q+q;break;case xr.R:o=c=i[S],l=u=i[S+1],d=i[S++],f=i[S++];var Y=i[S++],oe=i[S++];if(h){var E=p[g++];if(v+E>y){var ne=y-v;e.moveTo(d,f),e.lineTo(d+ME(ne,Y),f),ne-=Y,ne>0&&e.lineTo(d+Y,f+ME(ne,oe)),ne-=oe,ne>0&&e.lineTo(d+TE(Y-ne,0),f+oe),ne-=Y,ne>0&&e.lineTo(d,f+TE(oe-ne,0));break e}v+=E}e.rect(d,f,Y,oe);break;case xr.Z:if(h){var E=p[g++];if(v+E>y){var I=(y-v)/E;e.lineTo(c*(1-I)+o*I,u*(1-I)+l*I);break e}v+=E}e.closePath(),c=o,u=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=xr,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();function nv(n,e,t,i,r,s,a){if(r===0)return!1;var o=r,l=0,c=n;if(a>e+o&&a>i+o||a<e-o&&a<i-o||s>n+o&&s>t+o||s<n-o&&s<t-o)return!1;if(n!==t)l=(e-i)/(n-t),c=(n*i-t*e)/(n-t);else return Math.abs(s-n)<=o/2;var u=l*s-a+c,d=u*u/(l*l+1);return d<=o/2*o/2}function mNe(n,e,t,i,r,s,a,o,l,c,u){if(l===0)return!1;var d=l;if(u>e+d&&u>i+d&&u>s+d&&u>o+d||u<e-d&&u<i-d&&u<s-d&&u<o-d||c>n+d&&c>t+d&&c>r+d&&c>a+d||c<n-d&&c<t-d&&c<r-d&&c<a-d)return!1;var f=BFe(n,e,t,i,r,s,a,o,c,u);return f<=d/2}function vNe(n,e,t,i,r,s,a,o,l){if(a===0)return!1;var c=a;if(l>e+c&&l>i+c&&l>s+c||l<e-c&&l<i-c&&l<s-c||o>n+c&&o>t+c&&o>r+c||o<n-c&&o<t-c&&o<r-c)return!1;var u=UFe(n,e,t,i,r,s,o,l);return u<=c/2}var EV=Math.PI*2;function Ow(n){return n%=EV,n<0&&(n+=EV),n}var n2=Math.PI*2;function gNe(n,e,t,i,r,s,a,o,l){if(a===0)return!1;var c=a;o-=n,l-=e;var u=Math.sqrt(o*o+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(i-r)%n2<1e-4)return!0;if(s){var d=i;i=Ow(r),r=Ow(d)}else i=Ow(i),r=Ow(r);i>r&&(r+=n2);var f=Math.atan2(l,o);return f<0&&(f+=n2),f>=i&&f<=r||f+n2>=i&&f+n2<=r}function Xp(n,e,t,i,r,s){if(s>e&&s>i||s<e&&s<i||i===e)return 0;var a=(s-e)/(i-e),o=i<e?1:-1;(a===1||a===0)&&(o=i<e?.5:-.5);var l=a*(t-n)+n;return l===r?1/0:l>r?o:0}var Vf=mm.CMD,jp=Math.PI*2,yNe=1e-4;function bNe(n,e){return Math.abs(n-e)<yNe}var uo=[-1,-1,-1],ql=[-1,-1];function xNe(){var n=ql[0];ql[0]=ql[1],ql[1]=n}function ANe(n,e,t,i,r,s,a,o,l,c){if(c>e&&c>i&&c>s&&c>o||c<e&&c<i&&c<s&&c<o)return 0;var u=OC(e,i,s,o,c,uo);if(u===0)return 0;for(var d=0,f=-1,h=void 0,p=void 0,m=0;m<u;m++){var v=uo[m],g=v===0||v===1?.5:1,y=Ca(n,t,r,a,v);y<l||(f<0&&(f=Cte(e,i,s,o,ql),ql[1]<ql[0]&&f>1&&xNe(),h=Ca(e,i,s,o,ql[0]),f>1&&(p=Ca(e,i,s,o,ql[1]))),f===2?v<ql[0]?d+=h<e?g:-g:v<ql[1]?d+=p<h?g:-g:d+=o<p?g:-g:v<ql[0]?d+=h<e?g:-g:d+=o<h?g:-g)}return d}function wNe(n,e,t,i,r,s,a,o){if(o>e&&o>i&&o>s||o<e&&o<i&&o<s)return 0;var l=OFe(e,i,s,o,uo);if(l===0)return 0;var c=Mte(e,i,s);if(c>=0&&c<=1){for(var u=0,d=Ho(e,i,s,c),f=0;f<l;f++){var h=uo[f]===0||uo[f]===1?.5:1,p=Ho(n,t,r,uo[f]);p<a||(uo[f]<c?u+=d<e?h:-h:u+=s<d?h:-h)}return u}else{var h=uo[0]===0||uo[0]===1?.5:1,p=Ho(n,t,r,uo[0]);return p<a?0:s<e?h:-h}}function SNe(n,e,t,i,r,s,a,o){if(o-=e,o>t||o<-t)return 0;var l=Math.sqrt(t*t-o*o);uo[0]=-l,uo[1]=l;var c=Math.abs(i-r);if(c<1e-4)return 0;if(c>=jp-1e-4){i=0,r=jp;var u=s?1:-1;return a>=uo[0]+n&&a<=uo[1]+n?u:0}if(i>r){var d=i;i=r,r=d}i<0&&(i+=jp,r+=jp);for(var f=0,h=0;h<2;h++){var p=uo[h];if(p+n>a){var m=Math.atan2(o,p),u=s?1:-1;m<0&&(m=jp+m),(m>=i&&m<=r||m+jp>=i&&m+jp<=r)&&(m>Math.PI/2&&m<Math.PI*1.5&&(u=-u),f+=u)}}return f}function Qte(n,e,t,i,r){for(var s=n.data,a=n.len(),o=0,l=0,c=0,u=0,d=0,f,h,p=0;p<a;){var m=s[p++],v=p===1;switch(m===Vf.M&&p>1&&(t||(o+=Xp(l,c,u,d,i,r))),v&&(l=s[p],c=s[p+1],u=l,d=c),m){case Vf.M:u=s[p++],d=s[p++],l=u,c=d;break;case Vf.L:if(t){if(nv(l,c,s[p],s[p+1],e,i,r))return!0}else o+=Xp(l,c,s[p],s[p+1],i,r)||0;l=s[p++],c=s[p++];break;case Vf.C:if(t){if(mNe(l,c,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],e,i,r))return!0}else o+=ANe(l,c,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],i,r)||0;l=s[p++],c=s[p++];break;case Vf.Q:if(t){if(vNe(l,c,s[p++],s[p++],s[p],s[p+1],e,i,r))return!0}else o+=wNe(l,c,s[p++],s[p++],s[p],s[p+1],i,r)||0;l=s[p++],c=s[p++];break;case Vf.A:var g=s[p++],y=s[p++],x=s[p++],b=s[p++],A=s[p++],S=s[p++];p+=1;var C=!!(1-s[p++]);f=Math.cos(A)*x+g,h=Math.sin(A)*b+y,v?(u=f,d=h):o+=Xp(l,c,f,h,i,r);var _=(i-g)*b/x+g;if(t){if(gNe(g,y,b,A,A+S,C,e,_,r))return!0}else o+=SNe(g,y,b,A,A+S,C,_,r);l=Math.cos(A+S)*x+g,c=Math.sin(A+S)*b+y;break;case Vf.R:u=l=s[p++],d=c=s[p++];var M=s[p++],T=s[p++];if(f=u+M,h=d+T,t){if(nv(u,d,f,d,e,i,r)||nv(f,d,f,h,e,i,r)||nv(f,h,u,h,e,i,r)||nv(u,h,u,d,e,i,r))return!0}else o+=Xp(f,d,f,h,i,r),o+=Xp(u,h,u,d,i,r);break;case Vf.Z:if(t){if(nv(l,c,u,d,e,i,r))return!0}else o+=Xp(l,c,u,d,i,r);l=u,c=d;break}}return!t&&!bNe(c,d)&&(o+=Xp(l,c,u,d,i,r)||0),o!==0}function _Ne(n,e,t){return Qte(n,0,!1,e,t)}function CNe(n,e,t,i){return Qte(n,e,!0,t,i)}var Zte=Cr({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},$0),MNe={style:Cr({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},VM.style)},DE=_x.concat(["invisible","culling","z","z2","zlevel","parent"]),Gr=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new e;r.buildPath===e.prototype.buildPath&&(r.buildPath=function(l){t.buildPath(l,t.shape)}),r.silent=!0;var s=r.style;for(var a in i)s[a]!==i[a]&&(s[a]=i[a]);s.fill=i.fill?i.decal:null,s.decal=null,s.shadowColor=null,i.strokeFirst&&(s.stroke=null);for(var o=0;o<DE.length;++o)r[DE[o]]=this[DE[o]];r.__dirty|=qu}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var i=hs(t);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var s=0;s<i.length;s++){var a=i[s],o=t[a];a==="style"?this.style?pn(this.style,o):this.useStyle(o):a==="shape"?pn(this.shape,o):n.prototype.attrKV.call(this,a,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(ri(t)){var i=VC(t,0);return i>.5?j8:i>.2?aBe:$8}else if(t)return $8}return j8},e.prototype.getInsideTextStroke=function(t){var i=this.style.fill;if(ri(i)){var r=this.__zr,s=!!(r&&r.isDarkMode()),a=VC(t,0)<X8;if(s===a)return i}},e.prototype.buildPath=function(t,i,r){},e.prototype.pathUpdated=function(){this.__dirty&=-5},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new mm(!1)},e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return!(i==null||i==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,i=this.style,r=!t;if(r){var s=!1;this.path||(s=!0,this.createPathProxy());var a=this.path;(s||this.__dirty&V2)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),t=a.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||r){o.copy(t);var l=i.strokeNoScale?this.getLineScale():1,c=i.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(o.width+=c/l,o.height+=c/l,o.x-=c/l/2,o.y-=c/l/2)}return o}return t},e.prototype.contain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect(),a=this.style;if(t=r[0],i=r[1],s.contain(t,i)){var o=this.path;if(this.hasStroke()){var l=a.lineWidth,c=a.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),CNe(o,l/c,t,i)))return!0}if(this.hasFill())return _Ne(o,t,i)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=V2,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,i){t==="shape"?this.setShape(i):n.prototype.attrKV.call(this,t,i)},e.prototype.setShape=function(t,i){var r=this.shape;return r||(r=this.shape={}),typeof t=="string"?r[t]=i:pn(r,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&V2)},e.prototype.createStyle=function(t){return BM(Zte,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.shape&&!i.shape&&(i.shape=pn({},this.shape))},e.prototype._applyStateObj=function(t,i,r,s,a,o){n.prototype._applyStateObj.call(this,t,i,r,s,a,o);var l=!(i&&s),c;if(i&&i.shape?a?s?c=i.shape:(c=pn({},r.shape),pn(c,i.shape)):(c=pn({},s?this.shape:r.shape),pn(c,i.shape)):l&&(c=r.shape),c)if(a){this.shape=pn({},this.shape);for(var u={},d=hs(c),f=0;f<d.length;f++){var h=d[f];typeof c[h]=="object"?this.shape[h]=c[h]:u[h]=c[h]}this._transitionState(t,{shape:u},o)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var i=n.prototype._mergeStates.call(this,t),r,s=0;s<t.length;s++){var a=t[s];a.shape&&(r=r||{},this._mergeStyle(r,a.shape))}return r&&(i.shape=r),i},e.prototype.getAnimationStyleProps=function(){return MNe},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var i=function(s){kn(a,s);function a(o){var l=s.call(this,o)||this;return t.init&&t.init.call(l,o),l}return a.prototype.getDefaultStyle=function(){return or(t.style)},a.prototype.getDefaultShape=function(){return or(t.shape)},a}(e);for(var r in t)typeof t[r]=="function"&&(i.prototype[r]=t[r]);return i},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=qu|g_|V2}(),e}(PA),TNe=Cr({strokeFirst:!0,font:fm,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Zte),qC=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return i!=null&&i!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.createStyle=function(t){return BM(TNe,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var i=t.text;i!=null?i+="":i="";var r=C7(i,t.font,t.textAlign,t.textBaseline);if(r.x+=t.x||0,r.y+=t.y||0,this.hasStroke()){var s=t.lineWidth;r.x-=s/2,r.y-=s/2,r.width+=s,r.height+=s}this._rect=r}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(PA);qC.prototype.type="tspan";var ENe=Cr({x:0,y:0},$0),INe={style:Cr({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},VM.style)};function DNe(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Cp=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return BM(ENe,t)},e.prototype._getSize=function(t){var i=this.style,r=i[t];if(r!=null)return r;var s=DNe(i.image)?i.image:this.__image;if(!s)return 0;var a=t==="width"?"height":"width",o=i[a];return o==null?s[t]:s[t]/s[a]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return INe},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new _r(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(PA);Cp.prototype.type="image";function RNe(n,e){var t=e.x,i=e.y,r=e.width,s=e.height,a=e.r,o,l,c,u;r<0&&(t=t+r,r=-r),s<0&&(i=i+s,s=-s),typeof a=="number"?o=l=c=u=a:a instanceof Array?a.length===1?o=l=c=u=a[0]:a.length===2?(o=c=a[0],l=u=a[1]):a.length===3?(o=a[0],l=u=a[1],c=a[2]):(o=a[0],l=a[1],c=a[2],u=a[3]):o=l=c=u=0;var d;o+l>r&&(d=o+l,o*=r/d,l*=r/d),c+u>r&&(d=c+u,c*=r/d,u*=r/d),l+c>s&&(d=l+c,l*=s/d,c*=s/d),o+u>s&&(d=o+u,o*=s/d,u*=s/d),n.moveTo(t+o,i),n.lineTo(t+r-l,i),l!==0&&n.arc(t+r-l,i+l,l,-Math.PI/2,0),n.lineTo(t+r,i+s-c),c!==0&&n.arc(t+r-c,i+s-c,c,0,Math.PI/2),n.lineTo(t+u,i+s),u!==0&&n.arc(t+u,i+s-u,u,Math.PI/2,Math.PI),n.lineTo(t,i+o),o!==0&&n.arc(t+o,i+o,o,Math.PI,Math.PI*1.5)}var Cg=Math.round;function Jte(n,e,t){if(e){var i=e.x1,r=e.x2,s=e.y1,a=e.y2;n.x1=i,n.x2=r,n.y1=s,n.y2=a;var o=t&&t.lineWidth;return o&&(Cg(i*2)===Cg(r*2)&&(n.x1=n.x2=F0(i,o,!0)),Cg(s*2)===Cg(a*2)&&(n.y1=n.y2=F0(s,o,!0))),n}}function ene(n,e,t){if(e){var i=e.x,r=e.y,s=e.width,a=e.height;n.x=i,n.y=r,n.width=s,n.height=a;var o=t&&t.lineWidth;return o&&(n.x=F0(i,o,!0),n.y=F0(r,o,!0),n.width=Math.max(F0(i+s,o,!1)-n.x,s===0?0:1),n.height=Math.max(F0(r+a,o,!1)-n.y,a===0?0:1)),n}}function F0(n,e,t){if(!e)return n;var i=Cg(n*2);return(i+Cg(e))%2===0?i/2:(i+(t?1:-1))/2}var PNe=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),LNe={},pa=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new PNe},e.prototype.buildPath=function(t,i){var r,s,a,o;if(this.subPixelOptimize){var l=ene(LNe,i,this.style);r=l.x,s=l.y,a=l.width,o=l.height,l.r=i.r,i=l}else r=i.x,s=i.y,a=i.width,o=i.height;i.r?RNe(t,i):t.rect(r,s,a,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Gr);pa.prototype.type="rect";var IV={fill:"#000"},DV=2,kNe={style:Cr({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},VM.style)},Ra=function(n){kn(e,n);function e(t){var i=n.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=IV,i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var i=this._children[t];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var i=this.innerTransformable;return i?i.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,UNe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new _r(0,0,0,0),i=this._children,r=[],s=null,a=0;a<i.length;a++){var o=i[a],l=o.getBoundingRect(),c=o.getLocalTransform(r);c?(t.copy(l),t.applyTransform(c),s=s||t.clone(),s.union(t)):(s=s||l.clone(),s.union(l))}this._rect=s||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||IV},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,i){if(!i)return t;var r=i.rich,s=t.rich||r&&{};return pn(t,i),r&&s?(this._mergeRich(s,r),t.rich=s):s&&(t.rich=s),t},e.prototype._mergeRich=function(t,i){for(var r=hs(i),s=0;s<r.length;s++){var a=r[s];t[a]=t[a]||{},pn(t[a],i[a])}},e.prototype.getAnimationStyleProps=function(){return kNe},e.prototype._getOrCreateChild=function(t){var i=this._children[this._childCursor];return(!i||!(i instanceof t))&&(i=new t),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},e.prototype._updatePlainTexts=function(){var t=this.style,i=t.font||fm,r=t.padding,s=NV(t),a=iNe(s,t),o=RE(t),l=!!t.backgroundColor,c=a.outerHeight,u=a.outerWidth,d=a.contentWidth,f=a.lines,h=a.lineHeight,p=this._defaultStyle;this.isTruncated=!!a.isTruncated;var m=t.x||0,v=t.y||0,g=t.align||p.align||"left",y=t.verticalAlign||p.verticalAlign||"top",x=m,b=cg(v,a.contentHeight,y);if(o||r){var A=G2(m,u,g),S=cg(v,c,y);o&&this._renderBackground(t,t,A,S,u,c)}b+=h/2,r&&(x=BV(m,g,r),y==="top"?b+=r[0]:y==="bottom"&&(b-=r[2]));for(var C=0,_=!1,M=FV("fill"in t?t.fill:(_=!0,p.fill)),T=kV("stroke"in t?t.stroke:!l&&(!p.autoStroke||_)?(C=DV,p.stroke):null),E=t.textShadowBlur>0,I=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),L=a.calculatedLineHeight,F=0;F<f.length;F++){var B=this._getOrCreateChild(qC),P=B.createStyle();B.useStyle(P),P.text=f[F],P.x=x,P.y=b,P.textAlign=g,P.textBaseline="middle",P.opacity=t.opacity,P.strokeFirst=!0,E&&(P.shadowBlur=t.textShadowBlur||0,P.shadowColor=t.textShadowColor||"transparent",P.shadowOffsetX=t.textShadowOffsetX||0,P.shadowOffsetY=t.textShadowOffsetY||0),P.stroke=T,P.fill=M,T&&(P.lineWidth=t.lineWidth||C,P.lineDash=t.lineDash,P.lineDashOffset=t.lineDashOffset||0),P.font=i,PV(P,t),b+=h,I&&B.setBoundingRect(new _r(G2(P.x,d,P.textAlign),cg(P.y,L,P.textBaseline),d,L))}},e.prototype._updateRichTexts=function(){var t=this.style,i=NV(t),r=aNe(i,t),s=r.width,a=r.outerWidth,o=r.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,d=this._defaultStyle,f=t.align||d.align,h=t.verticalAlign||d.verticalAlign;this.isTruncated=!!r.isTruncated;var p=G2(c,a,f),m=cg(u,o,h),v=p,g=m;l&&(v+=l[3],g+=l[0]);var y=v+s;RE(t)&&this._renderBackground(t,t,p,m,a,o);for(var x=!!t.backgroundColor,b=0;b<r.lines.length;b++){for(var A=r.lines[b],S=A.tokens,C=S.length,_=A.lineHeight,M=A.width,T=0,E=v,I=y,L=C-1,F=void 0;T<C&&(F=S[T],!F.align||F.align==="left");)this._placeToken(F,t,_,g,E,"left",x),M-=F.width,E+=F.width,T++;for(;L>=0&&(F=S[L],F.align==="right");)this._placeToken(F,t,_,g,I,"right",x),M-=F.width,I-=F.width,L--;for(E+=(s-(E-v)-(y-I)-M)/2;T<=L;)F=S[T],this._placeToken(F,t,_,g,E+F.width/2,"center",x),E+=F.width,T++;g+=_}},e.prototype._placeToken=function(t,i,r,s,a,o,l){var c=i.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,d=s+r/2;u==="top"?d=s+t.height/2:u==="bottom"&&(d=s+r-t.height/2);var f=!t.isLineHolder&&RE(c);f&&this._renderBackground(c,i,o==="right"?a-t.width:o==="center"?a-t.width/2:a,d-t.height/2,t.width,t.height);var h=!!c.backgroundColor,p=t.textPadding;p&&(a=BV(a,o,p),d-=t.height/2-p[0]-t.innerHeight/2);var m=this._getOrCreateChild(qC),v=m.createStyle();m.useStyle(v);var g=this._defaultStyle,y=!1,x=0,b=FV("fill"in c?c.fill:"fill"in i?i.fill:(y=!0,g.fill)),A=kV("stroke"in c?c.stroke:"stroke"in i?i.stroke:!h&&!l&&(!g.autoStroke||y)?(x=DV,g.stroke):null),S=c.textShadowBlur>0||i.textShadowBlur>0;v.text=t.text,v.x=a,v.y=d,S&&(v.shadowBlur=c.textShadowBlur||i.textShadowBlur||0,v.shadowColor=c.textShadowColor||i.textShadowColor||"transparent",v.shadowOffsetX=c.textShadowOffsetX||i.textShadowOffsetX||0,v.shadowOffsetY=c.textShadowOffsetY||i.textShadowOffsetY||0),v.textAlign=o,v.textBaseline="middle",v.font=t.font||fm,v.opacity=mb(c.opacity,i.opacity,1),PV(v,c),A&&(v.lineWidth=mb(c.lineWidth,i.lineWidth,x),v.lineDash=ki(c.lineDash,i.lineDash),v.lineDashOffset=i.lineDashOffset||0,v.stroke=A),b&&(v.fill=b);var C=t.contentWidth,_=t.contentHeight;m.setBoundingRect(new _r(G2(v.x,C,v.textAlign),cg(v.y,_,v.textBaseline),C,_))},e.prototype._renderBackground=function(t,i,r,s,a,o){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,d=l&&l.image,f=l&&!d,h=t.borderRadius,p=this,m,v;if(f||t.lineHeight||c&&u){m=this._getOrCreateChild(pa),m.useStyle(m.createStyle()),m.style.fill=null;var g=m.shape;g.x=r,g.y=s,g.width=a,g.height=o,g.r=h,m.dirtyShape()}if(f){var y=m.style;y.fill=l||null,y.fillOpacity=ki(t.fillOpacity,1)}else if(d){v=this._getOrCreateChild(Cp),v.onload=function(){p.dirtyStyle()};var x=v.style;x.image=l.image,x.x=r,x.y=s,x.width=a,x.height=o}if(c&&u){var y=m.style;y.lineWidth=c,y.stroke=u,y.strokeOpacity=ki(t.strokeOpacity,1),y.lineDash=t.borderDash,y.lineDashOffset=t.borderDashOffset||0,m.strokeContainThreshold=0,m.hasFill()&&m.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var b=(m||v).style;b.shadowBlur=t.shadowBlur||0,b.shadowColor=t.shadowColor||"transparent",b.shadowOffsetX=t.shadowOffsetX||0,b.shadowOffsetY=t.shadowOffsetY||0,b.opacity=mb(t.opacity,i.opacity,1)},e.makeFont=function(t){var i="";return ONe(t)&&(i=[t.fontStyle,t.fontWeight,NNe(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),i&&Ou(i)||t.textFont||t.font},e}(PA),FNe={left:!0,right:1,center:1},BNe={top:1,bottom:1,middle:1},RV=["fontStyle","fontWeight","fontSize","fontFamily"];function NNe(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?p7+"px":n+"px"}function PV(n,e){for(var t=0;t<RV.length;t++){var i=RV[t],r=e[i];r!=null&&(n[i]=r)}}function ONe(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function UNe(n){return LV(n),mt(n.rich,LV),n}function LV(n){if(n){n.font=Ra.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||FNe[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||BNe[t]?t:"top";var i=n.padding;i&&(n.padding=fte(n.padding))}}function kV(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function FV(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function BV(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function NV(n){var e=n.text;return e!=null&&(e+=""),e}function RE(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var Rr=Ls(),zNe=function(n,e,t,i){if(i){var r=Rr(i);r.dataIndex=t,r.dataType=e,r.seriesIndex=n,r.ssrType="chart",i.type==="group"&&i.traverse(function(s){var a=Rr(s);a.seriesIndex=n,a.dataIndex=t,a.dataType=e,a.ssrType="chart"})}},OV=1,UV={},tne=Ls(),R7=Ls(),P7=0,HM=1,GM=2,gc=["emphasis","blur","select"],KC=["normal","emphasis","blur","select"],VNe=10,HNe=9,Q0="highlight",S_="downplay",xb="select",__="unselect",Ab="toggleSelect";function iv(n){return n!=null&&n!=="none"}function WM(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function nne(n){WM(n,"emphasis",GM)}function ine(n){n.hoverState===GM&&WM(n,"normal",P7)}function L7(n){WM(n,"blur",HM)}function rne(n){n.hoverState===HM&&WM(n,"normal",P7)}function GNe(n){n.selected=!0}function WNe(n){n.selected=!1}function zV(n,e,t){e(n,t)}function Rf(n,e,t){zV(n,e,t),n.isGroup&&n.traverse(function(i){zV(i,e,t)})}function VV(n,e){switch(e){case"emphasis":n.hoverState=GM;break;case"normal":n.hoverState=P7;break;case"blur":n.hoverState=HM;break;case"select":n.selected=!0}}function qNe(n,e,t,i){for(var r=n.style,s={},a=0;a<e.length;a++){var o=e[a],l=r[o];s[o]=l??(i&&i[o])}for(var a=0;a<n.animators.length;a++){var c=n.animators[a];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(s,e)}return s}function KNe(n,e,t,i){var r=t&&Nr(t,"select")>=0,s=!1;if(n instanceof Gr){var a=tne(n),o=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(iv(o)||iv(l)){i=i||{};var c=i.style||{};c.fill==="inherit"?(s=!0,i=pn({},i),c=pn({},c),c.fill=o):!iv(c.fill)&&iv(o)?(s=!0,i=pn({},i),c=pn({},c),c.fill=lV(o)):!iv(c.stroke)&&iv(l)&&(s||(i=pn({},i),c=pn({},c)),c.stroke=lV(l)),i.style=c}}if(i&&i.z2==null){s||(i=pn({},i));var u=n.z2EmphasisLift;i.z2=n.z2+(u??VNe)}return i}function YNe(n,e,t){if(t&&t.z2==null){t=pn({},t);var i=n.z2SelectLift;t.z2=n.z2+(i??HNe)}return t}function XNe(n,e,t){var i=Nr(n.currentStates,e)>=0,r=n.style.opacity,s=i?null:qNe(n,["opacity"],e,{opacity:1});t=t||{};var a=t.style||{};return a.opacity==null&&(t=pn({},t),a=pn({opacity:i?r:s.opacity*.1},a),t.style=a),t}function PE(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return KNe(this,n,e,t);if(n==="blur")return XNe(this,n,t);if(n==="select")return YNe(this,n,t)}return t}function jNe(n){n.stateProxy=PE;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=PE),t&&(t.stateProxy=PE)}function HV(n,e){!lne(n,e)&&!n.__highByOuter&&Rf(n,nne)}function GV(n,e){!lne(n,e)&&!n.__highByOuter&&Rf(n,ine)}function YC(n,e){n.__highByOuter|=1<<(e||0),Rf(n,nne)}function XC(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&Rf(n,ine)}function $Ne(n){Rf(n,L7)}function sne(n){Rf(n,rne)}function ane(n){Rf(n,GNe)}function one(n){Rf(n,WNe)}function lne(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function cne(n){var e=n.getModel(),t=[],i=[];e.eachComponent(function(r,s){var a=R7(s),o=r==="series",l=o?n.getViewOfSeriesModel(s):n.getViewOfComponentModel(s);!o&&i.push(l),a.isBlured&&(l.group.traverse(function(c){rne(c)}),o&&t.push(s)),a.isBlured=!1}),mt(i,function(r){r&&r.toggleBlurSeries&&r.toggleBlurSeries(t,!1,e)})}function nR(n,e,t,i){var r=i.getModel();t=t||"coordinateSystem";function s(c,u){for(var d=0;d<u.length;d++){var f=c.getItemGraphicEl(u[d]);f&&sne(f)}}if(n!=null&&!(!e||e==="none")){var a=r.getSeriesByIndex(n),o=a.coordinateSystem;o&&o.master&&(o=o.master);var l=[];r.eachSeries(function(c){var u=a===c,d=c.coordinateSystem;d&&d.master&&(d=d.master);var f=d&&o?d===o:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!f||e==="series"&&u)){var h=i.getViewOfSeriesModel(c);if(h.group.traverse(function(v){v.__highByOuter&&u&&e==="self"||L7(v)}),el(e))s(c.getData(),e);else if(hi(e))for(var p=hs(e),m=0;m<p.length;m++)s(c.getData(p[m]),e[p[m]]);l.push(c),R7(c).isBlured=!0}}),r.eachComponent(function(c,u){if(c!=="series"){var d=i.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,r)}})}}function iR(n,e,t){if(!(n==null||e==null)){var i=t.getModel().getComponent(n,e);if(i){R7(i).isBlured=!0;var r=t.getViewOfComponentModel(i);!r||!r.focusBlurEnabled||r.group.traverse(function(s){L7(s)})}}}function QNe(n,e,t){var i=n.seriesIndex,r=n.getData(e.dataType);if(r){var s=pm(r,e);s=(Un(s)?s[0]:s)||0;var a=r.getItemGraphicEl(s);if(!a)for(var o=r.count(),l=0;!a&&l<o;)a=r.getItemGraphicEl(l++);if(a){var c=Rr(a);nR(i,c.focus,c.blurScope,t)}else{var u=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);u!=null&&nR(i,u,d,t)}}}function k7(n,e,t,i){var r={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return r;var s=i.getModel().getComponent(n,e);if(!s)return r;var a=i.getViewOfComponentModel(s);if(!a||!a.findHighDownDispatchers)return r;for(var o=a.findHighDownDispatchers(t),l,c=0;c<o.length;c++)if(Rr(o[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function ZNe(n,e,t){var i=Rr(n),r=k7(i.componentMainType,i.componentIndex,i.componentHighDownName,t),s=r.dispatchers,a=r.focusSelf;s?(a&&iR(i.componentMainType,i.componentIndex,t),mt(s,function(o){return HV(o,e)})):(nR(i.seriesIndex,i.focus,i.blurScope,t),i.focus==="self"&&iR(i.componentMainType,i.componentIndex,t),HV(n,e))}function JNe(n,e,t){cne(t);var i=Rr(n),r=k7(i.componentMainType,i.componentIndex,i.componentHighDownName,t).dispatchers;r?mt(r,function(s){return GV(s,e)}):GV(n,e)}function eOe(n,e,t){if(oR(e)){var i=e.dataType,r=n.getData(i),s=pm(r,e);Un(s)||(s=[s]),n[e.type===Ab?"toggleSelect":e.type===xb?"select":"unselect"](s,i)}}function WV(n){var e=n.getAllData();mt(e,function(t){var i=t.data,r=t.type;i.eachItemGraphicEl(function(s,a){n.isSelected(a,r)?ane(s):one(s)})})}function tOe(n){var e=[];return n.eachSeries(function(t){var i=t.getAllData();mt(i,function(r){r.data;var s=r.type,a=t.getSelectedDataIndices();if(a.length>0){var o={dataIndex:a,seriesIndex:t.seriesIndex};s!=null&&(o.dataType=s),e.push(o)}})}),e}function rR(n,e,t){une(n,!0),Rf(n,jNe),iOe(n,e,t)}function nOe(n){une(n,!1)}function jC(n,e,t,i){i?nOe(n):rR(n,e,t)}function iOe(n,e,t){var i=Rr(n);e!=null?(i.focus=e,i.blurScope=t):i.focus&&(i.focus=null)}var qV=["emphasis","blur","select"],rOe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function sR(n,e,t,i){t=t||"itemStyle";for(var r=0;r<qV.length;r++){var s=qV[r],a=e.getModel([s,t]),o=n.ensureState(s);o.style=a[rOe[t]]()}}function une(n,e){var t=e===!1,i=n;n.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!t)}function aR(n){return!!(n&&n.__highDownDispatcher)}function sOe(n){var e=UV[n];return e==null&&OV<=32&&(e=UV[n]=OV++),e}function oR(n){var e=n.type;return e===xb||e===__||e===Ab}function KV(n){var e=n.type;return e===Q0||e===S_}function aOe(n){var e=tne(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var rv=mm.CMD,oOe=[[],[],[]],YV=Math.sqrt,lOe=Math.atan2;function cOe(n,e){if(e){var t=n.data,i=n.len(),r,s,a,o,l,c,u=rv.M,d=rv.C,f=rv.L,h=rv.R,p=rv.A,m=rv.Q;for(a=0,o=0;a<i;){switch(r=t[a++],o=a,s=0,r){case u:s=1;break;case f:s=1;break;case d:s=3;break;case m:s=2;break;case p:var v=e[4],g=e[5],y=YV(e[0]*e[0]+e[1]*e[1]),x=YV(e[2]*e[2]+e[3]*e[3]),b=lOe(-e[1]/x,e[0]/y);t[a]*=y,t[a++]+=v,t[a]*=x,t[a++]+=g,t[a++]*=y,t[a++]*=x,t[a++]+=b,t[a++]+=b,a+=2,o=a;break;case h:c[0]=t[a++],c[1]=t[a++],lc(c,c,e),t[o++]=c[0],t[o++]=c[1],c[0]+=t[a++],c[1]+=t[a++],lc(c,c,e),t[o++]=c[0],t[o++]=c[1]}for(l=0;l<s;l++){var A=oOe[l];A[0]=t[a++],A[1]=t[a++],lc(A,A,e),t[o++]=A[0],t[o++]=A[1]}}n.increaseVersion()}}var LE=Math.sqrt,Uw=Math.sin,zw=Math.cos,i2=Math.PI;function XV(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function lR(n,e){return(n[0]*e[0]+n[1]*e[1])/(XV(n)*XV(e))}function jV(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(lR(n,e))}function $V(n,e,t,i,r,s,a,o,l,c,u){var d=l*(i2/180),f=zw(d)*(n-t)/2+Uw(d)*(e-i)/2,h=-1*Uw(d)*(n-t)/2+zw(d)*(e-i)/2,p=f*f/(a*a)+h*h/(o*o);p>1&&(a*=LE(p),o*=LE(p));var m=(r===s?-1:1)*LE((a*a*(o*o)-a*a*(h*h)-o*o*(f*f))/(a*a*(h*h)+o*o*(f*f)))||0,v=m*a*h/o,g=m*-o*f/a,y=(n+t)/2+zw(d)*v-Uw(d)*g,x=(e+i)/2+Uw(d)*v+zw(d)*g,b=jV([1,0],[(f-v)/a,(h-g)/o]),A=[(f-v)/a,(h-g)/o],S=[(-1*f-v)/a,(-1*h-g)/o],C=jV(A,S);if(lR(A,S)<=-1&&(C=i2),lR(A,S)>=1&&(C=0),C<0){var _=Math.round(C/i2*1e6)/1e6;C=i2*2+_%2*i2}u.addData(c,y,x,a,o,b,C,d,s)}var uOe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,dOe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function fOe(n){var e=new mm;if(!n)return e;var t=0,i=0,r=t,s=i,a,o=mm.CMD,l=n.match(uOe);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],d=u.charAt(0),f=void 0,h=u.match(dOe)||[],p=h.length,m=0;m<p;m++)h[m]=parseFloat(h[m]);for(var v=0;v<p;){var g=void 0,y=void 0,x=void 0,b=void 0,A=void 0,S=void 0,C=void 0,_=t,M=i,T=void 0,E=void 0;switch(d){case"l":t+=h[v++],i+=h[v++],f=o.L,e.addData(f,t,i);break;case"L":t=h[v++],i=h[v++],f=o.L,e.addData(f,t,i);break;case"m":t+=h[v++],i+=h[v++],f=o.M,e.addData(f,t,i),r=t,s=i,d="l";break;case"M":t=h[v++],i=h[v++],f=o.M,e.addData(f,t,i),r=t,s=i,d="L";break;case"h":t+=h[v++],f=o.L,e.addData(f,t,i);break;case"H":t=h[v++],f=o.L,e.addData(f,t,i);break;case"v":i+=h[v++],f=o.L,e.addData(f,t,i);break;case"V":i=h[v++],f=o.L,e.addData(f,t,i);break;case"C":f=o.C,e.addData(f,h[v++],h[v++],h[v++],h[v++],h[v++],h[v++]),t=h[v-2],i=h[v-1];break;case"c":f=o.C,e.addData(f,h[v++]+t,h[v++]+i,h[v++]+t,h[v++]+i,h[v++]+t,h[v++]+i),t+=h[v-2],i+=h[v-1];break;case"S":g=t,y=i,T=e.len(),E=e.data,a===o.C&&(g+=t-E[T-4],y+=i-E[T-3]),f=o.C,_=h[v++],M=h[v++],t=h[v++],i=h[v++],e.addData(f,g,y,_,M,t,i);break;case"s":g=t,y=i,T=e.len(),E=e.data,a===o.C&&(g+=t-E[T-4],y+=i-E[T-3]),f=o.C,_=t+h[v++],M=i+h[v++],t+=h[v++],i+=h[v++],e.addData(f,g,y,_,M,t,i);break;case"Q":_=h[v++],M=h[v++],t=h[v++],i=h[v++],f=o.Q,e.addData(f,_,M,t,i);break;case"q":_=h[v++]+t,M=h[v++]+i,t+=h[v++],i+=h[v++],f=o.Q,e.addData(f,_,M,t,i);break;case"T":g=t,y=i,T=e.len(),E=e.data,a===o.Q&&(g+=t-E[T-4],y+=i-E[T-3]),t=h[v++],i=h[v++],f=o.Q,e.addData(f,g,y,t,i);break;case"t":g=t,y=i,T=e.len(),E=e.data,a===o.Q&&(g+=t-E[T-4],y+=i-E[T-3]),t+=h[v++],i+=h[v++],f=o.Q,e.addData(f,g,y,t,i);break;case"A":x=h[v++],b=h[v++],A=h[v++],S=h[v++],C=h[v++],_=t,M=i,t=h[v++],i=h[v++],f=o.A,$V(_,M,t,i,S,C,x,b,A,f,e);break;case"a":x=h[v++],b=h[v++],A=h[v++],S=h[v++],C=h[v++],_=t,M=i,t+=h[v++],i+=h[v++],f=o.A,$V(_,M,t,i,S,C,x,b,A,f,e);break}}(d==="z"||d==="Z")&&(f=o.Z,e.addData(f),t=r,i=s),a=f}return e.toStatic(),e}var dne=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(Gr);function fne(n){return n.setData!=null}function hne(n,e){var t=fOe(n),i=pn({},e);return i.buildPath=function(r){if(fne(r)){r.setData(t.data);var s=r.getContext();s&&r.rebuildPath(s,1)}else{var s=r;t.rebuildPath(s,1)}},i.applyTransform=function(r){cOe(t,r),this.dirtyShape()},i}function hOe(n,e){return new dne(hne(n,e))}function pOe(n,e){var t=hne(n,e),i=function(r){kn(s,r);function s(a){var o=r.call(this,a)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return s}(dne);return i}function mOe(n,e){for(var t=[],i=n.length,r=0;r<i;r++){var s=n[r];t.push(s.getUpdatedPathProxy(!0))}var a=new Gr(e);return a.createPathProxy(),a.buildPath=function(o){if(fne(o)){o.appendPath(t);var l=o.getContext();l&&o.rebuildPath(l,1)}},a}var vOe=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),qM=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new vOe},e.prototype.buildPath=function(t,i){t.moveTo(i.cx+i.r,i.cy),t.arc(i.cx,i.cy,i.r,0,Math.PI*2)},e}(Gr);qM.prototype.type="circle";var gOe=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),F7=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new gOe},e.prototype.buildPath=function(t,i){var r=.5522848,s=i.cx,a=i.cy,o=i.rx,l=i.ry,c=o*r,u=l*r;t.moveTo(s-o,a),t.bezierCurveTo(s-o,a-u,s-c,a-l,s,a-l),t.bezierCurveTo(s+c,a-l,s+o,a-u,s+o,a),t.bezierCurveTo(s+o,a+u,s+c,a+l,s,a+l),t.bezierCurveTo(s-c,a+l,s-o,a+u,s-o,a),t.closePath()},e}(Gr);F7.prototype.type="ellipse";var pne=Math.PI,kE=pne*2,$p=Math.sin,sv=Math.cos,yOe=Math.acos,Ba=Math.atan2,QV=Math.abs,wb=Math.sqrt,W2=Math.max,Su=Math.min,Fc=1e-4;function bOe(n,e,t,i,r,s,a,o){var l=t-n,c=i-e,u=a-r,d=o-s,f=d*l-u*c;if(!(f*f<Fc))return f=(u*(e-s)-d*(n-r))/f,[n+f*l,e+f*c]}function Vw(n,e,t,i,r,s,a){var o=n-t,l=e-i,c=(a?s:-s)/wb(o*o+l*l),u=c*l,d=-c*o,f=n+u,h=e+d,p=t+u,m=i+d,v=(f+p)/2,g=(h+m)/2,y=p-f,x=m-h,b=y*y+x*x,A=r-s,S=f*m-p*h,C=(x<0?-1:1)*wb(W2(0,A*A*b-S*S)),_=(S*x-y*C)/b,M=(-S*y-x*C)/b,T=(S*x+y*C)/b,E=(-S*y+x*C)/b,I=_-v,L=M-g,F=T-v,B=E-g;return I*I+L*L>F*F+B*B&&(_=T,M=E),{cx:_,cy:M,x0:-u,y0:-d,x1:_*(r/A-1),y1:M*(r/A-1)}}function xOe(n){var e;if(Un(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function AOe(n,e){var t,i=W2(e.r,0),r=W2(e.r0||0,0),s=i>0,a=r>0;if(!(!s&&!a)){if(s||(i=r,r=0),r>i){var o=i;i=r,r=o}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,d=e.cy,f=!!e.clockwise,h=QV(c-l),p=h>kE&&h%kE;if(p>Fc&&(h=p),!(i>Fc))n.moveTo(u,d);else if(h>kE-Fc)n.moveTo(u+i*sv(l),d+i*$p(l)),n.arc(u,d,i,l,c,!f),r>Fc&&(n.moveTo(u+r*sv(c),d+r*$p(c)),n.arc(u,d,r,c,l,f));else{var m=void 0,v=void 0,g=void 0,y=void 0,x=void 0,b=void 0,A=void 0,S=void 0,C=void 0,_=void 0,M=void 0,T=void 0,E=void 0,I=void 0,L=void 0,F=void 0,B=i*sv(l),P=i*$p(l),z=r*sv(c),O=r*$p(c),N=h>Fc;if(N){var H=e.cornerRadius;H&&(t=xOe(H),m=t[0],v=t[1],g=t[2],y=t[3]);var q=QV(i-r)/2;if(x=Su(q,g),b=Su(q,y),A=Su(q,m),S=Su(q,v),M=C=W2(x,b),T=_=W2(A,S),(C>Fc||_>Fc)&&(E=i*sv(c),I=i*$p(c),L=r*sv(l),F=r*$p(l),h<pne)){var te=bOe(B,P,L,F,E,I,z,O);if(te){var Q=B-te[0],ee=P-te[1],de=E-te[0],J=I-te[1],ue=1/$p(yOe((Q*de+ee*J)/(wb(Q*Q+ee*ee)*wb(de*de+J*J)))/2),Te=wb(te[0]*te[0]+te[1]*te[1]);M=Su(C,(i-Te)/(ue+1)),T=Su(_,(r-Te)/(ue-1))}}}if(!N)n.moveTo(u+B,d+P);else if(M>Fc){var De=Su(g,M),Le=Su(y,M),Ne=Vw(L,F,B,P,i,De,f),Y=Vw(E,I,z,O,i,Le,f);n.moveTo(u+Ne.cx+Ne.x0,d+Ne.cy+Ne.y0),M<C&&De===Le?n.arc(u+Ne.cx,d+Ne.cy,M,Ba(Ne.y0,Ne.x0),Ba(Y.y0,Y.x0),!f):(De>0&&n.arc(u+Ne.cx,d+Ne.cy,De,Ba(Ne.y0,Ne.x0),Ba(Ne.y1,Ne.x1),!f),n.arc(u,d,i,Ba(Ne.cy+Ne.y1,Ne.cx+Ne.x1),Ba(Y.cy+Y.y1,Y.cx+Y.x1),!f),Le>0&&n.arc(u+Y.cx,d+Y.cy,Le,Ba(Y.y1,Y.x1),Ba(Y.y0,Y.x0),!f))}else n.moveTo(u+B,d+P),n.arc(u,d,i,l,c,!f);if(!(r>Fc)||!N)n.lineTo(u+z,d+O);else if(T>Fc){var De=Su(m,T),Le=Su(v,T),Ne=Vw(z,O,E,I,r,-Le,f),Y=Vw(B,P,L,F,r,-De,f);n.lineTo(u+Ne.cx+Ne.x0,d+Ne.cy+Ne.y0),T<_&&De===Le?n.arc(u+Ne.cx,d+Ne.cy,T,Ba(Ne.y0,Ne.x0),Ba(Y.y0,Y.x0),!f):(Le>0&&n.arc(u+Ne.cx,d+Ne.cy,Le,Ba(Ne.y0,Ne.x0),Ba(Ne.y1,Ne.x1),!f),n.arc(u,d,r,Ba(Ne.cy+Ne.y1,Ne.cx+Ne.x1),Ba(Y.cy+Y.y1,Y.cx+Y.x1),f),De>0&&n.arc(u+Y.cx,d+Y.cy,De,Ba(Y.y1,Y.x1),Ba(Y.y0,Y.x0),!f))}else n.lineTo(u+z,d+O),n.arc(u,d,r,c,l,f)}n.closePath()}}}var wOe=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),py=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new wOe},e.prototype.buildPath=function(t,i){AOe(t,i)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Gr);py.prototype.type="sector";var SOe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),B7=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new SOe},e.prototype.buildPath=function(t,i){var r=i.cx,s=i.cy,a=Math.PI*2;t.moveTo(r+i.r,s),t.arc(r,s,i.r,0,a,!1),t.moveTo(r+i.r0,s),t.arc(r,s,i.r0,0,a,!0)},e}(Gr);B7.prototype.type="ring";function _Oe(n,e,t,i){var r=[],s=[],a=[],o=[],l,c,u,d;if(i){u=[1/0,1/0],d=[-1/0,-1/0];for(var f=0,h=n.length;f<h;f++)wg(u,u,n[f]),Sg(d,d,n[f]);wg(u,u,i[0]),Sg(d,d,i[1])}for(var f=0,h=n.length;f<h;f++){var p=n[f];if(t)l=n[f?f-1:h-1],c=n[(f+1)%h];else if(f===0||f===h-1){r.push(sFe(n[f]));continue}else l=n[f-1],c=n[f+1];aFe(s,c,l),Q5(s,s,e);var m=F8(p,l),v=F8(p,c),g=m+v;g!==0&&(m/=g,v/=g),Q5(a,s,-m),Q5(o,s,v);var y=qz([],p,a),x=qz([],p,o);i&&(Sg(y,y,u),wg(y,y,d),Sg(x,x,u),wg(x,x,d)),r.push(y),r.push(x)}return t&&r.push(r.shift()),r}function mne(n,e,t){var i=e.smooth,r=e.points;if(r&&r.length>=2){if(i){var s=_Oe(r,i,t,e.smoothConstraint);n.moveTo(r[0][0],r[0][1]);for(var a=r.length,o=0;o<(t?a:a-1);o++){var l=s[o*2],c=s[o*2+1],u=r[(o+1)%a];n.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{n.moveTo(r[0][0],r[0][1]);for(var o=1,d=r.length;o<d;o++)n.lineTo(r[o][0],r[o][1])}t&&n.closePath()}}var COe=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),N7=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new COe},e.prototype.buildPath=function(t,i){mne(t,i,!0)},e}(Gr);N7.prototype.type="polygon";var MOe=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),LA=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new MOe},e.prototype.buildPath=function(t,i){mne(t,i,!1)},e}(Gr);LA.prototype.type="polyline";var TOe={},EOe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),cp=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new EOe},e.prototype.buildPath=function(t,i){var r,s,a,o;if(this.subPixelOptimize){var l=Jte(TOe,i,this.style);r=l.x1,s=l.y1,a=l.x2,o=l.y2}else r=i.x1,s=i.y1,a=i.x2,o=i.y2;var c=i.percent;c!==0&&(t.moveTo(r,s),c<1&&(a=r*(1-c)+a*c,o=s*(1-c)+o*c),t.lineTo(a,o))},e.prototype.pointAt=function(t){var i=this.shape;return[i.x1*(1-t)+i.x2*t,i.y1*(1-t)+i.y2*t]},e}(Gr);cp.prototype.type="line";var Do=[],IOe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function ZV(n,e,t){var i=n.cpx2,r=n.cpy2;return i!=null||r!=null?[(t?nV:Ca)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?nV:Ca)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?iV:Ho)(n.x1,n.cpx1,n.x2,e),(t?iV:Ho)(n.y1,n.cpy1,n.y2,e)]}var O7=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new IOe},e.prototype.buildPath=function(t,i){var r=i.x1,s=i.y1,a=i.x2,o=i.y2,l=i.cpx1,c=i.cpy1,u=i.cpx2,d=i.cpy2,f=i.percent;f!==0&&(t.moveTo(r,s),u==null||d==null?(f<1&&(zC(r,l,a,f,Do),l=Do[1],a=Do[2],zC(s,c,o,f,Do),c=Do[1],o=Do[2]),t.quadraticCurveTo(l,c,a,o)):(f<1&&(UC(r,l,u,a,f,Do),l=Do[1],u=Do[2],a=Do[3],UC(s,c,d,o,f,Do),c=Do[1],d=Do[2],o=Do[3]),t.bezierCurveTo(l,c,u,d,a,o)))},e.prototype.pointAt=function(t){return ZV(this.shape,t,!1)},e.prototype.tangentAt=function(t){var i=ZV(this.shape,t,!0);return cFe(i,i)},e}(Gr);O7.prototype.type="bezier-curve";var DOe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),KM=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new DOe},e.prototype.buildPath=function(t,i){var r=i.cx,s=i.cy,a=Math.max(i.r,0),o=i.startAngle,l=i.endAngle,c=i.clockwise,u=Math.cos(o),d=Math.sin(o);t.moveTo(u*a+r,d*a+s),t.arc(r,s,a,o,l,!c)},e}(Gr);KM.prototype.type="arc";var ROe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,i=this.shapeChanged(),r=0;r<t.length;r++)i=i||t[r].shapeChanged();i&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],i=this.getGlobalScale(),r=0;r<t.length;r++)t[r].path||t[r].createPathProxy(),t[r].path.setScale(i[0],i[1],t[r].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,i){for(var r=i.paths||[],s=0;s<r.length;s++)r[s].buildPath(t,r[s].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],i=0;i<t.length;i++)t[i].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Gr.prototype.getBoundingRect.call(this)},e}(Gr),vne=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}(),gne=function(n){kn(e,n);function e(t,i,r,s,a,o){var l=n.call(this,a)||this;return l.x=t??0,l.y=i??0,l.x2=r??1,l.y2=s??0,l.type="linear",l.global=o||!1,l}return e}(vne),POe=function(n){kn(e,n);function e(t,i,r,s,a){var o=n.call(this,s)||this;return o.x=t??.5,o.y=i??.5,o.r=r??.5,o.type="radial",o.global=a||!1,o}return e}(vne),Qp=[0,0],Zp=[0,0],Hw=new wi,Gw=new wi,$C=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new wi;for(var i=0;i<2;i++)this._axes[i]=new wi;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var i=this._corners,r=this._axes,s=e.x,a=e.y,o=s+e.width,l=a+e.height;if(i[0].set(s,a),i[1].set(o,a),i[2].set(o,l),i[3].set(s,l),t)for(var c=0;c<4;c++)i[c].transform(t);wi.sub(r[0],i[1],i[0]),wi.sub(r[1],i[3],i[0]),r[0].normalize(),r[1].normalize();for(var c=0;c<2;c++)this._origin[c]=r[c].dot(i[0])},n.prototype.intersect=function(e,t){var i=!0,r=!t;return Hw.set(1/0,1/0),Gw.set(0,0),!this._intersectCheckOneSide(this,e,Hw,Gw,r,1)&&(i=!1,r)||!this._intersectCheckOneSide(e,this,Hw,Gw,r,-1)&&(i=!1,r)||r||wi.copy(t,i?Hw:Gw),i},n.prototype._intersectCheckOneSide=function(e,t,i,r,s,a){for(var o=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,Qp),this._getProjMinMaxOnAxis(l,t._corners,Zp),Qp[1]<Zp[0]||Qp[0]>Zp[1]){if(o=!1,s)return o;var u=Math.abs(Zp[0]-Qp[1]),d=Math.abs(Qp[0]-Zp[1]);Math.min(u,d)>r.len()&&(u<d?wi.scale(r,c,-u*a):wi.scale(r,c,d*a))}else if(i){var u=Math.abs(Zp[0]-Qp[1]),d=Math.abs(Qp[0]-Zp[1]);Math.min(u,d)<i.len()&&(u<d?wi.scale(i,c,u*a):wi.scale(i,c,-d*a))}}return o},n.prototype._getProjMinMaxOnAxis=function(e,t,i){for(var r=this._axes[e],s=this._origin,a=t[0].dot(r)+s[e],o=a,l=a,c=1;c<t.length;c++){var u=t[c].dot(r)+s[e];o=Math.min(u,o),l=Math.max(u,l)}i[0]=o,i[1]=l},n}(),LOe=[],kOe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,i){i?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,i){i=i||!1;for(var r=0;r<t.length;r++)this.addDisplayable(t[r],i)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var i=this._cursor;i<this._displayables.length;i++)t&&t(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)t&&t(this._temporaryDisplayables[i])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var i=this._displayables[t];i.parent=this,i.update(),i.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var i=this._temporaryDisplayables[t];i.parent=this,i.update(),i.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new _r(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var r=this._displayables[i],s=r.getBoundingRect().clone();r.needLocalTransform()&&s.applyTransform(r.getLocalTransform(LOe)),t.union(s)}this._rect=t}return this._rect},e.prototype.contain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect();if(s.contain(r[0],r[1]))for(var a=0;a<this._displayables.length;a++){var o=this._displayables[a];if(o.contain(t,i))return!0}return!1},e}(PA),FOe=Ls();function BOe(n,e,t,i,r){var s;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();s=a&&a.animation}var o=e&&e.isAnimationEnabled(),l=n==="update";if(o){var c=void 0,u=void 0,d=void 0;i?(c=ki(i.duration,200),u=ki(i.easing,"cubicOut"),d=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(c=s.duration),s.easing!=null&&(u=s.easing),s.delay!=null&&(d=s.delay)),Ci(d)&&(d=d(t,r)),Ci(c)&&(c=c(t));var f={duration:c||0,delay:d,easing:u};return f}else return null}function U7(n,e,t,i,r,s,a){var o=!1,l;Ci(r)?(a=s,s=r,r=null):hi(r)&&(s=r.cb,a=r.during,o=r.isFrom,l=r.removeOpt,r=r.dataIndex);var c=n==="leave";c||e.stopAnimation("leave");var u=BOe(n,i,r,c?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null);if(u&&u.duration>0){var d=u.duration,f=u.delay,h=u.easing,p={duration:d,delay:f||0,easing:h,done:s,force:!!s||!!a,setToFinal:!c,scope:n,during:a};o?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!o&&e.attr(t),a&&a(1),s&&s()}function Ju(n,e,t,i,r,s){U7("update",n,e,t,i,r,s)}function Gh(n,e,t,i,r,s){U7("enter",n,e,t,i,r,s)}function Sb(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function QC(n,e,t,i,r,s){Sb(n)||U7("leave",n,e,t,i,r,s)}function JV(n,e,t,i){n.removeTextContent(),n.removeTextGuideLine(),QC(n,{style:{opacity:0}},e,t,i)}function yne(n,e,t){function i(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(r){r.isGroup||JV(r,e,t,i)}):JV(n,e,t,i)}function bne(n){FOe(n).oldStyle=n.style}var ZC=Math.max,JC=Math.min,cR={};function NOe(n){return Gr.extend(n)}var OOe=pOe;function UOe(n,e){return OOe(n,e)}function fu(n,e){cR[n]=e}function zOe(n){if(cR.hasOwnProperty(n))return cR[n]}function z7(n,e,t,i){var r=hOe(n,e);return t&&(i==="center"&&(t=Ane(t,r.getBoundingRect())),wne(r,t)),r}function xne(n,e,t){var i=new Cp({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(r){if(t==="center"){var s={width:r.width,height:r.height};i.setStyle(Ane(e,s))}}});return i}function Ane(n,e){var t=e.width/e.height,i=n.height*t,r;i<=n.width?r=n.height:(i=n.width,r=i/t);var s=n.x+n.width/2,a=n.y+n.height/2;return{x:s-i/2,y:a-r/2,width:i,height:r}}var VOe=mOe;function wne(n,e){if(n.applyTransform){var t=n.getBoundingRect(),i=t.calculateTransform(e);n.applyTransform(i)}}function Tx(n,e){return Jte(n,n,{lineWidth:e}),n}function HOe(n){return ene(n.shape,n.shape,n.style),n}var GOe=F0;function WOe(n,e){for(var t=x7([]);n&&n!==e;)$g(t,n.getLocalTransform(),t),n=n.parent;return t}function V7(n,e,t){return e&&!el(e)&&(e=_7.getLocalTransform(e)),t&&(e=w7([],e)),lc([],n,e)}function qOe(n,e,t){var i=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),r=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),s=[n==="left"?-i:n==="right"?i:0,n==="top"?-r:n==="bottom"?r:0];return s=V7(s,e,t),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function eH(n){return!n.isGroup}function KOe(n){return n.shape!=null}function Sne(n,e,t){if(!n||!e)return;function i(a){var o={};return a.traverse(function(l){eH(l)&&l.anid&&(o[l.anid]=l)}),o}function r(a){var o={x:a.x,y:a.y,rotation:a.rotation};return KOe(a)&&(o.shape=pn({},a.shape)),o}var s=i(n);e.traverse(function(a){if(eH(a)&&a.anid){var o=s[a.anid];if(o){var l=r(a);a.attr(r(o)),Ju(a,l,t,Rr(a).dataIndex)}}})}function YOe(n,e){return fi(n,function(t){var i=t[0];i=ZC(i,e.x),i=JC(i,e.x+e.width);var r=t[1];return r=ZC(r,e.y),r=JC(r,e.y+e.height),[i,r]})}function XOe(n,e){var t=ZC(n.x,e.x),i=JC(n.x+n.width,e.x+e.width),r=ZC(n.y,e.y),s=JC(n.y+n.height,e.y+e.height);if(i>=t&&s>=r)return{x:t,y:r,width:i-t,height:s-r}}function H7(n,e,t){var i=pn({rectHover:!0},e),r=i.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(r.image=n.slice(8),Cr(r,t),new Cp(i)):z7(n.replace("path://",""),i,t,"center")}function jOe(n,e,t,i,r){for(var s=0,a=r[r.length-1];s<r.length;s++){var o=r[s];if(_ne(n,e,t,i,o[0],o[1],a[0],a[1]))return!0;a=o}}function _ne(n,e,t,i,r,s,a,o){var l=t-n,c=i-e,u=a-r,d=o-s,f=FE(u,d,l,c);if($Oe(f))return!1;var h=n-r,p=e-s,m=FE(h,p,l,c)/f;if(m<0||m>1)return!1;var v=FE(h,p,u,d)/f;return!(v<0||v>1)}function FE(n,e,t,i){return n*i-t*e}function $Oe(n){return n<=1e-6&&n>=-1e-6}function YM(n){var e=n.itemTooltipOption,t=n.componentModel,i=n.itemName,r=ri(e)?{formatter:e}:e,s=t.mainType,a=t.componentIndex,o={componentType:s,name:i,$vars:["name"]};o[s+"Index"]=a;var l=n.formatterParamsExtra;l&&mt(hs(l),function(u){hm(o,u)||(o[u]=l[u],o.$vars.push(u))});var c=Rr(n.el);c.componentMainType=s,c.componentIndex=a,c.tooltipConfig={name:i,option:Cr({content:i,encodeHTMLContent:!0,formatterParams:o},r)}}function tH(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function G7(n,e){if(n)if(Un(n))for(var t=0;t<n.length;t++)tH(n[t],e);else tH(n,e)}fu("circle",qM);fu("ellipse",F7);fu("sector",py);fu("ring",B7);fu("polygon",N7);fu("polyline",LA);fu("rect",pa);fu("line",cp);fu("bezierCurve",O7);fu("arc",KM);const QOe=Object.freeze(Object.defineProperty({__proto__:null,Arc:KM,BezierCurve:O7,BoundingRect:_r,Circle:qM,CompoundPath:ROe,Ellipse:F7,Group:eo,Image:Cp,IncrementalDisplayable:kOe,Line:cp,LinearGradient:gne,OrientedBoundingRect:$C,Path:Gr,Point:wi,Polygon:N7,Polyline:LA,RadialGradient:POe,Rect:pa,Ring:B7,Sector:py,Text:Ra,applyTransform:V7,clipPointsByRect:YOe,clipRectByRect:XOe,createIcon:H7,extendPath:UOe,extendShape:NOe,getShapeClass:zOe,getTransform:WOe,groupTransition:Sne,initProps:Gh,isElementRemoved:Sb,lineLineIntersect:_ne,linePolygonIntersect:jOe,makeImage:xne,makePath:z7,mergePath:VOe,registerShape:fu,removeElement:QC,removeElementWithFadeOut:yne,resizePath:wne,setTooltipConfig:YM,subPixelOptimize:GOe,subPixelOptimizeLine:Tx,subPixelOptimizeRect:HOe,transformDirection:qOe,traverseElements:G7,updateProps:Ju},Symbol.toStringTag,{value:"Module"}));var XM={};function ZOe(n,e){for(var t=0;t<gc.length;t++){var i=gc[t],r=e[i],s=n.ensureState(i);s.style=s.style||{},s.style.text=r}var a=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(a,!0)}function nH(n,e,t){var i=n.labelFetcher,r=n.labelDataIndex,s=n.labelDimIndex,a=e.normal,o;i&&(o=i.getFormattedLabel(r,"normal",null,s,a&&a.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=Ci(n.defaultText)?n.defaultText(r,n,t):n.defaultText);for(var l={normal:o},c=0;c<gc.length;c++){var u=gc[c],d=e[u];l[u]=ki(i?i.getFormattedLabel(r,u,null,s,d&&d.get("formatter")):null,o)}return l}function jM(n,e,t,i){t=t||XM;for(var r=n instanceof Ra,s=!1,a=0;a<KC.length;a++){var o=e[KC[a]];if(o&&o.getShallow("show")){s=!0;break}}var l=r?n:n.getTextContent();if(s){r||(l||(l=new Ra,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=nH(t,e),u=e.normal,d=!!u.getShallow("show"),f=up(u,i&&i.normal,t,!1,!r);f.text=c.normal,r||n.setTextConfig(iH(u,t,!1));for(var a=0;a<gc.length;a++){var h=gc[a],o=e[h];if(o){var p=l.ensureState(h),m=!!ki(o.getShallow("show"),d);if(m!==d&&(p.ignore=!m),p.style=up(o,i&&i[h],t,!0,!r),p.style.text=c[h],!r){var v=n.ensureState(h);v.textConfig=iH(o,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!d,l.useStyle(f),l.dirty(),t.enableTextSetter&&(Cne(l).setLabelText=function(g){var y=nH(t,e,g);ZOe(l,y)})}else l&&(l.ignore=!0);n.dirty()}function $M(n,e){e=e||"label";for(var t={normal:n.getModel(e)},i=0;i<gc.length;i++){var r=gc[i];t[r]=n.getModel([r,e])}return t}function up(n,e,t,i,r){var s={};return JOe(s,n,t,i,r),e&&pn(s,e),s}function iH(n,e,t){e=e||{};var i={},r,s=n.getShallow("rotate"),a=ki(n.getShallow("distance"),t?null:5),o=n.getShallow("offset");return r=n.getShallow("position")||(t?null:"inside"),r==="outside"&&(r=e.defaultOutsidePosition||"top"),r!=null&&(i.position=r),o!=null&&(i.offset=o),s!=null&&(s*=Math.PI/180,i.rotation=s),a!=null&&(i.distance=a),i.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",i}function JOe(n,e,t,i,r){t=t||XM;var s=e.ecModel,a=s&&s.option.textStyle,o=e9e(e),l;if(o){l={};for(var c in o)if(o.hasOwnProperty(c)){var u=e.getModel(["rich",c]);oH(l[c]={},u,a,t,i,r,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var f=e.get("minMargin");f!=null&&(n.margin=f),oH(n,e,a,t,i,r,!0,!1)}function e9e(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||XM).rich;if(t){e=e||{};for(var i=hs(t),r=0;r<i.length;r++){var s=i[r];e[s]=1}}n=n.parentModel}return e}var rH=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],sH=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],aH=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function oH(n,e,t,i,r,s,a,o){t=!r&&t||XM;var l=i&&i.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),d=ki(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),s||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(n.fill=c),u!=null&&(n.stroke=u);var f=ki(e.getShallow("textBorderWidth"),t.textBorderWidth);f!=null&&(n.lineWidth=f);var h=ki(e.getShallow("textBorderType"),t.textBorderType);h!=null&&(n.lineDash=h);var p=ki(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);p!=null&&(n.lineDashOffset=p),!r&&d==null&&!o&&(d=i&&i.defaultOpacity),d!=null&&(n.opacity=d),!r&&!s&&n.fill==null&&i.inheritColor&&(n.fill=i.inheritColor);for(var m=0;m<rH.length;m++){var v=rH[m],g=ki(e.getShallow(v),t[v]);g!=null&&(n[v]=g)}for(var m=0;m<sH.length;m++){var v=sH[m],g=e.getShallow(v);g!=null&&(n[v]=g)}if(n.verticalAlign==null){var y=e.getShallow("baseline");y!=null&&(n.verticalAlign=y)}if(!a||!i.disableBox){for(var m=0;m<aH.length;m++){var v=aH[m],g=e.getShallow(v);g!=null&&(n[v]=g)}var x=e.getShallow("borderType");x!=null&&(n.borderDash=x),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function t9e(n,e){var t=e&&e.getModel("textStyle");return Ou([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var Cne=Ls(),n9e=["textStyle","color"],BE=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],NE=new Ra,i9e=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(n9e):null)},n.prototype.getFont=function(){return t9e({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<BE.length;i++)t[BE[i]]=this.getShallow(BE[i]);return NE.useStyle(t),NE.update(),NE.getBoundingRect()},n}(),Mne=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],r9e=Mx(Mne),s9e=function(){function n(){}return n.prototype.getLineStyle=function(e){return r9e(this,e)},n}(),Tne=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],a9e=Mx(Tne),o9e=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return a9e(this,e,t)},n}(),xs=function(){function n(e,t,i){this.parentModel=t,this.ecModel=i,this.option=e}return n.prototype.init=function(e,t,i){},n.prototype.mergeOption=function(e,t){Sr(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var i=this.option,r=i==null?i:i[e];if(r==null&&!t){var s=this.parentModel;s&&(r=s.getShallow(e))}return r},n.prototype.getModel=function(e,t){var i=e!=null,r=i?this.parsePath(e):null,s=i?this._doGet(r):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),new n(s,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(or(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!Ai.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var i=this.option;if(!e)return i;for(var r=0;r<e.length&&!(e[r]&&(i=i&&typeof i=="object"?i[e[r]]:null,i==null));r++);return i==null&&t&&(i=t._doGet(this.resolveParentPath(e),t.parentModel)),i},n}();D7(xs);XBe(xs);od(xs,s9e);od(xs,o9e);od(xs,JBe);od(xs,i9e);var l9e=Math.round(Math.random()*10);function QM(n){return[n||"",l9e++].join("_")}function c9e(n){var e={};n.registerSubTypeDefaulter=function(t,i){var r=Uu(t);e[r.main]=i},n.determineSubType=function(t,i){var r=i.type;if(!r){var s=Uu(t).main;n.hasSubTypes(t)&&e[s]&&(r=e[s](i))}return r}}function u9e(n,e){n.topologicalTravel=function(s,a,o,l){if(!s.length)return;var c=t(a),u=c.graph,d=c.noEntryList,f={};for(mt(s,function(y){f[y]=!0});d.length;){var h=d.pop(),p=u[h],m=!!f[h];m&&(o.call(l,h,p.originalDeps.slice()),delete f[h]),mt(p.successor,m?g:v)}mt(f,function(){var y="";throw new Error(y)});function v(y){u[y].entryCount--,u[y].entryCount===0&&d.push(y)}function g(y){f[y]=!0,v(y)}};function t(s){var a={},o=[];return mt(s,function(l){var c=i(a,l),u=c.originalDeps=e(l),d=r(u,s);c.entryCount=d.length,c.entryCount===0&&o.push(l),mt(d,function(f){Nr(c.predecessor,f)<0&&c.predecessor.push(f);var h=i(a,f);Nr(h.successor,f)<0&&h.successor.push(l)})}),{graph:a,noEntryList:o}}function i(s,a){return s[a]||(s[a]={predecessor:[],successor:[]}),s[a]}function r(s,a){var o=[];return mt(s,function(l){Nr(a,l)>=0&&o.push(l)}),o}}function d9e(n,e){return Sr(Sr({},n,!0),e,!0)}const f9e={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},h9e={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var e4="ZH",W7="EN",Zg=W7,C_={},q7={},Ene=Ai.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Zg).toUpperCase();return n.indexOf(e4)>-1?e4:Zg}():Zg;function Ine(n,e){n=n.toUpperCase(),q7[n]=new xs(e),C_[n]=e}function p9e(n){if(ri(n)){var e=C_[n.toUpperCase()]||{};return n===e4||n===W7?or(e):Sr(or(e),or(C_[Zg]),!1)}else return Sr(or(n),or(C_[Zg]),!1)}function m9e(n){return q7[n]}function v9e(){return q7[Zg]}Ine(W7,f9e);Ine(e4,h9e);var K7=1e3,Y7=K7*60,_b=Y7*60,Zl=_b*24,lH=Zl*365,q2={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Ww="{yyyy}-{MM}-{dd}",cH={year:"{yyyy}",month:"{yyyy}-{MM}",day:Ww,hour:Ww+" "+q2.hour,minute:Ww+" "+q2.minute,second:Ww+" "+q2.second,millisecond:q2.none},OE=["year","month","day","hour","minute","second","millisecond"],Dne=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Hf(n,e){return n+="","0000".substr(0,e-n.length)+n}function Jg(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function g9e(n){return n===Jg(n)}function y9e(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function ZM(n,e,t,i){var r=vf(n),s=r[X7(t)](),a=r[e1(t)]()+1,o=Math.floor((a-1)/3)+1,l=r[JM(t)](),c=r["get"+(t?"UTC":"")+"Day"](),u=r[Ex(t)](),d=(u-1)%12+1,f=r[eT(t)](),h=r[tT(t)](),p=r[nT(t)](),m=u>=12?"pm":"am",v=m.toUpperCase(),g=i instanceof xs?i:m9e(i||Ene)||v9e(),y=g.getModel("time"),x=y.get("month"),b=y.get("monthAbbr"),A=y.get("dayOfWeek"),S=y.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,m+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,Hf(s%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,x[a-1]).replace(/{MMM}/g,b[a-1]).replace(/{MM}/g,Hf(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Hf(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,A[c]).replace(/{ee}/g,S[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Hf(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Hf(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,Hf(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,Hf(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,Hf(p,3)).replace(/{S}/g,p+"")}function b9e(n,e,t,i,r){var s=null;if(ri(t))s=t;else if(Ci(t))s=t(n.value,e,{level:n.level});else{var a=pn({},q2);if(n.level>0)for(var o=0;o<OE.length;++o)a[OE[o]]="{primary|"+a[OE[o]]+"}";var l=t?t.inherit===!1?t:Cr(t,a):a,c=Rne(n.value,r);if(l[c])s=l[c];else if(l.inherit){for(var u=Dne.indexOf(c),o=u-1;o>=0;--o)if(l[c]){s=l[c];break}s=s||a.none}if(Un(s)){var d=n.level==null?0:n.level>=0?n.level:s.length+n.level;d=Math.min(d,s.length-1),s=s[d]}}return ZM(new Date(n.value),s,r,i)}function Rne(n,e){var t=vf(n),i=t[e1(e)]()+1,r=t[JM(e)](),s=t[Ex(e)](),a=t[eT(e)](),o=t[tT(e)](),l=t[nT(e)](),c=l===0,u=c&&o===0,d=u&&a===0,f=d&&s===0,h=f&&r===1,p=h&&i===1;return p?"year":h?"month":f?"day":d?"hour":u?"minute":c?"second":"millisecond"}function uH(n,e,t){var i=jr(n)?vf(n):n;switch(e=e||Rne(n,t),e){case"year":return i[X7(t)]();case"half-year":return i[e1(t)]()>=6?1:0;case"quarter":return Math.floor((i[e1(t)]()+1)/4);case"month":return i[e1(t)]();case"day":return i[JM(t)]();case"half-day":return i[Ex(t)]()/24;case"hour":return i[Ex(t)]();case"minute":return i[eT(t)]();case"second":return i[tT(t)]();case"millisecond":return i[nT(t)]()}}function X7(n){return n?"getUTCFullYear":"getFullYear"}function e1(n){return n?"getUTCMonth":"getMonth"}function JM(n){return n?"getUTCDate":"getDate"}function Ex(n){return n?"getUTCHours":"getHours"}function eT(n){return n?"getUTCMinutes":"getMinutes"}function tT(n){return n?"getUTCSeconds":"getSeconds"}function nT(n){return n?"getUTCMilliseconds":"getMilliseconds"}function x9e(n){return n?"setUTCFullYear":"setFullYear"}function Pne(n){return n?"setUTCMonth":"setMonth"}function Lne(n){return n?"setUTCDate":"setDate"}function kne(n){return n?"setUTCHours":"setHours"}function Fne(n){return n?"setUTCMinutes":"setMinutes"}function Bne(n){return n?"setUTCSeconds":"setSeconds"}function Nne(n){return n?"setUTCMilliseconds":"setMilliseconds"}function One(n){if(!TBe(n))return ri(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function Une(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,i){return i.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var iT=fte;function uR(n,e,t){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function r(u){return u&&Ou(u)?u:"-"}function s(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var a=e==="time",o=n instanceof Date;if(a||o){var l=a?vf(n):n;if(isNaN(+l)){if(o)return"-"}else return ZM(l,i,t)}if(e==="ordinal")return L8(n)?r(n):jr(n)&&s(n)?n+"":"-";var c=WC(n);return s(c)?One(c):L8(n)?r(n):typeof n=="boolean"?n+"":"-"}var dH=["a","b","c","d","e","f","g"],UE=function(n,e){return"{"+n+(e??"")+"}"};function zne(n,e,t){Un(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],s=0;s<r.length;s++){var a=dH[s];n=n.replace(UE(a),UE(a,0))}for(var o=0;o<i;o++)for(var l=0;l<r.length;l++){var c=e[o][r[l]];n=n.replace(UE(dH[l],o),t?Vo(c):c)}return n}function A9e(n,e){var t=ri(n)?{color:n,extraCssText:e}:n||{},i=t.color,r=t.type;e=t.extraCssText;var s=t.renderMode||"html";if(!i)return"";if(s==="html")return r==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Vo(i)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Vo(i)+";"+(e||"")+'"></span>';var a=t.markerId||"markerX";return{renderMode:s,content:"{"+a+"|}  ",style:r==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function vm(n,e){return e=e||"transparent",ri(n)?n:hi(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function fH(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var M_=mt,w9e=["left","right","top","bottom","width","height"],qw=[["width","left","right"],["height","top","bottom"]];function j7(n,e,t,i,r){var s=0,a=0;i==null&&(i=1/0),r==null&&(r=1/0);var o=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),d=e.childAt(c+1),f=d&&d.getBoundingRect(),h,p;if(n==="horizontal"){var m=u.width+(f?-f.x+u.x:0);h=s+m,h>i||l.newline?(s=0,h=m,a+=o+t,o=u.height):o=Math.max(o,u.height)}else{var v=u.height+(f?-f.y+u.y:0);p=a+v,p>r||l.newline?(s+=o+t,a=0,p=v,o=u.width):o=Math.max(o,u.width)}l.newline||(l.x=s,l.y=a,l.markRedraw(),n==="horizontal"?s=h+t:a=p+t)})}var Cb=j7;Ns(j7,"vertical");Ns(j7,"horizontal");function D1(n,e,t){t=iT(t||0);var i=e.width,r=e.height,s=cs(n.left,i),a=cs(n.top,r),o=cs(n.right,i),l=cs(n.bottom,r),c=cs(n.width,i),u=cs(n.height,r),d=t[2]+t[0],f=t[1]+t[3],h=n.aspect;switch(isNaN(c)&&(c=i-o-f-s),isNaN(u)&&(u=r-l-d-a),h!=null&&(isNaN(c)&&isNaN(u)&&(h>i/r?c=i*.8:u=r*.8),isNaN(c)&&(c=h*u),isNaN(u)&&(u=c/h)),isNaN(s)&&(s=i-o-c-f),isNaN(a)&&(a=r-l-u-d),n.left||n.right){case"center":s=i/2-c/2-t[3];break;case"right":s=i-c-f;break}switch(n.top||n.bottom){case"middle":case"center":a=r/2-u/2-t[0];break;case"bottom":a=r-u-d;break}s=s||0,a=a||0,isNaN(c)&&(c=i-f-s-(o||0)),isNaN(u)&&(u=r-d-a-(l||0));var p=new _r(s+t[3],a+t[0],c,u);return p.margin=t,p}function Ix(n){var e=n.layoutMode||n.constructor.layoutMode;return hi(e)?e:e?{type:e}:null}function R1(n,e,t){var i=t&&t.ignoreSize;!Un(i)&&(i=[i,i]);var r=a(qw[0],0),s=a(qw[1],1);c(qw[0],n,r),c(qw[1],n,s);function a(u,d){var f={},h=0,p={},m=0,v=2;if(M_(u,function(x){p[x]=n[x]}),M_(u,function(x){o(e,x)&&(f[x]=p[x]=e[x]),l(f,x)&&h++,l(p,x)&&m++}),i[d])return l(e,u[1])?p[u[2]]=null:l(e,u[2])&&(p[u[1]]=null),p;if(m===v||!h)return p;if(h>=v)return f;for(var g=0;g<u.length;g++){var y=u[g];if(!o(f,y)&&o(n,y)){f[y]=n[y];break}}return f}function o(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,f){M_(u,function(h){d[h]=f[h]})}}function rT(n){return S9e({},n)}function S9e(n,e){return e&&n&&M_(w9e,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var _9e=Ls(),Dr=function(n){kn(e,n);function e(t,i,r){var s=n.call(this,t,i,r)||this;return s.uid=QM("ec_cpt_model"),s}return e.prototype.init=function(t,i,r){this.mergeDefaultAndTheme(t,r)},e.prototype.mergeDefaultAndTheme=function(t,i){var r=Ix(this),s=r?rT(t):{},a=i.getTheme();Sr(t,a.get(this.mainType)),Sr(t,this.getDefaultOption()),r&&R1(t,s,r)},e.prototype.mergeOption=function(t,i){Sr(this.option,t,!0);var r=Ix(this);r&&R1(this.option,t,r)},e.prototype.optionUpdated=function(t,i){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!qBe(t))return t.defaultOption;var i=_9e(this);if(!i.defaultOption){for(var r=[],s=t;s;){var a=s.prototype.defaultOption;a&&r.push(a),s=s.superClass}for(var o={},l=r.length-1;l>=0;l--)o=Sr(o,r[l],!0);i.defaultOption=o}return i.defaultOption},e.prototype.getReferringComponents=function(t,i){var r=t+"Index",s=t+"Id";return RA(this.ecModel,t,{index:this.get(r,!0),id:this.get(s,!0)},i)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(xs);qte(Dr,xs);UM(Dr);c9e(Dr);u9e(Dr,C9e);function C9e(n){var e=[];return mt(Dr.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=fi(e,function(t){return Uu(t).main}),n!=="dataset"&&Nr(e,"dataset")<=0&&e.unshift("dataset"),e}var Vne="";typeof navigator<"u"&&(Vne=navigator.platform||"");var av="rgba(0, 0, 0, 0.2)";const M9e={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:av,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:av,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:av,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:av,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:av,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:av,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Vne.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Hne=Vi(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),xc="original",nl="arrayRows",hu="objectRows",cd="keyedColumns",Wh="typedArray",Gne="unknown",sf="column",my="row",Aa={Must:1,Might:2,Not:3},Wne=Ls();function T9e(n){Wne(n).datasetMap=Vi()}function E9e(n,e,t){var i={},r=$7(e);if(!r||!n)return i;var s=[],a=[],o=e.ecModel,l=Wne(o).datasetMap,c=r.uid+"_"+t.seriesLayoutBy,u,d;n=n.slice(),mt(n,function(m,v){var g=hi(m)?m:n[v]={name:m};g.type==="ordinal"&&u==null&&(u=v,d=p(g)),i[g.name]=[]});var f=l.get(c)||l.set(c,{categoryWayDim:d,valueWayDim:0});mt(n,function(m,v){var g=m.name,y=p(m);if(u==null){var x=f.valueWayDim;h(i[g],x,y),h(a,x,y),f.valueWayDim+=y}else if(u===v)h(i[g],0,y),h(s,0,y);else{var x=f.categoryWayDim;h(i[g],x,y),h(a,x,y),f.categoryWayDim+=y}});function h(m,v,g){for(var y=0;y<g;y++)m.push(v+y)}function p(m){var v=m.dimsDef;return v?v.length:1}return s.length&&(i.itemName=s),a.length&&(i.seriesName=a),i}function I9e(n,e,t){var i={},r=$7(n);if(!r)return i;var s=e.sourceFormat,a=e.dimensionsDefine,o;(s===hu||s===cd)&&mt(a,function(u,d){(hi(u)?u.name:u)==="name"&&(o=d)});var l=function(){for(var u={},d={},f=[],h=0,p=Math.min(5,t);h<p;h++){var m=Kne(e.data,s,e.seriesLayoutBy,a,e.startIndex,h);f.push(m);var v=m===Aa.Not;if(v&&u.v==null&&h!==o&&(u.v=h),(u.n==null||u.n===u.v||!v&&f[u.n]===Aa.Not)&&(u.n=h),g(u)&&f[u.n]!==Aa.Not)return u;v||(m===Aa.Might&&d.v==null&&h!==o&&(d.v=h),(d.n==null||d.n===d.v)&&(d.n=h))}function g(y){return y.v!=null&&y.n!=null}return g(u)?u:g(d)?d:null}();if(l){i.value=[l.v];var c=o??l.n;i.itemName=[c],i.seriesName=[c]}return i}function $7(n){var e=n.get("data",!0);if(!e)return RA(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},qc).models[0]}function D9e(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:RA(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},qc).models}function qne(n,e){return Kne(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function Kne(n,e,t,i,r,s){var a,o=5;if(tl(n))return Aa.Not;var l,c;if(i){var u=i[s];hi(u)?(l=u.name,c=u.type):ri(u)&&(l=u)}if(c!=null)return c==="ordinal"?Aa.Must:Aa.Not;if(e===nl){var d=n;if(t===my){for(var f=d[s],h=0;h<(f||[]).length&&h<o;h++)if((a=b(f[r+h]))!=null)return a}else for(var h=0;h<d.length&&h<o;h++){var p=d[r+h];if(p&&(a=b(p[s]))!=null)return a}}else if(e===hu){var m=n;if(!l)return Aa.Not;for(var h=0;h<m.length&&h<o;h++){var v=m[h];if(v&&(a=b(v[l]))!=null)return a}}else if(e===cd){var g=n;if(!l)return Aa.Not;var f=g[l];if(!f||tl(f))return Aa.Not;for(var h=0;h<f.length&&h<o;h++)if((a=b(f[h]))!=null)return a}else if(e===xc)for(var y=n,h=0;h<y.length&&h<o;h++){var v=y[h],x=DA(v);if(!Un(x))return Aa.Not;if((a=b(x[s]))!=null)return a}function b(A){var S=ri(A);if(A!=null&&Number.isFinite(Number(A))&&A!=="")return S?Aa.Might:Aa.Not;if(S&&A!=="-")return Aa.Must}return Aa.Not}var R9e=Vi();function P9e(n,e,t){var i=R9e.get(e);if(!i)return t;var r=i(n);return r?t.concat(r):t}var hH=Ls();Ls();var Q7=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,i){var r=Ao(this.get("color",!0)),s=this.get("colorLayer",!0);return k9e(this,hH,r,s,e,t,i)},n.prototype.clearColorPalette=function(){F9e(this,hH)},n}();function L9e(n,e){for(var t=n.length,i=0;i<t;i++)if(n[i].length>e)return n[i];return n[t-1]}function k9e(n,e,t,i,r,s,a){s=s||n;var o=e(s),l=o.paletteIdx||0,c=o.paletteNameMap=o.paletteNameMap||{};if(c.hasOwnProperty(r))return c[r];var u=a==null||!i?t:L9e(i,a);if(u=u||t,!(!u||!u.length)){var d=u[l];return r&&(c[r]=d),o.paletteIdx=(l+1)%u.length,d}}function F9e(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var Kw,r2,pH,mH="\0_ec_inner",B9e=1,Z7=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,i,r,s,a,o){s=s||{},this.option=null,this._theme=new xs(s),this._locale=new xs(a),this._optionManager=o},e.prototype.setOption=function(t,i,r){var s=yH(i);this._optionManager.setOption(t,r,s),this._resetOption(null,s)},e.prototype.resetOption=function(t,i){return this._resetOption(t,yH(i))},e.prototype._resetOption=function(t,i){var r=!1,s=this._optionManager;if(!t||t==="recreate"){var a=s.mountOption(t==="recreate");!this.option||t==="recreate"?pH(this,a):(this.restoreData(),this._mergeOption(a,i)),r=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=s.getTimelineOption(this);o&&(r=!0,this._mergeOption(o,i))}if(!t||t==="recreate"||t==="media"){var l=s.getMediaOption(this);l.length&&mt(l,function(c){r=!0,this._mergeOption(c,i)},this)}return r},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,i){var r=this.option,s=this._componentsMap,a=this._componentsCount,o=[],l=Vi(),c=i&&i.replaceMergeMainTypeMap;T9e(this),mt(t,function(d,f){d!=null&&(Dr.hasClass(f)?f&&(o.push(f),l.set(f,!0)):r[f]=r[f]==null?or(d):Sr(r[f],d,!0))}),c&&c.each(function(d,f){Dr.hasClass(f)&&!l.get(f)&&(o.push(f),l.set(f,!0))}),Dr.topologicalTravel(o,Dr.getAllClassMainTypes(),u,this);function u(d){var f=P9e(this,d,Ao(t[d])),h=s.get(d),p=h?c&&c.get(d)?"replaceMerge":"normalMerge":"replaceAll",m=DBe(h,f,p);NBe(m,d,Dr),r[d]=null,s.set(d,null),a.set(d,0);var v=[],g=[],y=0,x;mt(m,function(b,A){var S=b.existing,C=b.newOption;if(!C)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var _=d==="series",M=Dr.getClass(d,b.keyInfo.subType,!_);if(!M)return;if(d==="tooltip"){if(x)return;x=!0}if(S&&S.constructor===M)S.name=b.keyInfo.name,S.mergeOption(C,this),S.optionUpdated(C,!1);else{var T=pn({componentIndex:A},b.keyInfo);S=new M(C,this,this,T),pn(S,T),b.brandNew&&(S.__requireNewView=!0),S.init(C,this,this),S.optionUpdated(null,!0)}}S?(v.push(S.option),g.push(S),y++):(v.push(void 0),g.push(void 0))},this),r[d]=v,s.set(d,g),a.set(d,y),d==="series"&&Kw(this)}this._seriesIndices||Kw(this)},e.prototype.getOption=function(){var t=or(this.option);return mt(t,function(i,r){if(Dr.hasClass(r)){for(var s=Ao(i),a=s.length,o=!1,l=a-1;l>=0;l--)s[l]&&!Cx(s[l])?o=!0:(s[l]=null,!o&&a--);s.length=a,t[r]=s}}),delete t[mH],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,i){var r=this._componentsMap.get(t);if(r){var s=r[i||0];if(s)return s;if(i==null){for(var a=0;a<r.length;a++)if(r[a])return r[a]}}},e.prototype.queryComponents=function(t){var i=t.mainType;if(!i)return[];var r=t.index,s=t.id,a=t.name,o=this._componentsMap.get(i);if(!o||!o.length)return[];var l;return r!=null?(l=[],mt(Ao(r),function(c){o[c]&&l.push(o[c])})):s!=null?l=vH("id",s,o):a!=null?l=vH("name",a,o):l=_a(o,function(c){return!!c}),gH(l,t)},e.prototype.findComponents=function(t){var i=t.query,r=t.mainType,s=o(i),a=s?this.queryComponents(s):_a(this._componentsMap.get(r),function(c){return!!c});return l(gH(a,t));function o(c){var u=r+"Index",d=r+"Id",f=r+"Name";return c&&(c[u]!=null||c[d]!=null||c[f]!=null)?{mainType:r,index:c[u],id:c[d],name:c[f]}:null}function l(c){return t.filter?_a(c,t.filter):c}},e.prototype.eachComponent=function(t,i,r){var s=this._componentsMap;if(Ci(t)){var a=i,o=t;s.each(function(d,f){for(var h=0;d&&h<d.length;h++){var p=d[h];p&&o.call(a,f,p,p.componentIndex)}})}else for(var l=ri(t)?s.get(t):hi(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&i.call(r,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var i=Ku(t,null);return _a(this._componentsMap.get("series"),function(r){return!!r&&i!=null&&r.name===i})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return _a(this._componentsMap.get("series"),function(i){return!!i&&i.subType===t})},e.prototype.getSeries=function(){return _a(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,i){r2(this),mt(this._seriesIndices,function(r){var s=this._componentsMap.get("series")[r];t.call(i,s,r)},this)},e.prototype.eachRawSeries=function(t,i){mt(this._componentsMap.get("series"),function(r){r&&t.call(i,r,r.componentIndex)})},e.prototype.eachSeriesByType=function(t,i,r){r2(this),mt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];a.subType===t&&i.call(r,a,s)},this)},e.prototype.eachRawSeriesByType=function(t,i,r){return mt(this.getSeriesByType(t),i,r)},e.prototype.isSeriesFiltered=function(t){return r2(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,i){r2(this);var r=[];mt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];t.call(i,a,s)&&r.push(s)},this),this._seriesIndices=r,this._seriesIndicesMap=Vi(r)},e.prototype.restoreData=function(t){Kw(this);var i=this._componentsMap,r=[];i.each(function(s,a){Dr.hasClass(a)&&r.push(a)}),Dr.topologicalTravel(r,Dr.getAllClassMainTypes(),function(s){mt(i.get(s),function(a){a&&(s!=="series"||!N9e(a,t))&&a.restoreData()})})},e.internalField=function(){Kw=function(t){var i=t._seriesIndices=[];mt(t._componentsMap.get("series"),function(r){r&&i.push(r.componentIndex)}),t._seriesIndicesMap=Vi(i)},r2=function(t){},pH=function(t,i){t.option={},t.option[mH]=B9e,t._componentsMap=Vi({series:[]}),t._componentsCount=Vi();var r=i.aria;hi(r)&&r.enabled==null&&(r.enabled=!0),O9e(i,t._theme.option),Sr(i,M9e,!1),t._mergeOption(i,null)}}(),e}(xs);function N9e(n,e){if(e){var t=e.seriesIndex,i=e.seriesId,r=e.seriesName;return t!=null&&n.componentIndex!==t||i!=null&&n.id!==i||r!=null&&n.name!==r}}function O9e(n,e){var t=n.color&&!n.colorLayer;mt(e,function(i,r){r==="colorLayer"&&t||Dr.hasClass(r)||(typeof i=="object"?n[r]=n[r]?Sr(n[r],i,!1):or(i):n[r]==null&&(n[r]=i))})}function vH(n,e,t){if(Un(e)){var i=Vi();return mt(e,function(s){if(s!=null){var a=Ku(s,null);a!=null&&i.set(s,!0)}}),_a(t,function(s){return s&&i.get(s[n])})}else{var r=Ku(e,null);return _a(t,function(s){return s&&r!=null&&s[n]===r})}}function gH(n,e){return e.hasOwnProperty("subType")?_a(n,function(t){return t&&t.subType===e.subType}):n}function yH(n){var e=Vi();return n&&mt(Ao(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}od(Z7,Q7);var U9e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Yne=function(){function n(e){mt(U9e,function(t){this[t]=Xr(e[t],e)},this)}return n}(),zE={},J7=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var i=[];mt(zE,function(r,s){var a=r.create(e,t);i=i.concat(a||[])}),this._coordinateSystems=i},n.prototype.update=function(e,t){mt(this._coordinateSystems,function(i){i.update&&i.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){zE[e]=t},n.get=function(e){return zE[e]},n}(),z9e=/^(min|max)?(.+)$/,V9e=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,i){e&&(mt(Ao(e.series),function(a){a&&a.data&&tl(a.data)&&k8(a.data)}),mt(Ao(e.dataset),function(a){a&&a.source&&tl(a.source)&&k8(a.source)})),e=or(e);var r=this._optionBackup,s=H9e(e,t,!r);this._newBaseOption=s.baseOption,r?(s.timelineOptions.length&&(r.timelineOptions=s.timelineOptions),s.mediaList.length&&(r.mediaList=s.mediaList),s.mediaDefault&&(r.mediaDefault=s.mediaDefault)):this._optionBackup=s},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],or(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,i=this._timelineOptions;if(i.length){var r=e.getComponent("timeline");r&&(t=or(i[r.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),i=this._api.getHeight(),r=this._mediaList,s=this._mediaDefault,a=[],o=[];if(!r.length&&!s)return o;for(var l=0,c=r.length;l<c;l++)G9e(r[l].query,t,i)&&a.push(l);return!a.length&&s&&(a=[-1]),a.length&&!q9e(a,this._currentMediaIndices)&&(o=fi(a,function(u){return or(u===-1?s.option:r[u].option)})),this._currentMediaIndices=a,o},n}();function H9e(n,e,t){var i=[],r,s,a=n.baseOption,o=n.timeline,l=n.options,c=n.media,u=!!n.media,d=!!(l||o||a&&a.timeline);a?(s=a,s.timeline||(s.timeline=o)):((d||u)&&(n.options=n.media=null),s=n),u&&Un(c)&&mt(c,function(h){h&&h.option&&(h.query?i.push(h):r||(r=h))}),f(s),mt(l,function(h){return f(h)}),mt(i,function(h){return f(h.option)});function f(h){mt(e,function(p){p(h,t)})}return{baseOption:s,timelineOptions:l||[],mediaDefault:r,mediaList:i}}function G9e(n,e,t){var i={width:e,height:t,aspectratio:e/t},r=!0;return mt(n,function(s,a){var o=a.match(z9e);if(!(!o||!o[1]||!o[2])){var l=o[1],c=o[2].toLowerCase();W9e(i[c],s,l)||(r=!1)}}),r}function W9e(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function q9e(n,e){return n.join(",")===e.join(",")}var _c=mt,Dx=hi,bH=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function VE(n){var e=n&&n.itemStyle;if(e)for(var t=0,i=bH.length;t<i;t++){var r=bH[t],s=e.normal,a=e.emphasis;s&&s[r]&&(n[r]=n[r]||{},n[r].normal?Sr(n[r].normal,s[r]):n[r].normal=s[r],s[r]=null),a&&a[r]&&(n[r]=n[r]||{},n[r].emphasis?Sr(n[r].emphasis,a[r]):n[r].emphasis=a[r],a[r]=null)}}function qa(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var i=n[e].normal,r=n[e].emphasis;i&&(t?(n[e].normal=n[e].emphasis=null,Cr(n[e],i)):n[e]=i),r&&(n.emphasis=n.emphasis||{},n.emphasis[e]=r,r.focus&&(n.emphasis.focus=r.focus),r.blurScope&&(n.emphasis.blurScope=r.blurScope))}}function K2(n){qa(n,"itemStyle"),qa(n,"lineStyle"),qa(n,"areaStyle"),qa(n,"label"),qa(n,"labelLine"),qa(n,"upperLabel"),qa(n,"edgeLabel")}function Ms(n,e){var t=Dx(n)&&n[e],i=Dx(t)&&t.textStyle;if(i)for(var r=0,s=AV.length;r<s;r++){var a=AV[r];i.hasOwnProperty(a)&&(t[a]=i[a])}}function Gl(n){n&&(K2(n),Ms(n,"label"),n.emphasis&&Ms(n.emphasis,"label"))}function K9e(n){if(Dx(n)){VE(n),K2(n),Ms(n,"label"),Ms(n,"upperLabel"),Ms(n,"edgeLabel"),n.emphasis&&(Ms(n.emphasis,"label"),Ms(n.emphasis,"upperLabel"),Ms(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(VE(e),Gl(e));var t=n.markLine;t&&(VE(t),Gl(t));var i=n.markArea;i&&Gl(i);var r=n.data;if(n.type==="graph"){r=r||n.nodes;var s=n.links||n.edges;if(s&&!tl(s))for(var a=0;a<s.length;a++)Gl(s[a]);mt(n.categories,function(c){K2(c)})}if(r&&!tl(r))for(var a=0;a<r.length;a++)Gl(r[a]);if(e=n.markPoint,e&&e.data)for(var o=e.data,a=0;a<o.length;a++)Gl(o[a]);if(t=n.markLine,t&&t.data)for(var l=t.data,a=0;a<l.length;a++)Un(l[a])?(Gl(l[a][0]),Gl(l[a][1])):Gl(l[a]);n.type==="gauge"?(Ms(n,"axisLabel"),Ms(n,"title"),Ms(n,"detail")):n.type==="treemap"?(qa(n.breadcrumb,"itemStyle"),mt(n.levels,function(c){K2(c)})):n.type==="tree"&&K2(n.leaves)}}function xd(n){return Un(n)?n:n?[n]:[]}function xH(n){return(Un(n)?n[0]:n)||{}}function Y9e(n,e){_c(xd(n.series),function(i){Dx(i)&&K9e(i)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),_c(t,function(i){_c(xd(n[i]),function(r){r&&(Ms(r,"axisLabel"),Ms(r.axisPointer,"label"))})}),_c(xd(n.parallel),function(i){var r=i&&i.parallelAxisDefault;Ms(r,"axisLabel"),Ms(r&&r.axisPointer,"label")}),_c(xd(n.calendar),function(i){qa(i,"itemStyle"),Ms(i,"dayLabel"),Ms(i,"monthLabel"),Ms(i,"yearLabel")}),_c(xd(n.radar),function(i){Ms(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),_c(xd(n.geo),function(i){Dx(i)&&(Gl(i),_c(xd(i.regions),function(r){Gl(r)}))}),_c(xd(n.timeline),function(i){Gl(i),qa(i,"label"),qa(i,"itemStyle"),qa(i,"controlStyle",!0);var r=i.data;Un(r)&&mt(r,function(s){hi(s)&&(qa(s,"label"),qa(s,"itemStyle"))})}),_c(xd(n.toolbox),function(i){qa(i,"iconStyle"),_c(i.feature,function(r){qa(r,"iconStyle")})}),Ms(xH(n.axisPointer),"label"),Ms(xH(n.tooltip).axisPointer,"label")}function X9e(n,e){for(var t=e.split(","),i=n,r=0;r<t.length&&(i=i&&i[t[r]],i!=null);r++);return i}function j9e(n,e,t,i){for(var r=e.split(","),s=n,a,o=0;o<r.length-1;o++)a=r[o],s[a]==null&&(s[a]={}),s=s[a];s[r[o]]==null&&(s[r[o]]=t)}function AH(n){n&&mt($9e,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var $9e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Q9e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],HE=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function s2(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<HE.length;t++){var i=HE[t][1],r=HE[t][0];e[i]!=null&&(e[r]=e[i])}}function wH(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function SH(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function Z9e(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function Xne(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&Xne(n[t].children,e)}function jne(n,e){Y9e(n,e),n.series=Ao(n.series),mt(n.series,function(t){if(hi(t)){var i=t.type;if(i==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(i==="pie"||i==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),wH(t.label);var r=t.data;if(r&&!tl(r))for(var s=0;s<r.length;s++)wH(r[s]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(i==="gauge"){var a=X9e(t,"pointer.color");a!=null&&j9e(t,"itemStyle.color",a)}else if(i==="bar"){s2(t),s2(t.backgroundStyle),s2(t.emphasis);var r=t.data;if(r&&!tl(r))for(var s=0;s<r.length;s++)typeof r[s]=="object"&&(s2(r[s]),s2(r[s]&&r[s].emphasis))}else if(i==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),SH(t),Xne(t.data,SH)}else i==="graph"||i==="sankey"?Z9e(t):i==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Cr(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),AH(t)}}),n.dataRange&&(n.visualMap=n.dataRange),mt(Q9e,function(t){var i=n[t];i&&(Un(i)||(i=[i]),mt(i,function(r){AH(r)}))})}function J9e(n){var e=Vi();n.eachSeries(function(t){var i=t.get("stack");if(i){var r=e.get(i)||e.set(i,[]),s=t.getData(),a={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:t};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;r.length&&s.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),e.each(eUe)}function eUe(n){mt(n,function(e,t){var i=[],r=[NaN,NaN],s=[e.stackResultDimension,e.stackedOverDimension],a=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(s,function(c,u,d){var f=a.get(e.stackedDimension,d);if(isNaN(f))return r;var h,p;o?p=a.getRawIndex(d):h=a.get(e.stackedByDimension,d);for(var m=NaN,v=t-1;v>=0;v--){var g=n[v];if(o||(p=g.data.rawIndexOf(g.stackedByDimension,h)),p>=0){var y=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&f>=0&&y>0||l==="samesign"&&f<=0&&y<0){f=_Be(f,y),m=y;break}}}return i[0]=f,i[1]=m,i})})}var sT=function(){function n(e){this.data=e.data||(e.sourceFormat===cd?{}:[]),this.sourceFormat=e.sourceFormat||Gne,this.seriesLayoutBy=e.seriesLayoutBy||sf,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var i=0;i<t.length;i++){var r=t[i];r.type==null&&qne(this,i)===Aa.Must&&(r.type="ordinal")}}return n}();function eF(n){return n instanceof sT}function dR(n,e,t){t=t||Qne(n);var i=e.seriesLayoutBy,r=nUe(n,t,i,e.sourceHeader,e.dimensions),s=new sT({data:n,sourceFormat:t,seriesLayoutBy:i,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:or(e)});return s}function $ne(n){return new sT({data:n,sourceFormat:tl(n)?Wh:xc})}function tUe(n){return new sT({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:or(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function Qne(n){var e=Gne;if(tl(n))e=Wh;else if(Un(n)){n.length===0&&(e=nl);for(var t=0,i=n.length;t<i;t++){var r=n[t];if(r!=null){if(Un(r)||tl(r)){e=nl;break}else if(hi(r)){e=hu;break}}}}else if(hi(n)){for(var s in n)if(hm(n,s)&&el(n[s])){e=cd;break}}return e}function nUe(n,e,t,i,r){var s,a;if(!n)return{dimensionsDefine:_H(r),startIndex:a,dimensionsDetectedCount:s};if(e===nl){var o=n;i==="auto"||i==null?CH(function(c){c!=null&&c!=="-"&&(ri(c)?a==null&&(a=1):a=0)},t,o,10):a=jr(i)?i:i?1:0,!r&&a===1&&(r=[],CH(function(c,u){r[u]=c!=null?c+"":""},t,o,1/0)),s=r?r.length:t===my?o.length:o[0]?o[0].length:null}else if(e===hu)r||(r=iUe(n));else if(e===cd)r||(r=[],mt(n,function(c,u){r.push(u)}));else if(e===xc){var l=DA(n[0]);s=Un(l)&&l.length||1}return{startIndex:a,dimensionsDefine:_H(r),dimensionsDetectedCount:s}}function iUe(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return hs(t)}function _H(n){if(n){var e=Vi();return fi(n,function(t,i){t=hi(t)?t:{name:t};var r={name:t.name,displayName:t.displayName,type:t.type};if(r.name==null)return r;r.name+="",r.displayName==null&&(r.displayName=r.name);var s=e.get(r.name);return s?r.name+="-"+s.count++:e.set(r.name,{count:1}),r})}}function CH(n,e,t,i){if(e===my)for(var r=0;r<t.length&&r<i;r++)n(t[r]?t[r][0]:null,r);else for(var s=t[0]||[],r=0;r<s.length&&r<i;r++)n(s[r],r)}function Zne(n){var e=n.sourceFormat;return e===hu||e===cd}var Jp,e0,t0,MH,TH,Jne=function(){function n(e,t){var i=eF(e)?e:$ne(e);this._source=i;var r=this._data=i.data;i.sourceFormat===Wh&&(this._offset=0,this._dimSize=t,this._data=r),TH(this,r,i)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;TH=function(a,o,l){var c=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,f=l.dimensionsDefine,h=MH[tF(c,u)];if(pn(a,h),c===Wh)a.getItem=t,a.count=r,a.fillStorage=i;else{var p=eie(c,u);a.getItem=Xr(p,null,o,d,f);var m=tie(c,u);a.count=Xr(m,null,o,d,f)}};var t=function(a,o){a=a-this._offset,o=o||[];for(var l=this._data,c=this._dimSize,u=c*a,d=0;d<c;d++)o[d]=l[u+d];return o},i=function(a,o,l,c){for(var u=this._data,d=this._dimSize,f=0;f<d;f++){for(var h=c[f],p=h[0]==null?1/0:h[0],m=h[1]==null?-1/0:h[1],v=o-a,g=l[f],y=0;y<v;y++){var x=u[y*d+f];g[a+y]=x,x<p&&(p=x),x>m&&(m=x)}h[0]=p,h[1]=m}},r=function(){return this._data?this._data.length/this._dimSize:0};MH=(e={},e[nl+"_"+sf]={pure:!0,appendData:s},e[nl+"_"+my]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[hu]={pure:!0,appendData:s},e[cd]={pure:!0,appendData:function(a){var o=this._data;mt(a,function(l,c){for(var u=o[c]||(o[c]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},e[xc]={appendData:s},e[Wh]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},e);function s(a){for(var o=0;o<a.length;o++)this._data.push(a[o])}}(),n}(),EH=function(n,e,t,i){return n[i]},rUe=(Jp={},Jp[nl+"_"+sf]=function(n,e,t,i){return n[i+e]},Jp[nl+"_"+my]=function(n,e,t,i,r){i+=e;for(var s=r||[],a=n,o=0;o<a.length;o++){var l=a[o];s[o]=l?l[i]:null}return s},Jp[hu]=EH,Jp[cd]=function(n,e,t,i,r){for(var s=r||[],a=0;a<t.length;a++){var o=t[a].name,l=n[o];s[a]=l?l[i]:null}return s},Jp[xc]=EH,Jp);function eie(n,e){var t=rUe[tF(n,e)];return t}var IH=function(n,e,t){return n.length},sUe=(e0={},e0[nl+"_"+sf]=function(n,e,t){return Math.max(0,n.length-e)},e0[nl+"_"+my]=function(n,e,t){var i=n[0];return i?Math.max(0,i.length-e):0},e0[hu]=IH,e0[cd]=function(n,e,t){var i=t[0].name,r=n[i];return r?r.length:0},e0[xc]=IH,e0);function tie(n,e){var t=sUe[tF(n,e)];return t}var GE=function(n,e,t){return n[e]},aUe=(t0={},t0[nl]=GE,t0[hu]=function(n,e,t){return n[t]},t0[cd]=GE,t0[xc]=function(n,e,t){var i=DA(n);return i instanceof Array?i[e]:i},t0[Wh]=GE,t0);function nie(n){var e=aUe[n];return e}function tF(n,e){return n===nl?n+"_"+e:n}function P1(n,e,t){if(n){var i=n.getRawDataItem(e);if(i!=null){var r=n.getStore(),s=r.getSource().sourceFormat;if(t!=null){var a=n.getDimensionIndex(t),o=r.getDimensionProperty(a);return nie(s)(i,a,o)}else{var l=i;return s===xc&&(l=DA(i)),l}}}}var oUe=/\{@(.+?)\}/g,lUe=function(){function n(){}return n.prototype.getDataParams=function(e,t){var i=this.getData(t),r=this.getRawValue(e,t),s=i.getRawIndex(e),a=i.getName(e),o=i.getRawDataItem(e),l=i.getItemVisual(e,"style"),c=l&&l[i.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,f=d==="series",h=i.userOutput&&i.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:a,dataIndex:s,data:o,dataType:t,value:r,color:c,borderColor:u,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,i,r,s,a){t=t||"normal";var o=this.getData(i),l=this.getDataParams(e,i);if(a&&(l.value=a.interpolatedValue),r!=null&&Un(l.value)&&(l.value=l.value[r]),!s){var c=o.getItemModel(e);s=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(Ci(s))return l.status=t,l.dimensionIndex=r,s(l);if(ri(s)){var u=zne(s,l);return u.replace(oUe,function(d,f){var h=f.length,p=f;p.charAt(0)==="["&&p.charAt(h-1)==="]"&&(p=+p.slice(1,h-1));var m=P1(o,e,p);if(a&&Un(a.interpolatedValue)){var v=o.getDimensionIndex(p);v>=0&&(m=a.interpolatedValue[v])}return m!=null?m+"":""})}},n.prototype.getRawValue=function(e,t){return P1(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,i){},n}();function DH(n){var e,t;return hi(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function Mb(n){return new cUe(n)}var cUe=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,i=e&&e.skip;if(this._dirty&&t){var r=this.context;r.data=r.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!i&&(s=this._plan(this.context));var a=u(this._modBy),o=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(a!==l||o!==c)&&(s="reset");function u(y){return!(y>=1)&&(y=1),y}var d;(this._dirty||s==="reset")&&(this._dirty=!1,d=this._doReset(i)),this._modBy=l,this._modDataCount=c;var f=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,p=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!i&&(d||h<p)){var m=this._progress;if(Un(m))for(var v=0;v<m.length;v++)this._doProgress(m[v],h,p,l,c);else this._doProgress(m,h,p,l,c)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,i,r,s){RH.reset(t,i,r,s),this._callingProgress=e,this._callingProgress({start:t,end:i,count:i-t,next:RH.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,i;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(i=t.forceFirstProgress,t=t.progress),Un(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),i},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),RH=function(){var n,e,t,i,r,s={reset:function(l,c,u,d){e=l,n=c,t=u,i=d,r=Math.ceil(i/t),s.next=t>1&&i>0?o:a}};return s;function a(){return e<n?e++:null}function o(){var l=e%r*t+Math.ceil(e/r),c=e>=n?null:l<i?l:e;return e++,c}}();function T_(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!jr(n)&&n!=null&&n!=="-"&&(n=+vf(n)),n==null||n===""?NaN:Number(n))}Vi({number:function(n){return parseFloat(n)},time:function(n){return+vf(n)},trim:function(n){return ri(n)?Ou(n):n}});var uUe=function(){function n(e,t){var i=e==="desc";this._resultLT=i?1:-1,t==null&&(t=i?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var i=jr(e)?e:WC(e),r=jr(t)?t:WC(t),s=isNaN(i),a=isNaN(r);if(s&&(i=this._incomparable),a&&(r=this._incomparable),s&&a){var o=ri(e),l=ri(t);o&&(i=l?e:0),l&&(r=o?t:0)}return i<r?this._resultLT:i>r?-this._resultLT:0},n}(),dUe=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return T_(e,t)},n}();function fUe(n,e){var t=new dUe,i=n.data,r=t.sourceFormat=n.sourceFormat,s=n.startIndex,a="";n.seriesLayoutBy!==sf&&Go(a);var o=[],l={},c=n.dimensionsDefine;if(c)mt(c,function(m,v){var g=m.name,y={index:v,name:g,displayName:m.displayName};if(o.push(y),g!=null){var x="";hm(l,g)&&Go(x),l[g]=y}});else for(var u=0;u<n.dimensionsDetectedCount;u++)o.push({index:u});var d=eie(r,sf);e.__isBuiltIn&&(t.getRawDataItem=function(m){return d(i,s,o,m)},t.getRawData=Xr(hUe,null,n)),t.cloneRawData=Xr(pUe,null,n);var f=tie(r,sf);t.count=Xr(f,null,i,s,o);var h=nie(r);t.retrieveValue=function(m,v){var g=d(i,s,o,m);return p(g,v)};var p=t.retrieveValueFromItem=function(m,v){if(m!=null){var g=o[v];if(g)return h(m,v,g.name)}};return t.getDimensionInfo=Xr(mUe,null,o,l),t.cloneAllDimensionInfo=Xr(vUe,null,o),t}function hUe(n){var e=n.sourceFormat;if(!nF(e)){var t="";Go(t)}return n.data}function pUe(n){var e=n.sourceFormat,t=n.data;if(!nF(e)){var i="";Go(i)}if(e===nl){for(var r=[],s=0,a=t.length;s<a;s++)r.push(t[s].slice());return r}else if(e===hu){for(var r=[],s=0,a=t.length;s<a;s++)r.push(pn({},t[s]));return r}}function mUe(n,e,t){if(t!=null){if(jr(t)||!isNaN(t)&&!hm(e,t))return n[t];if(hm(e,t))return e[t]}}function vUe(n){return or(n)}var iie=Vi();function gUe(n){n=or(n);var e=n.type,t="";e||Go(t);var i=e.split(":");i.length!==2&&Go(t);var r=!1;i[0]==="echarts"&&(e=i[1],r=!0),n.__isBuiltIn=r,iie.set(e,n)}function yUe(n,e,t){var i=Ao(n),r=i.length,s="";r||Go(s);for(var a=0,o=r;a<o;a++){var l=i[a];e=bUe(l,e),a!==o-1&&(e.length=Math.max(e.length,1))}return e}function bUe(n,e,t,i){var r="";e.length||Go(r),hi(n)||Go(r);var s=n.type,a=iie.get(s);a||Go(r);var o=fi(e,function(c){return fUe(c,a)}),l=Ao(a.transform({upstream:o[0],upstreamList:o,config:or(n.config)}));return fi(l,function(c,u){var d="";hi(c)||Go(d),c.data||Go(d);var f=Qne(c.data);nF(f)||Go(d);var h,p=e[0];if(p&&u===0&&!c.dimensions){var m=p.startIndex;m&&(c.data=p.data.slice(0,m).concat(c.data)),h={seriesLayoutBy:sf,sourceHeader:m,dimensions:p.metaRawOption.dimensions}}else h={seriesLayoutBy:sf,sourceHeader:0,dimensions:c.dimensions};return dR(c.data,h,null)})}function nF(n){return n===nl||n===hu}var aT="undefined",xUe=typeof Uint32Array===aT?Array:Uint32Array,AUe=typeof Uint16Array===aT?Array:Uint16Array,rie=typeof Int32Array===aT?Array:Int32Array,PH=typeof Float64Array===aT?Array:Float64Array,sie={float:PH,int:rie,ordinal:Array,number:Array,time:PH},WE;function ov(n){return n>65535?xUe:AUe}function lv(){return[1/0,-1/0]}function wUe(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function LH(n,e,t,i,r){var s=sie[t||"float"];if(r){var a=n[e],o=a&&a.length;if(o!==i){for(var l=new s(i),c=0;c<o;c++)l[c]=a[c];n[e]=l}}else n[e]=new s(i)}var fR=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Vi()}return n.prototype.initData=function(e,t,i){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=e.getSource(),s=this.defaultDimValueGetter=WE[r.sourceFormat];this._dimValueGetter=i||s,this._rawExtent=[],Zne(r),this._dimensions=fi(t,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var i=this._calcDimNameToIdx,r=this._dimensions,s=i.get(e);if(s!=null){if(r[s].type===t)return s}else s=r.length;return r[s]={type:t},i.set(e,s),this._chunks[s]=new sie[t||"float"](this._rawCount),this._rawExtent[s]=lv(),s},n.prototype.collectOrdinalMeta=function(e,t){var i=this._chunks[e],r=this._dimensions[e],s=this._rawExtent,a=r.ordinalOffset||0,o=i.length;a===0&&(s[e]=lv());for(var l=s[e],c=a;c<o;c++){var u=i[c]=t.parseAndCollect(i[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}r.ordinalMeta=t,r.ordinalOffset=o,r.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],i=t.ordinalMeta;return i},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,i=this.count();t.appendData(e);var r=t.count();return t.persistent||(r+=i),i<r&&this._initDataFromProvider(i,r,!0),[i,r]},n.prototype.appendValues=function(e,t){for(var i=this._chunks,r=this._dimensions,s=r.length,a=this._rawExtent,o=this.count(),l=o+Math.max(e.length,t||0),c=0;c<s;c++){var u=r[c];LH(i,c,u.type,l,!0)}for(var d=[],f=o;f<l;f++)for(var h=f-o,p=0;p<s;p++){var u=r[p],m=WE.arrayRows.call(this,e[h]||d,u.property,h,p);i[p][f]=m;var v=a[p];m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}return this._rawCount=this._count=l,{start:o,end:l}},n.prototype._initDataFromProvider=function(e,t,i){for(var r=this._provider,s=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,c=fi(a,function(y){return y.property}),u=0;u<o;u++){var d=a[u];l[u]||(l[u]=lv()),LH(s,u,d.type,t,i)}if(r.fillStorage)r.fillStorage(e,t,s,l);else for(var f=[],h=e;h<t;h++){f=r.getItem(h,f);for(var p=0;p<o;p++){var m=s[p],v=this._dimValueGetter(f,c[p],h,p);m[h]=v;var g=l[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var i=this._chunks[e];return i?i[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var i=[],r=[];if(t==null){t=e,e=[];for(var s=0;s<this._dimensions.length;s++)r.push(s)}else r=e;for(var s=0,a=r.length;s<a;s++)i.push(this.get(r[s],t));return i},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var i=this._chunks[e];return i?i[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],i=0;if(t)for(var r=0,s=this.count();r<s;r++){var a=this.get(e,r);isNaN(a)||(i+=a)}return i},n.prototype.getMedian=function(e){var t=[];this.each([e],function(s){isNaN(s)||t.push(s)});var i=t.sort(function(s,a){return s-a}),r=this.count();return r===0?0:r%2===1?i[(r-1)/2]:(i[r/2]+i[r/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,i=t[e];if(i!=null&&i<this._count&&i===e)return e;for(var r=0,s=this._count-1;r<=s;){var a=(r+s)/2|0;if(t[a]<e)r=a+1;else if(t[a]>e)s=a-1;else return a}return-1},n.prototype.indicesOfNearest=function(e,t,i){var r=this._chunks,s=r[e],a=[];if(!s)return a;i==null&&(i=1/0);for(var o=1/0,l=-1,c=0,u=0,d=this.count();u<d;u++){var f=this.getRawIndex(u),h=t-s[f],p=Math.abs(h);p<=i&&((p<o||p===o&&h>=0&&l<0)&&(o=p,l=h,c=0),h===l&&(a[c++]=u))}return a.length=c,a},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var i=t.constructor,r=this._count;if(i===Array){e=new i(r);for(var s=0;s<r;s++)e[s]=t[s]}else e=new i(t.buffer,0,r)}else{var i=ov(this._rawCount);e=new i(this.count());for(var s=0;s<e.length;s++)e[s]=s}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var i=this.clone(),r=i.count(),s=ov(i._rawCount),a=new s(r),o=[],l=e.length,c=0,u=e[0],d=i._chunks,f=0;f<r;f++){var h=void 0,p=i.getRawIndex(f);if(l===0)h=t(f);else if(l===1){var m=d[u][p];h=t(m,f)}else{for(var v=0;v<l;v++)o[v]=d[e[v]][p];o[v]=f,h=t.apply(null,o)}h&&(a[c++]=p)}return c<r&&(i._indices=a),i._count=c,i._extent=[],i._updateGetRawIdx(),i},n.prototype.selectRange=function(e){var t=this.clone(),i=t._count;if(!i)return this;var r=hs(e),s=r.length;if(!s)return this;var a=t.count(),o=ov(t._rawCount),l=new o(a),c=0,u=r[0],d=e[u][0],f=e[u][1],h=t._chunks,p=!1;if(!t._indices){var m=0;if(s===1){for(var v=h[r[0]],g=0;g<i;g++){var y=v[g];(y>=d&&y<=f||isNaN(y))&&(l[c++]=m),m++}p=!0}else if(s===2){for(var v=h[r[0]],x=h[r[1]],b=e[r[1]][0],A=e[r[1]][1],g=0;g<i;g++){var y=v[g],S=x[g];(y>=d&&y<=f||isNaN(y))&&(S>=b&&S<=A||isNaN(S))&&(l[c++]=m),m++}p=!0}}if(!p)if(s===1)for(var g=0;g<a;g++){var C=t.getRawIndex(g),y=h[r[0]][C];(y>=d&&y<=f||isNaN(y))&&(l[c++]=C)}else for(var g=0;g<a;g++){for(var _=!0,C=t.getRawIndex(g),M=0;M<s;M++){var T=r[M],y=h[T][C];(y<e[T][0]||y>e[T][1])&&(_=!1)}_&&(l[c++]=t.getRawIndex(g))}return c<a&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var i=this.clone(e);return this._updateDims(i,e,t),i},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,i){for(var r=e._chunks,s=[],a=t.length,o=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=lv();for(var d=0;d<o;d++){for(var f=e.getRawIndex(d),h=0;h<a;h++)l[h]=r[t[h]][f];l[a]=d;var p=i&&i.apply(null,l);if(p!=null){typeof p!="object"&&(s[0]=p,p=s);for(var u=0;u<p.length;u++){var m=t[u],v=p[u],g=c[m],y=r[m];y&&(y[f]=v),v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}}},n.prototype.lttbDownSample=function(e,t){var i=this.clone([e],!0),r=i._chunks,s=r[e],a=this.count(),o=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,d,f,h=new(ov(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));h[o++]=c;for(var p=1;p<a-1;p+=l){for(var m=Math.min(p+l,a-1),v=Math.min(p+l*2,a),g=(v+m)/2,y=0,x=m;x<v;x++){var b=this.getRawIndex(x),A=s[b];isNaN(A)||(y+=A)}y/=v-m;var S=p,C=Math.min(p+l,a),_=p-1,M=s[c];u=-1,f=S;for(var T=-1,E=0,x=S;x<C;x++){var b=this.getRawIndex(x),A=s[b];if(isNaN(A)){E++,T<0&&(T=b);continue}d=Math.abs((_-g)*(A-M)-(_-x)*(y-M)),d>u&&(u=d,f=b)}E>0&&E<C-S&&(h[o++]=Math.min(T,f),f=Math.max(T,f)),h[o++]=f,c=f}return h[o++]=this.getRawIndex(a-1),i._count=o,i._indices=h,i.getRawIndex=this._getRawIdx,i},n.prototype.minmaxDownSample=function(e,t){for(var i=this.clone([e],!0),r=i._chunks,s=Math.floor(1/t),a=r[e],o=this.count(),l=new(ov(this._rawCount))(Math.ceil(o/s)*2),c=0,u=0;u<o;u+=s){var d=u,f=a[this.getRawIndex(d)],h=u,p=a[this.getRawIndex(h)],m=s;u+s>o&&(m=o-u);for(var v=0;v<m;v++){var g=this.getRawIndex(u+v),y=a[g];y<f&&(f=y,d=u+v),y>p&&(p=y,h=u+v)}var x=this.getRawIndex(d),b=this.getRawIndex(h);d<h?(l[c++]=x,l[c++]=b):(l[c++]=b,l[c++]=x)}return i._count=c,i._indices=l,i._updateGetRawIdx(),i},n.prototype.downSample=function(e,t,i,r){for(var s=this.clone([e],!0),a=s._chunks,o=[],l=Math.floor(1/t),c=a[e],u=this.count(),d=s._rawExtent[e]=lv(),f=new(ov(this._rawCount))(Math.ceil(u/l)),h=0,p=0;p<u;p+=l){l>u-p&&(l=u-p,o.length=l);for(var m=0;m<l;m++){var v=this.getRawIndex(p+m);o[m]=c[v]}var g=i(o),y=this.getRawIndex(Math.min(p+r(o,g)||0,u-1));c[y]=g,g<d[0]&&(d[0]=g),g>d[1]&&(d[1]=g),f[h++]=y}return s._count=h,s._indices=f,s._updateGetRawIdx(),s},n.prototype.each=function(e,t){if(this._count)for(var i=e.length,r=this._chunks,s=0,a=this.count();s<a;s++){var o=this.getRawIndex(s);switch(i){case 0:t(s);break;case 1:t(r[e[0]][o],s);break;case 2:t(r[e[0]][o],r[e[1]][o],s);break;default:for(var l=0,c=[];l<i;l++)c[l]=r[e[l]][o];c[l]=s,t.apply(null,c)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],i=lv();if(!t)return i;var r=this.count(),s=!this._indices,a;if(s)return this._rawExtent[e].slice();if(a=this._extent[e],a)return a.slice();a=i;for(var o=a[0],l=a[1],c=0;c<r;c++){var u=this.getRawIndex(c),d=t[u];d<o&&(o=d),d>l&&(l=d)}return a=[o,l],this._extent[e]=a,a},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var i=[],r=this._chunks,s=0;s<r.length;s++)i.push(r[s][t]);return i},n.prototype.clone=function(e,t){var i=new n,r=this._chunks,s=e&&op(e,function(o,l){return o[l]=!0,o},{});if(s)for(var a=0;a<r.length;a++)i._chunks[a]=s[a]?wUe(r[a]):r[a];else i._chunks=r;return this._copyCommonProps(i),t||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=or(this._extent),e._rawExtent=or(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var i=this._indices.length;t=new e(i);for(var r=0;r<i;r++)t[r]=this._indices[r]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,i,r,s){return T_(t[s],this._dimensions[s])}WE={arrayRows:e,objectRows:function(t,i,r,s){return T_(t[i],this._dimensions[s])},keyedColumns:e,original:function(t,i,r,s){var a=t&&(t.value==null?t:t.value);return T_(a instanceof Array?a[s]:a,this._dimensions[s])},typedArray:function(t,i,r,s){return t[s]}}}(),n}(),SUe=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),i=!!t.length,r,s;if(Yw(e)){var a=e,o=void 0,l=void 0,c=void 0;if(i){var u=t[0];u.prepareSource(),c=u.getSource(),o=c.data,l=c.sourceFormat,s=[u._getVersionSign()]}else o=a.get("data",!0),l=tl(o)?Wh:xc,s=[];var d=this._getSourceMetaRawOption()||{},f=c&&c.metaRawOption||{},h=ki(d.seriesLayoutBy,f.seriesLayoutBy)||null,p=ki(d.sourceHeader,f.sourceHeader),m=ki(d.dimensions,f.dimensions),v=h!==f.seriesLayoutBy||!!p!=!!f.sourceHeader||m;r=v?[dR(o,{seriesLayoutBy:h,sourceHeader:p,dimensions:m},l)]:[]}else{var g=e;if(i){var y=this._applyTransform(t);r=y.sourceList,s=y.upstreamSignList}else{var x=g.get("source",!0);r=[dR(x,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(r,s)},n.prototype._applyTransform=function(e){var t=this._sourceHost,i=t.get("transform",!0),r=t.get("fromTransformResult",!0);if(r!=null){var s="";e.length!==1&&kH(s)}var a,o=[],l=[];return mt(e,function(c){c.prepareSource();var u=c.getSource(r||0),d="";r!=null&&!u&&kH(d),o.push(u),l.push(c._getVersionSign())}),i?a=yUe(i,o,{datasetIndex:t.componentIndex}):r!=null&&(a=[tUe(o[0])]),{sourceList:a,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var i=e[t];if(i._isDirty()||this._upstreamSignList[t]!==i._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,i){var r=0,s=this._storeList,a=s[r];a||(a=s[r]={});var o=a[i];if(!o){var l=this._getUpstreamSourceManagers()[0];Yw(this._sourceHost)&&l?o=l._innerGetDataStore(e,t,i):(o=new fR,o.initData(new Jne(t,e.length),e)),a[i]=o}return o},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Yw(e)){var t=$7(e);return t?[t.getSourceManager()]:[]}else return fi(D9e(e),function(i){return i.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,i,r;if(Yw(e))t=e.get("seriesLayoutBy",!0),i=e.get("sourceHeader",!0),r=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=e;t=s.get("seriesLayoutBy",!0),i=s.get("sourceHeader",!0),r=s.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:i,dimensions:r}},n}();function Yw(n){return n.mainType==="series"}function kH(n){throw new Error(n)}var _Ue="line-height:1";function aie(n){var e=n.lineHeight;return e==null?_Ue:"line-height:"+Vo(e+"")+"px"}function oie(n,e){var t=n.color||"#6e7079",i=n.fontSize||12,r=n.fontWeight||"400",s=n.color||"#464646",a=n.fontSize||14,o=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Vo(i+"")+"px;color:"+Vo(t)+";font-weight:"+Vo(r+""),valueStyle:"font-size:"+Vo(a+"")+"px;color:"+Vo(s)+";font-weight:"+Vo(o+"")}:{nameStyle:{fontSize:i,fill:t,fontWeight:r},valueStyle:{fontSize:a,fill:s,fontWeight:o}}}var CUe=[0,10,20,30],MUe=["",`
`,`

`,`


`];function Rx(n,e){return e.type=n,e}function hR(n){return n.type==="section"}function lie(n){return hR(n)?TUe:EUe}function cie(n){if(hR(n)){var e=0,t=n.blocks.length,i=t>1||t>0&&!n.noHeader;return mt(n.blocks,function(r){var s=cie(r);s>=e&&(e=s+ +(i&&(!s||hR(r)&&!r.noHeader)))}),e}return 0}function TUe(n,e,t,i){var r=e.noHeader,s=IUe(cie(e)),a=[],o=e.blocks||[];mf(!o||Un(o)),o=o||[];var l=n.orderMode;if(e.sortBlocks&&l){o=o.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(hm(c,l)){var u=new uUe(c[l],null);o.sort(function(m,v){return u.evaluate(m.sortParam,v.sortParam)})}else l==="seriesDesc"&&o.reverse()}mt(o,function(m,v){var g=e.valueFormatter,y=lie(m)(g?pn(pn({},n),{valueFormatter:g}):n,m,v>0?s.html:0,i);y!=null&&a.push(y)});var d=n.renderMode==="richText"?a.join(s.richText):pR(i,a.join(""),r?t:s.html);if(r)return d;var f=uR(e.header,"ordinal",n.useUTC),h=oie(i,n.renderMode).nameStyle,p=aie(i);return n.renderMode==="richText"?uie(n,f,h)+s.richText+d:pR(i,'<div style="'+h+";"+p+';">'+Vo(f)+"</div>"+d,t)}function EUe(n,e,t,i){var r=n.renderMode,s=e.noName,a=e.noValue,o=!e.markerType,l=e.name,c=n.useUTC,u=e.valueFormatter||n.valueFormatter||function(b){return b=Un(b)?b:[b],fi(b,function(A,S){return uR(A,Un(h)?h[S]:h,c)})};if(!(s&&a)){var d=o?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",r),f=s?"":uR(l,"ordinal",c),h=e.valueType,p=a?[]:u(e.value,e.dataIndex),m=!o||!s,v=!o&&s,g=oie(i,r),y=g.nameStyle,x=g.valueStyle;return r==="richText"?(o?"":d)+(s?"":uie(n,f,y))+(a?"":PUe(n,p,m,v,x)):pR(i,(o?"":d)+(s?"":DUe(f,!o,y))+(a?"":RUe(p,m,v,x)),t)}}function FH(n,e,t,i,r,s){if(n){var a=lie(n),o={useUTC:r,renderMode:t,orderMode:i,markupStyleCreator:e,valueFormatter:n.valueFormatter};return a(o,n,0,s)}}function IUe(n){return{html:CUe[n],richText:MUe[n]}}function pR(n,e,t){var i='<div style="clear:both"></div>',r="margin: "+t+"px 0 0",s=aie(n);return'<div style="'+r+";"+s+';">'+e+i+"</div>"}function DUe(n,e,t){var i=e?"margin-left:2px":"";return'<span style="'+t+";"+i+'">'+Vo(n)+"</span>"}function RUe(n,e,t,i){var r=t?"10px":"20px",s=e?"float:right;margin-left:"+r:"";return n=Un(n)?n:[n],'<span style="'+s+";"+i+'">'+fi(n,function(a){return Vo(a)}).join("&nbsp;&nbsp;")+"</span>"}function uie(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function PUe(n,e,t,i,r){var s=[r],a=i?10:20;return t&&s.push({padding:[0,0,0,a],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(Un(e)?e.join("  "):e,s)}function LUe(n,e){var t=n.getData().getItemVisual(e,"style"),i=t[n.visualDrawType];return vm(i)}function die(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var qE=function(){function n(){this.richTextStyles={},this._nextStyleNameId=Ute()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,i){var r=i==="richText"?this._generateStyleName():null,s=A9e({color:t,type:e,renderMode:i,markerId:r});return ri(s)?s:(this.richTextStyles[r]=s.style,s.content)},n.prototype.wrapRichTextStyle=function(e,t){var i={};Un(t)?mt(t,function(s){return pn(i,s)}):pn(i,t);var r=this._generateStyleName();return this.richTextStyles[r]=i,"{"+r+"|"+e+"}"},n}();function kUe(n){var e=n.series,t=n.dataIndex,i=n.multipleSeries,r=e.getData(),s=r.mapDimensionsAll("defaultedTooltip"),a=s.length,o=e.getRawValue(t),l=Un(o),c=LUe(e,t),u,d,f,h;if(a>1||l&&!a){var p=FUe(o,e,t,s,c);u=p.inlineValues,d=p.inlineValueTypes,f=p.blocks,h=p.inlineValues[0]}else if(a){var m=r.getDimensionInfo(s[0]);h=u=P1(r,t,s[0]),d=m.type}else h=u=l?o[0]:o;var v=E7(e),g=v&&e.name||"",y=r.getName(t),x=i?g:y;return Rx("section",{header:g,noHeader:i||!v,sortParam:h,blocks:[Rx("nameValue",{markerType:"item",markerColor:c,name:x,noName:!Ou(x),value:u,valueType:d,dataIndex:t})].concat(f||[])})}function FUe(n,e,t,i,r){var s=e.getData(),a=op(n,function(d,f,h){var p=s.getDimensionInfo(h);return d=d||p&&p.tooltip!==!1&&p.displayName!=null},!1),o=[],l=[],c=[];i.length?mt(i,function(d){u(P1(s,t,d),d)}):mt(n,u);function u(d,f){var h=s.getDimensionInfo(f);!h||h.otherDims.tooltip===!1||(a?c.push(Rx("nameValue",{markerType:"subItem",markerColor:r,name:h.displayName,value:d,valueType:h.type})):(o.push(d),l.push(h.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:c}}var Gf=Ls();function Xw(n,e){return n.getName(e)||n.getId(e)}var BUe="__universalTransitionEnabled",gf=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,i,r){this.seriesIndex=this.componentIndex,this.dataTask=Mb({count:OUe,reset:UUe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,r);var s=Gf(this).sourceManager=new SUe(this);s.prepareSource();var a=this.getInitialData(t,r);NH(a,this),this.dataTask.context.data=a,Gf(this).dataBeforeProcessed=a,BH(this),this._initSelectedMapFromData(a)},e.prototype.mergeDefaultAndTheme=function(t,i){var r=Ix(this),s=r?rT(t):{},a=this.subType;Dr.hasClass(a)&&(a+="Series"),Sr(t,i.getTheme().get(this.subType)),Sr(t,this.getDefaultOption()),Z8(t,"label",["show"]),this.fillDataTextStyle(t.data),r&&R1(t,s,r)},e.prototype.mergeOption=function(t,i){t=Sr(this.option,t,!0),this.fillDataTextStyle(t.data);var r=Ix(this);r&&R1(this.option,t,r);var s=Gf(this).sourceManager;s.dirty(),s.prepareSource();var a=this.getInitialData(t,i);NH(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,Gf(this).dataBeforeProcessed=a,BH(this),this._initSelectedMapFromData(a)},e.prototype.fillDataTextStyle=function(t){if(t&&!tl(t))for(var i=["show"],r=0;r<t.length;r++)t[r]&&t[r].label&&Z8(t[r],"label",i)},e.prototype.getInitialData=function(t,i){},e.prototype.appendData=function(t){var i=this.getRawData();i.appendData(t.data)},e.prototype.getData=function(t){var i=mR(this);if(i){var r=i.context.data;return t==null||!r.getLinkedData?r:r.getLinkedData(t)}else return Gf(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var i=mR(this);if(i){var r=i.context;r.outputData=t,i!==this.dataTask&&(r.data=t)}Gf(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Vi(t)},e.prototype.getSourceManager=function(){return Gf(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Gf(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,i,r){return kUe({series:this,dataIndex:t,multipleSeries:i})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Ai.node&&!(t&&t.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,i,r){var s=this.ecModel,a=Q7.prototype.getColorFromPalette.call(this,t,i,r);return a||(a=s.getColorFromPalette(t,i,r)),a},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,i){this._innerSelect(this.getData(i),t)},e.prototype.unselect=function(t,i){var r=this.option.selectedMap;if(r){var s=this.option.selectedMode,a=this.getData(i);if(s==="series"||r==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var l=t[o],c=Xw(a,l);r[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,i){for(var r=[],s=0;s<t.length;s++)r[0]=t[s],this.isSelected(t[s],i)?this.unselect(r,i):this.select(r,i)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,i=hs(t),r=[],s=0;s<i.length;s++){var a=t[i[s]];a>=0&&r.push(a)}return r},e.prototype.isSelected=function(t,i){var r=this.option.selectedMap;if(!r)return!1;var s=this.getData(i);return(r==="all"||r[Xw(s,t)])&&!s.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[BUe])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,i){var r,s,a=this.option,o=a.selectedMode,l=i.length;if(!(!o||!l)){if(o==="series")a.selectedMap="all";else if(o==="multiple"){hi(a.selectedMap)||(a.selectedMap={});for(var c=a.selectedMap,u=0;u<l;u++){var d=i[u],f=Xw(t,d);c[f]=!0,this._selectedDataIndicesMap[f]=t.getRawIndex(d)}}else if(o==="single"||o===!0){var h=i[l-1],f=Xw(t,h);a.selectedMap=(r={},r[f]=!0,r),this._selectedDataIndicesMap=(s={},s[f]=t.getRawIndex(h),s)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var i=[];t.hasItemOption&&t.each(function(r){var s=t.getRawDataItem(r);s&&s.selected&&i.push(r)}),i.length>0&&this._innerSelect(t,i)}},e.registerClass=function(t){return Dr.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Dr);od(gf,lUe);od(gf,Q7);qte(gf,Dr);function BH(n){var e=n.name;E7(n)||(n.name=NUe(n)||e)}function NUe(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),i=[];return mt(t,function(r){var s=e.getDimensionInfo(r);s.displayName&&i.push(s.displayName)}),i.join(" ")}function OUe(n){return n.model.getRawData().count()}function UUe(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),zUe}function zUe(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function NH(n,e){mt(iFe(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,Ns(VUe,e))})}function VUe(n,e){var t=mR(n);return t&&t.setOutputEnd((e||this).count()),e}function mR(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var i=t.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(n.uid))}return i}}var su=function(){function n(){this.group=new eo,this.uid=QM("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,i,r){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,i,r){},n.prototype.updateLayout=function(e,t,i,r){},n.prototype.updateVisual=function(e,t,i,r){},n.prototype.toggleBlurSeries=function(e,t,i){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();D7(su);UM(su);function fie(){var n=Ls();return function(e){var t=n(e),i=e.pipelineContext,r=!!t.large,s=!!t.progressiveRender,a=t.large=!!(i&&i.large),o=t.progressiveRender=!!(i&&i.progressiveRender);return(r!==a||s!==o)&&"reset"}}var hie=Ls(),HUe=fie(),Qc=function(){function n(){this.group=new eo,this.uid=QM("viewChart"),this.renderTask=Mb({plan:GUe,reset:WUe}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,i,r){},n.prototype.highlight=function(e,t,i,r){var s=e.getData(r&&r.dataType);s&&UH(s,r,"emphasis")},n.prototype.downplay=function(e,t,i,r){var s=e.getData(r&&r.dataType);s&&UH(s,r,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.updateLayout=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.updateVisual=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.eachRendered=function(e){G7(this.group,e)},n.markUpdateMethod=function(e,t){hie(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function OH(n,e,t){n&&aR(n)&&(e==="emphasis"?YC:XC)(n,t)}function UH(n,e,t){var i=pm(n,e),r=e&&e.highlightKey!=null?sOe(e.highlightKey):null;i!=null?mt(Ao(i),function(s){OH(n.getItemGraphicEl(s),t,r)}):n.eachItemGraphicEl(function(s){OH(s,t,r)})}D7(Qc);UM(Qc);function GUe(n){return HUe(n.model)}function WUe(n){var e=n.model,t=n.ecModel,i=n.api,r=n.payload,s=e.pipelineContext.progressiveRender,a=n.view,o=r&&hie(r).updateMethod,l=s?"incrementalPrepareRender":o&&a[o]?o:"render";return l!=="render"&&a[l](e,t,i,r),qUe[l]}var qUe={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},t4="\0__throttleOriginMethod",zH="\0__throttleRate",VH="\0__throttleType";function iF(n,e,t){var i,r=0,s=0,a=null,o,l,c,u;e=e||0;function d(){s=new Date().getTime(),a=null,n.apply(l,c||[])}var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];i=new Date().getTime(),l=this,c=h;var m=u||e,v=u||t;u=null,o=i-(v?r:s)-m,clearTimeout(a),v?a=setTimeout(d,m):o>=0?d():a=setTimeout(d,-o),r=i};return f.clear=function(){a&&(clearTimeout(a),a=null)},f.debounceNextCall=function(h){u=h},f}function pie(n,e,t,i){var r=n[e];if(r){var s=r[t4]||r,a=r[VH],o=r[zH];if(o!==t||a!==i){if(t==null)return n[e]=s;r=n[e]=iF(s,t,i==="debounce"),r[t4]=s,r[VH]=i,r[zH]=t}return r}}function vR(n,e){var t=n[e];t&&t[t4]&&(t.clear&&t.clear(),n[e]=t[t4])}var HH=Ls(),GH={itemStyle:Mx(Tne,!0),lineStyle:Mx(Mne,!0)},KUe={lineStyle:"stroke",itemStyle:"fill"};function mie(n,e){var t=n.visualStyleMapper||GH[e];return t||(console.warn("Unknown style type '"+e+"'."),GH.itemStyle)}function vie(n,e){var t=n.visualDrawType||KUe[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var YUe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=n.getModel(i),s=mie(n,i),a=s(r),o=r.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var l=vie(n,i),c=a[l],u=Ci(c)?c:null,d=a.fill==="auto"||a.stroke==="auto";if(!a[l]||u||d){var f=n.getColorFromPalette(n.name,null,e.getSeriesCount());a[l]||(a[l]=f,t.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ci(a.fill)?f:a.fill,a.stroke=a.stroke==="auto"||Ci(a.stroke)?f:a.stroke}if(t.setVisual("style",a),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(h,p){var m=n.getDataParams(p),v=pn({},a);v[l]=u(m),h.setItemVisual(p,"style",v)}}}},a2=new xs,XUe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=mie(n,i),s=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(a,o){var l=a.getRawDataItem(o);if(l&&l[i]){a2.option=l[i];var c=r(a2),u=a.ensureUniqueItemVisual(o,"style");pn(u,c),a2.option.decal&&(a.setItemVisual(o,"decal",a2.option.decal),a2.option.decal.dirty=!0),s in c&&a.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},jUe={performRawSeries:!0,overallReset:function(n){var e=Vi();n.eachSeries(function(t){var i=t.getColorBy();if(!t.isColorBySeries()){var r=t.type+"-"+i,s=e.get(r);s||(s={},e.set(r,s)),HH(t).scope=s}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var i=t.getRawData(),r={},s=t.getData(),a=HH(t).scope,o=t.visualStyleAccessPath||"itemStyle",l=vie(t,o);s.each(function(c){var u=s.getRawIndex(c);r[u]=c}),i.each(function(c){var u=r[c],d=s.getItemVisual(u,"colorFromPalette");if(d){var f=s.ensureUniqueItemVisual(u,"style"),h=i.getName(c)||c+"",p=i.count();f[l]=t.getColorFromPalette(h,a,p)}})}})}},jw=Math.PI;function $Ue(n,e){e=e||{},Cr(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new eo,i=new pa({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(i);var r=new Ra({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),s=new pa({style:{fill:"none"},textContent:r,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(s);var a;return e.showSpinner&&(a=new KM({shape:{startAngle:-jw/2,endAngle:-jw/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:jw*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:jw*3/2}).delay(300).start("circularInOut"),t.add(a)),t.resize=function(){var o=r.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(n.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),u=n.getHeight()/2;e.showSpinner&&a.setShape({cx:c,cy:u}),s.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var gie=function(){function n(e,t,i,r){this._stageTaskMap=Vi(),this.ecInstance=e,this.api=t,i=this._dataProcessorHandlers=i.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=i.concat(r)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(i){var r=i.overallTask;r&&r.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var i=this._pipelineMap.get(e.__pipeline.id),r=i.context,s=!t&&i.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>i.blockIndex,a=s?i.step:null,o=r&&r.modDataCount,l=o!=null?Math.ceil(o/a):null;return{step:a,modBy:l,modDataCount:o}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var i=this._pipelineMap.get(e.uid),r=e.getData(),s=r.count(),a=i.progressiveEnabled&&t.incrementalPrepareRender&&s>=i.threshold,o=e.get("large")&&s>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?s:null;e.pipelineContext=i.context={progressiveRender:a,modDataCount:l,large:o}},n.prototype.restorePipelines=function(e){var t=this,i=t._pipelineMap=Vi();e.eachSeries(function(r){var s=r.getProgressive(),a=r.uid;i.set(a,{id:a,head:null,tail:null,threshold:r.getProgressiveThreshold(),progressiveEnabled:s&&!(r.preventIncremental&&r.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),t._pipe(r,r.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),i=this.api;mt(this._allHandlers,function(r){var s=e.get(r.uid)||e.set(r.uid,{}),a="";mf(!(r.reset&&r.overallReset),a),r.reset&&this._createSeriesStageTask(r,s,t,i),r.overallReset&&this._createOverallStageTask(r,s,t,i)},this)},n.prototype.prepareView=function(e,t,i,r){var s=e.renderTask,a=s.context;a.model=t,a.ecModel=i,a.api=r,s.__block=!e.incrementalPrepareRender,this._pipe(t,s)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,i){this._performStageTasks(this._visualHandlers,e,t,i)},n.prototype._performStageTasks=function(e,t,i,r){r=r||{};var s=!1,a=this;mt(e,function(l,c){if(!(r.visualType&&r.visualType!==l.visualType)){var u=a._stageTaskMap.get(l.uid),d=u.seriesTaskMap,f=u.overallTask;if(f){var h,p=f.agentStubMap;p.each(function(v){o(r,v)&&(v.dirty(),h=!0)}),h&&f.dirty(),a.updatePayload(f,i);var m=a.getPerformArgs(f,r.block);p.each(function(v){v.perform(m)}),f.perform(m)&&(s=!0)}else d&&d.each(function(v,g){o(r,v)&&v.dirty();var y=a.getPerformArgs(v,r.block);y.skip=!l.performRawSeries&&t.isSeriesFiltered(v.context.model),a.updatePayload(v,i),v.perform(y)&&(s=!0)})}});function o(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=s||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(i){t=i.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,i,r){var s=this,a=t.seriesTaskMap,o=t.seriesTaskMap=Vi(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?i.eachRawSeries(u):l?i.eachRawSeriesByType(l,u):c&&c(i,r).each(u);function u(d){var f=d.uid,h=o.set(f,a&&a.get(f)||Mb({plan:tze,reset:nze,count:rze}));h.context={model:d,ecModel:i,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:s},s._pipe(d,h)}},n.prototype._createOverallStageTask=function(e,t,i,r){var s=this,a=t.overallTask=t.overallTask||Mb({reset:QUe});a.context={ecModel:i,api:r,overallReset:e.overallReset,scheduler:s};var o=a.agentStubMap,l=a.agentStubMap=Vi(),c=e.seriesType,u=e.getTargetSeries,d=!0,f=!1,h="";mf(!e.createOnAllSeries,h),c?i.eachRawSeriesByType(c,p):u?u(i,r).each(p):(d=!1,mt(i.getSeries(),p));function p(m){var v=m.uid,g=l.set(v,o&&o.get(v)||(f=!0,Mb({reset:ZUe,onDirty:eze})));g.context={model:m,overallProgress:d},g.agent=a,g.__block=d,s._pipe(m,g)}f&&a.dirty()},n.prototype._pipe=function(e,t){var i=e.uid,r=this._pipelineMap.get(i);!r.head&&(r.head=t),r.tail&&r.tail.pipe(t),r.tail=t,t.__idxInPipeline=r.count++,t.__pipeline=r},n.wrapStageHandler=function(e,t){return Ci(e)&&(e={overallReset:e,seriesType:sze(e)}),e.uid=QM("stageHandler"),t&&(e.visualType=t),e},n}();function QUe(n){n.overallReset(n.ecModel,n.api,n.payload)}function ZUe(n){return n.overallProgress&&JUe}function JUe(){this.agent.dirty(),this.getDownstream().dirty()}function eze(){this.agent&&this.agent.dirty()}function tze(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function nze(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Ao(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?fi(e,function(t,i){return yie(i)}):ize}var ize=yie(0);function yie(n){return function(e,t){var i=t.data,r=t.resetDefines[n];if(r&&r.dataEach)for(var s=e.start;s<e.end;s++)r.dataEach(i,s);else r&&r.progress&&r.progress(e,i)}}function rze(n){return n.data.count()}function sze(n){n4=null;try{n(Px,bie)}catch{}return n4}var Px={},bie={},n4;xie(Px,Z7);xie(bie,Yne);Px.eachSeriesByType=Px.eachRawSeriesByType=function(n){n4=n};Px.eachComponent=function(n){n.mainType==="series"&&n.subType&&(n4=n.subType)};function xie(n,e){for(var t in e.prototype)n[t]=$o}var WH=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const aze={color:WH,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],WH]};var Ga="#B9B8CE",qH="#100C2A",$w=function(){return{axisLine:{lineStyle:{color:Ga}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},KH=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Aie={darkMode:!0,color:KH,backgroundColor:qH,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Ga},pageTextStyle:{color:Ga}},textStyle:{color:Ga},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Ga}},dataZoom:{borderColor:"#71708A",textStyle:{color:Ga},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Ga}},timeline:{lineStyle:{color:Ga},label:{color:Ga},controlStyle:{color:Ga,borderColor:Ga}},calendar:{itemStyle:{color:qH},dayLabel:{color:Ga},monthLabel:{color:Ga},yearLabel:{color:Ga}},timeAxis:$w(),logAxis:$w(),valueAxis:$w(),categoryAxis:$w(),line:{symbol:"circle"},graph:{color:KH},gauge:{title:{color:Ga},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Ga},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Aie.categoryAxis.splitLine.show=!1;var oze=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},i={},r={};if(ri(e)){var s=Uu(e);t.mainType=s.main||null,t.subType=s.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};mt(e,function(l,c){for(var u=!1,d=0;d<a.length;d++){var f=a[d],h=c.lastIndexOf(f);if(h>0&&h===c.length-f.length){var p=c.slice(0,h);p!=="data"&&(t.mainType=p,t[f.toLowerCase()]=l,u=!0)}}o.hasOwnProperty(c)&&(i[c]=l,u=!0),u||(r[c]=l)})}return{cptQuery:t,dataQuery:i,otherQuery:r}},n.prototype.filter=function(e,t){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,s=i.packedEvent,a=i.model,o=i.view;if(!a||!o)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,a,"mainType")&&u(l,a,"subType")&&u(l,a,"index","componentIndex")&&u(l,a,"name")&&u(l,a,"id")&&u(c,s,"name")&&u(c,s,"dataIndex")&&u(c,s,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,r,s));function u(d,f,h,p){return d[h]==null||f[p||h]===d[h]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),gR=["symbol","symbolSize","symbolRotate","symbolOffset"],YH=gR.concat(["symbolKeepAspect"]),lze={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var i={},r={},s=!1,a=0;a<gR.length;a++){var o=gR[a],l=n.get(o);Ci(l)?(s=!0,r[o]=l):i[o]=l}if(i.symbol=i.symbol||n.defaultSymbol,t.setVisual(pn({legendIcon:n.legendIcon||i.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},i)),e.isSeriesFiltered(n))return;var c=hs(r);function u(d,f){for(var h=n.getRawValue(f),p=n.getDataParams(f),m=0;m<c.length;m++){var v=c[m];d.setItemVisual(f,v,r[v](h,p))}}return{dataEach:s?u:null}}},cze={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function i(r,s){for(var a=r.getItemModel(s),o=0;o<YH.length;o++){var l=YH[o],c=a.getShallow(l,!0);c!=null&&r.setItemVisual(s,l,c)}}return{dataEach:t.hasItemOption?i:null}}};function uze(n,e,t){switch(t){case"color":var i=n.getItemVisual(e,"style");return i[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function dze(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function fze(n,e){function t(i,r){var s=[];return i.eachComponent({mainType:"series",subType:n,query:r},function(a){s.push(a.seriesIndex)}),s}mt([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(i){e(i[0],function(r,s,a){r=pn({},r),a.dispatchAction(pn(r,{type:i[1],seriesIndex:t(s,r)}))})})}function cv(n,e,t,i,r){var s=n+e;t.isSilent(s)||i.eachComponent({mainType:"series",subType:"pie"},function(a){for(var o=a.seriesIndex,l=a.option.selectedMap,c=r.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===o){var d=a.getData(),f=pm(d,r.fromActionPayload);t.trigger(s,{type:s,seriesId:a.id,name:Un(f)?d.getName(f[0]):d.getName(f),selected:ri(l)?l:pn({},l)})}})}function hze(n,e,t){n.on("selectchanged",function(i){var r=t.getModel();i.isFromClick?(cv("map","selectchanged",e,r,i),cv("pie","selectchanged",e,r,i)):i.fromAction==="select"?(cv("map","selected",e,r,i),cv("pie","selected",e,r,i)):i.fromAction==="unselect"&&(cv("map","unselected",e,r,i),cv("pie","unselected",e,r,i))})}function Y2(n,e,t){for(var i;n&&!(e(n)&&(i=n,t));)n=n.__hostTarget||n.parent;return i}var pze=Math.round(Math.random()*9),mze=typeof Object.defineProperty=="function",vze=function(){function n(){this._id="__ec_inner_"+pze++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var i=this._guard(e);return mze?Object.defineProperty(i,this._id,{value:t,enumerable:!1,configurable:!0}):i[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}(),gze=Gr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,i=e.cy,r=e.width/2,s=e.height/2;n.moveTo(t,i-s),n.lineTo(t+r,i+s),n.lineTo(t-r,i+s),n.closePath()}}),yze=Gr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,i=e.cy,r=e.width/2,s=e.height/2;n.moveTo(t,i-s),n.lineTo(t+r,i),n.lineTo(t,i+s),n.lineTo(t-r,i),n.closePath()}}),bze=Gr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,i=e.y,r=e.width/5*3,s=Math.max(r,e.height),a=r/2,o=a*a/(s-a),l=i-s+a+o,c=Math.asin(o/a),u=Math.cos(c)*a,d=Math.sin(c),f=Math.cos(c),h=a*.6,p=a*.7;n.moveTo(t-u,l+o),n.arc(t,l,a,Math.PI-c,Math.PI*2+c),n.bezierCurveTo(t+u-d*h,l+o+f*h,t,i-p,t,i),n.bezierCurveTo(t,i-p,t-u+d*h,l+o+f*h,t-u,l+o),n.closePath()}}),xze=Gr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,i=e.width,r=e.x,s=e.y,a=i/3*2;n.moveTo(r,s),n.lineTo(r+a,s+t),n.lineTo(r,s+t/4*3),n.lineTo(r-a,s+t),n.lineTo(r,s),n.closePath()}}),Aze={line:cp,rect:pa,roundRect:pa,square:pa,circle:qM,diamond:yze,pin:bze,arrow:xze,triangle:gze},wze={line:function(n,e,t,i,r){r.x1=n,r.y1=e+i/2,r.x2=n+t,r.y2=e+i/2},rect:function(n,e,t,i,r){r.x=n,r.y=e,r.width=t,r.height=i},roundRect:function(n,e,t,i,r){r.x=n,r.y=e,r.width=t,r.height=i,r.r=Math.min(t,i)/4},square:function(n,e,t,i,r){var s=Math.min(t,i);r.x=n,r.y=e,r.width=s,r.height=s},circle:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.r=Math.min(t,i)/2},diamond:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.width=t,r.height=i},pin:function(n,e,t,i,r){r.x=n+t/2,r.y=e+i/2,r.width=t,r.height=i},arrow:function(n,e,t,i,r){r.x=n+t/2,r.y=e+i/2,r.width=t,r.height=i},triangle:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.width=t,r.height=i}},yR={};mt(Aze,function(n,e){yR[e]=new n});var Sze=Gr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var i=Lte(n,e,t),r=this.shape;return r&&r.symbolType==="pin"&&e.position==="inside"&&(i.y=t.y+t.height*.4),i},buildPath:function(n,e,t){var i=e.symbolType;if(i!=="none"){var r=yR[i];r||(i="rect",r=yR[i]),wze[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(n,r.shape,t)}}});function _ze(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function L1(n,e,t,i,r,s,a){var o=n.indexOf("empty")===0;o&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=xne(n.slice(8),new _r(e,t,i,r),a?"center":"cover"):n.indexOf("path://")===0?l=z7(n.slice(7),{},new _r(e,t,i,r),a?"center":"cover"):l=new Sze({shape:{symbolType:n,x:e,y:t,width:i,height:r}}),l.__isEmptyBrush=o,l.setColor=_ze,s&&l.setColor(s),l}function Cze(n){return Un(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function wie(n,e){if(n!=null)return Un(n)||(n=[n,n]),[cs(n[0],e[0])||0,cs(ki(n[1],n[0]),e[1])||0]}function B0(n){return isFinite(n)}function Mze(n,e,t){var i=e.x==null?0:e.x,r=e.x2==null?1:e.x2,s=e.y==null?0:e.y,a=e.y2==null?0:e.y2;e.global||(i=i*t.width+t.x,r=r*t.width+t.x,s=s*t.height+t.y,a=a*t.height+t.y),i=B0(i)?i:0,r=B0(r)?r:1,s=B0(s)?s:0,a=B0(a)?a:0;var o=n.createLinearGradient(i,s,r,a);return o}function Tze(n,e,t){var i=t.width,r=t.height,s=Math.min(i,r),a=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(a=a*i+t.x,o=o*r+t.y,l=l*s),a=B0(a)?a:.5,o=B0(o)?o:.5,l=l>=0&&B0(l)?l:.5;var c=n.createRadialGradient(a,o,0,a,o,l);return c}function bR(n,e,t){for(var i=e.type==="radial"?Tze(n,e,t):Mze(n,e,t),r=e.colorStops,s=0;s<r.length;s++)i.addColorStop(r[s].offset,r[s].color);return i}function Eze(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function Qw(n){return parseInt(n,10)}function Zw(n,e,t){var i=["width","height"][e],r=["clientWidth","clientHeight"][e],s=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(t[i]!=null&&t[i]!=="auto")return parseFloat(t[i]);var o=document.defaultView.getComputedStyle(n);return(n[r]||Qw(o[i])||Qw(n.style[i]))-(Qw(o[s])||0)-(Qw(o[a])||0)|0}function Ize(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:jr(n)?[n]:Un(n)?n:null}function Sie(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&Ize(e.lineDash,e.lineWidth),i=e.lineDashOffset;if(t){var r=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;r&&r!==1&&(t=fi(t,function(s){return s/r}),i/=r)}return[t,i]}var Dze=new mm(!0);function i4(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function XH(n){return typeof n=="string"&&n!=="none"}function r4(n){var e=n.fill;return e!=null&&e!=="none"}function jH(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function $H(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function xR(n,e,t){var i=Kte(e.image,e.__image,t);if(zM(i)){var r=n.createPattern(i,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&r&&r.setTransform){var s=new DOMMatrix;s.translateSelf(e.x||0,e.y||0),s.rotateSelf(0,0,(e.rotation||0)*rFe),s.scaleSelf(e.scaleX||1,e.scaleY||1),r.setTransform(s)}return r}}function Rze(n,e,t,i){var r,s=i4(t),a=r4(t),o=t.strokePercent,l=o<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||Dze,d=e.__dirty;if(!i){var f=t.fill,h=t.stroke,p=a&&!!f.colorStops,m=s&&!!h.colorStops,v=a&&!!f.image,g=s&&!!h.image,y=void 0,x=void 0,b=void 0,A=void 0,S=void 0;(p||m)&&(S=e.getBoundingRect()),p&&(y=d?bR(n,f,S):e.__canvasFillGradient,e.__canvasFillGradient=y),m&&(x=d?bR(n,h,S):e.__canvasStrokeGradient,e.__canvasStrokeGradient=x),v&&(b=d||!e.__canvasFillPattern?xR(n,f,e):e.__canvasFillPattern,e.__canvasFillPattern=b),g&&(A=d||!e.__canvasStrokePattern?xR(n,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=b),p?n.fillStyle=y:v&&(b?n.fillStyle=b:a=!1),m?n.strokeStyle=x:g&&(A?n.strokeStyle=A:s=!1)}var C=e.getGlobalScale();u.setScale(C[0],C[1],e.segmentIgnoreThreshold);var _,M;n.setLineDash&&t.lineDash&&(r=Sie(e),_=r[0],M=r[1]);var T=!0;(c||d&V2)&&(u.setDPR(n.dpr),l?u.setContext(null):(u.setContext(n),T=!1),u.reset(),e.buildPath(u,e.shape,i),u.toStatic(),e.pathUpdated()),T&&u.rebuildPath(n,l?o:1),_&&(n.setLineDash(_),n.lineDashOffset=M),i||(t.strokeFirst?(s&&$H(n,t),a&&jH(n,t)):(a&&jH(n,t),s&&$H(n,t))),_&&n.setLineDash([])}function Pze(n,e,t){var i=e.__image=Kte(t.image,e.__image,e,e.onload);if(!(!i||!zM(i))){var r=t.x||0,s=t.y||0,a=e.getWidth(),o=e.getHeight(),l=i.width/i.height;if(a==null&&o!=null?a=o*l:o==null&&a!=null?o=a/l:a==null&&o==null&&(a=i.width,o=i.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;n.drawImage(i,c,u,t.sWidth,t.sHeight,r,s,a,o)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,d=a-c,f=o-u;n.drawImage(i,c,u,d,f,r,s,a,o)}else n.drawImage(i,r,s,a,o)}}function Lze(n,e,t){var i,r=t.text;if(r!=null&&(r+=""),r){n.font=t.font||fm,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var s=void 0,a=void 0;n.setLineDash&&t.lineDash&&(i=Sie(e),s=i[0],a=i[1]),s&&(n.setLineDash(s),n.lineDashOffset=a),t.strokeFirst?(i4(t)&&n.strokeText(r,t.x,t.y),r4(t)&&n.fillText(r,t.x,t.y)):(r4(t)&&n.fillText(r,t.x,t.y),i4(t)&&n.strokeText(r,t.x,t.y)),s&&n.setLineDash([])}}var QH=["shadowBlur","shadowOffsetX","shadowOffsetY"],ZH=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function _ie(n,e,t,i,r){var s=!1;if(!i&&(t=t||{},e===t))return!1;if(i||e.opacity!==t.opacity){Wo(n,r),s=!0;var a=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(a)?$0.opacity:a}(i||e.blend!==t.blend)&&(s||(Wo(n,r),s=!0),n.globalCompositeOperation=e.blend||$0.blend);for(var o=0;o<QH.length;o++){var l=QH[o];(i||e[l]!==t[l])&&(s||(Wo(n,r),s=!0),n[l]=n.dpr*(e[l]||0))}return(i||e.shadowColor!==t.shadowColor)&&(s||(Wo(n,r),s=!0),n.shadowColor=e.shadowColor||$0.shadowColor),s}function JH(n,e,t,i,r){var s=Lx(e,r.inHover),a=i?null:t&&Lx(t,r.inHover)||{};if(s===a)return!1;var o=_ie(n,s,a,i,r);if((i||s.fill!==a.fill)&&(o||(Wo(n,r),o=!0),XH(s.fill)&&(n.fillStyle=s.fill)),(i||s.stroke!==a.stroke)&&(o||(Wo(n,r),o=!0),XH(s.stroke)&&(n.strokeStyle=s.stroke)),(i||s.opacity!==a.opacity)&&(o||(Wo(n,r),o=!0),n.globalAlpha=s.opacity==null?1:s.opacity),e.hasStroke()){var l=s.lineWidth,c=l/(s.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==c&&(o||(Wo(n,r),o=!0),n.lineWidth=c)}for(var u=0;u<ZH.length;u++){var d=ZH[u],f=d[0];(i||s[f]!==a[f])&&(o||(Wo(n,r),o=!0),n[f]=s[f]||d[1])}return o}function kze(n,e,t,i,r){return _ie(n,Lx(e,r.inHover),t&&Lx(t,r.inHover),i,r)}function Cie(n,e){var t=e.transform,i=n.dpr||1;t?n.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]):n.setTransform(i,0,0,i,0,0)}function Fze(n,e,t){for(var i=!1,r=0;r<n.length;r++){var s=n[r];i=i||s.isZeroArea(),Cie(e,s),e.beginPath(),s.buildPath(e,s.shape),e.clip()}t.allClipped=i}function Bze(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var eG=1,tG=2,nG=3,iG=4;function Nze(n){var e=r4(n),t=i4(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function Wo(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function Lx(n,e){return e&&n.__hoverStyle||n.style}function Mie(n,e){N0(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function N0(n,e,t,i){var r=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=-2,e.__isRendered=!1;return}var s=e.__clipPaths,a=t.prevElClipPaths,o=!1,l=!1;if((!a||Eze(s,a))&&(a&&a.length&&(Wo(n,t),n.restore(),l=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),s&&s.length&&(Wo(n,t),n.save(),Fze(s,n,t),o=!0),t.prevElClipPaths=s),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=o=!0);var u=e instanceof Gr&&e.autoBatch&&Nze(e.style);o||Bze(r,c.transform)?(Wo(n,t),Cie(n,e)):u||Wo(n,t);var d=Lx(e,t.inHover);e instanceof Gr?(t.lastDrawType!==eG&&(l=!0,t.lastDrawType=eG),JH(n,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&n.beginPath(),Rze(n,e,d,u),u&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof qC?(t.lastDrawType!==nG&&(l=!0,t.lastDrawType=nG),JH(n,e,c,l,t),Lze(n,e,d)):e instanceof Cp?(t.lastDrawType!==tG&&(l=!0,t.lastDrawType=tG),kze(n,e,c,l,t),Pze(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==iG&&(l=!0,t.lastDrawType=iG),Oze(n,e,t)),u&&i&&Wo(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function Oze(n,e,t){var i=e.getDisplayables(),r=e.getTemporalDisplayables();n.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},a,o;for(a=e.getCursor(),o=i.length;a<o;a++){var l=i[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),N0(n,l,s,a===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var c=0,u=r.length;c<u;c++){var l=r[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),N0(n,l,s,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var KE=new vze,rG=new IA(100),sG=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function AR(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),i=e.getZr(),r=i.painter.type==="svg";n.dirty&&KE.delete(n);var s=KE.get(n);if(s)return s;var a=Cr(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=a.rotation,o.scaleX=o.scaleY=r?1:1/t,KE.set(n,o),n.dirty=!1,o;function l(c){for(var u=[t],d=!0,f=0;f<sG.length;++f){var h=a[sG[f]];if(h!=null&&!Un(h)&&!ri(h)&&!jr(h)&&typeof h!="boolean"){d=!1;break}u.push(h)}var p;if(d){p=u.join(",")+(r?"-svg":"");var m=rG.get(p);m&&(r?c.svgElement=m:c.image=m)}var v=Eie(a.dashArrayX),g=Uze(a.dashArrayY),y=Tie(a.symbol),x=zze(v),b=Iie(g),A=!r&&fy.createCanvas(),S=r&&{tag:"g",attrs:{},key:"dcl",children:[]},C=M(),_;A&&(A.width=C.width*t,A.height=C.height*t,_=A.getContext("2d")),T(),d&&rG.put(p,A||S),c.image=A,c.svgElement=S,c.svgWidth=C.width,c.svgHeight=C.height;function M(){for(var E=1,I=0,L=x.length;I<L;++I)E=bV(E,x[I]);for(var F=1,I=0,L=y.length;I<L;++I)F=bV(F,y[I].length);E*=F;var B=b*x.length*y.length;return{width:Math.max(1,Math.min(E,a.maxTileWidth)),height:Math.max(1,Math.min(B,a.maxTileHeight))}}function T(){_&&(_.clearRect(0,0,A.width,A.height),a.backgroundColor&&(_.fillStyle=a.backgroundColor,_.fillRect(0,0,A.width,A.height)));for(var E=0,I=0;I<g.length;++I)E+=g[I];if(E<=0)return;for(var L=-b,F=0,B=0,P=0;L<C.height;){if(F%2===0){for(var z=B/2%y.length,O=0,N=0,H=0;O<C.width*2;){for(var q=0,I=0;I<v[P].length;++I)q+=v[P][I];if(q<=0)break;if(N%2===0){var te=(1-a.symbolSize)*.5,Q=O+v[P][N]*te,ee=L+g[F]*te,de=v[P][N]*a.symbolSize,J=g[F]*a.symbolSize,ue=H/2%y[z].length;Te(Q,ee,de,J,y[z][ue])}O+=v[P][N],++H,++N,N===v[P].length&&(N=0)}++P,P===v.length&&(P=0)}L+=g[F],++B,++F,F===g.length&&(F=0)}function Te(De,Le,Ne,Y,oe){var ne=r?1:t,Xe=L1(oe,De*ne,Le*ne,Ne*ne,Y*ne,a.color,a.symbolKeepAspect);if(r){var ke=i.painter.renderOneToVNode(Xe);ke&&S.children.push(ke)}else Mie(_,Xe)}}}}function Tie(n){if(!n||n.length===0)return[["rect"]];if(ri(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!ri(n[t])){e=!1;break}if(e)return Tie([n]);for(var i=[],t=0;t<n.length;++t)ri(n[t])?i.push([n[t]]):i.push(n[t]);return i}function Eie(n){if(!n||n.length===0)return[[0,0]];if(jr(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,i=0;i<n.length;++i)if(!jr(n[i])){t=!1;break}if(t)return Eie([n]);for(var r=[],i=0;i<n.length;++i)if(jr(n[i])){var e=Math.ceil(n[i]);r.push([e,e])}else{var e=fi(n[i],function(o){return Math.ceil(o)});e.length%2===1?r.push(e.concat(e)):r.push(e)}return r}function Uze(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(jr(n)){var e=Math.ceil(n);return[e,e]}var t=fi(n,function(i){return Math.ceil(i)});return n.length%2?t.concat(t):t}function zze(n){return fi(n,function(e){return Iie(e)})}function Iie(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function Vze(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var i=t.getData();i.hasItemVisual()&&i.each(function(a){var o=i.getItemVisual(a,"decal");if(o){var l=i.ensureUniqueItemVisual(a,"style");l.decal=AR(o,e)}});var r=i.getVisual("decal");if(r){var s=i.getVisual("style");s.decal=AR(r,e)}}})}var Oc=new ld,Die={};function Hze(n,e){Die[n]=e}function Gze(n){return Die[n]}var Wze=1,qze=800,Kze=900,Yze=1e3,Xze=2e3,jze=5e3,Rie=1e3,$ze=1100,rF=2e3,Pie=3e3,Qze=4e3,oT=4500,Zze=4600,Jze=5e3,eVe=6e3,Lie=7e3,tVe={PROCESSOR:{FILTER:Yze,SERIES_FILTER:qze,STATISTIC:jze},VISUAL:{LAYOUT:Rie,PROGRESSIVE_LAYOUT:$ze,GLOBAL:rF,CHART:Pie,POST_CHART_LAYOUT:Zze,COMPONENT:Qze,BRUSH:Jze,CHART_ITEM:oT,ARIA:eVe,DECAL:Lie}},Na="__flagInMainProcess",Ro="__pendingUpdate",YE="__needsUpdateStatus",aG=/^[a-zA-Z0-9_]+$/,XE="__connectUpdateStatus",oG=0,nVe=1,iVe=2;function kie(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return Bie(this,n,e)}}function Fie(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bie(this,n,e)}}function Bie(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),ld.prototype[e].apply(n,t)}var Nie=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(ld),Oie=Nie.prototype;Oie.on=Fie("on");Oie.off=Fie("off");var uv,jE,Jw,Wf,$E,QE,ZE,o2,l2,lG,cG,JE,uG,eS,dG,Uie,kl,fG,zie=function(n){kn(e,n);function e(t,i,r){var s=n.call(this,new oze)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],r=r||{},ri(i)&&(i=Vie[i]),s._dom=t;var a="canvas",o="auto",l=!1;r.ssr;var c=s._zr=yV(t,{renderer:r.renderer||a,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:ki(r.useDirtyRect,l),useCoarsePointer:ki(r.useCoarsePointer,o),pointerSize:r.pointerSize});s._ssr=r.ssr,s._throttledZrFlush=iF(Xr(c.flush,c),17),i=or(i),i&&jne(i,!0),s._theme=i,s._locale=p9e(r.locale||Ene),s._coordSysMgr=new J7;var u=s._api=dG(s);function d(f,h){return f.__prio-h.__prio}return v_(a4,d),v_(wR,d),s._scheduler=new gie(s,u,wR,a4),s._messageCenter=new Nie,s._initEvents(),s.resize=Xr(s.resize,s),c.animation.on("frame",s._onframe,s),lG(c,s),cG(c,s),k8(s),s}return e.prototype._onframe=function(){if(!this._disposed){fG(this);var t=this._scheduler;if(this[Ro]){var i=this[Ro].silent;this[Na]=!0;try{uv(this),Wf.update.call(this,null,this[Ro].updateParams)}catch(l){throw this[Na]=!1,this[Ro]=null,l}this._zr.flush(),this[Na]=!1,this[Ro]=null,o2.call(this,i),l2.call(this,i)}else if(t.unfinished){var r=Wze,s=this._model,a=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(s),t.performDataProcessorTasks(s),QE(this,s),t.performVisualTasks(s),eS(this,this._model,a,"remain",{}),r-=+new Date-o}while(r>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,i,r){if(!this[Na]){if(this._disposed){this.id;return}var s,a,o;if(hi(i)&&(r=i.lazyUpdate,s=i.silent,a=i.replaceMerge,o=i.transition,i=i.notMerge),this[Na]=!0,!this._model||i){var l=new V9e(this._api),c=this._theme,u=this._model=new Z7;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:a},SR);var d={seriesTransition:o,optionChanged:!0};if(r)this[Ro]={silent:s,updateParams:d},this[Na]=!1,this.getZr().wakeUp();else{try{uv(this),Wf.update.call(this,null,d)}catch(f){throw this[Ro]=null,this[Na]=!1,f}this._ssr||this._zr.flush(),this[Ro]=null,this[Na]=!1,o2.call(this,s),l2.call(this,s)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Ai.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var i=this._zr.painter;return i.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(Ai.svgSupported){var t=this._zr,i=t.storage.getDisplayList();return mt(i,function(r){r.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var i=t.excludeComponents,r=this._model,s=[],a=this;mt(i,function(l){r.eachComponent({mainType:l},function(c){var u=a._componentsMap[c.__viewId];u.group.ignore||(s.push(u),u.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return mt(s,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var i=t.type==="svg",r=this.group,s=Math.min,a=Math.max,o=1/0;if(hG[r]){var l=o,c=o,u=-o,d=-o,f=[],h=t&&t.pixelRatio||this.getDevicePixelRatio();mt(Eb,function(x,b){if(x.group===r){var A=i?x.getZr().painter.getSvgDom().innerHTML:x.renderToCanvas(or(t)),S=x.getDom().getBoundingClientRect();l=s(S.left,l),c=s(S.top,c),u=a(S.right,u),d=a(S.bottom,d),f.push({dom:A,left:S.left,top:S.top})}}),l*=h,c*=h,u*=h,d*=h;var p=u-l,m=d-c,v=fy.createCanvas(),g=yV(v,{renderer:i?"svg":"canvas"});if(g.resize({width:p,height:m}),i){var y="";return mt(f,function(x){var b=x.left-l,A=x.top-c;y+='<g transform="translate('+b+","+A+')">'+x.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=y,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return t.connectedBackgroundColor&&g.add(new pa({shape:{x:0,y:0,width:p,height:m},style:{fill:t.connectedBackgroundColor}})),mt(f,function(x){var b=new Cp({style:{x:x.left*h-l,y:x.top*h-c,image:x.dom}});g.add(b)}),g.refreshImmediately(),v.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,i){return $E(this,"convertToPixel",t,i)},e.prototype.convertFromPixel=function(t,i){return $E(this,"convertFromPixel",t,i)},e.prototype.containPixel=function(t,i){if(this._disposed){this.id;return}var r=this._model,s,a=bE(r,t);return mt(a,function(o,l){l.indexOf("Models")>=0&&mt(o,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)s=s||!!u.containPoint(i);else if(l==="seriesModels"){var d=this._chartsMap[c.__viewId];d&&d.containPoint&&(s=s||d.containPoint(i,c))}},this)},this),!!s},e.prototype.getVisual=function(t,i){var r=this._model,s=bE(r,t,{defaultMainType:"series"}),a=s.seriesModel,o=a.getData(),l=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?o.indexOfRawIndex(s.dataIndex):null;return l!=null?uze(o,l,i):dze(o,i)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;mt(rVe,function(i){var r=function(s){var a=t.getModel(),o=s.target,l,c=i==="globalout";if(c?l={}:o&&Y2(o,function(p){var m=Rr(p);if(m&&m.dataIndex!=null){var v=m.dataModel||a.getSeriesByIndex(m.seriesIndex);return l=v&&v.getDataParams(m.dataIndex,m.dataType,o)||{},!0}else if(m.eventData)return l=pn({},m.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var f=u&&d!=null&&a.getComponent(u,d),h=f&&t[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=s,l.type=i,t._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:f,view:h},t.trigger(i,l)}};r.zrEventfulCallAtLast=!0,t._zr.on(i,r,t)}),mt(Tb,function(i,r){t._messageCenter.on(r,function(s){this.trigger(r,s)},t)}),mt(["selectchanged"],function(i){t._messageCenter.on(i,function(r){this.trigger(i,r)},t)}),hze(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&Gte(this.getDom(),aF,"");var i=this,r=i._api,s=i._model;mt(i._componentsViews,function(a){a.dispose(s,r)}),mt(i._chartsViews,function(a){a.dispose(s,r)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete Eb[i.id]},e.prototype.resize=function(t){if(!this[Na]){if(this._disposed){this.id;return}this._zr.resize(t);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var r=i.resetOption("media"),s=t&&t.silent;this[Ro]&&(s==null&&(s=this[Ro].silent),r=!0,this[Ro]=null),this[Na]=!0;try{r&&uv(this),Wf.update.call(this,{type:"resize",animation:pn({duration:0},t&&t.animation)})}catch(a){throw this[Na]=!1,a}this[Na]=!1,o2.call(this,s),l2.call(this,s)}}},e.prototype.showLoading=function(t,i){if(this._disposed){this.id;return}if(hi(t)&&(i=t,t=""),t=t||"default",this.hideLoading(),!!_R[t]){var r=_R[t](this._api,i),s=this._zr;this._loadingFX=r,s.add(r)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var i=pn({},t);return i.type=Tb[t.type],i},e.prototype.dispatchAction=function(t,i){if(this._disposed){this.id;return}if(hi(i)||(i={silent:!!i}),!!s4[t.type]&&this._model){if(this[Na]){this._pendingActions.push(t);return}var r=i.silent;ZE.call(this,t,r);var s=i.flush;s?this._zr.flush():s!==!1&&Ai.browser.weChat&&this._throttledZrFlush(),o2.call(this,r),l2.call(this,r)}},e.prototype.updateLabelLayout=function(){Oc.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var i=t.seriesIndex,r=this.getModel(),s=r.getSeriesByIndex(i);s.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){uv=function(d){var f=d._scheduler;f.restorePipelines(d._model),f.prepareStageTasks(),jE(d,!0),jE(d,!1),f.plan()},jE=function(d,f){for(var h=d._model,p=d._scheduler,m=f?d._componentsViews:d._chartsViews,v=f?d._componentsMap:d._chartsMap,g=d._zr,y=d._api,x=0;x<m.length;x++)m[x].__alive=!1;f?h.eachComponent(function(S,C){S!=="series"&&b(C)}):h.eachSeries(b);function b(S){var C=S.__requireNewView;S.__requireNewView=!1;var _="_ec_"+S.id+"_"+S.type,M=!C&&v[_];if(!M){var T=Uu(S.type),E=f?su.getClass(T.main,T.sub):Qc.getClass(T.sub);M=new E,M.init(h,y),v[_]=M,m.push(M),g.add(M.group)}S.__viewId=M.__id=_,M.__alive=!0,M.__model=S,M.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!f&&p.prepareView(M,S,h,y)}for(var x=0;x<m.length;){var A=m[x];A.__alive?x++:(!f&&A.renderTask.dispose(),g.remove(A.group),A.dispose(h,y),m.splice(x,1),v[A.__id]===A&&delete v[A.__id],A.__id=A.group.__ecComponentInfo=null)}},Jw=function(d,f,h,p,m){var v=d._model;if(v.setUpdatePayload(h),!p){mt([].concat(d._componentsViews).concat(d._chartsViews),A);return}var g={};g[p+"Id"]=h[p+"Id"],g[p+"Index"]=h[p+"Index"],g[p+"Name"]=h[p+"Name"];var y={mainType:p,query:g};m&&(y.subType=m);var x=h.excludeSeriesId,b;x!=null&&(b=Vi(),mt(Ao(x),function(S){var C=Ku(S,null);C!=null&&b.set(C,!0)})),v&&v.eachComponent(y,function(S){var C=b&&b.get(S.id)!=null;if(!C)if(KV(h))if(S instanceof gf)h.type===Q0&&!h.notBlur&&!S.get(["emphasis","disabled"])&&QNe(S,h,d._api);else{var _=k7(S.mainType,S.componentIndex,h.name,d._api),M=_.focusSelf,T=_.dispatchers;h.type===Q0&&M&&!h.notBlur&&iR(S.mainType,S.componentIndex,d._api),T&&mt(T,function(E){h.type===Q0?YC(E):XC(E)})}else oR(h)&&S instanceof gf&&(eOe(S,h,d._api),WV(S),kl(d))},d),v&&v.eachComponent(y,function(S){var C=b&&b.get(S.id)!=null;C||A(d[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},d);function A(S){S&&S.__alive&&S[f]&&S[f](S.__model,v,d._api,h)}},Wf={prepareAndUpdate:function(d){uv(this),Wf.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,f){var h=this._model,p=this._api,m=this._zr,v=this._coordSysMgr,g=this._scheduler;if(h){h.setUpdatePayload(d),g.restoreData(h,d),g.performSeriesTasks(h),v.create(h,p),g.performDataProcessorTasks(h,d),QE(this,h),v.update(h,p),t(h),g.performVisualTasks(h,d),JE(this,h,p,d,f);var y=h.get("backgroundColor")||"transparent",x=h.get("darkMode");m.setBackgroundColor(y),x!=null&&x!=="auto"&&m.setDarkMode(x),Oc.trigger("afterupdate",h,p)}},updateTransform:function(d){var f=this,h=this._model,p=this._api;if(h){h.setUpdatePayload(d);var m=[];h.eachComponent(function(g,y){if(g!=="series"){var x=f.getViewOfComponentModel(y);if(x&&x.__alive)if(x.updateTransform){var b=x.updateTransform(y,h,p,d);b&&b.update&&m.push(x)}else m.push(x)}});var v=Vi();h.eachSeries(function(g){var y=f._chartsMap[g.__viewId];if(y.updateTransform){var x=y.updateTransform(g,h,p,d);x&&x.update&&v.set(g.uid,1)}else v.set(g.uid,1)}),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0,dirtyMap:v}),eS(this,h,p,d,{},v),Oc.trigger("afterupdate",h,p)}},updateView:function(d){var f=this._model;f&&(f.setUpdatePayload(d),Qc.markUpdateMethod(d,"updateView"),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0}),JE(this,f,this._api,d,{}),Oc.trigger("afterupdate",f,this._api))},updateVisual:function(d){var f=this,h=this._model;h&&(h.setUpdatePayload(d),h.eachSeries(function(p){p.getData().clearAllVisual()}),Qc.markUpdateMethod(d,"updateVisual"),t(h),this._scheduler.performVisualTasks(h,d,{visualType:"visual",setDirty:!0}),h.eachComponent(function(p,m){if(p!=="series"){var v=f.getViewOfComponentModel(m);v&&v.__alive&&v.updateVisual(m,h,f._api,d)}}),h.eachSeries(function(p){var m=f._chartsMap[p.__viewId];m.updateVisual(p,h,f._api,d)}),Oc.trigger("afterupdate",h,this._api))},updateLayout:function(d){Wf.update.call(this,d)}},$E=function(d,f,h,p){if(d._disposed){d.id;return}for(var m=d._model,v=d._coordSysMgr.getCoordinateSystems(),g,y=bE(m,h),x=0;x<v.length;x++){var b=v[x];if(b[f]&&(g=b[f](m,y,p))!=null)return g}},QE=function(d,f){var h=d._chartsMap,p=d._scheduler;f.eachSeries(function(m){p.updateStreamModes(m,h[m.__viewId])})},ZE=function(d,f){var h=this,p=this.getModel(),m=d.type,v=d.escapeConnect,g=s4[m],y=g.actionInfo,x=(y.update||"update").split(":"),b=x.pop(),A=x[0]!=null&&Uu(x[0]);this[Na]=!0;var S=[d],C=!1;d.batch&&(C=!0,S=fi(d.batch,function(F){return F=Cr(pn({},F),d),F.batch=null,F}));var _=[],M,T=oR(d),E=KV(d);if(E&&cne(this._api),mt(S,function(F){if(M=g.action(F,h._model,h._api),M=M||pn({},F),M.type=y.event||M.type,_.push(M),E){var B=I7(d),P=B.queryOptionMap,z=B.mainTypeSpecified,O=z?P.keys()[0]:"series";Jw(h,b,F,O),kl(h)}else T?(Jw(h,b,F,"series"),kl(h)):A&&Jw(h,b,F,A.main,A.sub)}),b!=="none"&&!E&&!T&&!A)try{this[Ro]?(uv(this),Wf.update.call(this,d),this[Ro]=null):Wf[b].call(this,d)}catch(F){throw this[Na]=!1,F}if(C?M={type:y.event||m,escapeConnect:v,batch:_}:M=_[0],this[Na]=!1,!f){var I=this._messageCenter;if(I.trigger(M.type,M),T){var L={type:"selectchanged",escapeConnect:v,selected:tOe(p),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};I.trigger(L.type,L)}}},o2=function(d){for(var f=this._pendingActions;f.length;){var h=f.shift();ZE.call(this,h,d)}},l2=function(d){!d&&this.trigger("updated")},lG=function(d,f){d.on("rendered",function(h){f.trigger("rendered",h),d.animation.isFinished()&&!f[Ro]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},cG=function(d,f){d.on("mouseover",function(h){var p=h.target,m=Y2(p,aR);m&&(ZNe(m,h,f._api),kl(f))}).on("mouseout",function(h){var p=h.target,m=Y2(p,aR);m&&(JNe(m,h,f._api),kl(f))}).on("click",function(h){var p=h.target,m=Y2(p,function(y){return Rr(y).dataIndex!=null},!0);if(m){var v=m.selected?"unselect":"select",g=Rr(m);f._api.dispatchAction({type:v,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(f){f.clearColorPalette()})}function i(d){var f=[],h=[],p=!1;if(d.eachComponent(function(y,x){var b=x.get("zlevel")||0,A=x.get("z")||0,S=x.getZLevelKey();p=p||!!S,(y==="series"?h:f).push({zlevel:b,z:A,idx:x.componentIndex,type:y,key:S})}),p){var m=f.concat(h),v,g;v_(m,function(y,x){return y.zlevel===x.zlevel?y.z-x.z:y.zlevel-x.zlevel}),mt(m,function(y){var x=d.getComponent(y.type,y.idx),b=y.zlevel,A=y.key;v!=null&&(b=Math.max(v,b)),A?(b===v&&A!==g&&b++,g=A):g&&(b===v&&b++,g=""),v=b,x.setZLevel(b)})}}JE=function(d,f,h,p,m){i(f),uG(d,f,h,p,m),mt(d._chartsViews,function(v){v.__alive=!1}),eS(d,f,h,p,m),mt(d._chartsViews,function(v){v.__alive||v.remove(f,h)})},uG=function(d,f,h,p,m,v){mt(v||d._componentsViews,function(g){var y=g.__model;c(y,g),g.render(y,f,h,p),o(y,g),u(y,g)})},eS=function(d,f,h,p,m,v){var g=d._scheduler;m=pn(m||{},{updatedSeries:f.getSeries()}),Oc.trigger("series:beforeupdate",f,h,m);var y=!1;f.eachSeries(function(x){var b=d._chartsMap[x.__viewId];b.__alive=!0;var A=b.renderTask;g.updatePayload(A,p),c(x,b),v&&v.get(x.uid)&&A.dirty(),A.perform(g.getPerformArgs(A))&&(y=!0),b.group.silent=!!x.get("silent"),a(x,b),WV(x)}),g.unfinished=y||g.unfinished,Oc.trigger("series:layoutlabels",f,h,m),Oc.trigger("series:transition",f,h,m),f.eachSeries(function(x){var b=d._chartsMap[x.__viewId];o(x,b),u(x,b)}),s(d,f),Oc.trigger("series:afterupdate",f,h,m)},kl=function(d){d[YE]=!0,d.getZr().wakeUp()},fG=function(d){d[YE]&&(d.getZr().storage.traverse(function(f){Sb(f)||r(f)}),d[YE]=!1)};function r(d){for(var f=[],h=d.currentStates,p=0;p<h.length;p++){var m=h[p];m==="emphasis"||m==="blur"||m==="select"||f.push(m)}d.selected&&d.states.select&&f.push("select"),d.hoverState===GM&&d.states.emphasis?f.push("emphasis"):d.hoverState===HM&&d.states.blur&&f.push("blur"),d.useStates(f)}function s(d,f){var h=d._zr,p=h.storage,m=0;p.traverse(function(v){v.isGroup||m++}),m>f.get("hoverLayerThreshold")&&!Ai.node&&!Ai.worker&&f.eachSeries(function(v){if(!v.preventUsingHoverLayer){var g=d._chartsMap[v.__viewId];g.__alive&&g.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(d,f){var h=d.get("blendMode")||null;f.eachRendered(function(p){p.isGroup||(p.style.blend=h)})}function o(d,f){if(!d.preventAutoZ){var h=d.get("z")||0,p=d.get("zlevel")||0;f.eachRendered(function(m){return l(m,h,p,-1/0),!0})}}function l(d,f,h,p){var m=d.getTextContent(),v=d.getTextGuideLine(),g=d.isGroup;if(g)for(var y=d.childrenRef(),x=0;x<y.length;x++)p=Math.max(l(y[x],f,h,p),p);else d.z=f,d.zlevel=h,p=Math.max(d.z2,p);if(m&&(m.z=f,m.zlevel=h,isFinite(p)&&(m.z2=p+2)),v){var b=d.textGuideLineConfig;v.z=f,v.zlevel=h,isFinite(p)&&(v.z2=p+(b&&b.showAbove?1:-1))}return p}function c(d,f){f.eachRendered(function(h){if(!Sb(h)){var p=h.getTextContent(),m=h.getTextGuideLine();h.stateTransition&&(h.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),h.hasState()?(h.prevStates=h.currentStates,h.clearStates()):h.prevStates&&(h.prevStates=null)}})}function u(d,f){var h=d.getModel("stateAnimation"),p=d.isAnimationEnabled(),m=h.get("duration"),v=m>0?{duration:m,delay:h.get("delay"),easing:h.get("easing")}:null;f.eachRendered(function(g){if(g.states&&g.states.emphasis){if(Sb(g))return;if(g instanceof Gr&&aOe(g),g.__dirty){var y=g.prevStates;y&&g.useStates(y)}if(p){g.stateTransition=v;var x=g.getTextContent(),b=g.getTextGuideLine();x&&(x.stateTransition=v),b&&(b.stateTransition=v)}g.__dirty&&r(g)}})}dG=function(d){return new(function(f){kn(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},h.prototype.getComponentByElement=function(p){for(;p;){var m=p.__ecComponentInfo;if(m!=null)return d._model.getComponent(m.mainType,m.index);p=p.parent}},h.prototype.enterEmphasis=function(p,m){YC(p,m),kl(d)},h.prototype.leaveEmphasis=function(p,m){XC(p,m),kl(d)},h.prototype.enterBlur=function(p){$Ne(p),kl(d)},h.prototype.leaveBlur=function(p){sne(p),kl(d)},h.prototype.enterSelect=function(p){ane(p),kl(d)},h.prototype.leaveSelect=function(p){one(p),kl(d)},h.prototype.getModel=function(){return d.getModel()},h.prototype.getViewOfComponentModel=function(p){return d.getViewOfComponentModel(p)},h.prototype.getViewOfSeriesModel=function(p){return d.getViewOfSeriesModel(p)},h}(Yne))(d)},Uie=function(d){function f(h,p){for(var m=0;m<h.length;m++){var v=h[m];v[XE]=p}}mt(Tb,function(h,p){d._messageCenter.on(p,function(m){if(hG[d.group]&&d[XE]!==oG){if(m&&m.escapeConnect)return;var v=d.makeActionFromEvent(m),g=[];mt(Eb,function(y){y!==d&&y.group===d.group&&g.push(y)}),f(g,oG),mt(g,function(y){y[XE]!==nVe&&y.dispatchAction(v)}),f(g,iVe)}})})}}(),e}(ld),sF=zie.prototype;sF.on=kie("on");sF.off=kie("off");sF.one=function(n,e,t){var i=this;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];e&&e.apply&&e.apply(this,s),i.off(n,r)}this.on.call(this,n,r,t)};var rVe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],s4={},Tb={},wR=[],SR=[],a4=[],Vie={},_R={},Eb={},hG={},sVe=+new Date-0,aF="_echarts_instance_";function aVe(n,e,t){var i=!(t&&t.ssr);if(i){var r=oVe(n);if(r)return r}var s=new zie(n,e,t);return s.id="ec_"+sVe++,Eb[s.id]=s,i&&Gte(n,aF,s.id),Uie(s),Oc.trigger("afterinit",s),s}function oVe(n){return Eb[zBe(n,aF)]}function Hie(n,e){Vie[n]=e}function Gie(n){Nr(SR,n)<0&&SR.push(n)}function Wie(n,e){lF(wR,n,e,Xze)}function lVe(n){oF("afterinit",n)}function cVe(n){oF("afterupdate",n)}function oF(n,e){Oc.on(n,e)}function vy(n,e,t){Ci(e)&&(t=e,e="");var i=hi(n)?n.type:[n,n={event:e}][0];n.event=(n.event||i).toLowerCase(),e=n.event,!Tb[e]&&(mf(aG.test(i)&&aG.test(e)),s4[i]||(s4[i]={action:t,actionInfo:n}),Tb[e]=i)}function uVe(n,e){J7.register(n,e)}function dVe(n,e){lF(a4,n,e,Rie,"layout")}function Lm(n,e){lF(a4,n,e,Pie,"visual")}var pG=[];function lF(n,e,t,i,r){if((Ci(e)||hi(e))&&(t=e,e=i),!(Nr(pG,t)>=0)){pG.push(t);var s=gie.wrapStageHandler(t,r);s.__prio=e,s.__raw=t,n.push(s)}}function qie(n,e){_R[n]=e}function fVe(n,e,t){var i=Gze("registerMap");i&&i(n,e,t)}var hVe=gUe;Lm(rF,YUe);Lm(oT,XUe);Lm(oT,jUe);Lm(rF,lze);Lm(oT,cze);Lm(Lie,Vze);Gie(jne);Wie(Kze,J9e);qie("default",$Ue);vy({type:Q0,event:Q0,update:Q0},$o);vy({type:S_,event:S_,update:S_},$o);vy({type:xb,event:xb,update:xb},$o);vy({type:__,event:__,update:__},$o);vy({type:Ab,event:Ab,update:Ab},$o);Hie("light",aze);Hie("dark",Aie);function c2(n){return n==null?0:n.length||1}function mG(n){return n}var pVe=function(){function n(e,t,i,r,s,a){this._old=e,this._new=t,this._oldKeyGetter=i||mG,this._newKeyGetter=r||mG,this.context=s,this._diffModeMultiple=a==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,i={},r=new Array(e.length),s=new Array(t.length);this._initIndexMap(e,null,r,"_oldKeyGetter"),this._initIndexMap(t,i,s,"_newKeyGetter");for(var a=0;a<e.length;a++){var o=r[a],l=i[o],c=c2(l);if(c>1){var u=l.shift();l.length===1&&(i[o]=l[0]),this._update&&this._update(u,a)}else c===1?(i[o]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(s,i)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,i={},r={},s=[],a=[];this._initIndexMap(e,i,s,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<s.length;o++){var l=s[o],c=i[l],u=r[l],d=c2(c),f=c2(u);if(d>1&&f===1)this._updateManyToOne&&this._updateManyToOne(u,c),r[l]=null;else if(d===1&&f>1)this._updateOneToMany&&this._updateOneToMany(u,c),r[l]=null;else if(d===1&&f===1)this._update&&this._update(u,c),r[l]=null;else if(d>1&&f>1)this._updateManyToMany&&this._updateManyToMany(u,c),r[l]=null;else if(d>1)for(var h=0;h<d;h++)this._remove&&this._remove(c[h]);else this._remove&&this._remove(c)}this._performRestAdd(a,r)},n.prototype._performRestAdd=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],s=t[r],a=c2(s);if(a>1)for(var o=0;o<a;o++)this._add&&this._add(s[o]);else a===1&&this._add&&this._add(s);t[r]=null}},n.prototype._initIndexMap=function(e,t,i,r){for(var s=this._diffModeMultiple,a=0;a<e.length;a++){var o="_ec_"+this[r](e[a],a);if(s||(i[a]=o),!!t){var l=t[o],c=c2(l);c===0?(t[o]=a,s&&i.push(o)):c===1?t[o]=[l,a]:l.push(a)}}},n}(),mVe=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function vVe(n,e){var t={},i=t.encode={},r=Vi(),s=[],a=[],o={};mt(n.dimensions,function(f){var h=n.getDimensionInfo(f),p=h.coordDim;if(p){var m=h.coordDimIndex;e6(i,p)[m]=f,h.isExtraCoord||(r.set(p,1),yVe(h.type)&&(s[0]=f),e6(o,p)[m]=n.getDimensionIndex(h.name)),h.defaultTooltip&&a.push(f)}Hne.each(function(v,g){var y=e6(i,g),x=h.otherDims[g];x!=null&&x!==!1&&(y[x]=h.name)})});var l=[],c={};r.each(function(f,h){var p=i[h];c[h]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=fi(l,function(f){return n.getDimensionInfo(f).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=i.label;u&&u.length&&(s=u.slice());var d=i.tooltip;return d&&d.length?a=d.slice():a.length||(a=s.slice()),i.defaultedLabel=s,i.defaultedTooltip=a,t.userOutput=new mVe(o,e),t}function e6(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function gVe(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function yVe(n){return!(n==="ordinal"||n==="time")}var E_=function(){function n(e){this.otherDims={},e!=null&&pn(this,e)}return n}(),bVe=Ls(),xVe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Kie=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=jie(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return ki(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=Zne(this.source),i=!$ie(e),r="",s=[],a=0,o=0;a<e;a++){var l=void 0,c=void 0,u=void 0,d=this.dimensions[o];if(d&&d.storeDimIndex===a)l=t?d.name:null,c=d.type,u=d.ordinalMeta,o++;else{var f=this.getSourceDimension(a);f&&(l=t?f.name:null,c=f.type)}s.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(r+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),r+="$",r+=xVe[c]||"f",u&&(r+=u.uid),r+="$"}var h=this.source,p=[h.seriesLayoutBy,h.startIndex,r].join("$$");return{dimensions:s,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,i=0;t<this._fullDimCount;t++){var r=void 0,s=this.dimensions[i];if(s&&s.storeDimIndex===t)s.isCalculationCoord||(r=s.name),i++;else{var a=this.getSourceDimension(t);a&&(r=a.name)}e.push(r)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function Yie(n){return n instanceof Kie}function Xie(n){for(var e=Vi(),t=0;t<(n||[]).length;t++){var i=n[t],r=hi(i)?i.name:i;r!=null&&e.get(r)==null&&e.set(r,t)}return e}function jie(n){var e=bVe(n);return e.dimNameMap||(e.dimNameMap=Xie(n.dimensionsDefine))}function $ie(n){return n>30}var u2=hi,qf=fi,AVe=typeof Int32Array>"u"?Array:Int32Array,wVe="e\0\0",vG=-1,SVe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],_Ve=["_approximateExtent"],gG,tS,d2,f2,t6,h2,n6,Qie=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var i,r=!1;Yie(e)?(i=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(r=!0,i=e),i=i||["x","y"];for(var s={},a=[],o={},l=!1,c={},u=0;u<i.length;u++){var d=i[u],f=ri(d)?new E_({name:d}):d instanceof E_?d:new E_(d),h=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=h,f.coordDimIndex=0);var p=f.otherDims=f.otherDims||{};a.push(h),s[h]=f,c[h]!=null&&(l=!0),f.createInvertedIndices&&(o[h]=[]),p.itemName===0&&(this._nameDimIdx=u),p.itemId===0&&(this._idDimIdx=u),r&&(f.storeDimIndex=u)}if(this.dimensions=a,this._dimInfos=s,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var m=this._dimIdxToName=Vi();mt(a,function(v){m.set(s[v].storeDimIndex,v)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var i=this._dimIdxToName.get(t);if(i!=null)return i;var r=this._schema.getSourceDimension(t);if(r)return r.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var i=this._getDimInfo(e);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(jr(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(i){return t.hasOwnProperty(i)?t[i]:void 0}:function(i){return t[i]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var i=this._dimSummary;if(t==null)return i.encodeFirstDimNotExtra[e];var r=i.encode[e];return r?r[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,i=t.encode[e];return(i||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,i){var r=this,s;if(e instanceof fR&&(s=e),!s){var a=this.dimensions,o=eF(e)||el(e)?new Jne(e,a.length):e;s=new fR;var l=qf(a,function(c){return{type:r._dimInfos[c].type,property:c}});s.initData(o,l,i)}this._store=s,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=vVe(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var i=this._store.appendValues(e,t&&t.length),r=i.start,s=i.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=r;o<s;o++){var l=o-r;this._nameList[o]=t[l],a&&n6(this,o)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,i=0;i<t.length;i++){var r=this._dimInfos[t[i]];r.ordinalMeta&&e.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Wh&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var i=this._store,r=i.getProvider();this._updateOrdinalMeta();var s=this._nameList,a=this._idList,o=r.getSource().sourceFormat,l=o===xc;if(l&&!r.pure)for(var c=[],u=e;u<t;u++){var d=r.getItem(u,c);if(!this.hasItemOption&&IBe(d)&&(this.hasItemOption=!0),d){var f=d.name;s[u]==null&&f!=null&&(s[u]=Ku(f,null));var h=d.id;a[u]==null&&h!=null&&(a[u]=Ku(h,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)n6(this,u);gG(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){u2(e)?pn(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),i=this._nameList[t];return i==null&&this._nameDimIdx!=null&&(i=d2(this,this._nameDimIdx,t)),i==null&&(i=""),i},n.prototype._getCategory=function(e,t){var i=this._store.get(e,t),r=this._store.getOrdinalMeta(e);return r?r.categories[i]:i},n.prototype.getId=function(e){return tS(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var i=this._store,r=this._dimInfos[e];if(r)return i.get(r.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var i=this._store,r=this._dimInfos[e];if(r)return i.getByRawIndex(r.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var i=this,r=this._store;return Un(e)?r.getValues(qf(e,function(s){return i._getStoreDimIndex(s)}),t):r.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,i=0,r=t.length;i<r;i++)if(isNaN(this._store.get(t[i],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,i=this._store.count();t<i;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var i=e&&this._invertedIndicesMap[e],r=i&&i[t];return r==null||isNaN(r)?vG:r},n.prototype.indicesOfNearest=function(e,t,i){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,i)},n.prototype.each=function(e,t,i){Ci(e)&&(i=t,t=e,e=[]);var r=i||this,s=qf(f2(e),this._getStoreDimIndex,this);this._store.each(s,r?Xr(t,r):t)},n.prototype.filterSelf=function(e,t,i){Ci(e)&&(i=t,t=e,e=[]);var r=i||this,s=qf(f2(e),this._getStoreDimIndex,this);return this._store=this._store.filter(s,r?Xr(t,r):t),this},n.prototype.selectRange=function(e){var t=this,i={},r=hs(e);return mt(r,function(s){var a=t._getStoreDimIndex(s);i[a]=e[s]}),this._store=this._store.selectRange(i),this},n.prototype.mapArray=function(e,t,i){Ci(e)&&(i=t,t=e,e=[]),i=i||this;var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},i),r},n.prototype.map=function(e,t,i,r){var s=i||r||this,a=qf(f2(e),this._getStoreDimIndex,this),o=h2(this);return o._store=this._store.map(a,s?Xr(t,s):t),o},n.prototype.modify=function(e,t,i,r){var s=i||r||this,a=qf(f2(e),this._getStoreDimIndex,this);this._store.modify(a,s?Xr(t,s):t)},n.prototype.downSample=function(e,t,i,r){var s=h2(this);return s._store=this._store.downSample(this._getStoreDimIndex(e),t,i,r),s},n.prototype.minmaxDownSample=function(e,t){var i=h2(this);return i._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),i},n.prototype.lttbDownSample=function(e,t){var i=h2(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),i},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,i=this.getRawDataItem(e);return new xs(i,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new pVe(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(i){return tS(e,i)},function(i){return tS(t,i)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},u2(e)?pn(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var i=this._itemVisuals[e],r=i&&i[t];return r??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var i=this._itemVisuals,r=i[e];r||(r=i[e]={});var s=r[t];return s==null&&(s=this.getVisual(t),Un(s)?s=s.slice():u2(s)&&(s=pn({},s)),r[t]=s),s},n.prototype.setItemVisual=function(e,t,i){var r=this._itemVisuals[e]||{};this._itemVisuals[e]=r,u2(t)?pn(r,t):r[t]=i},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){u2(e)?pn(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,i){this._itemLayouts[e]=i?pn(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var i=this.hostModel&&this.hostModel.seriesIndex;zNe(i,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){mt(this._graphicEls,function(i,r){i&&e&&e.call(t,i,r)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:qf(this.dimensions,this._getDimInfo,this),this.hostModel)),t6(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var i=this[e];Ci(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var r=i.apply(this,arguments);return t.apply(this,[r].concat(y7(arguments)))})},n.internalField=function(){gG=function(e){var t=e._invertedIndicesMap;mt(t,function(i,r){var s=e._dimInfos[r],a=s.ordinalMeta,o=e._store;if(a){i=t[r]=new AVe(a.categories.length);for(var l=0;l<i.length;l++)i[l]=vG;for(var l=0;l<o.count();l++)i[o.get(s.storeDimIndex,l)]=l}})},d2=function(e,t,i){return Ku(e._getCategory(t,i),null)},tS=function(e,t){var i=e._idList[t];return i==null&&e._idDimIdx!=null&&(i=d2(e,e._idDimIdx,t)),i==null&&(i=wVe+t),i},f2=function(e){return Un(e)||(e=e!=null?[e]:[]),e},h2=function(e){var t=new n(e._schema?e._schema:qf(e.dimensions,e._getDimInfo,e),e.hostModel);return t6(t,e),t},t6=function(e,t){mt(SVe.concat(t.__wrappedMethods||[]),function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e.__wrappedMethods=t.__wrappedMethods,mt(_Ve,function(i){e[i]=or(t[i])}),e._calculationInfo=pn({},t._calculationInfo)},n6=function(e,t){var i=e._nameList,r=e._idList,s=e._nameDimIdx,a=e._idDimIdx,o=i[t],l=r[t];if(o==null&&s!=null&&(i[t]=o=d2(e,s,t)),l==null&&a!=null&&(r[t]=l=d2(e,a,t)),l==null&&o!=null){var c=e._nameRepeatCount,u=c[o]=(c[o]||0)+1;l=o,u>1&&(l+="__ec__"+u),r[t]=l}}}(),n}();function Zie(n,e){eF(n)||(n=$ne(n)),e=e||{};var t=e.coordDimensions||[],i=e.dimensionsDefine||n.dimensionsDefine||[],r=Vi(),s=[],a=MVe(n,t,i,e.dimensionsCount),o=e.canOmitUnusedDimensions&&$ie(a),l=i===n.dimensionsDefine,c=l?jie(n):Xie(i),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(n,a));for(var d=Vi(u),f=new rie(a),h=0;h<f.length;h++)f[h]=-1;function p(M){var T=f[M];if(T<0){var E=i[M],I=hi(E)?E:{name:E},L=new E_,F=I.name;F!=null&&c.get(F)!=null&&(L.name=L.displayName=F),I.type!=null&&(L.type=I.type),I.displayName!=null&&(L.displayName=I.displayName);var B=s.length;return f[M]=B,L.storeDimIndex=M,s.push(L),L}return s[T]}if(!o)for(var h=0;h<a;h++)p(h);d.each(function(M,T){var E=Ao(M).slice();if(E.length===1&&!ri(E[0])&&E[0]<0){d.set(T,!1);return}var I=d.set(T,[]);mt(E,function(L,F){var B=ri(L)?c.get(L):L;B!=null&&B<a&&(I[F]=B,v(p(B),T,F))})});var m=0;mt(t,function(M){var T,E,I,L;if(ri(M))T=M,L={};else{L=M,T=L.name;var F=L.ordinalMeta;L.ordinalMeta=null,L=pn({},L),L.ordinalMeta=F,E=L.dimsDef,I=L.otherDims,L.name=L.coordDim=L.coordDimIndex=L.dimsDef=L.otherDims=null}var B=d.get(T);if(B!==!1){if(B=Ao(B),!B.length)for(var P=0;P<(E&&E.length||1);P++){for(;m<a&&p(m).coordDim!=null;)m++;m<a&&B.push(m++)}mt(B,function(z,O){var N=p(z);if(l&&L.type!=null&&(N.type=L.type),v(Cr(N,L),T,O),N.name==null&&E){var H=E[O];!hi(H)&&(H={name:H}),N.name=N.displayName=H.name,N.defaultTooltip=H.defaultTooltip}I&&Cr(N.otherDims,I)})}});function v(M,T,E){Hne.get(T)!=null?M.otherDims[T]=E:(M.coordDim=T,M.coordDimIndex=E,r.set(T,!0))}var g=e.generateCoord,y=e.generateCoordCount,x=y!=null;y=g?y||1:0;var b=g||"value";function A(M){M.name==null&&(M.name=M.coordDim)}if(o)mt(s,function(M){A(M)}),s.sort(function(M,T){return M.storeDimIndex-T.storeDimIndex});else for(var S=0;S<a;S++){var C=p(S),_=C.coordDim;_==null&&(C.coordDim=TVe(b,r,x),C.coordDimIndex=0,(!g||y<=0)&&(C.isExtraCoord=!0),y--),A(C),C.type==null&&(qne(n,S)===Aa.Must||C.isExtraCoord&&(C.otherDims.itemName!=null||C.otherDims.seriesName!=null))&&(C.type="ordinal")}return CVe(s),new Kie({source:n,dimensions:s,fullDimensionCount:a,dimensionOmitted:o})}function CVe(n){for(var e=Vi(),t=0;t<n.length;t++){var i=n[t],r=i.name,s=e.get(r)||0;s>0&&(i.name=r+(s-1)),s++,e.set(r,s)}}function MVe(n,e,t,i){var r=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,i||0);return mt(e,function(s){var a;hi(s)&&(a=s.dimsDef)&&(r=Math.max(r,a.length))}),r}function TVe(n,e,t){if(t||e.hasKey(n)){for(var i=0;e.hasKey(n+i);)i++;n+=i}return e.set(n,!0),n}var EVe=function(){function n(e){this.coordSysDims=[],this.axisMap=Vi(),this.categoryAxisMap=Vi(),this.coordSysName=e}return n}();function IVe(n){var e=n.get("coordinateSystem"),t=new EVe(e),i=DVe[e];if(i)return i(n,t,t.axisMap,t.categoryAxisMap),t}var DVe={cartesian2d:function(n,e,t,i){var r=n.getReferringComponents("xAxis",qc).models[0],s=n.getReferringComponents("yAxis",qc).models[0];e.coordSysDims=["x","y"],t.set("x",r),t.set("y",s),dv(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),dv(s)&&(i.set("y",s),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(n,e,t,i){var r=n.getReferringComponents("singleAxis",qc).models[0];e.coordSysDims=["single"],t.set("single",r),dv(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(n,e,t,i){var r=n.getReferringComponents("polar",qc).models[0],s=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",s),t.set("angle",a),dv(s)&&(i.set("radius",s),e.firstCategoryDimIndex=0),dv(a)&&(i.set("angle",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(n,e,t,i){e.coordSysDims=["lng","lat"]},parallel:function(n,e,t,i){var r=n.ecModel,s=r.getComponent("parallel",n.get("parallelIndex")),a=e.coordSysDims=s.dimensions.slice();mt(s.parallelAxisIndex,function(o,l){var c=r.getComponent("parallelAxis",o),u=a[l];t.set(u,c),dv(c)&&(i.set(u,c),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function dv(n){return n.get("type")==="category"}function RVe(n,e,t){t=t||{};var i=t.byIndex,r=t.stackedCoordDimension,s,a,o;PVe(e)?s=e:(a=e.schema,s=a.dimensions,o=e.store);var l=!!(n&&n.get("stack")),c,u,d,f;if(mt(s,function(y,x){ri(y)&&(s[x]=y={name:y}),l&&!y.isExtraCoord&&(!i&&!c&&y.ordinalMeta&&(c=y),!u&&y.type!=="ordinal"&&y.type!=="time"&&(!r||r===y.coordDim)&&(u=y))}),u&&!i&&!c&&(i=!0),u){d="__\0ecstackresult_"+n.id,f="__\0ecstackedover_"+n.id,c&&(c.createInvertedIndices=!0);var h=u.coordDim,p=u.type,m=0;mt(s,function(y){y.coordDim===h&&m++});var v={name:d,coordDim:h,coordDimIndex:m,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length},g={name:f,coordDim:f,coordDimIndex:m+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:s.length+1};a?(o&&(v.storeDimIndex=o.ensureCalculationDimension(f,p),g.storeDimIndex=o.ensureCalculationDimension(d,p)),a.appendCalculationDimension(v),a.appendCalculationDimension(g)):(s.push(v),s.push(g))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:i,stackedOverDimension:f,stackResultDimension:d}}function PVe(n){return!Yie(n.schema)}function kx(n,e){return!!e&&e===n.getCalculationInfo("stackedDimension")}function LVe(n,e){return kx(n,e)?n.getCalculationInfo("stackResultDimension"):e}function kVe(n,e){var t=n.get("coordinateSystem"),i=J7.get(t),r;return e&&e.coordSysDims&&(r=fi(e.coordSysDims,function(s){var a={name:s},o=e.axisMap.get(s);if(o){var l=o.get("type");a.type=gVe(l)}return a})),r||(r=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),r}function FVe(n,e,t){var i,r;return t&&mt(n,function(s,a){var o=s.coordDim,l=t.categoryAxisMap.get(o);l&&(i==null&&(i=a),s.ordinalMeta=l.getOrdinalMeta(),e&&(s.createInvertedIndices=!0)),s.otherDims.itemName!=null&&(r=!0)}),!r&&i!=null&&(n[i].otherDims.itemName=0),i}function BVe(n,e,t){t=t||{};var i=e.getSourceManager(),r,s=!1;r=i.getSource(),s=r.sourceFormat===xc;var a=IVe(e),o=kVe(e,a),l=t.useEncodeDefaulter,c=Ci(l)?l:l?Ns(E9e,o,e):null,u={coordDimensions:o,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!s},d=Zie(r,u),f=FVe(d.dimensions,t.createInvertedIndices,a),h=s?null:i.getSharedDataStore(d),p=RVe(e,{schema:d,store:h}),m=new Qie(d,e);m.setCalculationInfo(p);var v=f!=null&&NVe(r)?function(g,y,x,b){return b===f?x:this.defaultDimValueGetter(g,y,x,b)}:null;return m.hasItemOption=!1,m.initData(s?r:h,null,v),m}function NVe(n){if(n.sourceFormat===xc){var e=OVe(n.data||[]);return!Un(DA(e))}}function OVe(n){for(var e=0;e<n.length&&n[e]==null;)e++;return n[e]}var ud=function(){function n(e){this._setting=e||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(e){return this._setting[e]},n.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},n.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(e,t){var i=this._extent;isNaN(e)||(i[0]=e),isNaN(t)||(i[1]=t)},n.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(e){this._isBlank=e},n}();UM(ud);var UVe=0,CR=function(){function n(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++UVe}return n.createByAxisModel=function(e){var t=e.option,i=t.data,r=i&&fi(i,zVe);return new n({categories:r,needCollect:!r,deduplication:t.dedplication!==!1})},n.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},n.prototype.parseAndCollect=function(e){var t,i=this._needCollect;if(!ri(e)&&!i)return e;if(i&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var r=this._getOrCreateMap();return t=r.get(e),t==null&&(i?(t=this.categories.length,this.categories[t]=e,r.set(e,t)):t=NaN),t},n.prototype._getOrCreateMap=function(){return this._map||(this._map=Vi(this.categories))},n}();function zVe(n){return hi(n)&&n.value!=null?n.value:n+""}function MR(n){return n.type==="interval"||n.type==="log"}function VVe(n,e,t,i){var r={},s=n[1]-n[0],a=r.interval=Ote(s/e);t!=null&&a<t&&(a=r.interval=t),i!=null&&a>i&&(a=r.interval=i);var o=r.intervalPrecision=Jie(a),l=r.niceTickExtent=[Os(Math.ceil(n[0]/a)*a,o),Os(Math.floor(n[1]/a)*a,o)];return HVe(l,n),r}function i6(n){var e=Math.pow(10,T7(n)),t=n/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,Os(t*e)}function Jie(n){return $d(n)+2}function yG(n,e,t){n[e]=Math.max(Math.min(n[e],t[1]),t[0])}function HVe(n,e){!isFinite(n[0])&&(n[0]=e[0]),!isFinite(n[1])&&(n[1]=e[1]),yG(n,0,e),yG(n,1,e),n[0]>n[1]&&(n[0]=n[1])}function lT(n,e){return n>=e[0]&&n<=e[1]}function cT(n,e){return e[1]===e[0]?.5:(n-e[0])/(e[1]-e[0])}function uT(n,e){return n*(e[1]-e[0])+e[0]}var cF=function(n){kn(e,n);function e(t){var i=n.call(this,t)||this;i.type="ordinal";var r=i.getSetting("ordinalMeta");return r||(r=new CR({})),Un(r)&&(r=new CR({categories:fi(r,function(s){return hi(s)?s.value:s})})),i._ordinalMeta=r,i._extent=i.getSetting("extent")||[0,r.categories.length-1],i}return e.prototype.parse=function(t){return t==null?NaN:ri(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),lT(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),cT(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(uT(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],i=this._extent,r=i[0];r<=i[1];)t.push({value:r}),r++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=t.ordinalNumbers,r=this._ordinalNumbersByTick=[],s=this._ticksByOrdinalNumber=[],a=0,o=this._ordinalMeta.categories.length,l=Math.min(o,i.length);a<l;++a){var c=i[a];r[a]=c,s[c]=a}for(var u=0;a<o;++a){for(;s[u]!=null;)u++;r.push(u),s[u]=a}},e.prototype._getTickNumber=function(t){var i=this._ticksByOrdinalNumber;return i&&t>=0&&t<i.length?i[t]:t},e.prototype.getRawOrdinalNumber=function(t){var i=this._ordinalNumbersByTick;return i&&t>=0&&t<i.length?i[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var i=this.getRawOrdinalNumber(t.value),r=this._ordinalMeta.categories[i];return r==null?"":r+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,i){this.unionExtent(t.getApproximateExtent(i))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(ud);ud.registerClass(cF);var n0=Os,gy=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return lT(t,this._extent)},e.prototype.normalize=function(t){return cT(t,this._extent)},e.prototype.scale=function(t){return uT(t,this._extent)},e.prototype.setExtent=function(t,i){var r=this._extent;isNaN(t)||(r[0]=parseFloat(t)),isNaN(i)||(r[1]=parseFloat(i))},e.prototype.unionExtent=function(t){var i=this._extent;t[0]<i[0]&&(i[0]=t[0]),t[1]>i[1]&&(i[1]=t[1]),this.setExtent(i[0],i[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Jie(t)},e.prototype.getTicks=function(t){var i=this._interval,r=this._extent,s=this._niceExtent,a=this._intervalPrecision,o=[];if(!i)return o;var l=1e4;r[0]<s[0]&&(t?o.push({value:n0(s[0]-i,a)}):o.push({value:r[0]}));for(var c=s[0];c<=s[1]&&(o.push({value:c}),c=n0(c+i,a),c!==o[o.length-1].value);)if(o.length>l)return[];var u=o.length?o[o.length-1].value:s[1];return r[1]>u&&(t?o.push({value:n0(u+i,a)}):o.push({value:r[1]})),o},e.prototype.getMinorTicks=function(t){for(var i=this.getTicks(!0),r=[],s=this.getExtent(),a=1;a<i.length;a++){for(var o=i[a],l=i[a-1],c=0,u=[],d=o.value-l.value,f=d/t;c<t-1;){var h=n0(l.value+(c+1)*f);h>s[0]&&h<s[1]&&u.push(h),c++}r.push(u)}return r},e.prototype.getLabel=function(t,i){if(t==null)return"";var r=i&&i.precision;r==null?r=$d(t.value)||0:r==="auto"&&(r=this._intervalPrecision);var s=n0(t.value,r,!0);return One(s)},e.prototype.calcNiceTicks=function(t,i,r){t=t||5;var s=this._extent,a=s[1]-s[0];if(isFinite(a)){a<0&&(a=-a,s.reverse());var o=VVe(s,t,i,r);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var r=Math.abs(i[0]);t.fixMax||(i[1]+=r/2),i[0]-=r/2}else i[1]=1;var s=i[1]-i[0];isFinite(s)||(i[0]=0,i[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var a=this._interval;t.fixMin||(i[0]=n0(Math.floor(i[0]/a)*a)),t.fixMax||(i[1]=n0(Math.ceil(i[1]/a)*a))},e.prototype.setNiceExtent=function(t,i){this._niceExtent=[t,i]},e.type="interval",e}(ud);ud.registerClass(gy);var ere=typeof Float32Array<"u",GVe=ere?Float32Array:Array;function Mg(n){return Un(n)?ere?new Float32Array(n):n:new GVe(n)}var WVe="__ec_stack_";function qVe(n){return n.get("stack")||WVe+n.seriesIndex}function tre(n){return n.dim+n.index}function KVe(n,e){var t=[];return e.eachSeriesByType(n,function(i){QVe(i)&&t.push(i)}),t}function YVe(n){var e={};mt(n,function(l){var c=l.coordinateSystem,u=c.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var d=l.getData(),f=u.dim+"_"+u.index,h=d.getDimensionIndex(d.mapDimension(u.dim)),p=d.getStore(),m=0,v=p.count();m<v;++m){var g=p.get(h,m);e[f]?e[f].push(g):e[f]=[g]}});var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(r){r.sort(function(l,c){return l-c});for(var s=null,a=1;a<r.length;++a){var o=r[a]-r[a-1];o>0&&(s=s===null?o:Math.min(s,o))}t[i]=s}}return t}function XVe(n){var e=YVe(n),t=[];return mt(n,function(i){var r=i.coordinateSystem,s=r.getBaseAxis(),a=s.getExtent(),o;if(s.type==="category")o=s.getBandWidth();else if(s.type==="value"||s.type==="time"){var l=s.dim+"_"+s.index,c=e[l],u=Math.abs(a[1]-a[0]),d=s.scale.getExtent(),f=Math.abs(d[1]-d[0]);o=c?u/f*c:u}else{var h=i.getData();o=Math.abs(a[1]-a[0])/h.count()}var p=cs(i.get("barWidth"),o),m=cs(i.get("barMaxWidth"),o),v=cs(i.get("barMinWidth")||(ZVe(i)?.5:1),o),g=i.get("barGap"),y=i.get("barCategoryGap");t.push({bandWidth:o,barWidth:p,barMaxWidth:m,barMinWidth:v,barGap:g,barCategoryGap:y,axisKey:tre(s),stackId:qVe(i)})}),jVe(t)}function jVe(n){var e={};mt(n,function(i,r){var s=i.axisKey,a=i.bandWidth,o=e[s]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=o.stacks;e[s]=o;var c=i.stackId;l[c]||o.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var u=i.barWidth;u&&!l[c].width&&(l[c].width=u,u=Math.min(o.remainedWidth,u),o.remainedWidth-=u);var d=i.barMaxWidth;d&&(l[c].maxWidth=d);var f=i.barMinWidth;f&&(l[c].minWidth=f);var h=i.barGap;h!=null&&(o.gap=h);var p=i.barCategoryGap;p!=null&&(o.categoryGap=p)});var t={};return mt(e,function(i,r){t[r]={};var s=i.stacks,a=i.bandWidth,o=i.categoryGap;if(o==null){var l=hs(s).length;o=Math.max(35-l*4,15)+"%"}var c=cs(o,a),u=cs(i.gap,1),d=i.remainedWidth,f=i.autoWidthCount,h=(d-c)/(f+(f-1)*u);h=Math.max(h,0),mt(s,function(g){var y=g.maxWidth,x=g.minWidth;if(g.width){var b=g.width;y&&(b=Math.min(b,y)),x&&(b=Math.max(b,x)),g.width=b,d-=b+u*b,f--}else{var b=h;y&&y<b&&(b=Math.min(y,d)),x&&x>b&&(b=x),b!==h&&(g.width=b,d-=b+u*b,f--)}}),h=(d-c)/(f+(f-1)*u),h=Math.max(h,0);var p=0,m;mt(s,function(g,y){g.width||(g.width=h),m=g,p+=g.width*(1+u)}),m&&(p-=m.width*u);var v=-p/2;mt(s,function(g,y){t[r][y]=t[r][y]||{bandWidth:a,offset:v,width:g.width},v+=g.width*(1+u)})}),t}function $Ve(n,e,t){if(n&&e){var i=n[tre(e)];return i}}function QVe(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function ZVe(n){return n.pipelineContext&&n.pipelineContext.large}var JVe=function(n,e,t,i){for(;t<i;){var r=t+i>>>1;n[r][1]<e?t=r+1:i=r}return t},nre=function(n){kn(e,n);function e(t){var i=n.call(this,t)||this;return i.type="time",i}return e.prototype.getLabel=function(t){var i=this.getSetting("useUTC");return ZM(t.value,cH[y9e(Jg(this._minLevelUnit))]||cH.second,i,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,i,r){var s=this.getSetting("useUTC"),a=this.getSetting("locale");return b9e(t,i,r,a,s)},e.prototype.getTicks=function(){var t=this._interval,i=this._extent,r=[];if(!t)return r;r.push({value:i[0],level:0});var s=this.getSetting("useUTC"),a=aHe(this._minLevelUnit,this._approxInterval,s,i);return r=r.concat(a),r.push({value:i[1],level:0}),r},e.prototype.calcNiceExtent=function(t){var i=this._extent;if(i[0]===i[1]&&(i[0]-=Zl,i[1]+=Zl),i[1]===-1/0&&i[0]===1/0){var r=new Date;i[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate()),i[0]=i[1]-Zl}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,i,r){t=t||10;var s=this._extent,a=s[1]-s[0];this._approxInterval=a/t,i!=null&&this._approxInterval<i&&(this._approxInterval=i),r!=null&&this._approxInterval>r&&(this._approxInterval=r);var o=nS.length,l=Math.min(JVe(nS,this._approxInterval,0,o),o-1);this._interval=nS[l][1],this._minLevelUnit=nS[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return jr(t)?t:+vf(t)},e.prototype.contain=function(t){return lT(this.parse(t),this._extent)},e.prototype.normalize=function(t){return cT(this.parse(t),this._extent)},e.prototype.scale=function(t){return uT(t,this._extent)},e.type="time",e}(gy),nS=[["second",K7],["minute",Y7],["hour",_b],["quarter-day",_b*6],["half-day",_b*12],["day",Zl*1.2],["half-week",Zl*3.5],["week",Zl*7],["month",Zl*31],["quarter",Zl*95],["half-year",lH/2],["year",lH]];function eHe(n,e,t,i){var r=vf(e),s=vf(t),a=function(p){return uH(r,p,i)===uH(s,p,i)},o=function(){return a("year")},l=function(){return o()&&a("month")},c=function(){return l()&&a("day")},u=function(){return c()&&a("hour")},d=function(){return u()&&a("minute")},f=function(){return d()&&a("second")},h=function(){return f()&&a("millisecond")};switch(n){case"year":return o();case"month":return l();case"day":return c();case"hour":return u();case"minute":return d();case"second":return f();case"millisecond":return h()}}function tHe(n,e){return n/=Zl,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function nHe(n){var e=30*Zl;return n/=e,n>6?6:n>3?3:n>2?2:1}function iHe(n){return n/=_b,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function bG(n,e){return n/=e?Y7:K7,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function rHe(n){return Ote(n)}function sHe(n,e,t){var i=new Date(n);switch(Jg(e)){case"year":case"month":i[Pne(t)](0);case"day":i[Lne(t)](1);case"hour":i[kne(t)](0);case"minute":i[Fne(t)](0);case"second":i[Bne(t)](0),i[Nne(t)](0)}return i.getTime()}function aHe(n,e,t,i){var r=1e4,s=Dne,a=0;function o(T,E,I,L,F,B,P){for(var z=new Date(E),O=E,N=z[L]();O<I&&O<=i[1];)P.push({value:O}),N+=T,z[F](N),O=z.getTime();P.push({value:O,notAdd:!0})}function l(T,E,I){var L=[],F=!E.length;if(!eHe(Jg(T),i[0],i[1],t)){F&&(E=[{value:sHe(new Date(i[0]),T,t)},{value:i[1]}]);for(var B=0;B<E.length-1;B++){var P=E[B].value,z=E[B+1].value;if(P!==z){var O=void 0,N=void 0,H=void 0,q=!1;switch(T){case"year":O=Math.max(1,Math.round(e/Zl/365)),N=X7(t),H=x9e(t);break;case"half-year":case"quarter":case"month":O=nHe(e),N=e1(t),H=Pne(t);break;case"week":case"half-week":case"day":O=tHe(e),N=JM(t),H=Lne(t),q=!0;break;case"half-day":case"quarter-day":case"hour":O=iHe(e),N=Ex(t),H=kne(t);break;case"minute":O=bG(e,!0),N=eT(t),H=Fne(t);break;case"second":O=bG(e,!1),N=tT(t),H=Bne(t);break;case"millisecond":O=rHe(e),N=nT(t),H=Nne(t);break}o(O,P,z,N,H,q,L),T==="year"&&I.length>1&&B===0&&I.unshift({value:I[0].value-O})}}for(var B=0;B<L.length;B++)I.push(L[B]);return L}}for(var c=[],u=[],d=0,f=0,h=0;h<s.length&&a++<r;++h){var p=Jg(s[h]);if(g9e(s[h])){l(s[h],c[c.length-1]||[],u);var m=s[h+1]?Jg(s[h+1]):null;if(p!==m){if(u.length){f=d,u.sort(function(T,E){return T.value-E.value});for(var v=[],g=0;g<u.length;++g){var y=u[g].value;(g===0||u[g-1].value!==y)&&(v.push(u[g]),y>=i[0]&&y<=i[1]&&d++)}var x=(i[1]-i[0])/e;if(d>x*1.5&&f>x/1.5||(c.push(v),d>x||n===s[h]))break}u=[]}}}for(var b=_a(fi(c,function(T){return _a(T,function(E){return E.value>=i[0]&&E.value<=i[1]&&!E.notAdd})}),function(T){return T.length>0}),A=[],S=b.length-1,h=0;h<b.length;++h)for(var C=b[h],_=0;_<C.length;++_)A.push({value:C[_].value,level:S-h});A.sort(function(T,E){return T.value-E.value});for(var M=[],h=0;h<A.length;++h)(h===0||A[h].value!==A[h-1].value)&&M.push(A[h]);return M}ud.registerClass(nre);var xG=ud.prototype,Ib=gy.prototype,oHe=Os,lHe=Math.floor,cHe=Math.ceil,iS=Math.pow,Cc=Math.log,uF=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new gy,t._interval=0,t}return e.prototype.getTicks=function(t){var i=this._originalScale,r=this._extent,s=i.getExtent(),a=Ib.getTicks.call(this,t);return fi(a,function(o){var l=o.value,c=Os(iS(this.base,l));return c=l===r[0]&&this._fixMin?rS(c,s[0]):c,c=l===r[1]&&this._fixMax?rS(c,s[1]):c,{value:c}},this)},e.prototype.setExtent=function(t,i){var r=Cc(this.base);t=Cc(Math.max(0,t))/r,i=Cc(Math.max(0,i))/r,Ib.setExtent.call(this,t,i)},e.prototype.getExtent=function(){var t=this.base,i=xG.getExtent.call(this);i[0]=iS(t,i[0]),i[1]=iS(t,i[1]);var r=this._originalScale,s=r.getExtent();return this._fixMin&&(i[0]=rS(i[0],s[0])),this._fixMax&&(i[1]=rS(i[1],s[1])),i},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var i=this.base;t[0]=Cc(t[0])/Cc(i),t[1]=Cc(t[1])/Cc(i),xG.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,i){this.unionExtent(t.getApproximateExtent(i))},e.prototype.calcNiceTicks=function(t){t=t||10;var i=this._extent,r=i[1]-i[0];if(!(r===1/0||r<=0)){var s=MBe(r),a=t/r*s;for(a<=.5&&(s*=10);!isNaN(s)&&Math.abs(s)<1&&Math.abs(s)>0;)s*=10;var o=[Os(cHe(i[0]/s)*s),Os(lHe(i[1]/s)*s)];this._interval=s,this._niceExtent=o}},e.prototype.calcNiceExtent=function(t){Ib.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=Cc(t)/Cc(this.base),lT(t,this._extent)},e.prototype.normalize=function(t){return t=Cc(t)/Cc(this.base),cT(t,this._extent)},e.prototype.scale=function(t){return t=uT(t,this._extent),iS(this.base,t)},e.type="log",e}(ud),ire=uF.prototype;ire.getMinorTicks=Ib.getMinorTicks;ire.getLabel=Ib.getLabel;function rS(n,e){return oHe(n,$d(e))}ud.registerClass(uF);var uHe=function(){function n(e,t,i){this._prepareParams(e,t,i)}return n.prototype._prepareParams=function(e,t,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var r=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var s=t.get("min",!0);s==null&&(s=t.get("startValue",!0));var a=this._modelMinRaw=s;Ci(a)?this._modelMinNum=sS(e,a({min:i[0],max:i[1]})):a!=="dataMin"&&(this._modelMinNum=sS(e,a));var o=this._modelMaxRaw=t.get("max",!0);if(Ci(o)?this._modelMaxNum=sS(e,o({min:i[0],max:i[1]})):o!=="dataMax"&&(this._modelMaxNum=sS(e,o)),r)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),c=Un(l)?l:[l||0,l||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[lp(c[0],1),lp(c[1],1)]}},n.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,i=this._dataMax,r=this._axisDataLen,s=this._boundaryGapInner,a=e?null:i-t||Math.abs(t),o=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,c=o!=null,u=l!=null;o==null&&(o=e?r?0:NaN:t-s[0]*a),l==null&&(l=e?r?r-1:NaN:i+s[1]*a),(o==null||!isFinite(o))&&(o=NaN),(l==null||!isFinite(l))&&(l=NaN);var d=BC(o)||BC(l)||e&&!r;this._needCrossZero&&(o>0&&l>0&&!c&&(o=0),o<0&&l<0&&!u&&(l=0));var f=this._determinedMin,h=this._determinedMax;return f!=null&&(o=f,c=!0),h!=null&&(l=h,u=!0),{min:o,max:l,minFixed:c,maxFixed:u,isBlank:d}},n.prototype.modifyDataMinMax=function(e,t){this[fHe[e]]=t},n.prototype.setDeterminedMinMax=function(e,t){var i=dHe[e];this[i]=t},n.prototype.freeze=function(){this.frozen=!0},n}(),dHe={min:"_determinedMin",max:"_determinedMax"},fHe={min:"_dataMin",max:"_dataMax"};function hHe(n,e,t){var i=n.rawExtentInfo;return i||(i=new uHe(n,e,t),n.rawExtentInfo=i,i)}function sS(n,e){return e==null?null:BC(e)?NaN:n.parse(e)}function rre(n,e){var t=n.type,i=hHe(n,e,n.getExtent()).calculate();n.setBlank(i.isBlank);var r=i.min,s=i.max,a=e.ecModel;if(a&&t==="time"){var o=KVe("bar",a),l=!1;if(mt(o,function(d){l=l||d.getBaseAxis()===e.axis}),l){var c=XVe(o),u=pHe(r,s,e,c);r=u.min,s=u.max}}return{extent:[r,s],fixMin:i.minFixed,fixMax:i.maxFixed}}function pHe(n,e,t,i){var r=t.axis.getExtent(),s=Math.abs(r[1]-r[0]),a=$Ve(i,t.axis);if(a===void 0)return{min:n,max:e};var o=1/0;mt(a,function(h){o=Math.min(h.offset,o)});var l=-1/0;mt(a,function(h){l=Math.max(h.offset+h.width,l)}),o=Math.abs(o),l=Math.abs(l);var c=o+l,u=e-n,d=1-(o+l)/s,f=u/d-u;return e+=f*(l/c),n-=f*(o/c),{min:n,max:e}}function AG(n,e){var t=e,i=rre(n,t),r=i.extent,s=t.get("splitNumber");n instanceof uF&&(n.base=t.get("logBase"));var a=n.type,o=t.get("interval"),l=a==="interval"||a==="time";n.setExtent(r[0],r[1]),n.calcNiceExtent({splitNumber:s,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),o!=null&&n.setInterval&&n.setInterval(o)}function mHe(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new cF({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new nre({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(ud.getClass(e)||gy)}}function vHe(n){var e=n.scale.getExtent(),t=e[0],i=e[1];return!(t>0&&i>0||t<0&&i<0)}function yy(n){var e=n.getLabelModel().get("formatter"),t=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(i){return function(r,s){return n.scale.getFormattedLabel(r,s,i)}}(e):ri(e)?function(i){return function(r){var s=n.scale.getLabel(r),a=i.replace("{value}",s??"");return a}}(e):Ci(e)?function(i){return function(r,s){return t!=null&&(s=r.value-t),i(dF(n,r),s,r.level!=null?{level:r.level}:null)}}(e):function(i){return n.scale.getLabel(i)}}function dF(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function gHe(n){var e=n.model,t=n.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var i,r,s=t.getExtent();t instanceof cF?r=t.count():(i=t.getTicks(),r=i.length);var a=n.getLabelModel(),o=yy(n),l,c=1;r>40&&(c=Math.ceil(r/40));for(var u=0;u<r;u+=c){var d=i?i[u]:{value:s[0]+u},f=o(d,u),h=a.getTextRect(f),p=yHe(h,a.get("rotate")||0);l?l.union(p):l=p}return l}}function yHe(n,e){var t=e*Math.PI/180,i=n.width,r=n.height,s=i*Math.abs(Math.cos(t))+Math.abs(r*Math.sin(t)),a=i*Math.abs(Math.sin(t))+Math.abs(r*Math.cos(t)),o=new _r(n.x,n.y,s,a);return o}function fF(n){var e=n.get("interval");return e??"auto"}function sre(n){return n.type==="category"&&fF(n.getLabelModel())===0}function bHe(n,e){var t={};return mt(n.mapDimensionsAll(e),function(i){t[LVe(n,i)]=!0}),hs(t)}var xHe=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},n.prototype.getCoordSysModel=function(){},n}(),wG=[],AHe={registerPreprocessor:Gie,registerProcessor:Wie,registerPostInit:lVe,registerPostUpdate:cVe,registerUpdateLifecycle:oF,registerAction:vy,registerCoordinateSystem:uVe,registerLayout:dVe,registerVisual:Lm,registerTransform:hVe,registerLoading:qie,registerMap:fVe,registerImpl:Hze,PRIORITY:tVe,ComponentModel:Dr,ComponentView:su,SeriesModel:gf,ChartView:Qc,registerComponentModel:function(n){Dr.registerClass(n)},registerComponentView:function(n){su.registerClass(n)},registerSeriesModel:function(n){gf.registerClass(n)},registerChartView:function(n){Qc.registerClass(n)},registerSubTypeDefaulter:function(n,e){Dr.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){yBe(n,e)}};function ed(n){if(Un(n)){mt(n,function(e){ed(e)});return}Nr(wG,n)>=0||(wG.push(n),Ci(n)&&(n={install:n}),n.install(AHe))}var Fx=Ls();function are(n,e){var t=fi(e,function(i){return n.scale.parse(i)});return n.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function wHe(n){var e=n.getLabelModel().get("customValues");if(e){var t=yy(n),i=n.scale.getExtent(),r=are(n,e),s=_a(r,function(a){return a>=i[0]&&a<=i[1]});return{labels:fi(s,function(a){var o={value:a};return{formattedLabel:t(o),rawLabel:n.scale.getLabel(o),tickValue:a}})}}return n.type==="category"?_He(n):MHe(n)}function SHe(n,e){var t=n.getTickModel().get("customValues");if(t){var i=n.scale.getExtent(),r=are(n,t);return{ticks:_a(r,function(s){return s>=i[0]&&s<=i[1]})}}return n.type==="category"?CHe(n,e):{ticks:fi(n.scale.getTicks(),function(s){return s.value})}}function _He(n){var e=n.getLabelModel(),t=ore(n,e);return!e.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function ore(n,e){var t=lre(n,"labels"),i=fF(e),r=cre(t,i);if(r)return r;var s,a;return Ci(i)?s=fre(n,i):(a=i==="auto"?THe(n):i,s=dre(n,a)),ure(t,i,{labels:s,labelCategoryInterval:a})}function CHe(n,e){var t=lre(n,"ticks"),i=fF(e),r=cre(t,i);if(r)return r;var s,a;if((!e.get("show")||n.scale.isBlank())&&(s=[]),Ci(i))s=fre(n,i,!0);else if(i==="auto"){var o=ore(n,n.getLabelModel());a=o.labelCategoryInterval,s=fi(o.labels,function(l){return l.tickValue})}else a=i,s=dre(n,a,!0);return ure(t,i,{ticks:s,tickCategoryInterval:a})}function MHe(n){var e=n.scale.getTicks(),t=yy(n);return{labels:fi(e,function(i,r){return{level:i.level,formattedLabel:t(i,r),rawLabel:n.scale.getLabel(i),tickValue:i.value}})}}function lre(n,e){return Fx(n)[e]||(Fx(n)[e]=[])}function cre(n,e){for(var t=0;t<n.length;t++)if(n[t].key===e)return n[t].value}function ure(n,e,t){return n.push({key:e,value:t}),t}function THe(n){var e=Fx(n).autoInterval;return e??(Fx(n).autoInterval=n.calculateCategoryInterval())}function EHe(n){var e=IHe(n),t=yy(n),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=n.scale,s=r.getExtent(),a=r.count();if(s[1]-s[0]<1)return 0;var o=1;a>40&&(o=Math.max(1,Math.floor(a/40)));for(var l=s[0],c=n.dataToCoord(l+1)-n.dataToCoord(l),u=Math.abs(c*Math.cos(i)),d=Math.abs(c*Math.sin(i)),f=0,h=0;l<=s[1];l+=o){var p=0,m=0,v=C7(t({value:l}),e.font,"center","top");p=v.width*1.3,m=v.height*1.3,f=Math.max(f,p,7),h=Math.max(h,m,7)}var g=f/u,y=h/d;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(g,y))),b=Fx(n.model),A=n.getExtent(),S=b.lastAutoInterval,C=b.lastTickCount;return S!=null&&C!=null&&Math.abs(S-x)<=1&&Math.abs(C-a)<=1&&S>x&&b.axisExtent0===A[0]&&b.axisExtent1===A[1]?x=S:(b.lastTickCount=a,b.lastAutoInterval=x,b.axisExtent0=A[0],b.axisExtent1=A[1]),x}function IHe(n){var e=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function dre(n,e,t){var i=yy(n),r=n.scale,s=r.getExtent(),a=n.getLabelModel(),o=[],l=Math.max((e||0)+1,1),c=s[0],u=r.count();c!==0&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var d=sre(n),f=a.get("showMinLabel")||d,h=a.get("showMaxLabel")||d;f&&c!==s[0]&&m(s[0]);for(var p=c;p<=s[1];p+=l)m(p);h&&p-l!==s[1]&&m(s[1]);function m(v){var g={value:v};o.push(t?v:{formattedLabel:i(g),rawLabel:r.getLabel(g),tickValue:v})}return o}function fre(n,e,t){var i=n.scale,r=yy(n),s=[];return mt(i.getTicks(),function(a){var o=i.getLabel(a),l=a.value;e(a.value,o)&&s.push(t?l:{formattedLabel:r(a),rawLabel:o,tickValue:l})}),s}var SG=[0,1],DHe=function(){function n(e,t,i){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=i||[0,0]}return n.prototype.contain=function(e){var t=this._extent,i=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return e>=i&&e<=r},n.prototype.containData=function(e){return this.scale.contain(e)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(e){return wBe(e||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(e,t){var i=this._extent;i[0]=e,i[1]=t},n.prototype.dataToCoord=function(e,t){var i=this._extent,r=this.scale;return e=r.normalize(e),this.onBand&&r.type==="ordinal"&&(i=i.slice(),_G(i,r.count())),Q8(e,SG,i,t)},n.prototype.coordToData=function(e,t){var i=this._extent,r=this.scale;this.onBand&&r.type==="ordinal"&&(i=i.slice(),_G(i,r.count()));var s=Q8(e,i,SG,t);return this.scale.scale(s)},n.prototype.pointToData=function(e,t){},n.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),i=SHe(this,t),r=i.ticks,s=fi(r,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),a=t.get("alignWithLabel");return RHe(this,s,a,e.clamp),s},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var i=this.scale.getMinorTicks(t),r=fi(i,function(s){return fi(s,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return r},n.prototype.getViewLabels=function(){return wHe(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),i=t[1]-t[0]+(this.onBand?1:0);i===0&&(i=1);var r=Math.abs(e[1]-e[0]);return Math.abs(r)/i},n.prototype.calculateCategoryInterval=function(){return EHe(this)},n}();function _G(n,e){var t=n[1]-n[0],i=e,r=t/i/2;n[0]+=r,n[1]-=r}function RHe(n,e,t,i){var r=e.length;if(!n.onBand||t||!r)return;var s=n.getExtent(),a,o;if(r===1)e[0].coord=s[0],a=e[1]={coord:s[1],tickValue:e[0].tickValue};else{var l=e[r-1].tickValue-e[0].tickValue,c=(e[r-1].coord-e[0].coord)/l;mt(e,function(h){h.coord-=c/2});var u=n.scale.getExtent();o=1+u[1]-e[r-1].tickValue,a={coord:e[r-1].coord+c*o,tickValue:u[1]+1},e.push(a)}var d=s[0]>s[1];f(e[0].coord,s[0])&&(i?e[0].coord=s[0]:e.shift()),i&&f(s[0],e[0].coord)&&e.unshift({coord:s[0]}),f(s[1],a.coord)&&(i?a.coord=s[1]:e.pop()),i&&f(a.coord,s[1])&&e.push({coord:s[1]});function f(h,p){return h=Os(h),p=Os(p),d?h>p:h<p}}function hre(n,e,t,i,r,s,a,o){var l=r-n,c=s-e,u=t-n,d=i-e,f=Math.sqrt(u*u+d*d);u/=f,d/=f;var h=l*u+c*d,p=h/f;p*=f;var m=a[0]=n+p*u,v=a[1]=e+p*d;return Math.sqrt((m-r)*(m-r)+(v-s)*(v-s))}var kh=new wi,bs=new wi,wa=new wi,Fh=new wi,Bu=new wi,o4=[],fo=new wi;function PHe(n,e){if(e<=180&&e>0){e=e/180*Math.PI,kh.fromArray(n[0]),bs.fromArray(n[1]),wa.fromArray(n[2]),wi.sub(Fh,kh,bs),wi.sub(Bu,wa,bs);var t=Fh.len(),i=Bu.len();if(!(t<.001||i<.001)){Fh.scale(1/t),Bu.scale(1/i);var r=Fh.dot(Bu),s=Math.cos(e);if(s<r){var a=hre(bs.x,bs.y,wa.x,wa.y,kh.x,kh.y,o4);fo.fromArray(o4),fo.scaleAndAdd(Bu,a/Math.tan(Math.PI-e));var o=wa.x!==bs.x?(fo.x-bs.x)/(wa.x-bs.x):(fo.y-bs.y)/(wa.y-bs.y);if(isNaN(o))return;o<0?wi.copy(fo,bs):o>1&&wi.copy(fo,wa),fo.toArray(n[1])}}}}function LHe(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,kh.fromArray(n[0]),bs.fromArray(n[1]),wa.fromArray(n[2]),wi.sub(Fh,bs,kh),wi.sub(Bu,wa,bs);var i=Fh.len(),r=Bu.len();if(!(i<.001||r<.001)){Fh.scale(1/i),Bu.scale(1/r);var s=Fh.dot(e),a=Math.cos(t);if(s<a){var o=hre(bs.x,bs.y,wa.x,wa.y,kh.x,kh.y,o4);fo.fromArray(o4);var l=Math.PI/2,c=Math.acos(Bu.dot(e)),u=l+c-t;if(u>=l)wi.copy(fo,wa);else{fo.scaleAndAdd(Bu,o/Math.tan(Math.PI/2-u));var d=wa.x!==bs.x?(fo.x-bs.x)/(wa.x-bs.x):(fo.y-bs.y)/(wa.y-bs.y);if(isNaN(d))return;d<0?wi.copy(fo,bs):d>1&&wi.copy(fo,wa)}fo.toArray(n[1])}}}}function r6(n,e,t,i){var r=t==="normal",s=r?n:n.ensureState(t);s.ignore=e;var a=i.get("smooth");a&&a===!0&&(a=.3),s.shape=s.shape||{},a>0&&(s.shape.smooth=a);var o=i.getModel("lineStyle").getLineStyle();r?n.useStyle(o):s.style=o}function kHe(n,e){var t=e.smooth,i=e.points;if(i)if(n.moveTo(i[0][0],i[0][1]),t>0&&i.length>=3){var r=B8(i[0],i[1]),s=B8(i[1],i[2]);if(!r||!s){n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]);return}var a=Math.min(r,s)*t,o=Z5([],i[1],i[0],a/r),l=Z5([],i[1],i[2],a/s),c=Z5([],o,l,.5);n.bezierCurveTo(o[0],o[1],o[0],o[1],c[0],c[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var u=1;u<i.length;u++)n.lineTo(i[u][0],i[u][1])}function FHe(n,e,t){var i=n.getTextGuideLine(),r=n.getTextContent();if(!r){i&&n.removeTextGuideLine();return}for(var s=e.normal,a=s.get("show"),o=r.ignore,l=0;l<KC.length;l++){var c=KC[l],u=e[c],d=c==="normal";if(u){var f=u.get("show"),h=d?o:ki(r.states[c]&&r.states[c].ignore,o);if(h||!ki(f,a)){var p=d?i:i&&i.states[c];p&&(p.ignore=!0),i&&r6(i,!0,c,u);continue}i||(i=new LA,n.setTextGuideLine(i),!d&&(o||!a)&&r6(i,!0,"normal",e.normal),n.stateProxy&&(i.stateProxy=n.stateProxy)),r6(i,!1,c,u)}}if(i){Cr(i.style,t),i.style.fill=null;var m=s.get("showAbove"),v=n.textGuideLineConfig=n.textGuideLineConfig||{};v.showAbove=m||!1,i.buildPath=kHe}}function BHe(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},i=0;i<gc.length;i++){var r=gc[i];t[r]=n.getModel([r,e])}return t}function NHe(n){for(var e=[],t=0;t<n.length;t++){var i=n[t];if(!i.defaultAttr.ignore){var r=i.label,s=r.getComputedTransform(),a=r.getBoundingRect(),o=!s||s[1]<1e-5&&s[2]<1e-5,l=r.style.margin||0,c=a.clone();c.applyTransform(s),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=o?new $C(a,s):null;e.push({label:r,labelLine:i.labelLine,rect:c,localRect:a,obb:u,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:o,transform:s})}}return e}function OHe(n,e,t,i,r,s){var a=n.length;if(a<2)return;n.sort(function(S,C){return S.rect[e]-C.rect[e]});for(var o=0,l,c=!1,u=0;u<a;u++){var d=n[u],f=d.rect;l=f[e]-o,l<0&&(f[e]-=l,d.label[e]-=l,c=!0),o=f[e]+f[t]}var h=n[0],p=n[a-1],m,v;g(),m<0&&b(-m,.8),v<0&&b(v,.8),g(),y(m,v,1),y(v,m,-1),g(),m<0&&A(-m),v<0&&A(v);function g(){m=h.rect[e]-i,v=r-p.rect[e]-p.rect[t]}function y(S,C,_){if(S<0){var M=Math.min(C,-S);if(M>0){x(M*_,0,a);var T=M+S;T<0&&b(-T*_,1)}else b(-S*_,1)}}function x(S,C,_){S!==0&&(c=!0);for(var M=C;M<_;M++){var T=n[M],E=T.rect;E[e]+=S,T.label[e]+=S}}function b(S,C){for(var _=[],M=0,T=1;T<a;T++){var E=n[T-1].rect,I=Math.max(n[T].rect[e]-E[e]-E[t],0);_.push(I),M+=I}if(M){var L=Math.min(Math.abs(S)/M,C);if(S>0)for(var T=0;T<a-1;T++){var F=_[T]*L;x(F,0,T+1)}else for(var T=a-1;T>0;T--){var F=_[T-1]*L;x(-F,T,a)}}}function A(S){var C=S<0?-1:1;S=Math.abs(S);for(var _=Math.ceil(S/(a-1)),M=0;M<a-1;M++)if(C>0?x(_,0,M+1):x(-_,a-M-1,a),S-=_,S<=0)return}return c}function UHe(n,e,t,i){return OHe(n,"y","height",e,t)}function zHe(n){var e=[];n.sort(function(m,v){return v.priority-m.priority});var t=new _r(0,0,0,0);function i(m){if(!m.ignore){var v=m.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}m.ignore=!0}for(var r=0;r<n.length;r++){var s=n[r],a=s.axisAligned,o=s.localRect,l=s.transform,c=s.label,u=s.labelLine;t.copy(s.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=s.obb,f=!1,h=0;h<e.length;h++){var p=e[h];if(t.intersect(p.rect)){if(a&&p.axisAligned){f=!0;break}if(p.obb||(p.obb=new $C(p.localRect,p.transform)),d||(d=new $C(o,l)),d.intersect(p.obb)){f=!0;break}}}f?(i(c),u&&i(u)):(c.attr("ignore",s.defaultAttr.ignore),u&&u.attr("ignore",s.defaultAttr.labelGuideIgnore),e.push(s))}}function CG(n,e,t){var i=fy.createCanvas(),r=e.getWidth(),s=e.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=s+"px",i.setAttribute("data-zr-dom-id",n)),i.width=r*t,i.height=s*t,i}var s6=function(n){kn(e,n);function e(t,i,r){var s=n.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var a;r=r||HC,typeof t=="string"?a=CG(t,i,r):hi(t)&&(a=t,t=a.id),s.id=t,s.dom=a;var o=a.style;return o&&(mte(a),a.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),s.painter=i,s.dpr=r,s}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=CG("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,i,r,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],o=this.maxRepaintRectCount,l=!1,c=new _r(0,0,0,0);function u(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var x=new _r(0,0,0,0);x.copy(y),a.push(x)}else{for(var b=!1,A=1/0,S=0,C=0;C<a.length;++C){var _=a[C];if(_.intersect(y)){var M=new _r(0,0,0,0);M.copy(_),M.union(y),a[C]=M,b=!0;break}else if(l){c.copy(y),c.union(_);var T=y.width*y.height,E=_.width*_.height,I=c.width*c.height,L=I-T-E;L<A&&(A=L,S=C)}}if(l&&(a[S].union(y),b=!0),!b){var x=new _r(0,0,0,0);x.copy(y),a.push(x)}l||(l=a.length>=o)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var f=t[d];if(f){var h=f.shouldBePainted(r,s,!0,!0),p=f.__isRendered&&(f.__dirty&qu||!h)?f.getPrevPaintRect():null;p&&u(p);var m=h&&(f.__dirty&qu||!f.__isRendered)?f.getPaintRect():null;m&&u(m)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var f=i[d],h=f&&f.shouldBePainted(r,s,!0,!0);if(f&&(!h||!f.__zr)&&f.__isRendered){var p=f.getPrevPaintRect();p&&u(p)}}var v;do{v=!1;for(var d=0;d<a.length;){if(a[d].isZero()){a.splice(d,1);continue}for(var g=d+1;g<a.length;)a[d].intersect(a[g])?(v=!0,a[d].union(a[g]),a.splice(g,1)):g++;d++}}while(v);return this._paintRects=a,a},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,i){var r=this.dpr,s=this.dom,a=s.style,o=this.domBack;a&&(a.width=t+"px",a.height=i+"px"),s.width=t*r,s.height=i*r,o&&(o.width=t*r,o.height=i*r,r!==1&&this.ctxBack.scale(r,r))},e.prototype.clear=function(t,i,r){var s=this.dom,a=this.ctx,o=s.width,l=s.height;i=i||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,d=this.dpr,f=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,o/d,l/d));var h=this.domBack;function p(m,v,g,y){if(a.clearRect(m,v,g,y),i&&i!=="transparent"){var x=void 0;if(FM(i)){var b=i.global||i.__width===g&&i.__height===y;x=b&&i.__canvasGradient||bR(a,i,{x:0,y:0,width:g,height:y}),i.__canvasGradient=x,i.__width=g,i.__height=y}else J7e(i)&&(i.scaleX=i.scaleX||d,i.scaleY=i.scaleY||d,x=xR(a,i,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));a.save(),a.fillStyle=x||i,a.fillRect(m,v,g,y),a.restore()}c&&(a.save(),a.globalAlpha=u,a.drawImage(h,m,v,g,y),a.restore())}!r||c?p(0,0,o,l):r.length&&mt(r,function(m){p(m.x*d,m.y*d,m.width*d,m.height*d)})},e}(ld),MG=1e5,i0=314159,aS=.01,VHe=.001;function HHe(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function GHe(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var WHe=function(){function n(e,t,i,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=i=pn({},i||{}),this.dpr=i.devicePixelRatio||HC,this._singleCanvas=s,this.root=e;var a=e.style;a&&(mte(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(s){var u=e,d=u.width,f=u.height;i.width!=null&&(d=i.width),i.height!=null&&(f=i.height),this.dpr=i.devicePixelRatio||1,u.width=d*this.dpr,u.height=f*this.dpr,this._width=d,this._height=f;var h=new s6(u,this,this.dpr);h.__builtin__=!0,h.initContext(),l[i0]=h,h.zlevel=i0,o.push(i0),this._domRoot=e}else{this._width=Zw(e,0,i),this._height=Zw(e,1,i);var c=this._domRoot=GHe(this._width,this._height);e.appendChild(c)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),i=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,i,e,this._redrawId);for(var s=0;s<r.length;s++){var a=r[s],o=this._layers[a];if(!o.__builtin__&&o.refresh){var l=s===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,i=this._hoverlayer;if(i&&i.clear(),!!t){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,a=0;a<t;a++){var o=e[a];o.__inHover&&(i||(i=this._hoverlayer=this.getLayer(MG)),s||(s=i.ctx,s.save()),N0(s,o,r,a===t-1))}s&&s.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(MG)},n.prototype.paintOne=function(e,t){Mie(e,t)},n.prototype._paintList=function(e,t,i,r){if(this._redrawId===r){i=i||!1,this._updateLayerStatus(e);var s=this._doPaintList(e,t,i),a=s.finished,o=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),a)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;NC(function(){l._paintList(e,t,i,r)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(i0).ctx,t=this._domRoot.width,i=this._domRoot.height;e.clearRect(0,0,t,i),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,i)})},n.prototype._doPaintList=function(e,t,i){for(var r=this,s=[],a=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||i)&&s.push(c)}for(var u=!0,d=!1,f=function(m){var v=s[m],g=v.ctx,y=a&&v.createRepaintRects(e,t,h._width,h._height),x=i?v.__startIndex:v.__drawIndex,b=!i&&v.incremental&&Date.now,A=b&&Date.now(),S=v.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,S,y);else if(x===v.__startIndex){var C=e[x];(!C.incremental||!C.notClear||i)&&v.clear(!1,S,y)}x===-1&&(console.error("For some unknown reason. drawIndex is -1"),x=v.__startIndex);var _,M=function(L){var F={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(_=x;_<v.__endIndex;_++){var B=e[_];if(B.__inHover&&(d=!0),r._doPaintEl(B,v,a,L,F,_===v.__endIndex-1),b){var P=Date.now()-A;if(P>15)break}}F.prevElClipPaths&&g.restore()};if(y)if(y.length===0)_=v.__endIndex;else for(var T=h.dpr,E=0;E<y.length;++E){var I=y[E];g.save(),g.beginPath(),g.rect(I.x*T,I.y*T,I.width*T,I.height*T),g.clip(),M(I),g.restore()}else g.save(),M(),g.restore();v.__drawIndex=_,v.__drawIndex<v.__endIndex&&(u=!1)},h=this,p=0;p<s.length;p++)f(p);return Ai.wxa&&mt(this._layers,function(m){m&&m.ctx&&m.ctx.draw&&m.ctx.draw()}),{finished:u,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,i,r,s,a){var o=t.ctx;if(i){var l=e.getPaintRect();(!r||l&&l.intersect(r))&&(N0(o,e,s,a),e.setPrevPaintRect(l))}else N0(o,e,s,a)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=i0);var i=this._layers[e];return i||(i=new s6("zr_"+e,this,this.dpr),i.zlevel=e,i.__builtin__=!0,this._layerConfig[e]?Sr(i,this._layerConfig[e],!0):this._layerConfig[e-aS]&&Sr(i,this._layerConfig[e-aS],!0),t&&(i.virtual=t),this.insertLayer(e,i),i.initContext()),i},n.prototype.insertLayer=function(e,t){var i=this._layers,r=this._zlevelList,s=r.length,a=this._domRoot,o=null,l=-1;if(!i[e]&&HHe(t)){if(s>0&&e>r[0]){for(l=0;l<s-1&&!(r[l]<e&&r[l+1]>e);l++);o=i[r[l]]}if(r.splice(l+1,0,e),i[e]=t,!t.virtual)if(o){var c=o.dom;c.nextSibling?a.insertBefore(t.dom,c.nextSibling):a.appendChild(t.dom)}else a.firstChild?a.insertBefore(t.dom,a.firstChild):a.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r];e.call(t,this._layers[s],s)}},n.prototype.eachBuiltinLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__&&e.call(t,a,s)}},n.prototype.eachOtherLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__||e.call(t,a,s)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,f){d.__dirty=d.__used=!1});function t(d){s&&(s.__endIndex!==d&&(s.__dirty=!0),s.__endIndex=d)}if(this._singleCanvas)for(var i=1;i<e.length;i++){var r=e[i];if(r.zlevel!==e[i-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var s=null,a=0,o,l;for(l=0;l<e.length;l++){var r=e[l],c=r.zlevel,u=void 0;o!==c&&(o=c,a=0),r.incremental?(u=this.getLayer(c+VHe,this._needsManuallyCompositing),u.incremental=!0,a=1):u=this.getLayer(c+(a>0?aS:0),this._needsManuallyCompositing),u.__builtin__||g7("ZLevel "+c+" has been used by unkown layer "+u.id),u!==s&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),s=u),r.__dirty&qu&&!r.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,f){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,mt(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var i=this._layerConfig;i[e]?Sr(i[e],t,!0):i[e]=t;for(var r=0;r<this._zlevelList.length;r++){var s=this._zlevelList[r];if(s===e||s===e+aS){var a=this._layers[s];Sr(a,i[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,i=this._zlevelList,r=t[e];r&&(r.dom.parentNode.removeChild(r.dom),delete t[e],i.splice(Nr(i,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var r=this._opts,s=this.root;if(e!=null&&(r.width=e),t!=null&&(r.height=t),e=Zw(s,0,r),t=Zw(s,1,r),i.style.display="",this._width!==e||t!==this._height){i.style.width=e+"px",i.style.height=t+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(i0).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[i0].dom;var t=new s6("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var i=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var r=t.dom.width,s=t.dom.height;this.eachLayer(function(d){d.__builtin__?i.drawImage(d.dom,0,0,r,s):d.renderToCanvas&&(i.save(),d.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,c=o.length;l<c;l++){var u=o[l];N0(i,u,a,l===c-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function hF(n){n.registerPainter("canvas",WHe)}var qHe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return BVe(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var i=new eo,r=L1("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);i.add(r),r.setStyle(t.lineStyle);var s=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),o=s==="none"?"circle":s,l=t.itemHeight*.8,c=L1(o,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);i.add(c),c.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?a:t.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),i},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(gf);function pre(n,e){var t=n.mapDimensionsAll("defaultedLabel"),i=t.length;if(i===1){var r=P1(n,e,t[0]);return r!=null?r+"":null}else if(i){for(var s=[],a=0;a<t.length;a++)s.push(P1(n,e,t[a]));return s.join(" ")}}function KHe(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!Un(e))return e+"";for(var i=[],r=0;r<t.length;r++){var s=n.getDimensionIndex(t[r]);s>=0&&i.push(e[s])}return i.join(" ")}var pF=function(n){kn(e,n);function e(t,i,r,s){var a=n.call(this)||this;return a.updateData(t,i,r,s),a}return e.prototype._createSymbol=function(t,i,r,s,a){this.removeAll();var o=L1(t,-1,-1,2,2,null,a);o.attr({z2:100,culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),o.drift=YHe,this._symbolType=t,this.add(o)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){YC(this.childAt(0))},e.prototype.downplay=function(){XC(this.childAt(0))},e.prototype.setZ=function(t,i){var r=this.childAt(0);r.zlevel=t,r.z=i},e.prototype.setDraggable=function(t,i){var r=this.childAt(0);r.draggable=t,r.cursor=!i&&t?"move":r.cursor},e.prototype.updateData=function(t,i,r,s){this.silent=!1;var a=t.getItemVisual(i,"symbol")||"circle",o=t.hostModel,l=e.getSymbolSize(t,i),c=a!==this._symbolType,u=s&&s.disableAnimation;if(c){var d=t.getItemVisual(i,"symbolKeepAspect");this._createSymbol(a,t,i,l,d)}else{var f=this.childAt(0);f.silent=!1;var h={scaleX:l[0]/2,scaleY:l[1]/2};u?f.attr(h):Ju(f,h,o,i),bne(f)}if(this._updateCommon(t,i,l,r,s),c){var f=this.childAt(0);if(!u){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,Gh(f,h,o,i)}}u&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,i,r,s,a){var o=this.childAt(0),l=t.hostModel,c,u,d,f,h,p,m,v,g;if(s&&(c=s.emphasisItemStyle,u=s.blurItemStyle,d=s.selectItemStyle,f=s.focus,h=s.blurScope,m=s.labelStatesModels,v=s.hoverScale,g=s.cursorStyle,p=s.emphasisDisabled),!s||t.hasItemOption){var y=s&&s.itemModel?s.itemModel:t.getItemModel(i),x=y.getModel("emphasis");c=x.getModel("itemStyle").getItemStyle(),d=y.getModel(["select","itemStyle"]).getItemStyle(),u=y.getModel(["blur","itemStyle"]).getItemStyle(),f=x.get("focus"),h=x.get("blurScope"),p=x.get("disabled"),m=$M(y),v=x.getShallow("scale"),g=y.getShallow("cursor")}var b=t.getItemVisual(i,"symbolRotate");o.attr("rotation",(b||0)*Math.PI/180||0);var A=wie(t.getItemVisual(i,"symbolOffset"),r);A&&(o.x=A[0],o.y=A[1]),g&&o.attr("cursor",g);var S=t.getItemVisual(i,"style"),C=S.fill;if(o instanceof Cp){var _=o.style;o.useStyle(pn({image:_.image,x:_.x,y:_.y,width:_.width,height:_.height},S))}else o.__isEmptyBrush?o.useStyle(pn({},S)):o.useStyle(S),o.style.decal=null,o.setColor(C,a&&a.symbolInnerColor),o.style.strokeNoScale=!0;var M=t.getItemVisual(i,"liftZ"),T=this._z2;M!=null?T==null&&(this._z2=o.z2,o.z2+=M):T!=null&&(o.z2=T,this._z2=null);var E=a&&a.useNameLabel;jM(o,m,{labelFetcher:l,labelDataIndex:i,defaultText:I,inheritColor:C,defaultOpacity:S.opacity});function I(B){return E?t.getName(B):pre(t,B)}this._sizeX=r[0]/2,this._sizeY=r[1]/2;var L=o.ensureState("emphasis");L.style=c,o.ensureState("select").style=d,o.ensureState("blur").style=u;var F=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;L.scaleX=this._sizeX*F,L.scaleY=this._sizeY*F,this.setSymbolScale(1),jC(this,f,h,p)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,i,r){var s=this.childAt(0),a=Rr(this).dataIndex,o=r&&r.animation;if(this.silent=s.silent=!0,r&&r.fadeLabel){var l=s.getTextContent();l&&QC(l,{style:{opacity:0}},i,{dataIndex:a,removeOpt:o,cb:function(){s.removeTextContent()}})}else s.removeTextContent();QC(s,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:a,cb:t,removeOpt:o})},e.getSymbolSize=function(t,i){return Cze(t.getItemVisual(i,"symbolSize"))},e}(eo);function YHe(n,e){this.parent.drift(n,e)}function a6(n,e,t,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(t))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function TG(n){return n!=null&&!hi(n)&&(n={isIgnore:n}),n||{}}function EG(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:$M(e),cursorStyle:e.get("cursor")}}var XHe=function(){function n(e){this.group=new eo,this._SymbolCtor=e||pF}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=TG(t);var i=this.group,r=e.hostModel,s=this._data,a=this._SymbolCtor,o=t.disableAnimation,l=EG(e),c={disableAnimation:o},u=t.getSymbolPoint||function(d){return e.getItemLayout(d)};s||i.removeAll(),e.diff(s).add(function(d){var f=u(d);if(a6(e,f,d,t)){var h=new a(e,d,l,c);h.setPosition(f),e.setItemGraphicEl(d,h),i.add(h)}}).update(function(d,f){var h=s.getItemGraphicEl(f),p=u(d);if(!a6(e,p,d,t)){i.remove(h);return}var m=e.getItemVisual(d,"symbol")||"circle",v=h&&h.getSymbolType&&h.getSymbolType();if(!h||v&&v!==m)i.remove(h),h=new a(e,d,l,c),h.setPosition(p);else{h.updateData(e,d,l,c);var g={x:p[0],y:p[1]};o?h.attr(g):Ju(h,g,r)}i.add(h),e.setItemGraphicEl(d,h)}).remove(function(d){var f=s.getItemGraphicEl(d);f&&f.fadeOut(function(){i.remove(f)},r)}).execute(),this._getSymbolPoint=u,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(i,r){var s=e._getSymbolPoint(r);i.setPosition(s),i.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=EG(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,i){this._progressiveEls=[],i=TG(i);function r(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var s=e.start;s<e.end;s++){var a=t.getItemLayout(s);if(a6(t,a,s,i)){var o=new this._SymbolCtor(t,s,this._seriesScope);o.traverse(r),o.setPosition(a),this.group.add(o),t.setItemGraphicEl(s,o),this._progressiveEls.push(o)}}},n.prototype.eachRendered=function(e){G7(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,i=this._data;i&&e?i.eachItemGraphicEl(function(r){r.fadeOut(function(){t.remove(r)},i.hostModel)}):t.removeAll()},n}();function mre(n,e,t){var i=n.getBaseAxis(),r=n.getOtherAxis(i),s=jHe(r,t),a=i.dim,o=r.dim,l=e.mapDimension(o),c=e.mapDimension(a),u=o==="x"||o==="radius"?1:0,d=fi(n.dimensions,function(p){return e.mapDimension(p)}),f=!1,h=e.getCalculationInfo("stackResultDimension");return kx(e,d[0])&&(f=!0,d[0]=h),kx(e,d[1])&&(f=!0,d[1]=h),{dataDimsForPoint:d,valueStart:s,valueAxisDim:o,baseAxisDim:a,stacked:!!f,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function jHe(n,e){var t=0,i=n.scale.getExtent();return e==="start"?t=i[0]:e==="end"?t=i[1]:jr(e)&&!isNaN(e)?t=e:i[0]>0?t=i[0]:i[1]<0&&(t=i[1]),t}function vre(n,e,t,i){var r=NaN;n.stacked&&(r=t.get(t.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=n.valueStart);var s=n.baseDataOffset,a=[];return a[s]=t.get(n.baseDim,i),a[1-s]=r,e.dataToPoint(a)}function $He(n,e){var t=[];return e.diff(n).add(function(i){t.push({cmd:"+",idx:i})}).update(function(i,r){t.push({cmd:"=",idx:r,idx1:i})}).remove(function(i){t.push({cmd:"-",idx:i})}).execute(),t}function QHe(n,e,t,i,r,s,a,o){for(var l=$He(n,e),c=[],u=[],d=[],f=[],h=[],p=[],m=[],v=mre(r,e,a),g=n.getLayout("points")||[],y=e.getLayout("points")||[],x=0;x<l.length;x++){var b=l[x],A=!0,S=void 0,C=void 0;switch(b.cmd){case"=":S=b.idx*2,C=b.idx1*2;var _=g[S],M=g[S+1],T=y[C],E=y[C+1];(isNaN(_)||isNaN(M))&&(_=T,M=E),c.push(_,M),u.push(T,E),d.push(t[S],t[S+1]),f.push(i[C],i[C+1]),m.push(e.getRawIndex(b.idx1));break;case"+":var I=b.idx,L=v.dataDimsForPoint,F=r.dataToPoint([e.get(L[0],I),e.get(L[1],I)]);C=I*2,c.push(F[0],F[1]),u.push(y[C],y[C+1]);var B=vre(v,r,e,I);d.push(B[0],B[1]),f.push(i[C],i[C+1]),m.push(e.getRawIndex(I));break;case"-":A=!1}A&&(h.push(b),p.push(p.length))}p.sort(function(de,J){return m[de]-m[J]});for(var P=c.length,z=Mg(P),O=Mg(P),N=Mg(P),H=Mg(P),q=[],x=0;x<p.length;x++){var te=p[x],Q=x*2,ee=te*2;z[Q]=c[ee],z[Q+1]=c[ee+1],O[Q]=u[ee],O[Q+1]=u[ee+1],N[Q]=d[ee],N[Q+1]=d[ee+1],H[Q]=f[ee],H[Q+1]=f[ee+1],q[x]=h[te]}return{current:z,next:O,stackedOnCurrent:N,stackedOnNext:H,status:q}}var Kf=Math.min,Yf=Math.max;function Z0(n,e){return isNaN(n)||isNaN(e)}function TR(n,e,t,i,r,s,a,o,l){for(var c,u,d,f,h,p,m=t,v=0;v<i;v++){var g=e[m*2],y=e[m*2+1];if(m>=r||m<0)break;if(Z0(g,y)){if(l){m+=s;continue}break}if(m===t)n[s>0?"moveTo":"lineTo"](g,y),d=g,f=y;else{var x=g-c,b=y-u;if(x*x+b*b<.5){m+=s;continue}if(a>0){for(var A=m+s,S=e[A*2],C=e[A*2+1];S===g&&C===y&&v<i;)v++,A+=s,m+=s,S=e[A*2],C=e[A*2+1],g=e[m*2],y=e[m*2+1],x=g-c,b=y-u;var _=v+1;if(l)for(;Z0(S,C)&&_<i;)_++,A+=s,S=e[A*2],C=e[A*2+1];var M=.5,T=0,E=0,I=void 0,L=void 0;if(_>=i||Z0(S,C))h=g,p=y;else{T=S-c,E=C-u;var F=g-c,B=S-g,P=y-u,z=C-y,O=void 0,N=void 0;if(o==="x"){O=Math.abs(F),N=Math.abs(B);var H=T>0?1:-1;h=g-H*O*a,p=y,I=g+H*N*a,L=y}else if(o==="y"){O=Math.abs(P),N=Math.abs(z);var q=E>0?1:-1;h=g,p=y-q*O*a,I=g,L=y+q*N*a}else O=Math.sqrt(F*F+P*P),N=Math.sqrt(B*B+z*z),M=N/(N+O),h=g-T*a*(1-M),p=y-E*a*(1-M),I=g+T*a*M,L=y+E*a*M,I=Kf(I,Yf(S,g)),L=Kf(L,Yf(C,y)),I=Yf(I,Kf(S,g)),L=Yf(L,Kf(C,y)),T=I-g,E=L-y,h=g-T*O/N,p=y-E*O/N,h=Kf(h,Yf(c,g)),p=Kf(p,Yf(u,y)),h=Yf(h,Kf(c,g)),p=Yf(p,Kf(u,y)),T=g-h,E=y-p,I=g+T*N/O,L=y+E*N/O}n.bezierCurveTo(d,f,h,p,g,y),d=I,f=L}else n.lineTo(g,y)}c=g,u=y,m+=s}return v}var gre=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),ZHe=function(n){kn(e,n);function e(t){var i=n.call(this,t)||this;return i.type="ec-polyline",i}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new gre},e.prototype.buildPath=function(t,i){var r=i.points,s=0,a=r.length/2;if(i.connectNulls){for(;a>0&&Z0(r[a*2-2],r[a*2-1]);a--);for(;s<a&&Z0(r[s*2],r[s*2+1]);s++);}for(;s<a;)s+=TR(t,r,s,a,a,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},e.prototype.getPointOn=function(t,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var r=this.path,s=r.data,a=mm.CMD,o,l,c=i==="x",u=[],d=0;d<s.length;){var f=s[d++],h=void 0,p=void 0,m=void 0,v=void 0,g=void 0,y=void 0,x=void 0;switch(f){case a.M:o=s[d++],l=s[d++];break;case a.L:if(h=s[d++],p=s[d++],x=c?(t-o)/(h-o):(t-l)/(p-l),x<=1&&x>=0){var b=c?(p-l)*x+l:(h-o)*x+o;return c?[t,b]:[b,t]}o=h,l=p;break;case a.C:h=s[d++],p=s[d++],m=s[d++],v=s[d++],g=s[d++],y=s[d++];var A=c?OC(o,h,m,g,t,u):OC(l,p,v,y,t,u);if(A>0)for(var S=0;S<A;S++){var C=u[S];if(C<=1&&C>=0){var b=c?Ca(l,p,v,y,C):Ca(o,h,m,g,C);return c?[t,b]:[b,t]}}o=g,l=y;break}}},e}(Gr),JHe=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(gre),eGe=function(n){kn(e,n);function e(t){var i=n.call(this,t)||this;return i.type="ec-polygon",i}return e.prototype.getDefaultShape=function(){return new JHe},e.prototype.buildPath=function(t,i){var r=i.points,s=i.stackedOnPoints,a=0,o=r.length/2,l=i.smoothMonotone;if(i.connectNulls){for(;o>0&&Z0(r[o*2-2],r[o*2-1]);o--);for(;a<o&&Z0(r[a*2],r[a*2+1]);a++);}for(;a<o;){var c=TR(t,r,a,o,o,1,i.smooth,l,i.connectNulls);TR(t,s,a+c-1,c,o,-1,i.stackedOnSmooth,l,i.connectNulls),a+=c+1,t.closePath()}},e}(Gr);function tGe(n,e,t,i,r){var s=n.getArea(),a=s.x,o=s.y,l=s.width,c=s.height,u=t.get(["lineStyle","width"])||0;a-=u/2,o-=u/2,l+=u,c+=u,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var d=new pa({shape:{x:a,y:o,width:l,height:c}});if(e){var f=n.getBaseAxis(),h=f.isHorizontal(),p=f.inverse;h?(p&&(d.shape.x+=l),d.shape.width=0):(p||(d.shape.y+=c),d.shape.height=0);var m=Ci(r)?function(v){r(v,d)}:null;Gh(d,{shape:{width:l,height:c,x:a,y:o}},t,null,i,m)}return d}function nGe(n,e,t){var i=n.getArea(),r=Os(i.r0,1),s=Os(i.r,1),a=new py({shape:{cx:Os(n.cx,1),cy:Os(n.cy,1),r0:r,r:s,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(e){var o=n.getBaseAxis().dim==="angle";o?a.shape.endAngle=i.startAngle:a.shape.r=r,Gh(a,{shape:{endAngle:i.endAngle,r:s}},t)}return a}function iGe(n,e){return n.type===e}function IG(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function DG(n){for(var e=1/0,t=1/0,i=-1/0,r=-1/0,s=0;s<n.length;){var a=n[s++],o=n[s++];isNaN(a)||(e=Math.min(a,e),i=Math.max(a,i)),isNaN(o)||(t=Math.min(o,t),r=Math.max(o,r))}return[[e,t],[i,r]]}function RG(n,e){var t=DG(n),i=t[0],r=t[1],s=DG(e),a=s[0],o=s[1];return Math.max(Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]),Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]))}function PG(n){return jr(n)?n:n?.5:0}function rGe(n,e,t){if(!t.valueDim)return[];for(var i=e.count(),r=Mg(i*2),s=0;s<i;s++){var a=vre(t,n,e,s);r[s*2]=a[0],r[s*2+1]=a[1]}return r}function Xf(n,e,t,i,r){var s=t.getBaseAxis(),a=s.dim==="x"||s.dim==="radius"?0:1,o=[],l=0,c=[],u=[],d=[],f=[];if(r){for(l=0;l<n.length;l+=2){var h=e||n;!isNaN(h[l])&&!isNaN(h[l+1])&&f.push(n[l],n[l+1])}n=f}for(l=0;l<n.length-2;l+=2)switch(d[0]=n[l+2],d[1]=n[l+3],u[0]=n[l],u[1]=n[l+1],o.push(u[0],u[1]),i){case"end":c[a]=d[a],c[1-a]=u[1-a],o.push(c[0],c[1]);break;case"middle":var p=(u[a]+d[a])/2,m=[];c[a]=m[a]=p,c[1-a]=u[1-a],m[1-a]=d[1-a],o.push(c[0],c[1]),o.push(m[0],m[1]);break;default:c[a]=u[a],c[1-a]=d[1-a],o.push(c[0],c[1])}return o.push(n[l++],n[l++]),o}function sGe(n,e){var t=[],i=n.length,r,s;function a(u,d,f){var h=u.coord,p=(f-h)/(d.coord-h),m=WFe(p,[u.color,d.color]);return{coord:f,color:m}}for(var o=0;o<i;o++){var l=n[o],c=l.coord;if(c<0)r=l;else if(c>e){s?t.push(a(s,l,e)):r&&t.push(a(r,l,0),a(r,l,e));break}else r&&(t.push(a(r,l,0)),r=null),t.push(l),s=l}return t}function aGe(n,e,t){var i=n.getVisual("visualMeta");if(!(!i||!i.length||!n.count())&&e.type==="cartesian2d"){for(var r,s,a=i.length-1;a>=0;a--){var o=n.getDimensionInfo(i[a].dimension);if(r=o&&o.coordDim,r==="x"||r==="y"){s=i[a];break}}if(s){var l=e.getAxis(r),c=fi(s.stops,function(x){return{coord:l.toGlobalCoord(l.dataToCoord(x.value)),color:x.color}}),u=c.length,d=s.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),d.reverse());var f=sGe(c,r==="x"?t.getWidth():t.getHeight()),h=f.length;if(!h&&u)return c[0].coord<0?d[1]?d[1]:c[u-1].color:d[0]?d[0]:c[0].color;var p=10,m=f[0].coord-p,v=f[h-1].coord+p,g=v-m;if(g<.001)return"transparent";mt(f,function(x){x.offset=(x.coord-m)/g}),f.push({offset:h?f[h-1].offset:.5,color:d[1]||"transparent"}),f.unshift({offset:h?f[0].offset:.5,color:d[0]||"transparent"});var y=new gne(0,0,0,0,f,!0);return y[r]=m,y[r+"2"]=v,y}}}function oGe(n,e,t){var i=n.get("showAllSymbol"),r=i==="auto";if(!(i&&!r)){var s=t.getAxesByScale("ordinal")[0];if(s&&!(r&&lGe(s,e))){var a=e.mapDimension(s.dim),o={};return mt(s.getViewLabels(),function(l){var c=s.scale.getRawOrdinalNumber(l.tickValue);o[c]=1}),function(l){return!o.hasOwnProperty(e.get(a,l))}}}}function lGe(n,e){var t=n.getExtent(),i=Math.abs(t[1]-t[0])/n.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),s=Math.max(1,Math.round(r/5)),a=0;a<r;a+=s)if(pF.getSymbolSize(e,a)[n.isHorizontal()?1:0]*1.5>i)return!1;return!0}function cGe(n,e){return isNaN(n)||isNaN(e)}function uGe(n){for(var e=n.length/2;e>0&&cGe(n[e*2-2],n[e*2-1]);e--);return e-1}function LG(n,e){return[n[e*2],n[e*2+1]]}function dGe(n,e,t){for(var i=n.length/2,r=t==="x"?0:1,s,a,o=0,l=-1,c=0;c<i;c++)if(a=n[c*2+r],!(isNaN(a)||isNaN(n[c*2+1-r]))){if(c===0){s=a;continue}if(s<=e&&a>=e||s>=e&&a<=e){l=c;break}o=c,s=a}return{range:[o,l],t:(e-s)/(a-s)}}function yre(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<gc.length;e++)if(n.get([gc[e],"endLabel","show"]))return!0;return!1}function o6(n,e,t,i){if(iGe(e,"cartesian2d")){var r=i.getModel("endLabel"),s=r.get("valueAnimation"),a=i.getData(),o={lastFrameIndex:0},l=yre(i)?function(h,p){n._endLabelOnDuring(h,p,a,o,s,r,e)}:null,c=e.getBaseAxis().isHorizontal(),u=tGe(e,t,i,function(){var h=n._endLabel;h&&t&&o.originalX!=null&&h.attr({x:o.originalX,y:o.originalY})},l);if(!i.get("clip",!0)){var d=u.shape,f=Math.max(d.width,d.height);c?(d.y-=f,d.height+=f*2):(d.x-=f,d.width+=f*2)}return l&&l(1,u),u}else return nGe(e,t,i)}function fGe(n,e){var t=e.getBaseAxis(),i=t.isHorizontal(),r=t.inverse,s=i?r?"right":"left":"center",a=i?"middle":r?"top":"bottom";return{normal:{align:n.get("align")||s,verticalAlign:n.get("verticalAlign")||a}}}var hGe=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new eo,i=new XHe;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=t,this._changePolyState=Xr(this._changePolyState,this)},e.prototype.render=function(t,i,r){var s=t.coordinateSystem,a=this.group,o=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),u=o.getLayout("points")||[],d=s.type==="polar",f=this._coordSys,h=this._symbolDraw,p=this._polyline,m=this._polygon,v=this._lineGroup,g=!i.ssr&&t.get("animation"),y=!c.isEmpty(),x=c.get("origin"),b=mre(s,o,x),A=y&&rGe(s,o,b),S=t.get("showSymbol"),C=t.get("connectNulls"),_=S&&!d&&oGe(t,o,s),M=this._data;M&&M.eachItemGraphicEl(function(de,J){de.__temp&&(a.remove(de),M.setItemGraphicEl(J,null))}),S||h.remove(),a.add(v);var T=d?!1:t.get("step"),E;s&&s.getArea&&t.get("clip",!0)&&(E=s.getArea(),E.width!=null?(E.x-=.1,E.y-=.1,E.width+=.2,E.height+=.2):E.r0&&(E.r0-=.5,E.r+=.5)),this._clipShapeForSymbol=E;var I=aGe(o,s,r)||o.getVisual("style")[o.getVisual("drawType")];if(!(p&&f.type===s.type&&T===this._step))S&&h.updateData(o,{isIgnore:_,clipShape:E,disableAnimation:!0,getSymbolPoint:function(de){return[u[de*2],u[de*2+1]]}}),g&&this._initSymbolLabelAnimation(o,s,E),T&&(A&&(A=Xf(A,u,s,T,C)),u=Xf(u,null,s,T,C)),p=this._newPolyline(u),y?m=this._newPolygon(u,A):m&&(v.remove(m),m=this._polygon=null),d||this._initOrUpdateEndLabel(t,s,vm(I)),v.setClipPath(o6(this,s,!0,t));else{y&&!m?m=this._newPolygon(u,A):m&&!y&&(v.remove(m),m=this._polygon=null),d||this._initOrUpdateEndLabel(t,s,vm(I));var L=v.getClipPath();if(L){var F=o6(this,s,!1,t);Gh(L,{shape:F.shape},t)}else v.setClipPath(o6(this,s,!0,t));S&&h.updateData(o,{isIgnore:_,clipShape:E,disableAnimation:!0,getSymbolPoint:function(de){return[u[de*2],u[de*2+1]]}}),(!IG(this._stackedOnPoints,A)||!IG(this._points,u))&&(g?this._doUpdateAnimation(o,A,s,r,T,x,C):(T&&(A&&(A=Xf(A,u,s,T,C)),u=Xf(u,null,s,T,C)),p.setShape({points:u}),m&&m.setShape({points:u,stackedOnPoints:A})))}var B=t.getModel("emphasis"),P=B.get("focus"),z=B.get("blurScope"),O=B.get("disabled");if(p.useStyle(Cr(l.getLineStyle(),{fill:"none",stroke:I,lineJoin:"bevel"})),sR(p,t,"lineStyle"),p.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var N=p.getState("emphasis").style;N.lineWidth=+p.style.lineWidth+1}Rr(p).seriesIndex=t.seriesIndex,jC(p,P,z,O);var H=PG(t.get("smooth")),q=t.get("smoothMonotone");if(p.setShape({smooth:H,smoothMonotone:q,connectNulls:C}),m){var te=o.getCalculationInfo("stackedOnSeries"),Q=0;m.useStyle(Cr(c.getAreaStyle(),{fill:I,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),te&&(Q=PG(te.get("smooth"))),m.setShape({smooth:H,stackedOnSmooth:Q,smoothMonotone:q,connectNulls:C}),sR(m,t,"areaStyle"),Rr(m).seriesIndex=t.seriesIndex,jC(m,P,z,O)}var ee=this._changePolyState;o.eachItemGraphicEl(function(de){de&&(de.onHoverStateChange=ee)}),this._polyline.onHoverStateChange=ee,this._data=o,this._coordSys=s,this._stackedOnPoints=A,this._points=u,this._step=T,this._valueOrigin=x,t.get("triggerLineEvent")&&(this.packEventData(t,p),m&&this.packEventData(t,m))},e.prototype.packEventData=function(t,i){Rr(i).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,i,r,s){var a=t.getData(),o=pm(a,s);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var l=a.getLayout("points"),c=a.getItemGraphicEl(o);if(!c){var u=l[o*2],d=l[o*2+1];if(isNaN(u)||isNaN(d)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,d))return;var f=t.get("zlevel")||0,h=t.get("z")||0;c=new pF(a,o),c.x=u,c.y=d,c.setZ(f,h);var p=c.getSymbolPath().getTextContent();p&&(p.zlevel=f,p.z=h,p.z2=this._polyline.z2+1),c.__temp=!0,a.setItemGraphicEl(o,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else Qc.prototype.highlight.call(this,t,i,r,s)},e.prototype.downplay=function(t,i,r,s){var a=t.getData(),o=pm(a,s);if(this._changePolyState("normal"),o!=null&&o>=0){var l=a.getItemGraphicEl(o);l&&(l.__temp?(a.setItemGraphicEl(o,null),this.group.remove(l)):l.downplay())}else Qc.prototype.downplay.call(this,t,i,r,s)},e.prototype._changePolyState=function(t){var i=this._polygon;VV(this._polyline,t),i&&VV(i,t)},e.prototype._newPolyline=function(t){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new ZHe({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},e.prototype._newPolygon=function(t,i){var r=this._polygon;return r&&this._lineGroup.remove(r),r=new eGe({shape:{points:t,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(r),this._polygon=r,r},e.prototype._initSymbolLabelAnimation=function(t,i,r){var s,a,o=i.getBaseAxis(),l=o.inverse;i.type==="cartesian2d"?(s=o.isHorizontal(),a=!1):i.type==="polar"&&(s=o.dim==="angle",a=!0);var c=t.hostModel,u=c.get("animationDuration");Ci(u)&&(u=u(null));var d=c.get("animationDelay")||0,f=Ci(d)?d(null):d;t.eachItemGraphicEl(function(h,p){var m=h;if(m){var v=[h.x,h.y],g=void 0,y=void 0,x=void 0;if(r)if(a){var b=r,A=i.pointToCoord(v);s?(g=b.startAngle,y=b.endAngle,x=-A[1]/180*Math.PI):(g=b.r0,y=b.r,x=A[0])}else{var S=r;s?(g=S.x,y=S.x+S.width,x=h.x):(g=S.y+S.height,y=S.y,x=h.y)}var C=y===g?0:(x-g)/(y-g);l&&(C=1-C);var _=Ci(d)?d(p):u*C+f,M=m.getSymbolPath(),T=M.getTextContent();m.attr({scaleX:0,scaleY:0}),m.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:_}),T&&T.animateFrom({style:{opacity:0}},{duration:300,delay:_}),M.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,i,r){var s=t.getModel("endLabel");if(yre(t)){var a=t.getData(),o=this._polyline,l=a.getLayout("points");if(!l){o.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new Ra({z2:200}),c.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var u=uGe(l);u>=0&&(jM(o,$M(t,"endLabel"),{inheritColor:r,labelFetcher:t,labelDataIndex:u,defaultText:function(d,f,h){return h!=null?KHe(a,h):pre(a,d)},enableTextSetter:!0},fGe(s,i)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,i,r,s,a,o,l){var c=this._endLabel,u=this._polyline;if(c){t<1&&s.originalX==null&&(s.originalX=c.x,s.originalY=c.y);var d=r.getLayout("points"),f=r.hostModel,h=f.get("connectNulls"),p=o.get("precision"),m=o.get("distance")||0,v=l.getBaseAxis(),g=v.isHorizontal(),y=v.inverse,x=i.shape,b=y?g?x.x:x.y+x.height:g?x.x+x.width:x.y,A=(g?m:0)*(y?-1:1),S=(g?0:-m)*(y?-1:1),C=g?"x":"y",_=dGe(d,b,C),M=_.range,T=M[1]-M[0],E=void 0;if(T>=1){if(T>1&&!h){var I=LG(d,M[0]);c.attr({x:I[0]+A,y:I[1]+S}),a&&(E=f.getRawValue(M[0]))}else{var I=u.getPointOn(b,C);I&&c.attr({x:I[0]+A,y:I[1]+S});var L=f.getRawValue(M[0]),F=f.getRawValue(M[1]);a&&(E=HBe(r,p,L,F,_.t))}s.lastFrameIndex=M[0]}else{var B=t===1||s.lastFrameIndex>0?M[0]:0,I=LG(d,B);a&&(E=f.getRawValue(B)),c.attr({x:I[0]+A,y:I[1]+S})}if(a){var P=Cne(c);typeof P.setLabelText=="function"&&P.setLabelText(E)}}},e.prototype._doUpdateAnimation=function(t,i,r,s,a,o,l){var c=this._polyline,u=this._polygon,d=t.hostModel,f=QHe(this._data,t,this._stackedOnPoints,i,this._coordSys,r,this._valueOrigin),h=f.current,p=f.stackedOnCurrent,m=f.next,v=f.stackedOnNext;if(a&&(p=Xf(f.stackedOnCurrent,f.current,r,a,l),h=Xf(f.current,null,r,a,l),v=Xf(f.stackedOnNext,f.next,r,a,l),m=Xf(f.next,null,r,a,l)),RG(h,m)>3e3||u&&RG(p,v)>3e3){c.stopAnimation(),c.setShape({points:m}),u&&(u.stopAnimation(),u.setShape({points:m,stackedOnPoints:v}));return}c.shape.__points=f.current,c.shape.points=h;var g={shape:{points:m}};f.current!==h&&(g.shape.__points=f.next),c.stopAnimation(),Ju(c,g,d),u&&(u.setShape({points:h,stackedOnPoints:p}),u.stopAnimation(),Ju(u,{shape:{stackedOnPoints:v}},d),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var y=[],x=f.status,b=0;b<x.length;b++){var A=x[b].cmd;if(A==="="){var S=t.getItemGraphicEl(x[b].idx1);S&&y.push({el:S,ptIdx:b})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var C=c.shape.__points,_=0;_<y.length;_++){var M=y[_].el,T=y[_].ptIdx*2;M.x=C[T],M.y=C[T+1],M.markRedraw()}})},e.prototype.remove=function(t){var i=this.group,r=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),r&&r.eachItemGraphicEl(function(s,a){s.__temp&&(i.remove(s),r.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Qc);function pGe(n,e){return{seriesType:n,plan:fie(),reset:function(t){var i=t.getData(),r=t.coordinateSystem;if(t.pipelineContext,!!r){var s=fi(r.dimensions,function(d){return i.mapDimension(d)}).slice(0,2),a=s.length,o=i.getCalculationInfo("stackResultDimension");kx(i,s[0])&&(s[0]=o),kx(i,s[1])&&(s[1]=o);var l=i.getStore(),c=i.getDimensionIndex(s[0]),u=i.getDimensionIndex(s[1]);return a&&{progress:function(d,f){for(var h=d.end-d.start,p=Mg(h*a),m=[],v=[],g=d.start,y=0;g<d.end;g++){var x=void 0;if(a===1){var b=l.get(c,g);x=r.dataToPoint(b,null,v)}else m[0]=l.get(c,g),m[1]=l.get(u,g),x=r.dataToPoint(m,null,v);p[y++]=x[0],p[y++]=x[1]}f.setLayout("points",p)}}}}}}var mGe={average:function(n){for(var e=0,t=0,i=0;i<n.length;i++)isNaN(n[i])||(e+=n[i],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},vGe=function(n){return Math.round(n.length/2)};function gGe(n){return{seriesType:n,reset:function(e,t,i){var r=e.getData(),s=e.get("sampling"),a=e.coordinateSystem,o=r.count();if(o>10&&a.type==="cartesian2d"&&s){var l=a.getBaseAxis(),c=a.getOtherAxis(l),u=l.getExtent(),d=i.getDevicePixelRatio(),f=Math.abs(u[1]-u[0])*(d||1),h=Math.round(o/f);if(isFinite(h)&&h>1){s==="lttb"?e.setData(r.lttbDownSample(r.mapDimension(c.dim),1/h)):s==="minmax"&&e.setData(r.minmaxDownSample(r.mapDimension(c.dim),1/h));var p=void 0;ri(s)?p=mGe[s]:Ci(s)&&(p=s),p&&e.setData(r.downSample(r.mapDimension(c.dim),1/h,p,vGe))}}}}}function yGe(n){n.registerChartView(hGe),n.registerSeriesModel(qHe),n.registerLayout(pGe("line")),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),i=e.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",i)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,gGe("line"))}function oS(n,e,t){var i=n.get("borderRadius");if(i==null)return t?{cornerRadius:0}:null;Un(i)||(i=[i,i,i,i]);var r=Math.abs(e.r||0-e.r0||0);return{cornerRadius:fi(i,function(s){return lp(s,r)})}}var kG=Math.PI*2,lS=Math.PI/180;function bre(n,e){return D1(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function xre(n,e){var t=bre(n,e),i=n.get("center"),r=n.get("radius");Un(r)||(r=[0,r]);var s=cs(t.width,e.getWidth()),a=cs(t.height,e.getHeight()),o=Math.min(s,a),l=cs(r[0],o/2),c=cs(r[1],o/2),u,d,f=n.coordinateSystem;if(f){var h=f.dataToPoint(i);u=h[0]||0,d=h[1]||0}else Un(i)||(i=[i,i]),u=cs(i[0],s)+t.x,d=cs(i[1],a)+t.y;return{cx:u,cy:d,r0:l,r:c}}function bGe(n,e,t){e.eachSeriesByType(n,function(i){var r=i.getData(),s=r.mapDimension("value"),a=bre(i,t),o=xre(i,t),l=o.cx,c=o.cy,u=o.r,d=o.r0,f=-i.get("startAngle")*lS,h=i.get("endAngle"),p=i.get("padAngle")*lS;h=h==="auto"?f-kG:-h*lS;var m=i.get("minAngle")*lS,v=m+p,g=0;r.each(s,function(z){!isNaN(z)&&g++});var y=r.getSum(s),x=Math.PI/(y||g)*2,b=i.get("clockwise"),A=i.get("roseType"),S=i.get("stillShowZeroSum"),C=r.getDataExtent(s);C[0]=0;var _=b?1:-1,M=[f,h],T=_*p/2;$te(M,!b),f=M[0],h=M[1];var E=Are(i);E.startAngle=f,E.endAngle=h,E.clockwise=b;var I=Math.abs(h-f),L=I,F=0,B=f;if(r.setLayout({viewRect:a,r:u}),r.each(s,function(z,O){var N;if(isNaN(z)){r.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:l,cy:c,r0:d,r:A?NaN:u});return}A!=="area"?N=y===0&&S?x:z*x:N=I/g,N<v?(N=v,L-=v):F+=z;var H=B+_*N,q=0,te=0;p>N?(q=B+_*N/2,te=q):(q=B+T,te=H-T),r.setItemLayout(O,{angle:N,startAngle:q,endAngle:te,clockwise:b,cx:l,cy:c,r0:d,r:A?Q8(z,C,[d,u]):u}),B=H}),L<kG&&g)if(L<=.001){var P=I/g;r.each(s,function(z,O){if(!isNaN(z)){var N=r.getItemLayout(O);N.angle=P;var H=0,q=0;P<p?(H=f+_*(O+1/2)*P,q=H):(H=f+_*O*P+T,q=f+_*(O+1)*P-T),N.startAngle=H,N.endAngle=q}})}else x=L/F,B=f,r.each(s,function(z,O){if(!isNaN(z)){var N=r.getItemLayout(O),H=N.angle===v?v:z*x,q=0,te=0;H<p?(q=B+_*H/2,te=q):(q=B+T,te=B+_*H-T),N.startAngle=q,N.endAngle=te,B+=_*H}})})}var Are=Ls();function xGe(n){return{seriesType:n,reset:function(e,t){var i=t.findComponents({mainType:"legend"});if(!(!i||!i.length)){var r=e.getData();r.filterSelf(function(s){for(var a=r.getName(s),o=0;o<i.length;o++)if(!i[o].isSelected(a))return!1;return!0})}}}}var AGe=Math.PI/180;function FG(n,e,t,i,r,s,a,o,l,c){if(n.length<2)return;function u(m){for(var v=m.rB,g=v*v,y=0;y<m.list.length;y++){var x=m.list[y],b=Math.abs(x.label.y-t),A=i+x.len,S=A*A,C=Math.sqrt(Math.abs((1-b*b/g)*S)),_=e+(C+x.len2)*r,M=_-x.label.x,T=x.targetTextWidth-M*r;wre(x,T,!0),x.label.x=_}}function d(m){for(var v={list:[],maxY:0},g={list:[],maxY:0},y=0;y<m.length;y++)if(m[y].labelAlignTo==="none"){var x=m[y],b=x.label.y>t?g:v,A=Math.abs(x.label.y-t);if(A>=b.maxY){var S=x.label.x-e-x.len2*r,C=i+x.len,_=Math.abs(S)<C?Math.sqrt(A*A/(1-S*S/C/C)):C;b.rB=_,b.maxY=A}b.list.push(x)}u(v),u(g)}for(var f=n.length,h=0;h<f;h++)if(n[h].position==="outer"&&n[h].labelAlignTo==="labelLine"){var p=n[h].label.x-c;n[h].linePoints[1][0]+=p,n[h].label.x=c}UHe(n,l,l+a)&&d(n)}function wGe(n,e,t,i,r,s,a,o){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<n.length;f++){var h=n[f].label;l6(n[f])||(h.x<e?(u=Math.min(u,h.x),l.push(n[f])):(d=Math.max(d,h.x),c.push(n[f])))}for(var f=0;f<n.length;f++){var p=n[f];if(!l6(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var h=p.label,m=p.linePoints,v=void 0;p.labelAlignTo==="edge"?h.x<e?v=m[2][0]-p.labelDistance-a-p.edgeDistance:v=a+r-p.edgeDistance-m[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?h.x<e?v=u-a-p.bleedMargin:v=a+r-d-p.bleedMargin:h.x<e?v=h.x-a-p.bleedMargin:v=a+r-h.x-p.bleedMargin,p.targetTextWidth=v,wre(p,v)}}FG(c,e,t,i,1,r,s,a,o,d),FG(l,e,t,i,-1,r,s,a,o,u);for(var f=0;f<n.length;f++){var p=n[f];if(!l6(p)&&p.linePoints){var h=p.label,m=p.linePoints,g=p.labelAlignTo==="edge",y=h.style.padding,x=y?y[1]+y[3]:0,b=h.style.backgroundColor?0:x,A=p.rect.width+b,S=m[1][0]-m[2][0];g?h.x<e?m[2][0]=a+p.edgeDistance+A+p.labelDistance:m[2][0]=a+r-p.edgeDistance-A-p.labelDistance:(h.x<e?m[2][0]=h.x+p.labelDistance:m[2][0]=h.x-p.labelDistance,m[1][0]=m[2][0]+S),m[1][1]=m[2][1]=h.y}}}function wre(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var i=n.label,r=i.style,s=n.rect,a=r.backgroundColor,o=r.padding,l=o?o[1]+o[3]:0,c=r.overflow,u=s.width+(a?0:l);if(e<u||t){var d=s.height;if(c&&c.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",e-l);var f=i.getBoundingRect();i.setStyle("width",Math.ceil(f.width)),i.setStyle("backgroundColor",a)}else{var h=e-l,p=e<u?h:t?h>n.unconstrainedWidth?null:h:null;i.setStyle("width",p)}var m=i.getBoundingRect();s.width=m.width;var v=(i.style.margin||0)+2.1;s.height=m.height+v,s.y-=(s.height-d)/2}}}function l6(n){return n.position==="center"}function SGe(n){var e=n.getData(),t=[],i,r,s=!1,a=(n.get("minShowLabelAngle")||0)*AGe,o=e.getLayout("viewRect"),l=e.getLayout("r"),c=o.width,u=o.x,d=o.y,f=o.height;function h(S){S.ignore=!0}function p(S){if(!S.ignore)return!0;for(var C in S.states)if(S.states[C].ignore===!1)return!0;return!1}e.each(function(S){var C=e.getItemGraphicEl(S),_=C.shape,M=C.getTextContent(),T=C.getTextGuideLine(),E=e.getItemModel(S),I=E.getModel("label"),L=I.get("position")||E.get(["emphasis","label","position"]),F=I.get("distanceToLabelLine"),B=I.get("alignTo"),P=cs(I.get("edgeDistance"),c),z=I.get("bleedMargin"),O=E.getModel("labelLine"),N=O.get("length");N=cs(N,c);var H=O.get("length2");if(H=cs(H,c),Math.abs(_.endAngle-_.startAngle)<a){mt(M.states,h),M.ignore=!0,T&&(mt(T.states,h),T.ignore=!0);return}if(p(M)){var q=(_.startAngle+_.endAngle)/2,te=Math.cos(q),Q=Math.sin(q),ee,de,J,ue;i=_.cx,r=_.cy;var Te=L==="inside"||L==="inner";if(L==="center")ee=_.cx,de=_.cy,ue="center";else{var De=(Te?(_.r+_.r0)/2*te:_.r*te)+i,Le=(Te?(_.r+_.r0)/2*Q:_.r*Q)+r;if(ee=De+te*3,de=Le+Q*3,!Te){var Ne=De+te*(N+l-_.r),Y=Le+Q*(N+l-_.r),oe=Ne+(te<0?-1:1)*H,ne=Y;B==="edge"?ee=te<0?u+P:u+c-P:ee=oe+(te<0?-F:F),de=ne,J=[[De,Le],[Ne,Y],[oe,ne]]}ue=Te?"center":B==="edge"?te>0?"right":"left":te>0?"left":"right"}var Xe=Math.PI,ke=0,Ge=I.get("rotate");if(jr(Ge))ke=Ge*(Xe/180);else if(L==="center")ke=0;else if(Ge==="radial"||Ge===!0){var He=te<0?-q+Xe:-q;ke=He}else if(Ge==="tangential"&&L!=="outside"&&L!=="outer"){var qe=Math.atan2(te,Q);qe<0&&(qe=Xe*2+qe);var tt=Q>0;tt&&(qe=Xe+qe),ke=qe-Xe}if(s=!!ke,M.x=ee,M.y=de,M.rotation=ke,M.setStyle({verticalAlign:"middle"}),Te){M.setStyle({align:ue});var Z=M.states.select;Z&&(Z.x+=M.x,Z.y+=M.y)}else{var pe=M.getBoundingRect().clone();pe.applyTransform(M.getComputedTransform());var G=(M.style.margin||0)+2.1;pe.y-=G/2,pe.height+=G,t.push({label:M,labelLine:T,position:L,len:N,len2:H,minTurnAngle:O.get("minTurnAngle"),maxSurfaceAngle:O.get("maxSurfaceAngle"),surfaceNormal:new wi(te,Q),linePoints:J,textAlign:ue,labelDistance:F,labelAlignTo:B,edgeDistance:P,bleedMargin:z,rect:pe,unconstrainedWidth:pe.width,labelStyleWidth:M.style.width})}C.setTextConfig({inside:Te})}}),!s&&n.get("avoidLabelOverlap")&&wGe(t,i,r,l,c,f,u,d);for(var m=0;m<t.length;m++){var v=t[m],g=v.label,y=v.labelLine,x=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:v.textAlign}),x&&(mt(g.states,h),g.ignore=!0);var b=g.states.select;b&&(b.x+=g.x,b.y+=g.y)}if(y){var A=v.linePoints;x||!A?(mt(y.states,h),y.ignore=!0):(PHe(A,v.minTurnAngle),LHe(A,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:A}),g.__hostTarget.textGuideLineConfig={anchor:new wi(A[0][0],A[0][1])})}}}var _Ge=function(n){kn(e,n);function e(t,i,r){var s=n.call(this)||this;s.z2=2;var a=new Ra;return s.setTextContent(a),s.updateData(t,i,r,!0),s}return e.prototype.updateData=function(t,i,r,s){var a=this,o=t.hostModel,l=t.getItemModel(i),c=l.getModel("emphasis"),u=t.getItemLayout(i),d=pn(oS(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){a.setShape(d);return}if(s){a.setShape(d);var f=o.getShallow("animationType");o.ecModel.ssr?(Gh(a,{scaleX:0,scaleY:0},o,{dataIndex:i,isFrom:!0}),a.originX=d.cx,a.originY=d.cy):f==="scale"?(a.shape.r=u.r0,Gh(a,{shape:{r:u.r}},o,i)):r!=null?(a.setShape({startAngle:r,endAngle:r}),Gh(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},o,i)):(a.shape.endAngle=u.startAngle,Ju(a,{shape:{endAngle:u.endAngle}},o,i))}else bne(a),Ju(a,{shape:d},o,i);a.useStyle(t.getItemVisual(i,"style")),sR(a,l);var h=(u.startAngle+u.endAngle)/2,p=o.get("selectedOffset"),m=Math.cos(h)*p,v=Math.sin(h)*p,g=l.getShallow("cursor");g&&a.attr("cursor",g),this._updateLabel(o,t,i),a.ensureState("emphasis").shape=pn({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},oS(c.getModel("itemStyle"),u)),pn(a.ensureState("select"),{x:m,y:v,shape:oS(l.getModel(["select","itemStyle"]),u)}),pn(a.ensureState("blur"),{shape:oS(l.getModel(["blur","itemStyle"]),u)});var y=a.getTextGuideLine(),x=a.getTextContent();y&&pn(y.ensureState("select"),{x:m,y:v}),pn(x.ensureState("select"),{x:m,y:v}),jC(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,i,r){var s=this,a=i.getItemModel(r),o=a.getModel("labelLine"),l=i.getItemVisual(r,"style"),c=l&&l.fill,u=l&&l.opacity;jM(s,$M(a),{labelFetcher:i.hostModel,labelDataIndex:r,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(r,"normal")||i.getName(r)});var d=s.getTextContent();s.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var f=t.get(["label","position"]);if(f!=="outside"&&f!=="outer")s.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new LA,this.setTextGuideLine(h)),FHe(this,BHe(a),{stroke:c,opacity:mb(o.get(["lineStyle","opacity"]),u,1)})}},e}(py),CGe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,i,r,s){var a=t.getData(),o=this._data,l=this.group,c;if(!o&&a.count()>0){for(var u=a.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<a.count();++d)u=a.getItemLayout(d);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&t.get("showEmptyCircle")){var f=Are(t),h=new py({shape:pn(xre(t,r),f)});h.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,l.add(h)}a.diff(o).add(function(p){var m=new _Ge(a,p,c);a.setItemGraphicEl(p,m),l.add(m)}).update(function(p,m){var v=o.getItemGraphicEl(m);v.updateData(a,p,c),v.off("click"),l.add(v),a.setItemGraphicEl(p,v)}).remove(function(p){var m=o.getItemGraphicEl(p);yne(m,t,p)}).execute(),SGe(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,i){var r=i.getData(),s=r.getItemLayout(0);if(s){var a=t[0]-s.cx,o=t[1]-s.cy,l=Math.sqrt(a*a+o*o);return l<=s.r&&l>=s.r0}},e.type="pie",e}(Qc);function MGe(n,e,t){e=Un(e)&&{coordDimensions:e}||pn({encodeDefine:n.getEncode()},e);var i=n.getSource(),r=Zie(i,e).dimensions,s=new Qie(r,n);return s.initData(i,t),s}var TGe=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var i=this._getDataWithEncodedVisual();return i.getItemVisual(e,t)},n}(),EGe=Ls(),IGe=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new TGe(Xr(this.getData,this),Xr(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return MGe(this,{coordDimensions:["value"],encodeDefaulter:Ns(I9e,this)})},e.prototype.getDataParams=function(t){var i=this.getData(),r=EGe(i),s=r.seats;if(!s){var a=[];i.each(i.mapDimension("value"),function(l){a.push(l)}),s=r.seats=SBe(a,i.hostModel.get("percentPrecision"))}var o=n.prototype.getDataParams.call(this,t);return o.percent=s[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){Z8(t,"labelLine",["show"]);var i=t.labelLine,r=t.emphasis.labelLine;i.show=i.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(gf);function DGe(n){return{seriesType:n,reset:function(e,t){var i=e.getData();i.filterSelf(function(r){var s=i.mapDimension("value"),a=i.get(s,r);return!(jr(a)&&!isNaN(a)&&a<0)})}}}function Sre(n){n.registerChartView(CGe),n.registerSeriesModel(IGe),fze("pie",n.registerAction),n.registerLayout(Ns(bGe,"pie")),n.registerProcessor(xGe("pie")),n.registerProcessor(DGe("pie"))}var RGe=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Dr),ER=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",qc).models[0]},e.type="cartesian2dAxis",e}(Dr);od(ER,xHe);var _re={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},PGe=Sr({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},_re),mF=Sr({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},_re),LGe=Sr({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},mF),kGe=Cr({logBase:10},mF);const FGe={category:PGe,value:mF,time:LGe,log:kGe};var BGe={value:1,category:1,time:1,log:1};function BG(n,e,t,i){mt(BGe,function(r,s){var a=Sr(Sr({},FGe[s],!0),i,!0),o=function(l){kn(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=e+"Axis."+s,u}return c.prototype.mergeDefaultAndTheme=function(u,d){var f=Ix(this),h=f?rT(u):{},p=d.getTheme();Sr(u,p.get(s+"Axis")),Sr(u,this.getDefaultOption()),u.type=NG(u),f&&R1(u,h,f)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=CR.createByAxisModel(this))},c.prototype.getCategories=function(u){var d=this.option;if(d.type==="category")return u?d.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=e+"Axis."+s,c.defaultOption=a,c}(t);n.registerComponentModel(o)}),n.registerSubTypeDefaulter(e+"Axis",NG)}function NG(n){return n.type||(n.data?"category":"value")}var NGe=function(){function n(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return n.prototype.getAxis=function(e){return this._axes[e]},n.prototype.getAxes=function(){return fi(this._dimList,function(e){return this._axes[e]},this)},n.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),_a(this.getAxes(),function(t){return t.scale.type===e})},n.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},n}(),IR=["x","y"];function OG(n){return n.type==="interval"||n.type==="time"}var OGe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=IR,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!OG(t)||!OG(i))){var r=t.getExtent(),s=i.getExtent(),a=this.dataToPoint([r[0],s[0]]),o=this.dataToPoint([r[1],s[1]]),l=r[1]-r[0],c=s[1]-s[0];if(!(!l||!c)){var u=(o[0]-a[0])/l,d=(o[1]-a[1])/c,f=a[0]-r[0]*u,h=a[1]-s[0]*d,p=this._transform=[u,0,0,d,f,h];this._invTransform=w7([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var i=this.getAxis("x"),r=this.getAxis("y");return i.contain(i.toLocalCoord(t[0]))&&r.contain(r.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,i){var r=this.dataToPoint(t),s=this.dataToPoint(i),a=this.getArea(),o=new _r(r[0],r[1],s[0]-r[0],s[1]-r[1]);return a.intersect(o)},e.prototype.dataToPoint=function(t,i,r){r=r||[];var s=t[0],a=t[1];if(this._transform&&s!=null&&isFinite(s)&&a!=null&&isFinite(a))return lc(r,t,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return r[0]=o.toGlobalCoord(o.dataToCoord(s,i)),r[1]=l.toGlobalCoord(l.dataToCoord(a,i)),r},e.prototype.clampData=function(t,i){var r=this.getAxis("x").scale,s=this.getAxis("y").scale,a=r.getExtent(),o=s.getExtent(),l=r.parse(t[0]),c=s.parse(t[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),i[1]=Math.min(Math.max(Math.min(o[0],o[1]),c),Math.max(o[0],o[1])),i},e.prototype.pointToData=function(t,i){var r=[];if(this._invTransform)return lc(r,t,this._invTransform);var s=this.getAxis("x"),a=this.getAxis("y");return r[0]=s.coordToData(s.toLocalCoord(t[0]),i),r[1]=a.coordToData(a.toLocalCoord(t[1]),i),r},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var i=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),s=Math.min(i[0],i[1])-t,a=Math.min(r[0],r[1])-t,o=Math.max(i[0],i[1])-s+t,l=Math.max(r[0],r[1])-a+t;return new _r(s,a,o,l)},e}(NGe),UGe=function(n){kn(e,n);function e(t,i,r,s,a){var o=n.call(this,t,i,r)||this;return o.index=0,o.type=s||"value",o.position=a||"bottom",o}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),t&&i[0]>i[1]&&i.reverse(),i},e.prototype.pointToData=function(t,i){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),i)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(DHe);function DR(n,e,t){t=t||{};var i=n.coordinateSystem,r=e.axis,s={},a=r.getAxesOnZeroOf()[0],o=r.position,l=a?"onZero":o,c=r.dim,u=i.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],f={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,p=c==="x"?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h];if(a){var m=a.toGlobalCoord(a.dataToCoord(0));p[f.onZero]=Math.max(Math.min(m,p[1]),p[0])}s.position=[c==="y"?p[f[l]]:d[0],c==="x"?p[f[l]]:d[3]],s.rotation=Math.PI/2*(c==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=v[o],s.labelOffset=a?p[f[o]]-p[f.onZero]:0,e.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),Sx(t.labelInside,e.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var g=e.get(["axisLabel","rotate"]);return s.labelRotate=l==="top"?-g:g,s.z2=1,s}function UG(n){return n.get("coordinateSystem")==="cartesian2d"}function zG(n){var e={xAxisModel:null,yAxisModel:null};return mt(e,function(t,i){var r=i.replace(/Model$/,""),s=n.getReferringComponents(r,qc).models[0];e[i]=s}),e}var c6=Math.log;function zGe(n,e,t){var i=gy.prototype,r=i.getTicks.call(t),s=i.getTicks.call(t,!0),a=r.length-1,o=i.getInterval.call(t),l=rre(n,e),c=l.extent,u=l.fixMin,d=l.fixMax;if(n.type==="log"){var f=c6(n.base);c=[c6(c[0])/f,c6(c[1])/f]}n.setExtent(c[0],c[1]),n.calcNiceExtent({splitNumber:a,fixMin:u,fixMax:d});var h=i.getExtent.call(n);u&&(c[0]=h[0]),d&&(c[1]=h[1]);var p=i.getInterval.call(n),m=c[0],v=c[1];if(u&&d)p=(v-m)/a;else if(u)for(v=c[0]+p*a;v<c[1]&&isFinite(v)&&isFinite(c[1]);)p=i6(p),v=c[0]+p*a;else if(d)for(m=c[1]-p*a;m>c[0]&&isFinite(m)&&isFinite(c[0]);)p=i6(p),m=c[1]-p*a;else{var g=n.getTicks().length-1;g>a&&(p=i6(p));var y=p*a;v=Math.ceil(c[1]/p)*p,m=Os(v-y),m<0&&c[0]>=0?(m=0,v=Os(y)):v>0&&c[1]<=0&&(v=0,m=-Os(y))}var x=(r[0].value-s[0].value)/o,b=(r[a].value-s[a].value)/o;i.setExtent.call(n,m+p*x,v+p*b),i.setInterval.call(n,p),(x||b)&&i.setNiceExtent.call(n,m+p,v-p)}var VGe=function(){function n(e,t,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=IR,this._initCartesian(e,t,i),this.model=e}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(e,t){var i=this._axesMap;this._updateScale(e,this.model);function r(a){var o,l=hs(a),c=l.length;if(c){for(var u=[],d=c-1;d>=0;d--){var f=+l[d],h=a[f],p=h.model,m=h.scale;MR(m)&&p.get("alignTicks")&&p.get("interval")==null?u.push(h):(AG(m,p),MR(m)&&(o=h))}u.length&&(o||(o=u.pop(),AG(o.scale,o.model)),mt(u,function(v){zGe(v.scale,v.model,o.scale)}))}}r(i.x),r(i.y);var s={};mt(i.x,function(a){VG(i,"y",a,s)}),mt(i.y,function(a){VG(i,"x",a,s)}),this.resize(this.model,t)},n.prototype.resize=function(e,t,i){var r=e.getBoxLayoutParams(),s=!i&&e.get("containLabel"),a=D1(r,{width:t.getWidth(),height:t.getHeight()});this._rect=a;var o=this._axesList;l(),s&&(mt(o,function(c){if(!c.model.get(["axisLabel","inside"])){var u=gHe(c);if(u){var d=c.isHorizontal()?"height":"width",f=c.model.get(["axisLabel","margin"]);a[d]-=u[d]+f,c.position==="top"?a.y+=u.height+f:c.position==="left"&&(a.x+=u.width+f)}}}),l()),mt(this._coordsList,function(c){c.calcAffineTransform()});function l(){mt(o,function(c){var u=c.isHorizontal(),d=u?[0,a.width]:[0,a.height],f=c.inverse?1:0;c.setExtent(d[f],d[1-f]),HGe(c,u?a.x:a.y)})}},n.prototype.getAxis=function(e,t){var i=this._axesMap[e];if(i!=null)return i[t||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var i="x"+e+"y"+t;return this._coordsMap[i]}hi(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var r=0,s=this._coordsList;r<s.length;r++)if(s[r].getAxis("x").index===e||s[r].getAxis("y").index===t)return s[r]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(e,t,i){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.dataToPoint(i):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(i)):null},n.prototype.convertFromPixel=function(e,t,i){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.pointToData(i):r.axis?r.axis.coordToData(r.axis.toLocalCoord(i)):null},n.prototype._findConvertTarget=function(e){var t=e.seriesModel,i=e.xAxisModel||t&&t.getReferringComponents("xAxis",qc).models[0],r=e.yAxisModel||t&&t.getReferringComponents("yAxis",qc).models[0],s=e.gridModel,a=this._coordsList,o,l;if(t)o=t.coordinateSystem,Nr(a,o)<0&&(o=null);else if(i&&r)o=this.getCartesian(i.componentIndex,r.componentIndex);else if(i)l=this.getAxis("x",i.componentIndex);else if(r)l=this.getAxis("y",r.componentIndex);else if(s){var c=s.coordinateSystem;c===this&&(o=this._coordsList[0])}return{cartesian:o,axis:l}},n.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},n.prototype._initCartesian=function(e,t,i){var r=this,s=this,a={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",c("x"),this),t.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,mt(o.x,function(u,d){mt(o.y,function(f,h){var p="x"+d+"y"+h,m=new OGe(p);m.master=r,m.model=e,r._coordsMap[p]=m,r._coordsList.push(m),m.addAxis(u),m.addAxis(f)})});function c(u){return function(d,f){if(u6(d,e)){var h=d.get("position");u==="x"?h!=="top"&&h!=="bottom"&&(h=a.bottom?"top":"bottom"):h!=="left"&&h!=="right"&&(h=a.left?"right":"left"),a[h]=!0;var p=new UGe(u,mHe(d),[0,0],d.get("type"),h),m=p.type==="category";p.onBand=m&&d.get("boundaryGap"),p.inverse=d.get("inverse"),d.axis=p,p.model=d,p.grid=s,p.index=f,s._axesList.push(p),o[u][f]=p,l[u]++}}}},n.prototype._updateScale=function(e,t){mt(this._axesList,function(r){if(r.scale.setExtent(1/0,-1/0),r.type==="category"){var s=r.model.get("categorySortInfo");r.scale.setSortInfo(s)}}),e.eachSeries(function(r){if(UG(r)){var s=zG(r),a=s.xAxisModel,o=s.yAxisModel;if(!u6(a,t)||!u6(o,t))return;var l=this.getCartesian(a.componentIndex,o.componentIndex),c=r.getData(),u=l.getAxis("x"),d=l.getAxis("y");i(c,u),i(c,d)}},this);function i(r,s){mt(bHe(r,s.dim),function(a){s.scale.unionExtentFromData(r,a)})}},n.prototype.getTooltipAxes=function(e){var t=[],i=[];return mt(this.getCartesians(),function(r){var s=e!=null&&e!=="auto"?r.getAxis(e):r.getBaseAxis(),a=r.getOtherAxis(s);Nr(t,s)<0&&t.push(s),Nr(i,a)<0&&i.push(a)}),{baseAxes:t,otherAxes:i}},n.create=function(e,t){var i=[];return e.eachComponent("grid",function(r,s){var a=new n(r,e,t);a.name="grid_"+s,a.resize(r,t,!0),r.coordinateSystem=a,i.push(a)}),e.eachSeries(function(r){if(UG(r)){var s=zG(r),a=s.xAxisModel,o=s.yAxisModel,l=a.getCoordSysModel(),c=l.coordinateSystem;r.coordinateSystem=c.getCartesian(a.componentIndex,o.componentIndex)}}),i},n.dimensions=IR,n}();function u6(n,e){return n.getCoordSysModel()===e}function VG(n,e,t,i){t.getAxesOnZeroOf=function(){return s?[s]:[]};var r=n[e],s,a=t.model,o=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(l!=null)HG(r[l])&&(s=r[l]);else for(var c in r)if(r.hasOwnProperty(c)&&HG(r[c])&&!i[u(r[c])]){s=r[c];break}s&&(i[u(s)]=!0);function u(d){return d.dim+"_"+d.index}}function HG(n){return n&&n.type!=="category"&&n.type!=="time"&&vHe(n)}function HGe(n,e){var t=n.getExtent(),i=t[0]+t[1];n.toGlobalCoord=n.dim==="x"?function(r){return r+e}:function(r){return i-r+e},n.toLocalCoord=n.dim==="x"?function(r){return r-e}:function(r){return i-r+e}}var Bh=Math.PI,qh=function(){function n(e,t){this.group=new eo,this.opt=t,this.axisModel=e,Cr(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new eo({x:t.position[0],y:t.position[1],rotation:t.rotation});i.updateTransform(),this._transformGroup=i}return n.prototype.hasBuilder=function(e){return!!GG[e]},n.prototype.add=function(e){GG[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,i){var r=Nte(t-e),s,a;return GC(r)?(a=i>0?"top":"bottom",s="center"):GC(r-Bh)?(a=i>0?"bottom":"top",s="center"):(a="middle",r>0&&r<Bh?s=i>0?"right":"left":s=i>0?"left":"right"),{rotation:r,textAlign:s,textVerticalAlign:a}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),GG={axisLine:function(n,e,t,i){var r=e.get(["axisLine","show"]);if(r==="auto"&&n.handleAutoShown&&(r=n.handleAutoShown("axisLine")),!!r){var s=e.axis.getExtent(),a=i.transform,o=[s[0],0],l=[s[1],0],c=o[0]>l[0];a&&(lc(o,o,a),lc(l,l,a));var u=pn({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new cp({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});Tx(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var f=e.get(["axisLine","symbol"]);if(f!=null){var h=e.get(["axisLine","symbolSize"]);ri(f)&&(f=[f,f]),(ri(h)||jr(h))&&(h=[h,h]);var p=wie(e.get(["axisLine","symbolOffset"])||0,h),m=h[0],v=h[1];mt([{rotate:n.rotation+Math.PI/2,offset:p[0],r:0},{rotate:n.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(g,y){if(f[y]!=="none"&&f[y]!=null){var x=L1(f[y],-m/2,-v/2,m,v,u.stroke,!0),b=g.r+g.offset,A=c?l:o;x.attr({rotation:g.rotate,x:A[0]+b*Math.cos(n.rotation),y:A[1]-b*Math.sin(n.rotation),silent:!0,z2:11}),t.add(x)}})}}},axisTickLabel:function(n,e,t,i){var r=qGe(t,i,e,n),s=YGe(t,i,e,n);if(WGe(e,s,r),KGe(t,i,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=NHe(fi(s,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));zHe(a)}},axisName:function(n,e,t,i){var r=Sx(n.axisName,e.get("name"));if(r){var s=e.get("nameLocation"),a=n.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,d=[s==="start"?c[0]-u*l:s==="end"?c[1]+u*l:(c[0]+c[1])/2,qG(s)?n.labelOffset+a*l:0],f,h=e.get("nameRotate");h!=null&&(h=h*Bh/180);var p;qG(s)?f=qh.innerTextLayout(n.rotation,h??n.rotation,a):(f=GGe(n.rotation,s,h||0,c),p=n.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(f.rotation)),!isFinite(p)&&(p=null)));var m=o.getFont(),v=e.get("nameTruncate",!0)||{},g=v.ellipsis,y=Sx(n.nameTruncateMaxWidth,v.maxWidth,p),x=new Ra({x:d[0],y:d[1],rotation:f.rotation,silent:qh.isLabelSilent(e),style:up(o,{text:r,font:m,overflow:"truncate",width:y,ellipsis:g,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||f.textAlign,verticalAlign:o.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(YM({el:x,componentModel:e,itemName:r}),x.__fullText=r,x.anid="name",e.get("triggerEvent")){var b=qh.makeAxisEventDataBase(e);b.targetType="axisName",b.name=r,Rr(x).eventData=b}i.add(x),x.updateTransform(),t.add(x),x.decomposeTransform()}}};function GGe(n,e,t,i){var r=Nte(t-n),s,a,o=i[0]>i[1],l=e==="start"&&!o||e!=="start"&&o;return GC(r-Bh/2)?(a=l?"bottom":"top",s="center"):GC(r-Bh*1.5)?(a=l?"top":"bottom",s="center"):(a="middle",r<Bh*1.5&&r>Bh/2?s=l?"left":"right":s=l?"right":"left"),{rotation:r,textAlign:s,textVerticalAlign:a}}function WGe(n,e,t){if(!sre(n.axis)){var i=n.get(["axisLabel","showMinLabel"]),r=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var s=e[0],a=e[1],o=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],d=t[t.length-1],f=t[t.length-2];i===!1?(Fl(s),Fl(c)):WG(s,a)&&(i?(Fl(a),Fl(u)):(Fl(s),Fl(c))),r===!1?(Fl(o),Fl(d)):WG(l,o)&&(r?(Fl(l),Fl(f)):(Fl(o),Fl(d)))}}function Fl(n){n&&(n.ignore=!0)}function WG(n,e){var t=n&&n.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(!(!t||!i)){var r=x7([]);return A7(r,r,-n.rotation),t.applyTransform($g([],r,n.getLocalTransform())),i.applyTransform($g([],r,e.getLocalTransform())),t.intersect(i)}}function qG(n){return n==="middle"||n==="center"}function Cre(n,e,t,i,r){for(var s=[],a=[],o=[],l=0;l<n.length;l++){var c=n[l].coord;a[0]=c,a[1]=0,o[0]=c,o[1]=t,e&&(lc(a,a,e),lc(o,o,e));var u=new cp({shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:i,z2:2,autoBatch:!0,silent:!0});Tx(u.shape,u.style.lineWidth),u.anid=r+"_"+n[l].tickValue,s.push(u)}return s}function qGe(n,e,t,i){var r=t.axis,s=t.getModel("axisTick"),a=s.get("show");if(a==="auto"&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),!(!a||r.scale.isBlank())){for(var o=s.getModel("lineStyle"),l=i.tickDirection*s.get("length"),c=r.getTicksCoords(),u=Cre(c,e.transform,l,Cr(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)n.add(u[d]);return u}}function KGe(n,e,t,i){var r=t.axis,s=t.getModel("minorTick");if(!(!s.get("show")||r.scale.isBlank())){var a=r.getMinorTicksCoords();if(a.length)for(var o=s.getModel("lineStyle"),l=i*s.get("length"),c=Cr(o.getLineStyle(),Cr(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var d=Cre(a[u],e.transform,l,c,"minorticks_"+u),f=0;f<d.length;f++)n.add(d[f])}}function YGe(n,e,t,i){var r=t.axis,s=Sx(i.axisLabelShow,t.get(["axisLabel","show"]));if(!(!s||r.scale.isBlank())){var a=t.getModel("axisLabel"),o=a.get("margin"),l=r.getViewLabels(),c=(Sx(i.labelRotate,a.get("rotate"))||0)*Bh/180,u=qh.innerTextLayout(i.rotation,c,i.labelDirection),d=t.getCategories&&t.getCategories(!0),f=[],h=qh.isLabelSilent(t),p=t.get("triggerEvent");return mt(l,function(m,v){var g=r.scale.type==="ordinal"?r.scale.getRawOrdinalNumber(m.tickValue):m.tickValue,y=m.formattedLabel,x=m.rawLabel,b=a;if(d&&d[g]){var A=d[g];hi(A)&&A.textStyle&&(b=new xs(A.textStyle,a,t.ecModel))}var S=b.getTextColor()||t.get(["axisLine","lineStyle","color"]),C=r.dataToCoord(g),_=b.getShallow("align",!0)||u.textAlign,M=ki(b.getShallow("alignMinLabel",!0),_),T=ki(b.getShallow("alignMaxLabel",!0),_),E=b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||u.textVerticalAlign,I=ki(b.getShallow("verticalAlignMinLabel",!0),E),L=ki(b.getShallow("verticalAlignMaxLabel",!0),E),F=new Ra({x:C,y:i.labelOffset+i.labelDirection*o,rotation:u.rotation,silent:h,z2:10+(m.level||0),style:up(b,{text:y,align:v===0?M:v===l.length-1?T:_,verticalAlign:v===0?I:v===l.length-1?L:E,fill:Ci(S)?S(r.type==="category"?x:r.type==="value"?g+"":g,v):S})});if(F.anid="label_"+g,YM({el:F,componentModel:t,itemName:y,formatterParamsExtra:{isTruncated:function(){return F.isTruncated},value:x,tickIndex:v}}),p){var B=qh.makeAxisEventDataBase(t);B.targetType="axisLabel",B.value=x,B.tickIndex=v,r.type==="category"&&(B.dataIndex=g),Rr(F).eventData=B}e.add(F),F.updateTransform(),f.push(F),n.add(F),F.decomposeTransform()}),f}}function XGe(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return jGe(t,n,e),t.seriesInvolved&&QGe(t,n),t}function jGe(n,e,t){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),s=r.get("link",!0)||[],a=[];mt(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=Bx(o.model),c=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=o;var u=o.model,d=u.getModel("tooltip",i);if(mt(o.getAxes(),Ns(m,!1,null)),o.getTooltipAxes&&i&&d.get("show")){var f=d.get("trigger")==="axis",h=d.get(["axisPointer","type"])==="cross",p=o.getTooltipAxes(d.get(["axisPointer","axis"]));(f||h)&&mt(p.baseAxes,Ns(m,h?"cross":!0,f)),h&&mt(p.otherAxes,Ns(m,"cross",!1))}function m(v,g,y){var x=y.model.getModel("axisPointer",r),b=x.get("show");if(!(!b||b==="auto"&&!v&&!RR(x))){g==null&&(g=x.get("triggerTooltip")),x=v?$Ge(y,d,r,e,v,g):x;var A=x.get("snap"),S=x.get("triggerEmphasis"),C=Bx(y.model),_=g||A||y.type==="category",M=n.axesInfo[C]={key:C,axis:y,coordSys:o,axisPointerModel:x,triggerTooltip:g,triggerEmphasis:S,involveSeries:_,snap:A,useHandle:RR(x),seriesModels:[],linkGroup:null};c[C]=M,n.seriesInvolved=n.seriesInvolved||_;var T=ZGe(s,y);if(T!=null){var E=a[T]||(a[T]={axesInfo:{}});E.axesInfo[C]=M,E.mapper=s[T].mapper,M.linkGroup=E}}}})}function $Ge(n,e,t,i,r,s){var a=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};mt(o,function(f){l[f]=or(a.get(f))}),l.snap=n.type!=="category"&&!!s,a.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),r==="cross"){var u=a.get(["label","show"]);if(c.show=u??!0,!s){var d=l.lineStyle=a.get("crossStyle");d&&Cr(c,d.textStyle)}}return n.model.getModel("axisPointer",new xs(l,t,i))}function QGe(n,e){e.eachSeries(function(t){var i=t.coordinateSystem,r=t.get(["tooltip","trigger"],!0),s=t.get(["tooltip","show"],!0);!i||r==="none"||r===!1||r==="item"||s===!1||t.get(["axisPointer","show"],!0)===!1||mt(n.coordSysAxesInfo[Bx(i.model)],function(a){var o=a.axis;i.getAxis(o.dim)===o&&(a.seriesModels.push(t),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=t.getData().count())})})}function ZGe(n,e){for(var t=e.model,i=e.dim,r=0;r<n.length;r++){var s=n[r]||{};if(d6(s[i+"AxisId"],t.id)||d6(s[i+"AxisIndex"],t.componentIndex)||d6(s[i+"AxisName"],t.name))return r}}function d6(n,e){return n==="all"||Un(n)&&Nr(n,e)>=0||n===e}function JGe(n){var e=vF(n);if(e){var t=e.axisPointerModel,i=e.axis.scale,r=t.option,s=t.get("status"),a=t.get("value");a!=null&&(a=i.parse(a));var o=RR(t);s==null&&(r.status=o?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,o&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function vF(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Bx(n)]}function eWe(n){var e=vF(n);return e&&e.axisPointerModel}function RR(n){return!!n.get(["handle","show"])}function Bx(n){return n.type+"||"+n.id}var KG={},Mre=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r,s){this.axisPointerClass&&JGe(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,r,!0)},e.prototype.updateAxisPointer=function(t,i,r,s){this._doUpdateAxisPointerClass(t,r,!1)},e.prototype.remove=function(t,i){var r=this._axisPointer;r&&r.remove(i)},e.prototype.dispose=function(t,i){this._disposeAxisPointer(i),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,i,r){var s=e.getAxisPointerClass(this.axisPointerClass);if(s){var a=eWe(t);a?(this._axisPointer||(this._axisPointer=new s)).render(t,a,i,r):this._disposeAxisPointer(i)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,i){KG[t]=i},e.getAxisPointerClass=function(t){return t&&KG[t]},e.type="axis",e}(su),PR=Ls();function tWe(n,e,t,i){var r=t.axis;if(!r.scale.isBlank()){var s=t.getModel("splitArea"),a=s.getModel("areaStyle"),o=a.get("color"),l=i.coordinateSystem.getRect(),c=r.getTicksCoords({tickModel:s,clamp:!0});if(c.length){var u=o.length,d=PR(n).splitAreaColors,f=Vi(),h=0;if(d)for(var p=0;p<c.length;p++){var m=d.get(c[p].tickValue);if(m!=null){h=(m+(u-1)*p)%u;break}}var v=r.toGlobalCoord(c[0].coord),g=a.getAreaStyle();o=Un(o)?o:[o];for(var p=1;p<c.length;p++){var y=r.toGlobalCoord(c[p].coord),x=void 0,b=void 0,A=void 0,S=void 0;r.isHorizontal()?(x=v,b=l.y,A=y-x,S=l.height,v=x+A):(x=l.x,b=v,A=l.width,S=y-b,v=b+S);var C=c[p-1].tickValue;C!=null&&f.set(C,h),e.add(new pa({anid:C!=null?"area_"+C:null,shape:{x,y:b,width:A,height:S},style:Cr({fill:o[h]},g),autoBatch:!0,silent:!0})),h=(h+1)%u}PR(n).splitAreaColors=f}}}function nWe(n){PR(n).splitAreaColors=null}var iWe=["axisLine","axisTickLabel","axisName"],rWe=["splitArea","splitLine","minorSplitLine"],Tre=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,i,r,s){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new eo,this.group.add(this._axisGroup),!!t.get("show")){var o=t.getCoordSysModel(),l=DR(o,t),c=new qh(t,pn({handleAutoShown:function(d){for(var f=o.coordinateSystem.getCartesians(),h=0;h<f.length;h++)if(MR(f[h].getOtherAxis(t.axis).scale))return!0;return!1}},l));mt(iWe,c.add,c),this._axisGroup.add(c.getGroup()),mt(rWe,function(d){t.get([d,"show"])&&sWe[d](this,this._axisGroup,t,o)},this);var u=s&&s.type==="changeAxisOrder"&&s.isInitSort;u||Sne(a,this._axisGroup,t),n.prototype.render.call(this,t,i,r,s)}},e.prototype.remove=function(){nWe(this)},e.type="cartesianAxis",e}(Mre),sWe={splitLine:function(n,e,t,i){var r=t.axis;if(!r.scale.isBlank()){var s=t.getModel("splitLine"),a=s.getModel("lineStyle"),o=a.get("color"),l=s.get("showMinLine")!==!1,c=s.get("showMaxLine")!==!1;o=Un(o)?o:[o];for(var u=i.coordinateSystem.getRect(),d=r.isHorizontal(),f=0,h=r.getTicksCoords({tickModel:s}),p=[],m=[],v=a.getLineStyle(),g=0;g<h.length;g++){var y=r.toGlobalCoord(h[g].coord);if(!(g===0&&!l||g===h.length-1&&!c)){var x=h[g].tickValue;d?(p[0]=y,p[1]=u.y,m[0]=y,m[1]=u.y+u.height):(p[0]=u.x,p[1]=y,m[0]=u.x+u.width,m[1]=y);var b=f++%o.length,A=new cp({anid:x!=null?"line_"+x:null,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:m[0],y2:m[1]},style:Cr({stroke:o[b]},v),silent:!0});Tx(A.shape,v.lineWidth),e.add(A)}}}},minorSplitLine:function(n,e,t,i){var r=t.axis,s=t.getModel("minorSplitLine"),a=s.getModel("lineStyle"),o=i.coordinateSystem.getRect(),l=r.isHorizontal(),c=r.getMinorTicksCoords();if(c.length)for(var u=[],d=[],f=a.getLineStyle(),h=0;h<c.length;h++)for(var p=0;p<c[h].length;p++){var m=r.toGlobalCoord(c[h][p].coord);l?(u[0]=m,u[1]=o.y,d[0]=m,d[1]=o.y+o.height):(u[0]=o.x,u[1]=m,d[0]=o.x+o.width,d[1]=m);var v=new cp({anid:"minor_line_"+c[h][p].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:f,silent:!0});Tx(v.shape,f.lineWidth),e.add(v)}},splitArea:function(n,e,t,i){tWe(n,e,t,i)}},Ere=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(Tre),aWe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=Ere.type,t}return e.type="yAxis",e}(Tre),oWe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,i){this.group.removeAll(),t.get("show")&&this.group.add(new pa({shape:t.coordinateSystem.getRect(),style:Cr({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(su),YG={offset:0};function lWe(n){n.registerComponentView(oWe),n.registerComponentModel(RGe),n.registerCoordinateSystem("cartesian2d",VGe),BG(n,"x",ER,YG),BG(n,"y",ER,YG),n.registerComponentView(Ere),n.registerComponentView(aWe),n.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var S0=Ls(),XG=or,f6=Xr,cWe=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,i,r){var s=t.get("value"),a=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=i,!(!r&&this._lastValue===s&&this._lastStatus===a)){this._lastValue=s,this._lastStatus=a;var o=this._group,l=this._handle;if(!a||a==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var c={};this.makeElOption(c,s,e,t,i);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new eo,this.createPointerEl(o,c,e,t),this.createLabelEl(o,c,e,t),i.getZr().add(o);else{var f=Ns(jG,t,d);this.updatePointerEl(o,c,f),this.updateLabelEl(o,c,f,t)}QG(o,t,!0),this._renderHandle(s)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var i=t.get("animation"),r=e.axis,s=r.type==="category",a=t.get("snap");if(!a&&!s)return!1;if(i==="auto"||i==null){var o=this.animationThreshold;if(s&&r.getBandWidth()>o)return!0;if(a){var l=vF(e).seriesDataCount,c=r.getExtent();return Math.abs(c[0]-c[1])/l>o}return!1}return i===!0},n.prototype.makeElOption=function(e,t,i,r,s){},n.prototype.createPointerEl=function(e,t,i,r){var s=t.pointer;if(s){var a=S0(e).pointerEl=new QOe[s.type](XG(t.pointer));e.add(a)}},n.prototype.createLabelEl=function(e,t,i,r){if(t.label){var s=S0(e).labelEl=new Ra(XG(t.label));e.add(s),$G(s,r)}},n.prototype.updatePointerEl=function(e,t,i){var r=S0(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),i(r,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,i,r){var s=S0(e).labelEl;s&&(s.setStyle(t.label.style),i(s,{x:t.label.x,y:t.label.y}),$G(s,r))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,i=this._api.getZr(),r=this._handle,s=t.getModel("handle"),a=t.get("status");if(!s.get("show")||!a||a==="hide"){r&&i.remove(r),this._handle=null;return}var o;this._handle||(o=!0,r=this._handle=H7(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){gte(c.event)},onmousedown:f6(this._onHandleDragMove,this,0,0),drift:f6(this._onHandleDragMove,this),ondragend:f6(this._onHandleDragEnd,this)}),i.add(r)),QG(r,t,!1),r.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=s.get("size");Un(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,pie(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},n.prototype._moveHandleToValue=function(e,t){jG(this._axisPointerModel,!t&&this._moveAnimation,this._handle,h6(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var i=this._handle;if(i){this._dragging=!0;var r=this.updateHandleTransform(h6(i),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,i.stopAnimation(),i.attr(h6(r)),S0(i).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),i=this._group,r=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),vR(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}},n}();function jG(n,e,t,i){Ire(S0(t).lastProp,i)||(S0(t).lastProp=i,e?Ju(t,i,n):(t.stopAnimation(),t.attr(i)))}function Ire(n,e){if(hi(n)&&hi(e)){var t=!0;return mt(e,function(i,r){t=t&&Ire(n[r],i)}),!!t}else return n===e}function $G(n,e){n[e.get(["label","show"])?"show":"hide"]()}function h6(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function QG(n,e,t){var i=e.get("z"),r=e.get("zlevel");n&&n.traverse(function(s){s.type!=="group"&&(i!=null&&(s.z=i),r!=null&&(s.zlevel=r),s.silent=t)})}function uWe(n){var e=n.get("type"),t=n.getModel(e+"Style"),i;return e==="line"?(i=t.getLineStyle(),i.fill=null):e==="shadow"&&(i=t.getAreaStyle(),i.stroke=null),i}function dWe(n,e,t,i,r){var s=t.get("value"),a=Dre(s,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),l=iT(o.get("padding")||0),c=o.getFont(),u=C7(a,c),d=r.position,f=u.width+l[1]+l[3],h=u.height+l[0]+l[2],p=r.align;p==="right"&&(d[0]-=f),p==="center"&&(d[0]-=f/2);var m=r.verticalAlign;m==="bottom"&&(d[1]-=h),m==="middle"&&(d[1]-=h/2),fWe(d,f,h,i);var v=o.get("backgroundColor");(!v||v==="auto")&&(v=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:up(o,{text:a,font:c,fill:o.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function fWe(n,e,t,i){var r=i.getWidth(),s=i.getHeight();n[0]=Math.min(n[0]+e,r)-e,n[1]=Math.min(n[1]+t,s)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function Dre(n,e,t,i,r){n=e.scale.parse(n);var s=e.scale.getLabel({value:n},{precision:r.precision}),a=r.formatter;if(a){var o={value:dF(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};mt(i,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=c&&c.getDataParams(u);d&&o.seriesData.push(d)}),ri(a)?s=a.replace("{value}",s):Ci(a)&&(s=a(o))}return s}function Rre(n,e,t){var i=jg();return A7(i,i,t.rotation),z8(i,i,t.position),V7([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],i)}function hWe(n,e,t,i,r,s){var a=qh.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=r.get(["label","margin"]),dWe(e,i,r,s,{position:Rre(i.axis,n,t),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function pWe(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function mWe(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}var vWe=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,i,r,s,a){var o=r.axis,l=o.grid,c=s.get("type"),u=ZG(l,o).getOtherAxis(o).getGlobalExtent(),d=o.toGlobalCoord(o.dataToCoord(i,!0));if(c&&c!=="none"){var f=uWe(s),h=gWe[c](o,d,u);h.style=f,t.graphicKey=h.type,t.pointer=h}var p=DR(l.model,r);hWe(i,t,p,r,s,a)},e.prototype.getHandleTransform=function(t,i,r){var s=DR(i.axis.grid.model,i,{labelInside:!1});s.labelMargin=r.get(["handle","margin"]);var a=Rre(i.axis,t,s);return{x:a[0],y:a[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,i,r,s){var a=r.axis,o=a.grid,l=a.getGlobalExtent(!0),c=ZG(o,a).getOtherAxis(a).getGlobalExtent(),u=a.dim==="x"?0:1,d=[t.x,t.y];d[u]+=i[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var f=(c[1]+c[0])/2,h=[f,f];h[u]=d[u];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:h,tooltipOption:p[u]}},e}(cWe);function ZG(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var gWe={line:function(n,e,t){var i=pWe([e,t[0]],[e,t[1]],JG(n));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(n,e,t){var i=Math.max(1,n.getBandWidth()),r=t[1]-t[0];return{type:"Rect",shape:mWe([e-i/2,t[0]],[i,r],JG(n))}}};function JG(n){return n.dim==="x"?0:1}var yWe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Dr),Qd=Ls(),bWe=mt;function Pre(n,e,t){if(!Ai.node){var i=e.getZr();Qd(i).records||(Qd(i).records={}),xWe(i,e);var r=Qd(i).records[n]||(Qd(i).records[n]={});r.handler=t}}function xWe(n,e){if(Qd(n).initialized)return;Qd(n).initialized=!0,t("click",Ns(eW,"click")),t("mousemove",Ns(eW,"mousemove")),t("globalout",wWe);function t(i,r){n.on(i,function(s){var a=SWe(e);bWe(Qd(n).records,function(o){o&&r(o,s,a.dispatchAction)}),AWe(a.pendings,e)})}}function AWe(n,e){var t=n.showTip.length,i=n.hideTip.length,r;t?r=n.showTip[t-1]:i&&(r=n.hideTip[i-1]),r&&(r.dispatchAction=null,e.dispatchAction(r))}function wWe(n,e,t){n.handler("leave",null,t)}function eW(n,e,t,i){e.handler(n,t,i)}function SWe(n){var e={showTip:[],hideTip:[]},t=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=t,n.dispatchAction(i))};return{dispatchAction:t,pendings:e}}function LR(n,e){if(!Ai.node){var t=e.getZr(),i=(Qd(t).records||{})[n];i&&(Qd(t).records[n]=null)}}var _We=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r){var s=i.getComponent("tooltip"),a=t.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";Pre("axisPointer",r,function(o,l,c){a!=="none"&&(o==="leave"||a.indexOf(o)>=0)&&c({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,i){LR("axisPointer",i)},e.prototype.dispose=function(t,i){LR("axisPointer",i)},e.type="axisPointer",e}(su);function Lre(n,e){var t=[],i=n.seriesIndex,r;if(i==null||!(r=e.getSeriesByIndex(i)))return{point:[]};var s=r.getData(),a=pm(s,n);if(a==null||a<0||Un(a))return{point:[]};var o=s.getItemGraphicEl(a),l=r.coordinateSystem;if(r.getTooltipPosition)t=r.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(n.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=u.dim,f=c.dim,h=d==="x"||d==="radius"?1:0,p=s.mapDimension(f),m=[];m[h]=s.get(p,a),m[1-h]=s.get(s.getCalculationInfo("stackResultDimension"),a),t=l.dataToPoint(m)||[]}else t=l.dataToPoint(s.getValues(fi(l.dimensions,function(g){return s.mapDimension(g)}),a))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),t=[v.x+v.width/2,v.y+v.height/2]}return{point:t,el:o}}var tW=Ls();function CWe(n,e,t){var i=n.currTrigger,r=[n.x,n.y],s=n,a=n.dispatchAction||Xr(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){I_(r)&&(r=Lre({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},e).point);var l=I_(r),c=s.axesInfo,u=o.axesInfo,d=i==="leave"||I_(r),f={},h={},p={list:[],map:{}},m={showPointer:Ns(TWe,h),showTooltip:Ns(EWe,p)};mt(o.coordSysMap,function(g,y){var x=l||g.containPoint(r);mt(o.coordSysAxesInfo[y],function(b,A){var S=b.axis,C=PWe(c,b);if(!d&&x&&(!c||C)){var _=C&&C.value;_==null&&!l&&(_=S.pointToData(r)),_!=null&&nW(b,_,m,!1,f)}})});var v={};return mt(u,function(g,y){var x=g.linkGroup;x&&!h[y]&&mt(x.axesInfo,function(b,A){var S=h[A];if(b!==g&&S){var C=S.value;x.mapper&&(C=g.axis.scale.parse(x.mapper(C,iW(b),iW(g)))),v[g.key]=C}})}),mt(v,function(g,y){nW(u[y],g,m,!0,f)}),IWe(h,u,f),DWe(p,r,n,a),RWe(u,a,t),f}}function nW(n,e,t,i,r){var s=n.axis;if(!(s.scale.isBlank()||!s.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var a=MWe(e,n),o=a.payloadBatch,l=a.snapToValue;o[0]&&r.seriesIndex==null&&pn(r,o[0]),!i&&n.snap&&s.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,o),t.showTooltip(n,a,l)}}function MWe(n,e){var t=e.axis,i=t.dim,r=n,s=[],a=Number.MAX_VALUE,o=-1;return mt(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(i),d,f;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(u,n,t);f=h.dataIndices,d=h.nestestValue}else{if(f=l.getData().indicesOfNearest(u[0],n,t.type==="category"?.5:null),!f.length)return;d=l.getData().get(u[0],f[0])}if(!(d==null||!isFinite(d))){var p=n-d,m=Math.abs(p);m<=a&&((m<a||p>=0&&o<0)&&(a=m,o=p,r=d,s.length=0),mt(f,function(v){s.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:s,snapToValue:r}}function TWe(n,e,t,i){n[e.key]={value:t,payloadBatch:i}}function EWe(n,e,t,i){var r=t.payloadBatch,s=e.axis,a=s.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!r.length)){var l=e.coordSys.model,c=Bx(l),u=n.map[c];u||(u=n.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(u)),u.dataByAxis.push({axisDim:s.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function IWe(n,e,t){var i=t.axesInfo=[];mt(e,function(r,s){var a=r.axisPointerModel.option,o=n[s];o?(!r.useHandle&&(a.status="show"),a.value=o.value,a.seriesDataIndices=(o.payloadBatch||[]).slice()):!r.useHandle&&(a.status="hide"),a.status==="show"&&i.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:a.value})})}function DWe(n,e,t,i){if(I_(e)||!n.list.length){i({type:"hideTip"});return}var r=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:n.list})}function RWe(n,e,t){var i=t.getZr(),r="axisPointerLastHighlights",s=tW(i)[r]||{},a=tW(i)[r]={};mt(n,function(c,u){var d=c.axisPointerModel.option;d.status==="show"&&c.triggerEmphasis&&mt(d.seriesDataIndices,function(f){var h=f.seriesIndex+" | "+f.dataIndex;a[h]=f})});var o=[],l=[];mt(s,function(c,u){!a[u]&&l.push(c)}),mt(a,function(c,u){!s[u]&&o.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function PWe(n,e){for(var t=0;t<(n||[]).length;t++){var i=n[t];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}function iW(n){var e=n.axis.model,t={},i=t.axisDim=n.axis.dim;return t.axisIndex=t[i+"AxisIndex"]=e.componentIndex,t.axisName=t[i+"AxisName"]=e.name,t.axisId=t[i+"AxisId"]=e.id,t}function I_(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function kre(n){Mre.registerAxisPointerClass("CartesianAxisPointer",vWe),n.registerComponentModel(yWe),n.registerComponentView(_We),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Un(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=XGe(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},CWe)}function LWe(n){ed(lWe),ed(kre)}function kWe(n,e){var t=iT(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),n=new pa({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1}),n}var FWe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Dr);function Fre(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function Bre(n){if(Ai.domSupported){for(var e=document.documentElement.style,t=0,i=n.length;t<i;t++)if(n[t]in e)return n[t]}}var Nre=Bre(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),BWe=Bre(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Ore(n,e){if(!n)return e;e=Une(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function NWe(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?t[e]:null}var OWe=Ore(BWe,"transition"),gF=Ore(Nre,"transform"),UWe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Ai.transform3dSupported?"will-change:transform;":"");function zWe(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function VWe(n,e,t){if(!ri(t)||t==="inside")return"";var i=n.get("backgroundColor"),r=n.get("borderWidth");e=vm(e);var s=zWe(t),a=Math.max(Math.round(r)*1.5,6),o="",l=gF+":",c;Nr(["left","right"],s)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(c=s==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(c=s==="top"?225:45)+"deg)");var u=c*Math.PI/180,d=a+r,f=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),h=Math.round(((f-Math.SQRT2*r)/2+Math.SQRT2*r-(f-d)/2)*100)/100;o+=";"+s+":-"+h+"px";var p=e+" solid "+r+"px;",m=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",o+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+i+";"];return'<div style="'+m.join("")+'"></div>'}function HWe(n,e){var t="cubic-bezier(0.23,1,0.32,1)",i=" "+n/2+"s "+t,r="opacity"+i+",visibility"+i;return e||(i=" "+n+"s "+t,r+=Ai.transformSupported?","+gF+i:",left"+i+",top"+i),OWe+":"+r}function rW(n,e,t){var i=n.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!Ai.transformSupported)return t?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var s=Ai.transform3dSupported,a="translate"+(s?"3d":"")+"("+i+","+r+(s?",0":"")+")";return t?"top:0;left:0;"+gF+":"+a+";":[["top",0],["left",0],[Nre,a]]}function GWe(n){var e=[],t=n.get("fontSize"),i=n.getTextColor();i&&e.push("color:"+i),e.push("font:"+n.getFont());var r=ki(n.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+r+"px");var s=n.get("textShadowColor"),a=n.get("textShadowBlur")||0,o=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return s&&a&&e.push("text-shadow:"+o+"px "+l+"px "+a+"px "+s),mt(["decoration","align"],function(c){var u=n.get(c);u&&e.push("text-"+c+":"+u)}),e.join(";")}function WWe(n,e,t){var i=[],r=n.get("transitionDuration"),s=n.get("backgroundColor"),a=n.get("shadowBlur"),o=n.get("shadowColor"),l=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),u=n.getModel("textStyle"),d=die(n,"html"),f=l+"px "+c+"px "+a+"px "+o;return i.push("box-shadow:"+f),e&&r&&i.push(HWe(r,t)),s&&i.push("background-color:"+s),mt(["width","color","radius"],function(h){var p="border-"+h,m=Une(p),v=n.get(m);v!=null&&i.push(p+":"+v+(h==="color"?"":"px"))}),i.push(GWe(u)),d!=null&&i.push("padding:"+iT(d).join("px ")+"px"),i.join(";")+";"}function sW(n,e,t,i,r){var s=e&&e.painter;if(t){var a=s&&s.getViewportRoot();a&&hFe(n,a,t,i,r)}else{n[0]=i,n[1]=r;var o=s&&s.getViewportRootOffset();o&&(n[0]+=o.offsetLeft,n[1]+=o.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var qWe=function(){function n(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Ai.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=e.getZr(),s=t.appendTo,a=s&&(ri(s)?document.querySelector(s):Ax(s)?s:Ci(s)&&s(e.getDom()));sW(this._styleCoord,r,a,e.getWidth()/2,e.getHeight()/2),(a||e.getDom()).appendChild(i),this._api=e,this._container=a;var o=this;i.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!o._enterable){var c=r.handler,u=r.painter.getViewportRoot();Hl(u,l,!0),c.dispatch("mousemove",l)}},i.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return n.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),i=NWe(t,"position"),r=t.style;r.position!=="absolute"&&i!=="absolute"&&(r.position="relative")}var s=e.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,r=i.style,s=this._styleCoord;i.innerHTML?r.cssText=UWe+WWe(e,!this._firstShow,this._longHide)+rW(s[0],s[1],!0)+("border-color:"+vm(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,i,r,s){var a=this.el;if(e==null){a.innerHTML="";return}var o="";if(ri(s)&&i.get("trigger")==="item"&&!Fre(i)&&(o=VWe(i,r,s)),ri(e))a.innerHTML=e+o;else if(e){a.innerHTML="",Un(e)||(e=[e]);for(var l=0;l<e.length;l++)Ax(e[l])&&e[l].parentNode!==a&&a.appendChild(e[l]);if(o&&a.childNodes.length){var c=document.createElement("div");c.innerHTML=o,a.appendChild(c)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},n.prototype.moveTo=function(e,t){if(this.el){var i=this._styleCoord;if(sW(i,this._zr,this._container,e,t),i[0]!=null&&i[1]!=null){var r=this.el.style,s=rW(i[0],i[1]);mt(s,function(a){r[a[0]]=a[1]})}}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",Ai.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Xr(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},n}(),KWe=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),oW(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,i,r,s){var a=this;hi(e)&&Go(""),this.el&&this._zr.remove(this.el);var o=i.getModel("textStyle");this.el=new Ra({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:o.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:die(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),mt(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){a.el.style[c]=i.get(c)}),mt(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){a.el.style[c]=o.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),i=aW(e.style);return[t.width+i.left+i.right,t.height+i.top+i.bottom]},n.prototype.moveTo=function(e,t){var i=this.el;if(i){var r=this._styleCoord;oW(r,this._zr,e,t),e=r[0],t=r[1];var s=i.style,a=bh(s.borderWidth||0),o=aW(s);i.x=e+a+o.left,i.y=t+a+o.top,i.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Xr(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function bh(n){return Math.max(0,n)}function aW(n){var e=bh(n.shadowBlur||0),t=bh(n.shadowOffsetX||0),i=bh(n.shadowOffsetY||0);return{left:bh(e-t),right:bh(e+t),top:bh(e-i),bottom:bh(e+i)}}function oW(n,e,t,i){n[0]=t,n[1]=i,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var YWe=new pa({shape:{x:-1,y:-1,width:2,height:2}}),XWe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){if(!(Ai.node||!i.getDom())){var r=t.getComponent("tooltip"),s=this._renderMode=VBe(r.get("renderMode"));this._tooltipContent=s==="richText"?new KWe(i):new qWe(i,{appendTo:r.get("appendToBody",!0)?"body":r.get("appendTo",!0)})}},e.prototype.render=function(t,i,r){if(!(Ai.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=i,this._api=r;var s=this._tooltipContent;s.update(t),s.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?pie(this,"_updatePosition",50,"fixRate"):vR(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,i=t.get("triggerOn");Pre("itemTooltip",this._api,Xr(function(r,s,a){i!=="none"&&(i.indexOf(r)>=0?this._tryShow(s,a):r==="leave"&&this._hide(a))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,i=this._ecModel,r=this._api,s=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&a.manuallyShowTip(t,i,r,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,i,r,s){if(!(s.from===this.uid||Ai.node||!r.getDom())){var a=lW(s,r);this._ticket="";var o=s.dataByCoordSys,l=ZWe(s,i,r);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:s.position,positionDefault:"bottom"},a)}else if(s.tooltip&&s.x!=null&&s.y!=null){var u=YWe;u.x=s.x,u.y=s.y,u.update(),Rr(u).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:u},a)}else if(o)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:o,tooltipOption:s.tooltipOption},a);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(t,i,r,s))return;var d=Lre(s,i),f=d.point[0],h=d.point[1];f!=null&&h!=null&&this._tryShow({offsetX:f,offsetY:h,target:d.el,position:s.position,positionDefault:"bottom"},a)}else s.x!=null&&s.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:r.getZr().findHover(s.x,s.y).target},a))}},e.prototype.manuallyHideTip=function(t,i,r,s){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(lW(s,r))},e.prototype._manuallyAxisShowTip=function(t,i,r,s){var a=s.seriesIndex,o=s.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||o==null||l==null)){var c=i.getSeriesByIndex(a);if(c){var u=c.getData(),d=p2([u.getItemModel(o),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:s.position}),!0}}},e.prototype._tryShow=function(t,i){var r=t.target,s=this._tooltipModel;if(s){this._lastX=t.offsetX,this._lastY=t.offsetY;var a=t.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,t);else if(r){var o=Rr(r);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;Y2(r,function(u){if(Rr(u).dataIndex!=null)return l=u,!0;if(Rr(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(t,l,i):c?this._showComponentItemTooltip(t,c,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},e.prototype._showOrMove=function(t,i){var r=t.get("showDelay");i=Xr(i,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(i,r):i()},e.prototype._showAxisTooltip=function(t,i){var r=this._ecModel,s=this._tooltipModel,a=[i.offsetX,i.offsetY],o=p2([i.tooltipOption],s),l=this._renderMode,c=[],u=Rx("section",{blocks:[],noHeader:!0}),d=[],f=new qE;mt(t,function(y){mt(y.dataByAxis,function(x){var b=r.getComponent(x.axisDim+"Axis",x.axisIndex),A=x.value;if(!(!b||A==null)){var S=Dre(A,b.axis,r,x.seriesDataIndices,x.valueLabelOpt),C=Rx("section",{header:S,noHeader:!Ou(S),sortBlocks:!0,blocks:[]});u.blocks.push(C),mt(x.seriesDataIndices,function(_){var M=r.getSeriesByIndex(_.seriesIndex),T=_.dataIndexInside,E=M.getDataParams(T);if(!(E.dataIndex<0)){E.axisDim=x.axisDim,E.axisIndex=x.axisIndex,E.axisType=x.axisType,E.axisId=x.axisId,E.axisValue=dF(b.axis,{value:A}),E.axisValueLabel=S,E.marker=f.makeTooltipMarker("item",vm(E.color),l);var I=DH(M.formatTooltip(T,!0,null)),L=I.frag;if(L){var F=p2([M],s).get("valueFormatter");C.blocks.push(F?pn({valueFormatter:F},L):L)}I.text&&d.push(I.text),c.push(E)}})}})}),u.blocks.reverse(),d.reverse();var h=i.position,p=o.get("order"),m=FH(u,f,l,p,r.get("useUTC"),o.get("textStyle"));m&&d.unshift(m);var v=l==="richText"?`

`:"<br/>",g=d.join(v);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(o,h,a[0],a[1],this._tooltipContent,c):this._showTooltipContent(o,g,c,Math.random()+"",a[0],a[1],h,null,f)})},e.prototype._showSeriesItemTooltip=function(t,i,r){var s=this._ecModel,a=Rr(i),o=a.seriesIndex,l=s.getSeriesByIndex(o),c=a.dataModel||l,u=a.dataIndex,d=a.dataType,f=c.getData(d),h=this._renderMode,p=t.positionDefault,m=p2([f.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),v=m.get("trigger");if(!(v!=null&&v!=="item")){var g=c.getDataParams(u,d),y=new qE;g.marker=y.makeTooltipMarker("item",vm(g.color),h);var x=DH(c.formatTooltip(u,!1,d)),b=m.get("order"),A=m.get("valueFormatter"),S=x.frag,C=S?FH(A?pn({valueFormatter:A},S):S,y,h,b,s.get("useUTC"),m.get("textStyle")):x.text,_="item_"+c.name+"_"+u;this._showOrMove(m,function(){this._showTooltipContent(m,C,g,_,t.offsetX,t.offsetY,t.position,t.target,y)}),r({type:"showTip",dataIndexInside:u,dataIndex:f.getRawIndex(u),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,i,r){var s=this._renderMode==="html",a=Rr(i),o=a.tooltipConfig,l=o.option||{},c=l.encodeHTMLContent;if(ri(l)){var u=l;l={content:u,formatter:u},c=!0}c&&s&&l.content&&(l=or(l),l.content=Vo(l.content));var d=[l],f=this._ecModel.getComponent(a.componentMainType,a.componentIndex);f&&d.push(f),d.push({formatter:l.content});var h=t.positionDefault,p=p2(d,this._tooltipModel,h?{position:h}:null),m=p.get("content"),v=Math.random()+"",g=new qE;this._showOrMove(p,function(){var y=or(p.get("formatterParams")||{});this._showTooltipContent(p,m,y,v,t.offsetX,t.offsetY,t.position,i,g)}),r({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,i,r,s,a,o,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var f=t.get("formatter");l=l||t.get("position");var h=i,p=this._getNearestPoint([a,o],r,t.get("trigger"),t.get("borderColor")),m=p.color;if(f)if(ri(f)){var v=t.ecModel.get("useUTC"),g=Un(r)?r[0]:r,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;h=f,y&&(h=ZM(g.axisValue,h,v)),h=zne(h,r,!0)}else if(Ci(f)){var x=Xr(function(b,A){b===this._ticket&&(d.setContent(A,u,t,m,l),this._updatePosition(t,l,a,o,d,r,c))},this);this._ticket=s,h=f(r,s,x)}else h=f;d.setContent(h,u,t,m,l),d.show(t,m),this._updatePosition(t,l,a,o,d,r,c)}},e.prototype._getNearestPoint=function(t,i,r,s){if(r==="axis"||Un(i))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!Un(i))return{color:s||i.color||i.borderColor}},e.prototype._updatePosition=function(t,i,r,s,a,o,l){var c=this._api.getWidth(),u=this._api.getHeight();i=i||t.get("position");var d=a.getSize(),f=t.get("align"),h=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ci(i)&&(i=i([r,s],o,a.el,p,{viewSize:[c,u],contentSize:d.slice()})),Un(i))r=cs(i[0],c),s=cs(i[1],u);else if(hi(i)){var m=i;m.width=d[0],m.height=d[1];var v=D1(m,{width:c,height:u});r=v.x,s=v.y,f=null,h=null}else if(ri(i)&&l){var g=QWe(i,p,d,t.get("borderWidth"));r=g[0],s=g[1]}else{var g=jWe(r,s,a,c,u,f?null:20,h?null:20);r=g[0],s=g[1]}if(f&&(r-=cW(f)?d[0]/2:f==="right"?d[0]:0),h&&(s-=cW(h)?d[1]/2:h==="bottom"?d[1]:0),Fre(t)){var g=$We(r,s,a,c,u);r=g[0],s=g[1]}a.moveTo(r,s)},e.prototype._updateContentNotChangedOnAxis=function(t,i){var r=this._lastDataByCoordSys,s=this._cbParamsList,a=!!r&&r.length===t.length;return a&&mt(r,function(o,l){var c=o.dataByAxis||[],u=t[l]||{},d=u.dataByAxis||[];a=a&&c.length===d.length,a&&mt(c,function(f,h){var p=d[h]||{},m=f.seriesDataIndices||[],v=p.seriesDataIndices||[];a=a&&f.value===p.value&&f.axisType===p.axisType&&f.axisId===p.axisId&&m.length===v.length,a&&mt(m,function(g,y){var x=v[y];a=a&&g.seriesIndex===x.seriesIndex&&g.dataIndex===x.dataIndex}),s&&mt(f.seriesDataIndices,function(g){var y=g.seriesIndex,x=i[y],b=s[y];x&&b&&b.data!==x.data&&(a=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=i,!!a},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,i){Ai.node||!i.getDom()||(vR(this,"_updatePosition"),this._tooltipContent.dispose(),LR("itemTooltip",i))},e.type="tooltip",e}(su);function p2(n,e,t){var i=e.ecModel,r;t?(r=new xs(t,i,i),r=new xs(e.option,r,i)):r=e;for(var s=n.length-1;s>=0;s--){var a=n[s];a&&(a instanceof xs&&(a=a.get("tooltip",!0)),ri(a)&&(a={formatter:a}),a&&(r=new xs(a,r,i)))}return r}function lW(n,e){return n.dispatchAction||Xr(e.dispatchAction,e)}function jWe(n,e,t,i,r,s,a){var o=t.getSize(),l=o[0],c=o[1];return s!=null&&(n+l+s+2>i?n-=l+s:n+=s),a!=null&&(e+c+a>r?e-=c+a:e+=a),[n,e]}function $We(n,e,t,i,r){var s=t.getSize(),a=s[0],o=s[1];return n=Math.min(n+a,i)-a,e=Math.min(e+o,r)-o,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function QWe(n,e,t,i){var r=t[0],s=t[1],a=Math.ceil(Math.SQRT2*i)+8,o=0,l=0,c=e.width,u=e.height;switch(n){case"inside":o=e.x+c/2-r/2,l=e.y+u/2-s/2;break;case"top":o=e.x+c/2-r/2,l=e.y-s-a;break;case"bottom":o=e.x+c/2-r/2,l=e.y+u+a;break;case"left":o=e.x-r-a,l=e.y+u/2-s/2;break;case"right":o=e.x+c+a,l=e.y+u/2-s/2}return[o,l]}function cW(n){return n==="center"||n==="middle"}function ZWe(n,e,t){var i=I7(n).queryOptionMap,r=i.keys()[0];if(!(!r||r==="series")){var s=RA(e,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),a=s.models[0];if(a){var o=t.getViewOfComponentModel(a),l;if(o.group.traverse(function(c){var u=Rr(c).tooltipConfig;if(u&&u.name===n.name)return l=c,!0}),l)return{componentMainType:r,componentIndex:a.componentIndex,el:l}}}}function yF(n){ed(kre),n.registerComponentModel(FWe),n.registerComponentView(XWe),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},$o),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},$o)}var JWe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Dr),eqe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r){if(this.group.removeAll(),!!t.get("show")){var s=this.group,a=t.getModel("textStyle"),o=t.getModel("subtextStyle"),l=t.get("textAlign"),c=ki(t.get("textBaseline"),t.get("textVerticalAlign")),u=new Ra({style:up(a,{text:t.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),f=t.get("subtext"),h=new Ra({style:up(o,{text:f,fill:o.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),m=t.get("sublink"),v=t.get("triggerEvent",!0);u.silent=!p&&!v,h.silent=!m&&!v,p&&u.on("click",function(){fH(p,"_"+t.get("target"))}),m&&h.on("click",function(){fH(m,"_"+t.get("subtarget"))}),Rr(u).eventData=Rr(h).eventData=v?{componentType:"title",componentIndex:t.componentIndex}:null,s.add(u),f&&s.add(h);var g=s.getBoundingRect(),y=t.getBoxLayoutParams();y.width=g.width,y.height=g.height;var x=D1(y,{width:r.getWidth(),height:r.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?x.x+=x.width:l==="center"&&(x.x+=x.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?x.y+=x.height:c==="middle"&&(x.y+=x.height/2),c=c||"top"),s.x=x.x,s.y=x.y,s.markRedraw();var b={align:l,verticalAlign:c};u.setStyle(b),h.setStyle(b),g=s.getBoundingRect();var A=x.margin,S=t.getItemStyle(["color","opacity"]);S.fill=t.get("backgroundColor");var C=new pa({shape:{x:g.x-A[3],y:g.y-A[0],width:g.width+A[1]+A[3],height:g.height+A[0]+A[2],r:t.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});s.add(C)}},e.type="title",e}(su);function bF(n){n.registerComponentModel(JWe),n.registerComponentView(eqe)}var tqe=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},kR=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,i,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,i){n.prototype.mergeOption.call(this,t,i),this._updateSelector(t)},e.prototype._updateSelector=function(t){var i=t.selector,r=this.ecModel;i===!0&&(i=t.selector=["all","inverse"]),Un(i)&&mt(i,function(s,a){ri(s)&&(s={type:s}),i[a]=Sr(s,tqe(r,s.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var i=!1,r=0;r<t.length;r++){var s=t[r].get("name");if(this.isSelected(s)){this.select(s),i=!0;break}}!i&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var i=[],r=[];t.eachRawSeries(function(l){var c=l.name;r.push(c);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,f=d.getAllNames();t.isSeriesFiltered(l)||(r=r.concat(f)),f.length?i=i.concat(f):u=!0}else u=!0;u&&E7(l)&&i.push(l.name)}),this._availableNames=r;var s=this.get("data")||i,a=Vi(),o=fi(s,function(l){return(ri(l)||jr(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new xs(l,this,this.ecModel))},this);this._data=_a(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var i=this.option.selected,r=this.get("selectedMode");if(r==="single"){var s=this._data;mt(s,function(a){i[a.get("name")]=!1})}i[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var i=this.option.selected;i.hasOwnProperty(t)||(i[t]=!0),this[i[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,i=this.option.selected;mt(t,function(r){i[r.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,i=this.option.selected;mt(t,function(r){var s=r.get("name",!0);i.hasOwnProperty(s)||(i[s]=!0),i[s]=!i[s]})},e.prototype.isSelected=function(t){var i=this.option.selected;return!(i.hasOwnProperty(t)&&!i[t])&&Nr(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Dr),fv=Ns,FR=mt,cS=eo,Ure=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new cS),this.group.add(this._selectorGroup=new cS),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,i,r){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var a=t.get("align"),o=t.get("orient");(!a||a==="auto")&&(a=t.get("left")==="right"&&o==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=o==="horizontal"?"end":"start"),this.renderInner(a,t,i,r,l,o,c);var u=t.getBoxLayoutParams(),d={width:r.getWidth(),height:r.getHeight()},f=t.get("padding"),h=D1(u,d,f),p=this.layoutInner(t,a,h,s,l,c),m=D1(Cr({width:p.width,height:p.height},u),d,f);this.group.x=m.x-p.x,this.group.y=m.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=kWe(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,i,r,s,a,o,l){var c=this.getContentGroup(),u=Vi(),d=i.get("selectedMode"),f=[];r.eachRawSeries(function(h){!h.get("legendHoverLink")&&f.push(h.id)}),FR(i.getData(),function(h,p){var m=h.get("name");if(!this.newlineDisabled&&(m===""||m===`
`)){var v=new cS;v.newline=!0,c.add(v);return}var g=r.getSeriesByName(m)[0];if(!u.get(m))if(g){var y=g.getData(),x=y.getVisual("legendLineStyle")||{},b=y.getVisual("legendIcon"),A=y.getVisual("style"),S=this._createItem(g,m,p,h,i,t,x,A,b,d,s);S.on("click",fv(uW,m,null,s,f)).on("mouseover",fv(BR,g.name,null,s,f)).on("mouseout",fv(NR,g.name,null,s,f)),r.ssr&&S.eachChild(function(C){var _=Rr(C);_.seriesIndex=g.seriesIndex,_.dataIndex=p,_.ssrType="legend"}),u.set(m,!0)}else r.eachRawSeries(function(C){if(!u.get(m)&&C.legendVisualProvider){var _=C.legendVisualProvider;if(!_.containName(m))return;var M=_.indexOfName(m),T=_.getItemVisual(M,"style"),E=_.getItemVisual(M,"legendIcon"),I=rf(T.fill);I&&I[3]===0&&(I[3]=.2,T=pn(pn({},T),{fill:NM(I,"rgba")}));var L=this._createItem(C,m,p,h,i,t,{},T,E,d,s);L.on("click",fv(uW,null,m,s,f)).on("mouseover",fv(BR,null,m,s,f)).on("mouseout",fv(NR,null,m,s,f)),r.ssr&&L.eachChild(function(F){var B=Rr(F);B.seriesIndex=C.seriesIndex,B.dataIndex=p,B.ssrType="legend"}),u.set(m,!0)}},this)},this),a&&this._createSelector(a,i,s,o,l)},e.prototype._createSelector=function(t,i,r,s,a){var o=this.getSelectorGroup();FR(t,function(c){var u=c.type,d=new Ra({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:i.id})}});o.add(d);var f=i.getModel("selectorLabel"),h=i.getModel(["emphasis","selectorLabel"]);jM(d,{normal:f,emphasis:h},{defaultText:c.title}),rR(d)})},e.prototype._createItem=function(t,i,r,s,a,o,l,c,u,d,f){var h=t.visualDrawType,p=a.get("itemWidth"),m=a.get("itemHeight"),v=a.isSelected(i),g=s.get("symbolRotate"),y=s.get("symbolKeepAspect"),x=s.get("icon");u=x||u||"roundRect";var b=nqe(u,s,l,c,h,v,f),A=new cS,S=s.getModel("textStyle");if(Ci(t.getLegendIcon)&&(!x||x==="inherit"))A.add(t.getLegendIcon({itemWidth:p,itemHeight:m,icon:u,iconRotate:g,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}));else{var C=x==="inherit"&&t.getData().getVisual("symbol")?g==="inherit"?t.getData().getVisual("symbolRotate"):g:0;A.add(iqe({itemWidth:p,itemHeight:m,icon:u,iconRotate:C,itemStyle:b.itemStyle,symbolKeepAspect:y}))}var _=o==="left"?p+5:-5,M=o,T=a.get("formatter"),E=i;ri(T)&&T?E=T.replace("{name}",i??""):Ci(T)&&(E=T(i));var I=v?S.getTextColor():s.get("inactiveColor");A.add(new Ra({style:up(S,{text:E,x:_,y:m/2,fill:I,align:M,verticalAlign:"middle"},{inheritColor:I})}));var L=new pa({shape:A.getBoundingRect(),style:{fill:"transparent"}}),F=s.getModel("tooltip");return F.get("show")&&YM({el:L,componentModel:a,itemName:i,itemTooltipOption:F.option}),A.add(L),A.eachChild(function(B){B.silent=!0}),L.silent=!d,this.getContentGroup().add(A),rR(A),A.__legendDataIndex=r,A},e.prototype.layoutInner=function(t,i,r,s,a,o){var l=this.getContentGroup(),c=this.getSelectorGroup();Cb(t.get("orient"),l,t.get("itemGap"),r.width,r.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),a){Cb("horizontal",c,t.get("selectorItemGap",!0));var f=c.getBoundingRect(),h=[-f.x,-f.y],p=t.get("selectorButtonGap",!0),m=t.getOrient().index,v=m===0?"width":"height",g=m===0?"height":"width",y=m===0?"y":"x";o==="end"?h[m]+=u[v]+p:d[m]+=f[v]+p,h[1-m]+=u[g]/2-f[g]/2,c.x=h[0],c.y=h[1],l.x=d[0],l.y=d[1];var x={x:0,y:0};return x[v]=u[v]+p+f[v],x[g]=Math.max(u[g],f[g]),x[y]=Math.min(0,f[y]+h[1-m]),x}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(su);function nqe(n,e,t,i,r,s,a){function o(v,g){v.lineWidth==="auto"&&(v.lineWidth=g.lineWidth>0?2:0),FR(v,function(y,x){v[x]==="inherit"&&(v[x]=g[x])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");c.decal=!d||d==="inherit"?i.decal:AR(d,a),c.fill==="inherit"&&(c.fill=i[r]),c.stroke==="inherit"&&(c.stroke=i[u]),c.opacity==="inherit"&&(c.opacity=(r==="fill"?i:t).opacity),o(c,i);var f=e.getModel("lineStyle"),h=f.getLineStyle();if(o(h,t),c.fill==="auto"&&(c.fill=i.fill),c.stroke==="auto"&&(c.stroke=i.fill),h.stroke==="auto"&&(h.stroke=i.fill),!s){var p=e.get("inactiveBorderWidth"),m=c[u];c.lineWidth=p==="auto"?i.lineWidth>0&&m?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),h.stroke=f.get("inactiveColor"),h.lineWidth=f.get("inactiveWidth")}return{itemStyle:c,lineStyle:h}}function iqe(n){var e=n.icon||"roundRect",t=L1(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function uW(n,e,t,i){NR(n,e,t,i),t.dispatchAction({type:"legendToggleSelect",name:n??e}),BR(n,e,t,i)}function zre(n){for(var e=n.getZr().storage.getDisplayList(),t,i=0,r=e.length;i<r&&!(t=e[i].states.emphasis);)i++;return t&&t.hoverLayer}function BR(n,e,t,i){zre(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:i})}function NR(n,e,t,i){zre(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:i})}function rqe(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}function m2(n,e,t){var i=n==="allSelect"||n==="inverseSelect",r={},s=[];t.eachComponent({mainType:"legend",query:e},function(o){i?o[n]():o[n](e.name),dW(o,r),s.push(o.componentIndex)});var a={};return t.eachComponent("legend",function(o){mt(r,function(l,c){o[l?"select":"unSelect"](c)}),dW(o,a)}),i?{selected:a,legendIndex:s}:{name:e.name,selected:a}}function dW(n,e){var t=e||{};return mt(n.getData(),function(i){var r=i.get("name");if(!(r===`
`||r==="")){var s=n.isSelected(r);hm(t,r)?t[r]=t[r]&&s:t[r]=s}}),t}function sqe(n){n.registerAction("legendToggleSelect","legendselectchanged",Ns(m2,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Ns(m2,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Ns(m2,"inverseSelect")),n.registerAction("legendSelect","legendselected",Ns(m2,"select")),n.registerAction("legendUnSelect","legendunselected",Ns(m2,"unSelect"))}function Vre(n){n.registerComponentModel(kR),n.registerComponentView(Ure),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,rqe),n.registerSubTypeDefaulter("legend",function(){return"plain"}),sqe(n)}var aqe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,i,r){var s=rT(t);n.prototype.init.call(this,t,i,r),fW(this,t,s)},e.prototype.mergeOption=function(t,i){n.prototype.mergeOption.call(this,t,i),fW(this,this.option,t)},e.type="legend.scroll",e.defaultOption=d9e(kR.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(kR);function fW(n,e,t){var i=n.getOrient(),r=[1,1];r[i.index]=0,R1(e,t,{type:"box",ignoreSize:!!r})}var hW=eo,p6=["width","height"],m6=["x","y"],oqe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new hW),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new hW)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,i,r,s,a,o,l){var c=this;n.prototype.renderInner.call(this,t,i,r,s,a,o,l);var u=this._controllerGroup,d=i.get("pageIconSize",!0),f=Un(d)?d:[d,d];p("pagePrev",0);var h=i.getModel("pageTextStyle");u.add(new Ra({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(m,v){var g=m+"DataIndex",y=H7(i.get("pageIcons",!0)[i.getOrient().name][v],{onclick:Xr(c._pageGo,c,g,i,s)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});y.name=m,u.add(y)}},e.prototype.layoutInner=function(t,i,r,s,a,o){var l=this.getSelectorGroup(),c=t.getOrient().index,u=p6[c],d=m6[c],f=p6[1-c],h=m6[1-c];a&&Cb("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),m=l.getBoundingRect(),v=[-m.x,-m.y],g=or(r);a&&(g[u]=r[u]-m[u]-p);var y=this._layoutContentAndController(t,s,g,c,u,f,h,d);if(a){if(o==="end")v[c]+=y[u]+p;else{var x=m[u]+p;v[c]-=x,y[d]-=x}y[u]+=m[u]+p,v[1-c]+=y[h]+y[f]/2-m[f]/2,y[f]=Math.max(y[f],m[f]),y[h]=Math.min(y[h],m[h]+v[1-c]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},e.prototype._layoutContentAndController=function(t,i,r,s,a,o,l,c){var u=this.getContentGroup(),d=this._containerGroup,f=this._controllerGroup;Cb(t.get("orient"),u,t.get("itemGap"),s?r.width:null,s?null:r.height),Cb("horizontal",f,t.get("pageButtonItemGap",!0));var h=u.getBoundingRect(),p=f.getBoundingRect(),m=this._showController=h[a]>r[a],v=[-h.x,-h.y];i||(v[s]=u[c]);var g=[0,0],y=[-p.x,-p.y],x=ki(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(m){var b=t.get("pageButtonPosition",!0);b==="end"?y[s]+=r[a]-p[a]:g[s]+=p[a]+x}y[1-s]+=h[o]/2-p[o]/2,u.setPosition(v),d.setPosition(g),f.setPosition(y);var A={x:0,y:0};if(A[a]=m?r[a]:h[a],A[o]=Math.max(h[o],p[o]),A[l]=Math.min(0,p[l]+y[1-s]),d.__rectSize=r[a],m){var S={x:0,y:0};S[a]=Math.max(r[a]-p[a]-x,0),S[o]=A[o],d.setClipPath(new pa({shape:S})),d.__rectSize=S[a]}else f.eachChild(function(_){_.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(t);return C.pageIndex!=null&&Ju(u,{x:C.contentPosition[0],y:C.contentPosition[1]},m?t:null),this._updatePageInfoView(t,C),A},e.prototype._pageGo=function(t,i,r){var s=this._getPageInfo(i)[t];s!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:i.id})},e.prototype._updatePageInfoView=function(t,i){var r=this._controllerGroup;mt(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",f=i[d]!=null,h=r.childOfName(u);h&&(h.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var s=r.childOfName("pageText"),a=t.get("pageFormatter"),o=i.pageIndex,l=o!=null?o+1:0,c=i.pageCount;s&&a&&s.setStyle("text",ri(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):a({current:l,total:c}))},e.prototype._getPageInfo=function(t){var i=t.get("scrollDataIndex",!0),r=this.getContentGroup(),s=this._containerGroup.__rectSize,a=t.getOrient().index,o=p6[a],l=m6[a],c=this._findTargetItemIndex(i),u=r.children(),d=u[c],f=u.length,h=f?1:0,p={contentPosition:[r.x,r.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var m=b(d);p.contentPosition[a]=-m.s;for(var v=c+1,g=m,y=m,x=null;v<=f;++v)x=b(u[v]),(!x&&y.e>g.s+s||x&&!A(x,g.s))&&(y.i>g.i?g=y:g=x,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=x;for(var v=c-1,g=m,y=m,x=null;v>=-1;--v)x=b(u[v]),(!x||!A(y,x.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=x;return p;function b(S){if(S){var C=S.getBoundingRect(),_=C[l]+S[l];return{s:_,e:_+C[o],i:S.__legendDataIndex}}}function A(S,C){return S.e>=C&&S.s<=C+s}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var i,r=this.getContentGroup(),s;return r.eachChild(function(a,o){var l=a.__legendDataIndex;s==null&&l!=null&&(s=o),l===t&&(i=o)}),i??s},e.type="legend.scroll",e}(Ure);function lqe(n){n.registerAction("legendScroll","legendscroll",function(e,t){var i=e.scrollDataIndex;i!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(r){r.setScrollDataIndex(i)})})}function cqe(n){ed(Vre),n.registerComponentModel(aqe),n.registerComponentView(oqe),lqe(n)}function xF(n){ed(Vre),ed(cqe)}var v6=null;function uqe(n){return v6||(v6=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),v6(n)}var g6=null;function dqe(n){g6||(g6=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),g6(n)}function fqe(n){var e=document.createElement("style");return e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(e),e}function uS(n,e){e===void 0&&(e={});var t=document.createElement(n);return Object.keys(e).forEach(function(i){t[i]=e[i]}),t}function Hre(n,e,t){var i=window.getComputedStyle(n,null)||{display:"none"};return i[e]}function OR(n){if(!document.documentElement.contains(n))return{detached:!0,rendered:!1};for(var e=n;e!==document;){if(Hre(e,"display")==="none")return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var hqe='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',UR=0,D_=null;function pqe(n,e){n.__resize_mutation_handler__||(n.__resize_mutation_handler__=gqe.bind(n));var t=n.__resize_listeners__;if(!t){if(n.__resize_listeners__=[],window.ResizeObserver){var i=n.offsetWidth,r=n.offsetHeight,s=new ResizeObserver(function(){!n.__resize_observer_triggered__&&(n.__resize_observer_triggered__=!0,n.offsetWidth===i&&n.offsetHeight===r)||l4(n)}),a=OR(n),o=a.detached,l=a.rendered;n.__resize_observer_triggered__=o===!1&&l===!1,n.__resize_observer__=s,s.observe(n)}else if(n.attachEvent&&n.addEventListener)n.__resize_legacy_resize_handler__=function(){l4(n)},n.attachEvent("onresize",n.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);else if(UR||(D_=fqe(hqe)),yqe(n),n.__resize_rendered__=OR(n).rendered,window.MutationObserver){var c=new MutationObserver(n.__resize_mutation_handler__);c.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),n.__resize_mutation_observer__=c}}n.__resize_listeners__.push(e),UR++}function mqe(n,e){var t=n.__resize_listeners__;if(t){if(e&&t.splice(t.indexOf(e),1),!t.length||!e){if(n.detachEvent&&n.removeEventListener){n.detachEvent("onresize",n.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);return}n.__resize_observer__?(n.__resize_observer__.unobserve(n),n.__resize_observer__.disconnect(),n.__resize_observer__=null):(n.__resize_mutation_observer__&&(n.__resize_mutation_observer__.disconnect(),n.__resize_mutation_observer__=null),n.removeEventListener("scroll",AF),n.removeChild(n.__resize_triggers__.triggers),n.__resize_triggers__=null),n.__resize_listeners__=null}!--UR&&D_&&D_.parentNode.removeChild(D_)}}function vqe(n){var e=n.__resize_last__,t=e.width,i=e.height,r=n.offsetWidth,s=n.offsetHeight;return r!==t||s!==i?{width:r,height:s}:null}function gqe(){var n=OR(this),e=n.rendered,t=n.detached;e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(wF(this),this.addEventListener("scroll",AF,!0)),this.__resize_rendered__=e,l4(this))}function AF(){var n=this;wF(this),this.__resize_raf__&&dqe(this.__resize_raf__),this.__resize_raf__=uqe(function(){var e=vqe(n);e&&(n.__resize_last__=e,l4(n))})}function l4(n){!n||!n.__resize_listeners__||n.__resize_listeners__.forEach(function(e){e.call(n,n)})}function yqe(n){var e=Hre(n,"position");(!e||e==="static")&&(n.style.position="relative"),n.__resize_old_position__=e,n.__resize_last__={};var t=uS("div",{className:"resize-triggers"}),i=uS("div",{className:"resize-expand-trigger"}),r=uS("div"),s=uS("div",{className:"resize-contract-trigger"});i.appendChild(r),t.appendChild(i),t.appendChild(s),n.appendChild(t),n.__resize_triggers__={triggers:t,expand:i,expandChild:r,contract:s},wF(n),n.addEventListener("scroll",AF,!0),n.__resize_last__={width:n.offsetWidth,height:n.offsetHeight}}function wF(n){var e=n.__resize_triggers__,t=e.expand,i=e.expandChild,r=e.contract,s=r.scrollWidth,a=r.scrollHeight,o=t.offsetWidth,l=t.offsetHeight,c=t.scrollWidth,u=t.scrollHeight;r.scrollLeft=s,r.scrollTop=a,i.style.width=o+1+"px",i.style.height=l+1+"px",t.scrollLeft=c,t.scrollTop=u}var Eu=function(){return Eu=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Eu.apply(this,arguments)},bqe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function xqe(n){return e=Object.create(null),bqe.forEach(function(t){e[t]=function(i){return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[i].apply(n.value,r)}}(t)}),e;var e}var Aqe={autoresize:[Boolean,Object]},wqe=/^on[^a-z]/,pW=function(n){return wqe.test(n)};function dS(n,e){var t=ir(n)?w(n):n;return t&&typeof t=="object"&&"value"in t?t.value||e:t||e}var Sqe="ecLoadingOptions",_qe={loading:Boolean,loadingOptions:Object},v2=null,Gre="x-vue-echarts",mW=[],g2=[];(function(n,e){if(n&&typeof document<"u"){var t,i=e.prepend===!0?"prepend":"append",r=e.singleTag===!0,s=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(r){var a=mW.indexOf(s);a===-1&&(a=mW.push(s)-1,g2[a]={}),t=g2[a]&&g2[a][i]?g2[a][i]:g2[a][i]=o()}else t=o();n.charCodeAt(0)===65279&&(n=n.substring(1)),t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(document.createTextNode(n))}function o(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),e.attributes)for(var c=Object.keys(e.attributes),u=0;u<c.length;u++)l.setAttribute(c[u],e.attributes[c[u]]);var d=i==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(d,l),l}})(`x-vue-echarts{display:flex;flex-direction:column;width:100%;height:100%;min-width:0}
.vue-echarts-inner{flex-grow:1;min-width:0;width:auto!important;height:auto!important}
`,{});var Cqe=function(){if(v2!=null)return v2;if(typeof HTMLElement>"u"||typeof customElements>"u")return v2=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(Gre)}catch{return v2=!1}return v2=!0}(),Mqe="ecTheme",Tqe="ecInitOptions",Eqe="ecUpdateOptions",vW=/(^&?~?!?)native:/,Wre=Ie({name:"echarts",props:Eu(Eu({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Aqe),_qe),emits:{},inheritAttrs:!1,setup:function(n,e){var t=e.attrs,i=Ui(),r=Ui(),s=Ui(),a=Ui(),o=Nt(Mqe,null),l=Nt(Tqe,null),c=Nt(Eqe,null),u=Vs(n),d=u.autoresize,f=u.manualUpdate,h=u.loading,p=u.loadingOptions,m=V(function(){return a.value||n.option||null}),v=V(function(){return n.theme||dS(o,{})}),g=V(function(){return n.initOptions||dS(l,{})}),y=V(function(){return n.updateOptions||dS(c,{})}),x=V(function(){return function(E){var I={};for(var L in E)pW(L)||(I[L]=E[L]);return I}(t)}),b={},A=Nn().proxy.$listeners,S={};function C(E){if(r.value){var I=s.value=aVe(r.value,v.value,g.value);n.group&&(I.group=n.group),Object.keys(S).forEach(function(F){var B=S[F];if(B){var P=F.toLowerCase();P.charAt(0)==="~"&&(P=P.substring(1),B.__once__=!0);var z=I;if(P.indexOf("zr:")===0&&(z=I.getZr(),P=P.substring(3)),B.__once__){delete B.__once__;var O=B;B=function(){for(var N=[],H=0;H<arguments.length;H++)N[H]=arguments[H];O.apply(void 0,N),z.off(P,B)}}z.on(P,B)}}),d.value?Yt(function(){I&&!I.isDisposed()&&I.resize(),L()}):L()}function L(){var F=E||m.value;F&&I.setOption(F,y.value)}}function _(){s.value&&(s.value.dispose(),s.value=void 0)}A?Object.keys(A).forEach(function(E){vW.test(E)?b[E.replace(vW,"$1")]=A[E]:S[E]=A[E]}):Object.keys(t).filter(function(E){return pW(E)}).forEach(function(E){var I=E.charAt(2).toLowerCase()+E.slice(3);if(I.indexOf("native:")!==0)I.substring(I.length-4)==="Once"&&(I="~".concat(I.substring(0,I.length-4))),S[I]=t[E];else{var L="on".concat(I.charAt(7).toUpperCase()).concat(I.slice(8));b[L]=t[E]}});var M=null;pt(f,function(E){typeof M=="function"&&(M(),M=null),E||(M=pt(function(){return n.option},function(I,L){I&&(s.value?s.value.setOption(I,Eu({notMerge:I!==L},y.value)):C())},{deep:!0}))},{immediate:!0}),pt([v,g],function(){_(),C()},{deep:!0}),Js(function(){n.group&&s.value&&(s.value.group=n.group)});var T=xqe(s);return function(E,I,L){var F=Nt(Sqe,{}),B=V(function(){return Eu(Eu({},dS(F,{})),L==null?void 0:L.value)});Js(function(){var P=E.value;P&&(I.value?P.showLoading(B.value):P.hideLoading())})}(s,h,p),function(E,I,L){var F=null;pt([L,E,I],function(B,P,z){var O=B[0],N=B[1],H=B[2];if(O&&N&&H){var q=H===!0?{}:H,te=q.throttle,Q=te===void 0?100:te,ee=q.onResize,de=function(){N.resize(),ee==null||ee()};F=Q?iF(de,Q):de,pqe(O,F)}z(function(){O&&F&&mqe(O,F)})})}(s,d,r),Mn(function(){C()}),Fi(function(){Cqe&&i.value?i.value.__dispose=_:_()}),Eu({chart:s,root:i,inner:r,setOption:function(E,I){n.manualUpdate&&(a.value=E),s.value?s.value.setOption(E,I||{}):C(E)},nonEventAttrs:x,nativeListeners:b},T)},render:function(){var n=Eu(Eu({},this.nonEventAttrs),this.nativeListeners);return n.ref="root",n.class=n.class?["echarts"].concat(n.class):"echarts",en(Gre,n,[en("div",{ref:"inner",class:"vue-echarts-inner"})])}});ed([hF,Sre,bF,yF,xF]);var R_={exports:{}},Iqe=R_.exports,gW;function Dqe(){return gW||(gW=1,function(n,e){(function(i,r){n.exports=r()})(typeof self<"u"?self:Iqe,function(){return function(){var t={};(function(){t.d=function(re,D){for(var R in D)t.o(D,R)&&!t.o(re,R)&&Object.defineProperty(re,R,{enumerable:!0,get:D[R]})}})(),function(){t.o=function(re,D){return Object.prototype.hasOwnProperty.call(re,D)}}();var i={};t.d(i,{default:function(){return Hle}});var r=function re(D,R){this.position=void 0;var k="KaTeX parse error: "+D,U,K=R&&R.loc;if(K&&K.start<=K.end){var ie=K.lexer.input;U=K.start;var ye=K.end;U===ie.length?k+=" at end of input: ":k+=" at position "+(U+1)+": ";var Fe=ie.slice(U,ye).replace(/[^]/g,"$&̲"),Ye;U>15?Ye="…"+ie.slice(U-15,U):Ye=ie.slice(0,U);var ut;ye+15<ie.length?ut=ie.slice(ye,ye+15)+"…":ut=ie.slice(ye),k+=Ye+Fe+ut}var Dt=new Error(k);return Dt.name="ParseError",Dt.__proto__=re.prototype,Dt.position=U,Dt};r.prototype.__proto__=Error.prototype;var s=r,a=function(D,R){return D.indexOf(R)!==-1},o=function(D,R){return D===void 0?R:D},l=/([A-Z])/g,c=function(D){return D.replace(l,"-$1").toLowerCase()},u={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d=/[&><"']/g;function f(re){return String(re).replace(d,function(D){return u[D]})}var h=function re(D){return D.type==="ordgroup"||D.type==="color"?D.body.length===1?re(D.body[0]):D:D.type==="font"?re(D.body):D},p=function(D){var R=h(D);return R.type==="mathord"||R.type==="textord"||R.type==="atom"},m=function(D){if(!D)throw new Error("Expected non-null, but got "+String(D));return D},v=function(D){var R=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(D);return R!=null?R[1]:"_relative"},g={contains:a,deflt:o,escape:f,hyphenate:c,getBaseElem:h,isCharacterBox:p,protocolFromUrl:v},y=function(){function re(R){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,R=R||{},this.displayMode=g.deflt(R.displayMode,!1),this.output=g.deflt(R.output,"htmlAndMathml"),this.leqno=g.deflt(R.leqno,!1),this.fleqn=g.deflt(R.fleqn,!1),this.throwOnError=g.deflt(R.throwOnError,!0),this.errorColor=g.deflt(R.errorColor,"#cc0000"),this.macros=R.macros||{},this.minRuleThickness=Math.max(0,g.deflt(R.minRuleThickness,0)),this.colorIsTextColor=g.deflt(R.colorIsTextColor,!1),this.strict=g.deflt(R.strict,"warn"),this.trust=g.deflt(R.trust,!1),this.maxSize=Math.max(0,g.deflt(R.maxSize,1/0)),this.maxExpand=Math.max(0,g.deflt(R.maxExpand,1e3)),this.globalGroup=g.deflt(R.globalGroup,!1)}var D=re.prototype;return D.reportNonstrict=function(k,U,K){var ie=this.strict;if(typeof ie=="function"&&(ie=ie(k,U,K)),!(!ie||ie==="ignore")){if(ie===!0||ie==="error")throw new s("LaTeX-incompatible input and strict mode is set to 'error': "+(U+" ["+k+"]"),K);ie==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(U+" ["+k+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+ie+"': "+U+" ["+k+"]"))}},D.useStrictBehavior=function(k,U,K){var ie=this.strict;if(typeof ie=="function")try{ie=ie(k,U,K)}catch{ie="error"}return!ie||ie==="ignore"?!1:ie===!0||ie==="error"?!0:ie==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(U+" ["+k+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+ie+"': "+U+" ["+k+"]")),!1)},D.isTrusted=function(k){k.url&&!k.protocol&&(k.protocol=g.protocolFromUrl(k.url));var U=typeof this.trust=="function"?this.trust(k):this.trust;return!!U},re}(),x=function(){function re(R,k,U){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=R,this.size=k,this.cramped=U}var D=re.prototype;return D.sup=function(){return I[L[this.id]]},D.sub=function(){return I[F[this.id]]},D.fracNum=function(){return I[B[this.id]]},D.fracDen=function(){return I[P[this.id]]},D.cramp=function(){return I[z[this.id]]},D.text=function(){return I[O[this.id]]},D.isTight=function(){return this.size>=2},re}(),b=0,A=1,S=2,C=3,_=4,M=5,T=6,E=7,I=[new x(b,0,!1),new x(A,0,!0),new x(S,1,!1),new x(C,1,!0),new x(_,2,!1),new x(M,2,!0),new x(T,3,!1),new x(E,3,!0)],L=[_,M,_,M,T,E,T,E],F=[M,M,M,M,E,E,E,E],B=[S,C,_,M,T,E,T,E],P=[C,C,M,M,E,E,E,E],z=[A,A,C,C,M,M,E,E],O=[b,A,S,C,S,C,S,C],N={DISPLAY:I[b],TEXT:I[S],SCRIPT:I[_],SCRIPTSCRIPT:I[T]},H=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function q(re){for(var D=0;D<H.length;D++)for(var R=H[D],k=0;k<R.blocks.length;k++){var U=R.blocks[k];if(re>=U[0]&&re<=U[1])return R.name}return null}var te=[];H.forEach(function(re){return re.blocks.forEach(function(D){return te.push.apply(te,D)})});function Q(re){for(var D=0;D<te.length;D+=2)if(re>=te[D]&&re<=te[D+1])return!0;return!1}var ee=80,de=function(D,R){return"M95,"+(622+D+R)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+D/2.075+" -"+D+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+D)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+D)+" "+R+"h400000v"+(40+D)+"h-400000z"},J=function(D,R){return"M263,"+(601+D+R)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+D/2.084+" -"+D+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+D)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+D)+" "+R+"h400000v"+(40+D)+"h-400000z"},ue=function(D,R){return"M983 "+(10+D+R)+`
l`+D/3.13+" -"+D+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+D)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+D)+" "+R+"h400000v"+(40+D)+"h-400000z"},Te=function(D,R){return"M424,"+(2398+D+R)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+D/4.223+" -"+D+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+D)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+D)+" "+R+`
h400000v`+(40+D)+"h-400000z"},De=function(D,R){return"M473,"+(2713+D+R)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+D/5.298+" -"+D+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+D)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+D)+" "+R+"h400000v"+(40+D)+"H1017.7z"},Le=function(D){var R=D/2;return"M400000 "+D+" H0 L"+R+" 0 l65 45 L145 "+(D-80)+" H400000z"},Ne=function(D,R,k){var U=k-54-R-D;return"M702 "+(D+R)+"H400000"+(40+D)+`
H742v`+U+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+R+"H400000v"+(40+D)+"H742z"},Y=function(D,R,k){R=1e3*R;var U="";switch(D){case"sqrtMain":U=de(R,ee);break;case"sqrtSize1":U=J(R,ee);break;case"sqrtSize2":U=ue(R,ee);break;case"sqrtSize3":U=Te(R,ee);break;case"sqrtSize4":U=De(R,ee);break;case"sqrtTall":U=Ne(R,ee,k)}return U},oe=function(D,R){switch(D){case"⎜":return"M291 0 H417 V"+R+" H291z M291 0 H417 V"+R+" H291z";case"∣":return"M145 0 H188 V"+R+" H145z M145 0 H188 V"+R+" H145z";case"∥":return"M145 0 H188 V"+R+" H145z M145 0 H188 V"+R+" H145z"+("M367 0 H410 V"+R+" H367z M367 0 H410 V"+R+" H367z");case"⎟":return"M457 0 H583 V"+R+" H457z M457 0 H583 V"+R+" H457z";case"⎢":return"M319 0 H403 V"+R+" H319z M319 0 H403 V"+R+" H319z";case"⎥":return"M263 0 H347 V"+R+" H263z M263 0 H347 V"+R+" H263z";case"⎪":return"M384 0 H504 V"+R+" H384z M384 0 H504 V"+R+" H384z";case"⏐":return"M312 0 H355 V"+R+" H312z M312 0 H355 V"+R+" H312z";case"‖":return"M257 0 H300 V"+R+" H257z M257 0 H300 V"+R+" H257z"+("M478 0 H521 V"+R+" H478z M478 0 H521 V"+R+" H478z");default:return""}},ne={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Xe=function(){function re(R){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=R,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var D=re.prototype;return D.hasClass=function(k){return g.contains(this.classes,k)},D.toNode=function(){for(var k=document.createDocumentFragment(),U=0;U<this.children.length;U++)k.appendChild(this.children[U].toNode());return k},D.toMarkup=function(){for(var k="",U=0;U<this.children.length;U++)k+=this.children[U].toMarkup();return k},D.toText=function(){var k=function(K){return K.toText()};return this.children.map(k).join("")},re}(),ke={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Ge={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},He={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function qe(re,D){ke[re]=D}function tt(re,D,R){if(!ke[D])throw new Error("Font metrics not found for font: "+D+".");var k=re.charCodeAt(0),U=ke[D][k];if(!U&&re[0]in He&&(k=He[re[0]].charCodeAt(0),U=ke[D][k]),!U&&R==="text"&&Q(k)&&(U=ke[D][77]),U)return{depth:U[0],height:U[1],italic:U[2],skew:U[3],width:U[4]}}var pe={};function G(re){var D;if(re>=5?D=0:re>=3?D=1:D=2,!pe[D]){var R=pe[D]={cssEmPerMu:Ge.quad[D]/18};for(var k in Ge)Ge.hasOwnProperty(k)&&(R[k]=Ge[k][D])}return pe[D]}var Z=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],ge=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Oe=function(D,R){return R.size<2?D:Z[D-1][R.size-1]},je=function(){function re(R){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=R.style,this.color=R.color,this.size=R.size||re.BASESIZE,this.textSize=R.textSize||this.size,this.phantom=!!R.phantom,this.font=R.font||"",this.fontFamily=R.fontFamily||"",this.fontWeight=R.fontWeight||"",this.fontShape=R.fontShape||"",this.sizeMultiplier=ge[this.size-1],this.maxSize=R.maxSize,this.minRuleThickness=R.minRuleThickness,this._fontMetrics=void 0}var D=re.prototype;return D.extend=function(k){var U={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var K in k)k.hasOwnProperty(K)&&(U[K]=k[K]);return new re(U)},D.havingStyle=function(k){return this.style===k?this:this.extend({style:k,size:Oe(this.textSize,k)})},D.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},D.havingSize=function(k){return this.size===k&&this.textSize===k?this:this.extend({style:this.style.text(),size:k,textSize:k,sizeMultiplier:ge[k-1]})},D.havingBaseStyle=function(k){k=k||this.style.text();var U=Oe(re.BASESIZE,k);return this.size===U&&this.textSize===re.BASESIZE&&this.style===k?this:this.extend({style:k,size:U})},D.havingBaseSizing=function(){var k;switch(this.style.id){case 4:case 5:k=3;break;case 6:case 7:k=1;break;default:k=6}return this.extend({style:this.style.text(),size:k})},D.withColor=function(k){return this.extend({color:k})},D.withPhantom=function(){return this.extend({phantom:!0})},D.withFont=function(k){return this.extend({font:k})},D.withTextFontFamily=function(k){return this.extend({fontFamily:k,font:""})},D.withTextFontWeight=function(k){return this.extend({fontWeight:k,font:""})},D.withTextFontShape=function(k){return this.extend({fontShape:k,font:""})},D.sizingClasses=function(k){return k.size!==this.size?["sizing","reset-size"+k.size,"size"+this.size]:[]},D.baseSizingClasses=function(){return this.size!==re.BASESIZE?["sizing","reset-size"+this.size,"size"+re.BASESIZE]:[]},D.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=G(this.size)),this._fontMetrics},D.getColor=function(){return this.phantom?"transparent":this.color},re}();je.BASESIZE=6;var bt=je,At={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Ee={ex:!0,em:!0,mu:!0},gt=function(D){return typeof D!="string"&&(D=D.unit),D in At||D in Ee||D==="ex"},lt=function(D,R){var k;if(D.unit in At)k=At[D.unit]/R.fontMetrics().ptPerEm/R.sizeMultiplier;else if(D.unit==="mu")k=R.fontMetrics().cssEmPerMu;else{var U;if(R.style.isTight()?U=R.havingStyle(R.style.text()):U=R,D.unit==="ex")k=U.fontMetrics().xHeight;else if(D.unit==="em")k=U.fontMetrics().quad;else throw new s("Invalid unit: '"+D.unit+"'");U!==R&&(k*=U.sizeMultiplier/R.sizeMultiplier)}return Math.min(D.number*k,R.maxSize)},$=function(D){return+D.toFixed(4)+"em"},le=function(D){return D.filter(function(R){return R}).join(" ")},fe=function(D,R,k){if(this.classes=D||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=k||{},R){R.style.isTight()&&this.classes.push("mtight");var U=R.getColor();U&&(this.style.color=U)}},Me=function(D){var R=document.createElement(D);R.className=le(this.classes);for(var k in this.style)this.style.hasOwnProperty(k)&&(R.style[k]=this.style[k]);for(var U in this.attributes)this.attributes.hasOwnProperty(U)&&R.setAttribute(U,this.attributes[U]);for(var K=0;K<this.children.length;K++)R.appendChild(this.children[K].toNode());return R},me=function(D){var R="<"+D;this.classes.length&&(R+=' class="'+g.escape(le(this.classes))+'"');var k="";for(var U in this.style)this.style.hasOwnProperty(U)&&(k+=g.hyphenate(U)+":"+this.style[U]+";");k&&(R+=' style="'+g.escape(k)+'"');for(var K in this.attributes)this.attributes.hasOwnProperty(K)&&(R+=" "+K+'="'+g.escape(this.attributes[K])+'"');R+=">";for(var ie=0;ie<this.children.length;ie++)R+=this.children[ie].toMarkup();return R+="</"+D+">",R},Ae=function(){function re(R,k,U,K){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,fe.call(this,R,U,K),this.children=k||[]}var D=re.prototype;return D.setAttribute=function(k,U){this.attributes[k]=U},D.hasClass=function(k){return g.contains(this.classes,k)},D.toNode=function(){return Me.call(this,"span")},D.toMarkup=function(){return me.call(this,"span")},re}(),dt=function(){function re(R,k,U,K){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,fe.call(this,k,K),this.children=U||[],this.setAttribute("href",R)}var D=re.prototype;return D.setAttribute=function(k,U){this.attributes[k]=U},D.hasClass=function(k){return g.contains(this.classes,k)},D.toNode=function(){return Me.call(this,"a")},D.toMarkup=function(){return me.call(this,"a")},re}(),we=function(){function re(R,k,U){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=k,this.src=R,this.classes=["mord"],this.style=U}var D=re.prototype;return D.hasClass=function(k){return g.contains(this.classes,k)},D.toNode=function(){var k=document.createElement("img");k.src=this.src,k.alt=this.alt,k.className="mord";for(var U in this.style)this.style.hasOwnProperty(U)&&(k.style[U]=this.style[U]);return k},D.toMarkup=function(){var k="<img  src='"+this.src+" 'alt='"+this.alt+"' ",U="";for(var K in this.style)this.style.hasOwnProperty(K)&&(U+=g.hyphenate(K)+":"+this.style[K]+";");return U&&(k+=' style="'+g.escape(U)+'"'),k+="'/>",k},re}(),_t={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"},it=function(){function re(R,k,U,K,ie,ye,Fe,Ye){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=R,this.height=k||0,this.depth=U||0,this.italic=K||0,this.skew=ie||0,this.width=ye||0,this.classes=Fe||[],this.style=Ye||{},this.maxFontSize=0;var ut=q(this.text.charCodeAt(0));ut&&this.classes.push(ut+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=_t[this.text])}var D=re.prototype;return D.hasClass=function(k){return g.contains(this.classes,k)},D.toNode=function(){var k=document.createTextNode(this.text),U=null;this.italic>0&&(U=document.createElement("span"),U.style.marginRight=$(this.italic)),this.classes.length>0&&(U=U||document.createElement("span"),U.className=le(this.classes));for(var K in this.style)this.style.hasOwnProperty(K)&&(U=U||document.createElement("span"),U.style[K]=this.style[K]);return U?(U.appendChild(k),U):k},D.toMarkup=function(){var k=!1,U="<span";this.classes.length&&(k=!0,U+=' class="',U+=g.escape(le(this.classes)),U+='"');var K="";this.italic>0&&(K+="margin-right:"+this.italic+"em;");for(var ie in this.style)this.style.hasOwnProperty(ie)&&(K+=g.hyphenate(ie)+":"+this.style[ie]+";");K&&(k=!0,U+=' style="'+g.escape(K)+'"');var ye=g.escape(this.text);return k?(U+=">",U+=ye,U+="</span>",U):ye},re}(),wt=function(){function re(R,k){this.children=void 0,this.attributes=void 0,this.children=R||[],this.attributes=k||{}}var D=re.prototype;return D.toNode=function(){var k="http://www.w3.org/2000/svg",U=document.createElementNS(k,"svg");for(var K in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,K)&&U.setAttribute(K,this.attributes[K]);for(var ie=0;ie<this.children.length;ie++)U.appendChild(this.children[ie].toNode());return U},D.toMarkup=function(){var k='<svg xmlns="http://www.w3.org/2000/svg"';for(var U in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,U)&&(k+=" "+U+"='"+this.attributes[U]+"'");k+=">";for(var K=0;K<this.children.length;K++)k+=this.children[K].toMarkup();return k+="</svg>",k},re}(),Ft=function(){function re(R,k){this.pathName=void 0,this.alternate=void 0,this.pathName=R,this.alternate=k}var D=re.prototype;return D.toNode=function(){var k="http://www.w3.org/2000/svg",U=document.createElementNS(k,"path");return this.alternate?U.setAttribute("d",this.alternate):U.setAttribute("d",ne[this.pathName]),U},D.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+ne[this.pathName]+"'/>"},re}(),Rt=function(){function re(R){this.attributes=void 0,this.attributes=R||{}}var D=re.prototype;return D.toNode=function(){var k="http://www.w3.org/2000/svg",U=document.createElementNS(k,"line");for(var K in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,K)&&U.setAttribute(K,this.attributes[K]);return U},D.toMarkup=function(){var k="<line";for(var U in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,U)&&(k+=" "+U+"='"+this.attributes[U]+"'");return k+="/>",k},re}();function Wt(re){if(re instanceof it)return re;throw new Error("Expected symbolNode but got "+String(re)+".")}function hn(re){if(re instanceof Ae)return re;throw new Error("Expected span<HtmlDomNode> but got "+String(re)+".")}var pi={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Pn={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Qi={math:{},text:{}},ai=Qi;function X(re,D,R,k,U,K){Qi[re][U]={font:D,group:R,replace:k},K&&k&&(Qi[re][k]=Qi[re][U])}var se="math",zt="text",Ce="main",ce="ams",Ct="accent-token",vt="bin",We="close",xt="inner",Pt="mathord",dn="op-token",En="open",ei="punct",Je="rel",ti="spacing",st="textord";X(se,Ce,Je,"≡","\\equiv",!0),X(se,Ce,Je,"≺","\\prec",!0),X(se,Ce,Je,"≻","\\succ",!0),X(se,Ce,Je,"∼","\\sim",!0),X(se,Ce,Je,"⊥","\\perp"),X(se,Ce,Je,"⪯","\\preceq",!0),X(se,Ce,Je,"⪰","\\succeq",!0),X(se,Ce,Je,"≃","\\simeq",!0),X(se,Ce,Je,"∣","\\mid",!0),X(se,Ce,Je,"≪","\\ll",!0),X(se,Ce,Je,"≫","\\gg",!0),X(se,Ce,Je,"≍","\\asymp",!0),X(se,Ce,Je,"∥","\\parallel"),X(se,Ce,Je,"⋈","\\bowtie",!0),X(se,Ce,Je,"⌣","\\smile",!0),X(se,Ce,Je,"⊑","\\sqsubseteq",!0),X(se,Ce,Je,"⊒","\\sqsupseteq",!0),X(se,Ce,Je,"≐","\\doteq",!0),X(se,Ce,Je,"⌢","\\frown",!0),X(se,Ce,Je,"∋","\\ni",!0),X(se,Ce,Je,"∝","\\propto",!0),X(se,Ce,Je,"⊢","\\vdash",!0),X(se,Ce,Je,"⊣","\\dashv",!0),X(se,Ce,Je,"∋","\\owns"),X(se,Ce,ei,".","\\ldotp"),X(se,Ce,ei,"⋅","\\cdotp"),X(se,Ce,st,"#","\\#"),X(zt,Ce,st,"#","\\#"),X(se,Ce,st,"&","\\&"),X(zt,Ce,st,"&","\\&"),X(se,Ce,st,"ℵ","\\aleph",!0),X(se,Ce,st,"∀","\\forall",!0),X(se,Ce,st,"ℏ","\\hbar",!0),X(se,Ce,st,"∃","\\exists",!0),X(se,Ce,st,"∇","\\nabla",!0),X(se,Ce,st,"♭","\\flat",!0),X(se,Ce,st,"ℓ","\\ell",!0),X(se,Ce,st,"♮","\\natural",!0),X(se,Ce,st,"♣","\\clubsuit",!0),X(se,Ce,st,"℘","\\wp",!0),X(se,Ce,st,"♯","\\sharp",!0),X(se,Ce,st,"♢","\\diamondsuit",!0),X(se,Ce,st,"ℜ","\\Re",!0),X(se,Ce,st,"♡","\\heartsuit",!0),X(se,Ce,st,"ℑ","\\Im",!0),X(se,Ce,st,"♠","\\spadesuit",!0),X(se,Ce,st,"§","\\S",!0),X(zt,Ce,st,"§","\\S"),X(se,Ce,st,"¶","\\P",!0),X(zt,Ce,st,"¶","\\P"),X(se,Ce,st,"†","\\dag"),X(zt,Ce,st,"†","\\dag"),X(zt,Ce,st,"†","\\textdagger"),X(se,Ce,st,"‡","\\ddag"),X(zt,Ce,st,"‡","\\ddag"),X(zt,Ce,st,"‡","\\textdaggerdbl"),X(se,Ce,We,"⎱","\\rmoustache",!0),X(se,Ce,En,"⎰","\\lmoustache",!0),X(se,Ce,We,"⟯","\\rgroup",!0),X(se,Ce,En,"⟮","\\lgroup",!0),X(se,Ce,vt,"∓","\\mp",!0),X(se,Ce,vt,"⊖","\\ominus",!0),X(se,Ce,vt,"⊎","\\uplus",!0),X(se,Ce,vt,"⊓","\\sqcap",!0),X(se,Ce,vt,"∗","\\ast"),X(se,Ce,vt,"⊔","\\sqcup",!0),X(se,Ce,vt,"◯","\\bigcirc",!0),X(se,Ce,vt,"∙","\\bullet"),X(se,Ce,vt,"‡","\\ddagger"),X(se,Ce,vt,"≀","\\wr",!0),X(se,Ce,vt,"⨿","\\amalg"),X(se,Ce,vt,"&","\\And"),X(se,Ce,Je,"⟵","\\longleftarrow",!0),X(se,Ce,Je,"⇐","\\Leftarrow",!0),X(se,Ce,Je,"⟸","\\Longleftarrow",!0),X(se,Ce,Je,"⟶","\\longrightarrow",!0),X(se,Ce,Je,"⇒","\\Rightarrow",!0),X(se,Ce,Je,"⟹","\\Longrightarrow",!0),X(se,Ce,Je,"↔","\\leftrightarrow",!0),X(se,Ce,Je,"⟷","\\longleftrightarrow",!0),X(se,Ce,Je,"⇔","\\Leftrightarrow",!0),X(se,Ce,Je,"⟺","\\Longleftrightarrow",!0),X(se,Ce,Je,"↦","\\mapsto",!0),X(se,Ce,Je,"⟼","\\longmapsto",!0),X(se,Ce,Je,"↗","\\nearrow",!0),X(se,Ce,Je,"↩","\\hookleftarrow",!0),X(se,Ce,Je,"↪","\\hookrightarrow",!0),X(se,Ce,Je,"↘","\\searrow",!0),X(se,Ce,Je,"↼","\\leftharpoonup",!0),X(se,Ce,Je,"⇀","\\rightharpoonup",!0),X(se,Ce,Je,"↙","\\swarrow",!0),X(se,Ce,Je,"↽","\\leftharpoondown",!0),X(se,Ce,Je,"⇁","\\rightharpoondown",!0),X(se,Ce,Je,"↖","\\nwarrow",!0),X(se,Ce,Je,"⇌","\\rightleftharpoons",!0),X(se,ce,Je,"≮","\\nless",!0),X(se,ce,Je,"","\\@nleqslant"),X(se,ce,Je,"","\\@nleqq"),X(se,ce,Je,"⪇","\\lneq",!0),X(se,ce,Je,"≨","\\lneqq",!0),X(se,ce,Je,"","\\@lvertneqq"),X(se,ce,Je,"⋦","\\lnsim",!0),X(se,ce,Je,"⪉","\\lnapprox",!0),X(se,ce,Je,"⊀","\\nprec",!0),X(se,ce,Je,"⋠","\\npreceq",!0),X(se,ce,Je,"⋨","\\precnsim",!0),X(se,ce,Je,"⪹","\\precnapprox",!0),X(se,ce,Je,"≁","\\nsim",!0),X(se,ce,Je,"","\\@nshortmid"),X(se,ce,Je,"∤","\\nmid",!0),X(se,ce,Je,"⊬","\\nvdash",!0),X(se,ce,Je,"⊭","\\nvDash",!0),X(se,ce,Je,"⋪","\\ntriangleleft"),X(se,ce,Je,"⋬","\\ntrianglelefteq",!0),X(se,ce,Je,"⊊","\\subsetneq",!0),X(se,ce,Je,"","\\@varsubsetneq"),X(se,ce,Je,"⫋","\\subsetneqq",!0),X(se,ce,Je,"","\\@varsubsetneqq"),X(se,ce,Je,"≯","\\ngtr",!0),X(se,ce,Je,"","\\@ngeqslant"),X(se,ce,Je,"","\\@ngeqq"),X(se,ce,Je,"⪈","\\gneq",!0),X(se,ce,Je,"≩","\\gneqq",!0),X(se,ce,Je,"","\\@gvertneqq"),X(se,ce,Je,"⋧","\\gnsim",!0),X(se,ce,Je,"⪊","\\gnapprox",!0),X(se,ce,Je,"⊁","\\nsucc",!0),X(se,ce,Je,"⋡","\\nsucceq",!0),X(se,ce,Je,"⋩","\\succnsim",!0),X(se,ce,Je,"⪺","\\succnapprox",!0),X(se,ce,Je,"≆","\\ncong",!0),X(se,ce,Je,"","\\@nshortparallel"),X(se,ce,Je,"∦","\\nparallel",!0),X(se,ce,Je,"⊯","\\nVDash",!0),X(se,ce,Je,"⋫","\\ntriangleright"),X(se,ce,Je,"⋭","\\ntrianglerighteq",!0),X(se,ce,Je,"","\\@nsupseteqq"),X(se,ce,Je,"⊋","\\supsetneq",!0),X(se,ce,Je,"","\\@varsupsetneq"),X(se,ce,Je,"⫌","\\supsetneqq",!0),X(se,ce,Je,"","\\@varsupsetneqq"),X(se,ce,Je,"⊮","\\nVdash",!0),X(se,ce,Je,"⪵","\\precneqq",!0),X(se,ce,Je,"⪶","\\succneqq",!0),X(se,ce,Je,"","\\@nsubseteqq"),X(se,ce,vt,"⊴","\\unlhd"),X(se,ce,vt,"⊵","\\unrhd"),X(se,ce,Je,"↚","\\nleftarrow",!0),X(se,ce,Je,"↛","\\nrightarrow",!0),X(se,ce,Je,"⇍","\\nLeftarrow",!0),X(se,ce,Je,"⇏","\\nRightarrow",!0),X(se,ce,Je,"↮","\\nleftrightarrow",!0),X(se,ce,Je,"⇎","\\nLeftrightarrow",!0),X(se,ce,Je,"△","\\vartriangle"),X(se,ce,st,"ℏ","\\hslash"),X(se,ce,st,"▽","\\triangledown"),X(se,ce,st,"◊","\\lozenge"),X(se,ce,st,"Ⓢ","\\circledS"),X(se,ce,st,"®","\\circledR"),X(zt,ce,st,"®","\\circledR"),X(se,ce,st,"∡","\\measuredangle",!0),X(se,ce,st,"∄","\\nexists"),X(se,ce,st,"℧","\\mho"),X(se,ce,st,"Ⅎ","\\Finv",!0),X(se,ce,st,"⅁","\\Game",!0),X(se,ce,st,"‵","\\backprime"),X(se,ce,st,"▲","\\blacktriangle"),X(se,ce,st,"▼","\\blacktriangledown"),X(se,ce,st,"■","\\blacksquare"),X(se,ce,st,"⧫","\\blacklozenge"),X(se,ce,st,"★","\\bigstar"),X(se,ce,st,"∢","\\sphericalangle",!0),X(se,ce,st,"∁","\\complement",!0),X(se,ce,st,"ð","\\eth",!0),X(zt,Ce,st,"ð","ð"),X(se,ce,st,"╱","\\diagup"),X(se,ce,st,"╲","\\diagdown"),X(se,ce,st,"□","\\square"),X(se,ce,st,"□","\\Box"),X(se,ce,st,"◊","\\Diamond"),X(se,ce,st,"¥","\\yen",!0),X(zt,ce,st,"¥","\\yen",!0),X(se,ce,st,"✓","\\checkmark",!0),X(zt,ce,st,"✓","\\checkmark"),X(se,ce,st,"ℶ","\\beth",!0),X(se,ce,st,"ℸ","\\daleth",!0),X(se,ce,st,"ℷ","\\gimel",!0),X(se,ce,st,"ϝ","\\digamma",!0),X(se,ce,st,"ϰ","\\varkappa"),X(se,ce,En,"┌","\\@ulcorner",!0),X(se,ce,We,"┐","\\@urcorner",!0),X(se,ce,En,"└","\\@llcorner",!0),X(se,ce,We,"┘","\\@lrcorner",!0),X(se,ce,Je,"≦","\\leqq",!0),X(se,ce,Je,"⩽","\\leqslant",!0),X(se,ce,Je,"⪕","\\eqslantless",!0),X(se,ce,Je,"≲","\\lesssim",!0),X(se,ce,Je,"⪅","\\lessapprox",!0),X(se,ce,Je,"≊","\\approxeq",!0),X(se,ce,vt,"⋖","\\lessdot"),X(se,ce,Je,"⋘","\\lll",!0),X(se,ce,Je,"≶","\\lessgtr",!0),X(se,ce,Je,"⋚","\\lesseqgtr",!0),X(se,ce,Je,"⪋","\\lesseqqgtr",!0),X(se,ce,Je,"≑","\\doteqdot"),X(se,ce,Je,"≓","\\risingdotseq",!0),X(se,ce,Je,"≒","\\fallingdotseq",!0),X(se,ce,Je,"∽","\\backsim",!0),X(se,ce,Je,"⋍","\\backsimeq",!0),X(se,ce,Je,"⫅","\\subseteqq",!0),X(se,ce,Je,"⋐","\\Subset",!0),X(se,ce,Je,"⊏","\\sqsubset",!0),X(se,ce,Je,"≼","\\preccurlyeq",!0),X(se,ce,Je,"⋞","\\curlyeqprec",!0),X(se,ce,Je,"≾","\\precsim",!0),X(se,ce,Je,"⪷","\\precapprox",!0),X(se,ce,Je,"⊲","\\vartriangleleft"),X(se,ce,Je,"⊴","\\trianglelefteq"),X(se,ce,Je,"⊨","\\vDash",!0),X(se,ce,Je,"⊪","\\Vvdash",!0),X(se,ce,Je,"⌣","\\smallsmile"),X(se,ce,Je,"⌢","\\smallfrown"),X(se,ce,Je,"≏","\\bumpeq",!0),X(se,ce,Je,"≎","\\Bumpeq",!0),X(se,ce,Je,"≧","\\geqq",!0),X(se,ce,Je,"⩾","\\geqslant",!0),X(se,ce,Je,"⪖","\\eqslantgtr",!0),X(se,ce,Je,"≳","\\gtrsim",!0),X(se,ce,Je,"⪆","\\gtrapprox",!0),X(se,ce,vt,"⋗","\\gtrdot"),X(se,ce,Je,"⋙","\\ggg",!0),X(se,ce,Je,"≷","\\gtrless",!0),X(se,ce,Je,"⋛","\\gtreqless",!0),X(se,ce,Je,"⪌","\\gtreqqless",!0),X(se,ce,Je,"≖","\\eqcirc",!0),X(se,ce,Je,"≗","\\circeq",!0),X(se,ce,Je,"≜","\\triangleq",!0),X(se,ce,Je,"∼","\\thicksim"),X(se,ce,Je,"≈","\\thickapprox"),X(se,ce,Je,"⫆","\\supseteqq",!0),X(se,ce,Je,"⋑","\\Supset",!0),X(se,ce,Je,"⊐","\\sqsupset",!0),X(se,ce,Je,"≽","\\succcurlyeq",!0),X(se,ce,Je,"⋟","\\curlyeqsucc",!0),X(se,ce,Je,"≿","\\succsim",!0),X(se,ce,Je,"⪸","\\succapprox",!0),X(se,ce,Je,"⊳","\\vartriangleright"),X(se,ce,Je,"⊵","\\trianglerighteq"),X(se,ce,Je,"⊩","\\Vdash",!0),X(se,ce,Je,"∣","\\shortmid"),X(se,ce,Je,"∥","\\shortparallel"),X(se,ce,Je,"≬","\\between",!0),X(se,ce,Je,"⋔","\\pitchfork",!0),X(se,ce,Je,"∝","\\varpropto"),X(se,ce,Je,"◀","\\blacktriangleleft"),X(se,ce,Je,"∴","\\therefore",!0),X(se,ce,Je,"∍","\\backepsilon"),X(se,ce,Je,"▶","\\blacktriangleright"),X(se,ce,Je,"∵","\\because",!0),X(se,ce,Je,"⋘","\\llless"),X(se,ce,Je,"⋙","\\gggtr"),X(se,ce,vt,"⊲","\\lhd"),X(se,ce,vt,"⊳","\\rhd"),X(se,ce,Je,"≂","\\eqsim",!0),X(se,Ce,Je,"⋈","\\Join"),X(se,ce,Je,"≑","\\Doteq",!0),X(se,ce,vt,"∔","\\dotplus",!0),X(se,ce,vt,"∖","\\smallsetminus"),X(se,ce,vt,"⋒","\\Cap",!0),X(se,ce,vt,"⋓","\\Cup",!0),X(se,ce,vt,"⩞","\\doublebarwedge",!0),X(se,ce,vt,"⊟","\\boxminus",!0),X(se,ce,vt,"⊞","\\boxplus",!0),X(se,ce,vt,"⋇","\\divideontimes",!0),X(se,ce,vt,"⋉","\\ltimes",!0),X(se,ce,vt,"⋊","\\rtimes",!0),X(se,ce,vt,"⋋","\\leftthreetimes",!0),X(se,ce,vt,"⋌","\\rightthreetimes",!0),X(se,ce,vt,"⋏","\\curlywedge",!0),X(se,ce,vt,"⋎","\\curlyvee",!0),X(se,ce,vt,"⊝","\\circleddash",!0),X(se,ce,vt,"⊛","\\circledast",!0),X(se,ce,vt,"⋅","\\centerdot"),X(se,ce,vt,"⊺","\\intercal",!0),X(se,ce,vt,"⋒","\\doublecap"),X(se,ce,vt,"⋓","\\doublecup"),X(se,ce,vt,"⊠","\\boxtimes",!0),X(se,ce,Je,"⇢","\\dashrightarrow",!0),X(se,ce,Je,"⇠","\\dashleftarrow",!0),X(se,ce,Je,"⇇","\\leftleftarrows",!0),X(se,ce,Je,"⇆","\\leftrightarrows",!0),X(se,ce,Je,"⇚","\\Lleftarrow",!0),X(se,ce,Je,"↞","\\twoheadleftarrow",!0),X(se,ce,Je,"↢","\\leftarrowtail",!0),X(se,ce,Je,"↫","\\looparrowleft",!0),X(se,ce,Je,"⇋","\\leftrightharpoons",!0),X(se,ce,Je,"↶","\\curvearrowleft",!0),X(se,ce,Je,"↺","\\circlearrowleft",!0),X(se,ce,Je,"↰","\\Lsh",!0),X(se,ce,Je,"⇈","\\upuparrows",!0),X(se,ce,Je,"↿","\\upharpoonleft",!0),X(se,ce,Je,"⇃","\\downharpoonleft",!0),X(se,Ce,Je,"⊶","\\origof",!0),X(se,Ce,Je,"⊷","\\imageof",!0),X(se,ce,Je,"⊸","\\multimap",!0),X(se,ce,Je,"↭","\\leftrightsquigarrow",!0),X(se,ce,Je,"⇉","\\rightrightarrows",!0),X(se,ce,Je,"⇄","\\rightleftarrows",!0),X(se,ce,Je,"↠","\\twoheadrightarrow",!0),X(se,ce,Je,"↣","\\rightarrowtail",!0),X(se,ce,Je,"↬","\\looparrowright",!0),X(se,ce,Je,"↷","\\curvearrowright",!0),X(se,ce,Je,"↻","\\circlearrowright",!0),X(se,ce,Je,"↱","\\Rsh",!0),X(se,ce,Je,"⇊","\\downdownarrows",!0),X(se,ce,Je,"↾","\\upharpoonright",!0),X(se,ce,Je,"⇂","\\downharpoonright",!0),X(se,ce,Je,"⇝","\\rightsquigarrow",!0),X(se,ce,Je,"⇝","\\leadsto"),X(se,ce,Je,"⇛","\\Rrightarrow",!0),X(se,ce,Je,"↾","\\restriction"),X(se,Ce,st,"‘","`"),X(se,Ce,st,"$","\\$"),X(zt,Ce,st,"$","\\$"),X(zt,Ce,st,"$","\\textdollar"),X(se,Ce,st,"%","\\%"),X(zt,Ce,st,"%","\\%"),X(se,Ce,st,"_","\\_"),X(zt,Ce,st,"_","\\_"),X(zt,Ce,st,"_","\\textunderscore"),X(se,Ce,st,"∠","\\angle",!0),X(se,Ce,st,"∞","\\infty",!0),X(se,Ce,st,"′","\\prime"),X(se,Ce,st,"△","\\triangle"),X(se,Ce,st,"Γ","\\Gamma",!0),X(se,Ce,st,"Δ","\\Delta",!0),X(se,Ce,st,"Θ","\\Theta",!0),X(se,Ce,st,"Λ","\\Lambda",!0),X(se,Ce,st,"Ξ","\\Xi",!0),X(se,Ce,st,"Π","\\Pi",!0),X(se,Ce,st,"Σ","\\Sigma",!0),X(se,Ce,st,"Υ","\\Upsilon",!0),X(se,Ce,st,"Φ","\\Phi",!0),X(se,Ce,st,"Ψ","\\Psi",!0),X(se,Ce,st,"Ω","\\Omega",!0),X(se,Ce,st,"A","Α"),X(se,Ce,st,"B","Β"),X(se,Ce,st,"E","Ε"),X(se,Ce,st,"Z","Ζ"),X(se,Ce,st,"H","Η"),X(se,Ce,st,"I","Ι"),X(se,Ce,st,"K","Κ"),X(se,Ce,st,"M","Μ"),X(se,Ce,st,"N","Ν"),X(se,Ce,st,"O","Ο"),X(se,Ce,st,"P","Ρ"),X(se,Ce,st,"T","Τ"),X(se,Ce,st,"X","Χ"),X(se,Ce,st,"¬","\\neg",!0),X(se,Ce,st,"¬","\\lnot"),X(se,Ce,st,"⊤","\\top"),X(se,Ce,st,"⊥","\\bot"),X(se,Ce,st,"∅","\\emptyset"),X(se,ce,st,"∅","\\varnothing"),X(se,Ce,Pt,"α","\\alpha",!0),X(se,Ce,Pt,"β","\\beta",!0),X(se,Ce,Pt,"γ","\\gamma",!0),X(se,Ce,Pt,"δ","\\delta",!0),X(se,Ce,Pt,"ϵ","\\epsilon",!0),X(se,Ce,Pt,"ζ","\\zeta",!0),X(se,Ce,Pt,"η","\\eta",!0),X(se,Ce,Pt,"θ","\\theta",!0),X(se,Ce,Pt,"ι","\\iota",!0),X(se,Ce,Pt,"κ","\\kappa",!0),X(se,Ce,Pt,"λ","\\lambda",!0),X(se,Ce,Pt,"μ","\\mu",!0),X(se,Ce,Pt,"ν","\\nu",!0),X(se,Ce,Pt,"ξ","\\xi",!0),X(se,Ce,Pt,"ο","\\omicron",!0),X(se,Ce,Pt,"π","\\pi",!0),X(se,Ce,Pt,"ρ","\\rho",!0),X(se,Ce,Pt,"σ","\\sigma",!0),X(se,Ce,Pt,"τ","\\tau",!0),X(se,Ce,Pt,"υ","\\upsilon",!0),X(se,Ce,Pt,"ϕ","\\phi",!0),X(se,Ce,Pt,"χ","\\chi",!0),X(se,Ce,Pt,"ψ","\\psi",!0),X(se,Ce,Pt,"ω","\\omega",!0),X(se,Ce,Pt,"ε","\\varepsilon",!0),X(se,Ce,Pt,"ϑ","\\vartheta",!0),X(se,Ce,Pt,"ϖ","\\varpi",!0),X(se,Ce,Pt,"ϱ","\\varrho",!0),X(se,Ce,Pt,"ς","\\varsigma",!0),X(se,Ce,Pt,"φ","\\varphi",!0),X(se,Ce,vt,"∗","*",!0),X(se,Ce,vt,"+","+"),X(se,Ce,vt,"−","-",!0),X(se,Ce,vt,"⋅","\\cdot",!0),X(se,Ce,vt,"∘","\\circ"),X(se,Ce,vt,"÷","\\div",!0),X(se,Ce,vt,"±","\\pm",!0),X(se,Ce,vt,"×","\\times",!0),X(se,Ce,vt,"∩","\\cap",!0),X(se,Ce,vt,"∪","\\cup",!0),X(se,Ce,vt,"∖","\\setminus"),X(se,Ce,vt,"∧","\\land"),X(se,Ce,vt,"∨","\\lor"),X(se,Ce,vt,"∧","\\wedge",!0),X(se,Ce,vt,"∨","\\vee",!0),X(se,Ce,st,"√","\\surd"),X(se,Ce,En,"⟨","\\langle",!0),X(se,Ce,En,"∣","\\lvert"),X(se,Ce,En,"∥","\\lVert"),X(se,Ce,We,"?","?"),X(se,Ce,We,"!","!"),X(se,Ce,We,"⟩","\\rangle",!0),X(se,Ce,We,"∣","\\rvert"),X(se,Ce,We,"∥","\\rVert"),X(se,Ce,Je,"=","="),X(se,Ce,Je,":",":"),X(se,Ce,Je,"≈","\\approx",!0),X(se,Ce,Je,"≅","\\cong",!0),X(se,Ce,Je,"≥","\\ge"),X(se,Ce,Je,"≥","\\geq",!0),X(se,Ce,Je,"←","\\gets"),X(se,Ce,Je,">","\\gt",!0),X(se,Ce,Je,"∈","\\in",!0),X(se,Ce,Je,"","\\@not"),X(se,Ce,Je,"⊂","\\subset",!0),X(se,Ce,Je,"⊃","\\supset",!0),X(se,Ce,Je,"⊆","\\subseteq",!0),X(se,Ce,Je,"⊇","\\supseteq",!0),X(se,ce,Je,"⊈","\\nsubseteq",!0),X(se,ce,Je,"⊉","\\nsupseteq",!0),X(se,Ce,Je,"⊨","\\models"),X(se,Ce,Je,"←","\\leftarrow",!0),X(se,Ce,Je,"≤","\\le"),X(se,Ce,Je,"≤","\\leq",!0),X(se,Ce,Je,"<","\\lt",!0),X(se,Ce,Je,"→","\\rightarrow",!0),X(se,Ce,Je,"→","\\to"),X(se,ce,Je,"≱","\\ngeq",!0),X(se,ce,Je,"≰","\\nleq",!0),X(se,Ce,ti," ","\\ "),X(se,Ce,ti," ","\\space"),X(se,Ce,ti," ","\\nobreakspace"),X(zt,Ce,ti," ","\\ "),X(zt,Ce,ti," "," "),X(zt,Ce,ti," ","\\space"),X(zt,Ce,ti," ","\\nobreakspace"),X(se,Ce,ti,null,"\\nobreak"),X(se,Ce,ti,null,"\\allowbreak"),X(se,Ce,ei,",",","),X(se,Ce,ei,";",";"),X(se,ce,vt,"⊼","\\barwedge",!0),X(se,ce,vt,"⊻","\\veebar",!0),X(se,Ce,vt,"⊙","\\odot",!0),X(se,Ce,vt,"⊕","\\oplus",!0),X(se,Ce,vt,"⊗","\\otimes",!0),X(se,Ce,st,"∂","\\partial",!0),X(se,Ce,vt,"⊘","\\oslash",!0),X(se,ce,vt,"⊚","\\circledcirc",!0),X(se,ce,vt,"⊡","\\boxdot",!0),X(se,Ce,vt,"△","\\bigtriangleup"),X(se,Ce,vt,"▽","\\bigtriangledown"),X(se,Ce,vt,"†","\\dagger"),X(se,Ce,vt,"⋄","\\diamond"),X(se,Ce,vt,"⋆","\\star"),X(se,Ce,vt,"◃","\\triangleleft"),X(se,Ce,vt,"▹","\\triangleright"),X(se,Ce,En,"{","\\{"),X(zt,Ce,st,"{","\\{"),X(zt,Ce,st,"{","\\textbraceleft"),X(se,Ce,We,"}","\\}"),X(zt,Ce,st,"}","\\}"),X(zt,Ce,st,"}","\\textbraceright"),X(se,Ce,En,"{","\\lbrace"),X(se,Ce,We,"}","\\rbrace"),X(se,Ce,En,"[","\\lbrack",!0),X(zt,Ce,st,"[","\\lbrack",!0),X(se,Ce,We,"]","\\rbrack",!0),X(zt,Ce,st,"]","\\rbrack",!0),X(se,Ce,En,"(","\\lparen",!0),X(se,Ce,We,")","\\rparen",!0),X(zt,Ce,st,"<","\\textless",!0),X(zt,Ce,st,">","\\textgreater",!0),X(se,Ce,En,"⌊","\\lfloor",!0),X(se,Ce,We,"⌋","\\rfloor",!0),X(se,Ce,En,"⌈","\\lceil",!0),X(se,Ce,We,"⌉","\\rceil",!0),X(se,Ce,st,"\\","\\backslash"),X(se,Ce,st,"∣","|"),X(se,Ce,st,"∣","\\vert"),X(zt,Ce,st,"|","\\textbar",!0),X(se,Ce,st,"∥","\\|"),X(se,Ce,st,"∥","\\Vert"),X(zt,Ce,st,"∥","\\textbardbl"),X(zt,Ce,st,"~","\\textasciitilde"),X(zt,Ce,st,"\\","\\textbackslash"),X(zt,Ce,st,"^","\\textasciicircum"),X(se,Ce,Je,"↑","\\uparrow",!0),X(se,Ce,Je,"⇑","\\Uparrow",!0),X(se,Ce,Je,"↓","\\downarrow",!0),X(se,Ce,Je,"⇓","\\Downarrow",!0),X(se,Ce,Je,"↕","\\updownarrow",!0),X(se,Ce,Je,"⇕","\\Updownarrow",!0),X(se,Ce,dn,"∐","\\coprod"),X(se,Ce,dn,"⋁","\\bigvee"),X(se,Ce,dn,"⋀","\\bigwedge"),X(se,Ce,dn,"⨄","\\biguplus"),X(se,Ce,dn,"⋂","\\bigcap"),X(se,Ce,dn,"⋃","\\bigcup"),X(se,Ce,dn,"∫","\\int"),X(se,Ce,dn,"∫","\\intop"),X(se,Ce,dn,"∬","\\iint"),X(se,Ce,dn,"∭","\\iiint"),X(se,Ce,dn,"∏","\\prod"),X(se,Ce,dn,"∑","\\sum"),X(se,Ce,dn,"⨂","\\bigotimes"),X(se,Ce,dn,"⨁","\\bigoplus"),X(se,Ce,dn,"⨀","\\bigodot"),X(se,Ce,dn,"∮","\\oint"),X(se,Ce,dn,"∯","\\oiint"),X(se,Ce,dn,"∰","\\oiiint"),X(se,Ce,dn,"⨆","\\bigsqcup"),X(se,Ce,dn,"∫","\\smallint"),X(zt,Ce,xt,"…","\\textellipsis"),X(se,Ce,xt,"…","\\mathellipsis"),X(zt,Ce,xt,"…","\\ldots",!0),X(se,Ce,xt,"…","\\ldots",!0),X(se,Ce,xt,"⋯","\\@cdots",!0),X(se,Ce,xt,"⋱","\\ddots",!0),X(se,Ce,st,"⋮","\\varvdots"),X(se,Ce,Ct,"ˊ","\\acute"),X(se,Ce,Ct,"ˋ","\\grave"),X(se,Ce,Ct,"¨","\\ddot"),X(se,Ce,Ct,"~","\\tilde"),X(se,Ce,Ct,"ˉ","\\bar"),X(se,Ce,Ct,"˘","\\breve"),X(se,Ce,Ct,"ˇ","\\check"),X(se,Ce,Ct,"^","\\hat"),X(se,Ce,Ct,"⃗","\\vec"),X(se,Ce,Ct,"˙","\\dot"),X(se,Ce,Ct,"˚","\\mathring"),X(se,Ce,Pt,"","\\@imath"),X(se,Ce,Pt,"","\\@jmath"),X(se,Ce,st,"ı","ı"),X(se,Ce,st,"ȷ","ȷ"),X(zt,Ce,st,"ı","\\i",!0),X(zt,Ce,st,"ȷ","\\j",!0),X(zt,Ce,st,"ß","\\ss",!0),X(zt,Ce,st,"æ","\\ae",!0),X(zt,Ce,st,"œ","\\oe",!0),X(zt,Ce,st,"ø","\\o",!0),X(zt,Ce,st,"Æ","\\AE",!0),X(zt,Ce,st,"Œ","\\OE",!0),X(zt,Ce,st,"Ø","\\O",!0),X(zt,Ce,Ct,"ˊ","\\'"),X(zt,Ce,Ct,"ˋ","\\`"),X(zt,Ce,Ct,"ˆ","\\^"),X(zt,Ce,Ct,"˜","\\~"),X(zt,Ce,Ct,"ˉ","\\="),X(zt,Ce,Ct,"˘","\\u"),X(zt,Ce,Ct,"˙","\\."),X(zt,Ce,Ct,"¸","\\c"),X(zt,Ce,Ct,"˚","\\r"),X(zt,Ce,Ct,"ˇ","\\v"),X(zt,Ce,Ct,"¨",'\\"'),X(zt,Ce,Ct,"˝","\\H"),X(zt,Ce,Ct,"◯","\\textcircled");var nr={"--":!0,"---":!0,"``":!0,"''":!0};X(zt,Ce,st,"–","--",!0),X(zt,Ce,st,"–","\\textendash"),X(zt,Ce,st,"—","---",!0),X(zt,Ce,st,"—","\\textemdash"),X(zt,Ce,st,"‘","`",!0),X(zt,Ce,st,"‘","\\textquoteleft"),X(zt,Ce,st,"’","'",!0),X(zt,Ce,st,"’","\\textquoteright"),X(zt,Ce,st,"“","``",!0),X(zt,Ce,st,"“","\\textquotedblleft"),X(zt,Ce,st,"”","''",!0),X(zt,Ce,st,"”","\\textquotedblright"),X(se,Ce,st,"°","\\degree",!0),X(zt,Ce,st,"°","\\degree"),X(zt,Ce,st,"°","\\textdegree",!0),X(se,Ce,st,"£","\\pounds"),X(se,Ce,st,"£","\\mathsterling",!0),X(zt,Ce,st,"£","\\pounds"),X(zt,Ce,st,"£","\\textsterling",!0),X(se,ce,st,"✠","\\maltese"),X(zt,ce,st,"✠","\\maltese");for(var he='0123456789/@."',Ze=0;Ze<he.length;Ze++){var ft=he.charAt(Ze);X(se,Ce,st,ft,ft)}for(var yt='0123456789!@*()-=+";:?/.,',ct=0;ct<yt.length;ct++){var Ht=yt.charAt(ct);X(zt,Ce,st,Ht,Ht)}for(var $t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",cn=0;cn<$t.length;cn++){var mn=$t.charAt(cn);X(se,Ce,Pt,mn,mn),X(zt,Ce,st,mn,mn)}X(se,ce,st,"C","ℂ"),X(zt,ce,st,"C","ℂ"),X(se,ce,st,"H","ℍ"),X(zt,ce,st,"H","ℍ"),X(se,ce,st,"N","ℕ"),X(zt,ce,st,"N","ℕ"),X(se,ce,st,"P","ℙ"),X(zt,ce,st,"P","ℙ"),X(se,ce,st,"Q","ℚ"),X(zt,ce,st,"Q","ℚ"),X(se,ce,st,"R","ℝ"),X(zt,ce,st,"R","ℝ"),X(se,ce,st,"Z","ℤ"),X(zt,ce,st,"Z","ℤ"),X(se,Ce,Pt,"h","ℎ"),X(zt,Ce,Pt,"h","ℎ");for(var nn="",Fn=0;Fn<$t.length;Fn++){var on=$t.charAt(Fn);nn=String.fromCharCode(55349,56320+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56372+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56424+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56580+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56736+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56788+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56840+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56944+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),Fn<26&&(nn=String.fromCharCode(55349,56632+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn),nn=String.fromCharCode(55349,56476+Fn),X(se,Ce,Pt,on,nn),X(zt,Ce,st,on,nn))}nn="𝕜",X(se,Ce,Pt,"k",nn),X(zt,Ce,st,"k",nn);for(var ni=0;ni<10;ni++){var xi=ni.toString();nn=String.fromCharCode(55349,57294+ni),X(se,Ce,Pt,xi,nn),X(zt,Ce,st,xi,nn),nn=String.fromCharCode(55349,57314+ni),X(se,Ce,Pt,xi,nn),X(zt,Ce,st,xi,nn),nn=String.fromCharCode(55349,57324+ni),X(se,Ce,Pt,xi,nn),X(zt,Ce,st,xi,nn),nn=String.fromCharCode(55349,57334+ni),X(se,Ce,Pt,xi,nn),X(zt,Ce,st,xi,nn)}for(var Mi="ÐÞþ",ur=0;ur<Mi.length;ur++){var _i=Mi.charAt(ur);X(se,Ce,Pt,_i,_i),X(zt,Ce,st,_i,_i)}var Xn=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],ys=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],rr=function(D,R){var k=D.charCodeAt(0),U=D.charCodeAt(1),K=(k-55296)*1024+(U-56320)+65536,ie=R==="math"?0:1;if(119808<=K&&K<120484){var ye=Math.floor((K-119808)/26);return[Xn[ye][2],Xn[ye][ie]]}else if(120782<=K&&K<=120831){var Fe=Math.floor((K-120782)/10);return[ys[Fe][2],ys[Fe][ie]]}else{if(K===120485||K===120486)return[Xn[0][2],Xn[0][ie]];if(120486<K&&K<120782)return["",""];throw new s("Unsupported character: "+D)}},Hs=function(D,R,k){return ai[k][D]&&ai[k][D].replace&&(D=ai[k][D].replace),{value:D,metrics:tt(D,R,k)}},Bi=function(D,R,k,U,K){var ie=Hs(D,R,k),ye=ie.metrics;D=ie.value;var Fe;if(ye){var Ye=ye.italic;(k==="text"||U&&U.font==="mathit")&&(Ye=0),Fe=new it(D,ye.height,ye.depth,Ye,ye.skew,ye.width,K)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+D+"' in style '"+R+"' and mode '"+k+"'")),Fe=new it(D,0,0,0,0,0,K);if(U){Fe.maxFontSize=U.sizeMultiplier,U.style.isTight()&&Fe.classes.push("mtight");var ut=U.getColor();ut&&(Fe.style.color=ut)}return Fe},Gs=function(D,R,k,U){return U===void 0&&(U=[]),k.font==="boldsymbol"&&Hs(D,"Main-Bold",R).metrics?Bi(D,"Main-Bold",R,k,U.concat(["mathbf"])):D==="\\"||ai[R][D].font==="main"?Bi(D,"Main-Regular",R,k,U):Bi(D,"AMS-Regular",R,k,U.concat(["amsrm"]))},fd=function(D,R,k,U,K){return K!=="textord"&&Hs(D,"Math-BoldItalic",R).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Mr=function(D,R,k){var U=D.mode,K=D.text,ie=["mord"],ye=U==="math"||U==="text"&&R.font,Fe=ye?R.font:R.fontFamily;if(K.charCodeAt(0)===55349){var Ye=rr(K,U),ut=Ye[0],Dt=Ye[1];return Bi(K,ut,U,R,ie.concat(Dt))}else if(Fe){var Vt,Qt;if(Fe==="boldsymbol"){var Zt=fd(K,U,R,ie,k);Vt=Zt.fontName,Qt=[Zt.fontClass]}else ye?(Vt=Lt[Fe].fontName,Qt=[Fe]):(Vt=ze(Fe,R.fontWeight,R.fontShape),Qt=[Fe,R.fontWeight,R.fontShape]);if(Hs(K,Vt,U).metrics)return Bi(K,Vt,U,R,ie.concat(Qt));if(nr.hasOwnProperty(K)&&Vt.substr(0,10)==="Typewriter"){for(var vn=[],yn=0;yn<K.length;yn++)vn.push(Bi(K[yn],Vt,U,R,ie.concat(Qt)));return Ip(vn)}}if(k==="mathord")return Bi(K,"Math-Italic",U,R,ie.concat(["mathnormal"]));if(k==="textord"){var Wn=ai[U][K]&&ai[U][K].font;if(Wn==="ams"){var Zn=ze("amsrm",R.fontWeight,R.fontShape);return Bi(K,Zn,U,R,ie.concat("amsrm",R.fontWeight,R.fontShape))}else if(Wn==="main"||!Wn){var oi=ze("textrm",R.fontWeight,R.fontShape);return Bi(K,oi,U,R,ie.concat(R.fontWeight,R.fontShape))}else{var cr=ze(Wn,R.fontWeight,R.fontShape);return Bi(K,cr,U,R,ie.concat(cr,R.fontWeight,R.fontShape))}}else throw new Error("unexpected type: "+k+" in makeOrd")},ya=function(D,R){if(le(D.classes)!==le(R.classes)||D.skew!==R.skew||D.maxFontSize!==R.maxFontSize)return!1;if(D.classes.length===1){var k=D.classes[0];if(k==="mbin"||k==="mord")return!1}for(var U in D.style)if(D.style.hasOwnProperty(U)&&D.style[U]!==R.style[U])return!1;for(var K in R.style)if(R.style.hasOwnProperty(K)&&D.style[K]!==R.style[K])return!1;return!0},aa=function(D){for(var R=0;R<D.length-1;R++){var k=D[R],U=D[R+1];k instanceof it&&U instanceof it&&ya(k,U)&&(k.text+=U.text,k.height=Math.max(k.height,U.height),k.depth=Math.max(k.depth,U.depth),k.italic=U.italic,D.splice(R+1,1),R--)}return D},ns=function(D){for(var R=0,k=0,U=0,K=0;K<D.children.length;K++){var ie=D.children[K];ie.height>R&&(R=ie.height),ie.depth>k&&(k=ie.depth),ie.maxFontSize>U&&(U=ie.maxFontSize)}D.height=R,D.depth=k,D.maxFontSize=U},sr=function(D,R,k,U){var K=new Ae(D,R,k,U);return ns(K),K},hd=function(D,R,k,U){return new Ae(D,R,k,U)},wc=function(D,R,k){var U=sr([D],[],R);return U.height=Math.max(k||R.fontMetrics().defaultRuleThickness,R.minRuleThickness),U.style.borderBottomWidth=$(U.height),U.maxFontSize=1,U},ui=function(D,R,k,U){var K=new dt(D,R,k,U);return ns(K),K},Ip=function(D){var R=new Xe(D);return ns(R),R},Se=function(D,R){return D instanceof Xe?sr([],[D],R):D},xe=function(D){if(D.positionType==="individualShift"){for(var R=D.children,k=[R[0]],U=-R[0].shift-R[0].elem.depth,K=U,ie=1;ie<R.length;ie++){var ye=-R[ie].shift-K-R[ie].elem.depth,Fe=ye-(R[ie-1].elem.height+R[ie-1].elem.depth);K=K+ye,k.push({type:"kern",size:Fe}),k.push(R[ie])}return{children:k,depth:U}}var Ye;if(D.positionType==="top"){for(var ut=D.positionData,Dt=0;Dt<D.children.length;Dt++){var Vt=D.children[Dt];ut-=Vt.type==="kern"?Vt.size:Vt.elem.height+Vt.elem.depth}Ye=ut}else if(D.positionType==="bottom")Ye=-D.positionData;else{var Qt=D.children[0];if(Qt.type!=="elem")throw new Error('First child must have type "elem".');if(D.positionType==="shift")Ye=-Qt.elem.depth-D.positionData;else if(D.positionType==="firstBaseline")Ye=-Qt.elem.depth;else throw new Error("Invalid positionType "+D.positionType+".")}return{children:D.children,depth:Ye}},Ue=function(D,R){for(var k=xe(D),U=k.children,K=k.depth,ie=0,ye=0;ye<U.length;ye++){var Fe=U[ye];if(Fe.type==="elem"){var Ye=Fe.elem;ie=Math.max(ie,Ye.maxFontSize,Ye.height)}}ie+=2;var ut=sr(["pstrut"],[]);ut.style.height=$(ie);for(var Dt=[],Vt=K,Qt=K,Zt=K,vn=0;vn<U.length;vn++){var yn=U[vn];if(yn.type==="kern")Zt+=yn.size;else{var Wn=yn.elem,Zn=yn.wrapperClasses||[],oi=yn.wrapperStyle||{},cr=sr(Zn,[ut,Wn],void 0,oi);cr.style.top=$(-ie-Zt-Wn.depth),yn.marginLeft&&(cr.style.marginLeft=yn.marginLeft),yn.marginRight&&(cr.style.marginRight=yn.marginRight),Dt.push(cr),Zt+=Wn.height+Wn.depth}Vt=Math.min(Vt,Zt),Qt=Math.max(Qt,Zt)}var Tr=sr(["vlist"],Dt);Tr.style.height=$(Qt);var rs;if(Vt<0){var br=sr([],[]),Er=sr(["vlist"],[br]);Er.style.height=$(-Vt);var Ss=sr(["vlist-s"],[new it("​")]);rs=[sr(["vlist-r"],[Tr,Ss]),sr(["vlist-r"],[Er])]}else rs=[sr(["vlist-r"],[Tr])];var Wr=sr(["vlist-t"],rs);return rs.length===2&&Wr.classes.push("vlist-t2"),Wr.height=Qt,Wr.depth=-Vt,Wr},Pe=function(D,R){var k=sr(["mspace"],[],R),U=lt(D,R);return k.style.marginRight=$(U),k},ze=function(D,R,k){var U="";switch(D){case"amsrm":U="AMS";break;case"textrm":U="Main";break;case"textsf":U="SansSerif";break;case"texttt":U="Typewriter";break;default:U=D}var K;return R==="textbf"&&k==="textit"?K="BoldItalic":R==="textbf"?K="Bold":R==="textit"?K="Italic":K="Regular",U+"-"+K},Lt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Ot={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Ln=function(D,R){var k=Ot[D],U=k[0],K=k[1],ie=k[2],ye=new Ft(U),Fe=new wt([ye],{width:$(K),height:$(ie),style:"width:"+$(K),viewBox:"0 0 "+1e3*K+" "+1e3*ie,preserveAspectRatio:"xMinYMin"}),Ye=hd(["overlay"],[Fe],R);return Ye.height=ie,Ye.style.height=$(ie),Ye.style.width=$(K),Ye},ot={fontMap:Lt,makeSymbol:Bi,mathsym:Gs,makeSpan:sr,makeSvgSpan:hd,makeLineSpan:wc,makeAnchor:ui,makeFragment:Ip,wrapFragment:Se,makeVList:Ue,makeOrd:Mr,makeGlue:Pe,staticSvg:Ln,svgData:Ot,tryCombineChars:aa},un={number:3,unit:"mu"},Gn={number:4,unit:"mu"},tn={number:5,unit:"mu"},ii={mord:{mop:un,mbin:Gn,mrel:tn,minner:un},mop:{mord:un,mop:un,mrel:tn,minner:un},mbin:{mord:Gn,mop:Gn,mopen:Gn,minner:Gn},mrel:{mord:tn,mop:tn,mopen:tn,minner:tn},mopen:{},mclose:{mop:un,mbin:Gn,mrel:tn,minner:un},mpunct:{mord:un,mop:un,mrel:tn,mopen:un,mclose:un,mpunct:un,minner:un},minner:{mord:un,mop:un,mbin:Gn,mrel:tn,mopen:un,mpunct:un,minner:un}},zn={mord:{mop:un},mop:{mord:un,mop:un},mbin:{},mrel:{},mopen:{},mclose:{mop:un},mpunct:{},minner:{mop:un}},si={},$n={},Pr={};function rn(re){for(var D=re.type,R=re.names,k=re.props,U=re.handler,K=re.htmlBuilder,ie=re.mathmlBuilder,ye={type:D,numArgs:k.numArgs,argTypes:k.argTypes,allowedInArgument:!!k.allowedInArgument,allowedInText:!!k.allowedInText,allowedInMath:k.allowedInMath===void 0?!0:k.allowedInMath,numOptionalArgs:k.numOptionalArgs||0,infix:!!k.infix,primitive:!!k.primitive,handler:U},Fe=0;Fe<R.length;++Fe)si[R[Fe]]=ye;D&&(K&&($n[D]=K),ie&&(Pr[D]=ie))}function Di(re){var D=re.type,R=re.htmlBuilder,k=re.mathmlBuilder;rn({type:D,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:R,mathmlBuilder:k})}var Gi=function(D){return D.type==="ordgroup"&&D.body.length===1?D.body[0]:D},yr=function(D){return D.type==="ordgroup"?D.body:[D]},is=ot.makeSpan,Lf=["leftmost","mbin","mopen","mrel","mop","mpunct"],CT=["rightmost","mrel","mclose","mpunct"],WA={display:N.DISPLAY,text:N.TEXT,script:N.SCRIPT,scriptscript:N.SCRIPTSCRIPT},Voe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ba=function(D,R,k,U){U===void 0&&(U=[null,null]);for(var K=[],ie=0;ie<D.length;ie++){var ye=lr(D[ie],R);if(ye instanceof Xe){var Fe=ye.children;K.push.apply(K,Fe)}else K.push(ye)}if(ot.tryCombineChars(K),!k)return K;var Ye=R;if(D.length===1){var ut=D[0];ut.type==="sizing"?Ye=R.havingSize(ut.size):ut.type==="styling"&&(Ye=R.havingStyle(WA[ut.style]))}var Dt=is([U[0]||"leftmost"],[],R),Vt=is([U[1]||"rightmost"],[],R),Qt=k==="root";return VB(K,function(Zt,vn){var yn=vn.classes[0],Wn=Zt.classes[0];yn==="mbin"&&g.contains(CT,Wn)?vn.classes[0]="mord":Wn==="mbin"&&g.contains(Lf,yn)&&(Zt.classes[0]="mord")},{node:Dt},Vt,Qt),VB(K,function(Zt,vn){var yn=MT(vn),Wn=MT(Zt),Zn=yn&&Wn?Zt.hasClass("mtight")?zn[yn][Wn]:ii[yn][Wn]:null;if(Zn)return ot.makeGlue(Zn,Ye)},{node:Dt},Vt,Qt),K},VB=function re(D,R,k,U,K){U&&D.push(U);for(var ie=0;ie<D.length;ie++){var ye=D[ie],Fe=HB(ye);if(Fe){re(Fe.children,R,k,null,K);continue}var Ye=!ye.hasClass("mspace");if(Ye){var ut=R(ye,k.node);ut&&(k.insertAfter?k.insertAfter(ut):(D.unshift(ut),ie++))}Ye?k.node=ye:K&&ye.hasClass("newline")&&(k.node=is(["leftmost"])),k.insertAfter=function(Dt){return function(Vt){D.splice(Dt+1,0,Vt),ie++}}(ie)}U&&D.pop()},HB=function(D){return D instanceof Xe||D instanceof dt||D instanceof Ae&&D.hasClass("enclosing")?D:null},Hoe=function re(D,R){var k=HB(D);if(k){var U=k.children;if(U.length){if(R==="right")return re(U[U.length-1],"right");if(R==="left")return re(U[0],"left")}}return D},MT=function(D,R){return D?(R&&(D=Hoe(D,R)),Voe[D.classes[0]]||null):null},Ny=function(D,R){var k=["nulldelimiter"].concat(D.baseSizingClasses());return is(R.concat(k))},lr=function(D,R,k){if(!D)return is();if($n[D.type]){var U=$n[D.type](D,R);if(k&&R.size!==k.size){U=is(R.sizingClasses(k),[U],R);var K=R.sizeMultiplier/k.sizeMultiplier;U.height*=K,U.depth*=K}return U}else throw new s("Got group of unknown type: '"+D.type+"'")};function qA(re,D){var R=is(["base"],re,D),k=is(["strut"]);return k.style.height=$(R.height+R.depth),R.depth&&(k.style.verticalAlign=$(-R.depth)),R.children.unshift(k),R}function TT(re,D){var R=null;re.length===1&&re[0].type==="tag"&&(R=re[0].tag,re=re[0].body);var k=ba(re,D,"root"),U;k.length===2&&k[1].hasClass("tag")&&(U=k.pop());for(var K=[],ie=[],ye=0;ye<k.length;ye++)if(ie.push(k[ye]),k[ye].hasClass("mbin")||k[ye].hasClass("mrel")||k[ye].hasClass("allowbreak")){for(var Fe=!1;ye<k.length-1&&k[ye+1].hasClass("mspace")&&!k[ye+1].hasClass("newline");)ye++,ie.push(k[ye]),k[ye].hasClass("nobreak")&&(Fe=!0);Fe||(K.push(qA(ie,D)),ie=[])}else k[ye].hasClass("newline")&&(ie.pop(),ie.length>0&&(K.push(qA(ie,D)),ie=[]),K.push(k[ye]));ie.length>0&&K.push(qA(ie,D));var Ye;R?(Ye=qA(ba(R,D,!0)),Ye.classes=["tag"],K.push(Ye)):U&&K.push(U);var ut=is(["katex-html"],K);if(ut.setAttribute("aria-hidden","true"),Ye){var Dt=Ye.children[0];Dt.style.height=$(ut.height+ut.depth),ut.depth&&(Dt.style.verticalAlign=$(-ut.depth))}return ut}function GB(re){return new Xe(re)}var Rl=function(){function re(R,k,U){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=R,this.attributes={},this.children=k||[],this.classes=U||[]}var D=re.prototype;return D.setAttribute=function(k,U){this.attributes[k]=U},D.getAttribute=function(k){return this.attributes[k]},D.toNode=function(){var k=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var U in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,U)&&k.setAttribute(U,this.attributes[U]);this.classes.length>0&&(k.className=le(this.classes));for(var K=0;K<this.children.length;K++)k.appendChild(this.children[K].toNode());return k},D.toMarkup=function(){var k="<"+this.type;for(var U in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,U)&&(k+=" "+U+'="',k+=g.escape(this.attributes[U]),k+='"');this.classes.length>0&&(k+=' class ="'+g.escape(le(this.classes))+'"'),k+=">";for(var K=0;K<this.children.length;K++)k+=this.children[K].toMarkup();return k+="</"+this.type+">",k},D.toText=function(){return this.children.map(function(k){return k.toText()}).join("")},re}(),Oy=function(){function re(R){this.text=void 0,this.text=R}var D=re.prototype;return D.toNode=function(){return document.createTextNode(this.text)},D.toMarkup=function(){return g.escape(this.toText())},D.toText=function(){return this.text},re}(),Goe=function(){function re(R){this.width=void 0,this.character=void 0,this.width=R,R>=.05555&&R<=.05556?this.character=" ":R>=.1666&&R<=.1667?this.character=" ":R>=.2222&&R<=.2223?this.character=" ":R>=.2777&&R<=.2778?this.character="  ":R>=-.05556&&R<=-.05555?this.character=" ⁣":R>=-.1667&&R<=-.1666?this.character=" ⁣":R>=-.2223&&R<=-.2222?this.character=" ⁣":R>=-.2778&&R<=-.2777?this.character=" ⁣":this.character=null}var D=re.prototype;return D.toNode=function(){if(this.character)return document.createTextNode(this.character);var k=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return k.setAttribute("width",$(this.width)),k},D.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+$(this.width)+'"/>'},D.toText=function(){return this.character?this.character:" "},re}(),sn={MathNode:Rl,TextNode:Oy,SpaceNode:Goe,newDocumentFragment:GB},Pl=function(D,R,k){return ai[R][D]&&ai[R][D].replace&&D.charCodeAt(0)!==55349&&!(nr.hasOwnProperty(D)&&k&&(k.fontFamily&&k.fontFamily.substr(4,2)==="tt"||k.font&&k.font.substr(4,2)==="tt"))&&(D=ai[R][D].replace),new sn.TextNode(D)},ET=function(D){return D.length===1?D[0]:new sn.MathNode("mrow",D)},IT=function(D,R){if(R.fontFamily==="texttt")return"monospace";if(R.fontFamily==="textsf")return R.fontShape==="textit"&&R.fontWeight==="textbf"?"sans-serif-bold-italic":R.fontShape==="textit"?"sans-serif-italic":R.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(R.fontShape==="textit"&&R.fontWeight==="textbf")return"bold-italic";if(R.fontShape==="textit")return"italic";if(R.fontWeight==="textbf")return"bold";var k=R.font;if(!k||k==="mathnormal")return null;var U=D.mode;if(k==="mathit")return"italic";if(k==="boldsymbol")return D.type==="textord"?"bold":"bold-italic";if(k==="mathbf")return"bold";if(k==="mathbb")return"double-struck";if(k==="mathfrak")return"fraktur";if(k==="mathscr"||k==="mathcal")return"script";if(k==="mathsf")return"sans-serif";if(k==="mathtt")return"monospace";var K=D.text;if(g.contains(["\\imath","\\jmath"],K))return null;ai[U][K]&&ai[U][K].replace&&(K=ai[U][K].replace);var ie=ot.fontMap[k].fontName;return tt(K,ie,U)?ot.fontMap[k].variant:null},il=function(D,R,k){if(D.length===1){var U=Ur(D[0],R);return k&&U instanceof Rl&&U.type==="mo"&&(U.setAttribute("lspace","0em"),U.setAttribute("rspace","0em")),[U]}for(var K=[],ie,ye=0;ye<D.length;ye++){var Fe=Ur(D[ye],R);if(Fe instanceof Rl&&ie instanceof Rl){if(Fe.type==="mtext"&&ie.type==="mtext"&&Fe.getAttribute("mathvariant")===ie.getAttribute("mathvariant")){var Ye;(Ye=ie.children).push.apply(Ye,Fe.children);continue}else if(Fe.type==="mn"&&ie.type==="mn"){var ut;(ut=ie.children).push.apply(ut,Fe.children);continue}else if(Fe.type==="mi"&&Fe.children.length===1&&ie.type==="mn"){var Dt=Fe.children[0];if(Dt instanceof Oy&&Dt.text==="."){var Vt;(Vt=ie.children).push.apply(Vt,Fe.children);continue}}else if(ie.type==="mi"&&ie.children.length===1){var Qt=ie.children[0];if(Qt instanceof Oy&&Qt.text==="̸"&&(Fe.type==="mo"||Fe.type==="mi"||Fe.type==="mn")){var Zt=Fe.children[0];Zt instanceof Oy&&Zt.text.length>0&&(Zt.text=Zt.text.slice(0,1)+"̸"+Zt.text.slice(1),K.pop())}}}K.push(Fe),ie=Fe}return K},kf=function(D,R,k){return ET(il(D,R,k))},Ur=function(D,R){if(!D)return new sn.MathNode("mrow");if(Pr[D.type]){var k=Pr[D.type](D,R);return k}else throw new s("Got group of unknown type: '"+D.type+"'")};function WB(re,D,R,k,U){var K=il(re,R),ie;K.length===1&&K[0]instanceof Rl&&g.contains(["mrow","mtable"],K[0].type)?ie=K[0]:ie=new sn.MathNode("mrow",K);var ye=new sn.MathNode("annotation",[new sn.TextNode(D)]);ye.setAttribute("encoding","application/x-tex");var Fe=new sn.MathNode("semantics",[ie,ye]),Ye=new sn.MathNode("math",[Fe]);Ye.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),k&&Ye.setAttribute("display","block");var ut=U?"katex":"katex-mathml";return ot.makeSpan([ut],[Ye])}var qB=function(D){return new bt({style:D.displayMode?N.DISPLAY:N.TEXT,maxSize:D.maxSize,minRuleThickness:D.minRuleThickness})},KB=function(D,R){if(R.displayMode){var k=["katex-display"];R.leqno&&k.push("leqno"),R.fleqn&&k.push("fleqn"),D=ot.makeSpan(k,[D])}return D},Woe=function(D,R,k){var U=qB(k),K;if(k.output==="mathml")return WB(D,R,U,k.displayMode,!0);if(k.output==="html"){var ie=TT(D,U);K=ot.makeSpan(["katex"],[ie])}else{var ye=WB(D,R,U,k.displayMode,!1),Fe=TT(D,U);K=ot.makeSpan(["katex"],[ye,Fe])}return KB(K,k)},qoe=function(D,R,k){var U=qB(k),K=TT(D,U),ie=ot.makeSpan(["katex"],[K]);return KB(ie,k)},Koe={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Yoe=function(D){var R=new sn.MathNode("mo",[new sn.TextNode(Koe[D.replace(/^\\/,"")])]);return R.setAttribute("stretchy","true"),R},Xoe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},joe=function(D){return D.type==="ordgroup"?D.body.length:1},$oe=function(D,R){function k(){var Fe=4e5,Ye=D.label.substr(1);if(g.contains(["widehat","widecheck","widetilde","utilde"],Ye)){var ut=D,Dt=joe(ut.base),Vt,Qt,Zt;if(Dt>5)Ye==="widehat"||Ye==="widecheck"?(Vt=420,Fe=2364,Zt=.42,Qt=Ye+"4"):(Vt=312,Fe=2340,Zt=.34,Qt="tilde4");else{var vn=[1,1,2,2,3,3][Dt];Ye==="widehat"||Ye==="widecheck"?(Fe=[0,1062,2364,2364,2364][vn],Vt=[0,239,300,360,420][vn],Zt=[0,.24,.3,.3,.36,.42][vn],Qt=Ye+vn):(Fe=[0,600,1033,2339,2340][vn],Vt=[0,260,286,306,312][vn],Zt=[0,.26,.286,.3,.306,.34][vn],Qt="tilde"+vn)}var yn=new Ft(Qt),Wn=new wt([yn],{width:"100%",height:$(Zt),viewBox:"0 0 "+Fe+" "+Vt,preserveAspectRatio:"none"});return{span:ot.makeSvgSpan([],[Wn],R),minWidth:0,height:Zt}}else{var Zn=[],oi=Xoe[Ye],cr=oi[0],Tr=oi[1],rs=oi[2],br=rs/1e3,Er=cr.length,Ss,Wr;if(Er===1){var rl=oi[3];Ss=["hide-tail"],Wr=[rl]}else if(Er===2)Ss=["halfarrow-left","halfarrow-right"],Wr=["xMinYMin","xMaxYMin"];else if(Er===3)Ss=["brace-left","brace-center","brace-right"],Wr=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Er+" children.");for(var sl=0;sl<Er;sl++){var Nf=new Ft(cr[sl]),yu=new wt([Nf],{width:"400em",height:$(br),viewBox:"0 0 "+Fe+" "+rs,preserveAspectRatio:Wr[sl]+" slice"}),al=ot.makeSvgSpan([Ss[sl]],[yu],R);if(Er===1)return{span:al,minWidth:Tr,height:br};al.style.height=$(br),Zn.push(al)}return{span:ot.makeSpan(["stretchy"],Zn,R),minWidth:Tr,height:br}}}var U=k(),K=U.span,ie=U.minWidth,ye=U.height;return K.height=ye,K.style.height=$(ye),ie>0&&(K.style.minWidth=$(ie)),K},Qoe=function(D,R,k,U,K){var ie,ye=D.height+D.depth+k+U;if(/fbox|color|angl/.test(R)){if(ie=ot.makeSpan(["stretchy",R],[],K),R==="fbox"){var Fe=K.color&&K.getColor();Fe&&(ie.style.borderColor=Fe)}}else{var Ye=[];/^[bx]cancel$/.test(R)&&Ye.push(new Rt({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(R)&&Ye.push(new Rt({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var ut=new wt(Ye,{width:"100%",height:$(ye)});ie=ot.makeSvgSpan([],[ut],K)}return ie.height=ye,ie.style.height=$(ye),ie},pd={encloseSpan:Qoe,mathMLnode:Yoe,svgSpan:$oe};function Ti(re,D){if(!re||re.type!==D)throw new Error("Expected node of type "+D+", but got "+(re?"node of type "+re.type:String(re)));return re}function DT(re){var D=KA(re);if(!D)throw new Error("Expected node of symbol group type, but got "+(re?"node of type "+re.type:String(re)));return D}function KA(re){return re&&(re.type==="atom"||Pn.hasOwnProperty(re.type))?re:null}var RT=function(D,R){var k,U,K;D&&D.type==="supsub"?(U=Ti(D.base,"accent"),k=U.base,D.base=k,K=hn(lr(D,R)),D.base=U):(U=Ti(D,"accent"),k=U.base);var ie=lr(k,R.havingCrampedStyle()),ye=U.isShifty&&g.isCharacterBox(k),Fe=0;if(ye){var Ye=g.getBaseElem(k),ut=lr(Ye,R.havingCrampedStyle());Fe=Wt(ut).skew}var Dt=U.label==="\\c",Vt=Dt?ie.height+ie.depth:Math.min(ie.height,R.fontMetrics().xHeight),Qt;if(U.isStretchy)Qt=pd.svgSpan(U,R),Qt=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ie},{type:"elem",elem:Qt,wrapperClasses:["svg-align"],wrapperStyle:Fe>0?{width:"calc(100% - "+$(2*Fe)+")",marginLeft:$(2*Fe)}:void 0}]},R);else{var Zt,vn;U.label==="\\vec"?(Zt=ot.staticSvg("vec",R),vn=ot.svgData.vec[1]):(Zt=ot.makeOrd({mode:U.mode,text:U.label},R,"textord"),Zt=Wt(Zt),Zt.italic=0,vn=Zt.width,Dt&&(Vt+=Zt.depth)),Qt=ot.makeSpan(["accent-body"],[Zt]);var yn=U.label==="\\textcircled";yn&&(Qt.classes.push("accent-full"),Vt=ie.height);var Wn=Fe;yn||(Wn-=vn/2),Qt.style.left=$(Wn),U.label==="\\textcircled"&&(Qt.style.top=".2em"),Qt=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ie},{type:"kern",size:-Vt},{type:"elem",elem:Qt}]},R)}var Zn=ot.makeSpan(["mord","accent"],[Qt],R);return K?(K.children[0]=Zn,K.height=Math.max(Zn.height,K.height),K.classes[0]="mord",K):Zn},YB=function(D,R){var k=D.isStretchy?pd.mathMLnode(D.label):new sn.MathNode("mo",[Pl(D.label,D.mode)]),U=new sn.MathNode("mover",[Ur(D.base,R),k]);return U.setAttribute("accent","true"),U},Zoe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(function(re){return"\\"+re}).join("|"));rn({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(D,R){var k=Gi(R[0]),U=!Zoe.test(D.funcName),K=!U||D.funcName==="\\widehat"||D.funcName==="\\widetilde"||D.funcName==="\\widecheck";return{type:"accent",mode:D.parser.mode,label:D.funcName,isStretchy:U,isShifty:K,base:k}},htmlBuilder:RT,mathmlBuilder:YB}),rn({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:function(D,R){var k=R[0],U=D.parser.mode;return U==="math"&&(D.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+D.funcName+" works only in text mode"),U="text"),{type:"accent",mode:U,label:D.funcName,isStretchy:!1,isShifty:!0,base:k}},htmlBuilder:RT,mathmlBuilder:YB}),rn({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0];return{type:"accentUnder",mode:k.mode,label:U,base:K}},htmlBuilder:function(D,R){var k=lr(D.base,R),U=pd.svgSpan(D,R),K=D.label==="\\utilde"?.12:0,ie=ot.makeVList({positionType:"top",positionData:k.height,children:[{type:"elem",elem:U,wrapperClasses:["svg-align"]},{type:"kern",size:K},{type:"elem",elem:k}]},R);return ot.makeSpan(["mord","accentunder"],[ie],R)},mathmlBuilder:function(D,R){var k=pd.mathMLnode(D.label),U=new sn.MathNode("munder",[Ur(D.base,R),k]);return U.setAttribute("accentunder","true"),U}});var YA=function(D){var R=new sn.MathNode("mpadded",D?[D]:[]);return R.setAttribute("width","+0.6em"),R.setAttribute("lspace","0.3em"),R};rn({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:function(D,R,k){var U=D.parser,K=D.funcName;return{type:"xArrow",mode:U.mode,label:K,body:R[0],below:k[0]}},htmlBuilder:function(D,R){var k=R.style,U=R.havingStyle(k.sup()),K=ot.wrapFragment(lr(D.body,U,R),R),ie=D.label.slice(0,2)==="\\x"?"x":"cd";K.classes.push(ie+"-arrow-pad");var ye;D.below&&(U=R.havingStyle(k.sub()),ye=ot.wrapFragment(lr(D.below,U,R),R),ye.classes.push(ie+"-arrow-pad"));var Fe=pd.svgSpan(D,R),Ye=-R.fontMetrics().axisHeight+.5*Fe.height,ut=-R.fontMetrics().axisHeight-.5*Fe.height-.111;(K.depth>.25||D.label==="\\xleftequilibrium")&&(ut-=K.depth);var Dt;if(ye){var Vt=-R.fontMetrics().axisHeight+ye.height+.5*Fe.height+.111;Dt=ot.makeVList({positionType:"individualShift",children:[{type:"elem",elem:K,shift:ut},{type:"elem",elem:Fe,shift:Ye},{type:"elem",elem:ye,shift:Vt}]},R)}else Dt=ot.makeVList({positionType:"individualShift",children:[{type:"elem",elem:K,shift:ut},{type:"elem",elem:Fe,shift:Ye}]},R);return Dt.children[0].children[0].children[1].classes.push("svg-align"),ot.makeSpan(["mrel","x-arrow"],[Dt],R)},mathmlBuilder:function(D,R){var k=pd.mathMLnode(D.label);k.setAttribute("minsize",D.label.charAt(0)==="x"?"1.75em":"3.0em");var U;if(D.body){var K=YA(Ur(D.body,R));if(D.below){var ie=YA(Ur(D.below,R));U=new sn.MathNode("munderover",[k,ie,K])}else U=new sn.MathNode("mover",[k,K])}else if(D.below){var ye=YA(Ur(D.below,R));U=new sn.MathNode("munder",[k,ye])}else U=YA(),U=new sn.MathNode("mover",[k,U]);return U}});var Joe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},XB=function(){return{type:"styling",body:[],mode:"math",style:"display"}},jB=function(D){return D.type==="textord"&&D.text==="@"},ele=function(D,R){return(D.type==="mathord"||D.type==="atom")&&D.text===R};function tle(re,D,R){var k=Joe[re];switch(k){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return R.callFunction(k,[D[0]],[D[1]]);case"\\uparrow":case"\\downarrow":{var U=R.callFunction("\\\\cdleft",[D[0]],[]),K={type:"atom",text:k,mode:"math",family:"rel"},ie=R.callFunction("\\Big",[K],[]),ye=R.callFunction("\\\\cdright",[D[1]],[]),Fe={type:"ordgroup",mode:"math",body:[U,ie,ye]};return R.callFunction("\\\\cdparent",[Fe],[])}case"\\\\cdlongequal":return R.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var Ye={type:"textord",text:"\\Vert",mode:"math"};return R.callFunction("\\Big",[Ye],[])}default:return{type:"textord",text:" ",mode:"math"}}}function nle(re){var D=[];for(re.gullet.beginGroup(),re.gullet.macros.set("\\cr","\\\\\\relax"),re.gullet.beginGroup();;){D.push(re.parseExpression(!1,"\\\\")),re.gullet.endGroup(),re.gullet.beginGroup();var R=re.fetch().text;if(R==="&"||R==="\\\\")re.consume();else if(R==="\\end"){D[D.length-1].length===0&&D.pop();break}else throw new s("Expected \\\\ or \\cr or \\end",re.nextToken)}for(var k=[],U=[k],K=0;K<D.length;K++){for(var ie=D[K],ye=XB(),Fe=0;Fe<ie.length;Fe++)if(!jB(ie[Fe]))ye.body.push(ie[Fe]);else{k.push(ye),Fe+=1;var Ye=DT(ie[Fe]).text,ut=new Array(2);if(ut[0]={type:"ordgroup",mode:"math",body:[]},ut[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(Ye)>-1))if("<>AV".indexOf(Ye)>-1)for(var Dt=0;Dt<2;Dt++){for(var Vt=!0,Qt=Fe+1;Qt<ie.length;Qt++){if(ele(ie[Qt],Ye)){Vt=!1,Fe=Qt;break}if(jB(ie[Qt]))throw new s("Missing a "+Ye+" character to complete a CD arrow.",ie[Qt]);ut[Dt].body.push(ie[Qt])}if(Vt)throw new s("Missing a "+Ye+" character to complete a CD arrow.",ie[Fe])}else throw new s('Expected one of "<>AV=|." after @',ie[Fe]);var Zt=tle(Ye,ut,re),vn={type:"styling",body:[Zt],mode:"math",style:"display"};k.push(vn),ye=XB()}K%2===0?k.push(ye):k.shift(),k=[],U.push(k)}re.gullet.endGroup(),re.gullet.endGroup();var yn=new Array(U[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:U,arraystretch:1,addJot:!0,rowGaps:[null],cols:yn,colSeparationType:"CD",hLinesBeforeRow:new Array(U.length+1).fill([])}}rn({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:function(D,R){var k=D.parser,U=D.funcName;return{type:"cdlabel",mode:k.mode,side:U.slice(4),label:R[0]}},htmlBuilder:function(D,R){var k=R.havingStyle(R.style.sup()),U=ot.wrapFragment(lr(D.label,k,R),R);return U.classes.push("cd-label-"+D.side),U.style.bottom=$(.8-U.depth),U.height=0,U.depth=0,U},mathmlBuilder:function(D,R){var k=new sn.MathNode("mrow",[Ur(D.label,R)]);return k=new sn.MathNode("mpadded",[k]),k.setAttribute("width","0"),D.side==="left"&&k.setAttribute("lspace","-1width"),k.setAttribute("voffset","0.7em"),k=new sn.MathNode("mstyle",[k]),k.setAttribute("displaystyle","false"),k.setAttribute("scriptlevel","1"),k}}),rn({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:function(D,R){var k=D.parser;return{type:"cdlabelparent",mode:k.mode,fragment:R[0]}},htmlBuilder:function(D,R){var k=ot.wrapFragment(lr(D.fragment,R),R);return k.classes.push("cd-vert-arrow"),k},mathmlBuilder:function(D,R){return new sn.MathNode("mrow",[Ur(D.fragment,R)])}}),rn({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(D,R){for(var k=D.parser,U=Ti(R[0],"ordgroup"),K=U.body,ie="",ye=0;ye<K.length;ye++){var Fe=Ti(K[ye],"textord");ie+=Fe.text}var Ye=parseInt(ie),ut;if(isNaN(Ye))throw new s("\\@char has non-numeric argument "+ie);if(Ye<0||Ye>=1114111)throw new s("\\@char with invalid code point "+ie);return Ye<=65535?ut=String.fromCharCode(Ye):(Ye-=65536,ut=String.fromCharCode((Ye>>10)+55296,(Ye&1023)+56320)),{type:"textord",mode:k.mode,text:ut}}});var $B=function(D,R){var k=ba(D.body,R.withColor(D.color),!1);return ot.makeFragment(k)},QB=function(D,R){var k=il(D.body,R.withColor(D.color)),U=new sn.MathNode("mstyle",k);return U.setAttribute("mathcolor",D.color),U};rn({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler:function(D,R){var k=D.parser,U=Ti(R[0],"color-token").color,K=R[1];return{type:"color",mode:k.mode,color:U,body:yr(K)}},htmlBuilder:$B,mathmlBuilder:QB}),rn({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler:function(D,R){var k=D.parser,U=D.breakOnTokenText,K=Ti(R[0],"color-token").color;k.gullet.macros.set("\\current@color",K);var ie=k.parseExpression(!0,U);return{type:"color",mode:k.mode,color:K,body:ie}},htmlBuilder:$B,mathmlBuilder:QB}),rn({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(D,R,k){var U=D.parser,K=k[0],ie=!U.settings.displayMode||!U.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:U.mode,newLine:ie,size:K&&Ti(K,"size").value}},htmlBuilder:function(D,R){var k=ot.makeSpan(["mspace"],[],R);return D.newLine&&(k.classes.push("newline"),D.size&&(k.style.marginTop=$(lt(D.size,R)))),k},mathmlBuilder:function(D,R){var k=new sn.MathNode("mspace");return D.newLine&&(k.setAttribute("linebreak","newline"),D.size&&k.setAttribute("height",$(lt(D.size,R)))),k}});var PT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},ZB=function(D){var R=D.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(R))throw new s("Expected a control sequence",D);return R},ile=function(D){var R=D.gullet.popToken();return R.text==="="&&(R=D.gullet.popToken(),R.text===" "&&(R=D.gullet.popToken())),R},JB=function(D,R,k,U){var K=D.gullet.macros.get(k.text);K==null&&(k.noexpand=!0,K={tokens:[k],numArgs:0,unexpandable:!D.gullet.isExpandable(k.text)}),D.gullet.macros.set(R,K,U)};rn({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler:function(D){var R=D.parser,k=D.funcName;R.consumeSpaces();var U=R.fetch();if(PT[U.text])return(k==="\\global"||k==="\\\\globallong")&&(U.text=PT[U.text]),Ti(R.parseFunction(),"internal");throw new s("Invalid token after macro prefix",U)}}),rn({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(D){var R=D.parser,k=D.funcName,U=R.gullet.popToken(),K=U.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(K))throw new s("Expected a control sequence",U);for(var ie=0,ye,Fe=[[]];R.gullet.future().text!=="{";)if(U=R.gullet.popToken(),U.text==="#"){if(R.gullet.future().text==="{"){ye=R.gullet.future(),Fe[ie].push("{");break}if(U=R.gullet.popToken(),!/^[1-9]$/.test(U.text))throw new s('Invalid argument number "'+U.text+'"');if(parseInt(U.text)!==ie+1)throw new s('Argument number "'+U.text+'" out of order');ie++,Fe.push([])}else{if(U.text==="EOF")throw new s("Expected a macro definition");Fe[ie].push(U.text)}var Ye=R.gullet.consumeArg(),ut=Ye.tokens;return ye&&ut.unshift(ye),(k==="\\edef"||k==="\\xdef")&&(ut=R.gullet.expandTokens(ut),ut.reverse()),R.gullet.macros.set(K,{tokens:ut,numArgs:ie,delimiters:Fe},k===PT[k]),{type:"internal",mode:R.mode}}}),rn({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(D){var R=D.parser,k=D.funcName,U=ZB(R.gullet.popToken());R.gullet.consumeSpaces();var K=ile(R);return JB(R,U,K,k==="\\\\globallet"),{type:"internal",mode:R.mode}}}),rn({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(D){var R=D.parser,k=D.funcName,U=ZB(R.gullet.popToken()),K=R.gullet.popToken(),ie=R.gullet.popToken();return JB(R,U,ie,k==="\\\\globalfuture"),R.gullet.pushToken(ie),R.gullet.pushToken(K),{type:"internal",mode:R.mode}}});var Uy=function(D,R,k){var U=ai.math[D]&&ai.math[D].replace,K=tt(U||D,R,k);if(!K)throw new Error("Unsupported symbol "+D+" and font size "+R+".");return K},LT=function(D,R,k,U){var K=k.havingBaseStyle(R),ie=ot.makeSpan(U.concat(K.sizingClasses(k)),[D],k),ye=K.sizeMultiplier/k.sizeMultiplier;return ie.height*=ye,ie.depth*=ye,ie.maxFontSize=K.sizeMultiplier,ie},eN=function(D,R,k){var U=R.havingBaseStyle(k),K=(1-R.sizeMultiplier/U.sizeMultiplier)*R.fontMetrics().axisHeight;D.classes.push("delimcenter"),D.style.top=$(K),D.height-=K,D.depth+=K},rle=function(D,R,k,U,K,ie){var ye=ot.makeSymbol(D,"Main-Regular",K,U),Fe=LT(ye,R,U,ie);return k&&eN(Fe,U,R),Fe},sle=function(D,R,k,U){return ot.makeSymbol(D,"Size"+R+"-Regular",k,U)},tN=function(D,R,k,U,K,ie){var ye=sle(D,R,K,U),Fe=LT(ot.makeSpan(["delimsizing","size"+R],[ye],U),N.TEXT,U,ie);return k&&eN(Fe,U,N.TEXT),Fe},kT=function(D,R,k){var U;R==="Size1-Regular"?U="delim-size1":U="delim-size4";var K=ot.makeSpan(["delimsizinginner",U],[ot.makeSpan([],[ot.makeSymbol(D,R,k)])]);return{type:"elem",elem:K}},FT=function(D,R,k){var U=ke["Size4-Regular"][D.charCodeAt(0)]?ke["Size4-Regular"][D.charCodeAt(0)][4]:ke["Size1-Regular"][D.charCodeAt(0)][4],K=new Ft("inner",oe(D,Math.round(1e3*R))),ie=new wt([K],{width:$(U),height:$(R),style:"width:"+$(U),viewBox:"0 0 "+1e3*U+" "+Math.round(1e3*R),preserveAspectRatio:"xMinYMin"}),ye=ot.makeSvgSpan([],[ie],k);return ye.height=R,ye.style.height=$(R),ye.style.width=$(U),{type:"elem",elem:ye}},BT=.008,XA={type:"kern",size:-1*BT},ale=["|","\\lvert","\\rvert","\\vert"],ole=["\\|","\\lVert","\\rVert","\\Vert"],nN=function(D,R,k,U,K,ie){var ye,Fe,Ye,ut;ye=Ye=ut=D,Fe=null;var Dt="Size1-Regular";D==="\\uparrow"?Ye=ut="⏐":D==="\\Uparrow"?Ye=ut="‖":D==="\\downarrow"?ye=Ye="⏐":D==="\\Downarrow"?ye=Ye="‖":D==="\\updownarrow"?(ye="\\uparrow",Ye="⏐",ut="\\downarrow"):D==="\\Updownarrow"?(ye="\\Uparrow",Ye="‖",ut="\\Downarrow"):g.contains(ale,D)?Ye="∣":g.contains(ole,D)?Ye="∥":D==="["||D==="\\lbrack"?(ye="⎡",Ye="⎢",ut="⎣",Dt="Size4-Regular"):D==="]"||D==="\\rbrack"?(ye="⎤",Ye="⎥",ut="⎦",Dt="Size4-Regular"):D==="\\lfloor"||D==="⌊"?(Ye=ye="⎢",ut="⎣",Dt="Size4-Regular"):D==="\\lceil"||D==="⌈"?(ye="⎡",Ye=ut="⎢",Dt="Size4-Regular"):D==="\\rfloor"||D==="⌋"?(Ye=ye="⎥",ut="⎦",Dt="Size4-Regular"):D==="\\rceil"||D==="⌉"?(ye="⎤",Ye=ut="⎥",Dt="Size4-Regular"):D==="("||D==="\\lparen"?(ye="⎛",Ye="⎜",ut="⎝",Dt="Size4-Regular"):D===")"||D==="\\rparen"?(ye="⎞",Ye="⎟",ut="⎠",Dt="Size4-Regular"):D==="\\{"||D==="\\lbrace"?(ye="⎧",Fe="⎨",ut="⎩",Ye="⎪",Dt="Size4-Regular"):D==="\\}"||D==="\\rbrace"?(ye="⎫",Fe="⎬",ut="⎭",Ye="⎪",Dt="Size4-Regular"):D==="\\lgroup"||D==="⟮"?(ye="⎧",ut="⎩",Ye="⎪",Dt="Size4-Regular"):D==="\\rgroup"||D==="⟯"?(ye="⎫",ut="⎭",Ye="⎪",Dt="Size4-Regular"):D==="\\lmoustache"||D==="⎰"?(ye="⎧",ut="⎭",Ye="⎪",Dt="Size4-Regular"):(D==="\\rmoustache"||D==="⎱")&&(ye="⎫",ut="⎩",Ye="⎪",Dt="Size4-Regular");var Vt=Uy(ye,Dt,K),Qt=Vt.height+Vt.depth,Zt=Uy(Ye,Dt,K),vn=Zt.height+Zt.depth,yn=Uy(ut,Dt,K),Wn=yn.height+yn.depth,Zn=0,oi=1;if(Fe!==null){var cr=Uy(Fe,Dt,K);Zn=cr.height+cr.depth,oi=2}var Tr=Qt+Wn+Zn,rs=Math.max(0,Math.ceil((R-Tr)/(oi*vn))),br=Tr+rs*oi*vn,Er=U.fontMetrics().axisHeight;k&&(Er*=U.sizeMultiplier);var Ss=br/2-Er,Wr=[];if(Wr.push(kT(ut,Dt,K)),Wr.push(XA),Fe===null){var rl=br-Qt-Wn+2*BT;Wr.push(FT(Ye,rl,U))}else{var sl=(br-Qt-Wn-Zn)/2+2*BT;Wr.push(FT(Ye,sl,U)),Wr.push(XA),Wr.push(kT(Fe,Dt,K)),Wr.push(XA),Wr.push(FT(Ye,sl,U))}Wr.push(XA),Wr.push(kT(ye,Dt,K));var Nf=U.havingBaseStyle(N.TEXT),yu=ot.makeVList({positionType:"bottom",positionData:Ss,children:Wr},Nf);return LT(ot.makeSpan(["delimsizing","mult"],[yu],Nf),N.TEXT,U,ie)},NT=80,OT=.08,UT=function(D,R,k,U,K){var ie=Y(D,U,k),ye=new Ft(D,ie),Fe=new wt([ye],{width:"400em",height:$(R),viewBox:"0 0 400000 "+k,preserveAspectRatio:"xMinYMin slice"});return ot.makeSvgSpan(["hide-tail"],[Fe],K)},lle=function(D,R){var k=R.havingBaseSizing(),U=aN("\\surd",D*k.sizeMultiplier,sN,k),K=k.sizeMultiplier,ie=Math.max(0,R.minRuleThickness-R.fontMetrics().sqrtRuleThickness),ye,Fe=0,Ye=0,ut=0,Dt;return U.type==="small"?(ut=1e3+1e3*ie+NT,D<1?K=1:D<1.4&&(K=.7),Fe=(1+ie+OT)/K,Ye=(1+ie)/K,ye=UT("sqrtMain",Fe,ut,ie,R),ye.style.minWidth="0.853em",Dt=.833/K):U.type==="large"?(ut=(1e3+NT)*zy[U.size],Ye=(zy[U.size]+ie)/K,Fe=(zy[U.size]+ie+OT)/K,ye=UT("sqrtSize"+U.size,Fe,ut,ie,R),ye.style.minWidth="1.02em",Dt=1/K):(Fe=D+ie+OT,Ye=D+ie,ut=Math.floor(1e3*D+ie)+NT,ye=UT("sqrtTall",Fe,ut,ie,R),ye.style.minWidth="0.742em",Dt=1.056),ye.height=Ye,ye.style.height=$(Fe),{span:ye,advanceWidth:Dt,ruleWidth:(R.fontMetrics().sqrtRuleThickness+ie)*K}},iN=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],cle=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],rN=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],zy=[0,1.2,1.8,2.4,3],ule=function(D,R,k,U,K){if(D==="<"||D==="\\lt"||D==="⟨"?D="\\langle":(D===">"||D==="\\gt"||D==="⟩")&&(D="\\rangle"),g.contains(iN,D)||g.contains(rN,D))return tN(D,R,!1,k,U,K);if(g.contains(cle,D))return nN(D,zy[R],!1,k,U,K);throw new s("Illegal delimiter: '"+D+"'")},dle=[{type:"small",style:N.SCRIPTSCRIPT},{type:"small",style:N.SCRIPT},{type:"small",style:N.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],fle=[{type:"small",style:N.SCRIPTSCRIPT},{type:"small",style:N.SCRIPT},{type:"small",style:N.TEXT},{type:"stack"}],sN=[{type:"small",style:N.SCRIPTSCRIPT},{type:"small",style:N.SCRIPT},{type:"small",style:N.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],hle=function(D){if(D.type==="small")return"Main-Regular";if(D.type==="large")return"Size"+D.size+"-Regular";if(D.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+D.type+"' here.")},aN=function(D,R,k,U){for(var K=Math.min(2,3-U.style.size),ie=K;ie<k.length&&k[ie].type!=="stack";ie++){var ye=Uy(D,hle(k[ie]),"math"),Fe=ye.height+ye.depth;if(k[ie].type==="small"){var Ye=U.havingBaseStyle(k[ie].style);Fe*=Ye.sizeMultiplier}if(Fe>R)return k[ie]}return k[k.length-1]},oN=function(D,R,k,U,K,ie){D==="<"||D==="\\lt"||D==="⟨"?D="\\langle":(D===">"||D==="\\gt"||D==="⟩")&&(D="\\rangle");var ye;g.contains(rN,D)?ye=dle:g.contains(iN,D)?ye=sN:ye=fle;var Fe=aN(D,R,ye,U);return Fe.type==="small"?rle(D,Fe.style,k,U,K,ie):Fe.type==="large"?tN(D,Fe.size,k,U,K,ie):nN(D,R,k,U,K,ie)},ple=function(D,R,k,U,K,ie){var ye=U.fontMetrics().axisHeight*U.sizeMultiplier,Fe=901,Ye=5/U.fontMetrics().ptPerEm,ut=Math.max(R-ye,k+ye),Dt=Math.max(ut/500*Fe,2*ut-Ye);return oN(D,Dt,!0,U,K,ie)},md={sqrtImage:lle,sizedDelim:ule,sizeToMaxHeight:zy,customSizedDelim:oN,leftRightDelim:ple},lN={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},mle=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function jA(re,D){var R=KA(re);if(R&&g.contains(mle,R.text))return R;throw R?new s("Invalid delimiter '"+R.text+"' after '"+D.funcName+"'",re):new s("Invalid delimiter type '"+re.type+"'",re)}rn({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:function(D,R){var k=jA(R[0],D);return{type:"delimsizing",mode:D.parser.mode,size:lN[D.funcName].size,mclass:lN[D.funcName].mclass,delim:k.text}},htmlBuilder:function(D,R){return D.delim==="."?ot.makeSpan([D.mclass]):md.sizedDelim(D.delim,D.size,R,D.mode,[D.mclass])},mathmlBuilder:function(D){var R=[];D.delim!=="."&&R.push(Pl(D.delim,D.mode));var k=new sn.MathNode("mo",R);D.mclass==="mopen"||D.mclass==="mclose"?k.setAttribute("fence","true"):k.setAttribute("fence","false"),k.setAttribute("stretchy","true");var U=$(md.sizeToMaxHeight[D.size]);return k.setAttribute("minsize",U),k.setAttribute("maxsize",U),k}});function cN(re){if(!re.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}rn({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:function(D,R){var k=D.parser.gullet.macros.get("\\current@color");if(k&&typeof k!="string")throw new s("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:D.parser.mode,delim:jA(R[0],D).text,color:k}}}),rn({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:function(D,R){var k=jA(R[0],D),U=D.parser;++U.leftrightDepth;var K=U.parseExpression(!1);--U.leftrightDepth,U.expect("\\right",!1);var ie=Ti(U.parseFunction(),"leftright-right");return{type:"leftright",mode:U.mode,body:K,left:k.text,right:ie.delim,rightColor:ie.color}},htmlBuilder:function(D,R){cN(D);for(var k=ba(D.body,R,!0,["mopen","mclose"]),U=0,K=0,ie=!1,ye=0;ye<k.length;ye++)k[ye].isMiddle?ie=!0:(U=Math.max(k[ye].height,U),K=Math.max(k[ye].depth,K));U*=R.sizeMultiplier,K*=R.sizeMultiplier;var Fe;if(D.left==="."?Fe=Ny(R,["mopen"]):Fe=md.leftRightDelim(D.left,U,K,R,D.mode,["mopen"]),k.unshift(Fe),ie)for(var Ye=1;Ye<k.length;Ye++){var ut=k[Ye],Dt=ut.isMiddle;Dt&&(k[Ye]=md.leftRightDelim(Dt.delim,U,K,Dt.options,D.mode,[]))}var Vt;if(D.right===".")Vt=Ny(R,["mclose"]);else{var Qt=D.rightColor?R.withColor(D.rightColor):R;Vt=md.leftRightDelim(D.right,U,K,Qt,D.mode,["mclose"])}return k.push(Vt),ot.makeSpan(["minner"],k,R)},mathmlBuilder:function(D,R){cN(D);var k=il(D.body,R);if(D.left!=="."){var U=new sn.MathNode("mo",[Pl(D.left,D.mode)]);U.setAttribute("fence","true"),k.unshift(U)}if(D.right!=="."){var K=new sn.MathNode("mo",[Pl(D.right,D.mode)]);K.setAttribute("fence","true"),D.rightColor&&K.setAttribute("mathcolor",D.rightColor),k.push(K)}return ET(k)}}),rn({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:function(D,R){var k=jA(R[0],D);if(!D.parser.leftrightDepth)throw new s("\\middle without preceding \\left",k);return{type:"middle",mode:D.parser.mode,delim:k.text}},htmlBuilder:function(D,R){var k;if(D.delim===".")k=Ny(R,[]);else{k=md.sizedDelim(D.delim,1,R,D.mode,[]);var U={delim:D.delim,options:R};k.isMiddle=U}return k},mathmlBuilder:function(D,R){var k=D.delim==="\\vert"||D.delim==="|"?Pl("|","text"):Pl(D.delim,D.mode),U=new sn.MathNode("mo",[k]);return U.setAttribute("fence","true"),U.setAttribute("lspace","0.05em"),U.setAttribute("rspace","0.05em"),U}});var zT=function(D,R){var k=ot.wrapFragment(lr(D.body,R),R),U=D.label.substr(1),K=R.sizeMultiplier,ie,ye=0,Fe=g.isCharacterBox(D.body);if(U==="sout")ie=ot.makeSpan(["stretchy","sout"]),ie.height=R.fontMetrics().defaultRuleThickness/K,ye=-.5*R.fontMetrics().xHeight;else if(U==="phase"){var Ye=lt({number:.6,unit:"pt"},R),ut=lt({number:.35,unit:"ex"},R),Dt=R.havingBaseSizing();K=K/Dt.sizeMultiplier;var Vt=k.height+k.depth+Ye+ut;k.style.paddingLeft=$(Vt/2+Ye);var Qt=Math.floor(1e3*Vt*K),Zt=Le(Qt),vn=new wt([new Ft("phase",Zt)],{width:"400em",height:$(Qt/1e3),viewBox:"0 0 400000 "+Qt,preserveAspectRatio:"xMinYMin slice"});ie=ot.makeSvgSpan(["hide-tail"],[vn],R),ie.style.height=$(Vt),ye=k.depth+Ye+ut}else{/cancel/.test(U)?Fe||k.classes.push("cancel-pad"):U==="angl"?k.classes.push("anglpad"):k.classes.push("boxpad");var yn=0,Wn=0,Zn=0;/box/.test(U)?(Zn=Math.max(R.fontMetrics().fboxrule,R.minRuleThickness),yn=R.fontMetrics().fboxsep+(U==="colorbox"?0:Zn),Wn=yn):U==="angl"?(Zn=Math.max(R.fontMetrics().defaultRuleThickness,R.minRuleThickness),yn=4*Zn,Wn=Math.max(0,.25-k.depth)):(yn=Fe?.2:0,Wn=yn),ie=pd.encloseSpan(k,U,yn,Wn,R),/fbox|boxed|fcolorbox/.test(U)?(ie.style.borderStyle="solid",ie.style.borderWidth=$(Zn)):U==="angl"&&Zn!==.049&&(ie.style.borderTopWidth=$(Zn),ie.style.borderRightWidth=$(Zn)),ye=k.depth+Wn,D.backgroundColor&&(ie.style.backgroundColor=D.backgroundColor,D.borderColor&&(ie.style.borderColor=D.borderColor))}var oi;if(D.backgroundColor)oi=ot.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ie,shift:ye},{type:"elem",elem:k,shift:0}]},R);else{var cr=/cancel|phase/.test(U)?["svg-align"]:[];oi=ot.makeVList({positionType:"individualShift",children:[{type:"elem",elem:k,shift:0},{type:"elem",elem:ie,shift:ye,wrapperClasses:cr}]},R)}return/cancel/.test(U)&&(oi.height=k.height,oi.depth=k.depth),/cancel/.test(U)&&!Fe?ot.makeSpan(["mord","cancel-lap"],[oi],R):ot.makeSpan(["mord"],[oi],R)},VT=function(D,R){var k=0,U=new sn.MathNode(D.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ur(D.body,R)]);switch(D.label){case"\\cancel":U.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":U.setAttribute("notation","downdiagonalstrike");break;case"\\phase":U.setAttribute("notation","phasorangle");break;case"\\sout":U.setAttribute("notation","horizontalstrike");break;case"\\fbox":U.setAttribute("notation","box");break;case"\\angl":U.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(k=R.fontMetrics().fboxsep*R.fontMetrics().ptPerEm,U.setAttribute("width","+"+2*k+"pt"),U.setAttribute("height","+"+2*k+"pt"),U.setAttribute("lspace",k+"pt"),U.setAttribute("voffset",k+"pt"),D.label==="\\fcolorbox"){var K=Math.max(R.fontMetrics().fboxrule,R.minRuleThickness);U.setAttribute("style","border: "+K+"em solid "+String(D.borderColor))}break;case"\\xcancel":U.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return D.backgroundColor&&U.setAttribute("mathbackground",D.backgroundColor),U};rn({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler:function(D,R,k){var U=D.parser,K=D.funcName,ie=Ti(R[0],"color-token").color,ye=R[1];return{type:"enclose",mode:U.mode,label:K,backgroundColor:ie,body:ye}},htmlBuilder:zT,mathmlBuilder:VT}),rn({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler:function(D,R,k){var U=D.parser,K=D.funcName,ie=Ti(R[0],"color-token").color,ye=Ti(R[1],"color-token").color,Fe=R[2];return{type:"enclose",mode:U.mode,label:K,backgroundColor:ye,borderColor:ie,body:Fe}},htmlBuilder:zT,mathmlBuilder:VT}),rn({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(D,R){var k=D.parser;return{type:"enclose",mode:k.mode,label:"\\fbox",body:R[0]}}}),rn({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0];return{type:"enclose",mode:k.mode,label:U,body:K}},htmlBuilder:zT,mathmlBuilder:VT}),rn({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler:function(D,R){var k=D.parser;return{type:"enclose",mode:k.mode,label:"\\angl",body:R[0]}}});var uN={};function mu(re){for(var D=re.type,R=re.names,k=re.props,U=re.handler,K=re.htmlBuilder,ie=re.mathmlBuilder,ye={type:D,numArgs:k.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:U},Fe=0;Fe<R.length;++Fe)uN[R[Fe]]=ye;K&&($n[D]=K),ie&&(Pr[D]=ie)}function dN(re){var D=[];re.consumeSpaces();for(var R=re.fetch().text;R==="\\hline"||R==="\\hdashline";)re.consume(),D.push(R==="\\hdashline"),re.consumeSpaces(),R=re.fetch().text;return D}var $A=function(D){var R=D.parser.settings;if(!R.displayMode)throw new s("{"+D.envName+"} can be used only in display mode.")};function Ff(re,D,R){var k=D.hskipBeforeAndAfter,U=D.addJot,K=D.cols,ie=D.arraystretch,ye=D.colSeparationType,Fe=D.addEqnNum,Ye=D.singleRow,ut=D.emptySingleRow,Dt=D.maxNumCols,Vt=D.leqno;if(re.gullet.beginGroup(),Ye||re.gullet.macros.set("\\cr","\\\\\\relax"),!ie){var Qt=re.gullet.expandMacroAsText("\\arraystretch");if(Qt==null)ie=1;else if(ie=parseFloat(Qt),!ie||ie<0)throw new s("Invalid \\arraystretch: "+Qt)}re.gullet.beginGroup();var Zt=[],vn=[Zt],yn=[],Wn=[];for(Wn.push(dN(re));;){var Zn=re.parseExpression(!1,Ye?"\\end":"\\\\");re.gullet.endGroup(),re.gullet.beginGroup(),Zn={type:"ordgroup",mode:re.mode,body:Zn},R&&(Zn={type:"styling",mode:re.mode,style:R,body:[Zn]}),Zt.push(Zn);var oi=re.fetch().text;if(oi==="&"){if(Dt&&Zt.length===Dt){if(Ye||ye)throw new s("Too many tab characters: &",re.nextToken);re.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}re.consume()}else if(oi==="\\end"){Zt.length===1&&Zn.type==="styling"&&Zn.body[0].body.length===0&&(vn.length>1||!ut)&&vn.pop(),Wn.length<vn.length+1&&Wn.push([]);break}else if(oi==="\\\\"){re.consume();var cr=void 0;re.gullet.future().text!==" "&&(cr=re.parseSizeGroup(!0)),yn.push(cr?cr.value:null),Wn.push(dN(re)),Zt=[],vn.push(Zt)}else throw new s("Expected & or \\\\ or \\cr or \\end",re.nextToken)}return re.gullet.endGroup(),re.gullet.endGroup(),{type:"array",mode:re.mode,addJot:U,arraystretch:ie,body:vn,cols:K,rowGaps:yn,hskipBeforeAndAfter:k,hLinesBeforeRow:Wn,colSeparationType:ye,addEqnNum:Fe,leqno:Vt}}function HT(re){return re.substr(0,1)==="d"?"display":"text"}var vu=function(D,R){var k,U,K=D.body.length,ie=D.hLinesBeforeRow,ye=0,Fe=new Array(K),Ye=[],ut=Math.max(R.fontMetrics().arrayRuleWidth,R.minRuleThickness),Dt=1/R.fontMetrics().ptPerEm,Vt=5*Dt;if(D.colSeparationType&&D.colSeparationType==="small"){var Qt=R.havingStyle(N.SCRIPT).sizeMultiplier;Vt=.2778*(Qt/R.sizeMultiplier)}var Zt=D.colSeparationType==="CD"?lt({number:3,unit:"ex"},R):12*Dt,vn=3*Dt,yn=D.arraystretch*Zt,Wn=.7*yn,Zn=.3*yn,oi=0;function cr(ZN){for(var JA=0;JA<ZN.length;++JA)JA>0&&(oi+=.25),Ye.push({pos:oi,isDashed:ZN[JA]})}for(cr(ie[0]),k=0;k<D.body.length;++k){var Tr=D.body[k],rs=Wn,br=Zn;ye<Tr.length&&(ye=Tr.length);var Er=new Array(Tr.length);for(U=0;U<Tr.length;++U){var Ss=lr(Tr[U],R);br<Ss.depth&&(br=Ss.depth),rs<Ss.height&&(rs=Ss.height),Er[U]=Ss}var Wr=D.rowGaps[k],rl=0;Wr&&(rl=lt(Wr,R),rl>0&&(rl+=Zn,br<rl&&(br=rl),rl=0)),D.addJot&&(br+=vn),Er.height=rs,Er.depth=br,oi+=rs,Er.pos=oi,oi+=br+rl,Fe[k]=Er,cr(ie[k+1])}var sl=oi/2+R.fontMetrics().axisHeight,Nf=D.cols||[],yu=[],al,Vm,YN=[];if(D.addEqnNum)for(k=0;k<K;++k){var t5=Fe[k],Gle=t5.pos-sl,n5=ot.makeSpan(["eqn-num"],[],R);n5.depth=t5.depth,n5.height=t5.height,YN.push({type:"elem",elem:n5,shift:Gle})}for(U=0,Vm=0;U<ye||Vm<Nf.length;++U,++Vm){for(var vd=Nf[Vm]||{},XN=!0;vd.type==="separator";){if(XN||(al=ot.makeSpan(["arraycolsep"],[]),al.style.width=$(R.fontMetrics().doubleRuleSep),yu.push(al)),vd.separator==="|"||vd.separator===":"){var Wle=vd.separator==="|"?"solid":"dashed",Hm=ot.makeSpan(["vertical-separator"],[],R);Hm.style.height=$(oi),Hm.style.borderRightWidth=$(ut),Hm.style.borderRightStyle=Wle,Hm.style.margin="0 "+$(-ut/2);var jN=oi-sl;jN&&(Hm.style.verticalAlign=$(-jN)),yu.push(Hm)}else throw new s("Invalid separator type: "+vd.separator);Vm++,vd=Nf[Vm]||{},XN=!1}if(!(U>=ye)){var Gm=void 0;(U>0||D.hskipBeforeAndAfter)&&(Gm=g.deflt(vd.pregap,Vt),Gm!==0&&(al=ot.makeSpan(["arraycolsep"],[]),al.style.width=$(Gm),yu.push(al)));var Wm=[];for(k=0;k<K;++k){var QA=Fe[k],ZA=QA[U];if(ZA){var qle=QA.pos-sl;ZA.depth=QA.depth,ZA.height=QA.height,Wm.push({type:"elem",elem:ZA,shift:qle})}}Wm=ot.makeVList({positionType:"individualShift",children:Wm},R),Wm=ot.makeSpan(["col-align-"+(vd.align||"c")],[Wm]),yu.push(Wm),(U<ye-1||D.hskipBeforeAndAfter)&&(Gm=g.deflt(vd.postgap,Vt),Gm!==0&&(al=ot.makeSpan(["arraycolsep"],[]),al.style.width=$(Gm),yu.push(al)))}}if(Fe=ot.makeSpan(["mtable"],yu),Ye.length>0){for(var Kle=ot.makeLineSpan("hline",R,ut),Yle=ot.makeLineSpan("hdashline",R,ut),i5=[{type:"elem",elem:Fe,shift:0}];Ye.length>0;){var $N=Ye.pop(),QN=$N.pos-sl;$N.isDashed?i5.push({type:"elem",elem:Yle,shift:QN}):i5.push({type:"elem",elem:Kle,shift:QN})}Fe=ot.makeVList({positionType:"individualShift",children:i5},R)}if(D.addEqnNum){var r5=ot.makeVList({positionType:"individualShift",children:YN},R);return r5=ot.makeSpan(["tag"],[r5],R),ot.makeFragment([Fe,r5])}else return ot.makeSpan(["mord"],[Fe],R)},vle={c:"center ",l:"left ",r:"right "},gu=function(D,R){for(var k=[],U=new sn.MathNode("mtd",[],["mtr-glue"]),K=new sn.MathNode("mtd",[],["mml-eqn-num"]),ie=0;ie<D.body.length;ie++){for(var ye=D.body[ie],Fe=[],Ye=0;Ye<ye.length;Ye++)Fe.push(new sn.MathNode("mtd",[Ur(ye[Ye],R)]));D.addEqnNum&&(Fe.unshift(U),Fe.push(U),D.leqno?Fe.unshift(K):Fe.push(K)),k.push(new sn.MathNode("mtr",Fe))}var ut=new sn.MathNode("mtable",k),Dt=D.arraystretch===.5?.1:.16+D.arraystretch-1+(D.addJot?.09:0);ut.setAttribute("rowspacing",$(Dt));var Vt="",Qt="";if(D.cols&&D.cols.length>0){var Zt=D.cols,vn="",yn=!1,Wn=0,Zn=Zt.length;Zt[0].type==="separator"&&(Vt+="top ",Wn=1),Zt[Zt.length-1].type==="separator"&&(Vt+="bottom ",Zn-=1);for(var oi=Wn;oi<Zn;oi++)Zt[oi].type==="align"?(Qt+=vle[Zt[oi].align],yn&&(vn+="none "),yn=!0):Zt[oi].type==="separator"&&yn&&(vn+=Zt[oi].separator==="|"?"solid ":"dashed ",yn=!1);ut.setAttribute("columnalign",Qt.trim()),/[sd]/.test(vn)&&ut.setAttribute("columnlines",vn.trim())}if(D.colSeparationType==="align"){for(var cr=D.cols||[],Tr="",rs=1;rs<cr.length;rs++)Tr+=rs%2?"0em ":"1em ";ut.setAttribute("columnspacing",Tr.trim())}else D.colSeparationType==="alignat"||D.colSeparationType==="gather"?ut.setAttribute("columnspacing","0em"):D.colSeparationType==="small"?ut.setAttribute("columnspacing","0.2778em"):D.colSeparationType==="CD"?ut.setAttribute("columnspacing","0.5em"):ut.setAttribute("columnspacing","1em");var br="",Er=D.hLinesBeforeRow;Vt+=Er[0].length>0?"left ":"",Vt+=Er[Er.length-1].length>0?"right ":"";for(var Ss=1;Ss<Er.length-1;Ss++)br+=Er[Ss].length===0?"none ":Er[Ss][0]?"dashed ":"solid ";return/[sd]/.test(br)&&ut.setAttribute("rowlines",br.trim()),Vt!==""&&(ut=new sn.MathNode("menclose",[ut]),ut.setAttribute("notation",Vt.trim())),D.arraystretch&&D.arraystretch<1&&(ut=new sn.MathNode("mstyle",[ut]),ut.setAttribute("scriptlevel","1")),ut},fN=function(D,R){D.envName.indexOf("ed")===-1&&$A(D);var k=[],U=D.envName.indexOf("at")>-1?"alignat":"align",K=Ff(D.parser,{cols:k,addJot:!0,addEqnNum:D.envName==="align"||D.envName==="alignat",emptySingleRow:!0,colSeparationType:U,maxNumCols:D.envName==="split"?2:void 0,leqno:D.parser.settings.leqno},"display"),ie,ye=0,Fe={type:"ordgroup",mode:D.mode,body:[]};if(R[0]&&R[0].type==="ordgroup"){for(var Ye="",ut=0;ut<R[0].body.length;ut++){var Dt=Ti(R[0].body[ut],"textord");Ye+=Dt.text}ie=Number(Ye),ye=ie*2}var Vt=!ye;K.body.forEach(function(yn){for(var Wn=1;Wn<yn.length;Wn+=2){var Zn=Ti(yn[Wn],"styling"),oi=Ti(Zn.body[0],"ordgroup");oi.body.unshift(Fe)}if(Vt)ye<yn.length&&(ye=yn.length);else{var cr=yn.length/2;if(ie<cr)throw new s("Too many math in a row: "+("expected "+ie+", but got "+cr),yn[0])}});for(var Qt=0;Qt<ye;++Qt){var Zt="r",vn=0;Qt%2===1?Zt="l":Qt>0&&Vt&&(vn=1),k[Qt]={type:"align",align:Zt,pregap:vn,postgap:0}}return K.colSeparationType=Vt?"align":"alignat",K};mu({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(D,R){var k=KA(R[0]),U=k?[R[0]]:Ti(R[0],"ordgroup").body,K=U.map(function(ye){var Fe=DT(ye),Ye=Fe.text;if("lcr".indexOf(Ye)!==-1)return{type:"align",align:Ye};if(Ye==="|")return{type:"separator",separator:"|"};if(Ye===":")return{type:"separator",separator:":"};throw new s("Unknown column alignment: "+Ye,ye)}),ie={cols:K,hskipBeforeAndAfter:!0,maxNumCols:K.length};return Ff(D.parser,ie,HT(D.envName))},htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler:function(D){var R={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[D.envName.replace("*","")],k="c",U={hskipBeforeAndAfter:!1,cols:[{type:"align",align:k}]};if(D.envName.charAt(D.envName.length-1)==="*"){var K=D.parser;if(K.consumeSpaces(),K.fetch().text==="["){if(K.consume(),K.consumeSpaces(),k=K.fetch().text,"lcr".indexOf(k)===-1)throw new s("Expected l or c or r",K.nextToken);K.consume(),K.consumeSpaces(),K.expect("]"),K.consume(),U.cols=[{type:"align",align:k}]}}var ie=Ff(D.parser,U,HT(D.envName)),ye=Math.max.apply(Math,[0].concat(ie.body.map(function(Fe){return Fe.length})));return ie.cols=new Array(ye).fill({type:"align",align:k}),R?{type:"leftright",mode:D.mode,body:[ie],left:R[0],right:R[1],rightColor:void 0}:ie},htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(D){var R={arraystretch:.5},k=Ff(D.parser,R,"script");return k.colSeparationType="small",k},htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["subarray"],props:{numArgs:1},handler:function(D,R){var k=KA(R[0]),U=k?[R[0]]:Ti(R[0],"ordgroup").body,K=U.map(function(ye){var Fe=DT(ye),Ye=Fe.text;if("lc".indexOf(Ye)!==-1)return{type:"align",align:Ye};throw new s("Unknown column alignment: "+Ye,ye)});if(K.length>1)throw new s("{subarray} can contain only one column");var ie={cols:K,hskipBeforeAndAfter:!1,arraystretch:.5};if(ie=Ff(D.parser,ie,"script"),ie.body.length>0&&ie.body[0].length>1)throw new s("{subarray} can contain only one column");return ie},htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler:function(D){var R={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},k=Ff(D.parser,R,HT(D.envName));return{type:"leftright",mode:D.mode,body:[k],left:D.envName.indexOf("r")>-1?".":"\\{",right:D.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:fN,htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler:function(D){g.contains(["gather","gather*"],D.envName)&&$A(D);var R={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",addEqnNum:D.envName==="gather",emptySingleRow:!0,leqno:D.parser.settings.leqno};return Ff(D.parser,R,"display")},htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:fN,htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["equation","equation*"],props:{numArgs:0},handler:function(D){$A(D);var R={addEqnNum:D.envName==="equation",emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:D.parser.settings.leqno};return Ff(D.parser,R,"display")},htmlBuilder:vu,mathmlBuilder:gu}),mu({type:"array",names:["CD"],props:{numArgs:0},handler:function(D){return $A(D),nle(D.parser)},htmlBuilder:vu,mathmlBuilder:gu}),rn({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(D,R){throw new s(D.funcName+" valid only within array environment")}});var gle=uN,hN=gle;rn({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0];if(K.type!=="ordgroup")throw new s("Invalid environment name",K);for(var ie="",ye=0;ye<K.body.length;++ye)ie+=Ti(K.body[ye],"textord").text;if(U==="\\begin"){if(!hN.hasOwnProperty(ie))throw new s("No such environment: "+ie,K);var Fe=hN[ie],Ye=k.parseArguments("\\begin{"+ie+"}",Fe),ut=Ye.args,Dt=Ye.optArgs,Vt={mode:k.mode,envName:ie,parser:k},Qt=Fe.handler(Vt,ut,Dt);k.expect("\\end",!1);var Zt=k.nextToken,vn=Ti(k.parseFunction(),"environment");if(vn.name!==ie)throw new s("Mismatch: \\begin{"+ie+"} matched by \\end{"+vn.name+"}",Zt);return Qt}return{type:"environment",mode:k.mode,name:ie,nameGroup:K}}});var yle=ot.makeSpan;function pN(re,D){var R=ba(re.body,D,!0);return yle([re.mclass],R,D)}function mN(re,D){var R,k=il(re.body,D);return re.mclass==="minner"?sn.newDocumentFragment(k):(re.mclass==="mord"?re.isCharacterBox?(R=k[0],R.type="mi"):R=new sn.MathNode("mi",k):(re.isCharacterBox?(R=k[0],R.type="mo"):R=new sn.MathNode("mo",k),re.mclass==="mbin"?(R.attributes.lspace="0.22em",R.attributes.rspace="0.22em"):re.mclass==="mpunct"?(R.attributes.lspace="0em",R.attributes.rspace="0.17em"):(re.mclass==="mopen"||re.mclass==="mclose")&&(R.attributes.lspace="0em",R.attributes.rspace="0em")),R)}rn({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0];return{type:"mclass",mode:k.mode,mclass:"m"+U.substr(5),body:yr(K),isCharacterBox:g.isCharacterBox(K)}},htmlBuilder:pN,mathmlBuilder:mN});var GT=function(D){var R=D.type==="ordgroup"&&D.body.length?D.body[0]:D;return R.type==="atom"&&(R.family==="bin"||R.family==="rel")?"m"+R.family:"mord"};rn({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(D,R){var k=D.parser;return{type:"mclass",mode:k.mode,mclass:GT(R[0]),body:yr(R[1]),isCharacterBox:g.isCharacterBox(R[1])}}}),rn({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[1],ie=R[0],ye;U!=="\\stackrel"?ye=GT(K):ye="mrel";var Fe={type:"op",mode:K.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:U!=="\\stackrel",body:yr(K)},Ye={type:"supsub",mode:ie.mode,base:Fe,sup:U==="\\underset"?null:ie,sub:U==="\\underset"?ie:null};return{type:"mclass",mode:k.mode,mclass:ye,body:[Ye],isCharacterBox:g.isCharacterBox(Ye)}},htmlBuilder:pN,mathmlBuilder:mN});var vN=function(D,R){var k=D.font,U=R.withFont(k);return lr(D.body,U)},gN=function(D,R){var k=D.font,U=R.withFont(k);return Ur(D.body,U)},yN={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};rn({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:function(D,R){var k=D.parser,U=D.funcName,K=Gi(R[0]),ie=U;return ie in yN&&(ie=yN[ie]),{type:"font",mode:k.mode,font:ie.slice(1),body:K}},htmlBuilder:vN,mathmlBuilder:gN}),rn({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:function(D,R){var k=D.parser,U=R[0],K=g.isCharacterBox(U);return{type:"mclass",mode:k.mode,mclass:GT(U),body:[{type:"font",mode:k.mode,font:"boldsymbol",body:U}],isCharacterBox:K}}}),rn({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:function(D,R){var k=D.parser,U=D.funcName,K=D.breakOnTokenText,ie=k.mode,ye=k.parseExpression(!0,K),Fe="math"+U.slice(1);return{type:"font",mode:ie,font:Fe,body:{type:"ordgroup",mode:k.mode,body:ye}}},htmlBuilder:vN,mathmlBuilder:gN});var bN=function(D,R){var k=R;return D==="display"?k=k.id>=N.SCRIPT.id?k.text():N.DISPLAY:D==="text"&&k.size===N.DISPLAY.size?k=N.TEXT:D==="script"?k=N.SCRIPT:D==="scriptscript"&&(k=N.SCRIPTSCRIPT),k},WT=function(D,R){var k=bN(D.size,R.style),U=k.fracNum(),K=k.fracDen(),ie;ie=R.havingStyle(U);var ye=lr(D.numer,ie,R);if(D.continued){var Fe=8.5/R.fontMetrics().ptPerEm,Ye=3.5/R.fontMetrics().ptPerEm;ye.height=ye.height<Fe?Fe:ye.height,ye.depth=ye.depth<Ye?Ye:ye.depth}ie=R.havingStyle(K);var ut=lr(D.denom,ie,R),Dt,Vt,Qt;D.hasBarLine?(D.barSize?(Vt=lt(D.barSize,R),Dt=ot.makeLineSpan("frac-line",R,Vt)):Dt=ot.makeLineSpan("frac-line",R),Vt=Dt.height,Qt=Dt.height):(Dt=null,Vt=0,Qt=R.fontMetrics().defaultRuleThickness);var Zt,vn,yn;k.size===N.DISPLAY.size||D.size==="display"?(Zt=R.fontMetrics().num1,Vt>0?vn=3*Qt:vn=7*Qt,yn=R.fontMetrics().denom1):(Vt>0?(Zt=R.fontMetrics().num2,vn=Qt):(Zt=R.fontMetrics().num3,vn=3*Qt),yn=R.fontMetrics().denom2);var Wn;if(Dt){var oi=R.fontMetrics().axisHeight;Zt-ye.depth-(oi+.5*Vt)<vn&&(Zt+=vn-(Zt-ye.depth-(oi+.5*Vt))),oi-.5*Vt-(ut.height-yn)<vn&&(yn+=vn-(oi-.5*Vt-(ut.height-yn)));var cr=-(oi-.5*Vt);Wn=ot.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ut,shift:yn},{type:"elem",elem:Dt,shift:cr},{type:"elem",elem:ye,shift:-Zt}]},R)}else{var Zn=Zt-ye.depth-(ut.height-yn);Zn<vn&&(Zt+=.5*(vn-Zn),yn+=.5*(vn-Zn)),Wn=ot.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ut,shift:yn},{type:"elem",elem:ye,shift:-Zt}]},R)}ie=R.havingStyle(k),Wn.height*=ie.sizeMultiplier/R.sizeMultiplier,Wn.depth*=ie.sizeMultiplier/R.sizeMultiplier;var Tr;k.size===N.DISPLAY.size?Tr=R.fontMetrics().delim1:k.size===N.SCRIPTSCRIPT.size?Tr=R.havingStyle(N.SCRIPT).fontMetrics().delim2:Tr=R.fontMetrics().delim2;var rs,br;return D.leftDelim==null?rs=Ny(R,["mopen"]):rs=md.customSizedDelim(D.leftDelim,Tr,!0,R.havingStyle(k),D.mode,["mopen"]),D.continued?br=ot.makeSpan([]):D.rightDelim==null?br=Ny(R,["mclose"]):br=md.customSizedDelim(D.rightDelim,Tr,!0,R.havingStyle(k),D.mode,["mclose"]),ot.makeSpan(["mord"].concat(ie.sizingClasses(R)),[rs,ot.makeSpan(["mfrac"],[Wn]),br],R)},qT=function(D,R){var k=new sn.MathNode("mfrac",[Ur(D.numer,R),Ur(D.denom,R)]);if(!D.hasBarLine)k.setAttribute("linethickness","0px");else if(D.barSize){var U=lt(D.barSize,R);k.setAttribute("linethickness",$(U))}var K=bN(D.size,R.style);if(K.size!==R.style.size){k=new sn.MathNode("mstyle",[k]);var ie=K.size===N.DISPLAY.size?"true":"false";k.setAttribute("displaystyle",ie),k.setAttribute("scriptlevel","0")}if(D.leftDelim!=null||D.rightDelim!=null){var ye=[];if(D.leftDelim!=null){var Fe=new sn.MathNode("mo",[new sn.TextNode(D.leftDelim.replace("\\",""))]);Fe.setAttribute("fence","true"),ye.push(Fe)}if(ye.push(k),D.rightDelim!=null){var Ye=new sn.MathNode("mo",[new sn.TextNode(D.rightDelim.replace("\\",""))]);Ye.setAttribute("fence","true"),ye.push(Ye)}return ET(ye)}return k};rn({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0],ie=R[1],ye,Fe=null,Ye=null,ut="auto";switch(U){case"\\dfrac":case"\\frac":case"\\tfrac":ye=!0;break;case"\\\\atopfrac":ye=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":ye=!1,Fe="(",Ye=")";break;case"\\\\bracefrac":ye=!1,Fe="\\{",Ye="\\}";break;case"\\\\brackfrac":ye=!1,Fe="[",Ye="]";break;default:throw new Error("Unrecognized genfrac command")}switch(U){case"\\dfrac":case"\\dbinom":ut="display";break;case"\\tfrac":case"\\tbinom":ut="text";break}return{type:"genfrac",mode:k.mode,continued:!1,numer:K,denom:ie,hasBarLine:ye,leftDelim:Fe,rightDelim:Ye,size:ut,barSize:null}},htmlBuilder:WT,mathmlBuilder:qT}),rn({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:function(D,R){var k=D.parser;D.funcName;var U=R[0],K=R[1];return{type:"genfrac",mode:k.mode,continued:!0,numer:U,denom:K,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),rn({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(D){var R=D.parser,k=D.funcName,U=D.token,K;switch(k){case"\\over":K="\\frac";break;case"\\choose":K="\\binom";break;case"\\atop":K="\\\\atopfrac";break;case"\\brace":K="\\\\bracefrac";break;case"\\brack":K="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:R.mode,replaceWith:K,token:U}}});var xN=["display","text","script","scriptscript"],AN=function(D){var R=null;return D.length>0&&(R=D,R=R==="."?null:R),R};rn({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler:function(D,R){var k=D.parser,U=R[4],K=R[5],ie=Gi(R[0]),ye=ie.type==="atom"&&ie.family==="open"?AN(ie.text):null,Fe=Gi(R[1]),Ye=Fe.type==="atom"&&Fe.family==="close"?AN(Fe.text):null,ut=Ti(R[2],"size"),Dt,Vt=null;ut.isBlank?Dt=!0:(Vt=ut.value,Dt=Vt.number>0);var Qt="auto",Zt=R[3];if(Zt.type==="ordgroup"){if(Zt.body.length>0){var vn=Ti(Zt.body[0],"textord");Qt=xN[Number(vn.text)]}}else Zt=Ti(Zt,"textord"),Qt=xN[Number(Zt.text)];return{type:"genfrac",mode:k.mode,numer:U,denom:K,continued:!1,hasBarLine:Dt,barSize:Vt,leftDelim:ye,rightDelim:Ye,size:Qt}},htmlBuilder:WT,mathmlBuilder:qT}),rn({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(D,R){var k=D.parser;D.funcName;var U=D.token;return{type:"infix",mode:k.mode,replaceWith:"\\\\abovefrac",size:Ti(R[0],"size").value,token:U}}}),rn({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(D,R){var k=D.parser;D.funcName;var U=R[0],K=m(Ti(R[1],"infix").size),ie=R[2],ye=K.number>0;return{type:"genfrac",mode:k.mode,numer:U,denom:ie,continued:!1,hasBarLine:ye,barSize:K,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:WT,mathmlBuilder:qT});var wN=function(D,R){var k=R.style,U,K;D.type==="supsub"?(U=D.sup?lr(D.sup,R.havingStyle(k.sup()),R):lr(D.sub,R.havingStyle(k.sub()),R),K=Ti(D.base,"horizBrace")):K=Ti(D,"horizBrace");var ie=lr(K.base,R.havingBaseStyle(N.DISPLAY)),ye=pd.svgSpan(K,R),Fe;if(K.isOver?(Fe=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ie},{type:"kern",size:.1},{type:"elem",elem:ye}]},R),Fe.children[0].children[0].children[1].classes.push("svg-align")):(Fe=ot.makeVList({positionType:"bottom",positionData:ie.depth+.1+ye.height,children:[{type:"elem",elem:ye},{type:"kern",size:.1},{type:"elem",elem:ie}]},R),Fe.children[0].children[0].children[0].classes.push("svg-align")),U){var Ye=ot.makeSpan(["mord",K.isOver?"mover":"munder"],[Fe],R);K.isOver?Fe=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:Ye},{type:"kern",size:.2},{type:"elem",elem:U}]},R):Fe=ot.makeVList({positionType:"bottom",positionData:Ye.depth+.2+U.height+U.depth,children:[{type:"elem",elem:U},{type:"kern",size:.2},{type:"elem",elem:Ye}]},R)}return ot.makeSpan(["mord",K.isOver?"mover":"munder"],[Fe],R)},ble=function(D,R){var k=pd.mathMLnode(D.label);return new sn.MathNode(D.isOver?"mover":"munder",[Ur(D.base,R),k])};rn({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(D,R){var k=D.parser,U=D.funcName;return{type:"horizBrace",mode:k.mode,label:U,isOver:/^\\over/.test(U),base:R[0]}},htmlBuilder:wN,mathmlBuilder:ble}),rn({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(D,R){var k=D.parser,U=R[1],K=Ti(R[0],"url").url;return k.settings.isTrusted({command:"\\href",url:K})?{type:"href",mode:k.mode,href:K,body:yr(U)}:k.formatUnsupportedCmd("\\href")},htmlBuilder:function(D,R){var k=ba(D.body,R,!1);return ot.makeAnchor(D.href,[],k,R)},mathmlBuilder:function(D,R){var k=kf(D.body,R);return k instanceof Rl||(k=new Rl("mrow",[k])),k.setAttribute("href",D.href),k}}),rn({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(D,R){var k=D.parser,U=Ti(R[0],"url").url;if(!k.settings.isTrusted({command:"\\url",url:U}))return k.formatUnsupportedCmd("\\url");for(var K=[],ie=0;ie<U.length;ie++){var ye=U[ie];ye==="~"&&(ye="\\textasciitilde"),K.push({type:"textord",mode:"text",text:ye})}var Fe={type:"text",mode:k.mode,font:"\\texttt",body:K};return{type:"href",mode:k.mode,href:U,body:yr(Fe)}}}),rn({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler:function(D,R){var k=D.parser;return{type:"hbox",mode:k.mode,body:yr(R[0])}},htmlBuilder:function(D,R){var k=ba(D.body,R,!1);return ot.makeFragment(k)},mathmlBuilder:function(D,R){return new sn.MathNode("mrow",il(D.body,R))}}),rn({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:function(D,R){var k=D.parser,U=D.funcName;D.token;var K=Ti(R[0],"raw").string,ie=R[1];k.settings.strict&&k.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var ye,Fe={};switch(U){case"\\htmlClass":Fe.class=K,ye={command:"\\htmlClass",class:K};break;case"\\htmlId":Fe.id=K,ye={command:"\\htmlId",id:K};break;case"\\htmlStyle":Fe.style=K,ye={command:"\\htmlStyle",style:K};break;case"\\htmlData":{for(var Ye=K.split(","),ut=0;ut<Ye.length;ut++){var Dt=Ye[ut].split("=");if(Dt.length!==2)throw new s("Error parsing key-value for \\htmlData");Fe["data-"+Dt[0].trim()]=Dt[1].trim()}ye={command:"\\htmlData",attributes:Fe};break}default:throw new Error("Unrecognized html command")}return k.settings.isTrusted(ye)?{type:"html",mode:k.mode,attributes:Fe,body:yr(ie)}:k.formatUnsupportedCmd(U)},htmlBuilder:function(D,R){var k=ba(D.body,R,!1),U=["enclosing"];D.attributes.class&&U.push.apply(U,D.attributes.class.trim().split(/\s+/));var K=ot.makeSpan(U,k,R);for(var ie in D.attributes)ie!=="class"&&D.attributes.hasOwnProperty(ie)&&K.setAttribute(ie,D.attributes[ie]);return K},mathmlBuilder:function(D,R){return kf(D.body,R)}}),rn({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(D,R){var k=D.parser;return{type:"htmlmathml",mode:k.mode,html:yr(R[0]),mathml:yr(R[1])}},htmlBuilder:function(D,R){var k=ba(D.html,R,!1);return ot.makeFragment(k)},mathmlBuilder:function(D,R){return kf(D.mathml,R)}});var KT=function(D){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(D))return{number:+D,unit:"bp"};var R=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(D);if(!R)throw new s("Invalid size: '"+D+"' in \\includegraphics");var k={number:+(R[1]+R[2]),unit:R[3]};if(!gt(k))throw new s("Invalid unit: '"+k.unit+"' in \\includegraphics.");return k};rn({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(D,R,k){var U=D.parser,K={number:0,unit:"em"},ie={number:.9,unit:"em"},ye={number:0,unit:"em"},Fe="";if(k[0])for(var Ye=Ti(k[0],"raw").string,ut=Ye.split(","),Dt=0;Dt<ut.length;Dt++){var Vt=ut[Dt].split("=");if(Vt.length===2){var Qt=Vt[1].trim();switch(Vt[0].trim()){case"alt":Fe=Qt;break;case"width":K=KT(Qt);break;case"height":ie=KT(Qt);break;case"totalheight":ye=KT(Qt);break;default:throw new s("Invalid key: '"+Vt[0]+"' in \\includegraphics.")}}}var Zt=Ti(R[0],"url").url;return Fe===""&&(Fe=Zt,Fe=Fe.replace(/^.*[\\/]/,""),Fe=Fe.substring(0,Fe.lastIndexOf("."))),U.settings.isTrusted({command:"\\includegraphics",url:Zt})?{type:"includegraphics",mode:U.mode,alt:Fe,width:K,height:ie,totalheight:ye,src:Zt}:U.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(D,R){var k=lt(D.height,R),U=0;D.totalheight.number>0&&(U=lt(D.totalheight,R)-k);var K=0;D.width.number>0&&(K=lt(D.width,R));var ie={height:$(k+U)};K>0&&(ie.width=$(K)),U>0&&(ie.verticalAlign=$(-U));var ye=new we(D.src,D.alt,ie);return ye.height=k,ye.depth=U,ye},mathmlBuilder:function(D,R){var k=new sn.MathNode("mglyph",[]);k.setAttribute("alt",D.alt);var U=lt(D.height,R),K=0;if(D.totalheight.number>0&&(K=lt(D.totalheight,R)-U,k.setAttribute("valign",$(-K))),k.setAttribute("height",$(U+K)),D.width.number>0){var ie=lt(D.width,R);k.setAttribute("width",$(ie))}return k.setAttribute("src",D.src),k}}),rn({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler:function(D,R){var k=D.parser,U=D.funcName,K=Ti(R[0],"size");if(k.settings.strict){var ie=U[1]==="m",ye=K.value.unit==="mu";ie?(ye||k.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+U+" supports only mu units, "+("not "+K.value.unit+" units")),k.mode!=="math"&&k.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+U+" works only in math mode")):ye&&k.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+U+" doesn't support mu units")}return{type:"kern",mode:k.mode,dimension:K.value}},htmlBuilder:function(D,R){return ot.makeGlue(D.dimension,R)},mathmlBuilder:function(D,R){var k=lt(D.dimension,R);return new sn.SpaceNode(k)}}),rn({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0];return{type:"lap",mode:k.mode,alignment:U.slice(5),body:K}},htmlBuilder:function(D,R){var k;D.alignment==="clap"?(k=ot.makeSpan([],[lr(D.body,R)]),k=ot.makeSpan(["inner"],[k],R)):k=ot.makeSpan(["inner"],[lr(D.body,R)]);var U=ot.makeSpan(["fix"],[]),K=ot.makeSpan([D.alignment],[k,U],R),ie=ot.makeSpan(["strut"]);return ie.style.height=$(K.height+K.depth),K.depth&&(ie.style.verticalAlign=$(-K.depth)),K.children.unshift(ie),K=ot.makeSpan(["thinbox"],[K],R),ot.makeSpan(["mord","vbox"],[K],R)},mathmlBuilder:function(D,R){var k=new sn.MathNode("mpadded",[Ur(D.body,R)]);if(D.alignment!=="rlap"){var U=D.alignment==="llap"?"-1":"-0.5";k.setAttribute("lspace",U+"width")}return k.setAttribute("width","0px"),k}}),rn({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(D,R){var k=D.funcName,U=D.parser,K=U.mode;U.switchMode("math");var ie=k==="\\("?"\\)":"$",ye=U.parseExpression(!1,ie);return U.expect(ie),U.switchMode(K),{type:"styling",mode:U.mode,style:"text",body:ye}}}),rn({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(D,R){throw new s("Mismatched "+D.funcName)}});var SN=function(D,R){switch(R.style.size){case N.DISPLAY.size:return D.display;case N.TEXT.size:return D.text;case N.SCRIPT.size:return D.script;case N.SCRIPTSCRIPT.size:return D.scriptscript;default:return D.text}};rn({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:function(D,R){var k=D.parser;return{type:"mathchoice",mode:k.mode,display:yr(R[0]),text:yr(R[1]),script:yr(R[2]),scriptscript:yr(R[3])}},htmlBuilder:function(D,R){var k=SN(D,R),U=ba(k,R,!1);return ot.makeFragment(U)},mathmlBuilder:function(D,R){var k=SN(D,R);return kf(k,R)}});var _N=function(D,R,k,U,K,ie,ye){D=ot.makeSpan([],[D]);var Fe=k&&g.isCharacterBox(k),Ye,ut;if(R){var Dt=lr(R,U.havingStyle(K.sup()),U);ut={elem:Dt,kern:Math.max(U.fontMetrics().bigOpSpacing1,U.fontMetrics().bigOpSpacing3-Dt.depth)}}if(k){var Vt=lr(k,U.havingStyle(K.sub()),U);Ye={elem:Vt,kern:Math.max(U.fontMetrics().bigOpSpacing2,U.fontMetrics().bigOpSpacing4-Vt.height)}}var Qt;if(ut&&Ye){var Zt=U.fontMetrics().bigOpSpacing5+Ye.elem.height+Ye.elem.depth+Ye.kern+D.depth+ye;Qt=ot.makeVList({positionType:"bottom",positionData:Zt,children:[{type:"kern",size:U.fontMetrics().bigOpSpacing5},{type:"elem",elem:Ye.elem,marginLeft:$(-ie)},{type:"kern",size:Ye.kern},{type:"elem",elem:D},{type:"kern",size:ut.kern},{type:"elem",elem:ut.elem,marginLeft:$(ie)},{type:"kern",size:U.fontMetrics().bigOpSpacing5}]},U)}else if(Ye){var vn=D.height-ye;Qt=ot.makeVList({positionType:"top",positionData:vn,children:[{type:"kern",size:U.fontMetrics().bigOpSpacing5},{type:"elem",elem:Ye.elem,marginLeft:$(-ie)},{type:"kern",size:Ye.kern},{type:"elem",elem:D}]},U)}else if(ut){var yn=D.depth+ye;Qt=ot.makeVList({positionType:"bottom",positionData:yn,children:[{type:"elem",elem:D},{type:"kern",size:ut.kern},{type:"elem",elem:ut.elem,marginLeft:$(ie)},{type:"kern",size:U.fontMetrics().bigOpSpacing5}]},U)}else return D;var Wn=[Qt];if(Ye&&ie!==0&&!Fe){var Zn=ot.makeSpan(["mspace"],[],U);Zn.style.marginRight=$(ie),Wn.unshift(Zn)}return ot.makeSpan(["mop","op-limits"],Wn,U)},CN=["\\smallint"],zm=function(D,R){var k,U,K=!1,ie;D.type==="supsub"?(k=D.sup,U=D.sub,ie=Ti(D.base,"op"),K=!0):ie=Ti(D,"op");var ye=R.style,Fe=!1;ye.size===N.DISPLAY.size&&ie.symbol&&!g.contains(CN,ie.name)&&(Fe=!0);var Ye;if(ie.symbol){var ut=Fe?"Size2-Regular":"Size1-Regular",Dt="";if((ie.name==="\\oiint"||ie.name==="\\oiiint")&&(Dt=ie.name.substr(1),ie.name=Dt==="oiint"?"\\iint":"\\iiint"),Ye=ot.makeSymbol(ie.name,ut,"math",R,["mop","op-symbol",Fe?"large-op":"small-op"]),Dt.length>0){var Vt=Ye.italic,Qt=ot.staticSvg(Dt+"Size"+(Fe?"2":"1"),R);Ye=ot.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Ye,shift:0},{type:"elem",elem:Qt,shift:Fe?.08:0}]},R),ie.name="\\"+Dt,Ye.classes.unshift("mop"),Ye.italic=Vt}}else if(ie.body){var Zt=ba(ie.body,R,!0);Zt.length===1&&Zt[0]instanceof it?(Ye=Zt[0],Ye.classes[0]="mop"):Ye=ot.makeSpan(["mop"],Zt,R)}else{for(var vn=[],yn=1;yn<ie.name.length;yn++)vn.push(ot.mathsym(ie.name[yn],ie.mode,R));Ye=ot.makeSpan(["mop"],vn,R)}var Wn=0,Zn=0;return(Ye instanceof it||ie.name==="\\oiint"||ie.name==="\\oiiint")&&!ie.suppressBaseShift&&(Wn=(Ye.height-Ye.depth)/2-R.fontMetrics().axisHeight,Zn=Ye.italic),K?_N(Ye,k,U,R,ye,Zn,Wn):(Wn&&(Ye.style.position="relative",Ye.style.top=$(Wn)),Ye)},Vy=function(D,R){var k;if(D.symbol)k=new Rl("mo",[Pl(D.name,D.mode)]),g.contains(CN,D.name)&&k.setAttribute("largeop","false");else if(D.body)k=new Rl("mo",il(D.body,R));else{k=new Rl("mi",[new Oy(D.name.slice(1))]);var U=new Rl("mo",[Pl("⁡","text")]);D.parentIsSupSub?k=new Rl("mrow",[k,U]):k=GB([k,U])}return k},xle={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};rn({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(D,R){var k=D.parser,U=D.funcName,K=U;return K.length===1&&(K=xle[K]),{type:"op",mode:k.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:K}},htmlBuilder:zm,mathmlBuilder:Vy}),rn({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:function(D,R){var k=D.parser,U=R[0];return{type:"op",mode:k.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:yr(U)}},htmlBuilder:zm,mathmlBuilder:Vy});var Ale={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};rn({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(D){var R=D.parser,k=D.funcName;return{type:"op",mode:R.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:k}},htmlBuilder:zm,mathmlBuilder:Vy}),rn({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(D){var R=D.parser,k=D.funcName;return{type:"op",mode:R.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:k}},htmlBuilder:zm,mathmlBuilder:Vy}),rn({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(D){var R=D.parser,k=D.funcName,U=k;return U.length===1&&(U=Ale[U]),{type:"op",mode:R.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:U}},htmlBuilder:zm,mathmlBuilder:Vy});var MN={};function Be(re,D){MN[re]=D}var TN=function(D,R){var k,U,K=!1,ie;D.type==="supsub"?(k=D.sup,U=D.sub,ie=Ti(D.base,"operatorname"),K=!0):ie=Ti(D,"operatorname");var ye;if(ie.body.length>0){for(var Fe=ie.body.map(function(Vt){var Qt=Vt.text;return typeof Qt=="string"?{type:"textord",mode:Vt.mode,text:Qt}:Vt}),Ye=ba(Fe,R.withFont("mathrm"),!0),ut=0;ut<Ye.length;ut++){var Dt=Ye[ut];Dt instanceof it&&(Dt.text=Dt.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}ye=ot.makeSpan(["mop"],Ye,R)}else ye=ot.makeSpan(["mop"],[],R);return K?_N(ye,k,U,R,R.style,0,0):ye},wle=function(D,R){for(var k=il(D.body,R.withFont("mathrm")),U=!0,K=0;K<k.length;K++){var ie=k[K];if(!(ie instanceof sn.SpaceNode))if(ie instanceof sn.MathNode)switch(ie.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var ye=ie.children[0];ie.children.length===1&&ye instanceof sn.TextNode?ye.text=ye.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):U=!1;break}default:U=!1}else U=!1}if(U){var Fe=k.map(function(Dt){return Dt.toText()}).join("");k=[new sn.TextNode(Fe)]}var Ye=new sn.MathNode("mi",k);Ye.setAttribute("mathvariant","normal");var ut=new sn.MathNode("mo",[Pl("⁡","text")]);return D.parentIsSupSub?new sn.MathNode("mrow",[Ye,ut]):sn.newDocumentFragment([Ye,ut])};rn({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0];return{type:"operatorname",mode:k.mode,body:yr(K),alwaysHandleSupSub:U==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:TN,mathmlBuilder:wle}),Be("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Di({type:"ordgroup",htmlBuilder:function(D,R){return D.semisimple?ot.makeFragment(ba(D.body,R,!1)):ot.makeSpan(["mord"],ba(D.body,R,!0),R)},mathmlBuilder:function(D,R){return kf(D.body,R,!0)}}),rn({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(D,R){var k=D.parser,U=R[0];return{type:"overline",mode:k.mode,body:U}},htmlBuilder:function(D,R){var k=lr(D.body,R.havingCrampedStyle()),U=ot.makeLineSpan("overline-line",R),K=R.fontMetrics().defaultRuleThickness,ie=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:k},{type:"kern",size:3*K},{type:"elem",elem:U},{type:"kern",size:K}]},R);return ot.makeSpan(["mord","overline"],[ie],R)},mathmlBuilder:function(D,R){var k=new sn.MathNode("mo",[new sn.TextNode("‾")]);k.setAttribute("stretchy","true");var U=new sn.MathNode("mover",[Ur(D.body,R),k]);return U.setAttribute("accent","true"),U}}),rn({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(D,R){var k=D.parser,U=R[0];return{type:"phantom",mode:k.mode,body:yr(U)}},htmlBuilder:function(D,R){var k=ba(D.body,R.withPhantom(),!1);return ot.makeFragment(k)},mathmlBuilder:function(D,R){var k=il(D.body,R);return new sn.MathNode("mphantom",k)}}),rn({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(D,R){var k=D.parser,U=R[0];return{type:"hphantom",mode:k.mode,body:U}},htmlBuilder:function(D,R){var k=ot.makeSpan([],[lr(D.body,R.withPhantom())]);if(k.height=0,k.depth=0,k.children)for(var U=0;U<k.children.length;U++)k.children[U].height=0,k.children[U].depth=0;return k=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:k}]},R),ot.makeSpan(["mord"],[k],R)},mathmlBuilder:function(D,R){var k=il(yr(D.body),R),U=new sn.MathNode("mphantom",k),K=new sn.MathNode("mpadded",[U]);return K.setAttribute("height","0px"),K.setAttribute("depth","0px"),K}}),rn({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(D,R){var k=D.parser,U=R[0];return{type:"vphantom",mode:k.mode,body:U}},htmlBuilder:function(D,R){var k=ot.makeSpan(["inner"],[lr(D.body,R.withPhantom())]),U=ot.makeSpan(["fix"],[]);return ot.makeSpan(["mord","rlap"],[k,U],R)},mathmlBuilder:function(D,R){var k=il(yr(D.body),R),U=new sn.MathNode("mphantom",k),K=new sn.MathNode("mpadded",[U]);return K.setAttribute("width","0px"),K}}),rn({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(D,R){var k=D.parser,U=Ti(R[0],"size").value,K=R[1];return{type:"raisebox",mode:k.mode,dy:U,body:K}},htmlBuilder:function(D,R){var k=lr(D.body,R),U=lt(D.dy,R);return ot.makeVList({positionType:"shift",positionData:-U,children:[{type:"elem",elem:k}]},R)},mathmlBuilder:function(D,R){var k=new sn.MathNode("mpadded",[Ur(D.body,R)]),U=D.dy.number+D.dy.unit;return k.setAttribute("voffset",U),k}}),rn({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(D,R,k){var U=D.parser,K=k[0],ie=Ti(R[0],"size"),ye=Ti(R[1],"size");return{type:"rule",mode:U.mode,shift:K&&Ti(K,"size").value,width:ie.value,height:ye.value}},htmlBuilder:function(D,R){var k=ot.makeSpan(["mord","rule"],[],R),U=lt(D.width,R),K=lt(D.height,R),ie=D.shift?lt(D.shift,R):0;return k.style.borderRightWidth=$(U),k.style.borderTopWidth=$(K),k.style.bottom=$(ie),k.width=U,k.height=K+ie,k.depth=-ie,k.maxFontSize=K*1.125*R.sizeMultiplier,k},mathmlBuilder:function(D,R){var k=lt(D.width,R),U=lt(D.height,R),K=D.shift?lt(D.shift,R):0,ie=R.color&&R.getColor()||"black",ye=new sn.MathNode("mspace");ye.setAttribute("mathbackground",ie),ye.setAttribute("width",$(k)),ye.setAttribute("height",$(U));var Fe=new sn.MathNode("mpadded",[ye]);return K>=0?Fe.setAttribute("height",$(K)):(Fe.setAttribute("height",$(K)),Fe.setAttribute("depth",$(-K))),Fe.setAttribute("voffset",$(K)),Fe}});function EN(re,D,R){for(var k=ba(re,D,!1),U=D.sizeMultiplier/R.sizeMultiplier,K=0;K<k.length;K++){var ie=k[K].classes.indexOf("sizing");ie<0?Array.prototype.push.apply(k[K].classes,D.sizingClasses(R)):k[K].classes[ie+1]==="reset-size"+D.size&&(k[K].classes[ie+1]="reset-size"+R.size),k[K].height*=U,k[K].depth*=U}return ot.makeFragment(k)}var IN=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Sle=function(D,R){var k=R.havingSize(D.size);return EN(D.body,k,R)};rn({type:"sizing",names:IN,props:{numArgs:0,allowedInText:!0},handler:function(D,R){var k=D.breakOnTokenText,U=D.funcName,K=D.parser,ie=K.parseExpression(!1,k);return{type:"sizing",mode:K.mode,size:IN.indexOf(U)+1,body:ie}},htmlBuilder:Sle,mathmlBuilder:function(D,R){var k=R.havingSize(D.size),U=il(D.body,k),K=new sn.MathNode("mstyle",U);return K.setAttribute("mathsize",$(k.sizeMultiplier)),K}}),rn({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(D,R,k){var U=D.parser,K=!1,ie=!1,ye=k[0]&&Ti(k[0],"ordgroup");if(ye)for(var Fe="",Ye=0;Ye<ye.body.length;++Ye){var ut=ye.body[Ye];if(Fe=ut.text,Fe==="t")K=!0;else if(Fe==="b")ie=!0;else{K=!1,ie=!1;break}}else K=!0,ie=!0;var Dt=R[0];return{type:"smash",mode:U.mode,body:Dt,smashHeight:K,smashDepth:ie}},htmlBuilder:function(D,R){var k=ot.makeSpan([],[lr(D.body,R)]);if(!D.smashHeight&&!D.smashDepth)return k;if(D.smashHeight&&(k.height=0,k.children))for(var U=0;U<k.children.length;U++)k.children[U].height=0;if(D.smashDepth&&(k.depth=0,k.children))for(var K=0;K<k.children.length;K++)k.children[K].depth=0;var ie=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:k}]},R);return ot.makeSpan(["mord"],[ie],R)},mathmlBuilder:function(D,R){var k=new sn.MathNode("mpadded",[Ur(D.body,R)]);return D.smashHeight&&k.setAttribute("height","0px"),D.smashDepth&&k.setAttribute("depth","0px"),k}}),rn({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(D,R,k){var U=D.parser,K=k[0],ie=R[0];return{type:"sqrt",mode:U.mode,body:ie,index:K}},htmlBuilder:function(D,R){var k=lr(D.body,R.havingCrampedStyle());k.height===0&&(k.height=R.fontMetrics().xHeight),k=ot.wrapFragment(k,R);var U=R.fontMetrics(),K=U.defaultRuleThickness,ie=K;R.style.id<N.TEXT.id&&(ie=R.fontMetrics().xHeight);var ye=K+ie/4,Fe=k.height+k.depth+ye+K,Ye=md.sqrtImage(Fe,R),ut=Ye.span,Dt=Ye.ruleWidth,Vt=Ye.advanceWidth,Qt=ut.height-Dt;Qt>k.height+k.depth+ye&&(ye=(ye+Qt-k.height-k.depth)/2);var Zt=ut.height-k.height-ye-Dt;k.style.paddingLeft=$(Vt);var vn=ot.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:k,wrapperClasses:["svg-align"]},{type:"kern",size:-(k.height+Zt)},{type:"elem",elem:ut},{type:"kern",size:Dt}]},R);if(D.index){var yn=R.havingStyle(N.SCRIPTSCRIPT),Wn=lr(D.index,yn,R),Zn=.6*(vn.height-vn.depth),oi=ot.makeVList({positionType:"shift",positionData:-Zn,children:[{type:"elem",elem:Wn}]},R),cr=ot.makeSpan(["root"],[oi]);return ot.makeSpan(["mord","sqrt"],[cr,vn],R)}else return ot.makeSpan(["mord","sqrt"],[vn],R)},mathmlBuilder:function(D,R){var k=D.body,U=D.index;return U?new sn.MathNode("mroot",[Ur(k,R),Ur(U,R)]):new sn.MathNode("msqrt",[Ur(k,R)])}});var DN={display:N.DISPLAY,text:N.TEXT,script:N.SCRIPT,scriptscript:N.SCRIPTSCRIPT};rn({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(D,R){var k=D.breakOnTokenText,U=D.funcName,K=D.parser,ie=K.parseExpression(!0,k),ye=U.slice(1,U.length-5);return{type:"styling",mode:K.mode,style:ye,body:ie}},htmlBuilder:function(D,R){var k=DN[D.style],U=R.havingStyle(k).withFont("");return EN(D.body,U,R)},mathmlBuilder:function(D,R){var k=DN[D.style],U=R.havingStyle(k),K=il(D.body,U),ie=new sn.MathNode("mstyle",K),ye={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},Fe=ye[D.style];return ie.setAttribute("scriptlevel",Fe[0]),ie.setAttribute("displaystyle",Fe[1]),ie}});var _le=function(D,R){var k=D.base;if(k)if(k.type==="op"){var U=k.limits&&(R.style.size===N.DISPLAY.size||k.alwaysHandleSupSub);return U?zm:null}else if(k.type==="operatorname"){var K=k.alwaysHandleSupSub&&(R.style.size===N.DISPLAY.size||k.limits);return K?TN:null}else{if(k.type==="accent")return g.isCharacterBox(k.base)?RT:null;if(k.type==="horizBrace"){var ie=!D.sub;return ie===k.isOver?wN:null}else return null}else return null};Di({type:"supsub",htmlBuilder:function(D,R){var k=_le(D,R);if(k)return k(D,R);var U=D.base,K=D.sup,ie=D.sub,ye=lr(U,R),Fe,Ye,ut=R.fontMetrics(),Dt=0,Vt=0,Qt=U&&g.isCharacterBox(U);if(K){var Zt=R.havingStyle(R.style.sup());Fe=lr(K,Zt,R),Qt||(Dt=ye.height-Zt.fontMetrics().supDrop*Zt.sizeMultiplier/R.sizeMultiplier)}if(ie){var vn=R.havingStyle(R.style.sub());Ye=lr(ie,vn,R),Qt||(Vt=ye.depth+vn.fontMetrics().subDrop*vn.sizeMultiplier/R.sizeMultiplier)}var yn;R.style===N.DISPLAY?yn=ut.sup1:R.style.cramped?yn=ut.sup3:yn=ut.sup2;var Wn=R.sizeMultiplier,Zn=$(.5/ut.ptPerEm/Wn),oi=null;if(Ye){var cr=D.base&&D.base.type==="op"&&D.base.name&&(D.base.name==="\\oiint"||D.base.name==="\\oiiint");(ye instanceof it||cr)&&(oi=$(-ye.italic))}var Tr;if(Fe&&Ye){Dt=Math.max(Dt,yn,Fe.depth+.25*ut.xHeight),Vt=Math.max(Vt,ut.sub2);var rs=ut.defaultRuleThickness,br=4*rs;if(Dt-Fe.depth-(Ye.height-Vt)<br){Vt=br-(Dt-Fe.depth)+Ye.height;var Er=.8*ut.xHeight-(Dt-Fe.depth);Er>0&&(Dt+=Er,Vt-=Er)}var Ss=[{type:"elem",elem:Ye,shift:Vt,marginRight:Zn,marginLeft:oi},{type:"elem",elem:Fe,shift:-Dt,marginRight:Zn}];Tr=ot.makeVList({positionType:"individualShift",children:Ss},R)}else if(Ye){Vt=Math.max(Vt,ut.sub1,Ye.height-.8*ut.xHeight);var Wr=[{type:"elem",elem:Ye,marginLeft:oi,marginRight:Zn}];Tr=ot.makeVList({positionType:"shift",positionData:Vt,children:Wr},R)}else if(Fe)Dt=Math.max(Dt,yn,Fe.depth+.25*ut.xHeight),Tr=ot.makeVList({positionType:"shift",positionData:-Dt,children:[{type:"elem",elem:Fe,marginRight:Zn}]},R);else throw new Error("supsub must have either sup or sub.");var rl=MT(ye,"right")||"mord";return ot.makeSpan([rl],[ye,ot.makeSpan(["msupsub"],[Tr])],R)},mathmlBuilder:function(D,R){var k=!1,U,K;D.base&&D.base.type==="horizBrace"&&(K=!!D.sup,K===D.base.isOver&&(k=!0,U=D.base.isOver)),D.base&&(D.base.type==="op"||D.base.type==="operatorname")&&(D.base.parentIsSupSub=!0);var ie=[Ur(D.base,R)];D.sub&&ie.push(Ur(D.sub,R)),D.sup&&ie.push(Ur(D.sup,R));var ye;if(k)ye=U?"mover":"munder";else if(D.sub)if(D.sup){var ut=D.base;ut&&ut.type==="op"&&ut.limits&&R.style===N.DISPLAY||ut&&ut.type==="operatorname"&&ut.alwaysHandleSupSub&&(R.style===N.DISPLAY||ut.limits)?ye="munderover":ye="msubsup"}else{var Ye=D.base;Ye&&Ye.type==="op"&&Ye.limits&&(R.style===N.DISPLAY||Ye.alwaysHandleSupSub)||Ye&&Ye.type==="operatorname"&&Ye.alwaysHandleSupSub&&(Ye.limits||R.style===N.DISPLAY)?ye="munder":ye="msub"}else{var Fe=D.base;Fe&&Fe.type==="op"&&Fe.limits&&(R.style===N.DISPLAY||Fe.alwaysHandleSupSub)||Fe&&Fe.type==="operatorname"&&Fe.alwaysHandleSupSub&&(Fe.limits||R.style===N.DISPLAY)?ye="mover":ye="msup"}return new sn.MathNode(ye,ie)}}),Di({type:"atom",htmlBuilder:function(D,R){return ot.mathsym(D.text,D.mode,R,["m"+D.family])},mathmlBuilder:function(D,R){var k=new sn.MathNode("mo",[Pl(D.text,D.mode)]);if(D.family==="bin"){var U=IT(D,R);U==="bold-italic"&&k.setAttribute("mathvariant",U)}else D.family==="punct"?k.setAttribute("separator","true"):(D.family==="open"||D.family==="close")&&k.setAttribute("stretchy","false");return k}});var RN={mi:"italic",mn:"normal",mtext:"normal"};Di({type:"mathord",htmlBuilder:function(D,R){return ot.makeOrd(D,R,"mathord")},mathmlBuilder:function(D,R){var k=new sn.MathNode("mi",[Pl(D.text,D.mode,R)]),U=IT(D,R)||"italic";return U!==RN[k.type]&&k.setAttribute("mathvariant",U),k}}),Di({type:"textord",htmlBuilder:function(D,R){return ot.makeOrd(D,R,"textord")},mathmlBuilder:function(D,R){var k=Pl(D.text,D.mode,R),U=IT(D,R)||"normal",K;return D.mode==="text"?K=new sn.MathNode("mtext",[k]):/[0-9]/.test(D.text)?K=new sn.MathNode("mn",[k]):D.text==="\\prime"?K=new sn.MathNode("mo",[k]):K=new sn.MathNode("mi",[k]),U!==RN[K.type]&&K.setAttribute("mathvariant",U),K}});var YT={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},XT={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Di({type:"spacing",htmlBuilder:function(D,R){if(XT.hasOwnProperty(D.text)){var k=XT[D.text].className||"";if(D.mode==="text"){var U=ot.makeOrd(D,R,"textord");return U.classes.push(k),U}else return ot.makeSpan(["mspace",k],[ot.mathsym(D.text,D.mode,R)],R)}else{if(YT.hasOwnProperty(D.text))return ot.makeSpan(["mspace",YT[D.text]],[],R);throw new s('Unknown type of space "'+D.text+'"')}},mathmlBuilder:function(D,R){var k;if(XT.hasOwnProperty(D.text))k=new sn.MathNode("mtext",[new sn.TextNode(" ")]);else{if(YT.hasOwnProperty(D.text))return new sn.MathNode("mspace");throw new s('Unknown type of space "'+D.text+'"')}return k}});var PN=function(){var D=new sn.MathNode("mtd",[]);return D.setAttribute("width","50%"),D};Di({type:"tag",mathmlBuilder:function(D,R){var k=new sn.MathNode("mtable",[new sn.MathNode("mtr",[PN(),new sn.MathNode("mtd",[kf(D.body,R)]),PN(),new sn.MathNode("mtd",[kf(D.tag,R)])])]);return k.setAttribute("width","100%"),k}});var LN={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},kN={"\\textbf":"textbf","\\textmd":"textmd"},Cle={"\\textit":"textit","\\textup":"textup"},FN=function(D,R){var k=D.font;return k?LN[k]?R.withTextFontFamily(LN[k]):kN[k]?R.withTextFontWeight(kN[k]):R.withTextFontShape(Cle[k]):R};rn({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler:function(D,R){var k=D.parser,U=D.funcName,K=R[0];return{type:"text",mode:k.mode,body:yr(K),font:U}},htmlBuilder:function(D,R){var k=FN(D,R),U=ba(D.body,k,!0);return ot.makeSpan(["mord","text"],U,k)},mathmlBuilder:function(D,R){var k=FN(D,R);return kf(D.body,k)}}),rn({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(D,R){var k=D.parser;return{type:"underline",mode:k.mode,body:R[0]}},htmlBuilder:function(D,R){var k=lr(D.body,R),U=ot.makeLineSpan("underline-line",R),K=R.fontMetrics().defaultRuleThickness,ie=ot.makeVList({positionType:"top",positionData:k.height,children:[{type:"kern",size:K},{type:"elem",elem:U},{type:"kern",size:3*K},{type:"elem",elem:k}]},R);return ot.makeSpan(["mord","underline"],[ie],R)},mathmlBuilder:function(D,R){var k=new sn.MathNode("mo",[new sn.TextNode("‾")]);k.setAttribute("stretchy","true");var U=new sn.MathNode("munder",[Ur(D.body,R),k]);return U.setAttribute("accentunder","true"),U}}),rn({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler:function(D,R){var k=D.parser;return{type:"vcenter",mode:k.mode,body:R[0]}},htmlBuilder:function(D,R){var k=lr(D.body,R),U=R.fontMetrics().axisHeight,K=.5*(k.height-U-(k.depth+U));return ot.makeVList({positionType:"shift",positionData:K,children:[{type:"elem",elem:k}]},R)},mathmlBuilder:function(D,R){return new sn.MathNode("mpadded",[Ur(D.body,R)],["vcenter"])}}),rn({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(D,R,k){throw new s("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(D,R){for(var k=BN(D),U=[],K=R.havingStyle(R.style.text()),ie=0;ie<k.length;ie++){var ye=k[ie];ye==="~"&&(ye="\\textasciitilde"),U.push(ot.makeSymbol(ye,"Typewriter-Regular",D.mode,K,["mord","texttt"]))}return ot.makeSpan(["mord","text"].concat(K.sizingClasses(R)),ot.tryCombineChars(U),K)},mathmlBuilder:function(D,R){var k=new sn.TextNode(BN(D)),U=new sn.MathNode("mtext",[k]);return U.setAttribute("mathvariant","monospace"),U}});var BN=function(D){return D.body.replace(/ /g,D.star?"␣":" ")},Mle=si,Bf=Mle,Sc=function(){function re(D,R,k){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=D,this.start=R,this.end=k}return re.range=function(R,k){return k?!R||!R.loc||!k.loc||R.loc.lexer!==k.loc.lexer?null:new re(R.loc.lexer,R.loc.start,k.loc.end):R&&R.loc},re}(),Dp=function(){function re(R,k){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=R,this.loc=k}var D=re.prototype;return D.range=function(k,U){return new re(U,Sc.range(this,k))},re}(),NN=`[ \r
	]`,Tle="\\\\[a-zA-Z@]+",Ele="\\\\[^\uD800-\uDFFF]",Ile="("+Tle+")"+NN+"*",Dle=`\\\\(
|[ \r	]+
?)[ \r	]*`,jT="[̀-ͯ]",Rle=new RegExp(jT+"+$"),Ple="("+NN+"+)|"+(Dle+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(jT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(jT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Ile)+("|"+Ele+")"),ON=function(){function re(R,k){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=R,this.settings=k,this.tokenRegex=new RegExp(Ple,"g"),this.catcodes={"%":14,"~":13}}var D=re.prototype;return D.setCatcode=function(k,U){this.catcodes[k]=U},D.lex=function(){var k=this.input,U=this.tokenRegex.lastIndex;if(U===k.length)return new Dp("EOF",new Sc(this,U,U));var K=this.tokenRegex.exec(k);if(K===null||K.index!==U)throw new s("Unexpected character: '"+k[U]+"'",new Dp(k[U],new Sc(this,U,U+1)));var ie=K[6]||K[3]||(K[2]?"\\ ":" ");if(this.catcodes[ie]===14){var ye=k.indexOf(`
`,this.tokenRegex.lastIndex);return ye===-1?(this.tokenRegex.lastIndex=k.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=ye+1,this.lex()}return new Dp(ie,new Sc(this,U,this.tokenRegex.lastIndex))},re}(),Lle=function(){function re(R,k){R===void 0&&(R={}),k===void 0&&(k={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=k,this.builtins=R,this.undefStack=[]}var D=re.prototype;return D.beginGroup=function(){this.undefStack.push({})},D.endGroup=function(){if(this.undefStack.length===0)throw new s("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var k=this.undefStack.pop();for(var U in k)k.hasOwnProperty(U)&&(k[U]===void 0?delete this.current[U]:this.current[U]=k[U])},D.endGroups=function(){for(;this.undefStack.length>0;)this.endGroup()},D.has=function(k){return this.current.hasOwnProperty(k)||this.builtins.hasOwnProperty(k)},D.get=function(k){return this.current.hasOwnProperty(k)?this.current[k]:this.builtins[k]},D.set=function(k,U,K){if(K===void 0&&(K=!1),K){for(var ie=0;ie<this.undefStack.length;ie++)delete this.undefStack[ie][k];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][k]=U)}else{var ye=this.undefStack[this.undefStack.length-1];ye&&!ye.hasOwnProperty(k)&&(ye[k]=this.current[k])}this.current[k]=U},re}(),kle=MN,Fle=kle;Be("\\noexpand",function(re){var D=re.popToken();return re.isExpandable(D.text)&&(D.noexpand=!0,D.treatAsRelax=!0),{tokens:[D],numArgs:0}}),Be("\\expandafter",function(re){var D=re.popToken();return re.expandOnce(!0),{tokens:[D],numArgs:0}}),Be("\\@firstoftwo",function(re){var D=re.consumeArgs(2);return{tokens:D[0],numArgs:0}}),Be("\\@secondoftwo",function(re){var D=re.consumeArgs(2);return{tokens:D[1],numArgs:0}}),Be("\\@ifnextchar",function(re){var D=re.consumeArgs(3);re.consumeSpaces();var R=re.future();return D[0].length===1&&D[0][0].text===R.text?{tokens:D[1],numArgs:0}:{tokens:D[2],numArgs:0}}),Be("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Be("\\TextOrMath",function(re){var D=re.consumeArgs(2);return re.mode==="text"?{tokens:D[0],numArgs:0}:{tokens:D[1],numArgs:0}});var UN={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Be("\\char",function(re){var D=re.popToken(),R,k="";if(D.text==="'")R=8,D=re.popToken();else if(D.text==='"')R=16,D=re.popToken();else if(D.text==="`")if(D=re.popToken(),D.text[0]==="\\")k=D.text.charCodeAt(1);else{if(D.text==="EOF")throw new s("\\char` missing argument");k=D.text.charCodeAt(0)}else R=10;if(R){if(k=UN[D.text],k==null||k>=R)throw new s("Invalid base-"+R+" digit "+D.text);for(var U;(U=UN[re.future().text])!=null&&U<R;)k*=R,k+=U,re.popToken()}return"\\@char{"+k+"}"});var $T=function(D,R,k){var U=D.consumeArg().tokens;if(U.length!==1)throw new s("\\newcommand's first argument must be a macro name");var K=U[0].text,ie=D.isDefined(K);if(ie&&!R)throw new s("\\newcommand{"+K+"} attempting to redefine "+(K+"; use \\renewcommand"));if(!ie&&!k)throw new s("\\renewcommand{"+K+"} when command "+K+" does not yet exist; use \\newcommand");var ye=0;if(U=D.consumeArg().tokens,U.length===1&&U[0].text==="["){for(var Fe="",Ye=D.expandNextToken();Ye.text!=="]"&&Ye.text!=="EOF";)Fe+=Ye.text,Ye=D.expandNextToken();if(!Fe.match(/^\s*[0-9]+\s*$/))throw new s("Invalid number of arguments: "+Fe);ye=parseInt(Fe),U=D.consumeArg().tokens}return D.macros.set(K,{tokens:U,numArgs:ye}),""};Be("\\newcommand",function(re){return $T(re,!1,!0)}),Be("\\renewcommand",function(re){return $T(re,!0,!1)}),Be("\\providecommand",function(re){return $T(re,!0,!0)}),Be("\\message",function(re){var D=re.consumeArgs(1)[0];return console.log(D.reverse().map(function(R){return R.text}).join("")),""}),Be("\\errmessage",function(re){var D=re.consumeArgs(1)[0];return console.error(D.reverse().map(function(R){return R.text}).join("")),""}),Be("\\show",function(re){var D=re.popToken(),R=D.text;return console.log(D,re.macros.get(R),Bf[R],ai.math[R],ai.text[R]),""}),Be("\\bgroup","{"),Be("\\egroup","}"),Be("~","\\nobreakspace"),Be("\\lq","`"),Be("\\rq","'"),Be("\\aa","\\r a"),Be("\\AA","\\r A"),Be("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),Be("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Be("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),Be("ℬ","\\mathscr{B}"),Be("ℰ","\\mathscr{E}"),Be("ℱ","\\mathscr{F}"),Be("ℋ","\\mathscr{H}"),Be("ℐ","\\mathscr{I}"),Be("ℒ","\\mathscr{L}"),Be("ℳ","\\mathscr{M}"),Be("ℛ","\\mathscr{R}"),Be("ℭ","\\mathfrak{C}"),Be("ℌ","\\mathfrak{H}"),Be("ℨ","\\mathfrak{Z}"),Be("\\Bbbk","\\Bbb{k}"),Be("·","\\cdotp"),Be("\\llap","\\mathllap{\\textrm{#1}}"),Be("\\rlap","\\mathrlap{\\textrm{#1}}"),Be("\\clap","\\mathclap{\\textrm{#1}}"),Be("\\mathstrut","\\vphantom{(}"),Be("\\underbar","\\underline{\\text{#1}}"),Be("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Be("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),Be("\\ne","\\neq"),Be("≠","\\neq"),Be("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),Be("∉","\\notin"),Be("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),Be("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),Be("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),Be("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),Be("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),Be("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),Be("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),Be("⟂","\\perp"),Be("‼","\\mathclose{!\\mkern-0.8mu!}"),Be("∌","\\notni"),Be("⌜","\\ulcorner"),Be("⌝","\\urcorner"),Be("⌞","\\llcorner"),Be("⌟","\\lrcorner"),Be("©","\\copyright"),Be("®","\\textregistered"),Be("️","\\textregistered"),Be("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Be("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Be("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Be("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Be("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Be("⋮","\\vdots"),Be("\\varGamma","\\mathit{\\Gamma}"),Be("\\varDelta","\\mathit{\\Delta}"),Be("\\varTheta","\\mathit{\\Theta}"),Be("\\varLambda","\\mathit{\\Lambda}"),Be("\\varXi","\\mathit{\\Xi}"),Be("\\varPi","\\mathit{\\Pi}"),Be("\\varSigma","\\mathit{\\Sigma}"),Be("\\varUpsilon","\\mathit{\\Upsilon}"),Be("\\varPhi","\\mathit{\\Phi}"),Be("\\varPsi","\\mathit{\\Psi}"),Be("\\varOmega","\\mathit{\\Omega}"),Be("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Be("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),Be("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Be("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Be("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Be("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var zN={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Be("\\dots",function(re){var D="\\dotso",R=re.expandAfterFuture().text;return R in zN?D=zN[R]:(R.substr(0,4)==="\\not"||R in ai.math&&g.contains(["bin","rel"],ai.math[R].group))&&(D="\\dotsb"),D});var QT={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Be("\\dotso",function(re){var D=re.future().text;return D in QT?"\\ldots\\,":"\\ldots"}),Be("\\dotsc",function(re){var D=re.future().text;return D in QT&&D!==","?"\\ldots\\,":"\\ldots"}),Be("\\cdots",function(re){var D=re.future().text;return D in QT?"\\@cdots\\,":"\\@cdots"}),Be("\\dotsb","\\cdots"),Be("\\dotsm","\\cdots"),Be("\\dotsi","\\!\\cdots"),Be("\\dotsx","\\ldots\\,"),Be("\\DOTSI","\\relax"),Be("\\DOTSB","\\relax"),Be("\\DOTSX","\\relax"),Be("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Be("\\,","\\tmspace+{3mu}{.1667em}"),Be("\\thinspace","\\,"),Be("\\>","\\mskip{4mu}"),Be("\\:","\\tmspace+{4mu}{.2222em}"),Be("\\medspace","\\:"),Be("\\;","\\tmspace+{5mu}{.2777em}"),Be("\\thickspace","\\;"),Be("\\!","\\tmspace-{3mu}{.1667em}"),Be("\\negthinspace","\\!"),Be("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Be("\\negthickspace","\\tmspace-{5mu}{.277em}"),Be("\\enspace","\\kern.5em "),Be("\\enskip","\\hskip.5em\\relax"),Be("\\quad","\\hskip1em\\relax"),Be("\\qquad","\\hskip2em\\relax"),Be("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Be("\\tag@paren","\\tag@literal{({#1})}"),Be("\\tag@literal",function(re){if(re.macros.get("\\df@tag"))throw new s("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Be("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Be("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Be("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Be("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Be("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),Be("\\newline","\\\\\\relax"),Be("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var VN=$(ke["Main-Regular"][84][1]-.7*ke["Main-Regular"][65][1]);Be("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+VN+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),Be("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+VN+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),Be("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Be("\\@hspace","\\hskip #1\\relax"),Be("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Be("\\ordinarycolon",":"),Be("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Be("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Be("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Be("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Be("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Be("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Be("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Be("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Be("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Be("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Be("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Be("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Be("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Be("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Be("∷","\\dblcolon"),Be("∹","\\eqcolon"),Be("≔","\\coloneqq"),Be("≕","\\eqqcolon"),Be("⩴","\\Coloneqq"),Be("\\ratio","\\vcentcolon"),Be("\\coloncolon","\\dblcolon"),Be("\\colonequals","\\coloneqq"),Be("\\coloncolonequals","\\Coloneqq"),Be("\\equalscolon","\\eqqcolon"),Be("\\equalscoloncolon","\\Eqqcolon"),Be("\\colonminus","\\coloneq"),Be("\\coloncolonminus","\\Coloneq"),Be("\\minuscolon","\\eqcolon"),Be("\\minuscoloncolon","\\Eqcolon"),Be("\\coloncolonapprox","\\Colonapprox"),Be("\\coloncolonsim","\\Colonsim"),Be("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Be("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Be("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Be("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Be("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),Be("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Be("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Be("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Be("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Be("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Be("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Be("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Be("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Be("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),Be("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),Be("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),Be("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),Be("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),Be("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),Be("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),Be("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),Be("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),Be("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),Be("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),Be("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),Be("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),Be("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),Be("\\imath","\\html@mathml{\\@imath}{ı}"),Be("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),Be("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),Be("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),Be("⟦","\\llbracket"),Be("⟧","\\rrbracket"),Be("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),Be("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),Be("⦃","\\lBrace"),Be("⦄","\\rBrace"),Be("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),Be("⦵","\\minuso"),Be("\\darr","\\downarrow"),Be("\\dArr","\\Downarrow"),Be("\\Darr","\\Downarrow"),Be("\\lang","\\langle"),Be("\\rang","\\rangle"),Be("\\uarr","\\uparrow"),Be("\\uArr","\\Uparrow"),Be("\\Uarr","\\Uparrow"),Be("\\N","\\mathbb{N}"),Be("\\R","\\mathbb{R}"),Be("\\Z","\\mathbb{Z}"),Be("\\alef","\\aleph"),Be("\\alefsym","\\aleph"),Be("\\Alpha","\\mathrm{A}"),Be("\\Beta","\\mathrm{B}"),Be("\\bull","\\bullet"),Be("\\Chi","\\mathrm{X}"),Be("\\clubs","\\clubsuit"),Be("\\cnums","\\mathbb{C}"),Be("\\Complex","\\mathbb{C}"),Be("\\Dagger","\\ddagger"),Be("\\diamonds","\\diamondsuit"),Be("\\empty","\\emptyset"),Be("\\Epsilon","\\mathrm{E}"),Be("\\Eta","\\mathrm{H}"),Be("\\exist","\\exists"),Be("\\harr","\\leftrightarrow"),Be("\\hArr","\\Leftrightarrow"),Be("\\Harr","\\Leftrightarrow"),Be("\\hearts","\\heartsuit"),Be("\\image","\\Im"),Be("\\infin","\\infty"),Be("\\Iota","\\mathrm{I}"),Be("\\isin","\\in"),Be("\\Kappa","\\mathrm{K}"),Be("\\larr","\\leftarrow"),Be("\\lArr","\\Leftarrow"),Be("\\Larr","\\Leftarrow"),Be("\\lrarr","\\leftrightarrow"),Be("\\lrArr","\\Leftrightarrow"),Be("\\Lrarr","\\Leftrightarrow"),Be("\\Mu","\\mathrm{M}"),Be("\\natnums","\\mathbb{N}"),Be("\\Nu","\\mathrm{N}"),Be("\\Omicron","\\mathrm{O}"),Be("\\plusmn","\\pm"),Be("\\rarr","\\rightarrow"),Be("\\rArr","\\Rightarrow"),Be("\\Rarr","\\Rightarrow"),Be("\\real","\\Re"),Be("\\reals","\\mathbb{R}"),Be("\\Reals","\\mathbb{R}"),Be("\\Rho","\\mathrm{P}"),Be("\\sdot","\\cdot"),Be("\\sect","\\S"),Be("\\spades","\\spadesuit"),Be("\\sub","\\subset"),Be("\\sube","\\subseteq"),Be("\\supe","\\supseteq"),Be("\\Tau","\\mathrm{T}"),Be("\\thetasym","\\vartheta"),Be("\\weierp","\\wp"),Be("\\Zeta","\\mathrm{Z}"),Be("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Be("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Be("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Be("\\bra","\\mathinner{\\langle{#1}|}"),Be("\\ket","\\mathinner{|{#1}\\rangle}"),Be("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Be("\\Bra","\\left\\langle#1\\right|"),Be("\\Ket","\\left|#1\\right\\rangle"),Be("\\angln","{\\angl n}"),Be("\\blue","\\textcolor{##6495ed}{#1}"),Be("\\orange","\\textcolor{##ffa500}{#1}"),Be("\\pink","\\textcolor{##ff00af}{#1}"),Be("\\red","\\textcolor{##df0030}{#1}"),Be("\\green","\\textcolor{##28ae7b}{#1}"),Be("\\gray","\\textcolor{gray}{#1}"),Be("\\purple","\\textcolor{##9d38bd}{#1}"),Be("\\blueA","\\textcolor{##ccfaff}{#1}"),Be("\\blueB","\\textcolor{##80f6ff}{#1}"),Be("\\blueC","\\textcolor{##63d9ea}{#1}"),Be("\\blueD","\\textcolor{##11accd}{#1}"),Be("\\blueE","\\textcolor{##0c7f99}{#1}"),Be("\\tealA","\\textcolor{##94fff5}{#1}"),Be("\\tealB","\\textcolor{##26edd5}{#1}"),Be("\\tealC","\\textcolor{##01d1c1}{#1}"),Be("\\tealD","\\textcolor{##01a995}{#1}"),Be("\\tealE","\\textcolor{##208170}{#1}"),Be("\\greenA","\\textcolor{##b6ffb0}{#1}"),Be("\\greenB","\\textcolor{##8af281}{#1}"),Be("\\greenC","\\textcolor{##74cf70}{#1}"),Be("\\greenD","\\textcolor{##1fab54}{#1}"),Be("\\greenE","\\textcolor{##0d923f}{#1}"),Be("\\goldA","\\textcolor{##ffd0a9}{#1}"),Be("\\goldB","\\textcolor{##ffbb71}{#1}"),Be("\\goldC","\\textcolor{##ff9c39}{#1}"),Be("\\goldD","\\textcolor{##e07d10}{#1}"),Be("\\goldE","\\textcolor{##a75a05}{#1}"),Be("\\redA","\\textcolor{##fca9a9}{#1}"),Be("\\redB","\\textcolor{##ff8482}{#1}"),Be("\\redC","\\textcolor{##f9685d}{#1}"),Be("\\redD","\\textcolor{##e84d39}{#1}"),Be("\\redE","\\textcolor{##bc2612}{#1}"),Be("\\maroonA","\\textcolor{##ffbde0}{#1}"),Be("\\maroonB","\\textcolor{##ff92c6}{#1}"),Be("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Be("\\maroonD","\\textcolor{##ca337c}{#1}"),Be("\\maroonE","\\textcolor{##9e034e}{#1}"),Be("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Be("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Be("\\purpleC","\\textcolor{##aa87ff}{#1}"),Be("\\purpleD","\\textcolor{##7854ab}{#1}"),Be("\\purpleE","\\textcolor{##543b78}{#1}"),Be("\\mintA","\\textcolor{##f5f9e8}{#1}"),Be("\\mintB","\\textcolor{##edf2df}{#1}"),Be("\\mintC","\\textcolor{##e0e5cc}{#1}"),Be("\\grayA","\\textcolor{##f6f7f7}{#1}"),Be("\\grayB","\\textcolor{##f0f1f2}{#1}"),Be("\\grayC","\\textcolor{##e3e5e6}{#1}"),Be("\\grayD","\\textcolor{##d6d8da}{#1}"),Be("\\grayE","\\textcolor{##babec2}{#1}"),Be("\\grayF","\\textcolor{##888d93}{#1}"),Be("\\grayG","\\textcolor{##626569}{#1}"),Be("\\grayH","\\textcolor{##3b3e40}{#1}"),Be("\\grayI","\\textcolor{##21242c}{#1}"),Be("\\kaBlue","\\textcolor{##314453}{#1}"),Be("\\kaGreen","\\textcolor{##71B307}{#1}");var HN={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Ble=function(){function re(R,k,U){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=k,this.expansionCount=0,this.feed(R),this.macros=new Lle(Fle,k.macros),this.mode=U,this.stack=[]}var D=re.prototype;return D.feed=function(k){this.lexer=new ON(k,this.settings)},D.switchMode=function(k){this.mode=k},D.beginGroup=function(){this.macros.beginGroup()},D.endGroup=function(){this.macros.endGroup()},D.endGroups=function(){this.macros.endGroups()},D.future=function(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},D.popToken=function(){return this.future(),this.stack.pop()},D.pushToken=function(k){this.stack.push(k)},D.pushTokens=function(k){var U;(U=this.stack).push.apply(U,k)},D.scanArgument=function(k){var U,K,ie;if(k){if(this.consumeSpaces(),this.future().text!=="[")return null;U=this.popToken();var ye=this.consumeArg(["]"]);ie=ye.tokens,K=ye.end}else{var Fe=this.consumeArg();ie=Fe.tokens,U=Fe.start,K=Fe.end}return this.pushToken(new Dp("EOF",K.loc)),this.pushTokens(ie),U.range(K,"")},D.consumeSpaces=function(){for(;;){var k=this.future();if(k.text===" ")this.stack.pop();else break}},D.consumeArg=function(k){var U=[],K=k&&k.length>0;K||this.consumeSpaces();var ie=this.future(),ye,Fe=0,Ye=0;do{if(ye=this.popToken(),U.push(ye),ye.text==="{")++Fe;else if(ye.text==="}"){if(--Fe,Fe===-1)throw new s("Extra }",ye)}else if(ye.text==="EOF")throw new s("Unexpected end of input in a macro argument, expected '"+(k&&K?k[Ye]:"}")+"'",ye);if(k&&K)if((Fe===0||Fe===1&&k[Ye]==="{")&&ye.text===k[Ye]){if(++Ye,Ye===k.length){U.splice(-Ye,Ye);break}}else Ye=0}while(Fe!==0||K);return ie.text==="{"&&U[U.length-1].text==="}"&&(U.pop(),U.shift()),U.reverse(),{tokens:U,start:ie,end:ye}},D.consumeArgs=function(k,U){if(U){if(U.length!==k+1)throw new s("The length of delimiters doesn't match the number of args!");for(var K=U[0],ie=0;ie<K.length;ie++){var ye=this.popToken();if(K[ie]!==ye.text)throw new s("Use of the macro doesn't match its definition",ye)}}for(var Fe=[],Ye=0;Ye<k;Ye++)Fe.push(this.consumeArg(U&&U[Ye+1]).tokens);return Fe},D.expandOnce=function(k){var U=this.popToken(),K=U.text,ie=U.noexpand?null:this._getExpansion(K);if(ie==null||k&&ie.unexpandable){if(k&&ie==null&&K[0]==="\\"&&!this.isDefined(K))throw new s("Undefined control sequence: "+K);return this.pushToken(U),U}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new s("Too many expansions: infinite loop or need to increase maxExpand setting");var ye=ie.tokens,Fe=this.consumeArgs(ie.numArgs,ie.delimiters);if(ie.numArgs){ye=ye.slice();for(var Ye=ye.length-1;Ye>=0;--Ye){var ut=ye[Ye];if(ut.text==="#"){if(Ye===0)throw new s("Incomplete placeholder at end of macro body",ut);if(ut=ye[--Ye],ut.text==="#")ye.splice(Ye+1,1);else if(/^[1-9]$/.test(ut.text)){var Dt;(Dt=ye).splice.apply(Dt,[Ye,2].concat(Fe[+ut.text-1]))}else throw new s("Not a valid argument number",ut)}}}return this.pushTokens(ye),ye},D.expandAfterFuture=function(){return this.expandOnce(),this.future()},D.expandNextToken=function(){for(;;){var k=this.expandOnce();if(k instanceof Dp)if(k.text==="\\relax"||k.treatAsRelax)this.stack.pop();else return this.stack.pop()}throw new Error},D.expandMacro=function(k){return this.macros.has(k)?this.expandTokens([new Dp(k)]):void 0},D.expandTokens=function(k){var U=[],K=this.stack.length;for(this.pushTokens(k);this.stack.length>K;){var ie=this.expandOnce(!0);ie instanceof Dp&&(ie.treatAsRelax&&(ie.noexpand=!1,ie.treatAsRelax=!1),U.push(this.stack.pop()))}return U},D.expandMacroAsText=function(k){var U=this.expandMacro(k);return U&&U.map(function(K){return K.text}).join("")},D._getExpansion=function(k){var U=this.macros.get(k);if(U==null)return U;if(k.length===1){var K=this.lexer.catcodes[k];if(K!=null&&K!==13)return}var ie=typeof U=="function"?U(this):U;if(typeof ie=="string"){var ye=0;if(ie.indexOf("#")!==-1)for(var Fe=ie.replace(/##/g,"");Fe.indexOf("#"+(ye+1))!==-1;)++ye;for(var Ye=new ON(ie,this.settings),ut=[],Dt=Ye.lex();Dt.text!=="EOF";)ut.push(Dt),Dt=Ye.lex();ut.reverse();var Vt={tokens:ut,numArgs:ye};return Vt}return ie},D.isDefined=function(k){return this.macros.has(k)||Bf.hasOwnProperty(k)||ai.math.hasOwnProperty(k)||ai.text.hasOwnProperty(k)||HN.hasOwnProperty(k)},D.isExpandable=function(k){var U=this.macros.get(k);return U!=null?typeof U=="string"||typeof U=="function"||!U.unexpandable:Bf.hasOwnProperty(k)&&!Bf[k].primitive},re}(),ZT={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},GN={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"},WN=function(){function re(R,k){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ble(R,k,this.mode),this.settings=k,this.leftrightDepth=0}var D=re.prototype;return D.expect=function(k,U){if(U===void 0&&(U=!0),this.fetch().text!==k)throw new s("Expected '"+k+"', got '"+this.fetch().text+"'",this.fetch());U&&this.consume()},D.consume=function(){this.nextToken=null},D.fetch=function(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},D.switchMode=function(k){this.mode=k,this.gullet.switchMode(k)},D.parse=function(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var k=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),k}finally{this.gullet.endGroups()}},D.parseExpression=function(k,U){for(var K=[];;){this.mode==="math"&&this.consumeSpaces();var ie=this.fetch();if(re.endOfExpression.indexOf(ie.text)!==-1||U&&ie.text===U||k&&Bf[ie.text]&&Bf[ie.text].infix)break;var ye=this.parseAtom(U);if(ye){if(ye.type==="internal")continue}else break;K.push(ye)}return this.mode==="text"&&this.formLigatures(K),this.handleInfixNodes(K)},D.handleInfixNodes=function(k){for(var U=-1,K,ie=0;ie<k.length;ie++)if(k[ie].type==="infix"){if(U!==-1)throw new s("only one infix operator per group",k[ie].token);U=ie,K=k[ie].replaceWith}if(U!==-1&&K){var ye,Fe,Ye=k.slice(0,U),ut=k.slice(U+1);Ye.length===1&&Ye[0].type==="ordgroup"?ye=Ye[0]:ye={type:"ordgroup",mode:this.mode,body:Ye},ut.length===1&&ut[0].type==="ordgroup"?Fe=ut[0]:Fe={type:"ordgroup",mode:this.mode,body:ut};var Dt;return K==="\\\\abovefrac"?Dt=this.callFunction(K,[ye,k[U],Fe],[]):Dt=this.callFunction(K,[ye,Fe],[]),[Dt]}else return k},D.handleSupSubscript=function(k){var U=this.fetch(),K=U.text;this.consume(),this.consumeSpaces();var ie=this.parseGroup(k);if(!ie)throw new s("Expected group after '"+K+"'",U);return ie},D.formatUnsupportedCmd=function(k){for(var U=[],K=0;K<k.length;K++)U.push({type:"textord",mode:"text",text:k[K]});var ie={type:"text",mode:this.mode,body:U},ye={type:"color",mode:this.mode,color:this.settings.errorColor,body:[ie]};return ye},D.parseAtom=function(k){var U=this.parseGroup("atom",k);if(this.mode==="text")return U;for(var K,ie;;){this.consumeSpaces();var ye=this.fetch();if(ye.text==="\\limits"||ye.text==="\\nolimits"){if(U&&U.type==="op"){var Fe=ye.text==="\\limits";U.limits=Fe,U.alwaysHandleSupSub=!0}else if(U&&U.type==="operatorname")U.alwaysHandleSupSub&&(U.limits=ye.text==="\\limits");else throw new s("Limit controls must follow a math operator",ye);this.consume()}else if(ye.text==="^"){if(K)throw new s("Double superscript",ye);K=this.handleSupSubscript("superscript")}else if(ye.text==="_"){if(ie)throw new s("Double subscript",ye);ie=this.handleSupSubscript("subscript")}else if(ye.text==="'"){if(K)throw new s("Double superscript",ye);var Ye={type:"textord",mode:this.mode,text:"\\prime"},ut=[Ye];for(this.consume();this.fetch().text==="'";)ut.push(Ye),this.consume();this.fetch().text==="^"&&ut.push(this.handleSupSubscript("superscript")),K={type:"ordgroup",mode:this.mode,body:ut}}else break}return K||ie?{type:"supsub",mode:this.mode,base:U,sup:K,sub:ie}:U},D.parseFunction=function(k,U){var K=this.fetch(),ie=K.text,ye=Bf[ie];if(!ye)return null;if(this.consume(),U&&U!=="atom"&&!ye.allowedInArgument)throw new s("Got function '"+ie+"' with no arguments"+(U?" as "+U:""),K);if(this.mode==="text"&&!ye.allowedInText)throw new s("Can't use function '"+ie+"' in text mode",K);if(this.mode==="math"&&ye.allowedInMath===!1)throw new s("Can't use function '"+ie+"' in math mode",K);var Fe=this.parseArguments(ie,ye),Ye=Fe.args,ut=Fe.optArgs;return this.callFunction(ie,Ye,ut,K,k)},D.callFunction=function(k,U,K,ie,ye){var Fe={funcName:k,parser:this,token:ie,breakOnTokenText:ye},Ye=Bf[k];if(Ye&&Ye.handler)return Ye.handler(Fe,U,K);throw new s("No function handler for "+k)},D.parseArguments=function(k,U){var K=U.numArgs+U.numOptionalArgs;if(K===0)return{args:[],optArgs:[]};for(var ie=[],ye=[],Fe=0;Fe<K;Fe++){var Ye=U.argTypes&&U.argTypes[Fe],ut=Fe<U.numOptionalArgs;(U.primitive&&Ye==null||U.type==="sqrt"&&Fe===1&&ye[0]==null)&&(Ye="primitive");var Dt=this.parseGroupOfType("argument to '"+k+"'",Ye,ut);if(ut)ye.push(Dt);else if(Dt!=null)ie.push(Dt);else throw new s("Null argument, please report this as a bug")}return{args:ie,optArgs:ye}},D.parseGroupOfType=function(k,U,K){switch(U){case"color":return this.parseColorGroup(K);case"size":return this.parseSizeGroup(K);case"url":return this.parseUrlGroup(K);case"math":case"text":return this.parseArgumentGroup(K,U);case"hbox":{var ie=this.parseArgumentGroup(K,"text");return ie!=null?{type:"styling",mode:ie.mode,body:[ie],style:"text"}:null}case"raw":{var ye=this.parseStringGroup("raw",K);return ye!=null?{type:"raw",mode:"text",string:ye.text}:null}case"primitive":{if(K)throw new s("A primitive argument cannot be optional");var Fe=this.parseGroup(k);if(Fe==null)throw new s("Expected group as "+k,this.fetch());return Fe}case"original":case null:case void 0:return this.parseArgumentGroup(K);default:throw new s("Unknown group type as "+k,this.fetch())}},D.consumeSpaces=function(){for(;this.fetch().text===" ";)this.consume()},D.parseStringGroup=function(k,U){var K=this.gullet.scanArgument(U);if(K==null)return null;for(var ie="",ye;(ye=this.fetch()).text!=="EOF";)ie+=ye.text,this.consume();return this.consume(),K.text=ie,K},D.parseRegexGroup=function(k,U){for(var K=this.fetch(),ie=K,ye="",Fe;(Fe=this.fetch()).text!=="EOF"&&k.test(ye+Fe.text);)ie=Fe,ye+=ie.text,this.consume();if(ye==="")throw new s("Invalid "+U+": '"+K.text+"'",K);return K.range(ie,ye)},D.parseColorGroup=function(k){var U=this.parseStringGroup("color",k);if(U==null)return null;var K=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(U.text);if(!K)throw new s("Invalid color: '"+U.text+"'",U);var ie=K[0];return/^[0-9a-f]{6}$/i.test(ie)&&(ie="#"+ie),{type:"color-token",mode:this.mode,color:ie}},D.parseSizeGroup=function(k){var U,K=!1;if(this.gullet.consumeSpaces(),!k&&this.gullet.future().text!=="{"?U=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):U=this.parseStringGroup("size",k),!U)return null;!k&&U.text.length===0&&(U.text="0pt",K=!0);var ie=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(U.text);if(!ie)throw new s("Invalid size: '"+U.text+"'",U);var ye={number:+(ie[1]+ie[2]),unit:ie[3]};if(!gt(ye))throw new s("Invalid unit: '"+ye.unit+"'",U);return{type:"size",mode:this.mode,value:ye,isBlank:K}},D.parseUrlGroup=function(k){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var U=this.parseStringGroup("url",k);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),U==null)return null;var K=U.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:K}},D.parseArgumentGroup=function(k,U){var K=this.gullet.scanArgument(k);if(K==null)return null;var ie=this.mode;U&&this.switchMode(U),this.gullet.beginGroup();var ye=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var Fe={type:"ordgroup",mode:this.mode,loc:K.loc,body:ye};return U&&this.switchMode(ie),Fe},D.parseGroup=function(k,U){var K=this.fetch(),ie=K.text,ye;if(ie==="{"||ie==="\\begingroup"){this.consume();var Fe=ie==="{"?"}":"\\endgroup";this.gullet.beginGroup();var Ye=this.parseExpression(!1,Fe),ut=this.fetch();this.expect(Fe),this.gullet.endGroup(),ye={type:"ordgroup",mode:this.mode,loc:Sc.range(K,ut),body:Ye,semisimple:ie==="\\begingroup"||void 0}}else if(ye=this.parseFunction(U,k)||this.parseSymbol(),ye==null&&ie[0]==="\\"&&!HN.hasOwnProperty(ie)){if(this.settings.throwOnError)throw new s("Undefined control sequence: "+ie,K);ye=this.formatUnsupportedCmd(ie),this.consume()}return ye},D.formLigatures=function(k){for(var U=k.length-1,K=0;K<U;++K){var ie=k[K],ye=ie.text;ye==="-"&&k[K+1].text==="-"&&(K+1<U&&k[K+2].text==="-"?(k.splice(K,3,{type:"textord",mode:"text",loc:Sc.range(ie,k[K+2]),text:"---"}),U-=2):(k.splice(K,2,{type:"textord",mode:"text",loc:Sc.range(ie,k[K+1]),text:"--"}),U-=1)),(ye==="'"||ye==="`")&&k[K+1].text===ye&&(k.splice(K,2,{type:"textord",mode:"text",loc:Sc.range(ie,k[K+1]),text:ye+ye}),U-=1)}},D.parseSymbol=function(){var k=this.fetch(),U=k.text;if(/^\\verb[^a-zA-Z]/.test(U)){this.consume();var K=U.slice(5),ie=K.charAt(0)==="*";if(ie&&(K=K.slice(1)),K.length<2||K.charAt(0)!==K.slice(-1))throw new s(`\\verb assertion failed --
                    please report what input caused this bug`);return K=K.slice(1,-1),{type:"verb",mode:"text",body:K,star:ie}}GN.hasOwnProperty(U[0])&&!ai[this.mode][U[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+U[0]+'" used in math mode',k),U=GN[U[0]]+U.substr(1));var ye=Rle.exec(U);ye&&(U=U.substring(0,ye.index),U==="i"?U="ı":U==="j"&&(U="ȷ"));var Fe;if(ai[this.mode][U]){this.settings.strict&&this.mode==="math"&&Mi.indexOf(U)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+U[0]+'" used in math mode',k);var Ye=ai[this.mode][U].group,ut=Sc.range(k),Dt;if(pi.hasOwnProperty(Ye)){var Vt=Ye;Dt={type:"atom",mode:this.mode,family:Vt,loc:ut,text:U}}else Dt={type:Ye,mode:this.mode,loc:ut,text:U};Fe=Dt}else if(U.charCodeAt(0)>=128)this.settings.strict&&(Q(U.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+U[0]+'" used in math mode',k):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+U[0]+'"'+(" ("+U.charCodeAt(0)+")"),k)),Fe={type:"textord",mode:"text",loc:Sc.range(k),text:U};else return null;if(this.consume(),ye)for(var Qt=0;Qt<ye[0].length;Qt++){var Zt=ye[0][Qt];if(!ZT[Zt])throw new s("Unknown accent ' "+Zt+"'",k);var vn=ZT[Zt][this.mode]||ZT[Zt].text;if(!vn)throw new s("Accent "+Zt+" unsupported in "+this.mode+" mode",k);Fe={type:"accent",mode:this.mode,loc:Sc.range(k),label:vn,isStretchy:!1,isShifty:!0,base:Fe}}return Fe},re}();WN.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Nle=function(D,R){if(!(typeof D=="string"||D instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var k=new WN(D,R);delete k.gullet.macros.current["\\df@tag"];var U=k.parse();if(delete k.gullet.macros.current["\\current@color"],delete k.gullet.macros.current["\\color"],k.gullet.macros.get("\\df@tag")){if(!R.displayMode)throw new s("\\tag works only in display equations");k.gullet.feed("\\df@tag"),U=[{type:"tag",mode:"text",body:U,tag:k.parse()}]}return U},JT=Nle,qN=function(D,R,k){R.textContent="";var U=e5(D,k).toNode();R.appendChild(U)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),qN=function(){throw new s("KaTeX doesn't work in quirks mode.")});var Ole=function(D,R){var k=e5(D,R).toMarkup();return k},Ule=function(D,R){var k=new y(R);return JT(D,k)},KN=function(D,R,k){if(k.throwOnError||!(D instanceof s))throw D;var U=ot.makeSpan(["katex-error"],[new it(R)]);return U.setAttribute("title",D.toString()),U.setAttribute("style","color:"+k.errorColor),U},e5=function(D,R){var k=new y(R);try{var U=JT(D,k);return Woe(U,D,k)}catch(K){return KN(K,D,k)}},zle=function(D,R){var k=new y(R);try{var U=JT(D,k);return qoe(U,D,k)}catch(K){return KN(K,D,k)}},Vle={version:"0.13.24",render:qN,renderToString:Ole,ParseError:s,__parse:Ule,__renderToDomTree:e5,__renderToHTMLTree:zle,__setFontMetrics:qe,__defineSymbol:X,__defineMacro:Be,__domTree:{Span:Ae,Anchor:dt,SymbolNode:it,SvgNode:wt,PathNode:Ft,LineNode:Rt}},Hle=Vle;return i=i.default,i}()})}(R_)),R_.exports}var Rqe=Dqe();const Pqe=uu(Rqe),Lqe=(n,e={},t)=>{const{props:i,domProps:r,on:s,...a}=e,o={...a,...i,...r,...(l=>l?Object.entries(l).reduce((c,[u,d])=>({...c,[u=`on${u=u.charAt(0).toUpperCase()+u.slice(1)}`]:d}),{}):null)(s)};return en(n,o,t)};var y6=Ie({name:"VueLatex",props:{fontsize:{type:Number,default:16},expression:{type:String,required:!0},displayMode:{type:Boolean,default:!1},throwOnError:{type:Boolean,default:!1},errorColor:{type:String,default:void 0},minRuleThickness:{type:Number,default:.04},macros:{type:Object,default:void 0},colorIsTextColor:{type:Boolean,default:void 0},maxSize:{type:Number,default:void 0},maxExpand:{type:Number,default:void 0},allowedProtocols:{type:Array,default:void 0},strict:{type:[Boolean,String,Function],default:void 0}},setup:n=>({html:V(()=>Pqe.renderToString(n.expression,n))}),render(){return Lqe(this.displayMode?"div":"span",{domProps:{innerHTML:this.html},style:{"font-size":`${this.fontsize}px`}})}});y6.install=n=>{n.component(y6.name,y6)};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const SF="143",hv={ROTATE:0,DOLLY:1,PAN:2},pv={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},kqe=0,yW=1,Fqe=2,qre=1,Bqe=2,X2=3,dp=0,Zc=1,fp=2,Nqe=1,Kh=0,t1=1,bW=2,xW=3,AW=4,Oqe=5,ug=100,Uqe=101,zqe=102,wW=103,SW=104,Vqe=200,Hqe=201,Gqe=202,Wqe=203,Kre=204,Yre=205,qqe=206,Kqe=207,Yqe=208,Xqe=209,jqe=210,$qe=0,Qqe=1,Zqe=2,zR=3,Jqe=4,eKe=5,tKe=6,nKe=7,dT=0,iKe=1,rKe=2,af=0,sKe=1,aKe=2,oKe=3,lKe=4,cKe=5,_F=300,gm=301,ym=302,Nx=303,c4=304,kA=306,Ko=1e3,$s=1001,Ox=1002,ua=1003,u4=1004,d4=1005,Bs=1006,CF=1007,Pf=1008,bm=1009,uKe=1010,dKe=1011,Xre=1012,fKe=1013,O0=1014,Nh=1015,Ux=1016,hKe=1017,pKe=1018,n1=1020,mKe=1021,vKe=1022,ic=1023,gKe=1024,yKe=1025,J0=1026,k1=1027,bKe=1028,xKe=1029,AKe=1030,wKe=1031,SKe=1033,P_=33776,b6=33777,L_=33778,k_=33779,_W=35840,CW=35841,MW=35842,TW=35843,jre=36196,EW=37492,IW=37496,DW=37808,RW=37809,PW=37810,LW=37811,kW=37812,FW=37813,BW=37814,NW=37815,OW=37816,UW=37817,zW=37818,VW=37819,HW=37820,GW=37821,WW=36492,_Ke=2200,CKe=2201,MKe=2202,zx=2300,F1=2301,x6=2302,Tg=2400,Eg=2401,f4=2402,MF=2500,TKe=2501,EKe=1,$re=2,hp=3e3,Ni=3001,IKe=3200,DKe=3201,km=0,RKe=1,Od="srgb",U0="srgb-linear",A6=7680,PKe=519,VR=35044,qW="300 es",HR=1035;let Mp=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const Oa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KW=1234567;const i1=Math.PI/180,Vx=180/Math.PI;function cc(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Oa[n&255]+Oa[n>>8&255]+Oa[n>>16&255]+Oa[n>>24&255]+"-"+Oa[e&255]+Oa[e>>8&255]+"-"+Oa[e>>16&15|64]+Oa[e>>24&255]+"-"+Oa[t&63|128]+Oa[t>>8&255]+"-"+Oa[t>>16&255]+Oa[t>>24&255]+Oa[i&255]+Oa[i>>8&255]+Oa[i>>16&255]+Oa[i>>24&255]).toLowerCase()}function Ys(n,e,t){return Math.max(e,Math.min(t,n))}function TF(n,e){return(n%e+e)%e}function LKe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function kKe(n,e,t){return n!==e?(t-n)/(e-n):0}function Db(n,e,t){return(1-t)*n+t*e}function FKe(n,e,t,i){return Db(n,e,1-Math.exp(-t*i))}function BKe(n,e=1){return e-Math.abs(TF(n,e*2)-e)}function NKe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function OKe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function UKe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function zKe(n,e){return n+Math.random()*(e-n)}function VKe(n){return n*(.5-Math.random())}function HKe(n){n!==void 0&&(KW=n);let e=KW+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function GKe(n){return n*i1}function WKe(n){return n*Vx}function GR(n){return(n&n-1)===0&&n!==0}function Qre(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function h4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function qKe(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+i)/2),u=a((e+i)/2),d=s((e-i)/2),f=a((e-i)/2),h=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":n.set(o*u,l*d,l*f,o*c);break;case"YZY":n.set(l*f,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*f,o*u,o*c);break;case"XZX":n.set(o*u,l*p,l*h,o*c);break;case"YXY":n.set(l*h,o*u,l*p,o*c);break;case"ZYZ":n.set(l*p,l*h,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function KKe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function YKe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var $a=Object.freeze({__proto__:null,DEG2RAD:i1,RAD2DEG:Vx,generateUUID:cc,clamp:Ys,euclideanModulo:TF,mapLinear:LKe,inverseLerp:kKe,lerp:Db,damp:FKe,pingpong:BKe,smoothstep:NKe,smootherstep:OKe,randInt:UKe,randFloat:zKe,randFloatSpread:VKe,seededRandom:HKe,degToRad:GKe,radToDeg:WKe,isPowerOfTwo:GR,ceilPowerOfTwo:Qre,floorPowerOfTwo:h4,setQuaternionFromProperEuler:qKe,normalize:YKe,denormalize:KKe});let Gt=class Zre{constructor(e=0,t=0){Zre.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},rc=class Jre{constructor(){Jre.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],h=i[5],p=i[8],m=r[0],v=r[3],g=r[6],y=r[1],x=r[4],b=r[7],A=r[2],S=r[5],C=r[8];return s[0]=a*m+o*y+l*A,s[3]=a*v+o*x+l*S,s[6]=a*g+o*b+l*C,s[1]=c*m+u*y+d*A,s[4]=c*v+u*x+d*S,s[7]=c*g+u*b+d*C,s[2]=f*m+h*y+p*A,s[5]=f*v+h*x+p*S,s[8]=f*g+h*b+p*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,f=o*l-u*s,h=c*s-a*l,p=t*d+i*f+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*c-u*i)*m,e[2]=(o*i-r*a)*m,e[3]=f*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-o*t)*m,e[6]=h*m,e[7]=(i*l-c*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*a+i*c,r[6]=t*o+i*u,r[1]=-i*s+t*l,r[4]=-i*a+t*c,r[7]=-i*o+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function ese(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const XKe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ig(n,e){return new XKe[n](e)}function Hx(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function em(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function F_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const w6={[Od]:{[U0]:em},[U0]:{[Od]:F_}},Mc={legacyMode:!0,get workingColorSpace(){return U0},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(w6[e]&&w6[e][t]!==void 0){const i=w6[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},tse={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ws={r:0,g:0,b:0},Tc={h:0,s:0,l:0},fS={h:0,s:0,l:0};function S6(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function hS(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let wn=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Od){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Mc.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=U0){return this.r=e,this.g=t,this.b=i,Mc.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=U0){if(e=TF(e,1),t=Ys(t,0,1),i=Ys(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=S6(a,s,e+1/3),this.g=S6(a,s,e),this.b=S6(a,s,e-1/3)}return Mc.toWorkingColorSpace(this,r),this}setStyle(e,t=Od){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Mc.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Mc.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,u=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(l,c,u,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Mc.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Mc.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Od){const i=tse[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=em(e.r),this.g=em(e.g),this.b=em(e.b),this}copyLinearToSRGB(e){return this.r=F_(e.r),this.g=F_(e.g),this.b=F_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Od){return Mc.fromWorkingColorSpace(hS(this,Ws),e),Ys(Ws.r*255,0,255)<<16^Ys(Ws.g*255,0,255)<<8^Ys(Ws.b*255,0,255)<<0}getHexString(e=Od){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=U0){Mc.fromWorkingColorSpace(hS(this,Ws),t);const i=Ws.r,r=Ws.g,s=Ws.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=U0){return Mc.fromWorkingColorSpace(hS(this,Ws),t),e.r=Ws.r,e.g=Ws.g,e.b=Ws.b,e}getStyle(e=Od){return Mc.fromWorkingColorSpace(hS(this,Ws),e),e!==Od?`color(${e} ${Ws.r} ${Ws.g} ${Ws.b})`:`rgb(${Ws.r*255|0},${Ws.g*255|0},${Ws.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Tc),Tc.h+=e,Tc.s+=t,Tc.l+=i,this.setHSL(Tc.h,Tc.s,Tc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Tc),e.getHSL(fS);const i=Db(Tc.h,fS.h,t),r=Db(Tc.s,fS.s,t),s=Db(Tc.l,fS.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};wn.NAMES=tse;let mv,nse=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{mv===void 0&&(mv=Hx("canvas")),mv.width=e.width,mv.height=e.height;const i=mv.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=mv}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Hx("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=em(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(em(t[i]/255)*255):t[i]=em(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Dg=class{constructor(e=null){this.isSource=!0,this.uuid=cc(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(_6(r[a].image)):s.push(_6(r[a]))}else s=_6(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function _6(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?nse.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jKe=0,Pa=class WR extends Mp{constructor(e=WR.DEFAULT_IMAGE,t=WR.DEFAULT_MAPPING,i=$s,r=$s,s=Bs,a=Pf,o=ic,l=bm,c=1,u=hp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jKe++}),this.uuid=cc(),this.name="",this.source=new Dg(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Gt(0,0),this.repeat=new Gt(1,1),this.center=new Gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_F)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ko:e.x=e.x-Math.floor(e.x);break;case $s:e.x=e.x<0?0:1;break;case Ox:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ko:e.y=e.y-Math.floor(e.y);break;case $s:e.y=e.y<0?0:1;break;case Ox:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Pa.DEFAULT_IMAGE=null;Pa.DEFAULT_MAPPING=_F;let gr=class ise{constructor(e=0,t=0,i=0,r=1){ise.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(c+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,b=(h+1)/2,A=(g+1)/2,S=(u+f)/4,C=(d+m)/4,_=(p+v)/4;return x>b&&x>A?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=S/i,s=C/i):b>A?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=S/r,s=_/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=C/s,r=_/s),this.set(i,r,s,t),this}let y=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(v-p)/y,this.y=(d-m)/y,this.z=(f-u)/y,this.w=Math.acos((c+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},xm=class extends Mp{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new gr(0,0,e,t),this.scissorTest=!1,this.viewport=new gr(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Pa(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Bs,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Dg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},rse=class extends Pa{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ua,this.minFilter=ua,this.wrapR=$s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},$Ke=class extends Pa{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ua,this.minFilter=ua,this.wrapR=$s,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Ta=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const f=s[a+0],h=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||c!==h||u!==p){let v=1-o;const g=l*f+c*h+u*p+d*m,y=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const A=Math.sqrt(x),S=Math.atan2(A,g*y);v=Math.sin(v*S)/A,o=Math.sin(o*S)/A}const b=o*y;if(l=l*v+f*b,c=c*v+h*b,u=u*v+p*b,d=d*v+m*b,v===1-o){const A=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=A,c*=A,u*=A,d*=A}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[a],f=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+u*d+l*h-c*f,e[t+1]=l*p+u*f+c*d-o*h,e[t+2]=c*p+u*h+o*f-l*d,e[t+3]=u*p-o*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),d=o(s/2),f=l(i/2),h=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(a-r)*h}else if(i>o&&i>d){const h=2*Math.sqrt(1+i-o-d);this._w=(u-l)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(s+c)/h}else if(o>d){const h=2*Math.sqrt(1+o-i-d);this._w=(s-c)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-i-o);this._w=(a-r)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ys(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*a+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=a*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},$e=class sse{constructor(e=0,t=0,i=0){sse.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(YW.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(YW.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*r-o*i,u=l*i+o*t-s*r,d=l*r+s*i-a*t,f=-s*t-a*i-o*r;return this.x=c*l+f*-s+u*-o-d*-a,this.y=u*l+f*-a+d*-s-c*-o,this.z=d*l+f*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return C6.copy(this).projectOnVector(e),this.sub(C6)}reflect(e){return this.sub(C6.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ys(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const C6=new $e,YW=new Ta;let Fm=class{constructor(e=new $e(1/0,1/0,1/0),t=new $e(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],f=e[l+2];u<t&&(t=u),d<i&&(i=d),f<r&&(r=f),u>s&&(s=u),d>a&&(a=d),f>o&&(o=f)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),f=e.getZ(l);u<t&&(t=u),d<i&&(i=d),f<r&&(r=f),u>s&&(s=u),d>a&&(a=d),f>o&&(o=f)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=r0.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)r0.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(r0)}else i.boundingBox===null&&i.computeBoundingBox(),M6.copy(i.boundingBox),M6.applyMatrix4(e.matrixWorld),this.union(M6);const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,r0),r0.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(y2),pS.subVectors(this.max,y2),vv.subVectors(e.a,y2),gv.subVectors(e.b,y2),yv.subVectors(e.c,y2),jf.subVectors(gv,vv),$f.subVectors(yv,gv),s0.subVectors(vv,yv);let t=[0,-jf.z,jf.y,0,-$f.z,$f.y,0,-s0.z,s0.y,jf.z,0,-jf.x,$f.z,0,-$f.x,s0.z,0,-s0.x,-jf.y,jf.x,0,-$f.y,$f.x,0,-s0.y,s0.x,0];return!T6(t,vv,gv,yv,pS)||(t=[1,0,0,0,1,0,0,0,1],!T6(t,vv,gv,yv,pS))?!1:(mS.crossVectors(jf,$f),t=[mS.x,mS.y,mS.z],T6(t,vv,gv,yv,pS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return r0.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(r0).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ad[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ad[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ad[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ad[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ad[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ad[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ad[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ad[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ad),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const Ad=[new $e,new $e,new $e,new $e,new $e,new $e,new $e,new $e],r0=new $e,M6=new Fm,vv=new $e,gv=new $e,yv=new $e,jf=new $e,$f=new $e,s0=new $e,y2=new $e,pS=new $e,mS=new $e,a0=new $e;function T6(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){a0.fromArray(n,s);const o=r.x*Math.abs(a0.x)+r.y*Math.abs(a0.y)+r.z*Math.abs(a0.z),l=e.dot(a0),c=t.dot(a0),u=i.dot(a0);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const QKe=new Fm,XW=new $e,vS=new $e,E6=new $e;let Bm=class{constructor(e=new $e,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):QKe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){E6.subVectors(e,this.center);const t=E6.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(E6.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?vS.set(0,0,1).multiplyScalar(e.radius):vS.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(XW.copy(e.center).add(vS)),this.expandByPoint(XW.copy(e.center).sub(vS)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const wd=new $e,I6=new $e,gS=new $e,Qf=new $e,D6=new $e,yS=new $e,R6=new $e;let fT=class{constructor(e=new $e,t=new $e(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,wd)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=wd.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(wd.copy(this.direction).multiplyScalar(t).add(this.origin),wd.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){I6.copy(e).add(t).multiplyScalar(.5),gS.copy(t).sub(e).normalize(),Qf.copy(this.origin).sub(I6);const s=e.distanceTo(t)*.5,a=-this.direction.dot(gS),o=Qf.dot(this.direction),l=-Qf.dot(gS),c=Qf.lengthSq(),u=Math.abs(1-a*a);let d,f,h,p;if(u>0)if(d=a*l-o,f=a*o-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const m=1/u;d*=m,f*=m,h=d*(d+a*f+2*o)+f*(a*d+f+2*l)+c}else f=s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-a*s+o)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(a*s+o)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=a>0?-s:s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(gS).multiplyScalar(f).add(I6),h}intersectSphere(e,t){wd.subVectors(e.center,this.origin);const i=wd.dot(this.direction),r=wd.dot(wd)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),i>a||s>r||((s>i||i!==i)&&(i=s),(a<r||r!==r)&&(r=a),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,wd)!==null}intersectTriangle(e,t,i,r,s){D6.subVectors(t,e),yS.subVectors(i,e),R6.crossVectors(D6,yS);let a=this.direction.dot(R6),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Qf.subVectors(this.origin,e);const l=o*this.direction.dot(yS.crossVectors(Qf,yS));if(l<0)return null;const c=o*this.direction.dot(D6.cross(Qf));if(c<0||l+c>a)return null;const u=-o*Qf.dot(R6);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},qn=class qR{constructor(){qR.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qR().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/bv.setFromMatrixColumn(e,0).length(),s=1/bv.setFromMatrixColumn(e,1).length(),a=1/bv.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=h+p*c,t[5]=f-m*c,t[9]=-o*l,t[2]=m-f*c,t[6]=p+h*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f-m*o,t[4]=-a*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*u,t[9]=m-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=p*c-h,t[8]=f*c+m,t[1]=l*d,t[5]=m*c+f,t[9]=h*c-p,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+m,t[5]=a*u,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*u,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZKe,e,JKe)}lookAt(e,t,i){const r=this.elements;return ol.subVectors(e,t),ol.lengthSq()===0&&(ol.z=1),ol.normalize(),Zf.crossVectors(i,ol),Zf.lengthSq()===0&&(Math.abs(i.z)===1?ol.x+=1e-4:ol.z+=1e-4,ol.normalize(),Zf.crossVectors(i,ol)),Zf.normalize(),bS.crossVectors(ol,Zf),r[0]=Zf.x,r[4]=bS.x,r[8]=ol.x,r[1]=Zf.y,r[5]=bS.y,r[9]=ol.y,r[2]=Zf.z,r[6]=bS.z,r[10]=ol.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],h=i[13],p=i[2],m=i[6],v=i[10],g=i[14],y=i[3],x=i[7],b=i[11],A=i[15],S=r[0],C=r[4],_=r[8],M=r[12],T=r[1],E=r[5],I=r[9],L=r[13],F=r[2],B=r[6],P=r[10],z=r[14],O=r[3],N=r[7],H=r[11],q=r[15];return s[0]=a*S+o*T+l*F+c*O,s[4]=a*C+o*E+l*B+c*N,s[8]=a*_+o*I+l*P+c*H,s[12]=a*M+o*L+l*z+c*q,s[1]=u*S+d*T+f*F+h*O,s[5]=u*C+d*E+f*B+h*N,s[9]=u*_+d*I+f*P+h*H,s[13]=u*M+d*L+f*z+h*q,s[2]=p*S+m*T+v*F+g*O,s[6]=p*C+m*E+v*B+g*N,s[10]=p*_+m*I+v*P+g*H,s[14]=p*M+m*L+v*z+g*q,s[3]=y*S+x*T+b*F+A*O,s[7]=y*C+x*E+b*B+A*N,s[11]=y*_+x*I+b*P+A*H,s[15]=y*M+x*L+b*z+A*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+s*l*d-r*c*d-s*o*f+i*c*f+r*o*h-i*l*h)+m*(+t*l*h-t*c*f+s*a*f-r*a*h+r*c*u-s*l*u)+v*(+t*c*d-t*o*h-s*a*d+i*a*h+s*o*u-i*c*u)+g*(-r*o*u-t*l*d+t*o*f+r*a*d-i*a*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=d*v*c-m*f*c+m*l*h-o*v*h-d*l*g+o*f*g,x=p*f*c-u*v*c-p*l*h+a*v*h+u*l*g-a*f*g,b=u*m*c-p*d*c+p*o*h-a*m*h-u*o*g+a*d*g,A=p*d*l-u*m*l-p*o*f+a*m*f+u*o*v-a*d*v,S=t*y+i*x+r*b+s*A;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=y*C,e[1]=(m*f*s-d*v*s-m*r*h+i*v*h+d*r*g-i*f*g)*C,e[2]=(o*v*s-m*l*s+m*r*c-i*v*c-o*r*g+i*l*g)*C,e[3]=(d*l*s-o*f*s-d*r*c+i*f*c+o*r*h-i*l*h)*C,e[4]=x*C,e[5]=(u*v*s-p*f*s+p*r*h-t*v*h-u*r*g+t*f*g)*C,e[6]=(p*l*s-a*v*s-p*r*c+t*v*c+a*r*g-t*l*g)*C,e[7]=(a*f*s-u*l*s+u*r*c-t*f*c-a*r*h+t*l*h)*C,e[8]=b*C,e[9]=(p*d*s-u*m*s-p*i*h+t*m*h+u*i*g-t*d*g)*C,e[10]=(a*m*s-p*o*s+p*i*c-t*m*c-a*i*g+t*o*g)*C,e[11]=(u*o*s-a*d*s-u*i*c+t*d*c+a*i*h-t*o*h)*C,e[12]=A*C,e[13]=(u*m*r-p*d*r+p*i*f-t*m*f-u*i*v+t*d*v)*C,e[14]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*v-t*o*v)*C,e[15]=(a*d*r-u*o*r+u*i*l-t*d*l-a*i*f+t*o*f)*C,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,f=s*c,h=s*u,p=s*d,m=a*u,v=a*d,g=o*d,y=l*c,x=l*u,b=l*d,A=i.x,S=i.y,C=i.z;return r[0]=(1-(m+g))*A,r[1]=(h+b)*A,r[2]=(p-x)*A,r[3]=0,r[4]=(h-b)*S,r[5]=(1-(f+g))*S,r[6]=(v+y)*S,r[7]=0,r[8]=(p+x)*C,r[9]=(v-y)*C,r[10]=(1-(f+m))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=bv.set(r[0],r[1],r[2]).length();const a=bv.set(r[4],r[5],r[6]).length(),o=bv.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ec.copy(this);const c=1/s,u=1/a,d=1/o;return Ec.elements[0]*=c,Ec.elements[1]*=c,Ec.elements[2]*=c,Ec.elements[4]*=u,Ec.elements[5]*=u,Ec.elements[6]*=u,Ec.elements[8]*=d,Ec.elements[9]*=d,Ec.elements[10]*=d,t.setFromRotationMatrix(Ec),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a){const o=this.elements,l=2*s/(t-e),c=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),f=-(a+s)/(a-s),h=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,a){const o=this.elements,l=1/(t-e),c=1/(i-r),u=1/(a-s),d=(t+e)*l,f=(i+r)*c,h=(a+s)*u;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}};const bv=new $e,Ec=new qn,ZKe=new $e(0,0,0),JKe=new $e(1,1,1),Zf=new $e,bS=new $e,ol=new $e,jW=new qn,$W=new Ta;let Zd=class ase{constructor(e=0,t=0,i=0,r=ase.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],d=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Ys(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ys(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ys(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ys(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Ys(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Ys(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return jW.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jW,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return $W.setFromEuler(this),this.setFromQuaternion($W,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};Zd.DefaultOrder="XYZ";Zd.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];let EF=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},eYe=0;const QW=new $e,xv=new Ta,Sd=new qn,xS=new $e,b2=new $e,tYe=new $e,nYe=new Ta,ZW=new $e(1,0,0),JW=new $e(0,1,0),eq=new $e(0,0,1),iYe={type:"added"},tq={type:"removed"};let ps=class KR extends Mp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:eYe++}),this.uuid=cc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=KR.DefaultUp.clone();const e=new $e,t=new Zd,i=new Ta,r=new $e(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new qn},normalMatrix:{value:new rc}}),this.matrix=new qn,this.matrixWorld=new qn,this.matrixAutoUpdate=KR.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new EF,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return xv.setFromAxisAngle(e,t),this.quaternion.multiply(xv),this}rotateOnWorldAxis(e,t){return xv.setFromAxisAngle(e,t),this.quaternion.premultiply(xv),this}rotateX(e){return this.rotateOnAxis(ZW,e)}rotateY(e){return this.rotateOnAxis(JW,e)}rotateZ(e){return this.rotateOnAxis(eq,e)}translateOnAxis(e,t){return QW.copy(e).applyQuaternion(this.quaternion),this.position.add(QW.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZW,e)}translateY(e){return this.translateOnAxis(JW,e)}translateZ(e){return this.translateOnAxis(eq,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Sd.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?xS.copy(e):xS.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),b2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sd.lookAt(b2,xS,this.up):Sd.lookAt(xS,b2,this.up),this.quaternion.setFromRotationMatrix(Sd),r&&(Sd.extractRotation(r.matrixWorld),xv.setFromRotationMatrix(Sd),this.quaternion.premultiply(xv.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(iYe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tq)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(tq)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Sd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Sd.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sd),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b2,e,tYe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b2,nYe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),f=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),h.length>0&&(i.animations=h),p.length>0&&(i.nodes=p)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}};ps.DefaultUp=new $e(0,1,0);ps.DefaultMatrixAutoUpdate=!0;const Ic=new $e,_d=new $e,P6=new $e,Cd=new $e,Av=new $e,wv=new $e,nq=new $e,L6=new $e,k6=new $e,F6=new $e;let Rb=class dg{constructor(e=new $e,t=new $e,i=new $e){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ic.subVectors(e,t),r.cross(Ic);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ic.subVectors(r,t),_d.subVectors(i,t),P6.subVectors(e,t);const a=Ic.dot(Ic),o=Ic.dot(_d),l=Ic.dot(P6),c=_d.dot(_d),u=_d.dot(P6),d=a*c-o*o;if(d===0)return s.set(-2,-1,-1);const f=1/d,h=(c*l-o*u)*f,p=(a*u-o*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Cd),Cd.x>=0&&Cd.y>=0&&Cd.x+Cd.y<=1}static getUV(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,Cd),l.set(0,0),l.addScaledVector(s,Cd.x),l.addScaledVector(a,Cd.y),l.addScaledVector(o,Cd.z),l}static isFrontFacing(e,t,i,r){return Ic.subVectors(i,t),_d.subVectors(e,t),Ic.cross(_d).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ic.subVectors(this.c,this.b),_d.subVectors(this.a,this.b),Ic.cross(_d).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return dg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return dg.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return dg.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return dg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return dg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Av.subVectors(r,i),wv.subVectors(s,i),L6.subVectors(e,i);const l=Av.dot(L6),c=wv.dot(L6);if(l<=0&&c<=0)return t.copy(i);k6.subVectors(e,r);const u=Av.dot(k6),d=wv.dot(k6);if(u>=0&&d<=u)return t.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(Av,a);F6.subVectors(e,s);const h=Av.dot(F6),p=wv.dot(F6);if(p>=0&&h<=p)return t.copy(s);const m=h*c-l*p;if(m<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(i).addScaledVector(wv,o);const v=u*p-h*d;if(v<=0&&d-u>=0&&h-p>=0)return nq.subVectors(s,r),o=(d-u)/(d-u+(h-p)),t.copy(r).addScaledVector(nq,o);const g=1/(v+m+f);return a=m*g,o=f*g,t.copy(i).addScaledVector(Av,a).addScaledVector(wv,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},rYe=0,zs=class extends Mp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rYe++}),this.uuid=cc(),this.name="",this.type="Material",this.blending=t1,this.side=dp,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Kre,this.blendDst=Yre,this.blendEquation=ug,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zR,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=PKe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=A6,this.stencilZFail=A6,this.stencilZPass=A6,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===Nqe;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==t1&&(i.blending=this.blending),this.side!==dp&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Kc=class extends zs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const ks=new $e,AS=new Gt;let As=class{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=VR,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new wn),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Gt),t[i++]=a.x,t[i++]=a.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new $e),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new gr),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)AS.fromBufferAttribute(this,t),AS.applyMatrix3(e),this.setXY(t,AS.x,AS.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ks.fromBufferAttribute(this,t),ks.applyMatrix3(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ks.fromBufferAttribute(this,t),ks.applyMatrix4(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ks.fromBufferAttribute(this,t),ks.applyNormalMatrix(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ks.fromBufferAttribute(this,t),ks.transformDirection(e),this.setXYZ(t,ks.x,ks.y,ks.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==VR&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},IF=class extends As{constructor(e,t,i){super(new Uint16Array(e),t,i)}},ose=class extends As{constructor(e,t,i){super(new Uint32Array(e),t,i)}},Dn=class extends As{constructor(e,t,i){super(new Float32Array(e),t,i)}},sYe=0;const Bl=new qn,B6=new ps,Sv=new $e,ll=new Fm,x2=new Fm,oa=new $e;let $i=class lse extends Mp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sYe++}),this.uuid=cc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ese(e)?ose:IF)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new rc().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bl.makeRotationFromQuaternion(e),this.applyMatrix4(Bl),this}rotateX(e){return Bl.makeRotationX(e),this.applyMatrix4(Bl),this}rotateY(e){return Bl.makeRotationY(e),this.applyMatrix4(Bl),this}rotateZ(e){return Bl.makeRotationZ(e),this.applyMatrix4(Bl),this}translate(e,t,i){return Bl.makeTranslation(e,t,i),this.applyMatrix4(Bl),this}scale(e,t,i){return Bl.makeScale(e,t,i),this.applyMatrix4(Bl),this}lookAt(e){return B6.lookAt(e),B6.updateMatrix(),this.applyMatrix4(B6.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sv).negate(),this.translate(Sv.x,Sv.y,Sv.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Dn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fm);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new $e(-1/0,-1/0,-1/0),new $e(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ll.setFromBufferAttribute(s),this.morphTargetsRelative?(oa.addVectors(this.boundingBox.min,ll.min),this.boundingBox.expandByPoint(oa),oa.addVectors(this.boundingBox.max,ll.max),this.boundingBox.expandByPoint(oa)):(this.boundingBox.expandByPoint(ll.min),this.boundingBox.expandByPoint(ll.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Bm);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new $e,1/0);return}if(e){const i=this.boundingSphere.center;if(ll.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];x2.setFromBufferAttribute(o),this.morphTargetsRelative?(oa.addVectors(ll.min,x2.min),ll.expandByPoint(oa),oa.addVectors(ll.max,x2.max),ll.expandByPoint(oa)):(ll.expandByPoint(x2.min),ll.expandByPoint(x2.max))}ll.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)oa.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(oa));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)oa.fromBufferAttribute(o,c),l&&(Sv.fromBufferAttribute(e,c),oa.add(Sv)),r=Math.max(r,i.distanceToSquared(oa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new As(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let T=0;T<o;T++)c[T]=new $e,u[T]=new $e;const d=new $e,f=new $e,h=new $e,p=new Gt,m=new Gt,v=new Gt,g=new $e,y=new $e;function x(T,E,I){d.fromArray(r,T*3),f.fromArray(r,E*3),h.fromArray(r,I*3),p.fromArray(a,T*2),m.fromArray(a,E*2),v.fromArray(a,I*2),f.sub(d),h.sub(d),m.sub(p),v.sub(p);const L=1/(m.x*v.y-v.x*m.y);isFinite(L)&&(g.copy(f).multiplyScalar(v.y).addScaledVector(h,-m.y).multiplyScalar(L),y.copy(h).multiplyScalar(m.x).addScaledVector(f,-v.x).multiplyScalar(L),c[T].add(g),c[E].add(g),c[I].add(g),u[T].add(y),u[E].add(y),u[I].add(y))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let T=0,E=b.length;T<E;++T){const I=b[T],L=I.start,F=I.count;for(let B=L,P=L+F;B<P;B+=3)x(i[B+0],i[B+1],i[B+2])}const A=new $e,S=new $e,C=new $e,_=new $e;function M(T){C.fromArray(s,T*3),_.copy(C);const E=c[T];A.copy(E),A.sub(C.multiplyScalar(C.dot(E))).normalize(),S.crossVectors(_,E);const L=S.dot(u[T])<0?-1:1;l[T*4]=A.x,l[T*4+1]=A.y,l[T*4+2]=A.z,l[T*4+3]=L}for(let T=0,E=b.length;T<E;++T){const I=b[T],L=I.start,F=I.count;for(let B=L,P=L+F;B<P;B+=3)M(i[B+0]),M(i[B+1]),M(i[B+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new As(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new $e,s=new $e,a=new $e,o=new $e,l=new $e,c=new $e,u=new $e,d=new $e;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),v=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,v),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,v),o.add(u),l.add(u),c.add(u),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const a=i[r].array,o=e.attributes[r],l=o.array,c=o.itemSize*t,u=Math.min(l.length,a.length-c);for(let d=0,f=c;d<u;d++,f++)a[f]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)oa.fromBufferAttribute(e,t),oa.normalize(),e.setXYZ(t,oa.x,oa.y,oa.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*u;for(let g=0;g<u;g++)f[p++]=c[h++]}return new As(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new lse,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,i);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}};const iq=new qn,_v=new fT,N6=new Bm,Jf=new $e,eh=new $e,th=new $e,O6=new $e,U6=new $e,z6=new $e,wS=new $e,SS=new $e,_S=new $e,CS=new Gt,MS=new Gt,TS=new Gt,V6=new $e,ES=new $e;let Qs=class extends ps{constructor(e=new $i,t=new Kc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),N6.copy(i.boundingSphere),N6.applyMatrix4(s),e.ray.intersectsSphere(N6)===!1)||(iq.copy(s).invert(),_v.copy(e.ray).applyMatrix4(iq),i.boundingBox!==null&&_v.intersectsBox(i.boundingBox)===!1))return;let a;const o=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,f=i.attributes.uv2,h=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(r))for(let m=0,v=h.length;m<v;m++){const g=h[m],y=r[g.materialIndex],x=Math.max(g.start,p.start),b=Math.min(o.count,Math.min(g.start+g.count,p.start+p.count));for(let A=x,S=b;A<S;A+=3){const C=o.getX(A),_=o.getX(A+1),M=o.getX(A+2);a=IS(this,y,e,_v,l,c,u,d,f,C,_,M),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let g=m,y=v;g<y;g+=3){const x=o.getX(g),b=o.getX(g+1),A=o.getX(g+2);a=IS(this,r,e,_v,l,c,u,d,f,x,b,A),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,v=h.length;m<v;m++){const g=h[m],y=r[g.materialIndex],x=Math.max(g.start,p.start),b=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let A=x,S=b;A<S;A+=3){const C=A,_=A+1,M=A+2;a=IS(this,y,e,_v,l,c,u,d,f,C,_,M),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let g=m,y=v;g<y;g+=3){const x=g,b=g+1,A=g+2;a=IS(this,r,e,_v,l,c,u,d,f,x,b,A),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}}};function aYe(n,e,t,i,r,s,a,o){let l;if(e.side===Zc?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side!==fp,o),l===null)return null;ES.copy(o),ES.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ES);return c<t.near||c>t.far?null:{distance:c,point:ES.clone(),object:n}}function IS(n,e,t,i,r,s,a,o,l,c,u,d){Jf.fromBufferAttribute(r,c),eh.fromBufferAttribute(r,u),th.fromBufferAttribute(r,d);const f=n.morphTargetInfluences;if(s&&f){wS.set(0,0,0),SS.set(0,0,0),_S.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const v=f[p],g=s[p];v!==0&&(O6.fromBufferAttribute(g,c),U6.fromBufferAttribute(g,u),z6.fromBufferAttribute(g,d),a?(wS.addScaledVector(O6,v),SS.addScaledVector(U6,v),_S.addScaledVector(z6,v)):(wS.addScaledVector(O6.sub(Jf),v),SS.addScaledVector(U6.sub(eh),v),_S.addScaledVector(z6.sub(th),v)))}Jf.add(wS),eh.add(SS),th.add(_S)}n.isSkinnedMesh&&(n.boneTransform(c,Jf),n.boneTransform(u,eh),n.boneTransform(d,th));const h=aYe(n,e,t,i,Jf,eh,th,V6);if(h){o&&(CS.fromBufferAttribute(o,c),MS.fromBufferAttribute(o,u),TS.fromBufferAttribute(o,d),h.uv=Rb.getUV(V6,Jf,eh,th,CS,MS,TS,new Gt)),l&&(CS.fromBufferAttribute(l,c),MS.fromBufferAttribute(l,u),TS.fromBufferAttribute(l,d),h.uv2=Rb.getUV(V6,Jf,eh,th,CS,MS,TS,new Gt));const p={a:c,b:u,c:d,normal:new $e,materialIndex:0};Rb.getNormal(Jf,eh,th,p.normal),h.face=p}return h}let Gx=class cse extends $i{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Dn(c,3)),this.setAttribute("normal",new Dn(u,3)),this.setAttribute("uv",new Dn(d,2));function p(m,v,g,y,x,b,A,S,C,_,M){const T=b/C,E=A/_,I=b/2,L=A/2,F=S/2,B=C+1,P=_+1;let z=0,O=0;const N=new $e;for(let H=0;H<P;H++){const q=H*E-L;for(let te=0;te<B;te++){const Q=te*T-I;N[m]=Q*y,N[v]=q*x,N[g]=F,c.push(N.x,N.y,N.z),N[m]=0,N[v]=0,N[g]=S>0?1:-1,u.push(N.x,N.y,N.z),d.push(te/C),d.push(1-H/_),z+=1}}for(let H=0;H<_;H++)for(let q=0;q<C;q++){const te=f+q+B*H,Q=f+q+B*(H+1),ee=f+(q+1)+B*(H+1),de=f+(q+1)+B*H;l.push(te,Q,de),l.push(Q,ee,de),O+=6}o.addGroup(h,O,M),h+=O,f+=z}}static fromJSON(e){return new cse(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function B1(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Wa(n){const e={};for(let t=0;t<n.length;t++){const i=B1(n[t]);for(const r in i)e[r]=i[r]}return e}function oYe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const lYe={clone:B1,merge:Wa};var cYe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,uYe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let yf=class extends zs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cYe,this.fragmentShader=uYe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=B1(e.uniforms),this.uniformsGroups=oYe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},use=class extends ps{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qn,this.projectionMatrix=new qn,this.projectionMatrixInverse=new qn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Xs=class extends use{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Vx*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(i1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Vx*2*Math.atan(Math.tan(i1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(i1*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Cv=90,Mv=1;let dYe=class extends ps{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new Xs(Cv,Mv,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new $e(1,0,0)),this.add(r);const s=new Xs(Cv,Mv,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new $e(-1,0,0)),this.add(s);const a=new Xs(Cv,Mv,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new $e(0,1,0)),this.add(a);const o=new Xs(Cv,Mv,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new $e(0,-1,0)),this.add(o);const l=new Xs(Cv,Mv,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new $e(0,0,1)),this.add(l);const c=new Xs(Cv,Mv,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new $e(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,a,o,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=af,e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}},DF=class extends Pa{constructor(e,t,i,r,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:gm,super(e,t,i,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},fYe=class extends xm{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new DF(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Bs}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Gx(5,5,5),s=new yf({name:"CubemapFromEquirect",uniforms:B1(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zc,blending:Kh});s.uniforms.tEquirect.value=t;const a=new Qs(r,s),o=t.minFilter;return t.minFilter===Pf&&(t.minFilter=Bs),new dYe(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}};const H6=new $e,hYe=new $e,pYe=new rc;let m0=class{constructor(e=new $e(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=H6.subVectors(i,t).cross(hYe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(H6),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||pYe.getNormalMatrix(e),r=this.coplanarPoint(H6).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Tv=new Bm,DS=new $e;let RF=class{constructor(e=new m0,t=new m0,i=new m0,r=new m0,s=new m0,a=new m0){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],f=i[8],h=i[9],p=i[10],m=i[11],v=i[12],g=i[13],y=i[14],x=i[15];return t[0].setComponents(o-r,d-l,m-f,x-v).normalize(),t[1].setComponents(o+r,d+l,m+f,x+v).normalize(),t[2].setComponents(o+s,d+c,m+h,x+g).normalize(),t[3].setComponents(o-s,d-c,m-h,x-g).normalize(),t[4].setComponents(o-a,d-u,m-p,x-y).normalize(),t[5].setComponents(o+a,d+u,m+p,x+y).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Tv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Tv)}intersectsSprite(e){return Tv.center.set(0,0,0),Tv.radius=.7071067811865476,Tv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Tv)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(DS.x=r.normal.x>0?e.max.x:e.min.x,DS.y=r.normal.y>0?e.max.y:e.min.y,DS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(DS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function dse(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function mYe(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const d=c.array,f=c.usage,h=n.createBuffer();n.bindBuffer(u,h),n.bufferData(u,d,f),c.onUploadCallback();let p;if(d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else if(d instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:h,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const f=u.array,h=u.updateRange;n.bindBuffer(d,c),h.count===-1?n.bufferSubData(d,0,f):(t?n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1)}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,r(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:a,remove:o,update:l}}let YR=class fse extends $i{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,d=e/o,f=t/l,h=[],p=[],m=[],v=[];for(let g=0;g<u;g++){const y=g*f-a;for(let x=0;x<c;x++){const b=x*d-s;p.push(b,-y,0),m.push(0,0,1),v.push(x/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let y=0;y<o;y++){const x=y+c*g,b=y+c*(g+1),A=y+1+c*(g+1),S=y+1+c*g;h.push(x,b,S),h.push(b,A,S)}this.setIndex(h),this.setAttribute("position",new Dn(p,3)),this.setAttribute("normal",new Dn(m,3)),this.setAttribute("uv",new Dn(v,2))}static fromJSON(e){return new fse(e.width,e.height,e.widthSegments,e.heightSegments)}};var vYe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,gYe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yYe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,bYe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xYe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,AYe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,wYe="vec3 transformed = vec3( position );",SYe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_Ye=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,CYe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,MYe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,TYe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,EYe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,IYe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DYe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,RYe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,PYe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LYe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kYe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,FYe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,BYe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NYe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,OYe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,UYe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,zYe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,VYe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,HYe="gl_FragColor = linearToOutputTexel( gl_FragColor );",GYe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,WYe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,qYe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,KYe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,YYe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,XYe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jYe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$Ye=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,QYe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ZYe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,JYe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,eXe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,tXe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nXe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,iXe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rXe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,sXe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aXe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,oXe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lXe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,cXe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,uXe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dXe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fXe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hXe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,pXe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mXe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vXe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,gXe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,yXe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,bXe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xXe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,AXe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wXe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,SXe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_Xe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,CXe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,MXe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,TXe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,EXe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,IXe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,DXe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RXe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PXe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,LXe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,kXe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,FXe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,BXe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,NXe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,OXe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,UXe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,zXe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,VXe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,HXe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,GXe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,WXe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,qXe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,KXe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,YXe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,XXe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,jXe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$Xe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,QXe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,ZXe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,JXe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,eje=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,tje=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,nje=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ije=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rje=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,sje=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,aje=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,oje=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,lje=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,cje=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uje=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,dje=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,fje=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hje=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,pje=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,mje=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vje=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,gje=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,yje=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,bje=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,xje=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Aje=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wje=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Sje=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_je=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Cje=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Mje=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tje=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Eje=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ije=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Dje=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rje=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Pje=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Lje=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kje=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fje=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Bje=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nje=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oje=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uje=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,zje=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vje=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hje=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Gje=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Wje=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Wi={alphamap_fragment:vYe,alphamap_pars_fragment:gYe,alphatest_fragment:yYe,alphatest_pars_fragment:bYe,aomap_fragment:xYe,aomap_pars_fragment:AYe,begin_vertex:wYe,beginnormal_vertex:SYe,bsdfs:_Ye,iridescence_fragment:CYe,bumpmap_pars_fragment:MYe,clipping_planes_fragment:TYe,clipping_planes_pars_fragment:EYe,clipping_planes_pars_vertex:IYe,clipping_planes_vertex:DYe,color_fragment:RYe,color_pars_fragment:PYe,color_pars_vertex:LYe,color_vertex:kYe,common:FYe,cube_uv_reflection_fragment:BYe,defaultnormal_vertex:NYe,displacementmap_pars_vertex:OYe,displacementmap_vertex:UYe,emissivemap_fragment:zYe,emissivemap_pars_fragment:VYe,encodings_fragment:HYe,encodings_pars_fragment:GYe,envmap_fragment:WYe,envmap_common_pars_fragment:qYe,envmap_pars_fragment:KYe,envmap_pars_vertex:YYe,envmap_physical_pars_fragment:rXe,envmap_vertex:XYe,fog_vertex:jYe,fog_pars_vertex:$Ye,fog_fragment:QYe,fog_pars_fragment:ZYe,gradientmap_pars_fragment:JYe,lightmap_fragment:eXe,lightmap_pars_fragment:tXe,lights_lambert_vertex:nXe,lights_pars_begin:iXe,lights_toon_fragment:sXe,lights_toon_pars_fragment:aXe,lights_phong_fragment:oXe,lights_phong_pars_fragment:lXe,lights_physical_fragment:cXe,lights_physical_pars_fragment:uXe,lights_fragment_begin:dXe,lights_fragment_maps:fXe,lights_fragment_end:hXe,logdepthbuf_fragment:pXe,logdepthbuf_pars_fragment:mXe,logdepthbuf_pars_vertex:vXe,logdepthbuf_vertex:gXe,map_fragment:yXe,map_pars_fragment:bXe,map_particle_fragment:xXe,map_particle_pars_fragment:AXe,metalnessmap_fragment:wXe,metalnessmap_pars_fragment:SXe,morphcolor_vertex:_Xe,morphnormal_vertex:CXe,morphtarget_pars_vertex:MXe,morphtarget_vertex:TXe,normal_fragment_begin:EXe,normal_fragment_maps:IXe,normal_pars_fragment:DXe,normal_pars_vertex:RXe,normal_vertex:PXe,normalmap_pars_fragment:LXe,clearcoat_normal_fragment_begin:kXe,clearcoat_normal_fragment_maps:FXe,clearcoat_pars_fragment:BXe,iridescence_pars_fragment:NXe,output_fragment:OXe,packing:UXe,premultiplied_alpha_fragment:zXe,project_vertex:VXe,dithering_fragment:HXe,dithering_pars_fragment:GXe,roughnessmap_fragment:WXe,roughnessmap_pars_fragment:qXe,shadowmap_pars_fragment:KXe,shadowmap_pars_vertex:YXe,shadowmap_vertex:XXe,shadowmask_pars_fragment:jXe,skinbase_vertex:$Xe,skinning_pars_vertex:QXe,skinning_vertex:ZXe,skinnormal_vertex:JXe,specularmap_fragment:eje,specularmap_pars_fragment:tje,tonemapping_fragment:nje,tonemapping_pars_fragment:ije,transmission_fragment:rje,transmission_pars_fragment:sje,uv_pars_fragment:aje,uv_pars_vertex:oje,uv_vertex:lje,uv2_pars_fragment:cje,uv2_pars_vertex:uje,uv2_vertex:dje,worldpos_vertex:fje,background_vert:hje,background_frag:pje,cube_vert:mje,cube_frag:vje,depth_vert:gje,depth_frag:yje,distanceRGBA_vert:bje,distanceRGBA_frag:xje,equirect_vert:Aje,equirect_frag:wje,linedashed_vert:Sje,linedashed_frag:_je,meshbasic_vert:Cje,meshbasic_frag:Mje,meshlambert_vert:Tje,meshlambert_frag:Eje,meshmatcap_vert:Ije,meshmatcap_frag:Dje,meshnormal_vert:Rje,meshnormal_frag:Pje,meshphong_vert:Lje,meshphong_frag:kje,meshphysical_vert:Fje,meshphysical_frag:Bje,meshtoon_vert:Nje,meshtoon_frag:Oje,points_vert:Uje,points_frag:zje,shadow_vert:Vje,shadow_frag:Hje,sprite_vert:Gje,sprite_frag:Wje},_n={common:{diffuse:{value:new wn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new rc},uv2Transform:{value:new rc},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rc}},sprite:{diffuse:{value:new wn(16777215)},opacity:{value:1},center:{value:new Gt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new rc}}},Pu={basic:{uniforms:Wa([_n.common,_n.specularmap,_n.envmap,_n.aomap,_n.lightmap,_n.fog]),vertexShader:Wi.meshbasic_vert,fragmentShader:Wi.meshbasic_frag},lambert:{uniforms:Wa([_n.common,_n.specularmap,_n.envmap,_n.aomap,_n.lightmap,_n.emissivemap,_n.fog,_n.lights,{emissive:{value:new wn(0)}}]),vertexShader:Wi.meshlambert_vert,fragmentShader:Wi.meshlambert_frag},phong:{uniforms:Wa([_n.common,_n.specularmap,_n.envmap,_n.aomap,_n.lightmap,_n.emissivemap,_n.bumpmap,_n.normalmap,_n.displacementmap,_n.fog,_n.lights,{emissive:{value:new wn(0)},specular:{value:new wn(1118481)},shininess:{value:30}}]),vertexShader:Wi.meshphong_vert,fragmentShader:Wi.meshphong_frag},standard:{uniforms:Wa([_n.common,_n.envmap,_n.aomap,_n.lightmap,_n.emissivemap,_n.bumpmap,_n.normalmap,_n.displacementmap,_n.roughnessmap,_n.metalnessmap,_n.fog,_n.lights,{emissive:{value:new wn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag},toon:{uniforms:Wa([_n.common,_n.aomap,_n.lightmap,_n.emissivemap,_n.bumpmap,_n.normalmap,_n.displacementmap,_n.gradientmap,_n.fog,_n.lights,{emissive:{value:new wn(0)}}]),vertexShader:Wi.meshtoon_vert,fragmentShader:Wi.meshtoon_frag},matcap:{uniforms:Wa([_n.common,_n.bumpmap,_n.normalmap,_n.displacementmap,_n.fog,{matcap:{value:null}}]),vertexShader:Wi.meshmatcap_vert,fragmentShader:Wi.meshmatcap_frag},points:{uniforms:Wa([_n.points,_n.fog]),vertexShader:Wi.points_vert,fragmentShader:Wi.points_frag},dashed:{uniforms:Wa([_n.common,_n.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wi.linedashed_vert,fragmentShader:Wi.linedashed_frag},depth:{uniforms:Wa([_n.common,_n.displacementmap]),vertexShader:Wi.depth_vert,fragmentShader:Wi.depth_frag},normal:{uniforms:Wa([_n.common,_n.bumpmap,_n.normalmap,_n.displacementmap,{opacity:{value:1}}]),vertexShader:Wi.meshnormal_vert,fragmentShader:Wi.meshnormal_frag},sprite:{uniforms:Wa([_n.sprite,_n.fog]),vertexShader:Wi.sprite_vert,fragmentShader:Wi.sprite_frag},background:{uniforms:{uvTransform:{value:new rc},t2D:{value:null}},vertexShader:Wi.background_vert,fragmentShader:Wi.background_frag},cube:{uniforms:Wa([_n.envmap,{opacity:{value:1}}]),vertexShader:Wi.cube_vert,fragmentShader:Wi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wi.equirect_vert,fragmentShader:Wi.equirect_frag},distanceRGBA:{uniforms:Wa([_n.common,_n.displacementmap,{referencePosition:{value:new $e},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wi.distanceRGBA_vert,fragmentShader:Wi.distanceRGBA_frag},shadow:{uniforms:Wa([_n.lights,_n.fog,{color:{value:new wn(0)},opacity:{value:1}}]),vertexShader:Wi.shadow_vert,fragmentShader:Wi.shadow_frag}};Pu.physical={uniforms:Wa([Pu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Gt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new wn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new wn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new wn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag};function qje(n,e,t,i,r,s){const a=new wn(0);let o=r===!0?0:1,l,c,u=null,d=0,f=null;function h(m,v){let g=!1,y=v.isScene===!0?v.background:null;y&&y.isTexture&&(y=e.get(y));const x=n.xr,b=x.getSession&&x.getSession();b&&b.environmentBlendMode==="additive"&&(y=null),y===null?p(a,o):y&&y.isColor&&(p(y,1),g=!0),(n.autoClear||g)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===kA)?(c===void 0&&(c=new Qs(new Gx(1,1,1),new yf({name:"BackgroundCubeMaterial",uniforms:B1(Pu.cube.uniforms),vertexShader:Pu.cube.vertexShader,fragmentShader:Pu.cube.fragmentShader,side:Zc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(A,S,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(u!==y||d!==y.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,u=y,d=y.version,f=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new Qs(new YR(2,2),new yf({name:"BackgroundMaterial",uniforms:B1(Pu.background.uniforms),vertexShader:Pu.background.vertexShader,fragmentShader:Pu.background.fragmentShader,side:dp,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||d!==y.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,u=y,d=y.version,f=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,v){t.buffers.color.setClear(m.r,m.g,m.b,v,s)}return{getClearColor:function(){return a},setClearColor:function(m,v=1){a.set(m),o=v,p(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(m){o=m,p(a,o)},render:h}}function Kje(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=v(null);let c=l,u=!1;function d(F,B,P,z,O){let N=!1;if(a){const H=m(z,P,B);c!==H&&(c=H,h(c.object)),N=g(F,z,P,O),N&&y(F,z,P,O)}else{const H=B.wireframe===!0;(c.geometry!==z.id||c.program!==P.id||c.wireframe!==H)&&(c.geometry=z.id,c.program=P.id,c.wireframe=H,N=!0)}O!==null&&t.update(O,34963),(N||u)&&(u=!1,_(F,B,P,z),O!==null&&n.bindBuffer(34963,t.get(O).buffer))}function f(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(F){return i.isWebGL2?n.bindVertexArray(F):s.bindVertexArrayOES(F)}function p(F){return i.isWebGL2?n.deleteVertexArray(F):s.deleteVertexArrayOES(F)}function m(F,B,P){const z=P.wireframe===!0;let O=o[F.id];O===void 0&&(O={},o[F.id]=O);let N=O[B.id];N===void 0&&(N={},O[B.id]=N);let H=N[z];return H===void 0&&(H=v(f()),N[z]=H),H}function v(F){const B=[],P=[],z=[];for(let O=0;O<r;O++)B[O]=0,P[O]=0,z[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:P,attributeDivisors:z,object:F,attributes:{},index:null}}function g(F,B,P,z){const O=c.attributes,N=B.attributes;let H=0;const q=P.getAttributes();for(const te in q)if(q[te].location>=0){const ee=O[te];let de=N[te];if(de===void 0&&(te==="instanceMatrix"&&F.instanceMatrix&&(de=F.instanceMatrix),te==="instanceColor"&&F.instanceColor&&(de=F.instanceColor)),ee===void 0||ee.attribute!==de||de&&ee.data!==de.data)return!0;H++}return c.attributesNum!==H||c.index!==z}function y(F,B,P,z){const O={},N=B.attributes;let H=0;const q=P.getAttributes();for(const te in q)if(q[te].location>=0){let ee=N[te];ee===void 0&&(te==="instanceMatrix"&&F.instanceMatrix&&(ee=F.instanceMatrix),te==="instanceColor"&&F.instanceColor&&(ee=F.instanceColor));const de={};de.attribute=ee,ee&&ee.data&&(de.data=ee.data),O[te]=de,H++}c.attributes=O,c.attributesNum=H,c.index=z}function x(){const F=c.newAttributes;for(let B=0,P=F.length;B<P;B++)F[B]=0}function b(F){A(F,0)}function A(F,B){const P=c.newAttributes,z=c.enabledAttributes,O=c.attributeDivisors;P[F]=1,z[F]===0&&(n.enableVertexAttribArray(F),z[F]=1),O[F]!==B&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,B),O[F]=B)}function S(){const F=c.newAttributes,B=c.enabledAttributes;for(let P=0,z=B.length;P<z;P++)B[P]!==F[P]&&(n.disableVertexAttribArray(P),B[P]=0)}function C(F,B,P,z,O,N){i.isWebGL2===!0&&(P===5124||P===5125)?n.vertexAttribIPointer(F,B,P,O,N):n.vertexAttribPointer(F,B,P,z,O,N)}function _(F,B,P,z){if(i.isWebGL2===!1&&(F.isInstancedMesh||z.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const O=z.attributes,N=P.getAttributes(),H=B.defaultAttributeValues;for(const q in N){const te=N[q];if(te.location>=0){let Q=O[q];if(Q===void 0&&(q==="instanceMatrix"&&F.instanceMatrix&&(Q=F.instanceMatrix),q==="instanceColor"&&F.instanceColor&&(Q=F.instanceColor)),Q!==void 0){const ee=Q.normalized,de=Q.itemSize,J=t.get(Q);if(J===void 0)continue;const ue=J.buffer,Te=J.type,De=J.bytesPerElement;if(Q.isInterleavedBufferAttribute){const Le=Q.data,Ne=Le.stride,Y=Q.offset;if(Le.isInstancedInterleavedBuffer){for(let oe=0;oe<te.locationSize;oe++)A(te.location+oe,Le.meshPerAttribute);F.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let oe=0;oe<te.locationSize;oe++)b(te.location+oe);n.bindBuffer(34962,ue);for(let oe=0;oe<te.locationSize;oe++)C(te.location+oe,de/te.locationSize,Te,ee,Ne*De,(Y+de/te.locationSize*oe)*De)}else{if(Q.isInstancedBufferAttribute){for(let Le=0;Le<te.locationSize;Le++)A(te.location+Le,Q.meshPerAttribute);F.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let Le=0;Le<te.locationSize;Le++)b(te.location+Le);n.bindBuffer(34962,ue);for(let Le=0;Le<te.locationSize;Le++)C(te.location+Le,de/te.locationSize,Te,ee,de*De,de/te.locationSize*Le*De)}}else if(H!==void 0){const ee=H[q];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(te.location,ee);break;case 3:n.vertexAttrib3fv(te.location,ee);break;case 4:n.vertexAttrib4fv(te.location,ee);break;default:n.vertexAttrib1fv(te.location,ee)}}}}S()}function M(){I();for(const F in o){const B=o[F];for(const P in B){const z=B[P];for(const O in z)p(z[O].object),delete z[O];delete B[P]}delete o[F]}}function T(F){if(o[F.id]===void 0)return;const B=o[F.id];for(const P in B){const z=B[P];for(const O in z)p(z[O].object),delete z[O];delete B[P]}delete o[F.id]}function E(F){for(const B in o){const P=o[B];if(P[F.id]===void 0)continue;const z=P[F.id];for(const O in z)p(z[O].object),delete z[O];delete P[F.id]}}function I(){L(),u=!0,c!==l&&(c=l,h(c.object))}function L(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:I,resetDefaultState:L,dispose:M,releaseStatesOfGeometry:T,releaseStatesOfProgram:E,initAttributes:x,enableAttribute:b,disableUnusedAttributes:S}}function Yje(n,e,t,i){const r=i.isWebGL2;let s;function a(c){s=c}function o(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,d){if(d===0)return;let f,h;if(r)f=n,h="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[h](s,c,u,d),t.update(u,s,d)}this.setMode=a,this.render=o,this.renderInstances=l}function Xje(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){if(C==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),f=n.getParameter(35660),h=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),v=n.getParameter(36347),g=n.getParameter(36348),y=n.getParameter(36349),x=f>0,b=a||e.has("OES_texture_float"),A=x&&b,S=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:A,maxSamples:S}}function jje(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new m0,o=new rc,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f,h){const p=d.length!==0||f||i!==0||r;return r=f,t=u(d,h,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!r||p===null||p.length===0||s&&!v)s?u(null):c();else{const y=s?0:i,x=y*4;let b=g.clippingState||null;l.value=b,b=u(p,f,x,h);for(let A=0;A!==x;++A)b[A]=t[A];g.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,f,h,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=h+m*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(v===null||v.length<g)&&(v=new Float32Array(g));for(let x=0,b=h;x!==m;++x,b+=4)a.copy(d[x]).applyMatrix4(y,o),a.normal.toArray(v,b),v[b+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function $je(n){let e=new WeakMap;function t(a,o){return o===Nx?a.mapping=gm:o===c4&&(a.mapping=ym),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===Nx||o===c4)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new fYe(l.height/2);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}let by=class extends use{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Rg=4,rq=[.125,.215,.35,.446,.526,.582],_0=20,G6=new by,sq=new wn;let W6=null;const v0=(1+Math.sqrt(5))/2,Ev=1/v0,aq=[new $e(1,1,1),new $e(-1,1,1),new $e(1,1,-1),new $e(-1,1,-1),new $e(0,v0,Ev),new $e(0,v0,-Ev),new $e(Ev,0,v0),new $e(-Ev,0,v0),new $e(v0,Ev,0),new $e(-v0,Ev,0)];let oq=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){W6=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uq(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=cq(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(W6),e.scissorTest=!1,RS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===gm||e.mapping===ym?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),W6=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Bs,minFilter:Bs,generateMipmaps:!1,type:Ux,format:ic,encoding:hp,depthBuffer:!1},r=lq(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lq(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Qje(s)),this._blurMaterial=Zje(s,e,t)}return r}_compileMaterial(e){const t=new Qs(this._lodPlanes[0],e);this._renderer.compile(t,G6)}_sceneToCubeUV(e,t,i,r){const o=new Xs(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(sq),u.toneMapping=af,u.autoClear=!1;const h=new Kc({name:"PMREM.Background",side:Zc,depthWrite:!1,depthTest:!1}),p=new Qs(new Gx,h);let m=!1;const v=e.background;v?v.isColor&&(h.color.copy(v),e.background=null,m=!0):(h.color.copy(sq),m=!0);for(let g=0;g<6;g++){const y=g%3;y===0?(o.up.set(0,l[g],0),o.lookAt(c[g],0,0)):y===1?(o.up.set(0,0,l[g]),o.lookAt(0,c[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,c[g]));const x=this._cubeSize;RS(r,y*x,g>2?x:0,x,x),u.setRenderTarget(r),m&&u.render(p,o),u.render(e,o)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===gm||e.mapping===ym;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=uq()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=cq());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Qs(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;RS(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,G6)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=aq[(r-1)%aq.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Qs(this._lodPlanes[r],c),f=c.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*_0-1),m=s/p,v=isFinite(s)?1+Math.floor(u*m):_0;v>_0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${_0}`);const g=[];let y=0;for(let C=0;C<_0;++C){const _=C/m,M=Math.exp(-_*_/2);g.push(M),C===0?y+=M:C<v&&(y+=2*M)}for(let C=0;C<g.length;C++)g[C]=g[C]/y;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:x}=this;f.dTheta.value=p,f.mipInt.value=x-i;const b=this._sizeLods[r],A=3*b*(r>x-Rg?r-x+Rg:0),S=4*(this._cubeSize-b);RS(t,A,S,3*b,2*b),l.setRenderTarget(t),l.render(d,G6)}};function Qje(n){const e=[],t=[],i=[];let r=n;const s=n-Rg+1+rq.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Rg?l=rq[a-n+Rg-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,m=3,v=2,g=1,y=new Float32Array(m*p*h),x=new Float32Array(v*p*h),b=new Float32Array(g*p*h);for(let S=0;S<h;S++){const C=S%3*2/3-1,_=S>2?0:-1,M=[C,_,0,C+2/3,_,0,C+2/3,_+1,0,C,_,0,C+2/3,_+1,0,C,_+1,0];y.set(M,m*p*S),x.set(f,v*p*S);const T=[S,S,S,S,S,S];b.set(T,g*p*S)}const A=new $i;A.setAttribute("position",new As(y,m)),A.setAttribute("uv",new As(x,v)),A.setAttribute("faceIndex",new As(b,g)),e.push(A),r>Rg&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function lq(n,e,t){const i=new xm(n,e,t);return i.texture.mapping=kA,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function RS(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Zje(n,e,t){const i=new Float32Array(_0),r=new $e(0,1,0);return new yf({name:"SphericalGaussianBlur",defines:{n:_0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:PF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Kh,depthTest:!1,depthWrite:!1})}function cq(){return new yf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:PF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Kh,depthTest:!1,depthWrite:!1})}function uq(){return new yf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:PF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Kh,depthTest:!1,depthWrite:!1})}function PF(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Jje(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===Nx||l===c4,u=l===gm||l===ym;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return t===null&&(t=new oq(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(c&&d&&d.height>0||u&&d&&r(d)){t===null&&(t=new oq(n));const f=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function e$e(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function t$e(n,e,t,i){const r={},s=new WeakMap;function a(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",a),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],34962);const h=d.morphAttributes;for(const p in h){const m=h[p];for(let v=0,g=m.length;v<g;v++)e.update(m[v],34962)}}function c(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const y=h.array;m=h.version;for(let x=0,b=y.length;x<b;x+=3){const A=y[x+0],S=y[x+1],C=y[x+2];f.push(A,S,S,C,C,A)}}else{const y=p.array;m=p.version;for(let x=0,b=y.length/3-1;x<b;x+=3){const A=x+0,S=x+1,C=x+2;f.push(A,S,S,C,C,A)}}const v=new(ese(f)?ose:IF)(f,1);v.version=m;const g=s.get(d);g&&e.remove(g),s.set(d,v)}function u(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function n$e(n,e,t,i){const r=i.isWebGL2;let s;function a(f){s=f}let o,l;function c(f){o=f.type,l=f.bytesPerElement}function u(f,h){n.drawElements(s,h,o,f*l),t.update(h,s,1)}function d(f,h,p){if(p===0)return;let m,v;if(r)m=n,v="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,h,o,f*l,p),t.update(h,s,p)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=d}function i$e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function r$e(n,e){return n[0]-e[0]}function s$e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function q6(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function a$e(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new gr,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,d,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=p!==void 0?p.length:0;let v=s.get(u);if(v===void 0||v.count!==m){let x=function(){F.dispose(),s.delete(u),u.removeEventListener("dispose",x)};v!==void 0&&v.texture.dispose();const b=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,S=u.morphAttributes.color!==void 0,C=u.morphAttributes.position||[],_=u.morphAttributes.normal||[],M=u.morphAttributes.color||[];let T=0;b===!0&&(T=1),A===!0&&(T=2),S===!0&&(T=3);let E=u.attributes.position.count*T,I=1;E>e.maxTextureSize&&(I=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const L=new Float32Array(E*I*4*m),F=new rse(L,E,I,m);F.type=Nh,F.needsUpdate=!0;const B=T*4;for(let P=0;P<m;P++){const z=C[P],O=_[P],N=M[P],H=E*I*4*P;for(let q=0;q<z.count;q++){const te=q*B;b===!0&&(a.fromBufferAttribute(z,q),z.normalized===!0&&q6(a,z),L[H+te+0]=a.x,L[H+te+1]=a.y,L[H+te+2]=a.z,L[H+te+3]=0),A===!0&&(a.fromBufferAttribute(O,q),O.normalized===!0&&q6(a,O),L[H+te+4]=a.x,L[H+te+5]=a.y,L[H+te+6]=a.z,L[H+te+7]=0),S===!0&&(a.fromBufferAttribute(N,q),N.normalized===!0&&q6(a,N),L[H+te+8]=a.x,L[H+te+9]=a.y,L[H+te+10]=a.z,L[H+te+11]=N.itemSize===4?a.w:1)}}v={count:m,texture:F,size:new Gt(E,I)},s.set(u,v),u.addEventListener("dispose",x)}let g=0;for(let x=0;x<h.length;x++)g+=h[x];const y=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",y),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const p=h===void 0?0:h.length;let m=i[u.id];if(m===void 0||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[u.id]=m}for(let b=0;b<p;b++){const A=m[b];A[0]=b,A[1]=h[b]}m.sort(s$e);for(let b=0;b<8;b++)b<p&&m[b][1]?(o[b][0]=m[b][0],o[b][1]=m[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(r$e);const v=u.morphAttributes.position,g=u.morphAttributes.normal;let y=0;for(let b=0;b<8;b++){const A=o[b],S=A[0],C=A[1];S!==Number.MAX_SAFE_INTEGER&&C?(v&&u.getAttribute("morphTarget"+b)!==v[S]&&u.setAttribute("morphTarget"+b,v[S]),g&&u.getAttribute("morphNormal"+b)!==g[S]&&u.setAttribute("morphNormal"+b,g[S]),r[b]=C,y+=C):(v&&u.hasAttribute("morphTarget"+b)===!0&&u.deleteAttribute("morphTarget"+b),g&&u.hasAttribute("morphNormal"+b)===!0&&u.deleteAttribute("morphNormal"+b),r[b]=0)}const x=u.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",x),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function o$e(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const hse=new Pa,pse=new rse,mse=new $Ke,vse=new DF,dq=[],fq=[],hq=new Float32Array(16),pq=new Float32Array(9),mq=new Float32Array(4);function xy(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=dq[r];if(s===void 0&&(s=new Float32Array(r),dq[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Mo(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function To(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function hT(n,e){let t=fq[e];t===void 0&&(t=new Int32Array(e),fq[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function l$e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function c$e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mo(t,e))return;n.uniform2fv(this.addr,e),To(t,e)}}function u$e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Mo(t,e))return;n.uniform3fv(this.addr,e),To(t,e)}}function d$e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mo(t,e))return;n.uniform4fv(this.addr,e),To(t,e)}}function f$e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Mo(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),To(t,e)}else{if(Mo(t,i))return;mq.set(i),n.uniformMatrix2fv(this.addr,!1,mq),To(t,i)}}function h$e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Mo(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),To(t,e)}else{if(Mo(t,i))return;pq.set(i),n.uniformMatrix3fv(this.addr,!1,pq),To(t,i)}}function p$e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Mo(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),To(t,e)}else{if(Mo(t,i))return;hq.set(i),n.uniformMatrix4fv(this.addr,!1,hq),To(t,i)}}function m$e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function v$e(n,e){const t=this.cache;Mo(t,e)||(n.uniform2iv(this.addr,e),To(t,e))}function g$e(n,e){const t=this.cache;Mo(t,e)||(n.uniform3iv(this.addr,e),To(t,e))}function y$e(n,e){const t=this.cache;Mo(t,e)||(n.uniform4iv(this.addr,e),To(t,e))}function b$e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function x$e(n,e){const t=this.cache;Mo(t,e)||(n.uniform2uiv(this.addr,e),To(t,e))}function A$e(n,e){const t=this.cache;Mo(t,e)||(n.uniform3uiv(this.addr,e),To(t,e))}function w$e(n,e){const t=this.cache;Mo(t,e)||(n.uniform4uiv(this.addr,e),To(t,e))}function S$e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||hse,r)}function _$e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||mse,r)}function C$e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||vse,r)}function M$e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||pse,r)}function T$e(n){switch(n){case 5126:return l$e;case 35664:return c$e;case 35665:return u$e;case 35666:return d$e;case 35674:return f$e;case 35675:return h$e;case 35676:return p$e;case 5124:case 35670:return m$e;case 35667:case 35671:return v$e;case 35668:case 35672:return g$e;case 35669:case 35673:return y$e;case 5125:return b$e;case 36294:return x$e;case 36295:return A$e;case 36296:return w$e;case 35678:case 36198:case 36298:case 36306:case 35682:return S$e;case 35679:case 36299:case 36307:return _$e;case 35680:case 36300:case 36308:case 36293:return C$e;case 36289:case 36303:case 36311:case 36292:return M$e}}function E$e(n,e){n.uniform1fv(this.addr,e)}function I$e(n,e){const t=xy(e,this.size,2);n.uniform2fv(this.addr,t)}function D$e(n,e){const t=xy(e,this.size,3);n.uniform3fv(this.addr,t)}function R$e(n,e){const t=xy(e,this.size,4);n.uniform4fv(this.addr,t)}function P$e(n,e){const t=xy(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function L$e(n,e){const t=xy(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function k$e(n,e){const t=xy(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function F$e(n,e){n.uniform1iv(this.addr,e)}function B$e(n,e){n.uniform2iv(this.addr,e)}function N$e(n,e){n.uniform3iv(this.addr,e)}function O$e(n,e){n.uniform4iv(this.addr,e)}function U$e(n,e){n.uniform1uiv(this.addr,e)}function z$e(n,e){n.uniform2uiv(this.addr,e)}function V$e(n,e){n.uniform3uiv(this.addr,e)}function H$e(n,e){n.uniform4uiv(this.addr,e)}function G$e(n,e,t){const i=e.length,r=hT(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||hse,r[s])}function W$e(n,e,t){const i=e.length,r=hT(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||mse,r[s])}function q$e(n,e,t){const i=e.length,r=hT(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||vse,r[s])}function K$e(n,e,t){const i=e.length,r=hT(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||pse,r[s])}function Y$e(n){switch(n){case 5126:return E$e;case 35664:return I$e;case 35665:return D$e;case 35666:return R$e;case 35674:return P$e;case 35675:return L$e;case 35676:return k$e;case 5124:case 35670:return F$e;case 35667:case 35671:return B$e;case 35668:case 35672:return N$e;case 35669:case 35673:return O$e;case 5125:return U$e;case 36294:return z$e;case 36295:return V$e;case 36296:return H$e;case 35678:case 36198:case 36298:case 36306:case 35682:return G$e;case 35679:case 36299:case 36307:return W$e;case 35680:case 36300:case 36308:case 36293:return q$e;case 36289:case 36303:case 36311:case 36292:return K$e}}let X$e=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=T$e(t.type)}},j$e=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Y$e(t.type)}},$$e=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}};const K6=/(\w+)(\])?(\[|\.)?/g;function vq(n,e){n.seq.push(e),n.map[e.id]=e}function Q$e(n,e,t){const i=n.name,r=i.length;for(K6.lastIndex=0;;){const s=K6.exec(i),a=K6.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){vq(t,c===void 0?new X$e(o,n,e):new j$e(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new $$e(o),vq(t,d)),t=d}}}let B_=class{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Q$e(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}};function gq(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Z$e=0;function J$e(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function eQe(n){switch(n){case hp:return["Linear","( value )"];case Ni:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function yq(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+J$e(n.getShaderSource(e),a)}else return r}function tQe(n,e){const t=eQe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function nQe(n,e){let t;switch(e){case sKe:t="Linear";break;case aKe:t="Reinhard";break;case oKe:t="OptimizedCineon";break;case lKe:t="ACESFilmic";break;case cKe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function iQe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(j2).join(`
`)}function rQe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function sQe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function j2(n){return n!==""}function bq(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xq(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const aQe=/^[ \t]*#include +<([\w\d./]+)>/gm;function XR(n){return n.replace(aQe,oQe)}function oQe(n,e){const t=Wi[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return XR(t)}const lQe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,cQe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Aq(n){return n.replace(cQe,gse).replace(lQe,uQe)}function uQe(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),gse(n,e,t,i)}function gse(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function wq(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dQe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===qre?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Bqe?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===X2&&(e="SHADOWMAP_TYPE_VSM"),e}function fQe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case gm:case ym:e="ENVMAP_TYPE_CUBE";break;case kA:e="ENVMAP_TYPE_CUBE_UV";break}return e}function hQe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ym:e="ENVMAP_MODE_REFRACTION";break}return e}function pQe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case dT:e="ENVMAP_BLENDING_MULTIPLY";break;case iKe:e="ENVMAP_BLENDING_MIX";break;case rKe:e="ENVMAP_BLENDING_ADD";break}return e}function mQe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function vQe(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=dQe(t),c=fQe(t),u=hQe(t),d=pQe(t),f=mQe(t),h=t.isWebGL2?"":iQe(t),p=rQe(s),m=r.createProgram();let v,g,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[p].filter(j2).join(`
`),v.length>0&&(v+=`
`),g=[h,p].filter(j2).join(`
`),g.length>0&&(g+=`
`)):(v=[wq(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(j2).join(`
`),g=[h,wq(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==af?"#define TONE_MAPPING":"",t.toneMapping!==af?Wi.tonemapping_pars_fragment:"",t.toneMapping!==af?nQe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Wi.encodings_pars_fragment,tQe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(j2).join(`
`)),a=XR(a),a=bq(a,t),a=xq(a,t),o=XR(o),o=bq(o,t),o=xq(o,t),a=Aq(a),o=Aq(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===qW?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===qW?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=y+v+a,b=y+g+o,A=gq(r,35633,x),S=gq(r,35632,b);if(r.attachShader(m,A),r.attachShader(m,S),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const M=r.getProgramInfoLog(m).trim(),T=r.getShaderInfoLog(A).trim(),E=r.getShaderInfoLog(S).trim();let I=!0,L=!0;if(r.getProgramParameter(m,35714)===!1){I=!1;const F=yq(r,A,"vertex"),B=yq(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+M+`
`+F+`
`+B)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(T===""||E==="")&&(L=!1);L&&(this.diagnostics={runnable:I,programLog:M,vertexShader:{log:T,prefix:v},fragmentShader:{log:E,prefix:g}})}r.deleteShader(A),r.deleteShader(S);let C;this.getUniforms=function(){return C===void 0&&(C=new B_(r,m)),C};let _;return this.getAttributes=function(){return _===void 0&&(_=sQe(r,m)),_},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=Z$e++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=A,this.fragmentShader=S,this}let gQe=0,yQe=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new bQe(e);t.set(e,i)}return t.get(e)}},bQe=class{constructor(e){this.id=gQe++,this.code=e,this.usedTimes=0}};function xQe(n,e,t,i,r,s,a){const o=new EF,l=new yQe,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(_,M,T,E,I){const L=E.fog,F=I.geometry,B=_.isMeshStandardMaterial?E.environment:null,P=(_.isMeshStandardMaterial?t:e).get(_.envMap||B),z=P&&P.mapping===kA?P.image.height:null,O=p[_.type];_.precision!==null&&(h=r.getMaxPrecision(_.precision),h!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",h,"instead."));const N=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,H=N!==void 0?N.length:0;let q=0;F.morphAttributes.position!==void 0&&(q=1),F.morphAttributes.normal!==void 0&&(q=2),F.morphAttributes.color!==void 0&&(q=3);let te,Q,ee,de;if(O){const Ne=Pu[O];te=Ne.vertexShader,Q=Ne.fragmentShader}else te=_.vertexShader,Q=_.fragmentShader,l.update(_),ee=l.getVertexShaderID(_),de=l.getFragmentShaderID(_);const J=n.getRenderTarget(),ue=_.alphaTest>0,Te=_.clearcoat>0,De=_.iridescence>0;return{isWebGL2:u,shaderID:O,shaderName:_.type,vertexShader:te,fragmentShader:Q,defines:_.defines,customVertexShaderID:ee,customFragmentShaderID:de,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:h,instancing:I.isInstancedMesh===!0,instancingColor:I.isInstancedMesh===!0&&I.instanceColor!==null,supportsVertexTextures:f,outputEncoding:J===null?n.outputEncoding:J.isXRRenderTarget===!0?J.texture.encoding:hp,map:!!_.map,matcap:!!_.matcap,envMap:!!P,envMapMode:P&&P.mapping,envMapCubeUVHeight:z,lightMap:!!_.lightMap,aoMap:!!_.aoMap,emissiveMap:!!_.emissiveMap,bumpMap:!!_.bumpMap,normalMap:!!_.normalMap,objectSpaceNormalMap:_.normalMapType===RKe,tangentSpaceNormalMap:_.normalMapType===km,decodeVideoTexture:!!_.map&&_.map.isVideoTexture===!0&&_.map.encoding===Ni,clearcoat:Te,clearcoatMap:Te&&!!_.clearcoatMap,clearcoatRoughnessMap:Te&&!!_.clearcoatRoughnessMap,clearcoatNormalMap:Te&&!!_.clearcoatNormalMap,iridescence:De,iridescenceMap:De&&!!_.iridescenceMap,iridescenceThicknessMap:De&&!!_.iridescenceThicknessMap,displacementMap:!!_.displacementMap,roughnessMap:!!_.roughnessMap,metalnessMap:!!_.metalnessMap,specularMap:!!_.specularMap,specularIntensityMap:!!_.specularIntensityMap,specularColorMap:!!_.specularColorMap,opaque:_.transparent===!1&&_.blending===t1,alphaMap:!!_.alphaMap,alphaTest:ue,gradientMap:!!_.gradientMap,sheen:_.sheen>0,sheenColorMap:!!_.sheenColorMap,sheenRoughnessMap:!!_.sheenRoughnessMap,transmission:_.transmission>0,transmissionMap:!!_.transmissionMap,thicknessMap:!!_.thicknessMap,combine:_.combine,vertexTangents:!!_.normalMap&&!!F.attributes.tangent,vertexColors:_.vertexColors,vertexAlphas:_.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,vertexUvs:!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatMap||!!_.clearcoatRoughnessMap||!!_.clearcoatNormalMap||!!_.iridescenceMap||!!_.iridescenceThicknessMap||!!_.displacementMap||!!_.transmissionMap||!!_.thicknessMap||!!_.specularIntensityMap||!!_.specularColorMap||!!_.sheenColorMap||!!_.sheenRoughnessMap,uvsVertexOnly:!(_.map||_.bumpMap||_.normalMap||_.specularMap||_.alphaMap||_.emissiveMap||_.roughnessMap||_.metalnessMap||_.clearcoatNormalMap||_.iridescenceMap||_.iridescenceThicknessMap||_.transmission>0||_.transmissionMap||_.thicknessMap||_.specularIntensityMap||_.specularColorMap||_.sheen>0||_.sheenColorMap||_.sheenRoughnessMap)&&!!_.displacementMap,fog:!!L,useFog:_.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:!!_.flatShading,sizeAttenuation:_.sizeAttenuation,logarithmicDepthBuffer:d,skinning:I.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:q,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:_.dithering,shadowMapEnabled:n.shadowMap.enabled&&T.length>0,shadowMapType:n.shadowMap.type,toneMapping:_.toneMapped?n.toneMapping:af,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:_.premultipliedAlpha,doubleSided:_.side===fp,flipSided:_.side===Zc,useDepthPacking:!!_.depthPacking,depthPacking:_.depthPacking||0,index0AttributeName:_.index0AttributeName,extensionDerivatives:_.extensions&&_.extensions.derivatives,extensionFragDepth:_.extensions&&_.extensions.fragDepth,extensionDrawBuffers:_.extensions&&_.extensions.drawBuffers,extensionShaderTextureLOD:_.extensions&&_.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:_.customProgramCacheKey()}}function v(_){const M=[];if(_.shaderID?M.push(_.shaderID):(M.push(_.customVertexShaderID),M.push(_.customFragmentShaderID)),_.defines!==void 0)for(const T in _.defines)M.push(T),M.push(_.defines[T]);return _.isRawShaderMaterial===!1&&(g(M,_),y(M,_),M.push(n.outputEncoding)),M.push(_.customProgramCacheKey),M.join()}function g(_,M){_.push(M.precision),_.push(M.outputEncoding),_.push(M.envMapMode),_.push(M.envMapCubeUVHeight),_.push(M.combine),_.push(M.vertexUvs),_.push(M.fogExp2),_.push(M.sizeAttenuation),_.push(M.morphTargetsCount),_.push(M.morphAttributeCount),_.push(M.numDirLights),_.push(M.numPointLights),_.push(M.numSpotLights),_.push(M.numHemiLights),_.push(M.numRectAreaLights),_.push(M.numDirLightShadows),_.push(M.numPointLightShadows),_.push(M.numSpotLightShadows),_.push(M.shadowMapType),_.push(M.toneMapping),_.push(M.numClippingPlanes),_.push(M.numClipIntersection),_.push(M.depthPacking)}function y(_,M){o.disableAll(),M.isWebGL2&&o.enable(0),M.supportsVertexTextures&&o.enable(1),M.instancing&&o.enable(2),M.instancingColor&&o.enable(3),M.map&&o.enable(4),M.matcap&&o.enable(5),M.envMap&&o.enable(6),M.lightMap&&o.enable(7),M.aoMap&&o.enable(8),M.emissiveMap&&o.enable(9),M.bumpMap&&o.enable(10),M.normalMap&&o.enable(11),M.objectSpaceNormalMap&&o.enable(12),M.tangentSpaceNormalMap&&o.enable(13),M.clearcoat&&o.enable(14),M.clearcoatMap&&o.enable(15),M.clearcoatRoughnessMap&&o.enable(16),M.clearcoatNormalMap&&o.enable(17),M.iridescence&&o.enable(18),M.iridescenceMap&&o.enable(19),M.iridescenceThicknessMap&&o.enable(20),M.displacementMap&&o.enable(21),M.specularMap&&o.enable(22),M.roughnessMap&&o.enable(23),M.metalnessMap&&o.enable(24),M.gradientMap&&o.enable(25),M.alphaMap&&o.enable(26),M.alphaTest&&o.enable(27),M.vertexColors&&o.enable(28),M.vertexAlphas&&o.enable(29),M.vertexUvs&&o.enable(30),M.vertexTangents&&o.enable(31),M.uvsVertexOnly&&o.enable(32),M.fog&&o.enable(33),_.push(o.mask),o.disableAll(),M.useFog&&o.enable(0),M.flatShading&&o.enable(1),M.logarithmicDepthBuffer&&o.enable(2),M.skinning&&o.enable(3),M.morphTargets&&o.enable(4),M.morphNormals&&o.enable(5),M.morphColors&&o.enable(6),M.premultipliedAlpha&&o.enable(7),M.shadowMapEnabled&&o.enable(8),M.physicallyCorrectLights&&o.enable(9),M.doubleSided&&o.enable(10),M.flipSided&&o.enable(11),M.useDepthPacking&&o.enable(12),M.dithering&&o.enable(13),M.specularIntensityMap&&o.enable(14),M.specularColorMap&&o.enable(15),M.transmission&&o.enable(16),M.transmissionMap&&o.enable(17),M.thicknessMap&&o.enable(18),M.sheen&&o.enable(19),M.sheenColorMap&&o.enable(20),M.sheenRoughnessMap&&o.enable(21),M.decodeVideoTexture&&o.enable(22),M.opaque&&o.enable(23),_.push(o.mask)}function x(_){const M=p[_.type];let T;if(M){const E=Pu[M];T=lYe.clone(E.uniforms)}else T=_.uniforms;return T}function b(_,M){let T;for(let E=0,I=c.length;E<I;E++){const L=c[E];if(L.cacheKey===M){T=L,++T.usedTimes;break}}return T===void 0&&(T=new vQe(n,M,_,s),c.push(T)),T}function A(_){if(--_.usedTimes===0){const M=c.indexOf(_);c[M]=c[c.length-1],c.pop(),_.destroy()}}function S(_){l.remove(_)}function C(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:x,acquireProgram:b,releaseProgram:A,releaseShaderCache:S,programs:c,dispose:C}}function AQe(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function wQe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Sq(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function _q(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(d,f,h,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.push(g):h.transparent===!0?r.push(g):t.push(g)}function l(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.unshift(g):h.transparent===!0?r.unshift(g):t.unshift(g)}function c(d,f){t.length>1&&t.sort(d||wQe),i.length>1&&i.sort(f||Sq),r.length>1&&r.sort(f||Sq)}function u(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function SQe(){let n=new WeakMap;function e(i,r){let s;return n.has(i)===!1?(s=new _q,n.set(i,[s])):r>=n.get(i).length?(s=new _q,n.get(i).push(s)):s=n.get(i)[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function _Qe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $e,color:new wn};break;case"SpotLight":t={position:new $e,direction:new $e,color:new wn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $e,color:new wn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $e,skyColor:new wn,groundColor:new wn};break;case"RectAreaLight":t={color:new wn,position:new $e,halfWidth:new $e,halfHeight:new $e};break}return n[e.id]=t,t}}}function CQe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let MQe=0;function TQe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function EQe(n,e){const t=new _Qe,i=CQe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new $e);const s=new $e,a=new qn,o=new qn;function l(u,d){let f=0,h=0,p=0;for(let M=0;M<9;M++)r.probe[M].set(0,0,0);let m=0,v=0,g=0,y=0,x=0,b=0,A=0,S=0;u.sort(TQe);const C=d!==!0?Math.PI:1;for(let M=0,T=u.length;M<T;M++){const E=u[M],I=E.color,L=E.intensity,F=E.distance,B=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)f+=I.r*L*C,h+=I.g*L*C,p+=I.b*L*C;else if(E.isLightProbe)for(let P=0;P<9;P++)r.probe[P].addScaledVector(E.sh.coefficients[P],L);else if(E.isDirectionalLight){const P=t.get(E);if(P.color.copy(E.color).multiplyScalar(E.intensity*C),E.castShadow){const z=E.shadow,O=i.get(E);O.shadowBias=z.bias,O.shadowNormalBias=z.normalBias,O.shadowRadius=z.radius,O.shadowMapSize=z.mapSize,r.directionalShadow[m]=O,r.directionalShadowMap[m]=B,r.directionalShadowMatrix[m]=E.shadow.matrix,b++}r.directional[m]=P,m++}else if(E.isSpotLight){const P=t.get(E);if(P.position.setFromMatrixPosition(E.matrixWorld),P.color.copy(I).multiplyScalar(L*C),P.distance=F,P.coneCos=Math.cos(E.angle),P.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),P.decay=E.decay,E.castShadow){const z=E.shadow,O=i.get(E);O.shadowBias=z.bias,O.shadowNormalBias=z.normalBias,O.shadowRadius=z.radius,O.shadowMapSize=z.mapSize,r.spotShadow[g]=O,r.spotShadowMap[g]=B,r.spotShadowMatrix[g]=E.shadow.matrix,S++}r.spot[g]=P,g++}else if(E.isRectAreaLight){const P=t.get(E);P.color.copy(I).multiplyScalar(L),P.halfWidth.set(E.width*.5,0,0),P.halfHeight.set(0,E.height*.5,0),r.rectArea[y]=P,y++}else if(E.isPointLight){const P=t.get(E);if(P.color.copy(E.color).multiplyScalar(E.intensity*C),P.distance=E.distance,P.decay=E.decay,E.castShadow){const z=E.shadow,O=i.get(E);O.shadowBias=z.bias,O.shadowNormalBias=z.normalBias,O.shadowRadius=z.radius,O.shadowMapSize=z.mapSize,O.shadowCameraNear=z.camera.near,O.shadowCameraFar=z.camera.far,r.pointShadow[v]=O,r.pointShadowMap[v]=B,r.pointShadowMatrix[v]=E.shadow.matrix,A++}r.point[v]=P,v++}else if(E.isHemisphereLight){const P=t.get(E);P.skyColor.copy(E.color).multiplyScalar(L*C),P.groundColor.copy(E.groundColor).multiplyScalar(L*C),r.hemi[x]=P,x++}}y>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=_n.LTC_FLOAT_1,r.rectAreaLTC2=_n.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=_n.LTC_HALF_1,r.rectAreaLTC2=_n.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=h,r.ambient[2]=p;const _=r.hash;(_.directionalLength!==m||_.pointLength!==v||_.spotLength!==g||_.rectAreaLength!==y||_.hemiLength!==x||_.numDirectionalShadows!==b||_.numPointShadows!==A||_.numSpotShadows!==S)&&(r.directional.length=m,r.spot.length=g,r.rectArea.length=y,r.point.length=v,r.hemi.length=x,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=A,r.spotShadowMatrix.length=S,_.directionalLength=m,_.pointLength=v,_.spotLength=g,_.rectAreaLength=y,_.hemiLength=x,_.numDirectionalShadows=b,_.numPointShadows=A,_.numSpotShadows=S,r.version=MQe++)}function c(u,d){let f=0,h=0,p=0,m=0,v=0;const g=d.matrixWorldInverse;for(let y=0,x=u.length;y<x;y++){const b=u[y];if(b.isDirectionalLight){const A=r.directional[f];A.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),f++}else if(b.isSpotLight){const A=r.spot[p];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(g),A.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(g),p++}else if(b.isRectAreaLight){const A=r.rectArea[m];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(g),o.identity(),a.copy(b.matrixWorld),a.premultiply(g),o.extractRotation(a),A.halfWidth.set(b.width*.5,0,0),A.halfHeight.set(0,b.height*.5,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),m++}else if(b.isPointLight){const A=r.point[h];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(g),h++}else if(b.isHemisphereLight){const A=r.hemi[v];A.direction.setFromMatrixPosition(b.matrixWorld),A.direction.transformDirection(g),v++}}}return{setup:l,setupView:c,state:r}}function Cq(n,e){const t=new EQe(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(d){i.push(d)}function o(d){r.push(d)}function l(d){t.setup(i,d)}function c(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function IQe(n,e){let t=new WeakMap;function i(s,a=0){let o;return t.has(s)===!1?(o=new Cq(n,e),t.set(s,[o])):a>=t.get(s).length?(o=new Cq(n,e),t.get(s).push(o)):o=t.get(s)[a],o}function r(){t=new WeakMap}return{get:i,dispose:r}}let yse=class extends zs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=IKe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},bse=class extends zs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new $e,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};const DQe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,RQe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function PQe(n,e,t){let i=new RF;const r=new Gt,s=new Gt,a=new gr,o=new yse({depthPacking:DKe}),l=new bse,c={},u=t.maxTextureSize,d={0:Zc,1:dp,2:fp},f=new yf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Gt},radius:{value:4}},vertexShader:DQe,fragmentShader:RQe}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new $i;p.setAttribute("position",new As(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Qs(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qre,this.render=function(b,A,S){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||b.length===0)return;const C=n.getRenderTarget(),_=n.getActiveCubeFace(),M=n.getActiveMipmapLevel(),T=n.state;T.setBlending(Kh),T.buffers.color.setClear(1,1,1,1),T.buffers.depth.setTest(!0),T.setScissorTest(!1);for(let E=0,I=b.length;E<I;E++){const L=b[E],F=L.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;r.copy(F.mapSize);const B=F.getFrameExtents();if(r.multiply(B),s.copy(F.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/B.x),r.x=s.x*B.x,F.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/B.y),r.y=s.y*B.y,F.mapSize.y=s.y)),F.map===null){const z=this.type!==X2?{minFilter:ua,magFilter:ua}:{};F.map=new xm(r.x,r.y,z),F.map.texture.name=L.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const P=F.getViewportCount();for(let z=0;z<P;z++){const O=F.getViewport(z);a.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),T.viewport(a),F.updateMatrices(L,z),i=F.getFrustum(),x(A,S,F.camera,L,this.type)}F.isPointLightShadow!==!0&&this.type===X2&&g(F,S),F.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(C,_,M)};function g(b,A){const S=e.update(m);f.defines.VSM_SAMPLES!==b.blurSamples&&(f.defines.VSM_SAMPLES=b.blurSamples,h.defines.VSM_SAMPLES=b.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new xm(r.x,r.y)),f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(A,null,S,f,m,null),h.uniforms.shadow_pass.value=b.mapPass.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(A,null,S,h,m,null)}function y(b,A,S,C,_,M){let T=null;const E=S.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(E!==void 0?T=E:T=S.isPointLight===!0?l:o,n.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){const I=T.uuid,L=A.uuid;let F=c[I];F===void 0&&(F={},c[I]=F);let B=F[L];B===void 0&&(B=T.clone(),F[L]=B),T=B}return T.visible=A.visible,T.wireframe=A.wireframe,M===X2?T.side=A.shadowSide!==null?A.shadowSide:A.side:T.side=A.shadowSide!==null?A.shadowSide:d[A.side],T.alphaMap=A.alphaMap,T.alphaTest=A.alphaTest,T.clipShadows=A.clipShadows,T.clippingPlanes=A.clippingPlanes,T.clipIntersection=A.clipIntersection,T.displacementMap=A.displacementMap,T.displacementScale=A.displacementScale,T.displacementBias=A.displacementBias,T.wireframeLinewidth=A.wireframeLinewidth,T.linewidth=A.linewidth,S.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(S.matrixWorld),T.nearDistance=C,T.farDistance=_),T}function x(b,A,S,C,_){if(b.visible===!1)return;if(b.layers.test(A.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&_===X2)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,b.matrixWorld);const E=e.update(b),I=b.material;if(Array.isArray(I)){const L=E.groups;for(let F=0,B=L.length;F<B;F++){const P=L[F],z=I[P.materialIndex];if(z&&z.visible){const O=y(b,z,C,S.near,S.far,_);n.renderBufferDirect(S,null,E,O,b,P)}}}else if(I.visible){const L=y(b,I,C,S.near,S.far,_);n.renderBufferDirect(S,null,E,L,b,null)}}const T=b.children;for(let E=0,I=T.length;E<I;E++)x(T[E],A,S,C,_)}}function LQe(n,e,t){const i=t.isWebGL2;function r(){let Ae=!1;const dt=new gr;let we=null;const _t=new gr(0,0,0,0);return{setMask:function(it){we!==it&&!Ae&&(n.colorMask(it,it,it,it),we=it)},setLocked:function(it){Ae=it},setClear:function(it,wt,Ft,Rt,Wt){Wt===!0&&(it*=Rt,wt*=Rt,Ft*=Rt),dt.set(it,wt,Ft,Rt),_t.equals(dt)===!1&&(n.clearColor(it,wt,Ft,Rt),_t.copy(dt))},reset:function(){Ae=!1,we=null,_t.set(-1,0,0,0)}}}function s(){let Ae=!1,dt=null,we=null,_t=null;return{setTest:function(it){it?ue(2929):Te(2929)},setMask:function(it){dt!==it&&!Ae&&(n.depthMask(it),dt=it)},setFunc:function(it){if(we!==it){if(it)switch(it){case $qe:n.depthFunc(512);break;case Qqe:n.depthFunc(519);break;case Zqe:n.depthFunc(513);break;case zR:n.depthFunc(515);break;case Jqe:n.depthFunc(514);break;case eKe:n.depthFunc(518);break;case tKe:n.depthFunc(516);break;case nKe:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);we=it}},setLocked:function(it){Ae=it},setClear:function(it){_t!==it&&(n.clearDepth(it),_t=it)},reset:function(){Ae=!1,dt=null,we=null,_t=null}}}function a(){let Ae=!1,dt=null,we=null,_t=null,it=null,wt=null,Ft=null,Rt=null,Wt=null;return{setTest:function(hn){Ae||(hn?ue(2960):Te(2960))},setMask:function(hn){dt!==hn&&!Ae&&(n.stencilMask(hn),dt=hn)},setFunc:function(hn,pi,Pn){(we!==hn||_t!==pi||it!==Pn)&&(n.stencilFunc(hn,pi,Pn),we=hn,_t=pi,it=Pn)},setOp:function(hn,pi,Pn){(wt!==hn||Ft!==pi||Rt!==Pn)&&(n.stencilOp(hn,pi,Pn),wt=hn,Ft=pi,Rt=Pn)},setLocked:function(hn){Ae=hn},setClear:function(hn){Wt!==hn&&(n.clearStencil(hn),Wt=hn)},reset:function(){Ae=!1,dt=null,we=null,_t=null,it=null,wt=null,Ft=null,Rt=null,Wt=null}}}const o=new r,l=new s,c=new a,u=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,m=[],v=null,g=!1,y=null,x=null,b=null,A=null,S=null,C=null,_=null,M=!1,T=null,E=null,I=null,L=null,F=null;const B=n.getParameter(35661);let P=!1,z=0;const O=n.getParameter(7938);O.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(O)[1]),P=z>=1):O.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),P=z>=2);let N=null,H={};const q=n.getParameter(3088),te=n.getParameter(2978),Q=new gr().fromArray(q),ee=new gr().fromArray(te);function de(Ae,dt,we){const _t=new Uint8Array(4),it=n.createTexture();n.bindTexture(Ae,it),n.texParameteri(Ae,10241,9728),n.texParameteri(Ae,10240,9728);for(let wt=0;wt<we;wt++)n.texImage2D(dt+wt,0,6408,1,1,0,6408,5121,_t);return it}const J={};J[3553]=de(3553,3553,1),J[34067]=de(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ue(2929),l.setFunc(zR),ke(!1),Ge(yW),ue(2884),ne(Kh);function ue(Ae){f[Ae]!==!0&&(n.enable(Ae),f[Ae]=!0)}function Te(Ae){f[Ae]!==!1&&(n.disable(Ae),f[Ae]=!1)}function De(Ae,dt){return h[Ae]!==dt?(n.bindFramebuffer(Ae,dt),h[Ae]=dt,i&&(Ae===36009&&(h[36160]=dt),Ae===36160&&(h[36009]=dt)),!0):!1}function Le(Ae,dt){let we=m,_t=!1;if(Ae)if(we=p.get(dt),we===void 0&&(we=[],p.set(dt,we)),Ae.isWebGLMultipleRenderTargets){const it=Ae.texture;if(we.length!==it.length||we[0]!==36064){for(let wt=0,Ft=it.length;wt<Ft;wt++)we[wt]=36064+wt;we.length=it.length,_t=!0}}else we[0]!==36064&&(we[0]=36064,_t=!0);else we[0]!==1029&&(we[0]=1029,_t=!0);_t&&(t.isWebGL2?n.drawBuffers(we):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(we))}function Ne(Ae){return v!==Ae?(n.useProgram(Ae),v=Ae,!0):!1}const Y={[ug]:32774,[Uqe]:32778,[zqe]:32779};if(i)Y[wW]=32775,Y[SW]=32776;else{const Ae=e.get("EXT_blend_minmax");Ae!==null&&(Y[wW]=Ae.MIN_EXT,Y[SW]=Ae.MAX_EXT)}const oe={[Vqe]:0,[Hqe]:1,[Gqe]:768,[Kre]:770,[jqe]:776,[Yqe]:774,[qqe]:772,[Wqe]:769,[Yre]:771,[Xqe]:775,[Kqe]:773};function ne(Ae,dt,we,_t,it,wt,Ft,Rt){if(Ae===Kh){g===!0&&(Te(3042),g=!1);return}if(g===!1&&(ue(3042),g=!0),Ae!==Oqe){if(Ae!==y||Rt!==M){if((x!==ug||S!==ug)&&(n.blendEquation(32774),x=ug,S=ug),Rt)switch(Ae){case t1:n.blendFuncSeparate(1,771,1,771);break;case bW:n.blendFunc(1,1);break;case xW:n.blendFuncSeparate(0,769,0,1);break;case AW:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case t1:n.blendFuncSeparate(770,771,1,771);break;case bW:n.blendFunc(770,1);break;case xW:n.blendFuncSeparate(0,769,0,1);break;case AW:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}b=null,A=null,C=null,_=null,y=Ae,M=Rt}return}it=it||dt,wt=wt||we,Ft=Ft||_t,(dt!==x||it!==S)&&(n.blendEquationSeparate(Y[dt],Y[it]),x=dt,S=it),(we!==b||_t!==A||wt!==C||Ft!==_)&&(n.blendFuncSeparate(oe[we],oe[_t],oe[wt],oe[Ft]),b=we,A=_t,C=wt,_=Ft),y=Ae,M=null}function Xe(Ae,dt){Ae.side===fp?Te(2884):ue(2884);let we=Ae.side===Zc;dt&&(we=!we),ke(we),Ae.blending===t1&&Ae.transparent===!1?ne(Kh):ne(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.premultipliedAlpha),l.setFunc(Ae.depthFunc),l.setTest(Ae.depthTest),l.setMask(Ae.depthWrite),o.setMask(Ae.colorWrite);const _t=Ae.stencilWrite;c.setTest(_t),_t&&(c.setMask(Ae.stencilWriteMask),c.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),c.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),qe(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?ue(32926):Te(32926)}function ke(Ae){T!==Ae&&(Ae?n.frontFace(2304):n.frontFace(2305),T=Ae)}function Ge(Ae){Ae!==kqe?(ue(2884),Ae!==E&&(Ae===yW?n.cullFace(1029):Ae===Fqe?n.cullFace(1028):n.cullFace(1032))):Te(2884),E=Ae}function He(Ae){Ae!==I&&(P&&n.lineWidth(Ae),I=Ae)}function qe(Ae,dt,we){Ae?(ue(32823),(L!==dt||F!==we)&&(n.polygonOffset(dt,we),L=dt,F=we)):Te(32823)}function tt(Ae){Ae?ue(3089):Te(3089)}function pe(Ae){Ae===void 0&&(Ae=33984+B-1),N!==Ae&&(n.activeTexture(Ae),N=Ae)}function G(Ae,dt){N===null&&pe();let we=H[N];we===void 0&&(we={type:void 0,texture:void 0},H[N]=we),(we.type!==Ae||we.texture!==dt)&&(n.bindTexture(Ae,dt||J[Ae]),we.type=Ae,we.texture=dt)}function Z(){const Ae=H[N];Ae!==void 0&&Ae.type!==void 0&&(n.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function ge(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Oe(){try{n.texSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function je(){try{n.texSubImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function bt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function At(){try{n.texStorage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ee(){try{n.texStorage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function gt(){try{n.texImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function lt(){try{n.texImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function $(Ae){Q.equals(Ae)===!1&&(n.scissor(Ae.x,Ae.y,Ae.z,Ae.w),Q.copy(Ae))}function le(Ae){ee.equals(Ae)===!1&&(n.viewport(Ae.x,Ae.y,Ae.z,Ae.w),ee.copy(Ae))}function fe(Ae,dt){let we=d.get(dt);we===void 0&&(we=new WeakMap,d.set(dt,we));let _t=we.get(Ae);_t===void 0&&(_t=n.getUniformBlockIndex(dt,Ae.name),we.set(Ae,_t))}function Me(Ae,dt){const _t=d.get(dt).get(Ae);u.get(Ae)!==_t&&(n.uniformBlockBinding(dt,_t,Ae.__bindingPointIndex),u.set(Ae,_t))}function me(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},N=null,H={},h={},p=new WeakMap,m=[],v=null,g=!1,y=null,x=null,b=null,A=null,S=null,C=null,_=null,M=!1,T=null,E=null,I=null,L=null,F=null,Q.set(0,0,n.canvas.width,n.canvas.height),ee.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:ue,disable:Te,bindFramebuffer:De,drawBuffers:Le,useProgram:Ne,setBlending:ne,setMaterial:Xe,setFlipSided:ke,setCullFace:Ge,setLineWidth:He,setPolygonOffset:qe,setScissorTest:tt,activeTexture:pe,bindTexture:G,unbindTexture:Z,compressedTexImage2D:ge,texImage2D:gt,texImage3D:lt,updateUBOMapping:fe,uniformBlockBinding:Me,texStorage2D:At,texStorage3D:Ee,texSubImage2D:Oe,texSubImage3D:je,compressedTexSubImage2D:bt,scissor:$,viewport:le,reset:me}}function kQe(n,e,t,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(G,Z){return g?new OffscreenCanvas(G,Z):Hx("canvas")}function x(G,Z,ge,Oe){let je=1;if((G.width>Oe||G.height>Oe)&&(je=Oe/Math.max(G.width,G.height)),je<1||Z===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const bt=Z?h4:Math.floor,At=bt(je*G.width),Ee=bt(je*G.height);m===void 0&&(m=y(At,Ee));const gt=ge?y(At,Ee):m;return gt.width=At,gt.height=Ee,gt.getContext("2d").drawImage(G,0,0,At,Ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+At+"x"+Ee+")."),gt}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function b(G){return GR(G.width)&&GR(G.height)}function A(G){return o?!1:G.wrapS!==$s||G.wrapT!==$s||G.minFilter!==ua&&G.minFilter!==Bs}function S(G,Z){return G.generateMipmaps&&Z&&G.minFilter!==ua&&G.minFilter!==Bs}function C(G){n.generateMipmap(G)}function _(G,Z,ge,Oe,je=!1){if(o===!1)return Z;if(G!==null){if(n[G]!==void 0)return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let bt=Z;return Z===6403&&(ge===5126&&(bt=33326),ge===5131&&(bt=33325),ge===5121&&(bt=33321)),Z===33319&&(ge===5126&&(bt=33328),ge===5131&&(bt=33327),ge===5121&&(bt=33323)),Z===6408&&(ge===5126&&(bt=34836),ge===5131&&(bt=34842),ge===5121&&(bt=Oe===Ni&&je===!1?35907:32856),ge===32819&&(bt=32854),ge===32820&&(bt=32855)),(bt===33325||bt===33326||bt===33327||bt===33328||bt===34842||bt===34836)&&e.get("EXT_color_buffer_float"),bt}function M(G,Z,ge){return S(G,ge)===!0||G.isFramebufferTexture&&G.minFilter!==ua&&G.minFilter!==Bs?Math.log2(Math.max(Z.width,Z.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?Z.mipmaps.length:1}function T(G){return G===ua||G===u4||G===d4?9728:9729}function E(G){const Z=G.target;Z.removeEventListener("dispose",E),L(Z),Z.isVideoTexture&&p.delete(Z)}function I(G){const Z=G.target;Z.removeEventListener("dispose",I),B(Z)}function L(G){const Z=i.get(G);if(Z.__webglInit===void 0)return;const ge=G.source,Oe=v.get(ge);if(Oe){const je=Oe[Z.__cacheKey];je.usedTimes--,je.usedTimes===0&&F(G),Object.keys(Oe).length===0&&v.delete(ge)}i.remove(G)}function F(G){const Z=i.get(G);n.deleteTexture(Z.__webglTexture);const ge=G.source,Oe=v.get(ge);delete Oe[Z.__cacheKey],a.memory.textures--}function B(G){const Z=G.texture,ge=i.get(G),Oe=i.get(Z);if(Oe.__webglTexture!==void 0&&(n.deleteTexture(Oe.__webglTexture),a.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let je=0;je<6;je++)n.deleteFramebuffer(ge.__webglFramebuffer[je]),ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer[je]);else{if(n.deleteFramebuffer(ge.__webglFramebuffer),ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer)for(let je=0;je<ge.__webglColorRenderbuffer.length;je++)ge.__webglColorRenderbuffer[je]&&n.deleteRenderbuffer(ge.__webglColorRenderbuffer[je]);ge.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ge.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let je=0,bt=Z.length;je<bt;je++){const At=i.get(Z[je]);At.__webglTexture&&(n.deleteTexture(At.__webglTexture),a.memory.textures--),i.remove(Z[je])}i.remove(Z),i.remove(G)}let P=0;function z(){P=0}function O(){const G=P;return G>=l&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+l),P+=1,G}function N(G){const Z=[];return Z.push(G.wrapS),Z.push(G.wrapT),Z.push(G.magFilter),Z.push(G.minFilter),Z.push(G.anisotropy),Z.push(G.internalFormat),Z.push(G.format),Z.push(G.type),Z.push(G.generateMipmaps),Z.push(G.premultiplyAlpha),Z.push(G.flipY),Z.push(G.unpackAlignment),Z.push(G.encoding),Z.join()}function H(G,Z){const ge=i.get(G);if(G.isVideoTexture&&tt(G),G.isRenderTargetTexture===!1&&G.version>0&&ge.__version!==G.version){const Oe=G.image;if(Oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Te(ge,G,Z);return}}t.activeTexture(33984+Z),t.bindTexture(3553,ge.__webglTexture)}function q(G,Z){const ge=i.get(G);if(G.version>0&&ge.__version!==G.version){Te(ge,G,Z);return}t.activeTexture(33984+Z),t.bindTexture(35866,ge.__webglTexture)}function te(G,Z){const ge=i.get(G);if(G.version>0&&ge.__version!==G.version){Te(ge,G,Z);return}t.activeTexture(33984+Z),t.bindTexture(32879,ge.__webglTexture)}function Q(G,Z){const ge=i.get(G);if(G.version>0&&ge.__version!==G.version){De(ge,G,Z);return}t.activeTexture(33984+Z),t.bindTexture(34067,ge.__webglTexture)}const ee={[Ko]:10497,[$s]:33071,[Ox]:33648},de={[ua]:9728,[u4]:9984,[d4]:9986,[Bs]:9729,[CF]:9985,[Pf]:9987};function J(G,Z,ge){if(ge?(n.texParameteri(G,10242,ee[Z.wrapS]),n.texParameteri(G,10243,ee[Z.wrapT]),(G===32879||G===35866)&&n.texParameteri(G,32882,ee[Z.wrapR]),n.texParameteri(G,10240,de[Z.magFilter]),n.texParameteri(G,10241,de[Z.minFilter])):(n.texParameteri(G,10242,33071),n.texParameteri(G,10243,33071),(G===32879||G===35866)&&n.texParameteri(G,32882,33071),(Z.wrapS!==$s||Z.wrapT!==$s)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(G,10240,T(Z.magFilter)),n.texParameteri(G,10241,T(Z.minFilter)),Z.minFilter!==ua&&Z.minFilter!==Bs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Oe=e.get("EXT_texture_filter_anisotropic");if(Z.type===Nh&&e.has("OES_texture_float_linear")===!1||o===!1&&Z.type===Ux&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||i.get(Z).__currentAnisotropy)&&(n.texParameterf(G,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy)}}function ue(G,Z){let ge=!1;G.__webglInit===void 0&&(G.__webglInit=!0,Z.addEventListener("dispose",E));const Oe=Z.source;let je=v.get(Oe);je===void 0&&(je={},v.set(Oe,je));const bt=N(Z);if(bt!==G.__cacheKey){je[bt]===void 0&&(je[bt]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,ge=!0),je[bt].usedTimes++;const At=je[G.__cacheKey];At!==void 0&&(je[G.__cacheKey].usedTimes--,At.usedTimes===0&&F(Z)),G.__cacheKey=bt,G.__webglTexture=je[bt].texture}return ge}function Te(G,Z,ge){let Oe=3553;Z.isDataArrayTexture&&(Oe=35866),Z.isData3DTexture&&(Oe=32879);const je=ue(G,Z),bt=Z.source;if(t.activeTexture(33984+ge),t.bindTexture(Oe,G.__webglTexture),bt.version!==bt.__currentVersion||je===!0){n.pixelStorei(37440,Z.flipY),n.pixelStorei(37441,Z.premultiplyAlpha),n.pixelStorei(3317,Z.unpackAlignment),n.pixelStorei(37443,0);const At=A(Z)&&b(Z.image)===!1;let Ee=x(Z.image,At,!1,u);Ee=pe(Z,Ee);const gt=b(Ee)||o,lt=s.convert(Z.format,Z.encoding);let $=s.convert(Z.type),le=_(Z.internalFormat,lt,$,Z.encoding,Z.isVideoTexture);J(Oe,Z,gt);let fe;const Me=Z.mipmaps,me=o&&Z.isVideoTexture!==!0,Ae=bt.__currentVersion===void 0||je===!0,dt=M(Z,Ee,gt);if(Z.isDepthTexture)le=6402,o?Z.type===Nh?le=36012:Z.type===O0?le=33190:Z.type===n1?le=35056:le=33189:Z.type===Nh&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===J0&&le===6402&&Z.type!==Xre&&Z.type!==O0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=O0,$=s.convert(Z.type)),Z.format===k1&&le===6402&&(le=34041,Z.type!==n1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=n1,$=s.convert(Z.type))),Ae&&(me?t.texStorage2D(3553,1,le,Ee.width,Ee.height):t.texImage2D(3553,0,le,Ee.width,Ee.height,0,lt,$,null));else if(Z.isDataTexture)if(Me.length>0&&gt){me&&Ae&&t.texStorage2D(3553,dt,le,Me[0].width,Me[0].height);for(let we=0,_t=Me.length;we<_t;we++)fe=Me[we],me?t.texSubImage2D(3553,we,0,0,fe.width,fe.height,lt,$,fe.data):t.texImage2D(3553,we,le,fe.width,fe.height,0,lt,$,fe.data);Z.generateMipmaps=!1}else me?(Ae&&t.texStorage2D(3553,dt,le,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,Ee.width,Ee.height,lt,$,Ee.data)):t.texImage2D(3553,0,le,Ee.width,Ee.height,0,lt,$,Ee.data);else if(Z.isCompressedTexture){me&&Ae&&t.texStorage2D(3553,dt,le,Me[0].width,Me[0].height);for(let we=0,_t=Me.length;we<_t;we++)fe=Me[we],Z.format!==ic?lt!==null?me?t.compressedTexSubImage2D(3553,we,0,0,fe.width,fe.height,lt,fe.data):t.compressedTexImage2D(3553,we,le,fe.width,fe.height,0,fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):me?t.texSubImage2D(3553,we,0,0,fe.width,fe.height,lt,$,fe.data):t.texImage2D(3553,we,le,fe.width,fe.height,0,lt,$,fe.data)}else if(Z.isDataArrayTexture)me?(Ae&&t.texStorage3D(35866,dt,le,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(35866,0,0,0,0,Ee.width,Ee.height,Ee.depth,lt,$,Ee.data)):t.texImage3D(35866,0,le,Ee.width,Ee.height,Ee.depth,0,lt,$,Ee.data);else if(Z.isData3DTexture)me?(Ae&&t.texStorage3D(32879,dt,le,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(32879,0,0,0,0,Ee.width,Ee.height,Ee.depth,lt,$,Ee.data)):t.texImage3D(32879,0,le,Ee.width,Ee.height,Ee.depth,0,lt,$,Ee.data);else if(Z.isFramebufferTexture){if(Ae)if(me)t.texStorage2D(3553,dt,le,Ee.width,Ee.height);else{let we=Ee.width,_t=Ee.height;for(let it=0;it<dt;it++)t.texImage2D(3553,it,le,we,_t,0,lt,$,null),we>>=1,_t>>=1}}else if(Me.length>0&&gt){me&&Ae&&t.texStorage2D(3553,dt,le,Me[0].width,Me[0].height);for(let we=0,_t=Me.length;we<_t;we++)fe=Me[we],me?t.texSubImage2D(3553,we,0,0,lt,$,fe):t.texImage2D(3553,we,le,lt,$,fe);Z.generateMipmaps=!1}else me?(Ae&&t.texStorage2D(3553,dt,le,Ee.width,Ee.height),t.texSubImage2D(3553,0,0,0,lt,$,Ee)):t.texImage2D(3553,0,le,lt,$,Ee);S(Z,gt)&&C(Oe),bt.__currentVersion=bt.version,Z.onUpdate&&Z.onUpdate(Z)}G.__version=Z.version}function De(G,Z,ge){if(Z.image.length!==6)return;const Oe=ue(G,Z),je=Z.source;if(t.activeTexture(33984+ge),t.bindTexture(34067,G.__webglTexture),je.version!==je.__currentVersion||Oe===!0){n.pixelStorei(37440,Z.flipY),n.pixelStorei(37441,Z.premultiplyAlpha),n.pixelStorei(3317,Z.unpackAlignment),n.pixelStorei(37443,0);const bt=Z.isCompressedTexture||Z.image[0].isCompressedTexture,At=Z.image[0]&&Z.image[0].isDataTexture,Ee=[];for(let we=0;we<6;we++)!bt&&!At?Ee[we]=x(Z.image[we],!1,!0,c):Ee[we]=At?Z.image[we].image:Z.image[we],Ee[we]=pe(Z,Ee[we]);const gt=Ee[0],lt=b(gt)||o,$=s.convert(Z.format,Z.encoding),le=s.convert(Z.type),fe=_(Z.internalFormat,$,le,Z.encoding),Me=o&&Z.isVideoTexture!==!0,me=je.__currentVersion===void 0||Oe===!0;let Ae=M(Z,gt,lt);J(34067,Z,lt);let dt;if(bt){Me&&me&&t.texStorage2D(34067,Ae,fe,gt.width,gt.height);for(let we=0;we<6;we++){dt=Ee[we].mipmaps;for(let _t=0;_t<dt.length;_t++){const it=dt[_t];Z.format!==ic?$!==null?Me?t.compressedTexSubImage2D(34069+we,_t,0,0,it.width,it.height,$,it.data):t.compressedTexImage2D(34069+we,_t,fe,it.width,it.height,0,it.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Me?t.texSubImage2D(34069+we,_t,0,0,it.width,it.height,$,le,it.data):t.texImage2D(34069+we,_t,fe,it.width,it.height,0,$,le,it.data)}}}else{dt=Z.mipmaps,Me&&me&&(dt.length>0&&Ae++,t.texStorage2D(34067,Ae,fe,Ee[0].width,Ee[0].height));for(let we=0;we<6;we++)if(At){Me?t.texSubImage2D(34069+we,0,0,0,Ee[we].width,Ee[we].height,$,le,Ee[we].data):t.texImage2D(34069+we,0,fe,Ee[we].width,Ee[we].height,0,$,le,Ee[we].data);for(let _t=0;_t<dt.length;_t++){const wt=dt[_t].image[we].image;Me?t.texSubImage2D(34069+we,_t+1,0,0,wt.width,wt.height,$,le,wt.data):t.texImage2D(34069+we,_t+1,fe,wt.width,wt.height,0,$,le,wt.data)}}else{Me?t.texSubImage2D(34069+we,0,0,0,$,le,Ee[we]):t.texImage2D(34069+we,0,fe,$,le,Ee[we]);for(let _t=0;_t<dt.length;_t++){const it=dt[_t];Me?t.texSubImage2D(34069+we,_t+1,0,0,$,le,it.image[we]):t.texImage2D(34069+we,_t+1,fe,$,le,it.image[we])}}}S(Z,lt)&&C(34067),je.__currentVersion=je.version,Z.onUpdate&&Z.onUpdate(Z)}G.__version=Z.version}function Le(G,Z,ge,Oe,je){const bt=s.convert(ge.format,ge.encoding),At=s.convert(ge.type),Ee=_(ge.internalFormat,bt,At,ge.encoding);i.get(Z).__hasExternalTextures||(je===32879||je===35866?t.texImage3D(je,0,Ee,Z.width,Z.height,Z.depth,0,bt,At,null):t.texImage2D(je,0,Ee,Z.width,Z.height,0,bt,At,null)),t.bindFramebuffer(36160,G),qe(Z)?f.framebufferTexture2DMultisampleEXT(36160,Oe,je,i.get(ge).__webglTexture,0,He(Z)):n.framebufferTexture2D(36160,Oe,je,i.get(ge).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ne(G,Z,ge){if(n.bindRenderbuffer(36161,G),Z.depthBuffer&&!Z.stencilBuffer){let Oe=33189;if(ge||qe(Z)){const je=Z.depthTexture;je&&je.isDepthTexture&&(je.type===Nh?Oe=36012:je.type===O0&&(Oe=33190));const bt=He(Z);qe(Z)?f.renderbufferStorageMultisampleEXT(36161,bt,Oe,Z.width,Z.height):n.renderbufferStorageMultisample(36161,bt,Oe,Z.width,Z.height)}else n.renderbufferStorage(36161,Oe,Z.width,Z.height);n.framebufferRenderbuffer(36160,36096,36161,G)}else if(Z.depthBuffer&&Z.stencilBuffer){const Oe=He(Z);ge&&qe(Z)===!1?n.renderbufferStorageMultisample(36161,Oe,35056,Z.width,Z.height):qe(Z)?f.renderbufferStorageMultisampleEXT(36161,Oe,35056,Z.width,Z.height):n.renderbufferStorage(36161,34041,Z.width,Z.height),n.framebufferRenderbuffer(36160,33306,36161,G)}else{const Oe=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let je=0;je<Oe.length;je++){const bt=Oe[je],At=s.convert(bt.format,bt.encoding),Ee=s.convert(bt.type),gt=_(bt.internalFormat,At,Ee,bt.encoding),lt=He(Z);ge&&qe(Z)===!1?n.renderbufferStorageMultisample(36161,lt,gt,Z.width,Z.height):qe(Z)?f.renderbufferStorageMultisampleEXT(36161,lt,gt,Z.width,Z.height):n.renderbufferStorage(36161,gt,Z.width,Z.height)}}n.bindRenderbuffer(36161,null)}function Y(G,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,G),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),H(Z.depthTexture,0);const Oe=i.get(Z.depthTexture).__webglTexture,je=He(Z);if(Z.depthTexture.format===J0)qe(Z)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,Oe,0,je):n.framebufferTexture2D(36160,36096,3553,Oe,0);else if(Z.depthTexture.format===k1)qe(Z)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,Oe,0,je):n.framebufferTexture2D(36160,33306,3553,Oe,0);else throw new Error("Unknown depthTexture format")}function oe(G){const Z=i.get(G),ge=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!Z.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");Y(Z.__webglFramebuffer,G)}else if(ge){Z.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)t.bindFramebuffer(36160,Z.__webglFramebuffer[Oe]),Z.__webglDepthbuffer[Oe]=n.createRenderbuffer(),Ne(Z.__webglDepthbuffer[Oe],G,!1)}else t.bindFramebuffer(36160,Z.__webglFramebuffer),Z.__webglDepthbuffer=n.createRenderbuffer(),Ne(Z.__webglDepthbuffer,G,!1);t.bindFramebuffer(36160,null)}function ne(G,Z,ge){const Oe=i.get(G);Z!==void 0&&Le(Oe.__webglFramebuffer,G,G.texture,36064,3553),ge!==void 0&&oe(G)}function Xe(G){const Z=G.texture,ge=i.get(G),Oe=i.get(Z);G.addEventListener("dispose",I),G.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture===void 0&&(Oe.__webglTexture=n.createTexture()),Oe.__version=Z.version,a.memory.textures++);const je=G.isWebGLCubeRenderTarget===!0,bt=G.isWebGLMultipleRenderTargets===!0,At=b(G)||o;if(je){ge.__webglFramebuffer=[];for(let Ee=0;Ee<6;Ee++)ge.__webglFramebuffer[Ee]=n.createFramebuffer()}else{if(ge.__webglFramebuffer=n.createFramebuffer(),bt)if(r.drawBuffers){const Ee=G.texture;for(let gt=0,lt=Ee.length;gt<lt;gt++){const $=i.get(Ee[gt]);$.__webglTexture===void 0&&($.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&G.samples>0&&qe(G)===!1){const Ee=bt?Z:[Z];ge.__webglMultisampledFramebuffer=n.createFramebuffer(),ge.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer);for(let gt=0;gt<Ee.length;gt++){const lt=Ee[gt];ge.__webglColorRenderbuffer[gt]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ge.__webglColorRenderbuffer[gt]);const $=s.convert(lt.format,lt.encoding),le=s.convert(lt.type),fe=_(lt.internalFormat,$,le,lt.encoding),Me=He(G);n.renderbufferStorageMultisample(36161,Me,fe,G.width,G.height),n.framebufferRenderbuffer(36160,36064+gt,36161,ge.__webglColorRenderbuffer[gt])}n.bindRenderbuffer(36161,null),G.depthBuffer&&(ge.__webglDepthRenderbuffer=n.createRenderbuffer(),Ne(ge.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(36160,null)}}if(je){t.bindTexture(34067,Oe.__webglTexture),J(34067,Z,At);for(let Ee=0;Ee<6;Ee++)Le(ge.__webglFramebuffer[Ee],G,Z,36064,34069+Ee);S(Z,At)&&C(34067),t.unbindTexture()}else if(bt){const Ee=G.texture;for(let gt=0,lt=Ee.length;gt<lt;gt++){const $=Ee[gt],le=i.get($);t.bindTexture(3553,le.__webglTexture),J(3553,$,At),Le(ge.__webglFramebuffer,G,$,36064+gt,3553),S($,At)&&C(3553)}t.unbindTexture()}else{let Ee=3553;(G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(o?Ee=G.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ee,Oe.__webglTexture),J(Ee,Z,At),Le(ge.__webglFramebuffer,G,Z,36064,Ee),S(Z,At)&&C(Ee),t.unbindTexture()}G.depthBuffer&&oe(G)}function ke(G){const Z=b(G)||o,ge=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Oe=0,je=ge.length;Oe<je;Oe++){const bt=ge[Oe];if(S(bt,Z)){const At=G.isWebGLCubeRenderTarget?34067:3553,Ee=i.get(bt).__webglTexture;t.bindTexture(At,Ee),C(At),t.unbindTexture()}}}function Ge(G){if(o&&G.samples>0&&qe(G)===!1){const Z=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],ge=G.width,Oe=G.height;let je=16384;const bt=[],At=G.stencilBuffer?33306:36096,Ee=i.get(G),gt=G.isWebGLMultipleRenderTargets===!0;if(gt)for(let lt=0;lt<Z.length;lt++)t.bindFramebuffer(36160,Ee.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+lt,36161,null),t.bindFramebuffer(36160,Ee.__webglFramebuffer),n.framebufferTexture2D(36009,36064+lt,3553,null,0);t.bindFramebuffer(36008,Ee.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ee.__webglFramebuffer);for(let lt=0;lt<Z.length;lt++){bt.push(36064+lt),G.depthBuffer&&bt.push(At);const $=Ee.__ignoreDepthValues!==void 0?Ee.__ignoreDepthValues:!1;if($===!1&&(G.depthBuffer&&(je|=256),G.stencilBuffer&&(je|=1024)),gt&&n.framebufferRenderbuffer(36008,36064,36161,Ee.__webglColorRenderbuffer[lt]),$===!0&&(n.invalidateFramebuffer(36008,[At]),n.invalidateFramebuffer(36009,[At])),gt){const le=i.get(Z[lt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,le,0)}n.blitFramebuffer(0,0,ge,Oe,0,0,ge,Oe,je,9728),h&&n.invalidateFramebuffer(36008,bt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),gt)for(let lt=0;lt<Z.length;lt++){t.bindFramebuffer(36160,Ee.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+lt,36161,Ee.__webglColorRenderbuffer[lt]);const $=i.get(Z[lt]).__webglTexture;t.bindFramebuffer(36160,Ee.__webglFramebuffer),n.framebufferTexture2D(36009,36064+lt,3553,$,0)}t.bindFramebuffer(36009,Ee.__webglMultisampledFramebuffer)}}function He(G){return Math.min(d,G.samples)}function qe(G){const Z=i.get(G);return o&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function tt(G){const Z=a.render.frame;p.get(G)!==Z&&(p.set(G,Z),G.update())}function pe(G,Z){const ge=G.encoding,Oe=G.format,je=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===HR||ge!==hp&&(ge===Ni?o===!1?e.has("EXT_sRGB")===!0&&Oe===ic?(G.format=HR,G.minFilter=Bs,G.generateMipmaps=!1):Z=nse.sRGBToLinear(Z):(Oe!==ic||je!==bm)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ge)),Z}this.allocateTextureUnit=O,this.resetTextureUnits=z,this.setTexture2D=H,this.setTexture2DArray=q,this.setTexture3D=te,this.setTextureCube=Q,this.rebindTextures=ne,this.setupRenderTarget=Xe,this.updateRenderTargetMipmap=ke,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=Le,this.useMultisampledRTT=qe}function FQe(n,e,t){const i=t.isWebGL2;function r(s,a=null){let o;if(s===bm)return 5121;if(s===hKe)return 32819;if(s===pKe)return 32820;if(s===uKe)return 5120;if(s===dKe)return 5122;if(s===Xre)return 5123;if(s===fKe)return 5124;if(s===O0)return 5125;if(s===Nh)return 5126;if(s===Ux)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===mKe)return 6406;if(s===ic)return 6408;if(s===gKe)return 6409;if(s===yKe)return 6410;if(s===J0)return 6402;if(s===k1)return 34041;if(s===bKe)return 6403;if(s===vKe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===HR)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===xKe)return 36244;if(s===AKe)return 33319;if(s===wKe)return 33320;if(s===SKe)return 36249;if(s===P_||s===b6||s===L_||s===k_)if(a===Ni)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===P_)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===b6)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===L_)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===k_)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===P_)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===b6)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===L_)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===k_)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===_W||s===CW||s===MW||s===TW)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===_W)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===CW)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===MW)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===TW)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===jre)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===EW||s===IW)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===EW)return a===Ni?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===IW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===DW||s===RW||s===PW||s===LW||s===kW||s===FW||s===BW||s===NW||s===OW||s===UW||s===zW||s===VW||s===HW||s===GW)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===DW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===RW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===PW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===LW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===kW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===FW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===BW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===NW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===OW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===UW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===zW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===VW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===HW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===GW)return a===Ni?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===WW)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===WW)return a===Ni?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===n1?i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}let BQe=class extends Xs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Yo=class extends ps{constructor(){super(),this.isGroup=!0,this.type="Group"}};const NQe={type:"move"};let Y6=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $e,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $e),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $e,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $e),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,i);if(c.joints[m.jointName]===void 0){const y=new Yo;y.matrixAutoUpdate=!1,y.visible=!1,c.joints[m.jointName]=y,c.add(y)}const g=c.joints[m.jointName];v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(NQe)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}},OQe=class extends Pa{constructor(e,t,i,r,s,a,o,l,c,u){if(u=u!==void 0?u:J0,u!==J0&&u!==k1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===J0&&(i=O0),i===void 0&&u===k1&&(i=n1),super(null,r,s,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ua,this.minFilter=l!==void 0?l:ua,this.flipY=!1,this.generateMipmaps=!1}},UQe=class extends Mp{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=null,c=null,u=null,d=null,f=null,h=null;const p=t.getContextAttributes();let m=null,v=null;const g=[],y=[],x=new Xs;x.layers.enable(1),x.viewport=new gr;const b=new Xs;b.layers.enable(2),b.viewport=new gr;const A=[x,b],S=new BQe;S.layers.enable(1),S.layers.enable(2);let C=null,_=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(N){let H=g[N];return H===void 0&&(H=new Y6,g[N]=H),H.getTargetRaySpace()},this.getControllerGrip=function(N){let H=g[N];return H===void 0&&(H=new Y6,g[N]=H),H.getGripSpace()},this.getHand=function(N){let H=g[N];return H===void 0&&(H=new Y6,g[N]=H),H.getHandSpace()};function M(N){const H=y.indexOf(N.inputSource);if(H===-1)return;const q=g[H];q!==void 0&&q.dispatchEvent({type:N.type,data:N.inputSource})}function T(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",E);for(let N=0;N<g.length;N++){const H=y[N];H!==null&&(y[N]=null,g[N].disconnect(H))}C=null,_=null,e.setRenderTarget(m),f=null,d=null,u=null,r=null,v=null,O.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(N){s=N,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(N){o=N,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(N){l=N},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return u},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(N){if(r=N,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",T),r.addEventListener("inputsourceschange",E),p.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const H={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,H),r.updateRenderState({baseLayer:f}),v=new xm(f.framebufferWidth,f.framebufferHeight,{format:ic,type:bm,encoding:e.outputEncoding})}else{let H=null,q=null,te=null;p.depth&&(te=p.stencil?35056:33190,H=p.stencil?k1:J0,q=p.stencil?n1:O0);const Q={colorFormat:32856,depthFormat:te,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(Q),r.updateRenderState({layers:[d]}),v=new xm(d.textureWidth,d.textureHeight,{format:ic,type:bm,depthTexture:new OQe(d.textureWidth,d.textureHeight,q,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const ee=e.properties.get(v);ee.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),l=null,a=await r.requestReferenceSpace(o),O.setContext(r),O.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function E(N){for(let H=0;H<N.removed.length;H++){const q=N.removed[H],te=y.indexOf(q);te>=0&&(y[te]=null,g[te].dispatchEvent({type:"disconnected",data:q}))}for(let H=0;H<N.added.length;H++){const q=N.added[H];let te=y.indexOf(q);if(te===-1){for(let ee=0;ee<g.length;ee++)if(ee>=y.length){y.push(q),te=ee;break}else if(y[ee]===null){y[ee]=q,te=ee;break}if(te===-1)break}const Q=g[te];Q&&Q.dispatchEvent({type:"connected",data:q})}}const I=new $e,L=new $e;function F(N,H,q){I.setFromMatrixPosition(H.matrixWorld),L.setFromMatrixPosition(q.matrixWorld);const te=I.distanceTo(L),Q=H.projectionMatrix.elements,ee=q.projectionMatrix.elements,de=Q[14]/(Q[10]-1),J=Q[14]/(Q[10]+1),ue=(Q[9]+1)/Q[5],Te=(Q[9]-1)/Q[5],De=(Q[8]-1)/Q[0],Le=(ee[8]+1)/ee[0],Ne=de*De,Y=de*Le,oe=te/(-De+Le),ne=oe*-De;H.matrixWorld.decompose(N.position,N.quaternion,N.scale),N.translateX(ne),N.translateZ(oe),N.matrixWorld.compose(N.position,N.quaternion,N.scale),N.matrixWorldInverse.copy(N.matrixWorld).invert();const Xe=de+oe,ke=J+oe,Ge=Ne-ne,He=Y+(te-ne),qe=ue*J/ke*Xe,tt=Te*J/ke*Xe;N.projectionMatrix.makePerspective(Ge,He,qe,tt,Xe,ke)}function B(N,H){H===null?N.matrixWorld.copy(N.matrix):N.matrixWorld.multiplyMatrices(H.matrixWorld,N.matrix),N.matrixWorldInverse.copy(N.matrixWorld).invert()}this.updateCamera=function(N){if(r===null)return;S.near=b.near=x.near=N.near,S.far=b.far=x.far=N.far,(C!==S.near||_!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),C=S.near,_=S.far);const H=N.parent,q=S.cameras;B(S,H);for(let Q=0;Q<q.length;Q++)B(q[Q],H);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),N.position.copy(S.position),N.quaternion.copy(S.quaternion),N.scale.copy(S.scale),N.matrix.copy(S.matrix),N.matrixWorld.copy(S.matrixWorld);const te=N.children;for(let Q=0,ee=te.length;Q<ee;Q++)te[Q].updateMatrixWorld(!0);q.length===2?F(S,x,b):S.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(N){d!==null&&(d.fixedFoveation=N),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=N)};let P=null;function z(N,H){if(c=H.getViewerPose(l||a),h=H,c!==null){const q=c.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let te=!1;q.length!==S.cameras.length&&(S.cameras.length=0,te=!0);for(let Q=0;Q<q.length;Q++){const ee=q[Q];let de=null;if(f!==null)de=f.getViewport(ee);else{const ue=u.getViewSubImage(d,ee);de=ue.viewport,Q===0&&(e.setRenderTargetTextures(v,ue.colorTexture,d.ignoreDepthValues?void 0:ue.depthStencilTexture),e.setRenderTarget(v))}let J=A[Q];J===void 0&&(J=new Xs,J.layers.enable(Q),J.viewport=new gr,A[Q]=J),J.matrix.fromArray(ee.transform.matrix),J.projectionMatrix.fromArray(ee.projectionMatrix),J.viewport.set(de.x,de.y,de.width,de.height),Q===0&&S.matrix.copy(J.matrix),te===!0&&S.cameras.push(J)}}for(let q=0;q<g.length;q++){const te=y[q],Q=g[q];te!==null&&Q!==void 0&&Q.update(te,H,l||a)}P&&P(N,H),h=null}const O=new dse;O.setAnimationLoop(z),this.setAnimationLoop=function(N){P=N},this.dispose=function(){}}};function zQe(n,e){function t(m,v){m.fogColor.value.copy(v.color),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)}function i(m,v,g,y,x){v.isMeshBasicMaterial||v.isMeshLambertMaterial?r(m,v):v.isMeshToonMaterial?(r(m,v),u(m,v)):v.isMeshPhongMaterial?(r(m,v),c(m,v)):v.isMeshStandardMaterial?(r(m,v),d(m,v),v.isMeshPhysicalMaterial&&f(m,v,x)):v.isMeshMatcapMaterial?(r(m,v),h(m,v)):v.isMeshDepthMaterial?r(m,v):v.isMeshDistanceMaterial?(r(m,v),p(m,v)):v.isMeshNormalMaterial?r(m,v):v.isLineBasicMaterial?(s(m,v),v.isLineDashedMaterial&&a(m,v)):v.isPointsMaterial?o(m,v,g,y):v.isSpriteMaterial?l(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.bumpMap&&(m.bumpMap.value=v.bumpMap,m.bumpScale.value=v.bumpScale,v.side===Zc&&(m.bumpScale.value*=-1)),v.displacementMap&&(m.displacementMap.value=v.displacementMap,m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap),v.normalMap&&(m.normalMap.value=v.normalMap,m.normalScale.value.copy(v.normalScale),v.side===Zc&&m.normalScale.value.negate()),v.specularMap&&(m.specularMap.value=v.specularMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);const g=e.get(v).envMap;if(g&&(m.envMap.value=g,m.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap){m.lightMap.value=v.lightMap;const b=n.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=v.lightMapIntensity*b}v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity);let y;v.map?y=v.map:v.specularMap?y=v.specularMap:v.displacementMap?y=v.displacementMap:v.normalMap?y=v.normalMap:v.bumpMap?y=v.bumpMap:v.roughnessMap?y=v.roughnessMap:v.metalnessMap?y=v.metalnessMap:v.alphaMap?y=v.alphaMap:v.emissiveMap?y=v.emissiveMap:v.clearcoatMap?y=v.clearcoatMap:v.clearcoatNormalMap?y=v.clearcoatNormalMap:v.clearcoatRoughnessMap?y=v.clearcoatRoughnessMap:v.iridescenceMap?y=v.iridescenceMap:v.iridescenceThicknessMap?y=v.iridescenceThicknessMap:v.specularIntensityMap?y=v.specularIntensityMap:v.specularColorMap?y=v.specularColorMap:v.transmissionMap?y=v.transmissionMap:v.thicknessMap?y=v.thicknessMap:v.sheenColorMap?y=v.sheenColorMap:v.sheenRoughnessMap&&(y=v.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;v.aoMap?x=v.aoMap:v.lightMap&&(x=v.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity}function a(m,v){m.dashSize.value=v.dashSize,m.totalSize.value=v.dashSize+v.gapSize,m.scale.value=v.scale}function o(m,v,g,y){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.size.value=v.size*g,m.scale.value=y*.5,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let x;v.map?x=v.map:v.alphaMap&&(x=v.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.rotation.value=v.rotation,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let g;v.map?g=v.map:v.alphaMap&&(g=v.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),m.uvTransform.value.copy(g.matrix))}function c(m,v){m.specular.value.copy(v.specular),m.shininess.value=Math.max(v.shininess,1e-4)}function u(m,v){v.gradientMap&&(m.gradientMap.value=v.gradientMap)}function d(m,v){m.roughness.value=v.roughness,m.metalness.value=v.metalness,v.roughnessMap&&(m.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(m.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(m.envMapIntensity.value=v.envMapIntensity)}function f(m,v,g){m.ior.value=v.ior,v.sheen>0&&(m.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),m.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(m.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(m.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(m.clearcoat.value=v.clearcoat,m.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(m.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),m.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===Zc&&m.clearcoatNormalScale.value.negate())),v.iridescence>0&&(m.iridescence.value=v.iridescence,m.iridescenceIOR.value=v.iridescenceIOR,m.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(m.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(m.transmission.value=v.transmission,m.transmissionSamplerMap.value=g.texture,m.transmissionSamplerSize.value.set(g.width,g.height),v.transmissionMap&&(m.transmissionMap.value=v.transmissionMap),m.thickness.value=v.thickness,v.thicknessMap&&(m.thicknessMap.value=v.thicknessMap),m.attenuationDistance.value=v.attenuationDistance,m.attenuationColor.value.copy(v.attenuationColor)),m.specularIntensity.value=v.specularIntensity,m.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(m.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(m.specularColorMap.value=v.specularColorMap)}function h(m,v){v.matcap&&(m.matcap.value=v.matcap)}function p(m,v){m.referencePosition.value.copy(v.referencePosition),m.nearDistance.value=v.nearDistance,m.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function VQe(n,e,t,i){let r={},s={},a=[];const o=t.isWebGL2?n.getParameter(35375):0;function l(y,x){const b=x.program;i.uniformBlockBinding(y,b)}function c(y,x){let b=r[y.id];b===void 0&&(p(y),b=u(y),r[y.id]=b,y.addEventListener("dispose",v));const A=x.program;i.updateUBOMapping(y,A);const S=e.render.frame;s[y.id]!==S&&(f(y),s[y.id]=S)}function u(y){const x=d();y.__bindingPointIndex=x;const b=n.createBuffer(),A=y.__size,S=y.usage;return n.bindBuffer(35345,b),n.bufferData(35345,A,S),n.bindBuffer(35345,null),n.bindBufferBase(35345,x,b),b}function d(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const x=r[y.id],b=y.uniforms,A=y.__cache;n.bindBuffer(35345,x);for(let S=0,C=b.length;S<C;S++){const _=b[S];if(h(_,S,A)===!0){const M=_.value,T=_.__offset;typeof M=="number"?(_.__data[0]=M,n.bufferSubData(35345,T,_.__data)):(_.value.isMatrix3?(_.__data[0]=_.value.elements[0],_.__data[1]=_.value.elements[1],_.__data[2]=_.value.elements[2],_.__data[3]=_.value.elements[0],_.__data[4]=_.value.elements[3],_.__data[5]=_.value.elements[4],_.__data[6]=_.value.elements[5],_.__data[7]=_.value.elements[0],_.__data[8]=_.value.elements[6],_.__data[9]=_.value.elements[7],_.__data[10]=_.value.elements[8],_.__data[11]=_.value.elements[0]):M.toArray(_.__data),n.bufferSubData(35345,T,_.__data))}}n.bindBuffer(35345,null)}function h(y,x,b){const A=y.value;if(b[x]===void 0)return typeof A=="number"?b[x]=A:b[x]=A.clone(),!0;if(typeof A=="number"){if(b[x]!==A)return b[x]=A,!0}else{const S=b[x];if(S.equals(A)===!1)return S.copy(A),!0}return!1}function p(y){const x=y.uniforms;let b=0;const A=16;let S=0;for(let C=0,_=x.length;C<_;C++){const M=x[C],T=m(M);if(M.__data=new Float32Array(T.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=b,C>0){S=b%A;const E=A-S;S!==0&&E-T.boundary<0&&(b+=A-S,M.__offset=b)}b+=T.storage}return S=b%A,S>0&&(b+=A-S),y.__size=b,y.__cache={},this}function m(y){const x=y.value,b={boundary:0,storage:0};return typeof x=="number"?(b.boundary=4,b.storage=4):x.isVector2?(b.boundary=8,b.storage=8):x.isVector3||x.isColor?(b.boundary=16,b.storage=12):x.isVector4?(b.boundary=16,b.storage=16):x.isMatrix3?(b.boundary=48,b.storage=48):x.isMatrix4?(b.boundary=64,b.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),b}function v(y){const x=y.target;x.removeEventListener("dispose",v);const b=a.indexOf(x.__bindingPointIndex);a.splice(b,1),n.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function g(){for(const y in r)n.deleteBuffer(r[y]);a=[],r={},s={}}return{bind:l,update:c,dispose:g}}function HQe(){const n=Hx("canvas");return n.style.display="block",n}function xse(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:HQe(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let u;t!==null?u=t.getContextAttributes().alpha:u=n.alpha!==void 0?n.alpha:!1;let d=null,f=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=hp,this.physicallyCorrectLights=!1,this.toneMapping=af,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let v=!1,g=0,y=0,x=null,b=-1,A=null;const S=new gr,C=new gr;let _=null,M=e.width,T=e.height,E=1,I=null,L=null;const F=new gr(0,0,M,T),B=new gr(0,0,M,T);let P=!1;const z=new RF;let O=!1,N=!1,H=null;const q=new qn,te=new Gt,Q=new $e,ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function de(){return x===null?E:1}let J=t;function ue(ce,Ct){for(let vt=0;vt<ce.length;vt++){const We=ce[vt],xt=e.getContext(We,Ct);if(xt!==null)return xt}return null}try{const ce={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${SF}`),e.addEventListener("webglcontextlost",fe,!1),e.addEventListener("webglcontextrestored",Me,!1),e.addEventListener("webglcontextcreationerror",me,!1),J===null){const Ct=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Ct.shift(),J=ue(Ct,ce),J===null)throw ue(Ct)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}J.getShaderPrecisionFormat===void 0&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}let Te,De,Le,Ne,Y,oe,ne,Xe,ke,Ge,He,qe,tt,pe,G,Z,ge,Oe,je,bt,At,Ee,gt,lt;function $(){Te=new e$e(J),De=new Xje(J,Te,n),Te.init(De),Ee=new FQe(J,Te,De),Le=new LQe(J,Te,De),Ne=new i$e,Y=new AQe,oe=new kQe(J,Te,Le,Y,De,Ee,Ne),ne=new $je(m),Xe=new Jje(m),ke=new mYe(J,De),gt=new Kje(J,Te,ke,De),Ge=new t$e(J,ke,Ne,gt),He=new o$e(J,Ge,ke,Ne),je=new a$e(J,De,oe),Z=new jje(Y),qe=new xQe(m,ne,Xe,Te,De,gt,Z),tt=new zQe(m,Y),pe=new SQe,G=new IQe(Te,De),Oe=new qje(m,ne,Le,He,u,a),ge=new PQe(m,He,De),lt=new VQe(J,Ne,De,Le),bt=new Yje(J,Te,Ne,De),At=new n$e(J,Te,Ne,De),Ne.programs=qe.programs,m.capabilities=De,m.extensions=Te,m.properties=Y,m.renderLists=pe,m.shadowMap=ge,m.state=Le,m.info=Ne}$();const le=new UQe(m,J);this.xr=le,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const ce=Te.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=Te.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(ce){ce!==void 0&&(E=ce,this.setSize(M,T,!1))},this.getSize=function(ce){return ce.set(M,T)},this.setSize=function(ce,Ct,vt){if(le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=ce,T=Ct,e.width=Math.floor(ce*E),e.height=Math.floor(Ct*E),vt!==!1&&(e.style.width=ce+"px",e.style.height=Ct+"px"),this.setViewport(0,0,ce,Ct)},this.getDrawingBufferSize=function(ce){return ce.set(M*E,T*E).floor()},this.setDrawingBufferSize=function(ce,Ct,vt){M=ce,T=Ct,E=vt,e.width=Math.floor(ce*vt),e.height=Math.floor(Ct*vt),this.setViewport(0,0,ce,Ct)},this.getCurrentViewport=function(ce){return ce.copy(S)},this.getViewport=function(ce){return ce.copy(F)},this.setViewport=function(ce,Ct,vt,We){ce.isVector4?F.set(ce.x,ce.y,ce.z,ce.w):F.set(ce,Ct,vt,We),Le.viewport(S.copy(F).multiplyScalar(E).floor())},this.getScissor=function(ce){return ce.copy(B)},this.setScissor=function(ce,Ct,vt,We){ce.isVector4?B.set(ce.x,ce.y,ce.z,ce.w):B.set(ce,Ct,vt,We),Le.scissor(C.copy(B).multiplyScalar(E).floor())},this.getScissorTest=function(){return P},this.setScissorTest=function(ce){Le.setScissorTest(P=ce)},this.setOpaqueSort=function(ce){I=ce},this.setTransparentSort=function(ce){L=ce},this.getClearColor=function(ce){return ce.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(ce=!0,Ct=!0,vt=!0){let We=0;ce&&(We|=16384),Ct&&(We|=256),vt&&(We|=1024),J.clear(We)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",fe,!1),e.removeEventListener("webglcontextrestored",Me,!1),e.removeEventListener("webglcontextcreationerror",me,!1),pe.dispose(),G.dispose(),Y.dispose(),ne.dispose(),Xe.dispose(),He.dispose(),gt.dispose(),lt.dispose(),qe.dispose(),le.dispose(),le.removeEventListener("sessionstart",wt),le.removeEventListener("sessionend",Ft),H&&(H.dispose(),H=null),Rt.stop()};function fe(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const ce=Ne.autoReset,Ct=ge.enabled,vt=ge.autoUpdate,We=ge.needsUpdate,xt=ge.type;$(),Ne.autoReset=ce,ge.enabled=Ct,ge.autoUpdate=vt,ge.needsUpdate=We,ge.type=xt}function me(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function Ae(ce){const Ct=ce.target;Ct.removeEventListener("dispose",Ae),dt(Ct)}function dt(ce){we(ce),Y.remove(ce)}function we(ce){const Ct=Y.get(ce).programs;Ct!==void 0&&(Ct.forEach(function(vt){qe.releaseProgram(vt)}),ce.isShaderMaterial&&qe.releaseShaderCache(ce))}this.renderBufferDirect=function(ce,Ct,vt,We,xt,Pt){Ct===null&&(Ct=ee);const dn=xt.isMesh&&xt.matrixWorld.determinant()<0,En=se(ce,Ct,vt,We,xt);Le.setMaterial(We,dn);let ei=vt.index;const Je=vt.attributes.position;if(ei===null){if(Je===void 0||Je.count===0)return}else if(ei.count===0)return;let ti=1;We.wireframe===!0&&(ei=Ge.getWireframeAttribute(vt),ti=2),gt.setup(xt,We,En,vt,ei);let st,nr=bt;ei!==null&&(st=ke.get(ei),nr=At,nr.setIndex(st));const he=ei!==null?ei.count:Je.count,Ze=vt.drawRange.start*ti,ft=vt.drawRange.count*ti,yt=Pt!==null?Pt.start*ti:0,ct=Pt!==null?Pt.count*ti:1/0,Ht=Math.max(Ze,yt),$t=Math.min(he,Ze+ft,yt+ct)-1,cn=Math.max(0,$t-Ht+1);if(cn!==0){if(xt.isMesh)We.wireframe===!0?(Le.setLineWidth(We.wireframeLinewidth*de()),nr.setMode(1)):nr.setMode(4);else if(xt.isLine){let mn=We.linewidth;mn===void 0&&(mn=1),Le.setLineWidth(mn*de()),xt.isLineSegments?nr.setMode(1):xt.isLineLoop?nr.setMode(2):nr.setMode(3)}else xt.isPoints?nr.setMode(0):xt.isSprite&&nr.setMode(4);if(xt.isInstancedMesh)nr.renderInstances(Ht,cn,xt.count);else if(vt.isInstancedBufferGeometry){const mn=Math.min(vt.instanceCount,vt._maxInstanceCount);nr.renderInstances(Ht,cn,mn)}else nr.render(Ht,cn)}},this.compile=function(ce,Ct){f=G.get(ce),f.init(),p.push(f),ce.traverseVisible(function(vt){vt.isLight&&vt.layers.test(Ct.layers)&&(f.pushLight(vt),vt.castShadow&&f.pushShadow(vt))}),f.setupLights(m.physicallyCorrectLights),ce.traverse(function(vt){const We=vt.material;if(We)if(Array.isArray(We))for(let xt=0;xt<We.length;xt++){const Pt=We[xt];ai(Pt,ce,vt)}else ai(We,ce,vt)}),p.pop(),f=null};let _t=null;function it(ce){_t&&_t(ce)}function wt(){Rt.stop()}function Ft(){Rt.start()}const Rt=new dse;Rt.setAnimationLoop(it),typeof self<"u"&&Rt.setContext(self),this.setAnimationLoop=function(ce){_t=ce,le.setAnimationLoop(ce),ce===null?Rt.stop():Rt.start()},le.addEventListener("sessionstart",wt),le.addEventListener("sessionend",Ft),this.render=function(ce,Ct){if(Ct!==void 0&&Ct.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;ce.autoUpdate===!0&&ce.updateMatrixWorld(),Ct.parent===null&&Ct.updateMatrixWorld(),le.enabled===!0&&le.isPresenting===!0&&(le.cameraAutoUpdate===!0&&le.updateCamera(Ct),Ct=le.getCamera()),ce.isScene===!0&&ce.onBeforeRender(m,ce,Ct,x),f=G.get(ce,p.length),f.init(),p.push(f),q.multiplyMatrices(Ct.projectionMatrix,Ct.matrixWorldInverse),z.setFromProjectionMatrix(q),N=this.localClippingEnabled,O=Z.init(this.clippingPlanes,N,Ct),d=pe.get(ce,h.length),d.init(),h.push(d),Wt(ce,Ct,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(I,L),O===!0&&Z.beginShadows();const vt=f.state.shadowsArray;if(ge.render(vt,ce,Ct),O===!0&&Z.endShadows(),this.info.autoReset===!0&&this.info.reset(),Oe.render(d,ce),f.setupLights(m.physicallyCorrectLights),Ct.isArrayCamera){const We=Ct.cameras;for(let xt=0,Pt=We.length;xt<Pt;xt++){const dn=We[xt];hn(d,ce,dn,dn.viewport)}}else hn(d,ce,Ct);x!==null&&(oe.updateMultisampleRenderTarget(x),oe.updateRenderTargetMipmap(x)),ce.isScene===!0&&ce.onAfterRender(m,ce,Ct),gt.resetDefaultState(),b=-1,A=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,h.pop(),h.length>0?d=h[h.length-1]:d=null};function Wt(ce,Ct,vt,We){if(ce.visible===!1)return;if(ce.layers.test(Ct.layers)){if(ce.isGroup)vt=ce.renderOrder;else if(ce.isLOD)ce.autoUpdate===!0&&ce.update(Ct);else if(ce.isLight)f.pushLight(ce),ce.castShadow&&f.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||z.intersectsSprite(ce)){We&&Q.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(q);const dn=He.update(ce),En=ce.material;En.visible&&d.push(ce,dn,En,vt,Q.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(ce.isSkinnedMesh&&ce.skeleton.frame!==Ne.render.frame&&(ce.skeleton.update(),ce.skeleton.frame=Ne.render.frame),!ce.frustumCulled||z.intersectsObject(ce))){We&&Q.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(q);const dn=He.update(ce),En=ce.material;if(Array.isArray(En)){const ei=dn.groups;for(let Je=0,ti=ei.length;Je<ti;Je++){const st=ei[Je],nr=En[st.materialIndex];nr&&nr.visible&&d.push(ce,dn,nr,vt,Q.z,st)}}else En.visible&&d.push(ce,dn,En,vt,Q.z,null)}}const Pt=ce.children;for(let dn=0,En=Pt.length;dn<En;dn++)Wt(Pt[dn],Ct,vt,We)}function hn(ce,Ct,vt,We){const xt=ce.opaque,Pt=ce.transmissive,dn=ce.transparent;f.setupLightsView(vt),Pt.length>0&&pi(xt,Ct,vt),We&&Le.viewport(S.copy(We)),xt.length>0&&Pn(xt,Ct,vt),Pt.length>0&&Pn(Pt,Ct,vt),dn.length>0&&Pn(dn,Ct,vt),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function pi(ce,Ct,vt){const We=De.isWebGL2;H===null&&(H=new xm(1,1,{generateMipmaps:!0,type:Te.has("EXT_color_buffer_half_float")?Ux:bm,minFilter:Pf,samples:We&&s===!0?4:0})),m.getDrawingBufferSize(te),We?H.setSize(te.x,te.y):H.setSize(h4(te.x),h4(te.y));const xt=m.getRenderTarget();m.setRenderTarget(H),m.clear();const Pt=m.toneMapping;m.toneMapping=af,Pn(ce,Ct,vt),m.toneMapping=Pt,oe.updateMultisampleRenderTarget(H),oe.updateRenderTargetMipmap(H),m.setRenderTarget(xt)}function Pn(ce,Ct,vt){const We=Ct.isScene===!0?Ct.overrideMaterial:null;for(let xt=0,Pt=ce.length;xt<Pt;xt++){const dn=ce[xt],En=dn.object,ei=dn.geometry,Je=We===null?dn.material:We,ti=dn.group;En.layers.test(vt.layers)&&Qi(En,Ct,vt,ei,Je,ti)}}function Qi(ce,Ct,vt,We,xt,Pt){ce.onBeforeRender(m,Ct,vt,We,xt,Pt),ce.modelViewMatrix.multiplyMatrices(vt.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),xt.onBeforeRender(m,Ct,vt,We,ce,Pt),xt.transparent===!0&&xt.side===fp?(xt.side=Zc,xt.needsUpdate=!0,m.renderBufferDirect(vt,Ct,We,xt,ce,Pt),xt.side=dp,xt.needsUpdate=!0,m.renderBufferDirect(vt,Ct,We,xt,ce,Pt),xt.side=fp):m.renderBufferDirect(vt,Ct,We,xt,ce,Pt),ce.onAfterRender(m,Ct,vt,We,xt,Pt)}function ai(ce,Ct,vt){Ct.isScene!==!0&&(Ct=ee);const We=Y.get(ce),xt=f.state.lights,Pt=f.state.shadowsArray,dn=xt.state.version,En=qe.getParameters(ce,xt.state,Pt,Ct,vt),ei=qe.getProgramCacheKey(En);let Je=We.programs;We.environment=ce.isMeshStandardMaterial?Ct.environment:null,We.fog=Ct.fog,We.envMap=(ce.isMeshStandardMaterial?Xe:ne).get(ce.envMap||We.environment),Je===void 0&&(ce.addEventListener("dispose",Ae),Je=new Map,We.programs=Je);let ti=Je.get(ei);if(ti!==void 0){if(We.currentProgram===ti&&We.lightsStateVersion===dn)return X(ce,En),ti}else En.uniforms=qe.getUniforms(ce),ce.onBuild(vt,En,m),ce.onBeforeCompile(En,m),ti=qe.acquireProgram(En,ei),Je.set(ei,ti),We.uniforms=En.uniforms;const st=We.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||ce.clipping===!0)&&(st.clippingPlanes=Z.uniform),X(ce,En),We.needsLights=Ce(ce),We.lightsStateVersion=dn,We.needsLights&&(st.ambientLightColor.value=xt.state.ambient,st.lightProbe.value=xt.state.probe,st.directionalLights.value=xt.state.directional,st.directionalLightShadows.value=xt.state.directionalShadow,st.spotLights.value=xt.state.spot,st.spotLightShadows.value=xt.state.spotShadow,st.rectAreaLights.value=xt.state.rectArea,st.ltc_1.value=xt.state.rectAreaLTC1,st.ltc_2.value=xt.state.rectAreaLTC2,st.pointLights.value=xt.state.point,st.pointLightShadows.value=xt.state.pointShadow,st.hemisphereLights.value=xt.state.hemi,st.directionalShadowMap.value=xt.state.directionalShadowMap,st.directionalShadowMatrix.value=xt.state.directionalShadowMatrix,st.spotShadowMap.value=xt.state.spotShadowMap,st.spotShadowMatrix.value=xt.state.spotShadowMatrix,st.pointShadowMap.value=xt.state.pointShadowMap,st.pointShadowMatrix.value=xt.state.pointShadowMatrix);const nr=ti.getUniforms(),he=B_.seqWithValue(nr.seq,st);return We.currentProgram=ti,We.uniformsList=he,ti}function X(ce,Ct){const vt=Y.get(ce);vt.outputEncoding=Ct.outputEncoding,vt.instancing=Ct.instancing,vt.skinning=Ct.skinning,vt.morphTargets=Ct.morphTargets,vt.morphNormals=Ct.morphNormals,vt.morphColors=Ct.morphColors,vt.morphTargetsCount=Ct.morphTargetsCount,vt.numClippingPlanes=Ct.numClippingPlanes,vt.numIntersection=Ct.numClipIntersection,vt.vertexAlphas=Ct.vertexAlphas,vt.vertexTangents=Ct.vertexTangents,vt.toneMapping=Ct.toneMapping}function se(ce,Ct,vt,We,xt){Ct.isScene!==!0&&(Ct=ee),oe.resetTextureUnits();const Pt=Ct.fog,dn=We.isMeshStandardMaterial?Ct.environment:null,En=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:hp,ei=(We.isMeshStandardMaterial?Xe:ne).get(We.envMap||dn),Je=We.vertexColors===!0&&!!vt.attributes.color&&vt.attributes.color.itemSize===4,ti=!!We.normalMap&&!!vt.attributes.tangent,st=!!vt.morphAttributes.position,nr=!!vt.morphAttributes.normal,he=!!vt.morphAttributes.color,Ze=We.toneMapped?m.toneMapping:af,ft=vt.morphAttributes.position||vt.morphAttributes.normal||vt.morphAttributes.color,yt=ft!==void 0?ft.length:0,ct=Y.get(We),Ht=f.state.lights;if(O===!0&&(N===!0||ce!==A)){const Mi=ce===A&&We.id===b;Z.setState(We,ce,Mi)}let $t=!1;We.version===ct.__version?(ct.needsLights&&ct.lightsStateVersion!==Ht.state.version||ct.outputEncoding!==En||xt.isInstancedMesh&&ct.instancing===!1||!xt.isInstancedMesh&&ct.instancing===!0||xt.isSkinnedMesh&&ct.skinning===!1||!xt.isSkinnedMesh&&ct.skinning===!0||ct.envMap!==ei||We.fog===!0&&ct.fog!==Pt||ct.numClippingPlanes!==void 0&&(ct.numClippingPlanes!==Z.numPlanes||ct.numIntersection!==Z.numIntersection)||ct.vertexAlphas!==Je||ct.vertexTangents!==ti||ct.morphTargets!==st||ct.morphNormals!==nr||ct.morphColors!==he||ct.toneMapping!==Ze||De.isWebGL2===!0&&ct.morphTargetsCount!==yt)&&($t=!0):($t=!0,ct.__version=We.version);let cn=ct.currentProgram;$t===!0&&(cn=ai(We,Ct,xt));let mn=!1,nn=!1,Fn=!1;const on=cn.getUniforms(),ni=ct.uniforms;if(Le.useProgram(cn.program)&&(mn=!0,nn=!0,Fn=!0),We.id!==b&&(b=We.id,nn=!0),mn||A!==ce){if(on.setValue(J,"projectionMatrix",ce.projectionMatrix),De.logarithmicDepthBuffer&&on.setValue(J,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),A!==ce&&(A=ce,nn=!0,Fn=!0),We.isShaderMaterial||We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshStandardMaterial||We.envMap){const Mi=on.map.cameraPosition;Mi!==void 0&&Mi.setValue(J,Q.setFromMatrixPosition(ce.matrixWorld))}(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial)&&on.setValue(J,"isOrthographic",ce.isOrthographicCamera===!0),(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial||We.isShadowMaterial||xt.isSkinnedMesh)&&on.setValue(J,"viewMatrix",ce.matrixWorldInverse)}if(xt.isSkinnedMesh){on.setOptional(J,xt,"bindMatrix"),on.setOptional(J,xt,"bindMatrixInverse");const Mi=xt.skeleton;Mi&&(De.floatVertexTextures?(Mi.boneTexture===null&&Mi.computeBoneTexture(),on.setValue(J,"boneTexture",Mi.boneTexture,oe),on.setValue(J,"boneTextureSize",Mi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const xi=vt.morphAttributes;if((xi.position!==void 0||xi.normal!==void 0||xi.color!==void 0&&De.isWebGL2===!0)&&je.update(xt,vt,We,cn),(nn||ct.receiveShadow!==xt.receiveShadow)&&(ct.receiveShadow=xt.receiveShadow,on.setValue(J,"receiveShadow",xt.receiveShadow)),nn&&(on.setValue(J,"toneMappingExposure",m.toneMappingExposure),ct.needsLights&&zt(ni,Fn),Pt&&We.fog===!0&&tt.refreshFogUniforms(ni,Pt),tt.refreshMaterialUniforms(ni,We,E,T,H),B_.upload(J,ct.uniformsList,ni,oe)),We.isShaderMaterial&&We.uniformsNeedUpdate===!0&&(B_.upload(J,ct.uniformsList,ni,oe),We.uniformsNeedUpdate=!1),We.isSpriteMaterial&&on.setValue(J,"center",xt.center),on.setValue(J,"modelViewMatrix",xt.modelViewMatrix),on.setValue(J,"normalMatrix",xt.normalMatrix),on.setValue(J,"modelMatrix",xt.matrixWorld),We.isShaderMaterial||We.isRawShaderMaterial){const Mi=We.uniformsGroups;for(let ur=0,_i=Mi.length;ur<_i;ur++)if(De.isWebGL2){const Xn=Mi[ur];lt.update(Xn,cn),lt.bind(Xn,cn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return cn}function zt(ce,Ct){ce.ambientLightColor.needsUpdate=Ct,ce.lightProbe.needsUpdate=Ct,ce.directionalLights.needsUpdate=Ct,ce.directionalLightShadows.needsUpdate=Ct,ce.pointLights.needsUpdate=Ct,ce.pointLightShadows.needsUpdate=Ct,ce.spotLights.needsUpdate=Ct,ce.spotLightShadows.needsUpdate=Ct,ce.rectAreaLights.needsUpdate=Ct,ce.hemisphereLights.needsUpdate=Ct}function Ce(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&ce.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(ce,Ct,vt){Y.get(ce.texture).__webglTexture=Ct,Y.get(ce.depthTexture).__webglTexture=vt;const We=Y.get(ce);We.__hasExternalTextures=!0,We.__hasExternalTextures&&(We.__autoAllocateDepthBuffer=vt===void 0,We.__autoAllocateDepthBuffer||Te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),We.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ce,Ct){const vt=Y.get(ce);vt.__webglFramebuffer=Ct,vt.__useDefaultFramebuffer=Ct===void 0},this.setRenderTarget=function(ce,Ct=0,vt=0){x=ce,g=Ct,y=vt;let We=!0;if(ce){const ei=Y.get(ce);ei.__useDefaultFramebuffer!==void 0?(Le.bindFramebuffer(36160,null),We=!1):ei.__webglFramebuffer===void 0?oe.setupRenderTarget(ce):ei.__hasExternalTextures&&oe.rebindTextures(ce,Y.get(ce.texture).__webglTexture,Y.get(ce.depthTexture).__webglTexture)}let xt=null,Pt=!1,dn=!1;if(ce){const ei=ce.texture;(ei.isData3DTexture||ei.isDataArrayTexture)&&(dn=!0);const Je=Y.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(xt=Je[Ct],Pt=!0):De.isWebGL2&&ce.samples>0&&oe.useMultisampledRTT(ce)===!1?xt=Y.get(ce).__webglMultisampledFramebuffer:xt=Je,S.copy(ce.viewport),C.copy(ce.scissor),_=ce.scissorTest}else S.copy(F).multiplyScalar(E).floor(),C.copy(B).multiplyScalar(E).floor(),_=P;if(Le.bindFramebuffer(36160,xt)&&De.drawBuffers&&We&&Le.drawBuffers(ce,xt),Le.viewport(S),Le.scissor(C),Le.setScissorTest(_),Pt){const ei=Y.get(ce.texture);J.framebufferTexture2D(36160,36064,34069+Ct,ei.__webglTexture,vt)}else if(dn){const ei=Y.get(ce.texture),Je=Ct||0;J.framebufferTextureLayer(36160,36064,ei.__webglTexture,vt||0,Je)}b=-1},this.readRenderTargetPixels=function(ce,Ct,vt,We,xt,Pt,dn){if(!(ce&&ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let En=Y.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&dn!==void 0&&(En=En[dn]),En){Le.bindFramebuffer(36160,En);try{const ei=ce.texture,Je=ei.format,ti=ei.type;if(Je!==ic&&Ee.convert(Je)!==J.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const st=ti===Ux&&(Te.has("EXT_color_buffer_half_float")||De.isWebGL2&&Te.has("EXT_color_buffer_float"));if(ti!==bm&&Ee.convert(ti)!==J.getParameter(35738)&&!(ti===Nh&&(De.isWebGL2||Te.has("OES_texture_float")||Te.has("WEBGL_color_buffer_float")))&&!st){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ct>=0&&Ct<=ce.width-We&&vt>=0&&vt<=ce.height-xt&&J.readPixels(Ct,vt,We,xt,Ee.convert(Je),Ee.convert(ti),Pt)}finally{const ei=x!==null?Y.get(x).__webglFramebuffer:null;Le.bindFramebuffer(36160,ei)}}},this.copyFramebufferToTexture=function(ce,Ct,vt=0){const We=Math.pow(2,-vt),xt=Math.floor(Ct.image.width*We),Pt=Math.floor(Ct.image.height*We);oe.setTexture2D(Ct,0),J.copyTexSubImage2D(3553,vt,0,0,ce.x,ce.y,xt,Pt),Le.unbindTexture()},this.copyTextureToTexture=function(ce,Ct,vt,We=0){const xt=Ct.image.width,Pt=Ct.image.height,dn=Ee.convert(vt.format),En=Ee.convert(vt.type);oe.setTexture2D(vt,0),J.pixelStorei(37440,vt.flipY),J.pixelStorei(37441,vt.premultiplyAlpha),J.pixelStorei(3317,vt.unpackAlignment),Ct.isDataTexture?J.texSubImage2D(3553,We,ce.x,ce.y,xt,Pt,dn,En,Ct.image.data):Ct.isCompressedTexture?J.compressedTexSubImage2D(3553,We,ce.x,ce.y,Ct.mipmaps[0].width,Ct.mipmaps[0].height,dn,Ct.mipmaps[0].data):J.texSubImage2D(3553,We,ce.x,ce.y,dn,En,Ct.image),We===0&&vt.generateMipmaps&&J.generateMipmap(3553),Le.unbindTexture()},this.copyTextureToTexture3D=function(ce,Ct,vt,We,xt=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pt=ce.max.x-ce.min.x+1,dn=ce.max.y-ce.min.y+1,En=ce.max.z-ce.min.z+1,ei=Ee.convert(We.format),Je=Ee.convert(We.type);let ti;if(We.isData3DTexture)oe.setTexture3D(We,0),ti=32879;else if(We.isDataArrayTexture)oe.setTexture2DArray(We,0),ti=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}J.pixelStorei(37440,We.flipY),J.pixelStorei(37441,We.premultiplyAlpha),J.pixelStorei(3317,We.unpackAlignment);const st=J.getParameter(3314),nr=J.getParameter(32878),he=J.getParameter(3316),Ze=J.getParameter(3315),ft=J.getParameter(32877),yt=vt.isCompressedTexture?vt.mipmaps[0]:vt.image;J.pixelStorei(3314,yt.width),J.pixelStorei(32878,yt.height),J.pixelStorei(3316,ce.min.x),J.pixelStorei(3315,ce.min.y),J.pixelStorei(32877,ce.min.z),vt.isDataTexture||vt.isData3DTexture?J.texSubImage3D(ti,xt,Ct.x,Ct.y,Ct.z,Pt,dn,En,ei,Je,yt.data):vt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),J.compressedTexSubImage3D(ti,xt,Ct.x,Ct.y,Ct.z,Pt,dn,En,ei,yt.data)):J.texSubImage3D(ti,xt,Ct.x,Ct.y,Ct.z,Pt,dn,En,ei,Je,yt),J.pixelStorei(3314,st),J.pixelStorei(32878,nr),J.pixelStorei(3316,he),J.pixelStorei(3315,Ze),J.pixelStorei(32877,ft),xt===0&&We.generateMipmaps&&J.generateMipmap(ti),Le.unbindTexture()},this.initTexture=function(ce){ce.isCubeTexture?oe.setTextureCube(ce,0):ce.isData3DTexture?oe.setTexture3D(ce,0):ce.isDataArrayTexture?oe.setTexture2DArray(ce,0):oe.setTexture2D(ce,0),Le.unbindTexture()},this.resetState=function(){g=0,y=0,x=null,Le.reset(),gt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class GQe extends xse{}GQe.prototype.isWebGL1Renderer=!0;class LF{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new wn(e),this.density=t}clone(){return new LF(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class kF{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new wn(e),this.near=t,this.far=i}clone(){return new kF(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let FF=class extends ps{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};class BF{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=VR,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=cc()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const io=new $e;class Am{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)io.fromBufferAttribute(this,t),io.applyMatrix4(e),this.setXYZ(t,io.x,io.y,io.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)io.fromBufferAttribute(this,t),io.applyNormalMatrix(e),this.setXYZ(t,io.x,io.y,io.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)io.fromBufferAttribute(this,t),io.transformDirection(e),this.setXYZ(t,io.x,io.y,io.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new As(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Am(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class NF extends zs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new wn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Iv;const A2=new $e,Dv=new $e,Rv=new $e,Pv=new Gt,w2=new Gt,Ase=new qn,PS=new $e,S2=new $e,LS=new $e,Mq=new Gt,X6=new Gt,Tq=new Gt;class N_ extends ps{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Iv===void 0){Iv=new $i;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new BF(t,5);Iv.setIndex([0,1,2,0,2,3]),Iv.setAttribute("position",new Am(i,3,0,!1)),Iv.setAttribute("uv",new Am(i,2,3,!1))}this.geometry=Iv,this.material=e!==void 0?e:new NF,this.center=new Gt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Dv.setFromMatrixScale(this.matrixWorld),Ase.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Dv.multiplyScalar(-Rv.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;kS(PS.set(-.5,-.5,0),Rv,a,Dv,r,s),kS(S2.set(.5,-.5,0),Rv,a,Dv,r,s),kS(LS.set(.5,.5,0),Rv,a,Dv,r,s),Mq.set(0,0),X6.set(1,0),Tq.set(1,1);let o=e.ray.intersectTriangle(PS,S2,LS,!1,A2);if(o===null&&(kS(S2.set(-.5,.5,0),Rv,a,Dv,r,s),X6.set(0,1),o=e.ray.intersectTriangle(PS,LS,S2,!1,A2),o===null))return;const l=e.ray.origin.distanceTo(A2);l<e.near||l>e.far||t.push({distance:l,point:A2.clone(),uv:Rb.getUV(A2,PS,S2,LS,Mq,X6,Tq,new Gt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function kS(n,e,t,i,r,s){Pv.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(w2.x=s*Pv.x-r*Pv.y,w2.y=r*Pv.x+s*Pv.y):w2.copy(Pv),n.copy(e),n.x+=w2.x,n.y+=w2.y,n.applyMatrix4(Ase)}const FS=new $e,Eq=new $e;class WQe extends ps{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){FS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(FS);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){FS.setFromMatrixPosition(e.matrixWorld),Eq.setFromMatrixPosition(this.matrixWorld);const i=FS.distanceTo(Eq)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s&&i>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}const Iq=new $e,Dq=new gr,Rq=new gr,qQe=new $e,Pq=new qn;class pT extends Qs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qn,this.bindMatrixInverse=new qn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new gr,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;Dq.fromBufferAttribute(r.attributes.skinIndex,e),Rq.fromBufferAttribute(r.attributes.skinWeight,e),Iq.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=Rq.getComponent(s);if(a!==0){const o=Dq.getComponent(s);Pq.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(qQe.copy(Iq).applyMatrix4(Pq),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class N1 extends ps{constructor(){super(),this.isBone=!0,this.type="Bone"}}let Pb=class extends Pa{constructor(e=null,t=1,i=1,r,s,a,o,l,c=ua,u=ua,d,f){super(null,a,o,l,c,u,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const Lq=new qn,KQe=new qn;class Ay{constructor(e=[],t=[]){this.uuid=cc(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new qn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new qn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:KQe;Lq.multiplyMatrices(o,t[s]),Lq.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Ay(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Qre(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Pb(t,e,e,ic,Nh);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new N1),this.bones.push(a),this.boneInverses.push(new qn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}let Wx=class extends As{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const kq=new qn,Fq=new qn,BS=[],_2=new Qs;class YQe extends Qs{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wx(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(_2.geometry=this.geometry,_2.material=this.material,_2.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,kq),Fq.multiplyMatrices(i,kq),_2.matrixWorld=Fq,_2.raycast(e,BS);for(let a=0,o=BS.length;a<o;a++){const l=BS[a];l.instanceId=s,l.object=this,t.push(l)}BS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Wx(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Jc extends zs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Bq=new $e,Nq=new $e,Oq=new qn,j6=new fT,NS=new Bm;class wy extends ps{constructor(e=new $i,t=new Jc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Bq.fromBufferAttribute(t,r-1),Nq.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Bq.distanceTo(Nq);e.setAttribute("lineDistance",new Dn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),NS.copy(i.boundingSphere),NS.applyMatrix4(r),NS.radius+=s,e.ray.intersectsSphere(NS)===!1)return;Oq.copy(r).invert(),j6.copy(e.ray).applyMatrix4(Oq);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new $e,u=new $e,d=new $e,f=new $e,h=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const g=Math.max(0,a.start),y=Math.min(p.count,a.start+a.count);for(let x=g,b=y-1;x<b;x+=h){const A=p.getX(x),S=p.getX(x+1);if(c.fromBufferAttribute(v,A),u.fromBufferAttribute(v,S),j6.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const _=e.ray.origin.distanceTo(f);_<e.near||_>e.far||t.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,a.start),y=Math.min(v.count,a.start+a.count);for(let x=g,b=y-1;x<b;x+=h){if(c.fromBufferAttribute(v,x),u.fromBufferAttribute(v,x+1),j6.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(f);S<e.near||S>e.far||t.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const Uq=new $e,zq=new $e;class wm extends wy{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Uq.fromBufferAttribute(t,r),zq.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Uq.distanceTo(zq);e.setAttribute("lineDistance",new Dn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wse extends wy{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class z0 extends zs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Vq=new qn,jR=new fT,OS=new Bm,US=new $e;class Lb extends ps{constructor(e=new $i,t=new z0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),OS.copy(i.boundingSphere),OS.applyMatrix4(r),OS.radius+=s,e.ray.intersectsSphere(OS)===!1)return;Vq.copy(r).invert(),jR.copy(e.ray).applyMatrix4(Vq);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,d=i.attributes.position;if(c!==null){const f=Math.max(0,a.start),h=Math.min(c.count,a.start+a.count);for(let p=f,m=h;p<m;p++){const v=c.getX(p);US.fromBufferAttribute(d,v),Hq(US,v,l,r,e,t,this)}}else{const f=Math.max(0,a.start),h=Math.min(d.count,a.start+a.count);for(let p=f,m=h;p<m;p++)US.fromBufferAttribute(d,p),Hq(US,p,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function Hq(n,e,t,i,r,s,a){const o=jR.distanceSqToPoint(n);if(o<t){const l=new $e;jR.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class XQe extends Pa{constructor(e,t,i,r,s,a,o,l,c,u,d,f){super(null,a,o,l,c,u,r,s,d,f),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class pu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=i[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const u=i[r],f=i[r+1]-u,h=(a-u)/f;return(r+h)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new Gt:new $e);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new $e,r=[],s=[],a=[],o=new $e,l=new qn;for(let h=0;h<=e;h++){const p=h/e;r[h]=this.getTangentAt(p,new $e)}s[0]=new $e,a[0]=new $e;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),f<=c&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),a[h]=a[h-1].clone(),o.crossVectors(r[h-1],r[h]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(Ys(r[h-1].dot(r[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(o,p))}a[h].crossVectors(r[h],s[h])}if(t===!0){let h=Math.acos(Ys(s[0].dot(s[e]),-1,1));h/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],h*p)),a[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class OF extends pu{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const i=t||new Gt,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,h=c-this.aY;l=f*u-h*d+this.aX,c=f*d+h*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class jQe extends OF{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function UF(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,d){let f=(a-s)/c-(o-s)/(c+u)+(o-a)/u,h=(o-a)/u-(l-a)/(u+d)+(l-o)/d;f*=u,h*=u,r(a,o,f,h)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const zS=new $e,$6=new UF,Q6=new UF,Z6=new UF;class $Qe extends pu{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new $e){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(zS.subVectors(r[0],r[1]).add(r[0]),c=zS);const d=r[o%s],f=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(zS.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=zS),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(u),h);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),$6.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,p,m,v),Q6.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,p,m,v),Z6.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,p,m,v)}else this.curveType==="catmullrom"&&($6.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),Q6.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),Z6.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return i.set($6.calc(l),Q6.calc(l),Z6.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new $e().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Gq(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function QQe(n,e){const t=1-n;return t*t*e}function ZQe(n,e){return 2*(1-n)*n*e}function JQe(n,e){return n*n*e}function kb(n,e,t,i){return QQe(n,e)+ZQe(n,t)+JQe(n,i)}function eZe(n,e){const t=1-n;return t*t*t*e}function tZe(n,e){const t=1-n;return 3*t*t*n*e}function nZe(n,e){return 3*(1-n)*n*n*e}function iZe(n,e){return n*n*n*e}function Fb(n,e,t,i,r){return eZe(n,e)+tZe(n,t)+nZe(n,i)+iZe(n,r)}class Sse extends pu{constructor(e=new Gt,t=new Gt,i=new Gt,r=new Gt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Gt){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Fb(e,r.x,s.x,a.x,o.x),Fb(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rZe extends pu{constructor(e=new $e,t=new $e,i=new $e,r=new $e){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new $e){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Fb(e,r.x,s.x,a.x,o.x),Fb(e,r.y,s.y,a.y,o.y),Fb(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zF extends pu{constructor(e=new Gt,t=new Gt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Gt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Gt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sZe extends pu{constructor(e=new $e,t=new $e){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $e){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _se extends pu{constructor(e=new Gt,t=new Gt,i=new Gt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Gt){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(kb(e,r.x,s.x,a.x),kb(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cse extends pu{constructor(e=new $e,t=new $e,i=new $e){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new $e){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(kb(e,r.x,s.x,a.x),kb(e,r.y,s.y,a.y),kb(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Mse extends pu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Gt){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return i.set(Gq(o,l.x,c.x,u.x,d.x),Gq(o,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Gt().fromArray(r))}return this}}var VF=Object.freeze({__proto__:null,ArcCurve:jQe,CatmullRomCurve3:$Qe,CubicBezierCurve:Sse,CubicBezierCurve3:rZe,EllipseCurve:OF,LineCurve:zF,LineCurve3:sZe,QuadraticBezierCurve:_se,QuadraticBezierCurve3:Cse,SplineCurve:Mse});class aZe extends pu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new zF(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new VF[r.type]().fromJSON(r))}return this}}class $R extends aZe{constructor(e){super(),this.type="Path",this.currentPoint=new Gt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new zF(this.currentPoint.clone(),new Gt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new _se(this.currentPoint.clone(),new Gt(e,t),new Gt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new Sse(this.currentPoint.clone(),new Gt(e,t),new Gt(i,r),new Gt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Mse(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const c=new OF(e,t,i,r,s,a,o,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class qx extends $i{constructor(e=[new Gt(0,-.5),new Gt(.5,0),new Gt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Ys(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,d=new $e,f=new Gt,h=new $e,p=new $e,m=new $e;let v=0,g=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:v=e[y+1].x-e[y].x,g=e[y+1].y-e[y].y,h.x=g*1,h.y=-v,h.z=g*0,m.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:v=e[y+1].x-e[y].x,g=e[y+1].y-e[y].y,h.x=g*1,h.y=-v,h.z=g*0,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),l.push(h.x,h.y,h.z),m.copy(p)}for(let y=0;y<=t;y++){const x=i+y*u*r,b=Math.sin(x),A=Math.cos(x);for(let S=0;S<=e.length-1;S++){d.x=e[S].x*b,d.y=e[S].y,d.z=e[S].x*A,a.push(d.x,d.y,d.z),f.x=y/t,f.y=S/(e.length-1),o.push(f.x,f.y);const C=l[3*S+0]*b,_=l[3*S+1],M=l[3*S+0]*A;c.push(C,_,M)}}for(let y=0;y<t;y++)for(let x=0;x<e.length-1;x++){const b=x+y*e.length,A=b,S=b+e.length,C=b+e.length+1,_=b+1;s.push(A,S,_),s.push(C,_,S)}this.setIndex(s),this.setAttribute("position",new Dn(a,3)),this.setAttribute("uv",new Dn(o,2)),this.setAttribute("normal",new Dn(c,3))}static fromJSON(e){return new qx(e.points,e.segments,e.phiStart,e.phiLength)}}class p4 extends qx{constructor(e=1,t=1,i=4,r=8){const s=new $R;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new p4(e.radius,e.length,e.capSegments,e.radialSegments)}}class m4 extends $i{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new $e,u=new Gt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const h=i+d/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[f]/e+1)/2,u.y=(a[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Dn(a,3)),this.setAttribute("normal",new Dn(o,3)),this.setAttribute("uv",new Dn(l,2))}static fromJSON(e){return new m4(e.radius,e.segments,e.thetaStart,e.thetaLength)}}let QR=class Tse extends $i{constructor(e=1,t=1,i=1,r=8,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],f=[],h=[];let p=0;const m=[],v=i/2;let g=0;y(),a===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new Dn(d,3)),this.setAttribute("normal",new Dn(f,3)),this.setAttribute("uv",new Dn(h,2));function y(){const b=new $e,A=new $e;let S=0;const C=(t-e)/i;for(let _=0;_<=s;_++){const M=[],T=_/s,E=T*(t-e)+e;for(let I=0;I<=r;I++){const L=I/r,F=L*l+o,B=Math.sin(F),P=Math.cos(F);A.x=E*B,A.y=-T*i+v,A.z=E*P,d.push(A.x,A.y,A.z),b.set(B,C,P).normalize(),f.push(b.x,b.y,b.z),h.push(L,1-T),M.push(p++)}m.push(M)}for(let _=0;_<r;_++)for(let M=0;M<s;M++){const T=m[M][_],E=m[M+1][_],I=m[M+1][_+1],L=m[M][_+1];u.push(T,E,L),u.push(E,I,L),S+=6}c.addGroup(g,S,0),g+=S}function x(b){const A=p,S=new Gt,C=new $e;let _=0;const M=b===!0?e:t,T=b===!0?1:-1;for(let I=1;I<=r;I++)d.push(0,v*T,0),f.push(0,T,0),h.push(.5,.5),p++;const E=p;for(let I=0;I<=r;I++){const F=I/r*l+o,B=Math.cos(F),P=Math.sin(F);C.x=M*P,C.y=v*T,C.z=M*B,d.push(C.x,C.y,C.z),f.push(0,T,0),S.x=B*.5+.5,S.y=P*.5*T+.5,h.push(S.x,S.y),p++}for(let I=0;I<r;I++){const L=A+I,F=E+I;b===!0?u.push(F,F+1,L):u.push(F+1,F,L),_+=3}c.addGroup(g,_,b===!0?1:2),g+=_}}static fromJSON(e){return new Tse(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Wq=class Ese extends QR{constructor(e=1,t=1,i=8,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Ese(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};class pp extends $i{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),c(i),u(),this.setAttribute("position",new Dn(s,3)),this.setAttribute("normal",new Dn(s.slice(),3)),this.setAttribute("uv",new Dn(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(y){const x=new $e,b=new $e,A=new $e;for(let S=0;S<t.length;S+=3)h(t[S+0],x),h(t[S+1],b),h(t[S+2],A),l(x,b,A,y)}function l(y,x,b,A){const S=A+1,C=[];for(let _=0;_<=S;_++){C[_]=[];const M=y.clone().lerp(b,_/S),T=x.clone().lerp(b,_/S),E=S-_;for(let I=0;I<=E;I++)I===0&&_===S?C[_][I]=M:C[_][I]=M.clone().lerp(T,I/E)}for(let _=0;_<S;_++)for(let M=0;M<2*(S-_)-1;M++){const T=Math.floor(M/2);M%2===0?(f(C[_][T+1]),f(C[_+1][T]),f(C[_][T])):(f(C[_][T+1]),f(C[_+1][T+1]),f(C[_+1][T]))}}function c(y){const x=new $e;for(let b=0;b<s.length;b+=3)x.x=s[b+0],x.y=s[b+1],x.z=s[b+2],x.normalize().multiplyScalar(y),s[b+0]=x.x,s[b+1]=x.y,s[b+2]=x.z}function u(){const y=new $e;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const b=v(y)/2/Math.PI+.5,A=g(y)/Math.PI+.5;a.push(b,1-A)}p(),d()}function d(){for(let y=0;y<a.length;y+=6){const x=a[y+0],b=a[y+2],A=a[y+4],S=Math.max(x,b,A),C=Math.min(x,b,A);S>.9&&C<.1&&(x<.2&&(a[y+0]+=1),b<.2&&(a[y+2]+=1),A<.2&&(a[y+4]+=1))}}function f(y){s.push(y.x,y.y,y.z)}function h(y,x){const b=y*3;x.x=e[b+0],x.y=e[b+1],x.z=e[b+2]}function p(){const y=new $e,x=new $e,b=new $e,A=new $e,S=new Gt,C=new Gt,_=new Gt;for(let M=0,T=0;M<s.length;M+=9,T+=6){y.set(s[M+0],s[M+1],s[M+2]),x.set(s[M+3],s[M+4],s[M+5]),b.set(s[M+6],s[M+7],s[M+8]),S.set(a[T+0],a[T+1]),C.set(a[T+2],a[T+3]),_.set(a[T+4],a[T+5]),A.copy(y).add(x).add(b).divideScalar(3);const E=v(A);m(S,T+0,y,E),m(C,T+2,x,E),m(_,T+4,b,E)}}function m(y,x,b,A){A<0&&y.x===1&&(a[x]=y.x-1),b.x===0&&b.z===0&&(a[x]=A/2/Math.PI+.5)}function v(y){return Math.atan2(y.z,-y.x)}function g(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new pp(e.vertices,e.indices,e.radius,e.details)}}class v4 extends pp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new v4(e.radius,e.detail)}}const VS=new $e,HS=new $e,J6=new $e,GS=new Rb;class oZe extends $i{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(i1*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<l;p+=3){a?(c[0]=a.getX(p),c[1]=a.getX(p+1),c[2]=a.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:v,c:g}=GS;if(m.fromBufferAttribute(o,c[0]),v.fromBufferAttribute(o,c[1]),g.fromBufferAttribute(o,c[2]),GS.getNormal(J6),d[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,d[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let y=0;y<3;y++){const x=(y+1)%3,b=d[y],A=d[x],S=GS[u[y]],C=GS[u[x]],_=`${b}_${A}`,M=`${A}_${b}`;M in f&&f[M]?(J6.dot(f[M].normal)<=s&&(h.push(S.x,S.y,S.z),h.push(C.x,C.y,C.z)),f[M]=null):_ in f||(f[_]={index0:c[y],index1:c[x],normal:J6.clone()})}}for(const p in f)if(f[p]){const{index0:m,index1:v}=f[p];VS.fromBufferAttribute(o,m),HS.fromBufferAttribute(o,v),h.push(VS.x,VS.y,VS.z),h.push(HS.x,HS.y,HS.z)}this.setAttribute("position",new Dn(h,3))}}}class HF extends $R{constructor(e){super(e),this.uuid=cc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new $R().fromJSON(r))}return this}}const lZe={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Ise(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,d,f,h;if(i&&(s=hZe(n,e,s,t)),n.length>80*t){o=c=n[0],l=u=n[1];for(let p=t;p<r;p+=t)d=n[p],f=n[p+1],d<o&&(o=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);h=Math.max(c-o,u-l),h=h!==0?1/h:0}return Kx(s,a,t,o,l,h),a}};function Ise(n,e,t,i,r){let s,a;if(r===_Ze(n,e,t,i)>0)for(s=e;s<t;s+=i)a=qq(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=qq(s,n[s],n[s+1],a);return a&&mT(a,a.next)&&(Xx(a),a=a.next),a}function mp(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(mT(t,t.next)||vs(t.prev,t,t.next)===0)){if(Xx(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Kx(n,e,t,i,r,s,a){if(!n)return;!a&&s&&yZe(n,i,r,s);let o=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?uZe(n,i,r,s):cZe(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),Xx(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=dZe(mp(n),e,t),Kx(n,e,t,i,r,s,2)):a===2&&fZe(n,e,t,i,r,s):Kx(mp(n),e,t,i,r,s,1);break}}}function cZe(n){const e=n.prev,t=n,i=n.next;if(vs(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Pg(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&vs(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function uZe(n,e,t,i){const r=n.prev,s=n,a=n.next;if(vs(r,s,a)>=0)return!1;const o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,c=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,d=ZR(o,l,e,t,i),f=ZR(c,u,e,t,i);let h=n.prevZ,p=n.nextZ;for(;h&&h.z>=d&&p&&p.z<=f;){if(h!==n.prev&&h!==n.next&&Pg(r.x,r.y,s.x,s.y,a.x,a.y,h.x,h.y)&&vs(h.prev,h,h.next)>=0||(h=h.prevZ,p!==n.prev&&p!==n.next&&Pg(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&vs(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;h&&h.z>=d;){if(h!==n.prev&&h!==n.next&&Pg(r.x,r.y,s.x,s.y,a.x,a.y,h.x,h.y)&&vs(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=f;){if(p!==n.prev&&p!==n.next&&Pg(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&vs(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function dZe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!mT(r,s)&&Dse(r,i,i.next,s)&&Yx(r,s)&&Yx(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Xx(i),Xx(i.next),i=n=s),i=i.next}while(i!==n);return mp(i)}function fZe(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&AZe(a,o)){let l=Rse(a,o);a=mp(a,a.next),l=mp(l,l.next),Kx(a,e,t,i,r,s),Kx(l,e,t,i,r,s);return}o=o.next}a=a.next}while(a!==n)}function hZe(n,e,t,i){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,c=Ise(n,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(xZe(c));for(r.sort(pZe),s=0;s<r.length;s++)mZe(r[s],t),t=mp(t,t.next);return t}function pZe(n,e){return n.x-e.x}function mZe(n,e){if(e=vZe(n,e),e){const t=Rse(e,n);mp(e,e.next),mp(t,t.next)}}function vZe(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s){if(s=f,f===i){if(r===t.y)return t;if(r===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(i===s)return a;const o=a,l=a.x,c=a.y;let u=1/0,d;t=a;do i>=t.x&&t.x>=l&&i!==t.x&&Pg(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),Yx(t,n)&&(d<u||d===u&&(t.x>a.x||t.x===a.x&&gZe(a,t)))&&(a=t,u=d)),t=t.next;while(t!==o);return a}function gZe(n,e){return vs(n.prev,n,e.prev)<0&&vs(e.next,n,n.next)<0}function yZe(n,e,t,i){let r=n;do r.z===null&&(r.z=ZR(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,bZe(r)}function bZe(n){let e,t,i,r,s,a,o,l,c=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<c&&(o++,i=i.nextZ,!!i);e++);for(l=c;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(a>1);return n}function ZR(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function xZe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Pg(n,e,t,i,r,s,a,o){return(r-a)*(e-o)-(n-a)*(s-o)>=0&&(n-a)*(i-o)-(t-a)*(e-o)>=0&&(t-a)*(s-o)-(r-a)*(i-o)>=0}function AZe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!wZe(n,e)&&(Yx(n,e)&&Yx(e,n)&&SZe(n,e)&&(vs(n.prev,n,e.prev)||vs(n,e.prev,e))||mT(n,e)&&vs(n.prev,n,n.next)>0&&vs(e.prev,e,e.next)>0)}function vs(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function mT(n,e){return n.x===e.x&&n.y===e.y}function Dse(n,e,t,i){const r=qS(vs(n,e,t)),s=qS(vs(n,e,i)),a=qS(vs(t,i,n)),o=qS(vs(t,i,e));return!!(r!==s&&a!==o||r===0&&WS(n,t,e)||s===0&&WS(n,i,e)||a===0&&WS(t,n,i)||o===0&&WS(t,e,i))}function WS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function qS(n){return n>0?1:n<0?-1:0}function wZe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Dse(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Yx(n,e){return vs(n.prev,n,n.next)<0?vs(n,e,n.next)>=0&&vs(n,n.prev,e)>=0:vs(n,e,n.prev)<0||vs(n,n.next,e)<0}function SZe(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Rse(n,e){const t=new JR(n.i,n.x,n.y),i=new JR(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function qq(n,e,t,i){const r=new JR(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Xx(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function JR(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _Ze(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Yh{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Yh.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];Kq(e),Yq(i,e);let a=e.length;t.forEach(Kq);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,Yq(i,t[l]);const o=lZe.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function Kq(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Yq(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class g4 extends $i{constructor(e=new HF([new Gt(.5,.5),new Gt(-.5,.5),new Gt(-.5,-.5),new Gt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new Dn(r,3)),this.setAttribute("uv",new Dn(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:h-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:CZe;let x,b=!1,A,S,C,_;g&&(x=g.getSpacedPoints(u),b=!0,f=!1,A=g.computeFrenetFrames(u,!1),S=new $e,C=new $e,_=new $e),f||(v=0,h=0,p=0,m=0);const M=o.extractPoints(c);let T=M.shape;const E=M.holes;if(!Yh.isClockWise(T)){T=T.reverse();for(let Y=0,oe=E.length;Y<oe;Y++){const ne=E[Y];Yh.isClockWise(ne)&&(E[Y]=ne.reverse())}}const L=Yh.triangulateShape(T,E),F=T;for(let Y=0,oe=E.length;Y<oe;Y++){const ne=E[Y];T=T.concat(ne)}function B(Y,oe,ne){return oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().multiplyScalar(ne).add(Y)}const P=T.length,z=L.length;function O(Y,oe,ne){let Xe,ke,Ge;const He=Y.x-oe.x,qe=Y.y-oe.y,tt=ne.x-Y.x,pe=ne.y-Y.y,G=He*He+qe*qe,Z=He*pe-qe*tt;if(Math.abs(Z)>Number.EPSILON){const ge=Math.sqrt(G),Oe=Math.sqrt(tt*tt+pe*pe),je=oe.x-qe/ge,bt=oe.y+He/ge,At=ne.x-pe/Oe,Ee=ne.y+tt/Oe,gt=((At-je)*pe-(Ee-bt)*tt)/(He*pe-qe*tt);Xe=je+He*gt-Y.x,ke=bt+qe*gt-Y.y;const lt=Xe*Xe+ke*ke;if(lt<=2)return new Gt(Xe,ke);Ge=Math.sqrt(lt/2)}else{let ge=!1;He>Number.EPSILON?tt>Number.EPSILON&&(ge=!0):He<-Number.EPSILON?tt<-Number.EPSILON&&(ge=!0):Math.sign(qe)===Math.sign(pe)&&(ge=!0),ge?(Xe=-qe,ke=He,Ge=Math.sqrt(G)):(Xe=He,ke=qe,Ge=Math.sqrt(G/2))}return new Gt(Xe/Ge,ke/Ge)}const N=[];for(let Y=0,oe=F.length,ne=oe-1,Xe=Y+1;Y<oe;Y++,ne++,Xe++)ne===oe&&(ne=0),Xe===oe&&(Xe=0),N[Y]=O(F[Y],F[ne],F[Xe]);const H=[];let q,te=N.concat();for(let Y=0,oe=E.length;Y<oe;Y++){const ne=E[Y];q=[];for(let Xe=0,ke=ne.length,Ge=ke-1,He=Xe+1;Xe<ke;Xe++,Ge++,He++)Ge===ke&&(Ge=0),He===ke&&(He=0),q[Xe]=O(ne[Xe],ne[Ge],ne[He]);H.push(q),te=te.concat(q)}for(let Y=0;Y<v;Y++){const oe=Y/v,ne=h*Math.cos(oe*Math.PI/2),Xe=p*Math.sin(oe*Math.PI/2)+m;for(let ke=0,Ge=F.length;ke<Ge;ke++){const He=B(F[ke],N[ke],Xe);ue(He.x,He.y,-ne)}for(let ke=0,Ge=E.length;ke<Ge;ke++){const He=E[ke];q=H[ke];for(let qe=0,tt=He.length;qe<tt;qe++){const pe=B(He[qe],q[qe],Xe);ue(pe.x,pe.y,-ne)}}}const Q=p+m;for(let Y=0;Y<P;Y++){const oe=f?B(T[Y],te[Y],Q):T[Y];b?(C.copy(A.normals[0]).multiplyScalar(oe.x),S.copy(A.binormals[0]).multiplyScalar(oe.y),_.copy(x[0]).add(C).add(S),ue(_.x,_.y,_.z)):ue(oe.x,oe.y,0)}for(let Y=1;Y<=u;Y++)for(let oe=0;oe<P;oe++){const ne=f?B(T[oe],te[oe],Q):T[oe];b?(C.copy(A.normals[Y]).multiplyScalar(ne.x),S.copy(A.binormals[Y]).multiplyScalar(ne.y),_.copy(x[Y]).add(C).add(S),ue(_.x,_.y,_.z)):ue(ne.x,ne.y,d/u*Y)}for(let Y=v-1;Y>=0;Y--){const oe=Y/v,ne=h*Math.cos(oe*Math.PI/2),Xe=p*Math.sin(oe*Math.PI/2)+m;for(let ke=0,Ge=F.length;ke<Ge;ke++){const He=B(F[ke],N[ke],Xe);ue(He.x,He.y,d+ne)}for(let ke=0,Ge=E.length;ke<Ge;ke++){const He=E[ke];q=H[ke];for(let qe=0,tt=He.length;qe<tt;qe++){const pe=B(He[qe],q[qe],Xe);b?ue(pe.x,pe.y+x[u-1].y,x[u-1].x+ne):ue(pe.x,pe.y,d+ne)}}}ee(),de();function ee(){const Y=r.length/3;if(f){let oe=0,ne=P*oe;for(let Xe=0;Xe<z;Xe++){const ke=L[Xe];Te(ke[2]+ne,ke[1]+ne,ke[0]+ne)}oe=u+v*2,ne=P*oe;for(let Xe=0;Xe<z;Xe++){const ke=L[Xe];Te(ke[0]+ne,ke[1]+ne,ke[2]+ne)}}else{for(let oe=0;oe<z;oe++){const ne=L[oe];Te(ne[2],ne[1],ne[0])}for(let oe=0;oe<z;oe++){const ne=L[oe];Te(ne[0]+P*u,ne[1]+P*u,ne[2]+P*u)}}i.addGroup(Y,r.length/3-Y,0)}function de(){const Y=r.length/3;let oe=0;J(F,oe),oe+=F.length;for(let ne=0,Xe=E.length;ne<Xe;ne++){const ke=E[ne];J(ke,oe),oe+=ke.length}i.addGroup(Y,r.length/3-Y,1)}function J(Y,oe){let ne=Y.length;for(;--ne>=0;){const Xe=ne;let ke=ne-1;ke<0&&(ke=Y.length-1);for(let Ge=0,He=u+v*2;Ge<He;Ge++){const qe=P*Ge,tt=P*(Ge+1),pe=oe+Xe+qe,G=oe+ke+qe,Z=oe+ke+tt,ge=oe+Xe+tt;De(pe,G,Z,ge)}}}function ue(Y,oe,ne){l.push(Y),l.push(oe),l.push(ne)}function Te(Y,oe,ne){Le(Y),Le(oe),Le(ne);const Xe=r.length/3,ke=y.generateTopUV(i,r,Xe-3,Xe-2,Xe-1);Ne(ke[0]),Ne(ke[1]),Ne(ke[2])}function De(Y,oe,ne,Xe){Le(Y),Le(oe),Le(Xe),Le(oe),Le(ne),Le(Xe);const ke=r.length/3,Ge=y.generateSideWallUV(i,r,ke-6,ke-3,ke-2,ke-1);Ne(Ge[0]),Ne(Ge[1]),Ne(Ge[3]),Ne(Ge[1]),Ne(Ge[2]),Ne(Ge[3])}function Le(Y){r.push(l[Y*3+0]),r.push(l[Y*3+1]),r.push(l[Y*3+2])}function Ne(Y){s.push(Y.x),s.push(Y.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return MZe(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new VF[r.type]().fromJSON(r)),new g4(i,e.options)}}const CZe={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Gt(s,a),new Gt(o,l),new Gt(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],f=e[r*3],h=e[r*3+1],p=e[r*3+2],m=e[s*3],v=e[s*3+1],g=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new Gt(a,1-l),new Gt(c,1-d),new Gt(f,1-p),new Gt(m,1-g)]:[new Gt(o,1-l),new Gt(u,1-d),new Gt(h,1-p),new Gt(v,1-g)]}};function MZe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class y4 extends pp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new y4(e.radius,e.detail)}}class b4 extends pp{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new b4(e.radius,e.detail)}}class x4 extends $i{constructor(e=.5,t=1,i=8,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let d=e;const f=(t-e)/r,h=new $e,p=new Gt;for(let m=0;m<=r;m++){for(let v=0;v<=i;v++){const g=s+v/i*a;h.x=d*Math.cos(g),h.y=d*Math.sin(g),l.push(h.x,h.y,h.z),c.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,u.push(p.x,p.y)}d+=f}for(let m=0;m<r;m++){const v=m*(i+1);for(let g=0;g<i;g++){const y=g+v,x=y,b=y+i+1,A=y+i+2,S=y+1;o.push(x,b,S),o.push(b,A,S)}}this.setIndex(o),this.setAttribute("position",new Dn(l,3)),this.setAttribute("normal",new Dn(c,3)),this.setAttribute("uv",new Dn(u,2))}static fromJSON(e){return new x4(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class A4 extends $i{constructor(e=new HF([new Gt(0,.5),new Gt(-.5,-.5),new Gt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Dn(r,3)),this.setAttribute("normal",new Dn(s,3)),this.setAttribute("uv",new Dn(a,2));function c(u){const d=r.length/3,f=u.extractPoints(t);let h=f.shape;const p=f.holes;Yh.isClockWise(h)===!1&&(h=h.reverse());for(let v=0,g=p.length;v<g;v++){const y=p[v];Yh.isClockWise(y)===!0&&(p[v]=y.reverse())}const m=Yh.triangulateShape(h,p);for(let v=0,g=p.length;v<g;v++){const y=p[v];h=h.concat(y)}for(let v=0,g=h.length;v<g;v++){const y=h[v];r.push(y.x,y.y,0),s.push(0,0,1),a.push(y.x,y.y)}for(let v=0,g=m.length;v<g;v++){const y=m[v],x=y[0]+d,b=y[1]+d,A=y[2]+d;i.push(x,b,A),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return TZe(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new A4(i,e.curveSegments)}}function TZe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}let Xq=class Pse extends $i{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new $e,f=new $e,h=[],p=[],m=[],v=[];for(let g=0;g<=i;g++){const y=[],x=g/i;let b=0;g==0&&a==0?b=.5/t:g==i&&l==Math.PI&&(b=-.5/t);for(let A=0;A<=t;A++){const S=A/t;d.x=-e*Math.cos(r+S*s)*Math.sin(a+x*o),d.y=e*Math.cos(a+x*o),d.z=e*Math.sin(r+S*s)*Math.sin(a+x*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),v.push(S+b,1-x),y.push(c++)}u.push(y)}for(let g=0;g<i;g++)for(let y=0;y<t;y++){const x=u[g][y+1],b=u[g][y],A=u[g+1][y],S=u[g+1][y+1];(g!==0||a>0)&&h.push(x,b,S),(g!==i-1||l<Math.PI)&&h.push(b,A,S)}this.setIndex(h),this.setAttribute("position",new Dn(p,3)),this.setAttribute("normal",new Dn(m,3)),this.setAttribute("uv",new Dn(v,2))}static fromJSON(e){return new Pse(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class w4 extends pp{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new w4(e.radius,e.detail)}}class S4 extends $i{constructor(e=1,t=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new $e,d=new $e,f=new $e;for(let h=0;h<=i;h++)for(let p=0;p<=r;p++){const m=p/r*s,v=h/i*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(m),d.y=(e+t*Math.cos(v))*Math.sin(m),d.z=t*Math.sin(v),o.push(d.x,d.y,d.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(p/r),c.push(h/i)}for(let h=1;h<=i;h++)for(let p=1;p<=r;p++){const m=(r+1)*h+p-1,v=(r+1)*(h-1)+p-1,g=(r+1)*(h-1)+p,y=(r+1)*h+p;a.push(m,v,y),a.push(v,g,y)}this.setIndex(a),this.setAttribute("position",new Dn(o,3)),this.setAttribute("normal",new Dn(l,3)),this.setAttribute("uv",new Dn(c,2))}static fromJSON(e){return new S4(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class _4 extends $i{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],u=[],d=new $e,f=new $e,h=new $e,p=new $e,m=new $e,v=new $e,g=new $e;for(let x=0;x<=i;++x){const b=x/i*s*Math.PI*2;y(b,s,a,e,h),y(b+.01,s,a,e,p),v.subVectors(p,h),g.addVectors(p,h),m.crossVectors(v,g),g.crossVectors(m,v),m.normalize(),g.normalize();for(let A=0;A<=r;++A){const S=A/r*Math.PI*2,C=-t*Math.cos(S),_=t*Math.sin(S);d.x=h.x+(C*g.x+_*m.x),d.y=h.y+(C*g.y+_*m.y),d.z=h.z+(C*g.z+_*m.z),l.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),c.push(f.x,f.y,f.z),u.push(x/i),u.push(A/r)}}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){const A=(r+1)*(x-1)+(b-1),S=(r+1)*x+(b-1),C=(r+1)*x+b,_=(r+1)*(x-1)+b;o.push(A,S,_),o.push(S,C,_)}this.setIndex(o),this.setAttribute("position",new Dn(l,3)),this.setAttribute("normal",new Dn(c,3)),this.setAttribute("uv",new Dn(u,2));function y(x,b,A,S,C){const _=Math.cos(x),M=Math.sin(x),T=A/b*x,E=Math.cos(T);C.x=S*(2+E)*.5*_,C.y=S*(2+E)*M*.5,C.z=S*Math.sin(T)*.5}}static fromJSON(e){return new _4(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class C4 extends $i{constructor(e=new Cse(new $e(-1,-1,0),new $e(-1,1,0),new $e(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new $e,l=new $e,c=new Gt;let u=new $e;const d=[],f=[],h=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new Dn(d,3)),this.setAttribute("normal",new Dn(f,3)),this.setAttribute("uv",new Dn(h,2));function m(){for(let x=0;x<t;x++)v(x);v(s===!1?t:0),y(),g()}function v(x){u=e.getPointAt(x/t,u);const b=a.normals[x],A=a.binormals[x];for(let S=0;S<=r;S++){const C=S/r*Math.PI*2,_=Math.sin(C),M=-Math.cos(C);l.x=M*b.x+_*A.x,l.y=M*b.y+_*A.y,l.z=M*b.z+_*A.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=u.x+i*l.x,o.y=u.y+i*l.y,o.z=u.z+i*l.z,d.push(o.x,o.y,o.z)}}function g(){for(let x=1;x<=t;x++)for(let b=1;b<=r;b++){const A=(r+1)*(x-1)+(b-1),S=(r+1)*x+(b-1),C=(r+1)*x+b,_=(r+1)*(x-1)+b;p.push(A,S,_),p.push(S,C,_)}}function y(){for(let x=0;x<=t;x++)for(let b=0;b<=r;b++)c.x=x/t,c.y=b/r,h.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new C4(new VF[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class EZe extends $i{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new $e,s=new $e;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,h=d.count;for(let p=f,m=f+h;p<m;p+=3)for(let v=0;v<3;v++){const g=o.getX(p+v),y=o.getX(p+(v+1)%3);r.fromBufferAttribute(a,g),s.fromBufferAttribute(a,y),jq(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,d=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,d),jq(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Dn(t,3))}}}function jq(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var $q=Object.freeze({__proto__:null,BoxGeometry:Gx,BoxBufferGeometry:Gx,CapsuleGeometry:p4,CapsuleBufferGeometry:p4,CircleGeometry:m4,CircleBufferGeometry:m4,ConeGeometry:Wq,ConeBufferGeometry:Wq,CylinderGeometry:QR,CylinderBufferGeometry:QR,DodecahedronGeometry:v4,DodecahedronBufferGeometry:v4,EdgesGeometry:oZe,ExtrudeGeometry:g4,ExtrudeBufferGeometry:g4,IcosahedronGeometry:y4,IcosahedronBufferGeometry:y4,LatheGeometry:qx,LatheBufferGeometry:qx,OctahedronGeometry:b4,OctahedronBufferGeometry:b4,PlaneGeometry:YR,PlaneBufferGeometry:YR,PolyhedronGeometry:pp,PolyhedronBufferGeometry:pp,RingGeometry:x4,RingBufferGeometry:x4,ShapeGeometry:A4,ShapeBufferGeometry:A4,SphereGeometry:Xq,SphereBufferGeometry:Xq,TetrahedronGeometry:w4,TetrahedronBufferGeometry:w4,TorusGeometry:S4,TorusBufferGeometry:S4,TorusKnotGeometry:_4,TorusKnotBufferGeometry:_4,TubeGeometry:C4,TubeBufferGeometry:C4,WireframeGeometry:EZe});class IZe extends zs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new wn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class DZe extends yf{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Sy extends zs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=km,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tp extends Sy{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Gt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ys(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new wn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new wn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new wn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class of extends zs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new wn(16777215),this.specular=new wn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=km,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class RZe extends zs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=km,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class PZe extends zs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=km,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class GF extends zs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class LZe extends zs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=km,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kZe extends Jc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function nh(n,e,t){return Lse(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function KS(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Lse(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function FZe(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Qq(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function kse(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}class FA{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class BZe extends FA{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Tg,endingEnd:Tg}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Eg:s=e,o=2*t-i;break;case f4:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Eg:a=e,l=2*i-t;break;case f4:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(i-t)/(r-t),m=p*p,v=m*p,g=-f*v+2*f*m-f*p,y=(1+f)*v+(-1.5-2*f)*m+(-.5+f)*p+1,x=(-1-h)*v+(1.5+h)*m+.5*p,b=h*v-h*m;for(let A=0;A!==o;++A)s[A]=g*a[u+A]+y*a[c+A]+x*a[l+A]+b*a[d+A];return s}}class Fse extends FA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-t)/(r-t),d=1-u;for(let f=0;f!==o;++f)s[f]=a[c+f]*d+a[l+f]*u;return s}}class NZe extends FA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class dd{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=KS(t,this.TimeBufferType),this.values=KS(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:KS(e.times,Array),values:KS(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new NZe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Fse(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BZe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case zx:t=this.InterpolantFactoryMethodDiscrete;break;case F1:t=this.InterpolantFactoryMethodLinear;break;case x6:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return zx;case this.InterpolantFactoryMethodLinear:return F1;case this.InterpolantFactoryMethodSmooth:return x6}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=nh(i,s,a),this.values=nh(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&Lse(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=nh(this.times),t=nh(this.values),i=this.getValueSize(),r=this.getInterpolation()===x6,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const d=o*i,f=d-i,h=d+i;for(let p=0;p!==i;++p){const m=t[d+p];if(m!==t[f+p]||m!==t[h+p]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*i,f=a*i;for(let h=0;h!==i;++h)t[f+h]=t[d+h]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,c=0;c!==i;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=nh(e,0,a),this.values=nh(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=nh(this.times,0),t=nh(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}dd.prototype.TimeBufferType=Float32Array;dd.prototype.ValueBufferType=Float32Array;dd.prototype.DefaultInterpolation=F1;class _y extends dd{}_y.prototype.ValueTypeName="bool";_y.prototype.ValueBufferType=Array;_y.prototype.DefaultInterpolation=zx;_y.prototype.InterpolantFactoryMethodLinear=void 0;_y.prototype.InterpolantFactoryMethodSmooth=void 0;class Bse extends dd{}Bse.prototype.ValueTypeName="color";class O1 extends dd{}O1.prototype.ValueTypeName="number";class OZe extends FA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let c=e*o;for(let u=c+o;c!==u;c+=4)Ta.slerpFlat(s,0,a,c-o,a,c,l);return s}}class bf extends dd{InterpolantFactoryMethodLinear(e){return new OZe(this.times,this.values,this.getValueSize(),e)}}bf.prototype.ValueTypeName="quaternion";bf.prototype.DefaultInterpolation=F1;bf.prototype.InterpolantFactoryMethodSmooth=void 0;class Cy extends dd{}Cy.prototype.ValueTypeName="string";Cy.prototype.ValueBufferType=Array;Cy.prototype.DefaultInterpolation=zx;Cy.prototype.InterpolantFactoryMethodLinear=void 0;Cy.prototype.InterpolantFactoryMethodSmooth=void 0;class vp extends dd{}vp.prototype.ValueTypeName="vector";class Sm{constructor(e,t=-1,i,r=MF){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=cc(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(zZe(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(dd.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=FZe(l);l=Qq(l,1,u),c=Qq(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new O1(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=r[d];f||(r[d]=f=[]),f.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,h,p,m){if(h.length!==0){const v=[],g=[];kse(h,v,g,p),v.length!==0&&m.push(new d(f,v,g))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let m=0;m<f[p].morphTargets.length;m++)h[f[p].morphTargets[m]]=-1;for(const m in h){const v=[],g=[];for(let y=0;y!==f[p].morphTargets.length;++y){const x=f[p];v.push(x.time),g.push(x.morphTarget===m?1:0)}r.push(new O1(".morphTargetInfluence["+m+"]",v,g))}l=h.length*a}else{const h=".bones["+t[d].name+"]";i(vp,h+".position",f,"pos",r),i(bf,h+".quaternion",f,"rot",r),i(vp,h+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function UZe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return O1;case"vector":case"vector2":case"vector3":case"vector4":return vp;case"color":return Bse;case"quaternion":return bf;case"bool":case"boolean":return _y;case"string":return Cy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function zZe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=UZe(n.type);if(n.times===void 0){const t=[],i=[];kse(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const U1={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Nse{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const Ose=new Nse;class Fa{constructor(e){this.manager=e!==void 0?e:Ose,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Md={};class VZe extends Error{constructor(e,t){super(e),this.response=t}}class to extends Fa{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=U1.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Md[e]!==void 0){Md[e].push({onLoad:t,onProgress:i,onError:r});return}Md[e]=[],Md[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Md[e],d=c.body.getReader(),f=c.headers.get("Content-Length"),h=f?parseInt(f):0,p=h!==0;let m=0;const v=new ReadableStream({start(g){y();function y(){d.read().then(({done:x,value:b})=>{if(x)g.close();else{m+=b.byteLength;const A=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:h});for(let S=0,C=u.length;S<C;S++){const _=u[S];_.onProgress&&_.onProgress(A)}g.enqueue(b),y()}})}}});return new Response(v)}else throw new VZe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{U1.add(e,c);const u=Md[e];delete Md[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onLoad&&h.onLoad(c)}}).catch(c=>{const u=Md[e];if(u===void 0)throw this.manager.itemError(e),c;delete Md[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class HZe extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new XQe,l=new to(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const h=s.parse(f,!0);a[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},c+=1,c===6&&(h.mipmapCount===1&&(o.minFilter=Bs),o.image=a,o.format=h.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){a[p]={mipmaps:[]};for(let m=0;m<f.mipmapCount;m++)a[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+m]),a[p].format=f.format,a[p].width=f.width,a[p].height=f.height}o.image=a}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=Bs),o.format=f.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class eP extends Fa{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=U1.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=Hx("img");function l(){u(),U1.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class GZe extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Pb,o=new to(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:$s,a.wrapT=c.wrapT!==void 0?c.wrapT:$s,a.magFilter=c.magFilter!==void 0?c.magFilter:Bs,a.minFilter=c.minFilter!==void 0?c.minFilter:Bs,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=Pf),c.mipmapCount===1&&(a.minFilter=Bs),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c))},i,r),a}}class z1 extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=new Pa,a=new eP(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Nm extends ps{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new wn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Use extends Nm{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ps.DefaultUp),this.updateMatrix(),this.groundColor=new wn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Zq=new qn,Jq=new $e,eK=new $e;class WF{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Gt(512,512),this.map=null,this.mapPass=null,this.matrix=new qn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new RF,this._frameExtents=new Gt(1,1),this._viewportCount=1,this._viewports=[new gr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Jq.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jq),eK.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eK),t.updateMatrixWorld(),Zq.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zq),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class WZe extends WF{constructor(){super(new Xs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Vx*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class vT extends Nm{constructor(e,t,i=0,r=Math.PI/3,s=0,a=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ps.DefaultUp),this.updateMatrix(),this.target=new ps,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.shadow=new WZe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tK=new qn,C2=new $e,eI=new $e;class qZe extends WF{constructor(){super(new Xs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Gt(4,2),this._viewportCount=6,this._viewports=[new gr(2,1,1,1),new gr(0,1,1,1),new gr(3,1,1,1),new gr(1,1,1,1),new gr(3,0,1,1),new gr(1,0,1,1)],this._cubeDirections=[new $e(1,0,0),new $e(-1,0,0),new $e(0,0,1),new $e(0,0,-1),new $e(0,1,0),new $e(0,-1,0)],this._cubeUps=[new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,0,1),new $e(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),C2.setFromMatrixPosition(e.matrixWorld),i.position.copy(C2),eI.copy(i.position),eI.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(eI),i.updateMatrixWorld(),r.makeTranslation(-C2.x,-C2.y,-C2.z),tK.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tK)}}class _m extends Nm{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new qZe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class KZe extends WF{constructor(){super(new by(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class BA extends Nm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ps.DefaultUp),this.updateMatrix(),this.target=new ps,this.shadow=new KZe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class gT extends Nm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class YZe extends Nm{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class XZe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $e)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class jZe extends Nm{constructor(e=new XZe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class qF extends Fa{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new to(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=qF.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new wn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new wn().setHex(a.value);break;case"v2":r.uniforms[s].value=new Gt().fromArray(a.value);break;case"v3":r.uniforms[s].value=new $e().fromArray(a.value);break;case"v4":r.uniforms[s].value=new gr().fromArray(a.value);break;case"m3":r.uniforms[s].value=new rc().fromArray(a.value);break;case"m4":r.uniforms[s].value=new qn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Gt().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Gt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:IZe,SpriteMaterial:NF,RawShaderMaterial:DZe,ShaderMaterial:yf,PointsMaterial:z0,MeshPhysicalMaterial:Tp,MeshStandardMaterial:Sy,MeshPhongMaterial:of,MeshToonMaterial:RZe,MeshNormalMaterial:PZe,MeshLambertMaterial:GF,MeshDepthMaterial:yse,MeshDistanceMaterial:bse,MeshBasicMaterial:Kc,MeshMatcapMaterial:LZe,LineDashedMaterial:kZe,LineBasicMaterial:Jc,Material:zs};return new t[e]}}class Ja{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}let $Ze=class extends $i{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};class QZe extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new to(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(h,p){if(t[p]!==void 0)return t[p];const v=h.interleavedBuffers[p],g=s(h,v.buffer),y=Ig(v.type,g),x=new BF(y,v.stride);return x.uuid=v.uuid,t[p]=x,x}function s(h,p){if(i[p]!==void 0)return i[p];const v=h.arrayBuffers[p],g=new Uint32Array(v).buffer;return i[p]=g,g}const a=e.isInstancedBufferGeometry?new $Ze:new $i,o=e.data.index;if(o!==void 0){const h=Ig(o.type,o.array);a.setIndex(new As(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let m;if(p.isInterleavedBufferAttribute){const v=r(e.data,p.data);m=new Am(v,p.itemSize,p.offset,p.normalized)}else{const v=Ig(p.type,p.array),g=p.isInstancedBufferAttribute?Wx:As;m=new g(v,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),a.setAttribute(h,m)}const c=e.data.morphAttributes;if(c)for(const h in c){const p=c[h],m=[];for(let v=0,g=p.length;v<g;v++){const y=p[v];let x;if(y.isInterleavedBufferAttribute){const b=r(e.data,y.data);x=new Am(b,y.itemSize,y.offset,y.normalized)}else{const b=Ig(y.type,y.array);x=new As(b,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),m.push(x)}a.morphAttributes[h]=m}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){const m=d[h];a.addGroup(m.start,m.count,m.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new $e;f.center!==void 0&&h.fromArray(f.center),a.boundingSphere=new Bm(h,f.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class ZZe extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Ja.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new to(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Ja.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new to(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const f in a)if(a[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new HF().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Ay().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new QZe;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in $q?o=$q[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new qF;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];if(l.type==="MultiMaterial"){const c=[];for(let u=0;u<l.materials.length;u++){const d=l.materials[u];i[d.uuid]===void 0&&(i[d.uuid]=s.parse(d)),c.push(i[d.uuid])}r[l.uuid]=c}else i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Sm.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return a(u)}else return l.data?{data:Ig(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Nse(t);s=new eP(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p],g=o(v);g!==null&&(g instanceof HTMLImageElement?h.push(g):h.push(new Pb(g.data,g.width,g.height)))}r[d.uuid]=new Dg(h)}else{const h=o(d.url);r[d.uuid]=new Dg(h)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:Ig(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new eP(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d],p=await s(h);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new Pb(p.data,p.width,p.height)))}i[l.uuid]=new Dg(u)}else{const u=await s(l.url);i[l.uuid]=new Dg(u)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new DF,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Pb:u=new Pa,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=i(o.mapping,JZe)),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=i(o.wrap[0],nK),u.wrapT=i(o.wrap[1],nK)),o.format!==void 0&&(u.format=o.format),o.type!==void 0&&(u.type=o.type),o.encoding!==void 0&&(u.encoding=o.encoding),o.minFilter!==void 0&&(u.minFilter=i(o.minFilter,iK)),o.magFilter!==void 0&&(u.magFilter=i(o.magFilter,iK)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,t,i,r,s){let a;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p];i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),h.push(i[v])}return h}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function c(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let u,d;switch(e.type){case"Scene":a=new FF,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new wn(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new kF(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new LF(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new Xs(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new by(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new gT(e.color,e.intensity);break;case"DirectionalLight":a=new BA(e.color,e.intensity);break;case"PointLight":a=new _m(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new YZe(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new vT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Use(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new jZe().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),d=l(e.material),a=new pT(u,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),d=l(e.material),a=new Qs(u,d);break;case"InstancedMesh":u=o(e.geometry),d=l(e.material);const f=e.count,h=e.instanceMatrix,p=e.instanceColor;a=new YQe(u,d,f),a.instanceMatrix=new Wx(new Float32Array(h.array),16),p!==void 0&&(a.instanceColor=new Wx(new Float32Array(p.array),p.itemSize));break;case"LOD":a=new WQe;break;case"Line":a=new wy(o(e.geometry),l(e.material));break;case"LineLoop":a=new wse(o(e.geometry),l(e.material));break;case"LineSegments":a=new wm(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new Lb(o(e.geometry),l(e.material));break;case"Sprite":a=new N_(l(e.material));break;case"Group":a=new Yo;break;case"Bone":a=new N1;break;default:a=new ps}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let h=0;h<f.length;h++)a.add(this.parseObject(f[h],t,i,r,s))}if(e.animations!==void 0){const f=e.animations;for(let h=0;h<f.length;h++){const p=f[h];a.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const f=e.levels;for(let h=0;h<f.length;h++){const p=f[h],m=a.getObjectByProperty("uuid",p.object);m!==void 0&&a.addLevel(m,p.distance)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const JZe={UVMapping:_F,CubeReflectionMapping:gm,CubeRefractionMapping:ym,EquirectangularReflectionMapping:Nx,EquirectangularRefractionMapping:c4,CubeUVReflectionMapping:kA},nK={RepeatWrapping:Ko,ClampToEdgeWrapping:$s,MirroredRepeatWrapping:Ox},iK={NearestFilter:ua,NearestMipmapNearestFilter:u4,NearestMipmapLinearFilter:d4,LinearFilter:Bs,LinearMipmapNearestFilter:CF,LinearMipmapLinearFilter:Pf};class eJe extends Fa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=U1.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){U1.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class tJe{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rK(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=rK();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function rK(){return(typeof performance>"u"?Date:performance).now()}class nJe{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Ta.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Ta.multiplyQuaternionsFlat(e,a,e,t,e,i),Ta.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const KF="\\[\\]\\.:\\/",iJe=new RegExp("["+KF+"]","g"),YF="[^"+KF+"]",rJe="[^"+KF.replace("\\.","")+"]",sJe=/((?:WC+[\/:])*)/.source.replace("WC",YF),aJe=/(WCOD+)?/.source.replace("WCOD",rJe),oJe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YF),lJe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YF),cJe=new RegExp("^"+sJe+aJe+oJe+lJe+"$"),uJe=["material","materials","bones"];class dJe{constructor(e,t,i){const r=i||ar.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ar{constructor(e,t,i){this.path=t,this.parsedPath=i||ar.parseTrackName(t),this.node=ar.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ar.Composite(e,t,i):new ar(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(iJe,"")}static parseTrackName(e){const t=cJe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);uJe.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=ar.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ar.Composite=dJe;ar.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ar.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ar.prototype.GetterByBindingType=[ar.prototype._getValue_direct,ar.prototype._getValue_array,ar.prototype._getValue_arrayElement,ar.prototype._getValue_toArray];ar.prototype.SetterByBindingTypeAndVersioning=[[ar.prototype._setValue_direct,ar.prototype._setValue_direct_setNeedsUpdate,ar.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_array,ar.prototype._setValue_array_setNeedsUpdate,ar.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_arrayElement,ar.prototype._setValue_arrayElement_setNeedsUpdate,ar.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_fromArray,ar.prototype._setValue_fromArray_setNeedsUpdate,ar.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class fJe{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Tg,endingEnd:Tg};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=CKe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case TKe:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case MF:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===MKe;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===_Ke){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Eg,r.endingEnd=Eg):(e?r.endingStart=this.zeroSlopeAtStart?Eg:Tg:r.endingStart=f4,t?r.endingEnd=this.zeroSlopeAtEnd?Eg:Tg:r.endingEnd=f4)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const hJe=new Float32Array(1);class tI extends Mp{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=r[d],h=f.name;let p=u[h];if(p!==void 0)++p.referenceCount,a[d]=p;else{if(p=a[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const m=t&&t._propertyBindings[d].binding.parsedPath;p=new nJe(ar.create(i,h,m),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),a[d]=p}o[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Fse(new Float32Array(2),new Float32Array(2),1,hJe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Sm.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(a!==null?i=a.blendMode:i=MF),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new fJe(this,a,t,i);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Sm.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}let pJe=class{constructor(e,t,i=0,r=1/0){this.ray=new fT(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new EF,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return tP(e,this,i,t),i.sort(sK),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)tP(e[r],this,i,t);return i.sort(sK),i}};function sK(n,e){return n.distance-e.distance}function tP(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)tP(r[s],e,t,!0)}}let aK=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ys(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class mJe extends wm{constructor(e=10,t=10,i=4473924,r=8947848){i=new wn(i),r=new wn(r);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let f=0,h=0,p=-o;f<=t;f++,p+=a){l.push(-o,0,p,o,0,p),l.push(p,0,-o,p,0,o);const m=f===s?i:r;m.toArray(c,h),h+=3,m.toArray(c,h),h+=3,m.toArray(c,h),h+=3,m.toArray(c,h),h+=3}const u=new $i;u.setAttribute("position",new Dn(l,3)),u.setAttribute("color",new Dn(c,3));const d=new Jc({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}}class vJe extends wm{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new $i;r.setAttribute("position",new Dn(t,3)),r.setAttribute("color",new Dn(i,3));const s=new Jc({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new wn,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:SF}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=SF);const oK={type:"change"},nI={type:"start"},lK={type:"end"};let gJe=class extends Mp{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new $e,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:hv.ROTATE,MIDDLE:hv.DOLLY,RIGHT:hv.PAN},this.touches={ONE:pv.ROTATE,TWO:pv.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ee){Ee.addEventListener("keydown",pe),this._domElementKeyEvents=Ee},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(oK),i.update(),s=r.NONE},this.update=function(){const Ee=new $e,gt=new Ta().setFromUnitVectors(e.up,new $e(0,1,0)),lt=gt.clone().invert(),$=new $e,le=new Ta,fe=2*Math.PI;return function(){const me=i.object.position;Ee.copy(me).sub(i.target),Ee.applyQuaternion(gt),o.setFromVector3(Ee),i.autoRotate&&s===r.NONE&&M(C()),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let Ae=i.minAzimuthAngle,dt=i.maxAzimuthAngle;return isFinite(Ae)&&isFinite(dt)&&(Ae<-Math.PI?Ae+=fe:Ae>Math.PI&&(Ae-=fe),dt<-Math.PI?dt+=fe:dt>Math.PI&&(dt-=fe),Ae<=dt?o.theta=Math.max(Ae,Math.min(dt,o.theta)):o.theta=o.theta>(Ae+dt)/2?Math.max(Ae,o.theta):Math.min(dt,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=c,o.radius=Math.max(i.minDistance,Math.min(i.maxDistance,o.radius)),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),Ee.setFromSpherical(o),Ee.applyQuaternion(lt),me.copy(i.target).add(Ee),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,d||$.distanceToSquared(i.object.position)>a||8*(1-le.dot(i.object.quaternion))>a?(i.dispatchEvent(oK),$.copy(i.object.position),le.copy(i.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ge),i.domElement.removeEventListener("pointerdown",ne),i.domElement.removeEventListener("pointercancel",Ge),i.domElement.removeEventListener("wheel",tt),i.domElement.removeEventListener("pointermove",Xe),i.domElement.removeEventListener("pointerup",ke),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",pe)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new aK,l=new aK;let c=1;const u=new $e;let d=!1;const f=new Gt,h=new Gt,p=new Gt,m=new Gt,v=new Gt,g=new Gt,y=new Gt,x=new Gt,b=new Gt,A=[],S={};function C(){return 2*Math.PI/60/60*i.autoRotateSpeed}function _(){return Math.pow(.95,i.zoomSpeed)}function M(Ee){l.theta-=Ee}function T(Ee){l.phi-=Ee}const E=function(){const Ee=new $e;return function(lt,$){Ee.setFromMatrixColumn($,0),Ee.multiplyScalar(-lt),u.add(Ee)}}(),I=function(){const Ee=new $e;return function(lt,$){i.screenSpacePanning===!0?Ee.setFromMatrixColumn($,1):(Ee.setFromMatrixColumn($,0),Ee.crossVectors(i.object.up,Ee)),Ee.multiplyScalar(lt),u.add(Ee)}}(),L=function(){const Ee=new $e;return function(lt,$){const le=i.domElement;if(i.object.isPerspectiveCamera){const fe=i.object.position;Ee.copy(fe).sub(i.target);let Me=Ee.length();Me*=Math.tan(i.object.fov/2*Math.PI/180),E(2*lt*Me/le.clientHeight,i.object.matrix),I(2*$*Me/le.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(E(lt*(i.object.right-i.object.left)/i.object.zoom/le.clientWidth,i.object.matrix),I($*(i.object.top-i.object.bottom)/i.object.zoom/le.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function F(Ee){i.object.isPerspectiveCamera?c/=Ee:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Ee)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function B(Ee){i.object.isPerspectiveCamera?c*=Ee:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Ee)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function P(Ee){f.set(Ee.clientX,Ee.clientY)}function z(Ee){y.set(Ee.clientX,Ee.clientY)}function O(Ee){m.set(Ee.clientX,Ee.clientY)}function N(Ee){h.set(Ee.clientX,Ee.clientY),p.subVectors(h,f).multiplyScalar(i.rotateSpeed);const gt=i.domElement;M(2*Math.PI*p.x/gt.clientHeight),T(2*Math.PI*p.y/gt.clientHeight),f.copy(h),i.update()}function H(Ee){x.set(Ee.clientX,Ee.clientY),b.subVectors(x,y),b.y>0?F(_()):b.y<0&&B(_()),y.copy(x),i.update()}function q(Ee){v.set(Ee.clientX,Ee.clientY),g.subVectors(v,m).multiplyScalar(i.panSpeed),L(g.x,g.y),m.copy(v),i.update()}function te(Ee){Ee.deltaY<0?B(_()):Ee.deltaY>0&&F(_()),i.update()}function Q(Ee){let gt=!1;switch(Ee.code){case i.keys.UP:L(0,i.keyPanSpeed),gt=!0;break;case i.keys.BOTTOM:L(0,-i.keyPanSpeed),gt=!0;break;case i.keys.LEFT:L(i.keyPanSpeed,0),gt=!0;break;case i.keys.RIGHT:L(-i.keyPanSpeed,0),gt=!0;break}gt&&(Ee.preventDefault(),i.update())}function ee(){if(A.length===1)f.set(A[0].pageX,A[0].pageY);else{const Ee=.5*(A[0].pageX+A[1].pageX),gt=.5*(A[0].pageY+A[1].pageY);f.set(Ee,gt)}}function de(){if(A.length===1)m.set(A[0].pageX,A[0].pageY);else{const Ee=.5*(A[0].pageX+A[1].pageX),gt=.5*(A[0].pageY+A[1].pageY);m.set(Ee,gt)}}function J(){const Ee=A[0].pageX-A[1].pageX,gt=A[0].pageY-A[1].pageY,lt=Math.sqrt(Ee*Ee+gt*gt);y.set(0,lt)}function ue(){i.enableZoom&&J(),i.enablePan&&de()}function Te(){i.enableZoom&&J(),i.enableRotate&&ee()}function De(Ee){if(A.length==1)h.set(Ee.pageX,Ee.pageY);else{const lt=At(Ee),$=.5*(Ee.pageX+lt.x),le=.5*(Ee.pageY+lt.y);h.set($,le)}p.subVectors(h,f).multiplyScalar(i.rotateSpeed);const gt=i.domElement;M(2*Math.PI*p.x/gt.clientHeight),T(2*Math.PI*p.y/gt.clientHeight),f.copy(h)}function Le(Ee){if(A.length===1)v.set(Ee.pageX,Ee.pageY);else{const gt=At(Ee),lt=.5*(Ee.pageX+gt.x),$=.5*(Ee.pageY+gt.y);v.set(lt,$)}g.subVectors(v,m).multiplyScalar(i.panSpeed),L(g.x,g.y),m.copy(v)}function Ne(Ee){const gt=At(Ee),lt=Ee.pageX-gt.x,$=Ee.pageY-gt.y,le=Math.sqrt(lt*lt+$*$);x.set(0,le),b.set(0,Math.pow(x.y/y.y,i.zoomSpeed)),F(b.y),y.copy(x)}function Y(Ee){i.enableZoom&&Ne(Ee),i.enablePan&&Le(Ee)}function oe(Ee){i.enableZoom&&Ne(Ee),i.enableRotate&&De(Ee)}function ne(Ee){i.enabled!==!1&&(A.length===0&&(i.domElement.setPointerCapture(Ee.pointerId),i.domElement.addEventListener("pointermove",Xe),i.domElement.addEventListener("pointerup",ke)),Oe(Ee),Ee.pointerType==="touch"?G(Ee):He(Ee))}function Xe(Ee){i.enabled!==!1&&(Ee.pointerType==="touch"?Z(Ee):qe(Ee))}function ke(Ee){je(Ee),A.length===0&&(i.domElement.releasePointerCapture(Ee.pointerId),i.domElement.removeEventListener("pointermove",Xe),i.domElement.removeEventListener("pointerup",ke)),i.dispatchEvent(lK),s=r.NONE}function Ge(Ee){je(Ee)}function He(Ee){let gt;switch(Ee.button){case 0:gt=i.mouseButtons.LEFT;break;case 1:gt=i.mouseButtons.MIDDLE;break;case 2:gt=i.mouseButtons.RIGHT;break;default:gt=-1}switch(gt){case hv.DOLLY:if(i.enableZoom===!1)return;z(Ee),s=r.DOLLY;break;case hv.ROTATE:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(i.enablePan===!1)return;O(Ee),s=r.PAN}else{if(i.enableRotate===!1)return;P(Ee),s=r.ROTATE}break;case hv.PAN:if(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey){if(i.enableRotate===!1)return;P(Ee),s=r.ROTATE}else{if(i.enablePan===!1)return;O(Ee),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(nI)}function qe(Ee){switch(s){case r.ROTATE:if(i.enableRotate===!1)return;N(Ee);break;case r.DOLLY:if(i.enableZoom===!1)return;H(Ee);break;case r.PAN:if(i.enablePan===!1)return;q(Ee);break}}function tt(Ee){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||(Ee.preventDefault(),i.dispatchEvent(nI),te(Ee),i.dispatchEvent(lK))}function pe(Ee){i.enabled===!1||i.enablePan===!1||Q(Ee)}function G(Ee){switch(bt(Ee),A.length){case 1:switch(i.touches.ONE){case pv.ROTATE:if(i.enableRotate===!1)return;ee(),s=r.TOUCH_ROTATE;break;case pv.PAN:if(i.enablePan===!1)return;de(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case pv.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ue(),s=r.TOUCH_DOLLY_PAN;break;case pv.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Te(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(nI)}function Z(Ee){switch(bt(Ee),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;De(Ee),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;Le(Ee),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Y(Ee),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;oe(Ee),i.update();break;default:s=r.NONE}}function ge(Ee){i.enabled!==!1&&Ee.preventDefault()}function Oe(Ee){A.push(Ee)}function je(Ee){delete S[Ee.pointerId];for(let gt=0;gt<A.length;gt++)if(A[gt].pointerId==Ee.pointerId){A.splice(gt,1);return}}function bt(Ee){let gt=S[Ee.pointerId];gt===void 0&&(gt=new Gt,S[Ee.pointerId]=gt),gt.set(Ee.pageX,Ee.pageY)}function At(Ee){const gt=Ee.pointerId===A[0].pointerId?A[1]:A[0];return S[gt.pointerId]}i.domElement.addEventListener("contextmenu",ge),i.domElement.addEventListener("pointerdown",ne),i.domElement.addEventListener("pointercancel",Ge),i.domElement.addEventListener("wheel",tt,{passive:!1}),this.update()}};var Bb=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);function t(u){return e.appendChild(u.dom),u}function i(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";n=u}var r=(performance||Date).now(),s=r,a=0,o=t(new Bb.Panel("FPS","#0ff","#002")),l=t(new Bb.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new Bb.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){a++;var u=(performance||Date).now();if(l.update(u-r,200),u>=s+1e3&&(o.update(a*1e3/(u-s),100),s=u,a=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};Bb.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,a=s(window.devicePixelRatio||1),o=80*a,l=48*a,c=3*a,u=2*a,d=3*a,f=15*a,h=74*a,p=30*a,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=t,v.fillRect(0,0,o,l),v.fillStyle=e,v.fillText(n,c,u),v.fillRect(d,f,h,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d,f,h,p),{dom:m,update:function(g,y){i=Math.min(i,g),r=Math.max(r,g),v.fillStyle=t,v.globalAlpha=1,v.fillRect(0,0,o,f),v.fillStyle=e,v.fillText(s(g)+" "+n+" ("+s(i)+"-"+s(r)+")",c,u),v.drawImage(m,d+a,f,h-a,p,d,f,h-a,p),v.fillRect(d+h-a,f,a,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d+h-a,f,a,s((1-g/y)*p))}}};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var cK={},nP=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},zse=function(n){return new Worker(n)};try{URL.revokeObjectURL(nP(""))}catch{nP=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},zse=function(e){return new Worker(e,{type:"module"})}}var yJe=function(n,e,t,i,r){var s=zse(cK[e]||(cK[e]=nP(n)));return s.onerror=function(a){return r(a.error,null)},s.onmessage=function(a){return r(null,a.data)},s.postMessage(t,i),s},tr=Uint8Array,fa=Uint16Array,xf=Uint32Array,My=new tr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ty=new tr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jx=new tr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vse=function(n,e){for(var t=new fa(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new xf(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},Hse=Vse(My,2),XF=Hse[0],M4=Hse[1];XF[28]=258,M4[258]=28;var Gse=Vse(Ty,0),Wse=Gse[0],iP=Gse[1],$x=new fa(32768);for(var es=0;es<32768;++es){var ih=(es&43690)>>>1|(es&21845)<<1;ih=(ih&52428)>>>2|(ih&13107)<<2,ih=(ih&61680)>>>4|(ih&3855)<<4,$x[es]=((ih&65280)>>>8|(ih&255)<<8)>>>1}var uc=function(n,e,t){for(var i=n.length,r=0,s=new fa(e);r<i;++r)++s[n[r]-1];var a=new fa(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new fa(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=a[n[r]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[$x[d]>>>l]=c}else for(o=new fa(i),r=0;r<i;++r)n[r]&&(o[r]=$x[a[n[r]-1]++]>>>15-n[r]);return o},Af=new tr(288);for(var es=0;es<144;++es)Af[es]=8;for(var es=144;es<256;++es)Af[es]=9;for(var es=256;es<280;++es)Af[es]=7;for(var es=280;es<288;++es)Af[es]=8;var V1=new tr(32);for(var es=0;es<32;++es)V1[es]=5;var qse=uc(Af,9,0),Kse=uc(Af,9,1),Yse=uc(V1,5,0),Xse=uc(V1,5,1),O_=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},zl=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},U_=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},NA=function(n){return(n/8|0)+(n&7&&1)},dc=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof fa?fa:n instanceof xf?xf:tr)(t-e);return i.set(n.subarray(e,t)),i},OA=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new tr(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new tr(i*3));var a=function(J){var ue=e.length;if(J>ue){var Te=new tr(Math.max(ue*2,J));Te.set(e),e=Te}},o=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,f=t.m,h=t.n,p=i*8;do{if(!u){t.f=o=zl(n,l,1);var m=zl(n,l+1,3);if(l+=3,m)if(m==1)u=Kse,d=Xse,f=9,h=5;else if(m==2){var x=zl(n,l,31)+257,b=zl(n,l+10,15)+4,A=x+zl(n,l+5,31)+1;l+=14;for(var S=new tr(A),C=new tr(19),_=0;_<b;++_)C[jx[_]]=zl(n,l+_*3,7);l+=b*3;for(var M=O_(C),T=(1<<M)-1,E=uc(C,M,1),_=0;_<A;){var I=E[zl(n,l,T)];l+=I&15;var v=I>>>4;if(v<16)S[_++]=v;else{var L=0,F=0;for(v==16?(F=3+zl(n,l,3),l+=2,L=S[_-1]):v==17?(F=3+zl(n,l,7),l+=3):v==18&&(F=11+zl(n,l,127),l+=7);F--;)S[_++]=L}}var B=S.subarray(0,x),P=S.subarray(x);f=O_(B),h=O_(P),u=uc(B,f,1),d=uc(P,h,1)}else throw"invalid block type";else{var v=NA(l)+4,g=n[v-4]|n[v-3]<<8,y=v+g;if(y>i){if(s)throw"unexpected EOF";break}r&&a(c+g),e.set(n.subarray(v,y),c),t.b=c+=g,t.p=l=y*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&a(c+131072);for(var z=(1<<f)-1,O=(1<<h)-1,N=l;;N=l){var L=u[U_(n,l)&z],H=L>>>4;if(l+=L&15,l>p){if(s)throw"unexpected EOF";break}if(!L)throw"invalid length/literal";if(H<256)e[c++]=H;else if(H==256){N=l,u=null;break}else{var q=H-254;if(H>264){var _=H-257,te=My[_];q=zl(n,l,(1<<te)-1)+XF[_],l+=te}var Q=d[U_(n,l)&O],ee=Q>>>4;if(!Q)throw"invalid distance";l+=Q&15;var P=Wse[ee];if(ee>3){var te=Ty[ee];P+=U_(n,l)&(1<<te)-1,l+=te}if(l>p){if(s)throw"unexpected EOF";break}r&&a(c+131072);for(var de=c+q;c<de;c+=4)e[c]=e[c-P],e[c+1]=e[c+1-P],e[c+2]=e[c+2-P],e[c+3]=e[c+3-P];c=de}}t.l=u,t.p=N,t.b=c,u&&(o=1,t.m=f,t.d=d,t.n=h)}while(!o);return c==e.length?e:dc(e,0,c)},Cu=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8},fg=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8,n[i+2]|=t>>>16},z_=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return[Jd,0];if(r==1){var a=new tr(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(A,S){return A.f-S.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=r-1;)o=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=s[0].s,i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var h=new fa(f+1),p=T4(t[u-1],h,0);if(p>e){var i=0,m=0,v=p-e,g=1<<v;for(s.sort(function(S,C){return h[C.s]-h[S.s]||S.f-C.f});i<r;++i){var y=s[i].s;if(h[y]>e)m+=g-(1<<p-h[y]),h[y]=e;else break}for(m>>>=v;m>0;){var x=s[i].s;h[x]<e?m-=1<<e-h[x]++-1:++i}for(;i>=0&&m;--i){var b=s[i].s;h[b]==e&&(--h[b],++m)}p=e}return[new tr(h),p]},T4=function(n,e,t){return n.s==-1?Math.max(T4(n.l,e,t+1),T4(n.r,e,t+1)):e[n.s]=t},rP=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new fa(++e),i=0,r=n[0],s=1,a=function(l){t[i++]=l},o=1;o<=e;++o)if(n[o]==r&&o!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=n[o]}return[t.subarray(0,i),e]},hg=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},Nb=function(n,e,t){var i=t.length,r=NA(e+2);n[r]=i&255,n[r+1]=i>>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=t[s];return(r+4+i)*8},sP=function(n,e,t,i,r,s,a,o,l,c,u){Cu(e,u++,t),++r[256];for(var d=z_(r,15),f=d[0],h=d[1],p=z_(s,15),m=p[0],v=p[1],g=rP(f),y=g[0],x=g[1],b=rP(m),A=b[0],S=b[1],C=new fa(19),_=0;_<y.length;++_)C[y[_]&31]++;for(var _=0;_<A.length;++_)C[A[_]&31]++;for(var M=z_(C,7),T=M[0],E=M[1],I=19;I>4&&!T[jx[I-1]];--I);var L=c+5<<3,F=hg(r,Af)+hg(s,V1)+a,B=hg(r,f)+hg(s,m)+a+14+3*I+hg(C,T)+(2*C[16]+3*C[17]+7*C[18]);if(L<=F&&L<=B)return Nb(e,u,n.subarray(l,l+c));var P,z,O,N;if(Cu(e,u,1+(B<F)),u+=2,B<F){P=uc(f,h,0),z=f,O=uc(m,v,0),N=m;var H=uc(T,E,0);Cu(e,u,x-257),Cu(e,u+5,S-1),Cu(e,u+10,I-4),u+=14;for(var _=0;_<I;++_)Cu(e,u+3*_,T[jx[_]]);u+=3*I;for(var q=[y,A],te=0;te<2;++te)for(var Q=q[te],_=0;_<Q.length;++_){var ee=Q[_]&31;Cu(e,u,H[ee]),u+=T[ee],ee>15&&(Cu(e,u,Q[_]>>>5&127),u+=Q[_]>>>12)}}else P=qse,z=Af,O=Yse,N=V1;for(var _=0;_<o;++_)if(i[_]>255){var ee=i[_]>>>18&31;fg(e,u,P[ee+257]),u+=z[ee+257],ee>7&&(Cu(e,u,i[_]>>>23&31),u+=My[ee]);var de=i[_]&31;fg(e,u,O[de]),u+=N[de],de>3&&(fg(e,u,i[_]>>>5&8191),u+=Ty[de])}else fg(e,u,P[i[_]]),u+=z[i[_]];return fg(e,u,P[256]),u+z[256]},jse=new xf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Jd=new tr(0),$se=function(n,e,t,i,r,s){var a=n.length,o=new tr(i+a+5*(1+Math.ceil(a/7e3))+r),l=o.subarray(i,o.length-r),c=0;if(!e||a<8)for(var u=0;u<=a;u+=65535){var d=u+65535;d<a?c=Nb(l,c,n.subarray(u,d)):(l[u]=s,c=Nb(l,c,n.subarray(u,a)))}else{for(var f=jse[e-1],h=f>>>13,p=f&8191,m=(1<<t)-1,v=new fa(32768),g=new fa(m+1),y=Math.ceil(t/3),x=2*y,b=function(ne){return(n[ne]^n[ne+1]<<y^n[ne+2]<<x)&m},A=new xf(25e3),S=new fa(288),C=new fa(32),_=0,M=0,u=0,T=0,E=0,I=0;u<a;++u){var L=b(u),F=u&32767,B=g[L];if(v[F]=B,g[L]=F,E<=u){var P=a-u;if((_>7e3||T>24576)&&P>423){c=sP(n,l,0,A,S,C,M,T,I,u-I,c),T=_=M=0,I=u;for(var z=0;z<286;++z)S[z]=0;for(var z=0;z<30;++z)C[z]=0}var O=2,N=0,H=p,q=F-B&32767;if(P>2&&L==b(u-q))for(var te=Math.min(h,P)-1,Q=Math.min(32767,u),ee=Math.min(258,P);q<=Q&&--H&&F!=B;){if(n[u+O]==n[u+O-q]){for(var de=0;de<ee&&n[u+de]==n[u+de-q];++de);if(de>O){if(O=de,N=q,de>te)break;for(var J=Math.min(q,de-2),ue=0,z=0;z<J;++z){var Te=u-q+z+32768&32767,De=v[Te],Le=Te-De+32768&32767;Le>ue&&(ue=Le,B=Te)}}}F=B,B=v[F],q+=F-B+32768&32767}if(N){A[T++]=268435456|M4[O]<<18|iP[N];var Ne=M4[O]&31,Y=iP[N]&31;M+=My[Ne]+Ty[Y],++S[257+Ne],++C[Y],E=u+O,++_}else A[T++]=n[u],++S[n[u]]}}c=sP(n,l,s,A,S,C,M,T,I,u-I,c),!s&&c&7&&(c=Nb(l,c+1,Jd))}return dc(o,0,i+NA(c)+r)},Qse=function(){for(var n=new xf(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),Ey=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=Qse[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},jF=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,s=t.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)r+=i+=t[a];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},Om=function(n,e,t,i,r){return $se(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,i,!r)},UA=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},uK=function(n,e,t){for(var i=n(),r=n.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<i.length;++a){var o=i[a],l=s[a];if(typeof o=="function"){e+=";"+l+"=";var c=o.toString();if(o.prototype)if(c.indexOf("[native code]")!=-1){var u=c.indexOf(" ",8)+1;e+=c.slice(u,c.indexOf("(",u))}else{e+=c;for(var d in o.prototype)e+=";"+l+".prototype."+d+"="+o.prototype[d].toString()}else e+=c}else t[l]=o}return[e,t]},YS=[],bJe=function(n){var e=[];for(var t in n)(n[t]instanceof tr||n[t]instanceof fa||n[t]instanceof xf)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},Zse=function(n,e,t,i){var r;if(!YS[t]){for(var s="",a={},o=n.length-1,l=0;l<o;++l)r=uK(n[l],s,a),s=r[0],a=r[1];YS[t]=uK(n[o],s,a)}var c=UA({},YS[t][1]);return yJe(YS[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,c,bJe(c),i)},Iy=function(){return[tr,fa,xf,My,Ty,jx,XF,Wse,Kse,Xse,$x,uc,O_,zl,U_,NA,dc,OA,Ly,Ep,$F]},Dy=function(){return[tr,fa,xf,My,Ty,jx,M4,iP,qse,Af,Yse,V1,$x,jse,Jd,uc,Cu,fg,z_,T4,rP,hg,Nb,sP,NA,dc,$se,Om,zA,Ep]},Jse=function(){return[QF,JF,wr,Ey,Qse]},eae=function(){return[ZF,iae]},tae=function(){return[eB,wr,jF]},nae=function(){return[rae]},Ep=function(n){return postMessage(n,[n.buffer])},$F=function(n){return n&&n.size&&new tr(n.size)},Ry=function(n,e,t,i,r,s){var a=Zse(t,i,r,function(o,l){a.terminate(),s(o,l)});return a.postMessage([n,e],e.consume?[n.buffer]:[]),function(){a.terminate()}},yc=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},Py=function(n,e,t,i,r){var s,a=Zse(n,i,r,function(o,l){o?(a.terminate(),e.ondata.call(e,o)):(l[1]&&a.terminate(),e.ondata.call(e,o,l[0],l[1]))});a.postMessage(t),e.push=function(o,l){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";a.postMessage([o,s=l],[o.buffer])},e.terminate=function(){a.terminate()}},vo=function(n,e){return n[e]|n[e+1]<<8},Ds=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},iI=function(n,e){return Ds(n,e)+Ds(n,e+4)*4294967296},wr=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},QF=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&wr(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var i=0;i<=t.length;++i)n[i+10]=t.charCodeAt(i)}},ZF=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},iae=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},JF=function(n){return 10+(n.filename&&n.filename.length+1||0)},eB=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)},rae=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function tB(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var td=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(Om(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),sae=function(){function n(e,t){Py([Dy,function(){return[yc,td]}],this,tB.call(this,e,t),function(i){var r=new td(i.data);onmessage=yc(r)},6)}return n}();function aae(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Ry(n,e,[Dy],function(i){return Ep(zA(i.data[0],i.data[1]))},0,t)}function zA(n,e){return Om(n,e||{},0,0)}var Qo=function(){function n(e){this.s={},this.p=new tr(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,i=new tr(t+e.length);i.set(this.p),i.set(e,t),this.p=i},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,i=OA(this.p,this.o,this.s);this.ondata(dc(i,t,this.s.b),this.d),this.o=dc(i,this.s.b-32768),this.s.b=this.o.length,this.p=dc(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),nB=function(){function n(e){this.ondata=e,Py([Iy,function(){return[yc,Qo]}],this,0,function(){var t=new Qo;onmessage=yc(t)},7)}return n}();function iB(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Ry(n,e,[Iy],function(i){return Ep(Ly(i.data[0],$F(i.data[1])))},1,t)}function Ly(n,e){return OA(n,e)}var E4=function(){function n(e,t){this.c=Ey(),this.l=0,this.v=1,td.call(this,e,t)}return n.prototype.push=function(e,t){td.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var i=Om(e,this.o,this.v&&JF(this.o),t&&8,!t);this.v&&(QF(i,this.o),this.v=0),t&&(wr(i,i.length-8,this.c.d()),wr(i,i.length-4,this.l)),this.ondata(i,t)},n}(),dK=function(){function n(e,t){Py([Dy,Jse,function(){return[yc,td,E4]}],this,tB.call(this,e,t),function(i){var r=new E4(i.data);onmessage=yc(r)},8)}return n}();function fK(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Ry(n,e,[Dy,Jse,function(){return[I4]}],function(i){return Ep(I4(i.data[0],i.data[1]))},2,t)}function I4(n,e){e||(e={});var t=Ey(),i=n.length;t.p(n);var r=Om(n,e,JF(e),8),s=r.length;return QF(r,e),wr(r,s-8,t.d()),wr(r,s-4,i),r}var D4=function(){function n(e){this.v=1,Qo.call(this,e)}return n.prototype.push=function(e,t){if(Qo.prototype.e.call(this,e),this.v){var i=this.p.length>3?ZF(this.p):4;if(i>=this.p.length&&!t)return;this.p=this.p.subarray(i),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Qo.prototype.c.call(this,t)},n}(),oae=function(){function n(e){this.ondata=e,Py([Iy,eae,function(){return[yc,Qo,D4]}],this,0,function(){var t=new D4;onmessage=yc(t)},9)}return n}();function lae(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Ry(n,e,[Iy,eae,function(){return[R4]}],function(i){return Ep(R4(i.data[0]))},3,t)}function R4(n,e){return OA(n.subarray(ZF(n),-8),e||new tr(iae(n)))}var aP=function(){function n(e,t){this.c=jF(),this.v=1,td.call(this,e,t)}return n.prototype.push=function(e,t){td.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var i=Om(e,this.o,this.v&&2,t&&4,!t);this.v&&(eB(i,this.o),this.v=0),t&&wr(i,i.length-4,this.c.d()),this.ondata(i,t)},n}(),xJe=function(){function n(e,t){Py([Dy,tae,function(){return[yc,td,aP]}],this,tB.call(this,e,t),function(i){var r=new aP(i.data);onmessage=yc(r)},10)}return n}();function AJe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Ry(n,e,[Dy,tae,function(){return[oP]}],function(i){return Ep(oP(i.data[0],i.data[1]))},4,t)}function oP(n,e){e||(e={});var t=jF();t.p(n);var i=Om(n,e,2,4);return eB(i,e),wr(i,i.length-4,t.d()),i}var P4=function(){function n(e){this.v=1,Qo.call(this,e)}return n.prototype.push=function(e,t){if(Qo.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Qo.prototype.c.call(this,t)},n}(),cae=function(){function n(e){this.ondata=e,Py([Iy,nae,function(){return[yc,Qo,P4]}],this,0,function(){var t=new P4;onmessage=yc(t)},11)}return n}();function uae(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Ry(n,e,[Iy,nae,function(){return[Qx]}],function(i){return Ep(Qx(i.data[0],$F(i.data[1])))},5,t)}function Qx(n,e){return OA((rae(n),n.subarray(2,-4)),e)}var dae=function(){function n(e){this.G=D4,this.I=Qo,this.Z=P4,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var i=new tr(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,s=function(){r.ondata.apply(r,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),wJe=function(){function n(e){this.G=oae,this.I=nB,this.Z=cae,this.ondata=e}return n.prototype.push=function(e,t){dae.prototype.push.call(this,e,t)},n}();function SJe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?lae(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?iB(n,e,t):uae(n,e,t)}function _Je(n,e){return n[0]==31&&n[1]==139&&n[2]==8?R4(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Ly(n,e):Qx(n,e)}var rB=function(n,e,t,i){for(var r in n){var s=n[r],a=e+r;s instanceof tr?t[a]=[s,i]:Array.isArray(s)?t[a]=[s[0],UA(i,s[1])]:rB(s,a+"/",t,i)}},hK=typeof TextEncoder<"u"&&new TextEncoder,lP=typeof TextDecoder<"u"&&new TextDecoder,fae=0;try{lP.decode(Jd,{stream:!0}),fae=1}catch{}var hae=function(n){for(var e="",t=0;;){var i=n[t++],r=(i>127)+(i>223)+(i>239);if(t+r>n.length)return[e,dc(n,t-1)];r?r==3?(i=((i&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|i>>10,56320|i&1023)):r&1?e+=String.fromCharCode((i&31)<<6|n[t++]&63):e+=String.fromCharCode((i&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(i)}},CJe=function(){function n(e){this.ondata=e,fae?this.t=new TextDecoder:this.p=Jd}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var i=new tr(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length);var r=hae(i),s=r[0],a=r[1];if(t){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(s,t)},n}(),MJe=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(gp(e),this.d=t||!1)},n}();function gp(n,e){if(e){for(var t=new tr(n.length),i=0;i<n.length;++i)t[i]=n.charCodeAt(i);return t}if(hK)return hK.encode(n);for(var r=n.length,s=new tr(n.length+(n.length>>1)),a=0,o=function(u){s[a++]=u},i=0;i<r;++i){if(a+5>s.length){var l=new tr(a+8+(r-i<<1));l.set(s),s=l}var c=n.charCodeAt(i);c<128||e?o(c):c<2048?(o(192|c>>6),o(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|n.charCodeAt(++i)&1023,o(240|c>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|c&63)):(o(224|c>>12),o(128|c>>6&63),o(128|c&63))}return dc(s,0,a)}function sB(n,e){if(e){for(var t="",i=0;i<n.length;i+=16384)t+=String.fromCharCode.apply(null,n.subarray(i,i+16384));return t}else{if(lP)return lP.decode(n);var r=hae(n),s=r[0],a=r[1];if(a.length)throw"invalid utf-8 data";return s}}var pae=function(n){return n==1?3:n<6?2:n==9?1:0},mae=function(n,e){return e+30+vo(n,e+26)+vo(n,e+28)},vae=function(n,e,t){var i=vo(n,e+28),r=sB(n.subarray(e+46,e+46+i),!(vo(n,e+8)&2048)),s=e+46+i,a=Ds(n,e+20),o=t&&a==4294967295?gae(n,s):[a,Ds(n,e+24),Ds(n,e+42)],l=o[0],c=o[1],u=o[2];return[vo(n,e+10),l,c,r,s+vo(n,e+30)+vo(n,e+32),u]},gae=function(n,e){for(;vo(n,e)!=1;e+=4+vo(n,e+2));return[iI(n,e+12),iI(n,e+4),iI(n,e+20)]},Xh=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;if(i>65535)throw"extra field too long";e+=i+4}return e},H1=function(n,e,t,i,r,s,a,o){var l=i.length,c=t.extra,u=o&&o.length,d=Xh(c);wr(n,e,a!=null?33639248:67324752),e+=4,a!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=r&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),h=f.getFullYear()-1980;if(h<0||h>119)throw"date not in range 1980-2099";if(wr(n,e,h<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),e+=4,s!=null&&(wr(n,e,t.crc),wr(n,e+4,s),wr(n,e+8,t.size)),wr(n,e+12,l),wr(n,e+14,d),e+=16,a!=null&&(wr(n,e,u),wr(n,e+6,t.attrs),wr(n,e+10,a),e+=14),n.set(i,e),e+=l,d)for(var p in c){var m=c[p],v=m.length;wr(n,e,+p),wr(n,e+2,v),n.set(m,e+4),e+=4+v}return u&&(n.set(o,e),e+=u),e},aB=function(n,e,t,i,r){wr(n,e,101010256),wr(n,e+8,t),wr(n,e+10,t),wr(n,e+12,i),wr(n,e+16,r)},Zx=function(){function n(e){this.filename=e,this.c=Ey(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),TJe=function(){function n(e,t){var i=this;t||(t={}),Zx.call(this,e),this.d=new td(t,function(r,s){i.ondata(null,r,s)}),this.compression=8,this.flag=pae(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(i){this.ondata(i,null,t)}},n.prototype.push=function(e,t){Zx.prototype.push.call(this,e,t)},n}(),EJe=function(){function n(e,t){var i=this;t||(t={}),Zx.call(this,e),this.d=new sae(t,function(r,s,a){i.ondata(r,s,a)}),this.compression=8,this.flag=pae(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){Zx.prototype.push.call(this,e,t)},n}(),IJe=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var i=gp(e.filename),r=i.length,s=e.comment,a=s&&gp(s),o=r!=e.filename.length||a&&s.length!=a.length,l=r+Xh(e.extra)+30;if(r>65535)throw"filename too long";var c=new tr(l);H1(c,0,e,i,o);var u=[c],d=function(){for(var v=0,g=u;v<g.length;v++){var y=g[v];t.ondata(null,y,!1)}u=[]},f=this.d;this.d=0;var h=this.u.length,p=UA(e,{f:i,u:o,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),f){var v=t.u[h+1];v?v.r():t.d=1}f=1}}),m=0;e.ondata=function(v,g,y){if(v)t.ondata(v,g,y),t.terminate();else if(m+=g.length,u.push(g),y){var x=new tr(16);wr(x,0,134695760),wr(x,4,e.crc),wr(x,8,m),wr(x,12,e.size),u.push(x),p.c=m,p.b=l+m+16,p.crc=e.crc,p.size=e.size,f&&p.r(),f=1}else f&&d()},this.u.push(p)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,i=0,r=0,s=this.u;r<s.length;r++){var a=s[r];i+=46+a.f.length+Xh(a.extra)+(a.o?a.o.length:0)}for(var o=new tr(i+22),l=0,c=this.u;l<c.length;l++){var a=c[l];H1(o,e,a,a.f,a.u,a.c,t,a.o),e+=46+a.f.length+Xh(a.extra)+(a.o?a.o.length:0),t+=a.b}aB(o,e,this.u.length,i,t),this.ondata(null,o,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var i=t[e];i.t()}this.d=2},n}();function DJe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var i={};rB(n,"",i,e);var r=Object.keys(i),s=r.length,a=0,o=0,l=s,c=new Array(s),u=[],d=function(){for(var m=0;m<u.length;++m)u[m]()},f=function(){var m=new tr(o+22),v=a,g=o-a;o=0;for(var y=0;y<l;++y){var x=c[y];try{var b=x.c.length;H1(m,o,x,x.f,x.u,b);var A=30+x.f.length+Xh(x.extra),S=o+A;m.set(x.c,S),H1(m,a,x,x.f,x.u,b,o,x.m),a+=16+A+(x.m?x.m.length:0),o=S+b}catch(C){return t(C,null)}}aB(m,a,c.length,g,v),t(null,m)};s||f();for(var h=function(m){var v=r[m],g=i[v],y=g[0],x=g[1],b=Ey(),A=y.length;b.p(y);var S=gp(v),C=S.length,_=x.comment,M=_&&gp(_),T=M&&M.length,E=Xh(x.extra),I=x.level==0?0:8,L=function(F,B){if(F)d(),t(F,null);else{var P=B.length;c[m]=UA(x,{size:A,crc:b.d(),c:B,f:S,m:M,u:C!=v.length||M&&_.length!=T,compression:I}),a+=30+C+E+P,o+=76+2*(C+E)+(T||0)+P,--s||f()}};if(C>65535&&L("filename too long",null),!I)L(null,y);else if(A<16e4)try{L(null,zA(y,x))}catch(F){L(F,null)}else u.push(aae(y,x,L))},p=0;p<l;++p)h(p);return d}function RJe(n,e){e||(e={});var t={},i=[];rB(n,"",t,e);var r=0,s=0;for(var a in t){var o=t[a],l=o[0],c=o[1],u=c.level==0?0:8,d=gp(a),f=d.length,h=c.comment,p=h&&gp(h),m=p&&p.length,v=Xh(c.extra);if(f>65535)throw"filename too long";var g=u?zA(l,c):l,y=g.length,x=Ey();x.p(l),i.push(UA(c,{size:l.length,crc:x.d(),c:g,f:d,m:p,u:f!=a.length||p&&h.length!=m,o:r,compression:u})),r+=30+f+v+y,s+=76+2*(f+v)+(m||0)+y}for(var b=new tr(s+22),A=r,S=s-r,C=0;C<i.length;++C){var d=i[C];H1(b,d.o,d,d.f,d.u,d.c.length);var _=30+d.f.length+Xh(d.extra);b.set(d.c,d.o+_),H1(b,r,d,d.f,d.u,d.c.length,d.o,d.m),r+=16+_+(d.m?d.m.length:0)}return aB(b,r,i.length,S,A),b}var yae=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),PJe=function(){function n(){var e=this;this.i=new Qo(function(t,i){e.ondata(null,t,i)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(i){this.ondata(i,e,t)}},n.compression=8,n}(),LJe=function(){function n(e,t){var i=this;t<32e4?this.i=new Qo(function(r,s){i.ondata(null,r,s)}):(this.i=new nB(function(r,s,a){i.ondata(r,s,a)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=dc(e,0)),this.i.push(e,t)},n.compression=8,n}(),kJe=function(){function n(e){this.onfile=e,this.k=[],this.o={0:yae},this.p=Jd}return n.prototype.push=function(e,t){var i=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),s=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(r),e.length)return this.push(e,t)}else{var a=0,o=0,l=void 0,c=void 0;this.p.length?e.length?(c=new tr(this.p.length+e.length),c.set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var u=c.length,d=this.c,f=d&&this.d,h=function(){var g,y=Ds(c,o);if(y==67324752){a=1,l=o,p.d=null,p.c=0;var x=vo(c,o+6),b=vo(c,o+8),A=x&2048,S=x&8,C=vo(c,o+26),_=vo(c,o+28);if(u>o+30+C+_){var M=[];p.k.unshift(M),a=2;var T=Ds(c,o+18),E=Ds(c,o+22),I=sB(c.subarray(o+30,o+=30+C),!A);T==4294967295?(g=S?[-2]:gae(c,o),T=g[0],E=g[1]):S&&(T=-1),o+=_,p.c=T;var L,F={name:I,compression:b,start:function(){if(!F.ondata)throw"no callback";if(!T)F.ondata(null,Jd,!0);else{var B=i.o[b];if(!B)throw"unknown compression type "+b;L=T<0?new B(I):new B(I,T,E),L.ondata=function(N,H,q){F.ondata(N,H,q)};for(var P=0,z=M;P<z.length;P++){var O=z[P];L.push(O,!1)}i.k[0]==M&&i.c?i.d=L:L.push(Jd,!0)}},terminate:function(){L&&L.terminate&&L.terminate()}};T>=0&&(F.size=T,F.originalSize=E),p.onfile(F)}return"break"}else if(d){if(y==134695760)return l=o+=12+(d==-2&&8),a=3,p.c=0,"break";if(y==33639248)return l=o-=4,a=3,p.c=0,"break"}},p=this;o<u-4;++o){var m=h();if(m==="break")break}if(this.p=Jd,d<0){var v=a?c.subarray(0,l-12-(d==-2&&8)-(Ds(c,l-16)==134695760&&4)):c.subarray(0,o);f?f.push(v,!!a):this.k[+(a==2)].push(v)}if(a&2)return this.push(c.subarray(o),t);this.p=c.subarray(o)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function FJe(n,e){if(typeof e!="function")throw"no callback";for(var t=[],i=function(){for(var f=0;f<t.length;++f)t[f]()},r={},s=n.length-22;Ds(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var a=vo(n,s+8);a||e(null,{});var o=a,l=Ds(n,s+16),c=l==4294967295;if(c){if(s=Ds(n,s-12),Ds(n,s)!=101075792){e("invalid zip file",null);return}o=a=Ds(n,s+32),l=Ds(n,s+48)}for(var u=function(f){var h=vae(n,l,c),p=h[0],m=h[1],v=h[2],g=h[3],y=h[4],x=h[5],b=mae(n,x);l=y;var A=function(C,_){C?(i(),e(C,null)):(r[g]=_,--a||e(null,r))};if(!p)A(null,dc(n,b,b+m));else if(p==8){var S=n.subarray(b,b+m);if(m<32e4)try{A(null,Ly(S,new tr(v)))}catch(C){A(C,null)}else t.push(iB(S,{size:v},A))}else A("unknown compression type "+p,null)},d=0;d<o;++d)u();return i}function BJe(n){for(var e={},t=n.length-22;Ds(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var i=vo(n,t+8);if(!i)return{};var r=Ds(n,t+16),s=r==4294967295;if(s){if(t=Ds(n,t-12),Ds(n,t)!=101075792)throw"invalid zip file";i=Ds(n,t+32),r=Ds(n,t+48)}for(var a=0;a<i;++a){var o=vae(n,r,s),l=o[0],c=o[1],u=o[2],d=o[3],f=o[4],h=o[5],p=mae(n,h);if(r=f,!l)e[d]=dc(n,p,p+c);else if(l==8)e[d]=Ly(n.subarray(p,p+c),new tr(u));else throw"unknown compression type "+l}return e}var NJe=Object.freeze(Object.defineProperty({__proto__:null,Deflate:td,AsyncDeflate:sae,deflate:aae,deflateSync:zA,Inflate:Qo,AsyncInflate:nB,inflate:iB,inflateSync:Ly,Gzip:E4,AsyncGzip:dK,gzip:fK,gzipSync:I4,Gunzip:D4,AsyncGunzip:oae,gunzip:lae,gunzipSync:R4,Zlib:aP,AsyncZlib:xJe,zlib:AJe,zlibSync:oP,Unzlib:P4,AsyncUnzlib:cae,unzlib:uae,unzlibSync:Qx,compress:fK,AsyncCompress:dK,compressSync:I4,Compress:E4,Decompress:dae,AsyncDecompress:wJe,decompress:SJe,decompressSync:_Je,DecodeUTF8:CJe,EncodeUTF8:MJe,strToU8:gp,strFromU8:sB,ZipPassThrough:Zx,ZipDeflate:TJe,AsyncZipDeflate:EJe,Zip:IJe,zip:DJe,zipSync:RJe,UnzipPassThrough:yae,UnzipInflate:PJe,AsyncUnzipInflate:LJe,Unzip:kJe,unzip:FJe,unzipSync:BJe},Symbol.toStringTag,{value:"Module"}));function bae(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,a=Math.floor((r+s)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function OJe(n,e,t,i){const r=[],s=[],a=[];r[0]=1;for(let o=1;o<=t;++o){s[o]=e-i[n+1-o],a[o]=i[n+o]-e;let l=0;for(let c=0;c<o;++c){const u=a[c+1],d=s[o-c],f=r[c]/(u+d);r[c]=l+u*f,l=d*f}r[o]=l}return r}function UJe(n,e,t,i){const r=bae(n,i,e),s=OJe(r,i,n,e),a=new gr(0,0,0,0);for(let o=0;o<=n;++o){const l=t[r-n+o],c=s[o],u=l.w*c;a.x+=l.x*u,a.y+=l.y*u,a.z+=l.z*u,a.w+=l.w*c}return a}function zJe(n,e,t,i,r){const s=[];for(let d=0;d<=t;++d)s[d]=0;const a=[];for(let d=0;d<=i;++d)a[d]=s.slice(0);const o=[];for(let d=0;d<=t;++d)o[d]=s.slice(0);o[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let d=1;d<=t;++d){l[d]=e-r[n+1-d],c[d]=r[n+d]-e;let f=0;for(let h=0;h<d;++h){const p=c[h+1],m=l[d-h];o[d][h]=p+m;const v=o[h][d-1]/o[d][h];o[h][d]=f+p*v,f=m*v}o[d][d]=f}for(let d=0;d<=t;++d)a[0][d]=o[d][t];for(let d=0;d<=t;++d){let f=0,h=1;const p=[];for(let m=0;m<=t;++m)p[m]=s.slice(0);p[0][0]=1;for(let m=1;m<=i;++m){let v=0;const g=d-m,y=t-m;d>=m&&(p[h][0]=p[f][0]/o[y+1][g],v=p[h][0]*o[g][y]);const x=g>=-1?1:-g,b=d-1<=y?m-1:t-d;for(let S=x;S<=b;++S)p[h][S]=(p[f][S]-p[f][S-1])/o[y+1][g+S],v+=p[h][S]*o[g+S][y];d<=y&&(p[h][m]=-p[f][m-1]/o[y+1][d],v+=p[h][m]*o[d][y]),a[m][d]=v;const A=f;f=h,h=A}}let u=t;for(let d=1;d<=i;++d){for(let f=0;f<=t;++f)a[d][f]*=u;u*=t-d}return a}function VJe(n,e,t,i,r){const s=r<n?r:n,a=[],o=bae(n,i,e),l=zJe(o,i,n,s,e),c=[];for(let u=0;u<t.length;++u){const d=t[u].clone(),f=d.w;d.x*=f,d.y*=f,d.z*=f,c[u]=d}for(let u=0;u<=s;++u){const d=c[o-n].clone().multiplyScalar(l[u][0]);for(let f=1;f<=n;++f)d.add(c[o-n+f].clone().multiplyScalar(l[u][f]));a[u]=d}for(let u=s+1;u<=r+1;++u)a[u]=new gr(0,0,0);return a}function HJe(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function GJe(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const a=n[s];t[s]=new $e(a.x,a.y,a.z),i[s]=a.w}const r=[];for(let s=0;s<e;++s){const a=t[s].clone();for(let o=1;o<=s;++o)a.sub(r[s-o].clone().multiplyScalar(HJe(s,o)*i[o]));r[s]=a.divideScalar(i[0])}return r}function WJe(n,e,t,i,r){const s=VJe(n,e,t,i,r);return GJe(s)}class pK extends pu{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<i.length;++a){const o=i[a];this.controlPoints[a]=new gr(o.x,o.y,o.z,o.w)}}getPoint(e,t=new $e){const i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=UJe(this.degree,this.knots,this.controlPoints,r);return s.w!==1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t=new $e){const i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=WJe(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let qi,Cs,ko;class qJe extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?Ja.extractUrlBase(e):s.path,o=new to(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(QJe(e))qi=new $Je().parse(e);else{const r=Sae(e);if(!ZJe(r))throw new Error("THREE.FBXLoader: Unknown format.");if(vK(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+vK(r));qi=new jJe().parse(r)}const i=new z1(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new KJe(i,this.manager).parse(qi)}}class KJe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Cs=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new YJe().parse(r);return this.parseScene(r,s,i),ko}parseConnections(){const e=new Map;return"Connections"in qi&&qi.Connections.connections.forEach(function(i){const r=i[0],s=i[1],a=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const o={ID:s,relationship:a};e.get(r).parents.push(o),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:a};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in qi.Objects){const i=qi.Objects.Video;for(const r in i){const s=i[r],a=parseInt(r);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(o||l){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in qi.Objects){const i=qi.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=r!==void 0?r.value:0,o=s!==void 0?s.value:0;if(i.wrapS=a===0?Ko:$s,i.wrapT=o===0?Ko:$s,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=Cs.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const o=e.FileName.slice(-3).toLowerCase();if(o==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new Pa):(l.setPath(this.textureLoader.path),a=l.load(i))}else o==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new Pa):a=this.textureLoader.load(i);return this.textureLoader.setPath(r),a}parseMaterials(e){const t=new Map;if("Material"in qi.Objects){const i=qi.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Cs.has(i))return null;const a=this.parseParameters(e,t,i);let o;switch(s.toLowerCase()){case"phong":o=new of;break;case"lambert":o=new GF;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new of;break}return o.setValues(a),o.name=r,o}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new wn().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new wn().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new wn().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new wn().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new wn().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new wn().fromArray(e.SpecularColor.value));const s=this;return Cs.get(i).children.forEach(function(a){const o=a.relationship;switch(o){case"Bump":r.bumpMap=s.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,a.ID),r.map!==void 0&&(r.map.encoding=Ni);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,a.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,a.ID),r.emissiveMap!==void 0&&(r.emissiveMap.encoding=Ni);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,a.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,a.ID),r.envMap!==void 0&&(r.envMap.mapping=Nx,r.envMap.encoding=Ni);break;case"SpecularColor":r.specularMap=s.getTexture(t,a.ID),r.specularMap!==void 0&&(r.specularMap.encoding=Ni);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,a.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),r}getTexture(e,t){return"LayeredTexture"in qi.Objects&&t in qi.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Cs.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in qi.Objects){const i=qi.Objects.Deformer;for(const r in i){const s=i[r],a=Cs.get(parseInt(r));if(s.attrType==="Skin"){const o=this.parseSkeleton(a,i);o.ID=r,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[r]=o}else if(s.attrType==="BlendShape"){const o={id:r};o.rawTargets=this.parseMorphTargets(a,i),o.id=r,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const a={ID:r.ID,indices:[],weights:[],transformLink:new qn().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),i.push(a)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],a=t[s.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;o.geoID=Cs.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(o)}return i}parseScene(e,t,i){ko=new Yo;const r=this.parseModels(e.skeletons,t,i),s=qi.Objects.Model,a=this;r.forEach(function(l){const c=s[l.ID];a.setLookAtProperties(l,c),Cs.get(l.ID).parents.forEach(function(d){const f=r.get(d.ID);f!==void 0&&f.add(l)}),l.parent===null&&ko.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),ko.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=Aae(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const o=new XJe().parse();ko.children.length===1&&ko.children[0].isGroup&&(ko.children[0].animations=o,ko=ko.children[0]),ko.animations=o}parseModels(e,t,i){const r=new Map,s=qi.Objects.Model;for(const a in s){const o=parseInt(a),l=s[a],c=Cs.get(o);let u=this.buildSkeleton(c,e,o,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new N1;break;case"Null":default:u=new Yo;break}u.name=l.attrName?ar.sanitizeNodeName(l.attrName):"",u.ID=o}this.getTransformData(u,l),r.set(o,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(a){for(const o in t){const l=t[o];l.rawBones.forEach(function(c,u){if(c.ID===a.ID){const d=s;s=new N1,s.matrixWorld.copy(c.transformLink),s.name=r?ar.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=qi.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new ps;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let a=1e3;i.FarPlane!==void 0&&(a=i.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(o=i.AspectWidth.value,l=i.AspectHeight.value);const c=o/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new Xs(u,c,s,a),d!==null&&t.setFocalLength(d);break;case 1:t=new by(-o/2,o/2,l/2,-l/2,s,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new ps;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=qi.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new ps;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new wn().fromArray(i.Color.value));let a=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(a=0);let o=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?o=0:o=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new _m(s,a,o,l);break;case 1:t=new BA(s,a);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=$a.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=$a.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new vT(s,a,o,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new _m(s,a);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,a=null;const o=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&o.push(i.get(l.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new of({color:13421772}),o.push(a)),"color"in s.attributes&&o.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new pT(s,a),r.normalizeSkinWeights()):r=new Qs(s,a),r}createCurve(e,t){const i=e.children.reduce(function(s,a){return t.has(a.ID)&&(s=t.get(a.ID)),s},null),r=new Jc({color:3342591,linewidth:1});return new wy(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=wae(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Cs.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=qi.Objects.Model[r.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),ko.add(e.target)):e.lookAt(new $e().fromArray(a))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const a=e[s];Cs.get(parseInt(a.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;Cs.get(c).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new Ay(a.bones),r[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in qi.Objects){const t=qi.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new qn().fromArray(s.Matrix.a)}):e[r.Node]=new qn().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in qi&&"AmbientColor"in qi.GlobalSettings){const e=qi.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new wn(t,i,r);ko.add(new gT(s,1))}}}}class YJe{parse(e){const t=new Map;if("Geometry"in qi.Objects){const i=qi.Objects.Geometry;for(const r in i){const s=Cs.get(parseInt(r)),a=this.parseGeometry(s,i[r],e);t.set(parseInt(r),a)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],a=e.parents.map(function(d){return qi.Objects.Model[d.ID]});if(a.length===0)return;const o=e.children.reduce(function(d,f){return r[f.ID]!==void 0&&(d=r[f.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&s.push(i.morphTargets[d.ID])});const l=a[0],c={};"RotationOrder"in l&&(c.eulerOrder=wae(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=Aae(c);return this.genGeometry(t,o,s,u)}genGeometry(e,t,i,r){const s=new $i;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,t),o=this.genBuffers(a),l=new Dn(o.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),o.colors.length>0&&s.setAttribute("color",new Dn(o.colors,3)),t&&(s.setAttribute("skinIndex",new IF(o.weightsIndices,4)),s.setAttribute("skinWeight",new Dn(o.vertexWeights,4)),s.FBX_Deformer=t),o.normal.length>0){const c=new rc().getNormalMatrix(r),u=new Dn(o.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(o.uvs.forEach(function(c,u){let d="uv"+(u+1).toString();u===0&&(d="uv"),s.setAttribute(d,new Dn(o.uvs[u],2))}),a.material&&a.material.mappingType!=="AllSame"){let c=o.materialIndex[0],u=0;if(o.materialIndex.forEach(function(d,f){d!==c&&(s.addGroup(u,f-u,c),c=d,u=f)}),s.groups.length>0){const d=s.groups[s.groups.length-1],f=d.start+d.count;f!==o.materialIndex.length&&s.addGroup(f,o.materialIndex.length-f,c)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(a,o){i.weightTable[a]===void 0&&(i.weightTable[a]=[]),i.weightTable[a].push({id:s,weight:r.weights[o]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,a=[],o=[],l=[],c=[],u=[],d=[];const f=this;return e.vertexIndices.forEach(function(h,p){let m,v=!1;h<0&&(h=h^-1,v=!0);let g=[],y=[];if(a.push(h*3,h*3+1,h*3+2),e.color){const x=XS(p,i,h,e.color);l.push(x[0],x[1],x[2])}if(e.skeleton){if(e.weightTable[h]!==void 0&&e.weightTable[h].forEach(function(x){y.push(x.weight),g.push(x.id)}),y.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const x=[0,0,0,0],b=[0,0,0,0];y.forEach(function(A,S){let C=A,_=g[S];b.forEach(function(M,T,E){if(C>M){E[T]=C,C=M;const I=x[T];x[T]=_,_=I}})}),g=x,y=b}for(;y.length<4;)y.push(0),g.push(0);for(let x=0;x<4;++x)u.push(y[x]),d.push(g[x])}if(e.normal){const x=XS(p,i,h,e.normal);o.push(x[0],x[1],x[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=XS(p,i,h,e.material)[0]),e.uv&&e.uv.forEach(function(x,b){const A=XS(p,i,h,x);c[b]===void 0&&(c[b]=[]),c[b].push(A[0]),c[b].push(A[1])}),r++,v&&(f.genFace(t,e,a,m,o,l,c,u,d,r),i++,r=0,a=[],o=[],l=[],c=[],u=[],d=[])}),t}genFace(e,t,i,r,s,a,o,l,c,u){for(let d=2;d<u;d++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(d-1)*3]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[i[d*3]]),e.vertex.push(t.vertexPositions[i[d*3+1]]),e.vertex.push(t.vertexPositions[i[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(d-1)*3]),e.colors.push(a[(d-1)*3+1]),e.colors.push(a[(d-1)*3+2]),e.colors.push(a[d*3]),e.colors.push(a[d*3+1]),e.colors.push(a[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(f,h){e.uvs[h]===void 0&&(e.uvs[h]=[]),e.uvs[h].push(o[h][0]),e.uvs[h].push(o[h][1]),e.uvs[h].push(o[h][(d-1)*2]),e.uvs[h].push(o[h][(d-1)*2+1]),e.uvs[h].push(o[h][d*2]),e.uvs[h].push(o[h][d*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(a){a.rawTargets.forEach(function(o){const l=qi.Objects.Geometry[o.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,o.name)})})}genMorphGeometry(e,t,i,r,s){const a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],o=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let p=0;p<l.length;p++){const m=l[p]*3;u[m]=o[p*3],u[m+1]=o[p*3+1],u[m+2]=o[p*3+2]}const d={vertexIndices:a,vertexPositions:u},f=this.genBuffers(d),h=new Dn(f.vertex,3);h.name=s||i.attrName,h.applyMatrix4(r),e.morphAttributes.position.push(h)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let a=0;a<r.length;++a)s.push(a);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(pK===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new $i;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new $i;const i=t-1,r=e.KnotVector.a,s=[],a=e.Points.a;for(let d=0,f=a.length;d<f;d+=4)s.push(new gr().fromArray(a,d));let o,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=i,l=r.length-1-o;for(let d=0;d<i;++d)s.push(s[d])}const u=new pK(i,r,s,o,l).getPoints(s.length*12);return new $i().setFromPoints(u)}}class XJe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(qi.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=qi.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=qi.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(JJe),values:t[i].KeyValueFloat.a},s=Cs.get(r.id);if(s!==void 0){const a=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=r:o.match(/Y/)?e.get(a).curves.y=r:o.match(/Z/)?e.get(a).curves.z=r:o.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=r)}}}parseAnimationLayers(e){const t=qi.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],a=Cs.get(parseInt(r));a!==void 0&&(a.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const d=Cs.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(d!==void 0){const f=qi.Objects.Model[d.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const h={modelName:f.attrName?ar.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ko.traverse(function(p){p.ID===f.id&&(h.transform=p.matrix,p.userData.transformData&&(h.eulerOrder=p.userData.transformData.eulerOrder))}),h.transform||(h.transform=new qn),"PreRotation"in f&&(h.preRotation=f.PreRotation.value),"PostRotation"in f&&(h.postRotation=f.PostRotation.value),s[c]=h}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const d=Cs.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,f=Cs.get(d).parents[0].ID,h=Cs.get(f).parents[0].ID,p=Cs.get(h).parents[0].ID,m=qi.Objects.Model[p],v={modelName:m.attrName?ar.sanitizeNodeName(m.attrName):"",morphName:qi.Objects.Deformer[d].attrName};s[c]=v}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=qi.Objects.AnimationStack,i={};for(const r in t){const s=Cs.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:a}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Sm(e.name,-1,t)}generateTracks(e){const t=[];let i=new $e,r=new Ta,s=new $e;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new Zd().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");a!==void 0&&t.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&t.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");a!==void 0&&t.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&t.push(a)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,i);return new vp(e+"."+r,s,a)}generateRotationTrack(e,t,i,r,s,a){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map($a.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map($a.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map($a.degToRad));const o=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(o,t,i);r!==void 0&&(r=r.map($a.degToRad),r.push(a),r=new Zd().fromArray(r),r=new Ta().setFromEuler(r)),s!==void 0&&(s=s.map($a.degToRad),s.push(a),s=new Zd().fromArray(s),s=new Ta().setFromEuler(s).invert());const c=new Ta,u=new Zd,d=[];for(let f=0;f<l.length;f+=3)u.set(l[f],l[f+1],l[f+2],a),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(d,f/3*4);return new bf(e+".quaternion",o,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=ko.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new O1(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const a=t[s];a!==r&&(t[i]=a,r=a,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let a=-1,o=-1,l=-1;return e.forEach(function(c){if(t.x&&(a=t.x.times.indexOf(c)),t.y&&(o=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),a!==-1){const u=t.x.values[a];s.push(u),r[0]=u}else s.push(r[0]);if(o!==-1){const u=t.y.values[o];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const a=s/180,o=r/a;let l=i+o;const c=e.times[t-1],d=(e.times[t]-c)/a;let f=c+d;const h=[],p=[];for(;f<e.times[t];)h.push(f),f+=d,p.push(l),l+=o;e.times=gK(e.times,t,h),e.values=gK(e.values,t,p)}}}}class jJe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new xae,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const a=r.match(/^[\s\t]*;/),o=r.match(/^[\s\t]*$/);if(a||o)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},a=this.parseNodeAttr(r),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in o?(i==="PoseNode"?o.PoseNode.push(s):o[i].id!==void 0&&(o[i]={},o[i][o[i].id]=o[i]),a.id!==""&&(o[i][a.id]=s)):typeof a.id=="number"?(o[i]={},o[i][a.id]=s):i!=="Properties70"&&(i==="PoseNode"?o[i]=[s]:o[i]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(f){return f.trim().replace(/^"/,"")}),r="connections",s=[c,u],tet(s,d),a[r]===void 0&&(a[r]=[])}r==="Node"&&(a.id=s),r in a&&Array.isArray(a[r])?a[r].push(s):r!=="a"?a[r]=s:a.a=s,this.setCurrentProp(a,r),r==="a"&&s.slice(-1)!==","&&(a.a=sI(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=sI(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],a=r[1],o=r[2],l=r[3];let c=r[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=sI(c);break}this.getPrevNode()[s]={type:a,type2:o,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class $Je{parse(e){const t=new mK(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new xae;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),o=e.getString(a);if(r===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(o,i,f)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),d!==""&&(i.attrType=d),o!==""&&(i.name=o),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,a){a!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const a=i.propertyList[2],o=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:a,flag:o,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof NJe>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const o=Qx(new Uint8Array(e.getArrayBuffer(a))),l=new mK(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class mK{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),Ja.decodeText(new Uint8Array(t))}}class xae{add(e,t){this[e]=t}}function QJe(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===Sae(n,0,e.length)}function ZJe(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function vK(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function JJe(n){return n/46186158e3}const eet=[];function XS(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,a=s+i.dataSize;return net(eet,i.buffer,s,a)}const rI=new Zd,Lv=new $e;function Aae(n){const e=new qn,t=new qn,i=new qn,r=new qn,s=new qn,a=new qn,o=new qn,l=new qn,c=new qn,u=new qn,d=new qn,f=new qn,h=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Lv.fromArray(n.translation)),n.preRotation){const T=n.preRotation.map($a.degToRad);T.push(n.eulerOrder),t.makeRotationFromEuler(rI.fromArray(T))}if(n.rotation){const T=n.rotation.map($a.degToRad);T.push(n.eulerOrder),i.makeRotationFromEuler(rI.fromArray(T))}if(n.postRotation){const T=n.postRotation.map($a.degToRad);T.push(n.eulerOrder),r.makeRotationFromEuler(rI.fromArray(T)),r.invert()}n.scale&&s.scale(Lv.fromArray(n.scale)),n.scalingOffset&&o.setPosition(Lv.fromArray(n.scalingOffset)),n.scalingPivot&&a.setPosition(Lv.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Lv.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(Lv.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const p=t.clone().multiply(i).multiply(r),m=new qn;m.extractRotation(u);const v=new qn;v.copyPosition(u);const g=v.clone().invert().multiply(u),y=m.clone().invert().multiply(g),x=s,b=new qn;if(h===0)b.copy(m).multiply(p).multiply(y).multiply(x);else if(h===1)b.copy(m).multiply(y).multiply(p).multiply(x);else{const E=new qn().scale(new $e().setFromMatrixScale(d)).clone().invert(),I=y.clone().multiply(E);b.copy(m).multiply(p).multiply(I).multiply(x)}const A=c.clone().invert(),S=a.clone().invert();let C=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(r).multiply(A).multiply(o).multiply(a).multiply(s).multiply(S);const _=new qn().copyPosition(C),M=u.clone().multiply(_);return f.copyPosition(M),C=f.clone().multiply(b),C.premultiply(u.invert()),C}function wae(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function sI(n){return n.split(",").map(function(t){return parseFloat(t)})}function Sae(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),Ja.decodeText(new Uint8Array(n,e,t))}function tet(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function net(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function gK(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class cP extends GZe{constructor(e){super(e)}parse(e){function t(P){switch(P.image_type){case f:case m:(P.colormap_length>256||P.colormap_size!==24||P.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case h:case p:case v:case g:P.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case d:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',P.image_type)}(P.width<=0||P.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),P.pixel_size!==8&&P.pixel_size!==16&&P.pixel_size!==24&&P.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',P.pixel_size)}function i(P,z,O,N,H){let q,te;const Q=O.pixel_size>>3,ee=O.width*O.height*Q;if(z&&(te=H.subarray(N,N+=O.colormap_length*(O.colormap_size>>3))),P){q=new Uint8Array(ee);let de,J,ue,Te=0;const De=new Uint8Array(Q);for(;Te<ee;)if(de=H[N++],J=(de&127)+1,de&128){for(ue=0;ue<Q;++ue)De[ue]=H[N++];for(ue=0;ue<J;++ue)q.set(De,Te+ue*Q);Te+=Q*J}else{for(J*=Q,ue=0;ue<J;++ue)q[Te+ue]=H[N++];Te+=J}}else q=H.subarray(N,N+=z?O.width*O.height:ee);return{pixel_data:q,palettes:te}}function r(P,z,O,N,H,q,te,Q,ee){const de=ee;let J,ue=0,Te,De;const Le=T.width;for(De=z;De!==N;De+=O)for(Te=H;Te!==te;Te+=q,ue++)J=Q[ue],P[(Te+Le*De)*4+3]=255,P[(Te+Le*De)*4+2]=de[J*3+0],P[(Te+Le*De)*4+1]=de[J*3+1],P[(Te+Le*De)*4+0]=de[J*3+2];return P}function s(P,z,O,N,H,q,te,Q){let ee,de=0,J,ue;const Te=T.width;for(ue=z;ue!==N;ue+=O)for(J=H;J!==te;J+=q,de+=2)ee=Q[de+0]+(Q[de+1]<<8),P[(J+Te*ue)*4+0]=(ee&31744)>>7,P[(J+Te*ue)*4+1]=(ee&992)>>2,P[(J+Te*ue)*4+2]=(ee&31)<<3,P[(J+Te*ue)*4+3]=ee&32768?0:255;return P}function a(P,z,O,N,H,q,te,Q){let ee=0,de,J;const ue=T.width;for(J=z;J!==N;J+=O)for(de=H;de!==te;de+=q,ee+=3)P[(de+ue*J)*4+3]=255,P[(de+ue*J)*4+2]=Q[ee+0],P[(de+ue*J)*4+1]=Q[ee+1],P[(de+ue*J)*4+0]=Q[ee+2];return P}function o(P,z,O,N,H,q,te,Q){let ee=0,de,J;const ue=T.width;for(J=z;J!==N;J+=O)for(de=H;de!==te;de+=q,ee+=4)P[(de+ue*J)*4+2]=Q[ee+0],P[(de+ue*J)*4+1]=Q[ee+1],P[(de+ue*J)*4+0]=Q[ee+2],P[(de+ue*J)*4+3]=Q[ee+3];return P}function l(P,z,O,N,H,q,te,Q){let ee,de=0,J,ue;const Te=T.width;for(ue=z;ue!==N;ue+=O)for(J=H;J!==te;J+=q,de++)ee=Q[de],P[(J+Te*ue)*4+0]=ee,P[(J+Te*ue)*4+1]=ee,P[(J+Te*ue)*4+2]=ee,P[(J+Te*ue)*4+3]=255;return P}function c(P,z,O,N,H,q,te,Q){let ee=0,de,J;const ue=T.width;for(J=z;J!==N;J+=O)for(de=H;de!==te;de+=q,ee+=2)P[(de+ue*J)*4+0]=Q[ee+0],P[(de+ue*J)*4+1]=Q[ee+0],P[(de+ue*J)*4+2]=Q[ee+0],P[(de+ue*J)*4+3]=Q[ee+1];return P}function u(P,z,O,N,H){let q,te,Q,ee,de,J;switch((T.flags&y)>>x){default:case S:q=0,Q=1,de=z,te=0,ee=1,J=O;break;case b:q=0,Q=1,de=z,te=O-1,ee=-1,J=-1;break;case C:q=z-1,Q=-1,de=-1,te=0,ee=1,J=O;break;case A:q=z-1,Q=-1,de=-1,te=O-1,ee=-1,J=-1;break}if(L)switch(T.pixel_size){case 8:l(P,te,ee,J,q,Q,de,N);break;case 16:c(P,te,ee,J,q,Q,de,N);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(T.pixel_size){case 8:r(P,te,ee,J,q,Q,de,N,H);break;case 16:s(P,te,ee,J,q,Q,de,N);break;case 24:a(P,te,ee,J,q,Q,de,N);break;case 32:o(P,te,ee,J,q,Q,de,N);break;default:console.error("THREE.TGALoader: Format not supported.");break}return P}const d=0,f=1,h=2,p=3,m=9,v=10,g=11,y=48,x=4,b=0,A=1,S=2,C=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let _=0;const M=new Uint8Array(e),T={id_length:M[_++],colormap_type:M[_++],image_type:M[_++],colormap_index:M[_++]|M[_++]<<8,colormap_length:M[_++]|M[_++]<<8,colormap_size:M[_++],origin:[M[_++]|M[_++]<<8,M[_++]|M[_++]<<8],width:M[_++]|M[_++]<<8,height:M[_++]|M[_++]<<8,pixel_size:M[_++],flags:M[_++]};t(T),T.id_length+_>e.length&&console.error("THREE.TGALoader: No data."),_+=T.id_length;let E=!1,I=!1,L=!1;switch(T.image_type){case m:E=!0,I=!0;break;case f:I=!0;break;case v:E=!0;break;case h:break;case g:E=!0,L=!0;break;case p:L=!0;break}const F=new Uint8Array(T.width*T.height*4),B=i(E,I,T,_,M);return u(F,T.width,T.height,B.pixel_data,B.palettes),{data:F,width:T.width,height:T.height,flipY:!0,generateMipmaps:!0,minFilter:Pf}}}class iet extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?Ja.extractUrlBase(e):s.path,o=new to(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){function i(Se,xe){const Ue=[],Pe=Se.childNodes;for(let ze=0,Lt=Pe.length;ze<Lt;ze++){const Ot=Pe[ze];Ot.nodeName===xe&&Ue.push(Ot)}return Ue}function r(Se){if(Se.length===0)return[];const xe=Se.trim().split(/\s+/),Ue=new Array(xe.length);for(let Pe=0,ze=xe.length;Pe<ze;Pe++)Ue[Pe]=xe[Pe];return Ue}function s(Se){if(Se.length===0)return[];const xe=Se.trim().split(/\s+/),Ue=new Array(xe.length);for(let Pe=0,ze=xe.length;Pe<ze;Pe++)Ue[Pe]=parseFloat(xe[Pe]);return Ue}function a(Se){if(Se.length===0)return[];const xe=Se.trim().split(/\s+/),Ue=new Array(xe.length);for(let Pe=0,ze=xe.length;Pe<ze;Pe++)Ue[Pe]=parseInt(xe[Pe]);return Ue}function o(Se){return Se.substring(1)}function l(){return"three_default_"+wc++}function c(Se){return Object.keys(Se).length===0}function u(Se){return{unit:d(i(Se,"unit")[0]),upAxis:f(i(Se,"up_axis")[0])}}function d(Se){return Se!==void 0&&Se.hasAttribute("meter")===!0?parseFloat(Se.getAttribute("meter")):1}function f(Se){return Se!==void 0?Se.textContent:"Y_UP"}function h(Se,xe,Ue,Pe){const ze=i(Se,xe)[0];if(ze!==void 0){const Lt=i(ze,Ue);for(let Ot=0;Ot<Lt.length;Ot++)Pe(Lt[Ot])}}function p(Se,xe){for(const Ue in Se){const Pe=Se[Ue];Pe.build=xe(Se[Ue])}}function m(Se,xe){return Se.build!==void 0||(Se.build=xe(Se)),Se.build}function v(Se){const xe={sources:{},samplers:{},channels:{}};let Ue=!1;for(let Pe=0,ze=Se.childNodes.length;Pe<ze;Pe++){const Lt=Se.childNodes[Pe];if(Lt.nodeType!==1)continue;let Ot;switch(Lt.nodeName){case"source":Ot=Lt.getAttribute("id"),xe.sources[Ot]=it(Lt);break;case"sampler":Ot=Lt.getAttribute("id"),xe.samplers[Ot]=g(Lt);break;case"channel":Ot=Lt.getAttribute("target"),xe.channels[Ot]=y(Lt);break;case"animation":v(Lt),Ue=!0;break;default:console.log(Lt)}}Ue===!1&&(ui.animations[Se.getAttribute("id")||$a.generateUUID()]=xe)}function g(Se){const xe={inputs:{}};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"input":const Lt=o(ze.getAttribute("source")),Ot=ze.getAttribute("semantic");xe.inputs[Ot]=Lt;break}}return xe}function y(Se){const xe={};let Pe=Se.getAttribute("target").split("/");const ze=Pe.shift();let Lt=Pe.shift();const Ot=Lt.indexOf("(")!==-1,Ln=Lt.indexOf(".")!==-1;if(Ln)Pe=Lt.split("."),Lt=Pe.shift(),xe.member=Pe.shift();else if(Ot){const ot=Lt.split("(");Lt=ot.shift();for(let un=0;un<ot.length;un++)ot[un]=parseInt(ot[un].replace(/\)/,""));xe.indices=ot}return xe.id=ze,xe.sid=Lt,xe.arraySyntax=Ot,xe.memberSyntax=Ln,xe.sampler=o(Se.getAttribute("source")),xe}function x(Se){const xe=[],Ue=Se.channels,Pe=Se.samplers,ze=Se.sources;for(const Lt in Ue)if(Ue.hasOwnProperty(Lt)){const Ot=Ue[Lt],Ln=Pe[Ot.sampler],ot=Ln.inputs.INPUT,un=Ln.inputs.OUTPUT,Gn=ze[ot],tn=ze[un],ii=A(Ot,Gn,tn);T(ii,xe)}return xe}function b(Se){return m(ui.animations[Se],x)}function A(Se,xe,Ue){const Pe=ui.nodes[Se.id],ze=ni(Pe.id),Lt=Pe.transforms[Se.sid],Ot=Pe.matrix.clone().transpose();let Ln,ot,un,Gn,tn,ii;const zn={};switch(Lt){case"matrix":for(un=0,Gn=xe.array.length;un<Gn;un++)if(Ln=xe.array[un],ot=un*Ue.stride,zn[Ln]===void 0&&(zn[Ln]={}),Se.arraySyntax===!0){const Pr=Ue.array[ot],rn=Se.indices[0]+4*Se.indices[1];zn[Ln][rn]=Pr}else for(tn=0,ii=Ue.stride;tn<ii;tn++)zn[Ln][tn]=Ue.array[ot+tn];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Lt);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Lt);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Lt);break}const si=S(zn,Ot);return{name:ze.uuid,keyframes:si}}function S(Se,xe){const Ue=[];for(const ze in Se)Ue.push({time:parseFloat(ze),value:Se[ze]});Ue.sort(Pe);for(let ze=0;ze<16;ze++)E(Ue,ze,xe.elements[ze]);return Ue;function Pe(ze,Lt){return ze.time-Lt.time}}const C=new $e,_=new $e,M=new Ta;function T(Se,xe){const Ue=Se.keyframes,Pe=Se.name,ze=[],Lt=[],Ot=[],Ln=[];for(let ot=0,un=Ue.length;ot<un;ot++){const Gn=Ue[ot],tn=Gn.time,ii=Gn.value;Ze.fromArray(ii).transpose(),Ze.decompose(C,M,_),ze.push(tn),Lt.push(C.x,C.y,C.z),Ot.push(M.x,M.y,M.z,M.w),Ln.push(_.x,_.y,_.z)}return Lt.length>0&&xe.push(new vp(Pe+".position",ze,Lt)),Ot.length>0&&xe.push(new bf(Pe+".quaternion",ze,Ot)),Ln.length>0&&xe.push(new vp(Pe+".scale",ze,Ln)),xe}function E(Se,xe,Ue){let Pe,ze=!0,Lt,Ot;for(Lt=0,Ot=Se.length;Lt<Ot;Lt++)Pe=Se[Lt],Pe.value[xe]===void 0?Pe.value[xe]=null:ze=!1;if(ze===!0)for(Lt=0,Ot=Se.length;Lt<Ot;Lt++)Pe=Se[Lt],Pe.value[xe]=Ue;else I(Se,xe)}function I(Se,xe){let Ue,Pe;for(let ze=0,Lt=Se.length;ze<Lt;ze++){const Ot=Se[ze];if(Ot.value[xe]===null){if(Ue=L(Se,ze,xe),Pe=F(Se,ze,xe),Ue===null){Ot.value[xe]=Pe.value[xe];continue}if(Pe===null){Ot.value[xe]=Ue.value[xe];continue}B(Ot,Ue,Pe,xe)}}}function L(Se,xe,Ue){for(;xe>=0;){const Pe=Se[xe];if(Pe.value[Ue]!==null)return Pe;xe--}return null}function F(Se,xe,Ue){for(;xe<Se.length;){const Pe=Se[xe];if(Pe.value[Ue]!==null)return Pe;xe++}return null}function B(Se,xe,Ue,Pe){if(Ue.time-xe.time===0){Se.value[Pe]=xe.value[Pe];return}Se.value[Pe]=(Se.time-xe.time)*(Ue.value[Pe]-xe.value[Pe])/(Ue.time-xe.time)+xe.value[Pe]}function P(Se){const xe={name:Se.getAttribute("id")||"default",start:parseFloat(Se.getAttribute("start")||0),end:parseFloat(Se.getAttribute("end")||0),animations:[]};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"instance_animation":xe.animations.push(o(ze.getAttribute("url")));break}}ui.clips[Se.getAttribute("id")]=xe}function z(Se){const xe=[],Ue=Se.name,Pe=Se.end-Se.start||-1,ze=Se.animations;for(let Lt=0,Ot=ze.length;Lt<Ot;Lt++){const Ln=b(ze[Lt]);for(let ot=0,un=Ln.length;ot<un;ot++)xe.push(Ln[ot])}return new Sm(Ue,Pe,xe)}function O(Se){return m(ui.clips[Se],z)}function N(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"skin":xe.id=o(ze.getAttribute("source")),xe.skin=H(ze);break;case"morph":xe.id=o(ze.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}ui.controllers[Se.getAttribute("id")]=xe}function H(Se){const xe={sources:{}};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"bind_shape_matrix":xe.bindShapeMatrix=s(ze.textContent);break;case"source":const Lt=ze.getAttribute("id");xe.sources[Lt]=it(ze);break;case"joints":xe.joints=q(ze);break;case"vertex_weights":xe.vertexWeights=te(ze);break}}return xe}function q(Se){const xe={inputs:{}};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"input":const Lt=ze.getAttribute("semantic"),Ot=o(ze.getAttribute("source"));xe.inputs[Lt]=Ot;break}}return xe}function te(Se){const xe={inputs:{}};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"input":const Lt=ze.getAttribute("semantic"),Ot=o(ze.getAttribute("source")),Ln=parseInt(ze.getAttribute("offset"));xe.inputs[Lt]={id:Ot,offset:Ln};break;case"vcount":xe.vcount=a(ze.textContent);break;case"v":xe.v=a(ze.textContent);break}}return xe}function Q(Se){const xe={id:Se.id},Ue=ui.geometries[xe.id];return Se.skin!==void 0&&(xe.skin=ee(Se.skin),Ue.sources.skinIndices=xe.skin.indices,Ue.sources.skinWeights=xe.skin.weights),xe}function ee(Se){const Ue={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},Pe=Se.sources,ze=Se.vertexWeights,Lt=ze.vcount,Ot=ze.v,Ln=ze.inputs.JOINT.offset,ot=ze.inputs.WEIGHT.offset,un=Se.sources[Se.joints.inputs.JOINT],Gn=Se.sources[Se.joints.inputs.INV_BIND_MATRIX],tn=Pe[ze.inputs.WEIGHT.id].array;let ii=0,zn,si,$n;for(zn=0,$n=Lt.length;zn<$n;zn++){const rn=Lt[zn],Di=[];for(si=0;si<rn;si++){const Gi=Ot[ii+Ln],yr=Ot[ii+ot],is=tn[yr];Di.push({index:Gi,weight:is}),ii+=2}for(Di.sort(Pr),si=0;si<4;si++){const Gi=Di[si];Gi!==void 0?(Ue.indices.array.push(Gi.index),Ue.weights.array.push(Gi.weight)):(Ue.indices.array.push(0),Ue.weights.array.push(0))}}for(Se.bindShapeMatrix?Ue.bindMatrix=new qn().fromArray(Se.bindShapeMatrix).transpose():Ue.bindMatrix=new qn().identity(),zn=0,$n=un.array.length;zn<$n;zn++){const rn=un.array[zn],Di=new qn().fromArray(Gn.array,zn*Gn.stride).transpose();Ue.joints.push({name:rn,boneInverse:Di})}return Ue;function Pr(rn,Di){return Di.weight-rn.weight}}function de(Se){return m(ui.controllers[Se],Q)}function J(Se){const xe={init_from:i(Se,"init_from")[0].textContent};ui.images[Se.getAttribute("id")]=xe}function ue(Se){return Se.build!==void 0?Se.build:Se.init_from}function Te(Se){const xe=ui.images[Se];return xe!==void 0?m(xe,ue):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",Se),null)}function De(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"profile_COMMON":xe.profile=Le(ze);break}}ui.effects[Se.getAttribute("id")]=xe}function Le(Se){const xe={surfaces:{},samplers:{}};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"newparam":Ne(ze,xe);break;case"technique":xe.technique=ne(ze);break;case"extra":xe.extra=tt(ze);break}}return xe}function Ne(Se,xe){const Ue=Se.getAttribute("sid");for(let Pe=0,ze=Se.childNodes.length;Pe<ze;Pe++){const Lt=Se.childNodes[Pe];if(Lt.nodeType===1)switch(Lt.nodeName){case"surface":xe.surfaces[Ue]=Y(Lt);break;case"sampler2D":xe.samplers[Ue]=oe(Lt);break}}}function Y(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"init_from":xe.init_from=ze.textContent;break}}return xe}function oe(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"source":xe.source=ze.textContent;break}}return xe}function ne(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"constant":case"lambert":case"blinn":case"phong":xe.type=ze.nodeName,xe.parameters=Xe(ze);break;case"extra":xe.extra=tt(ze);break}}return xe}function Xe(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":xe[ze.nodeName]=ke(ze);break;case"transparent":xe[ze.nodeName]={opaque:ze.hasAttribute("opaque")?ze.getAttribute("opaque"):"A_ONE",data:ke(ze)};break}}return xe}function ke(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"color":xe[ze.nodeName]=s(ze.textContent);break;case"float":xe[ze.nodeName]=parseFloat(ze.textContent);break;case"texture":xe[ze.nodeName]={id:ze.getAttribute("texture"),extra:Ge(ze)};break}}return xe}function Ge(Se){const xe={technique:{}};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"extra":He(ze,xe);break}}return xe}function He(Se,xe){for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"technique":qe(ze,xe);break}}}function qe(Se,xe){for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":xe.technique[ze.nodeName]=parseFloat(ze.textContent);break;case"wrapU":case"wrapV":ze.textContent.toUpperCase()==="TRUE"?xe.technique[ze.nodeName]=1:ze.textContent.toUpperCase()==="FALSE"?xe.technique[ze.nodeName]=0:xe.technique[ze.nodeName]=parseInt(ze.textContent);break;case"bump":xe[ze.nodeName]=G(ze);break}}}function tt(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"technique":xe.technique=pe(ze);break}}return xe}function pe(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"double_sided":xe[ze.nodeName]=parseInt(ze.textContent);break;case"bump":xe[ze.nodeName]=G(ze);break}}return xe}function G(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"texture":xe[ze.nodeName]={id:ze.getAttribute("texture"),texcoord:ze.getAttribute("texcoord"),extra:Ge(ze)};break}}return xe}function Z(Se){return Se}function ge(Se){return m(ui.effects[Se],Z)}function Oe(Se){const xe={name:Se.getAttribute("name")};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"instance_effect":xe.url=o(ze.getAttribute("url"));break}}ui.materials[Se.getAttribute("id")]=xe}function je(Se){let xe,Ue=Se.slice((Se.lastIndexOf(".")-1>>>0)+2);switch(Ue=Ue.toLowerCase(),Ue){case"tga":xe=aa;break;default:xe=ya}return xe}function bt(Se){const xe=ge(Se.url),Ue=xe.profile.technique;let Pe;switch(Ue.type){case"phong":case"blinn":Pe=new of;break;case"lambert":Pe=new GF;break;default:Pe=new Kc;break}Pe.name=Se.name||"";function ze(ot,un=null){const Gn=xe.profile.samplers[ot.id];let tn=null;if(Gn!==void 0){const ii=xe.profile.surfaces[Gn.source];tn=Te(ii.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),tn=Te(ot.id);if(tn!==null){const ii=je(tn);if(ii!==void 0){const zn=ii.load(tn),si=ot.extra;if(si!==void 0&&si.technique!==void 0&&c(si.technique)===!1){const $n=si.technique;zn.wrapS=$n.wrapU?Ko:$s,zn.wrapT=$n.wrapV?Ko:$s,zn.offset.set($n.offsetU||0,$n.offsetV||0),zn.repeat.set($n.repeatU||1,$n.repeatV||1)}else zn.wrapS=Ko,zn.wrapT=Ko;return un!==null&&(zn.encoding=un),zn}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",tn),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",ot.id),null}const Lt=Ue.parameters;for(const ot in Lt){const un=Lt[ot];switch(ot){case"diffuse":un.color&&Pe.color.fromArray(un.color),un.texture&&(Pe.map=ze(un.texture,Ni));break;case"specular":un.color&&Pe.specular&&Pe.specular.fromArray(un.color),un.texture&&(Pe.specularMap=ze(un.texture));break;case"bump":un.texture&&(Pe.normalMap=ze(un.texture));break;case"ambient":un.texture&&(Pe.lightMap=ze(un.texture,Ni));break;case"shininess":un.float&&Pe.shininess&&(Pe.shininess=un.float);break;case"emission":un.color&&Pe.emissive&&Pe.emissive.fromArray(un.color),un.texture&&(Pe.emissiveMap=ze(un.texture,Ni));break}}Pe.color.convertSRGBToLinear(),Pe.specular&&Pe.specular.convertSRGBToLinear(),Pe.emissive&&Pe.emissive.convertSRGBToLinear();let Ot=Lt.transparent,Ln=Lt.transparency;if(Ln===void 0&&Ot&&(Ln={float:1}),Ot===void 0&&Ln&&(Ot={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Ot&&Ln)if(Ot.data.texture)Pe.transparent=!0;else{const ot=Ot.data.color;switch(Ot.opaque){case"A_ONE":Pe.opacity=ot[3]*Ln.float;break;case"RGB_ZERO":Pe.opacity=1-ot[0]*Ln.float;break;case"A_ZERO":Pe.opacity=1-ot[3]*Ln.float;break;case"RGB_ONE":Pe.opacity=ot[0]*Ln.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Ot.opaque)}Pe.opacity<1&&(Pe.transparent=!0)}if(Ue.extra!==void 0&&Ue.extra.technique!==void 0){const ot=Ue.extra.technique;for(const un in ot){const Gn=ot[un];switch(un){case"double_sided":Pe.side=Gn===1?fp:dp;break;case"bump":Pe.normalMap=ze(Gn.texture),Pe.normalScale=new Gt(1,1);break}}}return Pe}function At(Se){return m(ui.materials[Se],bt)}function Ee(Se){const xe={name:Se.getAttribute("name")};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"optics":xe.optics=gt(ze);break}}ui.cameras[Se.getAttribute("id")]=xe}function gt(Se){for(let xe=0;xe<Se.childNodes.length;xe++){const Ue=Se.childNodes[xe];switch(Ue.nodeName){case"technique_common":return lt(Ue)}}return{}}function lt(Se){const xe={};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];switch(Pe.nodeName){case"perspective":case"orthographic":xe.technique=Pe.nodeName,xe.parameters=$(Pe);break}}return xe}function $(Se){const xe={};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];switch(Pe.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":xe[Pe.nodeName]=parseFloat(Pe.textContent);break}}return xe}function le(Se){let xe;switch(Se.optics.technique){case"perspective":xe=new Xs(Se.optics.parameters.yfov,Se.optics.parameters.aspect_ratio,Se.optics.parameters.znear,Se.optics.parameters.zfar);break;case"orthographic":let Ue=Se.optics.parameters.ymag,Pe=Se.optics.parameters.xmag;const ze=Se.optics.parameters.aspect_ratio;Pe=Pe===void 0?Ue*ze:Pe,Ue=Ue===void 0?Pe/ze:Ue,Pe*=.5,Ue*=.5,xe=new by(-Pe,Pe,Ue,-Ue,Se.optics.parameters.znear,Se.optics.parameters.zfar);break;default:xe=new Xs;break}return xe.name=Se.name||"",xe}function fe(Se){const xe=ui.cameras[Se];return xe!==void 0?m(xe,le):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",Se),null)}function Me(Se){let xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"technique_common":xe=me(ze);break}}ui.lights[Se.getAttribute("id")]=xe}function me(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"directional":case"point":case"spot":case"ambient":xe.technique=ze.nodeName,xe.parameters=Ae(ze)}}return xe}function Ae(Se){const xe={};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"color":const Lt=s(ze.textContent);xe.color=new wn().fromArray(Lt).convertSRGBToLinear();break;case"falloff_angle":xe.falloffAngle=parseFloat(ze.textContent);break;case"quadratic_attenuation":const Ot=parseFloat(ze.textContent);xe.distance=Ot?Math.sqrt(1/Ot):0;break}}return xe}function dt(Se){let xe;switch(Se.technique){case"directional":xe=new BA;break;case"point":xe=new _m;break;case"spot":xe=new vT;break;case"ambient":xe=new gT;break}return Se.parameters.color&&xe.color.copy(Se.parameters.color),Se.parameters.distance&&(xe.distance=Se.parameters.distance),xe}function we(Se){const xe=ui.lights[Se];return xe!==void 0?m(xe,dt):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",Se),null)}function _t(Se){const xe={name:Se.getAttribute("name"),sources:{},vertices:{},primitives:[]},Ue=i(Se,"mesh")[0];if(Ue!==void 0){for(let Pe=0;Pe<Ue.childNodes.length;Pe++){const ze=Ue.childNodes[Pe];if(ze.nodeType!==1)continue;const Lt=ze.getAttribute("id");switch(ze.nodeName){case"source":xe.sources[Lt]=it(ze);break;case"vertices":xe.vertices=wt(ze);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",ze.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":xe.primitives.push(Ft(ze));break;default:console.log(ze)}}ui.geometries[Se.getAttribute("id")]=xe}}function it(Se){const xe={array:[],stride:3};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"float_array":xe.array=s(Pe.textContent);break;case"Name_array":xe.array=r(Pe.textContent);break;case"technique_common":const ze=i(Pe,"accessor")[0];ze!==void 0&&(xe.stride=parseInt(ze.getAttribute("stride")));break}}return xe}function wt(Se){const xe={};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];Pe.nodeType===1&&(xe[Pe.getAttribute("semantic")]=o(Pe.getAttribute("source")))}return xe}function Ft(Se){const xe={type:Se.nodeName,material:Se.getAttribute("material"),count:parseInt(Se.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let Ue=0,Pe=Se.childNodes.length;Ue<Pe;Ue++){const ze=Se.childNodes[Ue];if(ze.nodeType===1)switch(ze.nodeName){case"input":const Lt=o(ze.getAttribute("source")),Ot=ze.getAttribute("semantic"),Ln=parseInt(ze.getAttribute("offset")),ot=parseInt(ze.getAttribute("set")),un=ot>0?Ot+ot:Ot;xe.inputs[un]={id:Lt,offset:Ln},xe.stride=Math.max(xe.stride,Ln+1),Ot==="TEXCOORD"&&(xe.hasUV=!0);break;case"vcount":xe.vcount=a(ze.textContent);break;case"p":xe.p=a(ze.textContent);break}}return xe}function Rt(Se){const xe={};for(let Ue=0;Ue<Se.length;Ue++){const Pe=Se[Ue];xe[Pe.type]===void 0&&(xe[Pe.type]=[]),xe[Pe.type].push(Pe)}return xe}function Wt(Se){let xe=0;for(let Ue=0,Pe=Se.length;Ue<Pe;Ue++)Se[Ue].hasUV===!0&&xe++;xe>0&&xe<Se.length&&(Se.uvsNeedsFix=!0)}function hn(Se){const xe={},Ue=Se.sources,Pe=Se.vertices,ze=Se.primitives;if(ze.length===0)return{};const Lt=Rt(ze);for(const Ot in Lt){const Ln=Lt[Ot];Wt(Ln),xe[Ot]=pi(Ln,Ue,Pe)}return xe}function pi(Se,xe,Ue){const Pe={},ze={array:[],stride:0},Lt={array:[],stride:0},Ot={array:[],stride:0},Ln={array:[],stride:0},ot={array:[],stride:0},un={array:[],stride:4},Gn={array:[],stride:4},tn=new $i,ii=[];let zn=0;for(let si=0;si<Se.length;si++){const $n=Se[si],Pr=$n.inputs;let rn=0;switch($n.type){case"lines":case"linestrips":rn=$n.count*2;break;case"triangles":rn=$n.count*3;break;case"polylist":for(let Di=0;Di<$n.count;Di++){const Gi=$n.vcount[Di];switch(Gi){case 3:rn+=3;break;case 4:rn+=6;break;default:rn+=(Gi-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",$n.type)}tn.addGroup(zn,rn,si),zn+=rn,$n.material&&ii.push($n.material);for(const Di in Pr){const Gi=Pr[Di];switch(Di){case"VERTEX":for(const yr in Ue){const is=Ue[yr];switch(yr){case"POSITION":const Lf=ze.array.length;if(Pn($n,xe[is],Gi.offset,ze.array),ze.stride=xe[is].stride,xe.skinWeights&&xe.skinIndices&&(Pn($n,xe.skinIndices,Gi.offset,un.array),Pn($n,xe.skinWeights,Gi.offset,Gn.array)),$n.hasUV===!1&&Se.uvsNeedsFix===!0){const CT=(ze.array.length-Lf)/ze.stride;for(let WA=0;WA<CT;WA++)Ot.array.push(0,0)}break;case"NORMAL":Pn($n,xe[is],Gi.offset,Lt.array),Lt.stride=xe[is].stride;break;case"COLOR":Pn($n,xe[is],Gi.offset,ot.array),ot.stride=xe[is].stride;break;case"TEXCOORD":Pn($n,xe[is],Gi.offset,Ot.array),Ot.stride=xe[is].stride;break;case"TEXCOORD1":Pn($n,xe[is],Gi.offset,Ln.array),Ot.stride=xe[is].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',yr)}}break;case"NORMAL":Pn($n,xe[Gi.id],Gi.offset,Lt.array),Lt.stride=xe[Gi.id].stride;break;case"COLOR":Pn($n,xe[Gi.id],Gi.offset,ot.array,!0),ot.stride=xe[Gi.id].stride;break;case"TEXCOORD":Pn($n,xe[Gi.id],Gi.offset,Ot.array),Ot.stride=xe[Gi.id].stride;break;case"TEXCOORD1":Pn($n,xe[Gi.id],Gi.offset,Ln.array),Ln.stride=xe[Gi.id].stride;break}}}return ze.array.length>0&&tn.setAttribute("position",new Dn(ze.array,ze.stride)),Lt.array.length>0&&tn.setAttribute("normal",new Dn(Lt.array,Lt.stride)),ot.array.length>0&&tn.setAttribute("color",new Dn(ot.array,ot.stride)),Ot.array.length>0&&tn.setAttribute("uv",new Dn(Ot.array,Ot.stride)),Ln.array.length>0&&tn.setAttribute("uv2",new Dn(Ln.array,Ln.stride)),un.array.length>0&&tn.setAttribute("skinIndex",new Dn(un.array,un.stride)),Gn.array.length>0&&tn.setAttribute("skinWeight",new Dn(Gn.array,Gn.stride)),Pe.data=tn,Pe.type=Se[0].type,Pe.materialKeys=ii,Pe}function Pn(Se,xe,Ue,Pe,ze=!1){const Lt=Se.p,Ot=Se.stride,Ln=Se.vcount;function ot(tn){let ii=Lt[tn+Ue]*Gn;const zn=ii+Gn;for(;ii<zn;ii++)Pe.push(un[ii]);if(ze){const si=Pe.length-Gn-1;ns.setRGB(Pe[si+0],Pe[si+1],Pe[si+2]).convertSRGBToLinear(),Pe[si+0]=ns.r,Pe[si+1]=ns.g,Pe[si+2]=ns.b}}const un=xe.array,Gn=xe.stride;if(Se.vcount!==void 0){let tn=0;for(let ii=0,zn=Ln.length;ii<zn;ii++){const si=Ln[ii];if(si===4){const $n=tn+Ot*0,Pr=tn+Ot*1,rn=tn+Ot*2,Di=tn+Ot*3;ot($n),ot(Pr),ot(Di),ot(Pr),ot(rn),ot(Di)}else if(si===3){const $n=tn+Ot*0,Pr=tn+Ot*1,rn=tn+Ot*2;ot($n),ot(Pr),ot(rn)}else if(si>4)for(let $n=1,Pr=si-2;$n<=Pr;$n++){const rn=tn+Ot*0,Di=tn+Ot*$n,Gi=tn+Ot*($n+1);ot(rn),ot(Di),ot(Gi)}tn+=Ot*si}}else for(let tn=0,ii=Lt.length;tn<ii;tn+=Ot)ot(tn)}function Qi(Se){return m(ui.geometries[Se],hn)}function ai(Se){const xe={name:Se.getAttribute("name")||"",joints:{},links:[]};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"technique_common":zt(Pe,xe);break}}ui.kinematicsModels[Se.getAttribute("id")]=xe}function X(Se){return Se.build!==void 0?Se.build:Se}function se(Se){return m(ui.kinematicsModels[Se],X)}function zt(Se,xe){for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"joint":xe.joints[Pe.getAttribute("sid")]=Ce(Pe);break;case"link":xe.links.push(Ct(Pe));break}}}function Ce(Se){let xe;for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"prismatic":case"revolute":xe=ce(Pe);break}}return xe}function ce(Se){const xe={sid:Se.getAttribute("sid"),name:Se.getAttribute("name")||"",axis:new $e,limits:{min:0,max:0},type:Se.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"axis":const ze=s(Pe.textContent);xe.axis.fromArray(ze);break;case"limits":const Lt=Pe.getElementsByTagName("max")[0],Ot=Pe.getElementsByTagName("min")[0];xe.limits.max=parseFloat(Lt.textContent),xe.limits.min=parseFloat(Ot.textContent);break}}return xe.limits.min>=xe.limits.max&&(xe.static=!0),xe.middlePosition=(xe.limits.min+xe.limits.max)/2,xe}function Ct(Se){const xe={sid:Se.getAttribute("sid"),name:Se.getAttribute("name")||"",attachments:[],transforms:[]};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"attachment_full":xe.attachments.push(vt(Pe));break;case"matrix":case"translate":case"rotate":xe.transforms.push(We(Pe));break}}return xe}function vt(Se){const xe={joint:Se.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"link":xe.links.push(Ct(Pe));break;case"matrix":case"translate":case"rotate":xe.transforms.push(We(Pe));break}}return xe}function We(Se){const xe={type:Se.nodeName},Ue=s(Se.textContent);switch(xe.type){case"matrix":xe.obj=new qn,xe.obj.fromArray(Ue).transpose();break;case"translate":xe.obj=new $e,xe.obj.fromArray(Ue);break;case"rotate":xe.obj=new $e,xe.obj.fromArray(Ue),xe.angle=$a.degToRad(Ue[3]);break}return xe}function xt(Se){const xe={name:Se.getAttribute("name")||"",rigidBodies:{}};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"rigid_body":xe.rigidBodies[Pe.getAttribute("name")]={},Pt(Pe,xe.rigidBodies[Pe.getAttribute("name")]);break}}ui.physicsModels[Se.getAttribute("id")]=xe}function Pt(Se,xe){for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"technique_common":dn(Pe,xe);break}}}function dn(Se,xe){for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"inertia":xe.inertia=s(Pe.textContent);break;case"mass":xe.mass=s(Pe.textContent)[0];break}}}function En(Se){const xe={bindJointAxis:[]};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"bind_joint_axis":xe.bindJointAxis.push(ei(Pe));break}}ui.kinematicsScenes[o(Se.getAttribute("url"))]=xe}function ei(Se){const xe={target:Se.getAttribute("target").split("/").pop()};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType===1)switch(Pe.nodeName){case"axis":const ze=Pe.getElementsByTagName("param")[0];xe.axis=ze.textContent;const Lt=xe.axis.split("inst_").pop().split("axis")[0];xe.jointIndex=Lt.substring(0,Lt.length-1);break}}return xe}function Je(Se){return Se.build!==void 0?Se.build:Se}function ti(Se){return m(ui.kinematicsScenes[Se],Je)}function st(){const Se=Object.keys(ui.kinematicsModels)[0],xe=Object.keys(ui.kinematicsScenes)[0],Ue=Object.keys(ui.visualScenes)[0];if(Se===void 0||xe===void 0)return;const Pe=se(Se),ze=ti(xe),Lt=_i(Ue),Ot=ze.bindJointAxis,Ln={};for(let Gn=0,tn=Ot.length;Gn<tn;Gn++){const ii=Ot[Gn],zn=Bi.querySelector('[sid="'+ii.target+'"]');if(zn){const si=zn.parentElement;ot(ii.jointIndex,si)}}function ot(Gn,tn){const ii=tn.getAttribute("name"),zn=Pe.joints[Gn];Lt.traverse(function(si){si.name===ii&&(Ln[Gn]={object:si,transforms:nr(tn),joint:zn,position:zn.zeroPosition})})}const un=new qn;hd={joints:Pe&&Pe.joints,getJointValue:function(Gn){const tn=Ln[Gn];if(tn)return tn.position;console.warn("THREE.ColladaLoader: Joint "+Gn+" doesn't exist.")},setJointValue:function(Gn,tn){const ii=Ln[Gn];if(ii){const zn=ii.joint;if(tn>zn.limits.max||tn<zn.limits.min)console.warn("THREE.ColladaLoader: Joint "+Gn+" value "+tn+" outside of limits (min: "+zn.limits.min+", max: "+zn.limits.max+").");else if(zn.static)console.warn("THREE.ColladaLoader: Joint "+Gn+" is static.");else{const si=ii.object,$n=zn.axis,Pr=ii.transforms;Ze.identity();for(let rn=0;rn<Pr.length;rn++){const Di=Pr[rn];if(Di.sid&&Di.sid.indexOf(Gn)!==-1)switch(zn.type){case"revolute":Ze.multiply(un.makeRotationAxis($n,$a.degToRad(tn)));break;case"prismatic":Ze.multiply(un.makeTranslation($n.x*tn,$n.y*tn,$n.z*tn));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+zn.type);break}else switch(Di.type){case"matrix":Ze.multiply(Di.obj);break;case"translate":Ze.multiply(un.makeTranslation(Di.obj.x,Di.obj.y,Di.obj.z));break;case"scale":Ze.scale(Di.obj);break;case"rotate":Ze.multiply(un.makeRotationAxis(Di.obj,Di.angle));break}}si.matrix.copy(Ze),si.matrix.decompose(si.position,si.quaternion,si.scale),Ln[Gn].position=tn}}else console.log("THREE.ColladaLoader: "+Gn+" does not exist.")}}}function nr(Se){const xe=[],Ue=Bi.querySelector('[id="'+Se.id+'"]');for(let Pe=0;Pe<Ue.childNodes.length;Pe++){const ze=Ue.childNodes[Pe];if(ze.nodeType!==1)continue;let Lt,Ot;switch(ze.nodeName){case"matrix":Lt=s(ze.textContent);const Ln=new qn().fromArray(Lt).transpose();xe.push({sid:ze.getAttribute("sid"),type:ze.nodeName,obj:Ln});break;case"translate":case"scale":Lt=s(ze.textContent),Ot=new $e().fromArray(Lt),xe.push({sid:ze.getAttribute("sid"),type:ze.nodeName,obj:Ot});break;case"rotate":Lt=s(ze.textContent),Ot=new $e().fromArray(Lt);const ot=$a.degToRad(Lt[3]);xe.push({sid:ze.getAttribute("sid"),type:ze.nodeName,obj:Ot,angle:ot});break}}return xe}function he(Se){const xe=Se.getElementsByTagName("node");for(let Ue=0;Ue<xe.length;Ue++){const Pe=xe[Ue];Pe.hasAttribute("id")===!1&&Pe.setAttribute("id",l())}}const Ze=new qn,ft=new $e;function yt(Se){const xe={name:Se.getAttribute("name")||"",type:Se.getAttribute("type"),id:Se.getAttribute("id"),sid:Se.getAttribute("sid"),matrix:new qn,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];if(Pe.nodeType!==1)continue;let ze;switch(Pe.nodeName){case"node":xe.nodes.push(Pe.getAttribute("id")),yt(Pe);break;case"instance_camera":xe.instanceCameras.push(o(Pe.getAttribute("url")));break;case"instance_controller":xe.instanceControllers.push(ct(Pe));break;case"instance_light":xe.instanceLights.push(o(Pe.getAttribute("url")));break;case"instance_geometry":xe.instanceGeometries.push(ct(Pe));break;case"instance_node":xe.instanceNodes.push(o(Pe.getAttribute("url")));break;case"matrix":ze=s(Pe.textContent),xe.matrix.multiply(Ze.fromArray(ze).transpose()),xe.transforms[Pe.getAttribute("sid")]=Pe.nodeName;break;case"translate":ze=s(Pe.textContent),ft.fromArray(ze),xe.matrix.multiply(Ze.makeTranslation(ft.x,ft.y,ft.z)),xe.transforms[Pe.getAttribute("sid")]=Pe.nodeName;break;case"rotate":ze=s(Pe.textContent);const Lt=$a.degToRad(ze[3]);xe.matrix.multiply(Ze.makeRotationAxis(ft.fromArray(ze),Lt)),xe.transforms[Pe.getAttribute("sid")]=Pe.nodeName;break;case"scale":ze=s(Pe.textContent),xe.matrix.scale(ft.fromArray(ze)),xe.transforms[Pe.getAttribute("sid")]=Pe.nodeName;break;case"extra":break;default:console.log(Pe)}}return on(xe.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",xe.id):ui.nodes[xe.id]=xe,xe}function ct(Se){const xe={id:o(Se.getAttribute("url")),materials:{},skeletons:[]};for(let Ue=0;Ue<Se.childNodes.length;Ue++){const Pe=Se.childNodes[Ue];switch(Pe.nodeName){case"bind_material":const ze=Pe.getElementsByTagName("instance_material");for(let Lt=0;Lt<ze.length;Lt++){const Ot=ze[Lt],Ln=Ot.getAttribute("symbol"),ot=Ot.getAttribute("target");xe.materials[Ln]=o(ot)}break;case"skeleton":xe.skeletons.push(o(Pe.textContent));break}}return xe}function Ht(Se,xe){const Ue=[],Pe=[];let ze,Lt,Ot;for(ze=0;ze<Se.length;ze++){const un=Se[ze];let Gn;if(on(un))Gn=ni(un),$t(Gn,xe,Ue);else if(ur(un)){const ii=ui.visualScenes[un].children;for(let zn=0;zn<ii.length;zn++){const si=ii[zn];if(si.type==="JOINT"){const $n=ni(si.id);$t($n,xe,Ue)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",un)}for(ze=0;ze<xe.length;ze++)for(Lt=0;Lt<Ue.length;Lt++)if(Ot=Ue[Lt],Ot.bone.name===xe[ze].name){Pe[ze]=Ot,Ot.processed=!0;break}for(ze=0;ze<Ue.length;ze++)Ot=Ue[ze],Ot.processed===!1&&(Pe.push(Ot),Ot.processed=!0);const Ln=[],ot=[];for(ze=0;ze<Pe.length;ze++)Ot=Pe[ze],Ln.push(Ot.bone),ot.push(Ot.boneInverse);return new Ay(Ln,ot)}function $t(Se,xe,Ue){Se.traverse(function(Pe){if(Pe.isBone===!0){let ze;for(let Lt=0;Lt<xe.length;Lt++){const Ot=xe[Lt];if(Ot.name===Pe.name){ze=Ot.boneInverse;break}}ze===void 0&&(ze=new qn),Ue.push({bone:Pe,boneInverse:ze,processed:!1})}})}function cn(Se){const xe=[],Ue=Se.matrix,Pe=Se.nodes,ze=Se.type,Lt=Se.instanceCameras,Ot=Se.instanceControllers,Ln=Se.instanceLights,ot=Se.instanceGeometries,un=Se.instanceNodes;for(let tn=0,ii=Pe.length;tn<ii;tn++)xe.push(ni(Pe[tn]));for(let tn=0,ii=Lt.length;tn<ii;tn++){const zn=fe(Lt[tn]);zn!==null&&xe.push(zn.clone())}for(let tn=0,ii=Ot.length;tn<ii;tn++){const zn=Ot[tn],si=de(zn.id),$n=Qi(si.id),Pr=Fn($n,zn.materials),rn=zn.skeletons,Di=si.skin.joints,Gi=Ht(rn,Di);for(let yr=0,is=Pr.length;yr<is;yr++){const Lf=Pr[yr];Lf.isSkinnedMesh&&(Lf.bind(Gi,si.skin.bindMatrix),Lf.normalizeSkinWeights()),xe.push(Lf)}}for(let tn=0,ii=Ln.length;tn<ii;tn++){const zn=we(Ln[tn]);zn!==null&&xe.push(zn.clone())}for(let tn=0,ii=ot.length;tn<ii;tn++){const zn=ot[tn],si=Qi(zn.id),$n=Fn(si,zn.materials);for(let Pr=0,rn=$n.length;Pr<rn;Pr++)xe.push($n[Pr])}for(let tn=0,ii=un.length;tn<ii;tn++)xe.push(ni(un[tn]).clone());let Gn;if(Pe.length===0&&xe.length===1)Gn=xe[0];else{Gn=ze==="JOINT"?new N1:new Yo;for(let tn=0;tn<xe.length;tn++)Gn.add(xe[tn])}return Gn.name=ze==="JOINT"?Se.sid:Se.name,Gn.matrix.copy(Ue),Gn.matrix.decompose(Gn.position,Gn.quaternion,Gn.scale),Gn}const mn=new Kc({color:16711935});function nn(Se,xe){const Ue=[];for(let Pe=0,ze=Se.length;Pe<ze;Pe++){const Lt=xe[Se[Pe]];Lt===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",Se[Pe]),Ue.push(mn)):Ue.push(At(Lt))}return Ue}function Fn(Se,xe){const Ue=[];for(const Pe in Se){const ze=Se[Pe],Lt=nn(ze.materialKeys,xe);Lt.length===0&&(Pe==="lines"||Pe==="linestrips"?Lt.push(new Jc):Lt.push(new of));const Ot=ze.data.attributes.skinIndex!==void 0,Ln=Lt.length===1?Lt[0]:Lt;let ot;switch(Pe){case"lines":ot=new wm(ze.data,Ln);break;case"linestrips":ot=new wy(ze.data,Ln);break;case"triangles":case"polylist":Ot?ot=new pT(ze.data,Ln):ot=new Qs(ze.data,Ln);break}Ue.push(ot)}return Ue}function on(Se){return ui.nodes[Se]!==void 0}function ni(Se){return m(ui.nodes[Se],cn)}function xi(Se){const xe={name:Se.getAttribute("name"),children:[]};he(Se);const Ue=i(Se,"node");for(let Pe=0;Pe<Ue.length;Pe++)xe.children.push(yt(Ue[Pe]));ui.visualScenes[Se.getAttribute("id")]=xe}function Mi(Se){const xe=new Yo;xe.name=Se.name;const Ue=Se.children;for(let Pe=0;Pe<Ue.length;Pe++){const ze=Ue[Pe];xe.add(ni(ze.id))}return xe}function ur(Se){return ui.visualScenes[Se]!==void 0}function _i(Se){return m(ui.visualScenes[Se],Mi)}function Xn(Se){const xe=i(Se,"instance_visual_scene")[0];return _i(o(xe.getAttribute("url")))}function ys(){const Se=ui.clips;if(c(Se)===!0){if(c(ui.animations)===!1){const xe=[];for(const Ue in ui.animations){const Pe=b(Ue);for(let ze=0,Lt=Pe.length;ze<Lt;ze++)xe.push(Pe[ze])}sr.push(new Sm("default",-1,xe))}}else for(const xe in Se)sr.push(O(xe))}function rr(Se){let xe="";const Ue=[Se];for(;Ue.length;){const Pe=Ue.shift();Pe.nodeType===Node.TEXT_NODE?xe+=Pe.textContent:(xe+=`
`,Ue.push.apply(Ue,Pe.childNodes))}return xe.trim()}if(e.length===0)return{scene:new FF};const Hs=new DOMParser().parseFromString(e,"application/xml"),Bi=i(Hs,"COLLADA")[0],Gs=Hs.getElementsByTagName("parsererror")[0];if(Gs!==void 0){const Se=i(Gs,"div")[0];let xe;return Se?xe=Se.textContent:xe=rr(Gs),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,xe),null}const fd=Bi.getAttribute("version");console.log("THREE.ColladaLoader: File version",fd);const Mr=u(i(Bi,"asset")[0]),ya=new z1(this.manager);ya.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let aa;cP&&(aa=new cP(this.manager),aa.setPath(this.resourcePath||t));const ns=new wn,sr=[];let hd={},wc=0;const ui={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};h(Bi,"library_animations","animation",v),h(Bi,"library_animation_clips","animation_clip",P),h(Bi,"library_controllers","controller",N),h(Bi,"library_images","image",J),h(Bi,"library_effects","effect",De),h(Bi,"library_materials","material",Oe),h(Bi,"library_cameras","camera",Ee),h(Bi,"library_lights","light",Me),h(Bi,"library_geometries","geometry",_t),h(Bi,"library_nodes","node",yt),h(Bi,"library_visual_scenes","visual_scene",xi),h(Bi,"library_kinematics_models","kinematics_model",ai),h(Bi,"library_physics_models","physics_model",xt),h(Bi,"scene","instance_kinematics_scene",En),p(ui.animations,x),p(ui.clips,z),p(ui.controllers,Q),p(ui.images,ue),p(ui.effects,Z),p(ui.materials,bt),p(ui.cameras,le),p(ui.lights,dt),p(ui.geometries,hn),p(ui.visualScenes,Mi),ys(),st();const Ip=Xn(i(Bi,"scene")[0]);return Ip.animations=sr,Mr.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),Ip.quaternion.setFromEuler(new Zd(-Math.PI/2,0,0))),Ip.scale.multiplyScalar(Mr.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),sr},kinematics:hd,library:ui,scene:Ip}}}class ret extends Fa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new uet(t)}),this.register(function(t){return new get(t)}),this.register(function(t){return new yet(t)}),this.register(function(t){return new fet(t)}),this.register(function(t){return new het(t)}),this.register(function(t){return new pet(t)}),this.register(function(t){return new met(t)}),this.register(function(t){return new cet(t)}),this.register(function(t){return new vet(t)}),this.register(function(t){return new det(t)}),this.register(function(t){return new aet(t)}),this.register(function(t){return new bet(t)})}load(e,t,i,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Ja.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new to(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={};if(typeof e=="string")s=e;else if(Ja.decodeText(new Uint8Array(e,0,4))===_ae){try{a[Yi.KHR_BINARY_GLTF]=new xet(e)}catch(d){r&&r(d);return}s=a[Yi.KHR_BINARY_GLTF].content}else s=Ja.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new ket(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);o[d.name]=d,a[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],f=l.extensionsRequired||[];switch(d){case Yi.KHR_MATERIALS_UNLIT:a[d]=new oet;break;case Yi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[d]=new _et;break;case Yi.KHR_DRACO_MESH_COMPRESSION:a[d]=new Aet(l,this.dracoLoader);break;case Yi.KHR_TEXTURE_TRANSFORM:a[d]=new wet;break;case Yi.KHR_MESH_QUANTIZATION:a[d]=new Cet;break;default:f.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function set(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Yi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class aet{constructor(e){this.parser=e,this.name=Yi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new wn(16777215);l.color!==void 0&&u.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new BA(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new _m(u),c.distance=d;break;case"spot":c=new vT(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class oet{constructor(){this.name=Yi.KHR_MATERIALS_UNLIT}getMaterialType(){return Kc}extendParams(e,t,i){const r=[];e.color=new wn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ni))}return Promise.all(r)}}class cet{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class uet{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tp}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Gt(o,o)}return Promise.all(s)}}class det{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tp}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class fet{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tp}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new wn(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Ni)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class het{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tp}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class pet{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tp}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new wn(o[0],o[1],o[2]),Promise.all(s)}}class met{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tp}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class vet{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tp}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new wn(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,Ni)),Promise.all(s)}}class get{constructor(e){this.parser=e,this.name=Yi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class yet{constructor(e){this.parser=e,this.name=Yi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class bet{constructor(e){this.name=Yi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,a.ready]).then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,f=new ArrayBuffer(u*d),h=new Uint8Array(o[0],l,c);return a.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})}else return null}}const _ae="glTF",M2=12,yK={JSON:1313821514,BIN:5130562};class xet{constructor(e){this.name=Yi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,M2);if(this.header={magic:Ja.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==_ae)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-M2,r=new DataView(e,M2);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===yK.JSON){const l=new Uint8Array(e,M2+s,a);this.content=Ja.decodeText(l)}else if(o===yK.BIN){const l=M2+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Aet{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Yi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const d=dP[u]||u.toLowerCase();o[d]=a[u]}for(const u in e.attributes){const d=dP[u]||u.toLowerCase();if(a[u]!==void 0){const f=i.accessors[e.attributes[u]],h=Jx[f.componentType];c[d]=h,l[d]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(f){for(const h in f.attributes){const p=f.attributes[h],m=l[h];m!==void 0&&(p.normalized=m)}d(f)},o,c)})})}}class wet{constructor(){this.name=Yi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class uP extends Sy{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),o={specular:{value:new wn().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(l){for(const c in o)l.uniforms[c]=o[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(l){o.specular.value=l}},specularMap:{get:function(){return o.specularMap.value},set:function(l){o.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(l){o.glossiness.value=l}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(l){o.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class _et{constructor(){this.name=Yi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return uP}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new wn(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Ni)),e.emissive=new wn(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new wn(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const a=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",a)),s.push(i.assignTexture(e,"specularMap",a,Ni))}return Promise.all(s)}createMaterial(e){const t=new uP(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=km,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class Cet{constructor(){this.name=Yi.KHR_MESH_QUANTIZATION}}class Cae extends FA{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=r-t,d=(i-t)/u,f=d*d,h=f*d,p=e*c,m=p-c,v=-2*h+3*f,g=h-f,y=1-v,x=g-f+d;for(let b=0;b!==o;b++){const A=a[m+b+o],S=a[m+b+l]*u,C=a[p+b+o],_=a[p+b]*u;s[b]=y*A+x*S+v*C+g*_}return s}}const Met=new Ta;class Tet extends Cae{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return Met.fromArray(s).normalize().toArray(s),s}}const Td={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Jx={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},bK={9728:ua,9729:Bs,9984:u4,9985:CF,9986:d4,9987:Pf},xK={33071:$s,33648:Ox,10497:Ko},AK={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},rh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Eet={CUBICSPLINE:void 0,LINEAR:F1,STEP:zx},aI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Iet(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Sy({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:dp})),n.DefaultMaterial}function T2(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function g0(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Det(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const f=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;a.push(f)}if(r){const f=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;o.push(f)}if(s){const f=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],f=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function Ret(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Pet(n){const e=n.extensions&&n.extensions[Yi.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+wK(e.attributes):t=n.indices+":"+wK(n.attributes)+":"+n.mode,t}function wK(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function fP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Let(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class ket{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new set,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new z1(this.options.manager):this.textureLoader=new eJe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new to(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};T2(s,o,r),g0(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Yi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(Ja.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=AK[r.type],c=Jx[r.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,f=r.byteOffset||0,h=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,v;if(h&&h!==d){const g=Math.floor(f/h),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let x=t.cache.get(y);x||(m=new c(o,g*h,r.count*h/u),x=new BF(m,h/u),t.cache.add(y,x)),v=new Am(x,l,f%h/u,p)}else o===null?m=new c(r.count*l):m=new c(o,f,r.count*l),v=new As(m,l,p);if(r.sparse!==void 0){const g=AK.SCALAR,y=Jx[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,A=new y(a[1],x,r.sparse.count*g),S=new c(a[2],b,r.sparse.count*l);o!==null&&(v=new As(v.array.slice(),v.itemSize,v.normalized));for(let C=0,_=A.length;C<_;C++){const M=A[C];if(v.setX(M,S[C*l]),l>=2&&v.setY(M,S[C*l+1]),l>=3&&v.setZ(M,S[C*l+2]),l>=4&&v.setW(M,S[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,a.name&&(u.name=a.name);const f=(s.samplers||{})[a.sampler]||{};return u.magFilter=bK[f.magFilter]||Bs,u.minFilter=bK[f.minFilter]||Pf,u.wrapS=xK[f.wrapS]||Ko,u.wrapT=xK[f.wrapT]||Ko,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(d){c=!0;const f=new Blob([d],{type:a.mimeType});return l=o.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(f,h){let p=f;t.isImageBitmapLoader===!0&&(p=function(m){const v=new Pa(m);v.needsUpdate=!0,f(v)}),t.load(Ja.resolveURL(d,s.path),p,void 0,h)})}).then(function(d){return c===!0&&o.revokeObjectURL(l),d.userData.mimeType=a.mimeType||Let(a.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[Yi.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[Yi.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Yi.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&(a.encoding=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new z0,zs.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Jc,zs.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(o+="specular-glossiness:"),r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return Sy}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[Yi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[Yi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else if(l[Yi.KHR_MATERIALS_UNLIT]){const d=r[Yi.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else{const d=s.pbrMetallicRoughness||{};if(o.color=new wn(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",d.baseColorTexture,Ni)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=fp);const u=s.alphaMode||aI.OPAQUE;if(u===aI.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===aI.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Kc&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Gt(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;o.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&a!==Kc&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Kc&&(o.emissive=new wn().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==Kc&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Ni)),Promise.all(c).then(function(){let d;return a===uP?d=r[Yi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):d=new a(o),s.name&&(d.name=s.name),g0(d,s),t.associations.set(d,{materials:e}),s.extensions&&T2(r,d,s),d})}createUniqueName(e){const t=ar.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[Yi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return SK(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=Pet(c),d=r[u];if(d)a.push(d.promise);else{let f;c.extensions&&c.extensions[Yi.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=SK(new $i,c,t),r[u]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?Iet(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let h=0,p=u.length;h<p;h++){const m=u[h],v=a[h];let g;const y=c[h];if(v.mode===Td.TRIANGLES||v.mode===Td.TRIANGLE_STRIP||v.mode===Td.TRIANGLE_FAN||v.mode===void 0)g=s.isSkinnedMesh===!0?new pT(m,y):new Qs(m,y),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),v.mode===Td.TRIANGLE_STRIP?g.geometry=_K(g.geometry,EKe):v.mode===Td.TRIANGLE_FAN&&(g.geometry=_K(g.geometry,$re));else if(v.mode===Td.LINES)g=new wm(m,y);else if(v.mode===Td.LINE_STRIP)g=new wy(m,y);else if(v.mode===Td.LINE_LOOP)g=new wse(m,y);else if(v.mode===Td.POINTS)g=new Lb(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&Ret(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),g0(g,s),v.extensions&&T2(r,g,v),t.assignFinalMaterial(g),d.push(g)}for(let h=0,p=d.length;h<p;h++)t.associations.set(d[h],{meshes:e,primitives:h});if(d.length===1)return d[0];const f=new Yo;t.associations.set(f,{meshes:e});for(let h=0,p=d.length;h<p;h++)f.add(d[h]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Xs($a.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new by(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),g0(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],a=[],o=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const d=i.channels[c],f=i.samplers[d.sampler],h=d.target,p=h.node!==void 0?h.node:h.id,m=i.parameters!==void 0?i.parameters[f.input]:f.input,v=i.parameters!==void 0?i.parameters[f.output]:f.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",v)),o.push(f),l.push(h)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],f=c[2],h=c[3],p=c[4],m=[];for(let g=0,y=u.length;g<y;g++){const x=u[g],b=d[g],A=f[g],S=h[g],C=p[g];if(x===void 0)continue;x.updateMatrix();let _;switch(rh[C.path]){case rh.weights:_=O1;break;case rh.rotation:_=bf;break;case rh.position:case rh.scale:default:_=vp;break}const M=x.name?x.name:x.uuid,T=S.interpolation!==void 0?Eet[S.interpolation]:F1,E=[];rh[C.path]===rh.weights?x.traverse(function(L){L.morphTargetInfluences&&E.push(L.name?L.name:L.uuid)}):E.push(M);let I=A.array;if(A.normalized){const L=fP(I.constructor),F=new Float32Array(I.length);for(let B=0,P=I.length;B<P;B++)F[B]=I[B]*L;I=F}for(let L=0,F=E.length;L<F;L++){const B=new _(E[L]+"."+rh[C.path],b.array,I,T);S.interpolation==="CUBICSPLINE"&&(B.createInterpolant=function(z){const O=this instanceof bf?Tet:Cae;return new O(this.times,this.values,this.getValueSize()/3,z)},B.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(B)}}const v=i.name?i.name:"animation_"+e;return new Sm(v,void 0,m)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,i=this.extensions,r=this,s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"";return function(){const o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),Promise.all(o)}().then(function(o){let l;if(s.isBone===!0?l=new N1:o.length>1?l=new Yo:o.length===1?l=o[0]:l=new ps,l!==o[0])for(let c=0,u=o.length;c<u;c++)l.add(o[c]);if(s.name&&(l.userData.name=s.name,l.name=a),g0(l,s),s.extensions&&T2(i,l,s),s.matrix!==void 0){const c=new qn;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,a=new Yo;r.name&&(a.name=s.createUniqueName(r.name)),g0(a,r),r.extensions&&T2(i,a,r);const o=r.nodes||[],l=[];for(let c=0,u=o.length;c<u;c++)l.push(Mae(o[c],a,t,s));return Promise.all(l).then(function(){const c=u=>{const d=new Map;for(const[f,h]of s.associations)(f instanceof zs||f instanceof Pa)&&d.set(f,h);return u.traverse(f=>{const h=s.associations.get(f);h!=null&&d.set(f,h)}),d};return s.associations=c(a),a})}}function Mae(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(r.skin===void 0)return s;let a;return i.getDependency("skin",r.skin).then(function(o){a=o;const l=[];for(let c=0,u=a.joints.length;c<u;c++)l.push(i.getDependency("node",a.joints[c]));return Promise.all(l)}).then(function(o){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,f=o.length;d<f;d++){const h=o[d];if(h){c.push(h);const p=new qn;a.inverseBindMatrices!==void 0&&p.fromArray(a.inverseBindMatrices.array,d*16),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[d])}l.bind(new Ay(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const a=[];if(r.children){const o=r.children;for(let l=0,c=o.length;l<c;l++){const u=o[l];a.push(Mae(u,s,t,i))}}return Promise.all(a)})}function Fet(n,e,t){const i=e.attributes,r=new Fm;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new $e(l[0],l[1],l[2]),new $e(c[0],c[1],c[2])),o.normalized){const u=fP(Jx[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new $e,l=new $e;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const f=t.json.accessors[d.POSITION],h=f.min,p=f.max;if(h!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const m=fP(Jx[f.componentType]);l.multiplyScalar(m)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new Bm;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function SK(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=dP[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return g0(n,e),Fet(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Det(n,e.targets,t):n})}function _K(n,e){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===$re)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const Bet=/^[og]\s*(.+)?/,Net=/^mtllib /,Oet=/^usemtl /,Uet=/^usemap /,CK=/\s+/,MK=new $e,oI=new $e,TK=new $e,EK=new $e,Nl=new $e,jS=new wn;function zet(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const o={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;MK.fromArray(r,e),oI.fromArray(r,t),TK.fromArray(r,i),Nl.subVectors(TK,oI),EK.subVectors(MK,oI),Nl.cross(EK),Nl.normalize(),s.push(Nl.x,Nl.y,Nl.z),s.push(Nl.x,Nl.y,Nl.z),s.push(Nl.x,Nl.y,Nl.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,a,o,l,c){const u=this.vertices.length;let d=this.parseVertexIndex(e,u),f=this.parseVertexIndex(t,u),h=this.parseVertexIndex(i,u);if(this.addVertex(d,f,h),this.addColor(d,f,h),o!==void 0&&o!==""){const p=this.normals.length;d=this.parseNormalIndex(o,p),f=this.parseNormalIndex(l,p),h=this.parseNormalIndex(c,p),this.addNormal(d,f,h)}else this.addFaceNormal(d,f,h);if(r!==void 0&&r!==""){const p=this.uvs.length;d=this.parseUVIndex(r,p),f=this.parseUVIndex(s,p),h=this.parseUVIndex(a,p),this.addUV(d,f,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class Vet extends Fa{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,a=new to(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new zet;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let o=0,l=i.length;o<l;o++){const c=i[o].trimStart();if(c.length===0)continue;const u=c.charAt(0);if(u!=="#")if(u==="v"){const d=c.split(CK);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(jS.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(jS.r,jS.g,jS.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(u==="f"){const f=c.slice(1).trim().split(CK),h=[];for(let m=0,v=f.length;m<v;m++){const g=f[m];if(g.length>0){const y=g.split("/");h.push(y)}}const p=h[0];for(let m=1,v=h.length-1;m<v;m++){const g=h[m],y=h[m+1];t.addFace(p[0],g[0],y[0],p[1],g[1],y[1],p[2],g[2],y[2])}}else if(u==="l"){const d=c.substring(1).trim().split(" ");let f=[];const h=[];if(c.indexOf("/")===-1)f=d;else for(let p=0,m=d.length;p<m;p++){const v=d[p].split("/");v[0]!==""&&f.push(v[0]),v[1]!==""&&h.push(v[1])}t.addLineGeometry(f,h)}else if(u==="p"){const f=c.slice(1).trim().split(" ");t.addPointGeometry(f)}else if((r=Bet.exec(c))!==null){const d=(" "+r[0].slice(1).trim()).slice(1);t.startObject(d)}else if(Oet.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(Net.test(c))t.materialLibraries.push(c.substring(7).trim());else if(Uet.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(u==="s"){if(r=c.split(" "),r.length>1){const f=r[1].trim().toLowerCase();t.object.smooth=f!=="0"&&f!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new Yo;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let o=0,l=t.objects.length;o<l;o++){const c=t.objects[o],u=c.geometry,d=c.materials,f=u.type==="Line",h=u.type==="Points";let p=!1;if(u.vertices.length===0)continue;const m=new $i;m.setAttribute("position",new Dn(u.vertices,3)),u.normals.length>0&&m.setAttribute("normal",new Dn(u.normals,3)),u.colors.length>0&&(p=!0,m.setAttribute("color",new Dn(u.colors,3))),u.hasUVIndices===!0&&m.setAttribute("uv",new Dn(u.uvs,2));const v=[];for(let y=0,x=d.length;y<x;y++){const b=d[y],A=b.name+"_"+b.smooth+"_"+p;let S=t.materials[A];if(this.materials!==null){if(S=this.materials.create(b.name),f&&S&&!(S instanceof Jc)){const C=new Jc;zs.prototype.copy.call(C,S),C.color.copy(S.color),S=C}else if(h&&S&&!(S instanceof z0)){const C=new z0({size:10,sizeAttenuation:!1});zs.prototype.copy.call(C,S),C.color.copy(S.color),C.map=S.map,S=C}}S===void 0&&(f?S=new Jc:h?S=new z0({size:1,sizeAttenuation:!1}):S=new of,S.name=b.name,S.flatShading=!b.smooth,S.vertexColors=p,t.materials[A]=S),v.push(S)}let g;if(v.length>1){for(let y=0,x=d.length;y<x;y++){const b=d[y];m.addGroup(b.groupStart,b.groupCount,y)}f?g=new wm(m,v):h?g=new Lb(m,v):g=new Qs(m,v)}else f?g=new wm(m,v[0]):h?g=new Lb(m,v[0]):g=new Qs(m,v[0]);g.name=c.name,s.add(g)}else if(t.vertices.length>0){const o=new z0({size:1,sizeAttenuation:!1}),l=new $i;l.setAttribute("position",new Dn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new Dn(t.colors,3)),o.vertexColors=!0);const c=new Lb(l,o);s.add(c)}return s}}class Het extends HZe{constructor(e){super(e)}parse(e,t){const i={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},r=542327876,s=131072,a=512,o=1024,l=2048,c=4096,u=8192,d=16384,f=32768;function h(de){return de.charCodeAt(0)+(de.charCodeAt(1)<<8)+(de.charCodeAt(2)<<16)+(de.charCodeAt(3)<<24)}function p(de){return String.fromCharCode(de&255,de>>8&255,de>>16&255,de>>24&255)}function m(de,J,ue,Te){const De=ue*Te*4,Le=new Uint8Array(de,J,De),Ne=new Uint8Array(De);let Y=0,oe=0;for(let ne=0;ne<Te;ne++)for(let Xe=0;Xe<ue;Xe++){const ke=Le[oe];oe++;const Ge=Le[oe];oe++;const He=Le[oe];oe++;const qe=Le[oe];oe++,Ne[Y]=He,Y++,Ne[Y]=Ge,Y++,Ne[Y]=ke,Y++,Ne[Y]=qe,Y++}return Ne}const v=h("DXT1"),g=h("DXT3"),y=h("DXT5"),x=h("ETC1"),b=31,A=0,S=1,C=2,_=3,M=4,T=7,E=21,I=22,L=23,F=24,B=25,P=26,z=28,O=new Int32Array(e,0,b);if(O[A]!==r)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),i;let N;const H=O[E];let q=!1;switch(H){case v:N=8,i.format=P_;break;case g:N=16,i.format=L_;break;case y:N=16,i.format=k_;break;case x:N=8,i.format=jre;break;default:if(O[I]===32&&O[L]&16711680&&O[F]&65280&&O[B]&255&&O[P]&4278190080)q=!0,N=64,i.format=ic;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",p(H)),i}i.mipmapCount=1,O[C]&s&&t!==!1&&(i.mipmapCount=Math.max(1,O[T]));const te=O[z];if(i.isCubemap=!!(te&a),i.isCubemap&&(!(te&o)||!(te&l)||!(te&c)||!(te&u)||!(te&d)||!(te&f)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),i;i.width=O[M],i.height=O[_];let Q=O[S]+4;const ee=i.isCubemap?6:1;for(let de=0;de<ee;de++){let J=i.width,ue=i.height;for(let Te=0;Te<i.mipmapCount;Te++){let De,Le;q?(De=m(e,Q,J,ue),Le=De.length):(Le=Math.max(4,J)/4*Math.max(4,ue)/4*N,De=new Uint8Array(e,Q,Le));const Ne={data:De,width:J,height:ue};i.mipmaps.push(Ne),Q+=Le,J=Math.max(J>>1,1),ue=Math.max(ue>>1,1)}}return i}}class Get{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const $S=new wn;class Wet extends Fa{constructor(e){super(e),this.propertyNameMapping={}}load(e,t,i,r){const s=this,a=new to(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}parse(e){function t(h){const p=/^ply([\s\S]*)end_header(\r\n|\r|\n)/;let m="",v=0;const g=p.exec(h);g!==null&&(m=g[1],v=new Blob([g[0]]).size);const y={comments:[],elements:[],headerLength:v,objInfo:""},x=m.split(/\r\n|\r|\n/);let b;function A(S,C){const _={type:S[0]};return _.type==="list"?(_.name=S[3],_.countType=S[1],_.itemType=S[2]):_.name=S[1],_.name in C&&(_.name=C[_.name]),_}for(let S=0;S<x.length;S++){let C=x[S];if(C=C.trim(),C==="")continue;const _=C.split(/\s+/),M=_.shift();switch(C=_.join(" "),M){case"format":y.format=_[0],y.version=_[1];break;case"comment":y.comments.push(C);break;case"element":b!==void 0&&y.elements.push(b),b={},b.name=_[0],b.count=parseInt(_[1]),b.properties=[];break;case"property":b.properties.push(A(_,f.propertyNameMapping));break;case"obj_info":y.objInfo=C;break;default:console.log("unhandled",M,_)}}return b!==void 0&&y.elements.push(b),y}function i(h,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(h);case"float":case"double":case"float32":case"float64":return parseFloat(h)}}function r(h,p){const m=p.split(/\s+/),v={};for(let g=0;g<h.length;g++)if(h[g].type==="list"){const y=[],x=i(m.shift(),h[g].countType);for(let b=0;b<x;b++)y.push(i(m.shift(),h[g].itemType));v[h[g].name]=y}else v[h[g].name]=i(m.shift(),h[g].type);return v}function s(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let v;const g=/end_header\s([\s\S]*)$/;let y="";(v=g.exec(h))!==null&&(y=v[1]);const x=y.split(/\r\n|\r|\n/);let b=0,A=0;for(let S=0;S<x.length;S++){let C=x[S];if(C=C.trim(),C==="")continue;A>=p.elements[b].count&&(b++,A=0);const _=r(p.elements[b].properties,C);o(m,p.elements[b].name,_),A++}return a(m)}function a(h){let p=new $i;return h.indices.length>0&&p.setIndex(h.indices),p.setAttribute("position",new Dn(h.vertices,3)),h.normals.length>0&&p.setAttribute("normal",new Dn(h.normals,3)),h.uvs.length>0&&p.setAttribute("uv",new Dn(h.uvs,2)),h.colors.length>0&&p.setAttribute("color",new Dn(h.colors,3)),h.faceVertexUvs.length>0&&(p=p.toNonIndexed(),p.setAttribute("uv",new Dn(h.faceVertexUvs,2))),p.computeBoundingSphere(),p}function o(h,p,m){function v(I){for(let L=0,F=I.length;L<F;L++){const B=I[L];if(B in m)return B}return null}const g=v(["x","px","posx"])||"x",y=v(["y","py","posy"])||"y",x=v(["z","pz","posz"])||"z",b=v(["nx","normalx"]),A=v(["ny","normaly"]),S=v(["nz","normalz"]),C=v(["s","u","texture_u","tx"]),_=v(["t","v","texture_v","ty"]),M=v(["red","diffuse_red","r","diffuse_r"]),T=v(["green","diffuse_green","g","diffuse_g"]),E=v(["blue","diffuse_blue","b","diffuse_b"]);if(p==="vertex")h.vertices.push(m[g],m[y],m[x]),b!==null&&A!==null&&S!==null&&h.normals.push(m[b],m[A],m[S]),C!==null&&_!==null&&h.uvs.push(m[C],m[_]),M!==null&&T!==null&&E!==null&&($S.setRGB(m[M]/255,m[T]/255,m[E]/255).convertSRGBToLinear(),h.colors.push($S.r,$S.g,$S.b));else if(p==="face"){const I=m.vertex_indices||m.vertex_index,L=m.texcoord;I.length===3?(h.indices.push(I[0],I[1],I[2]),L&&L.length===6&&(h.faceVertexUvs.push(L[0],L[1]),h.faceVertexUvs.push(L[2],L[3]),h.faceVertexUvs.push(L[4],L[5]))):I.length===4&&(h.indices.push(I[0],I[1],I[3]),h.indices.push(I[1],I[2],I[3]))}}function l(h,p,m,v){switch(m){case"int8":case"char":return[h.getInt8(p),1];case"uint8":case"uchar":return[h.getUint8(p),1];case"int16":case"short":return[h.getInt16(p,v),2];case"uint16":case"ushort":return[h.getUint16(p,v),2];case"int32":case"int":return[h.getInt32(p,v),4];case"uint32":case"uint":return[h.getUint32(p,v),4];case"float32":case"float":return[h.getFloat32(p,v),4];case"float64":case"double":return[h.getFloat64(p,v),8]}}function c(h,p,m,v){const g={};let y,x=0;for(let b=0;b<m.length;b++)if(m[b].type==="list"){const A=[];y=l(h,p+x,m[b].countType,v);const S=y[0];x+=y[1];for(let C=0;C<S;C++)y=l(h,p+x,m[b].itemType,v),A.push(y[0]),x+=y[1];g[m[b].name]=A}else y=l(h,p+x,m[b].type,v),g[m[b].name]=y[0],x+=y[1];return[g,x]}function u(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},v=p.format==="binary_little_endian",g=new DataView(h,p.headerLength);let y,x=0;for(let b=0;b<p.elements.length;b++)for(let A=0;A<p.elements[b].count;A++){y=c(g,x,p.elements[b].properties,v),x+=y[1];const S=y[0];o(m,p.elements[b].name,S)}return a(m)}let d;const f=this;if(e instanceof ArrayBuffer){const h=Ja.decodeText(new Uint8Array(e)),p=t(h);d=p.format==="ascii"?s(h,p):u(e,p)}else d=s(e,t(e));return d}}class qet extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new to(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){function t(c){const u=new DataView(c),d=32/8*3+32/8*3*3+16/8,f=u.getUint32(80,!0);if(80+32/8+f*d===u.byteLength)return!0;const p=[115,111,108,105,100];for(let m=0;m<5;m++)if(i(p,u,m))return!1;return!0}function i(c,u,d){for(let f=0,h=c.length;f<h;f++)if(c[f]!==u.getUint8(d+f))return!1;return!0}function r(c){const u=new DataView(c),d=u.getUint32(80,!0);let f,h,p,m=!1,v,g,y,x,b;for(let T=0;T<70;T++)u.getUint32(T,!1)==1129270351&&u.getUint8(T+4)==82&&u.getUint8(T+5)==61&&(m=!0,v=new Float32Array(d*3*3),g=u.getUint8(T+6)/255,y=u.getUint8(T+7)/255,x=u.getUint8(T+8)/255,b=u.getUint8(T+9)/255);const A=84,S=12*4+2,C=new $i,_=new Float32Array(d*3*3),M=new Float32Array(d*3*3);for(let T=0;T<d;T++){const E=A+T*S,I=u.getFloat32(E,!0),L=u.getFloat32(E+4,!0),F=u.getFloat32(E+8,!0);if(m){const B=u.getUint16(E+48,!0);(B&32768)===0?(f=(B&31)/31,h=(B>>5&31)/31,p=(B>>10&31)/31):(f=g,h=y,p=x)}for(let B=1;B<=3;B++){const P=E+B*12,z=T*3*3+(B-1)*3;_[z]=u.getFloat32(P,!0),_[z+1]=u.getFloat32(P+4,!0),_[z+2]=u.getFloat32(P+8,!0),M[z]=I,M[z+1]=L,M[z+2]=F,m&&(v[z]=f,v[z+1]=h,v[z+2]=p)}}return C.setAttribute("position",new As(_,3)),C.setAttribute("normal",new As(M,3)),m&&(C.setAttribute("color",new As(v,3)),C.hasColors=!0,C.alpha=b),C}function s(c){const u=new $i,d=/solid([\s\S]*?)endsolid/g,f=/facet([\s\S]*?)endfacet/g;let h=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+p+p+p,"g"),v=new RegExp("normal"+p+p+p,"g"),g=[],y=[],x=new $e;let b,A=0,S=0,C=0;for(;(b=d.exec(c))!==null;){S=C;const _=b[0];for(;(b=f.exec(_))!==null;){let E=0,I=0;const L=b[0];for(;(b=v.exec(L))!==null;)x.x=parseFloat(b[1]),x.y=parseFloat(b[2]),x.z=parseFloat(b[3]),I++;for(;(b=m.exec(L))!==null;)g.push(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])),y.push(x.x,x.y,x.z),E++,C++;I!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+h),E!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+h),h++}const M=S,T=C-S;u.addGroup(M,T,A),A++}return u.setAttribute("position",new Dn(g,3)),u.setAttribute("normal",new Dn(y,3)),u}function a(c){return typeof c!="string"?Ja.decodeText(new Uint8Array(c)):c}function o(c){if(typeof c=="string"){const u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d)&255;return u.buffer||u}else return c}const l=o(e);return t(l)?r(l):s(a(e))}}class Ket extends Fa{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Ja.extractUrlBase(e):this.path,o=new to(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const s=/\s+/,a={};for(let l=0;l<i.length;l++){let c=i[l];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const u=c.indexOf(" ");let d=u>=0?c.substring(0,u):c;d=d.toLowerCase();let f=u>=0?c.substring(u+1):"";if(f=f.trim(),d==="newmtl")r={name:f},a[f]=r;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){const h=f.split(s,3);r[d]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else r[d]=f}const o=new Yet(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(a),o}}class Yet{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:dp,this.wrap=this.options.wrap!==void 0?this.options.wrap:Ko}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const a in r){let o=!0,l=r[a];const c=a.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(o=!1);break}o&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(o,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:o+l}function a(o,l){if(r[o])return;const c=t.getTextureParams(l,r),u=t.loadTexture(s(t.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=t.wrap,u.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(u.encoding=Ni),r[o]=u}for(const o in i){const l=i[o];let c;if(l!=="")switch(o.toLowerCase()){case"kd":r.color=new wn().fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=new wn().fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=new wn().fromArray(l).convertSRGBToLinear();break;case"map_kd":a("map",l);break;case"map_ks":a("specularMap",l);break;case"map_ke":a("emissiveMap",l);break;case"norm":a("normalMap",l);break;case"map_bump":case"bump":a("bumpMap",l);break;case"map_d":a("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0);break}}return this.materials[e]=new of(r),this.materials[e]}getTextureParams(e,t){const i={scale:new Gt(1,1),offset:new Gt(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const a=this.manager!==void 0?this.manager:Ose;let o=a.getHandler(e);o===null&&(o=new z1(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const l=o.load(e,i,r,s);return t!==void 0&&(l.mapping=t),l}}const lI=new WeakMap;class Xet extends Fa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new to(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(lI.has(e)){const l=lI.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),lI.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new $i;e.index&&t.setIndex(new As(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize;t.setAttribute(s,new As(a,o))}return t}_loadLibrary(e,t){const i=new to(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=jet.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function jet(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const d=u.draco,f=new d.Decoder,h=new d.DecoderBuffer;h.Init(new Int8Array(l),l.byteLength);try{const p=t(d,f,h,c),m=p.attributes.map(v=>v.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{d.destroy(h),d.destroy(f)}});break}};function t(a,o,l,c){const u=c.attributeIDs,d=c.attributeTypes;let f,h;const p=o.GetEncodedGeometryType(l);if(p===a.TRIANGULAR_MESH)f=new a.Mesh,h=o.DecodeBufferToMesh(l,f);else if(p===a.POINT_CLOUD)f=new a.PointCloud,h=o.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!h.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const m={index:null,attributes:[]};for(const v in u){const g=self[d[v]];let y,x;if(c.useUniqueIDs)x=u[v],y=o.GetAttributeByUniqueId(f,x);else{if(x=o.GetAttributeId(f,a[u[v]]),x===-1)continue;y=o.GetAttribute(f,x)}m.attributes.push(r(a,o,f,v,g,y))}return p===a.TRIANGULAR_MESH&&(m.index=i(a,o,f)),a.destroy(f),m}function i(a,o,l){const u=l.num_faces()*3,d=u*4,f=a._malloc(d);o.GetTrianglesUInt32Array(l,d,f);const h=new Uint32Array(a.HEAPF32.buffer,f,u).slice();return a._free(f),{array:h,itemSize:1}}function r(a,o,l,c,u,d){const f=d.num_components(),p=l.num_points()*f,m=p*u.BYTES_PER_ELEMENT,v=s(a,u),g=a._malloc(m);o.GetAttributeDataArrayForAllPoints(l,d,v,m,g);const y=new u(a.HEAPF32.buffer,g,p).slice();return a._free(g),{name:c,array:y,itemSize:f}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}const L4=new Fm,Du=new Get;Du.addHandler(/\.dds$/i,new Het);Du.addHandler(/\.tga$/i,new cP);function $et(n){return L4.setFromObject(n),L4.getSize(new $e)}function Qet(n){return L4.setFromObject(n),L4.getCenter(new $e)}function Zet(n){const e=n.split(".");if(e.length<=1)return"";{let t=e.pop();return t=t.toLowerCase(),t}}function Jet(n,e,t,i,r){let s;e?s=e:s=Zet(n),s==="glb"&&(s="gltf");let a={loader:null,getObject:null};switch(s){case"dae":a={loader:new iet(Du),getObject:o=>o.scene};break;case"fbx":a={loader:new qJe(Du)};break;case"gltf":a={loader:new ret(Du),getObject:o=>{const l=o.scene;return o.animations&&(l.animations=o.animations),l}},ttt(t,a,r);break;case"obj":a={loader:new Vet(Du)};break;case"ply":a={loader:new Wet(Du),getObject:o=>(o.computeVertexNormals(),new Qs(o,i==="MeshStandardMaterial"?new Sy:new Kc({vertexColors:!0})))};break;case"stl":a={loader:new qet(Du),getObject:o=>new Qs(o,new of)};break;case"json":a={loader:new ZZe(Du)};break}return a}function ett(){return new Ket(Du)}function ttt(n,e,t){if(n){const i=new Xet;i.setDecoderPath(t||"assets/draco/gltf/"),i.setDecoderConfig({type:"js"}),e.loader.setDRACOLoader(i)}}var ntt=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t};const itt=Ie({name:"vue3dLoader"}),rtt=Ie({...itt,props:{filePath:null,fileType:null,width:null,height:null,position:null,rotation:null,scale:null,lights:{default:()=>[{type:"AmbientLight",color:11184810},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]},cameraPosition:{default:()=>({x:0,y:0,z:0})},cameraRotation:null,cameraUp:null,cameraLookAt:null,backgroundColor:{default:()=>16777215},backgroundAlpha:{default:()=>1},controlsOptions:null,crossOrigin:{default:"anonymous"},requestHeader:null,outputEncoding:{default:()=>"linear"},webGLRendererOptions:{default:()=>({})},mtlPath:{default:""},showFps:{type:Boolean,default:!1},textureImage:{default:""},clearScene:{type:Boolean,default:!1},parallelLoad:{type:Boolean,default:!1},labels:{default:()=>[]},autoPlay:{type:Boolean,default:!0},enableDraco:{type:Boolean,default:!1},dracoDir:null,intersectRecursive:{type:Boolean,default:!1},enableDamping:{type:Boolean},dampingFactor:null,verticalCtrl:{type:[Boolean,Object],default:!1},horizontalCtrl:{type:[Boolean,Object],default:!1},plyMaterial:{default:"MeshStandardMaterial"},enableAxesHelper:{type:Boolean,default:!1},axesHelperSize:{default:100},enableGridHelper:{type:Boolean,default:!1},minDistance:{default:0},maxDistance:{default:1/0},pointLightFollowCamera:{type:Boolean}},emits:["mousedown","mousemove","mouseup","click","dblclick","load","process","error"],setup(n,{expose:e,emit:t}){const i=n;let r=null;const s=new pJe,a=new Gt,o=new Xs(45,1,.1,1e5),l=new tJe;let c=new FF,u=null,d={},f=[],h=null,p=0,m=null,v=null,g=null,y=null,x=null;const b=ae({width:i.width||0,height:i.height||0}),A=ae(0),S=ae(!1),C=ae(!1),_=ae(null),M=ae(null);Mn(()=>{I()}),Fi(()=>{E()}),pt([()=>i.autoPlay],()=>{je()}),pt([()=>i.width,()=>i.height],()=>{b.value={width:i.width||0,height:i.height||0}}),pt([()=>i.enableAxesHelper,()=>i.axesHelperSize,()=>i.enableGridHelper],()=>{gt()}),pt([()=>i.minDistance,()=>i.maxDistance],()=>{Ee()}),pt([()=>i.filePath,()=>i.fileType,()=>i.mtlPath,()=>i.clearScene,()=>i.backgroundAlpha,()=>i.backgroundColor],$=>{($[0]||$[1])&&T(),$[2]&&Te(),$[3]&&qe(),($[4]||$[5])&&ee()},{deep:!0}),pt([()=>i.rotation,()=>i.position,()=>i.scale,()=>i.lights],$=>{const le=["rotation","position","scale"];$.forEach((fe,Me)=>{Me<3&&fe?tt(le[Me],fe):J()})},{deep:!0}),pt([()=>b],()=>{de(!0),ee()},{deep:!0}),pt([()=>i.controlsOptions],()=>{ue()},{deep:!0}),pt([()=>i.cameraRotation,()=>i.cameraPosition],()=>{de()},{deep:!0}),pt([()=>i.labels],()=>{G()},{deep:!0});function T(){E(),I()}function E(){p&&cancelAnimationFrame(p),u&&u.dispose(),d&&Object.keys(d).length>0&&(d.dispose(),d={});const $=_.value;$.removeEventListener("mousedown",P,!1),$.removeEventListener("mousemove",z,!1),$.removeEventListener("mouseup",O,!1),$.removeEventListener("click",N,!1),$.removeEventListener("dblclick",H,!1),window.removeEventListener("resize",B,!1),r=null,c&&c.clear()}function I(){const{filePath:$,outputEncoding:le,webGLRendererOptions:fe,showFps:Me,enableDamping:me,dampingFactor:Ae,labels:dt}=i;$&&typeof $=="object"&&(C.value=!0);const we=_.value;L(we),B();const it=Object.assign({},{antialias:!0,alpha:!0},fe,{canvas:M.value});if(!u){u=new xse(it),u.shadowMap.enabled=!0;const wt=le==="linear"?hp:Ni;u.outputEncoding=wt}(!d||Object.keys(d).length<=0)&&(d=new gJe(o,we),me&&(d.enableDamping=!0,Ae!=null&&(d.dampingFactor=Ae))),Ee(),gt(),Te(),te(),F(!0),we.addEventListener("mousedown",P,!1),we.addEventListener("mouseup",O,!1),we.addEventListener("click",N,!1),we.addEventListener("dblclick",H,!1),window.addEventListener("resize",B,!1),Me&&(m=Bb(),we.appendChild(m.dom)),ne(),dt&&dt.length>0&&G()}function L($){const{width:le,height:fe}=i;le&&($.style.width=`${le}px`),fe&&($.style.height=`${fe}px`)}function F($){const le=_.value;$?le.addEventListener("mousemove",z,!1):le.removeEventListener("mousemove",z,!1)}function B(){const{width:$,height:le}=i;(!$||!le)&&Yt(()=>{const fe=_.value;b.value={width:$||fe.offsetWidth,height:le||fe.offsetHeight}})}function P($){F(!1);const le=q($.clientX,$.clientY);t("mousedown",$,le)}function z($){const le=q($.clientX,$.clientY);t("mousemove",$,le)}function O($){const le=q($.clientX,$.clientY);t("mouseup",$,le),F(!0)}function N($){const le=q($.clientX,$.clientY);t("click",$,le)}function H($){const le=q($.clientX,$.clientY);t("dblclick",$,le)}function q($,le){const fe=pe();if(!fe||!_.value)return null;const Me=_.value.getBoundingClientRect();$-=Me.left,le-=Me.top,a.x=$/b.value.width*2-1,a.y=-(le/b.value.height)*2+1,s.setFromCamera(a,o);const me=s.intersectObject(fe,i.intersectRecursive);return(me&&me.length)>0?me[0]:null}function te(){ee(),de(),J(),ue()}function Q(){if(!r)return;const $=C.value?Oe(r):null,{position:le,rotation:fe,scale:Me}=i;le&&(le instanceof Array?$!=null?r.position.set(le[$].x,le[$].y,le[$].z):r.position.set(0,0,0):r.position.set(le.x,le.y,le.z)),fe&&(fe instanceof Array?$!=null?r.rotation.set(fe[$].x,fe[$].y,fe[$].z):r.rotation.set(0,0,0):r.rotation.set(fe.x,fe.y,fe.z)),Me&&(Me instanceof Array?$!=null?r.scale.set(Me[$].x,Me[$].y,Me[$].z):r.scale.set(1,1,1):r.scale.set(Me.x,Me.y,Me.z))}function ee(){const{backgroundColor:$,backgroundAlpha:le}=i;u.setSize(b.value.width,b.value.height),u.setPixelRatio(window.devicePixelRatio||1),u.setClearColor(new wn($).getHex()),u.setClearAlpha(le)}function de($){const{cameraPosition:le,cameraRotation:fe,cameraUp:Me,cameraLookAt:me}=i;if(o.aspect=b.value.width/b.value.height,o.updateProjectionMatrix(),!$)if(!me||!Me){if(!r)return;const Ae=$et(r).length();o.position.set(le.x,le.y,le.z),fe&&o.rotation.set(fe.x,fe.y,fe.z),le.x===0&&le.y===0&&le.z===0&&(o.position.z=Ae),o.lookAt(new $e)}else o.position.set(le.x,le.y,le.z),fe&&o.rotation.set(fe.x,fe.y,fe.z),o.up.set(Me.x,Me.y,Me.z),o.lookAt(new $e(me.x,me.y,me.z))}function J(){const{lights:$}=i;c.remove(...f),f=[],$.forEach(le=>{if(!le.type)return;const fe=le.type.toLowerCase();let Me=null;if(fe==="ambient"||fe==="ambientlight"){const me=le.color===0?le.color:le.color||4210752,Ae=le.intensity===0?le.intensity:le.intensity||1;Me=new gT(me,Ae)}if(fe==="point"||fe==="pointlight"){const me=le.color===0?le.color:le.color||16777215,Ae=le.intensity===0?le.intensity:le.intensity||1,dt=le.distance||0,we=le.decay===0?le.decay:le.decay||1;Me=new _m(me,Ae,dt,we),le.position&&Me.position.copy(le.position)}if(fe==="directional"||fe==="directionallight"){const me=le.color===0?le.color:le.color||16777215,Ae=le.intensity===0?le.intensity:le.intensity||1;Me=new BA(me,Ae),le.position&&Me.position.copy(le.position),le.target&&Me.target.copy(le.target)}if(fe==="hemisphere"||fe==="hemispherelight"){const me=le.skyColor===0?le.skyColor:le.skyColor||16777215,Ae=le.groundColor===0?le.groundColor:le.groundColor||16777215,dt=le.intensity===0?le.intensity:le.intensity||1;Me=new Use(me,Ae,dt),le.position&&Me.position.copy(le.position)}Me&&(f.push(Me),c.add(Me))})}function ue(){const{controlsOptions:$}=i;$&&Object.assign(d,$)}function Te(){const{filePath:$,parallelLoad:le}=i;le&&C?$.forEach((fe,Me)=>{De(Me)}):De()}function De($){const{filePath:le,fileType:fe,crossOrigin:Me,requestHeader:me,mtlPath:Ae,enableDraco:dt,dracoDir:we,plyMaterial:_t}=i;if(!le)return;const it=$||A.value,wt=C.value?le[it]:le,Ft=typeof fe=="string"?fe:fe?fe[it]:"",Rt=Jet(wt,Ft,dt,_t,we);h=Rt.loader;const Wt=Rt.getObject?Rt.getObject:Y;if(r&&it===0&&c.remove(r),me&&h.setRequestHeader(me),Me&&h.setCrossOrigin(Me),Ae)if(!(typeof Ae=="object"))Ne(wt,Wt,it);else{if(!Ae[it]){Le(wt,Wt,it);return}Ne(wt,Wt,it)}else Le(wt,Wt,it)}function Le($,le,fe){const{textureImage:Me,parallelLoad:me}=i;h.load($,(...Ae)=>{if(r=le(...Ae),oe(r,$),Me){const we=typeof Me=="string"?Me:Me[fe];we&&He(r,we)}t("load",c)},Ae=>{me||Ge(Ae);const dt=A.value+1;t("process",Ae,dt)},Ae=>{t("error",Ae)})}function Ne($,le,fe){const{crossOrigin:Me,requestHeader:me,mtlPath:Ae}=i,dt=ett();Me&&dt.setCrossOrigin(Me),me&&dt.setRequestHeader(me);const we=typeof Ae=="string"?Ae:Ae[fe],_t=/^(.*\/)([^/]*)$/.exec(we),it=_t[1],wt=_t[2];dt.setPath(it).load(wt,Ft=>{Ft.preload(),h.setMaterials(Ft),Le($,le,fe)})}function Y($){return $}function oe($,le){const fe=Qet(r);S.value||(c.position.copy(fe.negate()),S.value=!0),r=$;let Me=le.split("/");Me=Me[Me.length-1],r.fileName=Me,c.add(r),de(),Q(),je()}function ne(){p=requestAnimationFrame(ne),ke();const $=l.getDelta();v&&v instanceof tI&&v.update($),v&&v instanceof Array&&v.forEach(le=>{le.update($)}),d&&d.update(),Xe()}function Xe(){const{pointLightFollowCamera:$}=i;$&&lt(),u.render(c,o)}function ke(){const{showFps:$}=i;$&&m.update()}function Ge($){const{filePath:le}=i;Math.floor($.loaded/$.total*100)===100&&(C.value&&le.length>A.value?Yt(()=>{if(A.value++,A.value===le.length){A.value=0;return}De()}):A.value=0)}function He($,le){g||(g=new z1),$.traverse(fe=>{fe.isMesh&&g.load(le,Me=>{fe.material.map=Me,fe.material.needsUpdate=!0},()=>{},Me=>{t("error",Me)})})}function qe(){c.clear()}function tt($,le){const fe=pe();if(fe){if(C.value){fe.children.forEach(Me=>{const me=Oe(Me),Ae=$==="scale"?1:0;le[me]?Me[$].set(le[me].x,le[me].y,le[me].z):Me[$].set(Ae,Ae,Ae)});return}fe[$].set(le.x,le.y,le.z)}}function pe(){return C.value?c:r}function G(){const{labels:$}=i;if(!$||$.length<=0)return;Z();const le=C.value?c:r,fe=me=>(g||(g=new z1),g.load(me)),Me=(me,Ae)=>{const dt=ge(me,Ae),we=new Pa(dt);return we.needsUpdate=!0,we};$.forEach(me=>{const Ae=me.image?fe(me.image):Me(me.text,me.textStyle||{}),dt=new NF({map:Ae,color:me.spriteMaterialColor||16777215}),we=new N_(dt);me.scale?we.scale.set(me.scale.x||1,me.scale.y||1,me.scale.z||0):we.scale.set(1,1,0),me.position&&we.position.set(me.position.x,me.position.y,me.position.z),me.sid&&(we.sid=me.sid),le.add(we)})}function Z(){const $=c.children;for(let le=$.length-1;le>=0;le--){const fe=$[le];fe&&(fe instanceof Yo&&fe.children&&(c.children[le].children=fe.children.map(Me=>Me instanceof N_?null:Me).filter(Me=>Me)),fe instanceof N_&&c.remove(fe))}}function ge($,le){const fe=(Wt,hn,pi,Pn,Qi,ai)=>{Wt.beginPath(),Wt.moveTo(hn+ai,pi),Wt.lineTo(hn+Pn-ai,pi),Wt.quadraticCurveTo(hn+Pn,pi,hn+Pn,pi+ai),Wt.lineTo(hn+Pn,pi+Qi-ai),Wt.quadraticCurveTo(hn+Pn,pi+Qi,hn+Pn-ai,pi+Qi),Wt.lineTo(hn+ai,pi+Qi),Wt.quadraticCurveTo(hn,pi+Qi,hn,pi+Qi-ai),Wt.lineTo(hn,pi+ai),Wt.quadraticCurveTo(hn,pi,hn+ai,pi),Wt.closePath(),Wt.fill(),Wt.stroke()},Me=le.fontFamily||"Arial",me=le.fontSize===0||le.fontSize?le.fontSize:18,Ae=le.color||"#ffffff",dt=le.fontWeight||"normal",we=le.borderWidth===0||le.borderWidth?le.borderWidth:4,_t=le.borderColor||"rgba(0,0,0,1)",it=le.borderRadius===0||le.borderRadius?le.borderRadius:4,wt=le.backgroundColor||"rgba(255, 255, 255, 1)",Ft=document.createElement("canvas"),Rt=Ft.getContext("2d");if(Rt){Rt.font=`${dt} ${me}px ${Me}`;const hn=Rt.measureText($).width;Rt.fillStyle=wt,Rt.strokeStyle=_t,Rt.lineWidth=we,fe(Rt,we/2,we/2,hn+we,me*1.4+we,it),Rt.fillStyle=Ae,Rt.fillText($,we,me+we)}return Ft}function Oe($){const{filePath:le}=i;let fe;return le instanceof Array&&(fe=le.map((Me,me)=>{if(Me.indexOf($.fileName)>-1)return me}).filter(Me=>Me!=null)[0]),fe}function je(){const $=pe();if($){if(C.value){At($);return}bt($)}}function bt($){const{autoPlay:le}=i;v=new tI($),$.animations&&$.animations.length>0&&$.animations.forEach(fe=>{if(fe){const Me=v.clipAction(fe);le?Me.play():Me.stop()}})}function At($){const{autoPlay:le}=i;v=[],$.children.forEach((fe,Me)=>{v.push(new tI(fe)),fe.animations&&fe.animations.length>0&&fe.animations.forEach(me=>{if(me){const Ae=v[Me].clipAction(me);le?Ae.play():Ae.stop()}})})}function Ee(){if(!d)return;const{verticalCtrl:$,horizontalCtrl:le,minDistance:fe,maxDistance:Me}=i;$&&typeof $=="boolean"&&(d.minAzimuthAngle=-2*Math.PI,d.maxAzimuthAngle=-2*Math.PI),$&&typeof $=="object"&&(d.minAzimuthAngle=$.min,d.maxAzimuthAngle=$.max),le&&typeof le=="boolean"&&(d.minPolarAngle=1,d.maxPolarAngle=1),le&&typeof le=="object"&&(d.minPolarAngle=le.min,d.maxPolarAngle=le.max),fe!=0&&typeof fe=="number"&&(d.minDistance=fe),Me!=1/0&&typeof Me=="number"&&(d.maxDistance=Me)}function gt(){const{enableAxesHelper:$,enableGridHelper:le,axesHelperSize:fe}=i;$?(y=new vJe(fe),c.add(y)):y&&c.remove(y),le?(x=new mJe(2e3,100),c.add(x)):x&&c.remove(x)}function lt(){const $=o.position.clone();c.children.forEach(le=>{le instanceof _m&&le.position.set($.x,$.y,$.z)})}return e({camera:o,scene:c}),($,le)=>(W(),ve("div",{ref_key:"containerElement",ref:_,class:"viewer-container"},[be("canvas",{ref_key:"canvasElement",ref:M,class:"viewer-canvas"},null,512)],512))}});var Tae=ntt(rtt,[["__scopeId","data-v-e92274c2"]]);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const oB="174",kv={ROTATE:0,DOLLY:1,PAN:2},Fv={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},stt=0,IK=1,att=2,Eae=1,ott=2,kd=3,nd=0,Zo=1,Jl=2,jh=0,$h=1,DK=2,RK=3,PK=4,Iae=5,C0=100,ltt=101,ctt=102,utt=103,dtt=104,ftt=200,htt=201,ptt=202,mtt=203,eA=204,tA=205,vtt=206,gtt=207,ytt=208,btt=209,xtt=210,Att=211,wtt=212,Stt=213,_tt=214,hP=0,pP=1,mP=2,G1=3,vP=4,gP=5,yP=6,bP=7,Dae=0,Ctt=1,Mtt=2,Qh=0,Ttt=1,Ett=2,Itt=3,Dtt=4,Rtt=5,Ptt=6,Ltt=7,Rae=300,W1=301,q1=302,xP=303,AP=304,yT=306,wP=1e3,V0=1001,SP=1002,Ml=1003,ktt=1004,QS=1005,zu=1006,cI=1007,H0=1008,id=1009,Pae=1010,Lae=1011,nA=1012,lB=1013,sc=1014,Yc=1015,ky=1016,cB=1017,uB=1018,K1=1020,kae=35902,Fae=1021,Bae=1022,yo=1023,Nae=1024,Oae=1025,tm=1026,Y1=1027,Uae=1028,bT=1029,zae=1030,dB=1031,r1=1033,V_=33776,H_=33777,G_=33778,W_=33779,_P=35840,CP=35841,MP=35842,TP=35843,EP=36196,IP=37492,DP=37496,RP=37808,PP=37809,LP=37810,kP=37811,FP=37812,BP=37813,NP=37814,OP=37815,UP=37816,zP=37817,VP=37818,HP=37819,GP=37820,WP=37821,q_=36492,qP=36494,KP=36495,Vae=36283,YP=36284,XP=36285,jP=36286,Ftt=3200,Btt=3201,Ntt=0,Ott=1,Ih="",Yl="srgb",X1="srgb-linear",k4="linear",kr="srgb",Bv=7680,LK=519,Utt=512,ztt=513,Vtt=514,Hae=515,Htt=516,Gtt=517,Wtt=518,qtt=519,kK=35044,Ktt=35048,FK="300 es",ef=2e3,F4=2001;class Um{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Ua=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],K_=Math.PI/180,$P=180/Math.PI;function VA(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ua[n&255]+Ua[n>>8&255]+Ua[n>>16&255]+Ua[n>>24&255]+"-"+Ua[e&255]+Ua[e>>8&255]+"-"+Ua[e>>16&15|64]+Ua[e>>24&255]+"-"+Ua[t&63|128]+Ua[t>>8&255]+"-"+Ua[t>>16&255]+Ua[t>>24&255]+Ua[i&255]+Ua[i>>8&255]+Ua[i>>16&255]+Ua[i>>24&255]).toLowerCase()}function Oi(n,e,t){return Math.max(e,Math.min(t,n))}function Ytt(n,e){return(n%e+e)%e}function uI(n,e,t){return(1-t)*n+t*e}function E2(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Po(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Gae={DEG2RAD:K_};class Yn{constructor(e=0,t=0){Yn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Oi(this.x,e.x,t.x),this.y=Oi(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Oi(this.x,e,t),this.y=Oi(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Oi(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class mi{constructor(e,t,i,r,s,a,o,l,c){mi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c)}set(e,t,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],h=i[5],p=i[8],m=r[0],v=r[3],g=r[6],y=r[1],x=r[4],b=r[7],A=r[2],S=r[5],C=r[8];return s[0]=a*m+o*y+l*A,s[3]=a*v+o*x+l*S,s[6]=a*g+o*b+l*C,s[1]=c*m+u*y+d*A,s[4]=c*v+u*x+d*S,s[7]=c*g+u*b+d*C,s[2]=f*m+h*y+p*A,s[5]=f*v+h*x+p*S,s[8]=f*g+h*b+p*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,f=o*l-u*s,h=c*s-a*l,p=t*d+i*f+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*c-u*i)*m,e[2]=(o*i-r*a)*m,e[3]=f*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-o*t)*m,e[6]=h*m,e[7]=(i*l-c*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(dI.makeScale(e,t)),this}rotate(e){return this.premultiply(dI.makeRotation(-e)),this}translate(e,t){return this.premultiply(dI.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const dI=new mi;function Wae(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function B4(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Xtt(){const n=B4("canvas");return n.style.display="block",n}const BK={};function y0(n){n in BK||(BK[n]=!0,console.warn(n))}function jtt(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function $tt(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Qtt(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const NK=new mi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),OK=new mi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Ztt(){const n={enabled:!0,workingColorSpace:X1,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===kr&&(r.r=lf(r.r),r.g=lf(r.g),r.b=lf(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===kr&&(r.r=s1(r.r),r.g=s1(r.g),r.b=s1(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ih?k4:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[X1]:{primaries:e,whitePoint:i,transfer:k4,toXYZ:NK,fromXYZ:OK,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Yl},outputColorSpaceConfig:{drawingBufferColorSpace:Yl}},[Yl]:{primaries:e,whitePoint:i,transfer:kr,toXYZ:NK,fromXYZ:OK,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Yl}}}),n}const fr=Ztt();function lf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function s1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Nv;class Jtt{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nv===void 0&&(Nv=B4("canvas")),Nv.width=e.width,Nv.height=e.height;const i=Nv.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Nv}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=B4("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=lf(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(lf(t[i]/255)*255):t[i]=lf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ent=0;class fB{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ent++}),this.uuid=VA(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(fI(r[a].image)):s.push(fI(r[a]))}else s=fI(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function fI(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Jtt.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let tnt=0;class wo extends Um{constructor(e=wo.DEFAULT_IMAGE,t=wo.DEFAULT_MAPPING,i=V0,r=V0,s=zu,a=H0,o=yo,l=id,c=wo.DEFAULT_ANISOTROPY,u=Ih){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tnt++}),this.uuid=VA(),this.name="",this.source=new fB(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Yn(0,0),this.repeat=new Yn(1,1),this.center=new Yn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Rae)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wP:e.x=e.x-Math.floor(e.x);break;case V0:e.x=e.x<0?0:1;break;case SP:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case wP:e.y=e.y-Math.floor(e.y);break;case V0:e.y=e.y<0?0:1;break;case SP:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}wo.DEFAULT_IMAGE=null;wo.DEFAULT_MAPPING=Rae;wo.DEFAULT_ANISOTROPY=1;class us{constructor(e=0,t=0,i=0,r=1){us.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(c+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,b=(h+1)/2,A=(g+1)/2,S=(u+f)/4,C=(d+m)/4,_=(p+v)/4;return x>b&&x>A?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=S/i,s=C/i):b>A?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=S/r,s=_/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=C/s,r=_/s),this.set(i,r,s,t),this}let y=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(v-p)/y,this.y=(d-m)/y,this.z=(f-u)/y,this.w=Math.acos((c+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Oi(this.x,e.x,t.x),this.y=Oi(this.y,e.y,t.y),this.z=Oi(this.z,e.z,t.z),this.w=Oi(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Oi(this.x,e,t),this.y=Oi(this.y,e,t),this.z=Oi(this.z,e,t),this.w=Oi(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Oi(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nnt extends Um{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new us(0,0,e,t),this.scissorTest=!1,this.viewport=new us(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:zu,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new wo(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new fB(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class yp extends nnt{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class qae extends wo{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ml,this.minFilter=Ml,this.wrapR=V0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class int extends wo{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ml,this.minFilter=Ml,this.wrapR=V0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ds{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const f=s[a+0],h=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||c!==h||u!==p){let v=1-o;const g=l*f+c*h+u*p+d*m,y=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const A=Math.sqrt(x),S=Math.atan2(A,g*y);v=Math.sin(v*S)/A,o=Math.sin(o*S)/A}const b=o*y;if(l=l*v+f*b,c=c*v+h*b,u=u*v+p*b,d=d*v+m*b,v===1-o){const A=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=A,c*=A,u*=A,d*=A}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[a],f=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+u*d+l*h-c*f,e[t+1]=l*p+u*f+c*d-o*h,e[t+2]=c*p+u*h+o*f-l*d,e[t+3]=u*p-o*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),d=o(s/2),f=l(i/2),h=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(a-r)*h}else if(i>o&&i>d){const h=2*Math.sqrt(1+i-o-d);this._w=(u-l)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(s+c)/h}else if(o>d){const h=2*Math.sqrt(1+o-i-d);this._w=(s-c)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-i-o);this._w=(a-r)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*a+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=a*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class nt{constructor(e=0,t=0,i=0){nt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(UK.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(UK.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),u=2*(o*t-s*r),d=2*(s*i-a*t);return this.x=t+l*c+a*d-o*u,this.y=i+l*u+o*c-s*d,this.z=r+l*d+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Oi(this.x,e.x,t.x),this.y=Oi(this.y,e.y,t.y),this.z=Oi(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Oi(this.x,e,t),this.y=Oi(this.y,e,t),this.z=Oi(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Oi(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return hI.copy(this).projectOnVector(e),this.sub(hI)}reflect(e){return this.sub(hI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hI=new nt,UK=new ds;class Vu{constructor(e=new nt(1/0,1/0,1/0),t=new nt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Dc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Dc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Dc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Dc):Dc.fromBufferAttribute(s,a),Dc.applyMatrix4(e.matrixWorld),this.expandByPoint(Dc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ZS.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),ZS.copy(i.boundingBox)),ZS.applyMatrix4(e.matrixWorld),this.union(ZS)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Dc),Dc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(I2),JS.subVectors(this.max,I2),Ov.subVectors(e.a,I2),Uv.subVectors(e.b,I2),zv.subVectors(e.c,I2),sh.subVectors(Uv,Ov),ah.subVectors(zv,Uv),o0.subVectors(Ov,zv);let t=[0,-sh.z,sh.y,0,-ah.z,ah.y,0,-o0.z,o0.y,sh.z,0,-sh.x,ah.z,0,-ah.x,o0.z,0,-o0.x,-sh.y,sh.x,0,-ah.y,ah.x,0,-o0.y,o0.x,0];return!pI(t,Ov,Uv,zv,JS)||(t=[1,0,0,0,1,0,0,0,1],!pI(t,Ov,Uv,zv,JS))?!1:(e3.crossVectors(sh,ah),t=[e3.x,e3.y,e3.z],pI(t,Ov,Uv,zv,JS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Dc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ed[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ed[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ed[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ed[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ed[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ed[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ed[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ed[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ed),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ed=[new nt,new nt,new nt,new nt,new nt,new nt,new nt,new nt],Dc=new nt,ZS=new Vu,Ov=new nt,Uv=new nt,zv=new nt,sh=new nt,ah=new nt,o0=new nt,I2=new nt,JS=new nt,e3=new nt,l0=new nt;function pI(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){l0.fromArray(n,s);const o=r.x*Math.abs(l0.x)+r.y*Math.abs(l0.y)+r.z*Math.abs(l0.z),l=e.dot(l0),c=t.dot(l0),u=i.dot(l0);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const rnt=new Vu,D2=new nt,mI=new nt;class hB{constructor(e=new nt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):rnt.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;D2.subVectors(e,this.center);const t=D2.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(D2,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(mI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(D2.copy(e.center).add(mI)),this.expandByPoint(D2.copy(e.center).sub(mI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Id=new nt,vI=new nt,t3=new nt,oh=new nt,gI=new nt,n3=new nt,yI=new nt;let Kae=class{constructor(e=new nt,t=new nt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Id)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Id.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Id.copy(this.origin).addScaledVector(this.direction,t),Id.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){vI.copy(e).add(t).multiplyScalar(.5),t3.copy(t).sub(e).normalize(),oh.copy(this.origin).sub(vI);const s=e.distanceTo(t)*.5,a=-this.direction.dot(t3),o=oh.dot(this.direction),l=-oh.dot(t3),c=oh.lengthSq(),u=Math.abs(1-a*a);let d,f,h,p;if(u>0)if(d=a*l-o,f=a*o-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const m=1/u;d*=m,f*=m,h=d*(d+a*f+2*o)+f*(a*d+f+2*l)+c}else f=s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-a*s+o)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(a*s+o)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=a>0?-s:s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(vI).addScaledVector(t3,f),h}intersectSphere(e,t){Id.subVectors(e.center,this.origin);const i=Id.dot(this.direction),r=Id.dot(Id)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Id)!==null}intersectTriangle(e,t,i,r,s){gI.subVectors(t,e),n3.subVectors(i,e),yI.crossVectors(gI,n3);let a=this.direction.dot(yI),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;oh.subVectors(this.origin,e);const l=o*this.direction.dot(n3.crossVectors(oh,n3));if(l<0)return null;const c=o*this.direction.dot(gI.cross(oh));if(c<0||l+c>a)return null;const u=-o*oh.dot(yI);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class gi{constructor(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v){gi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v)}set(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gi().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Vv.setFromMatrixColumn(e,0).length(),s=1/Vv.setFromMatrixColumn(e,1).length(),a=1/Vv.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=h+p*c,t[5]=f-m*c,t[9]=-o*l,t[2]=m-f*c,t[6]=p+h*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f-m*o,t[4]=-a*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*u,t[9]=m-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=p*c-h,t[8]=f*c+m,t[1]=l*d,t[5]=m*c+f,t[9]=h*c-p,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+m,t[5]=a*u,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*u,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(snt,e,ant)}lookAt(e,t,i){const r=this.elements;return cl.subVectors(e,t),cl.lengthSq()===0&&(cl.z=1),cl.normalize(),lh.crossVectors(i,cl),lh.lengthSq()===0&&(Math.abs(i.z)===1?cl.x+=1e-4:cl.z+=1e-4,cl.normalize(),lh.crossVectors(i,cl)),lh.normalize(),i3.crossVectors(cl,lh),r[0]=lh.x,r[4]=i3.x,r[8]=cl.x,r[1]=lh.y,r[5]=i3.y,r[9]=cl.y,r[2]=lh.z,r[6]=i3.z,r[10]=cl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],h=i[13],p=i[2],m=i[6],v=i[10],g=i[14],y=i[3],x=i[7],b=i[11],A=i[15],S=r[0],C=r[4],_=r[8],M=r[12],T=r[1],E=r[5],I=r[9],L=r[13],F=r[2],B=r[6],P=r[10],z=r[14],O=r[3],N=r[7],H=r[11],q=r[15];return s[0]=a*S+o*T+l*F+c*O,s[4]=a*C+o*E+l*B+c*N,s[8]=a*_+o*I+l*P+c*H,s[12]=a*M+o*L+l*z+c*q,s[1]=u*S+d*T+f*F+h*O,s[5]=u*C+d*E+f*B+h*N,s[9]=u*_+d*I+f*P+h*H,s[13]=u*M+d*L+f*z+h*q,s[2]=p*S+m*T+v*F+g*O,s[6]=p*C+m*E+v*B+g*N,s[10]=p*_+m*I+v*P+g*H,s[14]=p*M+m*L+v*z+g*q,s[3]=y*S+x*T+b*F+A*O,s[7]=y*C+x*E+b*B+A*N,s[11]=y*_+x*I+b*P+A*H,s[15]=y*M+x*L+b*z+A*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+s*l*d-r*c*d-s*o*f+i*c*f+r*o*h-i*l*h)+m*(+t*l*h-t*c*f+s*a*f-r*a*h+r*c*u-s*l*u)+v*(+t*c*d-t*o*h-s*a*d+i*a*h+s*o*u-i*c*u)+g*(-r*o*u-t*l*d+t*o*f+r*a*d-i*a*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=d*v*c-m*f*c+m*l*h-o*v*h-d*l*g+o*f*g,x=p*f*c-u*v*c-p*l*h+a*v*h+u*l*g-a*f*g,b=u*m*c-p*d*c+p*o*h-a*m*h-u*o*g+a*d*g,A=p*d*l-u*m*l-p*o*f+a*m*f+u*o*v-a*d*v,S=t*y+i*x+r*b+s*A;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=y*C,e[1]=(m*f*s-d*v*s-m*r*h+i*v*h+d*r*g-i*f*g)*C,e[2]=(o*v*s-m*l*s+m*r*c-i*v*c-o*r*g+i*l*g)*C,e[3]=(d*l*s-o*f*s-d*r*c+i*f*c+o*r*h-i*l*h)*C,e[4]=x*C,e[5]=(u*v*s-p*f*s+p*r*h-t*v*h-u*r*g+t*f*g)*C,e[6]=(p*l*s-a*v*s-p*r*c+t*v*c+a*r*g-t*l*g)*C,e[7]=(a*f*s-u*l*s+u*r*c-t*f*c-a*r*h+t*l*h)*C,e[8]=b*C,e[9]=(p*d*s-u*m*s-p*i*h+t*m*h+u*i*g-t*d*g)*C,e[10]=(a*m*s-p*o*s+p*i*c-t*m*c-a*i*g+t*o*g)*C,e[11]=(u*o*s-a*d*s-u*i*c+t*d*c+a*i*h-t*o*h)*C,e[12]=A*C,e[13]=(u*m*r-p*d*r+p*i*f-t*m*f-u*i*v+t*d*v)*C,e[14]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*v-t*o*v)*C,e[15]=(a*d*r-u*o*r+u*i*l-t*d*l-a*i*f+t*o*f)*C,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,f=s*c,h=s*u,p=s*d,m=a*u,v=a*d,g=o*d,y=l*c,x=l*u,b=l*d,A=i.x,S=i.y,C=i.z;return r[0]=(1-(m+g))*A,r[1]=(h+b)*A,r[2]=(p-x)*A,r[3]=0,r[4]=(h-b)*S,r[5]=(1-(f+g))*S,r[6]=(v+y)*S,r[7]=0,r[8]=(p+x)*C,r[9]=(v-y)*C,r[10]=(1-(f+m))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Vv.set(r[0],r[1],r[2]).length();const a=Vv.set(r[4],r[5],r[6]).length(),o=Vv.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Rc.copy(this);const c=1/s,u=1/a,d=1/o;return Rc.elements[0]*=c,Rc.elements[1]*=c,Rc.elements[2]*=c,Rc.elements[4]*=u,Rc.elements[5]*=u,Rc.elements[6]*=u,Rc.elements[8]*=d,Rc.elements[9]*=d,Rc.elements[10]*=d,t.setFromRotationMatrix(Rc),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=ef){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),f=(i+r)/(i-r);let h,p;if(o===ef)h=-(a+s)/(a-s),p=-2*a*s/(a-s);else if(o===F4)h=-a/(a-s),p=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=ef){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(a-s),f=(t+e)*c,h=(i+r)*u;let p,m;if(o===ef)p=(a+s)*d,m=-2*d;else if(o===F4)p=s*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=m,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Vv=new nt,Rc=new gi,snt=new nt(0,0,0),ant=new nt(1,1,1),lh=new nt,i3=new nt,cl=new nt,zK=new gi,VK=new ds;class wf{constructor(e=0,t=0,i=0,r=wf.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],d=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Oi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Oi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Oi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Oi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Oi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return zK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zK,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return VK.setFromEuler(this),this.setFromQuaternion(VK,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wf.DEFAULT_ORDER="XYZ";class Yae{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ont=0;const HK=new nt,Hv=new ds,Dd=new gi,r3=new nt,R2=new nt,lnt=new nt,cnt=new ds,GK=new nt(1,0,0),WK=new nt(0,1,0),qK=new nt(0,0,1),KK={type:"added"},unt={type:"removed"},Gv={type:"childadded",child:null},bI={type:"childremoved",child:null};class Zs extends Um{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ont++}),this.uuid=VA(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zs.DEFAULT_UP.clone();const e=new nt,t=new wf,i=new ds,r=new nt(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new gi},normalMatrix:{value:new mi}}),this.matrix=new gi,this.matrixWorld=new gi,this.matrixAutoUpdate=Zs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Zs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Yae,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hv.setFromAxisAngle(e,t),this.quaternion.multiply(Hv),this}rotateOnWorldAxis(e,t){return Hv.setFromAxisAngle(e,t),this.quaternion.premultiply(Hv),this}rotateX(e){return this.rotateOnAxis(GK,e)}rotateY(e){return this.rotateOnAxis(WK,e)}rotateZ(e){return this.rotateOnAxis(qK,e)}translateOnAxis(e,t){return HK.copy(e).applyQuaternion(this.quaternion),this.position.add(HK.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(GK,e)}translateY(e){return this.translateOnAxis(WK,e)}translateZ(e){return this.translateOnAxis(qK,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Dd.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?r3.copy(e):r3.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),R2.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dd.lookAt(R2,r3,this.up):Dd.lookAt(r3,R2,this.up),this.quaternion.setFromRotationMatrix(Dd),r&&(Dd.extractRotation(r.matrixWorld),Hv.setFromRotationMatrix(Dd),this.quaternion.premultiply(Hv.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(KK),Gv.child=e,this.dispatchEvent(Gv),Gv.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(unt),bI.child=e,this.dispatchEvent(bI),bI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Dd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Dd.multiply(e.parent.matrixWorld)),e.applyMatrix4(Dd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(KK),Gv.child=e,this.dispatchEvent(Gv),Gv.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R2,e,lnt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R2,cnt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),f=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),h.length>0&&(i.animations=h),p.length>0&&(i.nodes=p)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Zs.DEFAULT_UP=new nt(0,1,0);Zs.DEFAULT_MATRIX_AUTO_UPDATE=!0;Zs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Pc=new nt,Rd=new nt,xI=new nt,Pd=new nt,Wv=new nt,qv=new nt,YK=new nt,AI=new nt,wI=new nt,SI=new nt,_I=new us,CI=new us,MI=new us;class Hc{constructor(e=new nt,t=new nt,i=new nt){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Pc.subVectors(e,t),r.cross(Pc);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Pc.subVectors(r,t),Rd.subVectors(i,t),xI.subVectors(e,t);const a=Pc.dot(Pc),o=Pc.dot(Rd),l=Pc.dot(xI),c=Rd.dot(Rd),u=Rd.dot(xI),d=a*c-o*o;if(d===0)return s.set(0,0,0),null;const f=1/d,h=(c*l-o*u)*f,p=(a*u-o*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Pd)===null?!1:Pd.x>=0&&Pd.y>=0&&Pd.x+Pd.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,Pd)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Pd.x),l.addScaledVector(a,Pd.y),l.addScaledVector(o,Pd.z),l)}static getInterpolatedAttribute(e,t,i,r,s,a){return _I.setScalar(0),CI.setScalar(0),MI.setScalar(0),_I.fromBufferAttribute(e,t),CI.fromBufferAttribute(e,i),MI.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(_I,s.x),a.addScaledVector(CI,s.y),a.addScaledVector(MI,s.z),a}static isFrontFacing(e,t,i,r){return Pc.subVectors(i,t),Rd.subVectors(e,t),Pc.cross(Rd).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Pc.subVectors(this.c,this.b),Rd.subVectors(this.a,this.b),Pc.cross(Rd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Hc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Hc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Hc.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Hc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Hc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Wv.subVectors(r,i),qv.subVectors(s,i),AI.subVectors(e,i);const l=Wv.dot(AI),c=qv.dot(AI);if(l<=0&&c<=0)return t.copy(i);wI.subVectors(e,r);const u=Wv.dot(wI),d=qv.dot(wI);if(u>=0&&d<=u)return t.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(Wv,a);SI.subVectors(e,s);const h=Wv.dot(SI),p=qv.dot(SI);if(p>=0&&h<=p)return t.copy(s);const m=h*c-l*p;if(m<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(i).addScaledVector(qv,o);const v=u*p-h*d;if(v<=0&&d-u>=0&&h-p>=0)return YK.subVectors(s,r),o=(d-u)/(d-u+(h-p)),t.copy(r).addScaledVector(YK,o);const g=1/(v+m+f);return a=m*g,o=f*g,t.copy(i).addScaledVector(Wv,a).addScaledVector(qv,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Xae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ch={h:0,s:0,l:0},s3={h:0,s:0,l:0};function TI(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class pr{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Yl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fr.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=fr.workingColorSpace){return this.r=e,this.g=t,this.b=i,fr.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=fr.workingColorSpace){if(e=Ytt(e,1),t=Oi(t,0,1),i=Oi(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=TI(a,s,e+1/3),this.g=TI(a,s,e),this.b=TI(a,s,e-1/3)}return fr.toWorkingColorSpace(this,r),this}setStyle(e,t=Yl){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Yl){const i=Xae[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lf(e.r),this.g=lf(e.g),this.b=lf(e.b),this}copyLinearToSRGB(e){return this.r=s1(e.r),this.g=s1(e.g),this.b=s1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Yl){return fr.fromWorkingColorSpace(za.copy(this),e),Math.round(Oi(za.r*255,0,255))*65536+Math.round(Oi(za.g*255,0,255))*256+Math.round(Oi(za.b*255,0,255))}getHexString(e=Yl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fr.workingColorSpace){fr.fromWorkingColorSpace(za.copy(this),t);const i=za.r,r=za.g,s=za.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=fr.workingColorSpace){return fr.fromWorkingColorSpace(za.copy(this),t),e.r=za.r,e.g=za.g,e.b=za.b,e}getStyle(e=Yl){fr.fromWorkingColorSpace(za.copy(this),e);const t=za.r,i=za.g,r=za.b;return e!==Yl?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(ch),this.setHSL(ch.h+e,ch.s+t,ch.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ch),e.getHSL(s3);const i=uI(ch.h,s3.h,t),r=uI(ch.s,s3.s,t),s=uI(ch.l,s3.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const za=new pr;pr.NAMES=Xae;let dnt=0;class xT extends Um{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dnt++}),this.uuid=VA(),this.name="",this.type="Material",this.blending=$h,this.side=nd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=eA,this.blendDst=tA,this.blendEquation=C0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pr(0,0,0),this.blendAlpha=0,this.depthFunc=G1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=LK,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bv,this.stencilZFail=Bv,this.stencilZPass=Bv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==$h&&(i.blending=this.blending),this.side!==nd&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==eA&&(i.blendSrc=this.blendSrc),this.blendDst!==tA&&(i.blendDst=this.blendDst),this.blendEquation!==C0&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==G1&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==LK&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bv&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Bv&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Bv&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Cm extends xT{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wf,this.combine=Dae,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qd=fnt();function fnt(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function hnt(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Oi(n,-65504,65504),qd.floatView[0]=n;const e=qd.uint32View[0],t=e>>23&511;return qd.baseTable[t]+((e&8388607)>>qd.shiftTable[t])}function pnt(n){const e=n>>10;return qd.uint32View[0]=qd.mantissaTable[qd.offsetTable[e]+(n&1023)]+qd.exponentTable[e],qd.floatView[0]}class iA{static toHalfFloat(e){return hnt(e)}static fromHalfFloat(e){return pnt(e)}}const Fs=new nt,a3=new Yn;let mnt=0;class fc{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:mnt++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=kK,this.updateRanges=[],this.gpuType=Yc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)a3.fromBufferAttribute(this,t),a3.applyMatrix3(e),this.setXY(t,a3.x,a3.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Fs.fromBufferAttribute(this,t),Fs.applyMatrix3(e),this.setXYZ(t,Fs.x,Fs.y,Fs.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Fs.fromBufferAttribute(this,t),Fs.applyMatrix4(e),this.setXYZ(t,Fs.x,Fs.y,Fs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Fs.fromBufferAttribute(this,t),Fs.applyNormalMatrix(e),this.setXYZ(t,Fs.x,Fs.y,Fs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Fs.fromBufferAttribute(this,t),Fs.transformDirection(e),this.setXYZ(t,Fs.x,Fs.y,Fs.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=E2(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Po(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=E2(t,this.array)),t}setX(e,t){return this.normalized&&(t=Po(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=E2(t,this.array)),t}setY(e,t){return this.normalized&&(t=Po(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=E2(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Po(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=E2(t,this.array)),t}setW(e,t){return this.normalized&&(t=Po(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Po(t,this.array),i=Po(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Po(t,this.array),i=Po(i,this.array),r=Po(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Po(t,this.array),i=Po(i,this.array),r=Po(r,this.array),s=Po(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==kK&&(e.usage=this.usage),e}}class jae extends fc{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class $ae extends fc{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Tl extends fc{constructor(e,t,i){super(new Float32Array(e),t,i)}}let vnt=0;const Ol=new gi,EI=new Zs,Kv=new nt,ul=new Vu,P2=new Vu,la=new nt;class Ac extends Um{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vnt++}),this.uuid=VA(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Wae(e)?$ae:jae)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new mi().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ol.makeRotationFromQuaternion(e),this.applyMatrix4(Ol),this}rotateX(e){return Ol.makeRotationX(e),this.applyMatrix4(Ol),this}rotateY(e){return Ol.makeRotationY(e),this.applyMatrix4(Ol),this}rotateZ(e){return Ol.makeRotationZ(e),this.applyMatrix4(Ol),this}translate(e,t,i){return Ol.makeTranslation(e,t,i),this.applyMatrix4(Ol),this}scale(e,t,i){return Ol.makeScale(e,t,i),this.applyMatrix4(Ol),this}lookAt(e){return EI.lookAt(e),EI.updateMatrix(),this.applyMatrix4(EI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kv).negate(),this.translate(Kv.x,Kv.y,Kv.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Tl(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new nt(-1/0,-1/0,-1/0),new nt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ul.setFromBufferAttribute(s),this.morphTargetsRelative?(la.addVectors(this.boundingBox.min,ul.min),this.boundingBox.expandByPoint(la),la.addVectors(this.boundingBox.max,ul.max),this.boundingBox.expandByPoint(la)):(this.boundingBox.expandByPoint(ul.min),this.boundingBox.expandByPoint(ul.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hB);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new nt,1/0);return}if(e){const i=this.boundingSphere.center;if(ul.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];P2.setFromBufferAttribute(o),this.morphTargetsRelative?(la.addVectors(ul.min,P2.min),ul.expandByPoint(la),la.addVectors(ul.max,P2.max),ul.expandByPoint(la)):(ul.expandByPoint(P2.min),ul.expandByPoint(P2.max))}ul.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)la.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(la));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)la.fromBufferAttribute(o,c),l&&(Kv.fromBufferAttribute(e,c),la.add(Kv)),r=Math.max(r,i.distanceToSquared(la))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fc(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let _=0;_<i.count;_++)o[_]=new nt,l[_]=new nt;const c=new nt,u=new nt,d=new nt,f=new Yn,h=new Yn,p=new Yn,m=new nt,v=new nt;function g(_,M,T){c.fromBufferAttribute(i,_),u.fromBufferAttribute(i,M),d.fromBufferAttribute(i,T),f.fromBufferAttribute(s,_),h.fromBufferAttribute(s,M),p.fromBufferAttribute(s,T),u.sub(c),d.sub(c),h.sub(f),p.sub(f);const E=1/(h.x*p.y-p.x*h.y);isFinite(E)&&(m.copy(u).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(E),v.copy(d).multiplyScalar(h.x).addScaledVector(u,-p.x).multiplyScalar(E),o[_].add(m),o[M].add(m),o[T].add(m),l[_].add(v),l[M].add(v),l[T].add(v))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let _=0,M=y.length;_<M;++_){const T=y[_],E=T.start,I=T.count;for(let L=E,F=E+I;L<F;L+=3)g(e.getX(L+0),e.getX(L+1),e.getX(L+2))}const x=new nt,b=new nt,A=new nt,S=new nt;function C(_){A.fromBufferAttribute(r,_),S.copy(A);const M=o[_];x.copy(M),x.sub(A.multiplyScalar(A.dot(M))).normalize(),b.crossVectors(S,M);const E=b.dot(l[_])<0?-1:1;a.setXYZW(_,x.x,x.y,x.z,E)}for(let _=0,M=y.length;_<M;++_){const T=y[_],E=T.start,I=T.count;for(let L=E,F=E+I;L<F;L+=3)C(e.getX(L+0)),C(e.getX(L+1)),C(e.getX(L+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new fc(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new nt,s=new nt,a=new nt,o=new nt,l=new nt,c=new nt,u=new nt,d=new nt;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),v=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,v),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,v),o.add(u),l.add(u),c.add(u),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)la.fromBufferAttribute(e,t),la.normalize(),e.setXYZ(t,la.x,la.y,la.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*u;for(let g=0;g<u;g++)f[p++]=c[h++]}return new fc(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ac,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,i);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const XK=new gi,c0=new Kae,o3=new hB,jK=new nt,l3=new nt,c3=new nt,u3=new nt,II=new nt,d3=new nt,$K=new nt,f3=new nt;class Ts extends Zs{constructor(e=new Ac,t=new Cm){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){d3.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],d=s[l];u!==0&&(II.fromBufferAttribute(d,e),a?d3.addScaledVector(II,u):d3.addScaledVector(II.sub(t),u))}t.add(d3)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),o3.copy(i.boundingSphere),o3.applyMatrix4(s),c0.copy(e.ray).recast(e.near),!(o3.containsPoint(c0.origin)===!1&&(c0.intersectSphere(o3,jK)===null||c0.origin.distanceToSquared(jK)>(e.far-e.near)**2))&&(XK.copy(s).invert(),c0.copy(e.ray).applyMatrix4(XK),!(i.boundingBox!==null&&c0.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,c0)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(o!==null)if(Array.isArray(a))for(let p=0,m=f.length;p<m;p++){const v=f[p],g=a[v.materialIndex],y=Math.max(v.start,h.start),x=Math.min(o.count,Math.min(v.start+v.count,h.start+h.count));for(let b=y,A=x;b<A;b+=3){const S=o.getX(b),C=o.getX(b+1),_=o.getX(b+2);r=h3(this,g,e,i,c,u,d,S,C,_),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const p=Math.max(0,h.start),m=Math.min(o.count,h.start+h.count);for(let v=p,g=m;v<g;v+=3){const y=o.getX(v),x=o.getX(v+1),b=o.getX(v+2);r=h3(this,a,e,i,c,u,d,y,x,b),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let p=0,m=f.length;p<m;p++){const v=f[p],g=a[v.materialIndex],y=Math.max(v.start,h.start),x=Math.min(l.count,Math.min(v.start+v.count,h.start+h.count));for(let b=y,A=x;b<A;b+=3){const S=b,C=b+1,_=b+2;r=h3(this,g,e,i,c,u,d,S,C,_),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const p=Math.max(0,h.start),m=Math.min(l.count,h.start+h.count);for(let v=p,g=m;v<g;v+=3){const y=v,x=v+1,b=v+2;r=h3(this,a,e,i,c,u,d,y,x,b),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}}}function gnt(n,e,t,i,r,s,a,o){let l;if(e.side===Zo?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===nd,o),l===null)return null;f3.copy(o),f3.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(f3);return c<t.near||c>t.far?null:{distance:c,point:f3.clone(),object:n}}function h3(n,e,t,i,r,s,a,o,l,c){n.getVertexPosition(o,l3),n.getVertexPosition(l,c3),n.getVertexPosition(c,u3);const u=gnt(n,e,t,i,l3,c3,u3,$K);if(u){const d=new nt;Hc.getBarycoord($K,l3,c3,u3,d),r&&(u.uv=Hc.getInterpolatedAttribute(r,o,l,c,d,new Yn)),s&&(u.uv1=Hc.getInterpolatedAttribute(s,o,l,c,d,new Yn)),a&&(u.normal=Hc.getInterpolatedAttribute(a,o,l,c,d,new nt),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a:o,b:l,c,normal:new nt,materialIndex:0};Hc.getNormal(l3,c3,u3,f.normal),u.face=f,u.barycoord=d}return u}class Fy extends Ac{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Tl(c,3)),this.setAttribute("normal",new Tl(u,3)),this.setAttribute("uv",new Tl(d,2));function p(m,v,g,y,x,b,A,S,C,_,M){const T=b/C,E=A/_,I=b/2,L=A/2,F=S/2,B=C+1,P=_+1;let z=0,O=0;const N=new nt;for(let H=0;H<P;H++){const q=H*E-L;for(let te=0;te<B;te++){const Q=te*T-I;N[m]=Q*y,N[v]=q*x,N[g]=F,c.push(N.x,N.y,N.z),N[m]=0,N[v]=0,N[g]=S>0?1:-1,u.push(N.x,N.y,N.z),d.push(te/C),d.push(1-H/_),z+=1}}for(let H=0;H<_;H++)for(let q=0;q<C;q++){const te=f+q+B*H,Q=f+q+B*(H+1),ee=f+(q+1)+B*(H+1),de=f+(q+1)+B*H;l.push(te,Q,de),l.push(Q,ee,de),O+=6}o.addGroup(h,O,M),h+=O,f+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function j1(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ao(n){const e={};for(let t=0;t<n.length;t++){const i=j1(n[t]);for(const r in i)e[r]=i[r]}return e}function ynt(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Qae(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fr.workingColorSpace}const bnt={clone:j1,merge:ao};var xnt=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ant=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class El extends xT{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=xnt,this.fragmentShader=Ant,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=j1(e.uniforms),this.uniformsGroups=ynt(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Zae extends Zs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gi,this.projectionMatrix=new gi,this.projectionMatrixInverse=new gi,this.coordinateSystem=ef}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const uh=new nt,QK=new Yn,ZK=new Yn;class Ql extends Zae{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$P*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(K_*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $P*2*Math.atan(Math.tan(K_*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){uh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(uh.x,uh.y).multiplyScalar(-e/uh.z),uh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(uh.x,uh.y).multiplyScalar(-e/uh.z)}getViewSize(e,t){return this.getViewBounds(e,QK,ZK),t.subVectors(ZK,QK)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(K_*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Yv=-90,Xv=1;class wnt extends Zs{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ql(Yv,Xv,e,t);r.layers=this.layers,this.add(r);const s=new Ql(Yv,Xv,e,t);s.layers=this.layers,this.add(s);const a=new Ql(Yv,Xv,e,t);a.layers=this.layers,this.add(a);const o=new Ql(Yv,Xv,e,t);o.layers=this.layers,this.add(o);const l=new Ql(Yv,Xv,e,t);l.layers=this.layers,this.add(l);const c=new Ql(Yv,Xv,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===ef)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===F4)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Jae extends wo{constructor(e,t,i,r,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:W1,super(e,t,i,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Snt extends yp{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Jae(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:zu}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Fy(5,5,5),s=new El({name:"CubemapFromEquirect",uniforms:j1(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zo,blending:jh});s.uniforms.tEquirect.value=t;const a=new Ts(r,s),o=t.minFilter;return t.minFilter===H0&&(t.minFilter=zu),new wnt(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class p3 extends Zs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _nt={type:"move"};class DI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new p3,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new p3,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new nt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new nt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new p3,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new nt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new nt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,i),g=this._getHandJoint(c,m);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(_nt)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new p3;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Cnt extends Zs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new wf,this.environmentIntensity=1,this.environmentRotation=new wf,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class dh extends wo{constructor(e=null,t=1,i=1,r,s,a,o,l,c=Ml,u=Ml,d,f){super(null,a,o,l,c,u,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Mnt extends fc{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const RI=new nt,Tnt=new nt,Ent=new mi;class _h{constructor(e=new nt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=RI.subVectors(i,t).cross(Tnt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(RI),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Ent.getNormalMatrix(e),r=this.coplanarPoint(RI).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const u0=new hB,m3=new nt;class eoe{constructor(e=new _h,t=new _h,i=new _h,r=new _h,s=new _h,a=new _h){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ef){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],d=r[6],f=r[7],h=r[8],p=r[9],m=r[10],v=r[11],g=r[12],y=r[13],x=r[14],b=r[15];if(i[0].setComponents(l-s,f-c,v-h,b-g).normalize(),i[1].setComponents(l+s,f+c,v+h,b+g).normalize(),i[2].setComponents(l+a,f+u,v+p,b+y).normalize(),i[3].setComponents(l-a,f-u,v-p,b-y).normalize(),i[4].setComponents(l-o,f-d,v-m,b-x).normalize(),t===ef)i[5].setComponents(l+o,f+d,v+m,b+x).normalize();else if(t===F4)i[5].setComponents(o,d,m,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),u0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),u0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(u0)}intersectsSprite(e){return u0.center.set(0,0,0),u0.radius=.7071067811865476,u0.applyMatrix4(e.matrixWorld),this.intersectsSphere(u0)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(m3.x=r.normal.x>0?e.max.x:e.min.x,m3.y=r.normal.y>0?e.max.y:e.min.y,m3.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(m3)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class pB extends wo{constructor(e,t,i,r,s,a,o,l,c,u=tm){if(u!==tm&&u!==Y1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===tm&&(i=sc),i===void 0&&u===Y1&&(i=K1),super(null,r,s,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Ml,this.minFilter=l!==void 0?l:Ml,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new fB(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class rA extends Ac{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],f=[],h=[];let p=0;const m=[],v=i/2;let g=0;y(),a===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new Tl(d,3)),this.setAttribute("normal",new Tl(f,3)),this.setAttribute("uv",new Tl(h,2));function y(){const b=new nt,A=new nt;let S=0;const C=(t-e)/i;for(let _=0;_<=s;_++){const M=[],T=_/s,E=T*(t-e)+e;for(let I=0;I<=r;I++){const L=I/r,F=L*l+o,B=Math.sin(F),P=Math.cos(F);A.x=E*B,A.y=-T*i+v,A.z=E*P,d.push(A.x,A.y,A.z),b.set(B,C,P).normalize(),f.push(b.x,b.y,b.z),h.push(L,1-T),M.push(p++)}m.push(M)}for(let _=0;_<r;_++)for(let M=0;M<s;M++){const T=m[M][_],E=m[M+1][_],I=m[M+1][_+1],L=m[M][_+1];(e>0||M!==0)&&(u.push(T,E,L),S+=3),(t>0||M!==s-1)&&(u.push(E,I,L),S+=3)}c.addGroup(g,S,0),g+=S}function x(b){const A=p,S=new Yn,C=new nt;let _=0;const M=b===!0?e:t,T=b===!0?1:-1;for(let I=1;I<=r;I++)d.push(0,v*T,0),f.push(0,T,0),h.push(.5,.5),p++;const E=p;for(let I=0;I<=r;I++){const F=I/r*l+o,B=Math.cos(F),P=Math.sin(F);C.x=M*P,C.y=v*T,C.z=M*B,d.push(C.x,C.y,C.z),f.push(0,T,0),S.x=B*.5+.5,S.y=P*.5*T+.5,h.push(S.x,S.y),p++}for(let I=0;I<r;I++){const L=A+I,F=E+I;b===!0?u.push(F,F+1,L):u.push(F+1,F,L),_+=3}c.addGroup(g,_,b===!0?1:2),g+=_}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rA(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class mB extends rA{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new mB(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $1 extends Ac{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,d=e/o,f=t/l,h=[],p=[],m=[],v=[];for(let g=0;g<u;g++){const y=g*f-a;for(let x=0;x<c;x++){const b=x*d-s;p.push(b,-y,0),m.push(0,0,1),v.push(x/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let y=0;y<o;y++){const x=y+c*g,b=y+c*(g+1),A=y+1+c*(g+1),S=y+1+c*g;h.push(x,b,S),h.push(b,A,S)}this.setIndex(h),this.setAttribute("position",new Tl(p,3)),this.setAttribute("normal",new Tl(m,3)),this.setAttribute("uv",new Tl(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $1(e.width,e.height,e.widthSegments,e.heightSegments)}}class N4 extends Ac{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new nt,f=new nt,h=[],p=[],m=[],v=[];for(let g=0;g<=i;g++){const y=[],x=g/i;let b=0;g===0&&a===0?b=.5/t:g===i&&l===Math.PI&&(b=-.5/t);for(let A=0;A<=t;A++){const S=A/t;d.x=-e*Math.cos(r+S*s)*Math.sin(a+x*o),d.y=e*Math.cos(a+x*o),d.z=e*Math.sin(r+S*s)*Math.sin(a+x*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),v.push(S+b,1-x),y.push(c++)}u.push(y)}for(let g=0;g<i;g++)for(let y=0;y<t;y++){const x=u[g][y+1],b=u[g][y],A=u[g+1][y],S=u[g+1][y+1];(g!==0||a>0)&&h.push(x,b,S),(g!==i-1||l<Math.PI)&&h.push(b,A,S)}this.setIndex(h),this.setAttribute("position",new Tl(p,3)),this.setAttribute("normal",new Tl(m,3)),this.setAttribute("uv",new Tl(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N4(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Int extends xT{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ftt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Dnt extends xT{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class vB extends Zae{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Rnt extends Ac{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Pnt extends Ql{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class JK{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Oi(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Oi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}function eY(n,e,t,i){const r=Lnt(i);switch(t){case Fae:return n*e;case Nae:return n*e;case Oae:return n*e*2;case Uae:return n*e/r.components*r.byteLength;case bT:return n*e/r.components*r.byteLength;case zae:return n*e*2/r.components*r.byteLength;case dB:return n*e*2/r.components*r.byteLength;case Bae:return n*e*3/r.components*r.byteLength;case yo:return n*e*4/r.components*r.byteLength;case r1:return n*e*4/r.components*r.byteLength;case V_:case H_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case G_:case W_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case CP:case TP:return Math.max(n,16)*Math.max(e,8)/4;case _P:case MP:return Math.max(n,8)*Math.max(e,8)/2;case EP:case IP:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case DP:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case RP:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case PP:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case LP:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case kP:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case FP:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case BP:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case NP:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case OP:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case UP:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case zP:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case VP:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case HP:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case GP:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case WP:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case q_:case qP:case KP:return Math.ceil(n/4)*Math.ceil(e/4)*16;case Vae:case YP:return Math.ceil(n/4)*Math.ceil(e/4)*8;case XP:case jP:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Lnt(n){switch(n){case id:case Pae:return{byteLength:1,components:1};case nA:case Lae:case ky:return{byteLength:2,components:1};case cB:case uB:return{byteLength:2,components:4};case sc:case lB:case Yc:return{byteLength:4,components:1};case kae:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:oB}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=oB);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function toe(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function knt(n){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,d=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,u),o.onUploadCallback();let h;if(c instanceof Float32Array)h=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?h=n.HALF_FLOAT:h=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)h=n.SHORT;else if(c instanceof Uint32Array)h=n.UNSIGNED_INT;else if(c instanceof Int32Array)h=n.INT;else if(c instanceof Int8Array)h=n.BYTE;else if(c instanceof Uint8Array)h=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)h=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:h,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,o),d.length===0)n.bufferSubData(c,0,u);else{d.sort((h,p)=>h.start-p.start);let f=0;for(let h=1;h<d.length;h++){const p=d[f],m=d[h];m.start<=p.start+p.count+1?p.count=Math.max(p.count,m.start+m.count-p.start):(++f,d[f]=m)}d.length=f+1;for(let h=0,p=d.length;h<p;h++){const m=d[h];n.bufferSubData(c,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}var Fnt=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Bnt=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Nnt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Ont=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Unt=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,znt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Vnt=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Hnt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Gnt=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Wnt=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,qnt=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Knt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ynt=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Xnt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,jnt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$nt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Qnt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Znt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Jnt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,eit=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,tit=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,nit=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,iit=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,rit=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,sit=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ait=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,oit=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,lit=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,cit=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,uit=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,dit="gl_FragColor = linearToOutputTexel( gl_FragColor );",fit=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,hit=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,pit=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,mit=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,vit=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,git=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,yit=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bit=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,xit=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ait=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,wit=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Sit=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_it=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Cit=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Mit=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Tit=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Eit=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Iit=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Dit=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Rit=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Pit=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Lit=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kit=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Fit=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Bit=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Nit=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Oit=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Uit=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zit=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Vit=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Hit=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Git=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Wit=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qit=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Kit=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Yit=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Xit=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jit=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,$it=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Qit=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Zit=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Jit=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ert=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,trt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nrt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,irt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,rrt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,srt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,art=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ort=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,lrt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,crt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,urt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,drt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,frt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,hrt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,prt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,mrt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,vrt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,grt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,yrt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,brt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,xrt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Art=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,wrt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Srt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_rt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Crt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Mrt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Trt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ert=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Irt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Drt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Rrt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Prt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Lrt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const krt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Frt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Brt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Nrt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ort=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Urt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zrt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Vrt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Hrt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Grt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Wrt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qrt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Krt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yrt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xrt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jrt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$rt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qrt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zrt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Jrt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,est=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,tst=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,nst=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ist=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rst=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,sst=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ast=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ost=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lst=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,cst=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ust=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dst=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fst=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hst=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ri={alphahash_fragment:Fnt,alphahash_pars_fragment:Bnt,alphamap_fragment:Nnt,alphamap_pars_fragment:Ont,alphatest_fragment:Unt,alphatest_pars_fragment:znt,aomap_fragment:Vnt,aomap_pars_fragment:Hnt,batching_pars_vertex:Gnt,batching_vertex:Wnt,begin_vertex:qnt,beginnormal_vertex:Knt,bsdfs:Ynt,iridescence_fragment:Xnt,bumpmap_pars_fragment:jnt,clipping_planes_fragment:$nt,clipping_planes_pars_fragment:Qnt,clipping_planes_pars_vertex:Znt,clipping_planes_vertex:Jnt,color_fragment:eit,color_pars_fragment:tit,color_pars_vertex:nit,color_vertex:iit,common:rit,cube_uv_reflection_fragment:sit,defaultnormal_vertex:ait,displacementmap_pars_vertex:oit,displacementmap_vertex:lit,emissivemap_fragment:cit,emissivemap_pars_fragment:uit,colorspace_fragment:dit,colorspace_pars_fragment:fit,envmap_fragment:hit,envmap_common_pars_fragment:pit,envmap_pars_fragment:mit,envmap_pars_vertex:vit,envmap_physical_pars_fragment:Tit,envmap_vertex:git,fog_vertex:yit,fog_pars_vertex:bit,fog_fragment:xit,fog_pars_fragment:Ait,gradientmap_pars_fragment:wit,lightmap_pars_fragment:Sit,lights_lambert_fragment:_it,lights_lambert_pars_fragment:Cit,lights_pars_begin:Mit,lights_toon_fragment:Eit,lights_toon_pars_fragment:Iit,lights_phong_fragment:Dit,lights_phong_pars_fragment:Rit,lights_physical_fragment:Pit,lights_physical_pars_fragment:Lit,lights_fragment_begin:kit,lights_fragment_maps:Fit,lights_fragment_end:Bit,logdepthbuf_fragment:Nit,logdepthbuf_pars_fragment:Oit,logdepthbuf_pars_vertex:Uit,logdepthbuf_vertex:zit,map_fragment:Vit,map_pars_fragment:Hit,map_particle_fragment:Git,map_particle_pars_fragment:Wit,metalnessmap_fragment:qit,metalnessmap_pars_fragment:Kit,morphinstance_vertex:Yit,morphcolor_vertex:Xit,morphnormal_vertex:jit,morphtarget_pars_vertex:$it,morphtarget_vertex:Qit,normal_fragment_begin:Zit,normal_fragment_maps:Jit,normal_pars_fragment:ert,normal_pars_vertex:trt,normal_vertex:nrt,normalmap_pars_fragment:irt,clearcoat_normal_fragment_begin:rrt,clearcoat_normal_fragment_maps:srt,clearcoat_pars_fragment:art,iridescence_pars_fragment:ort,opaque_fragment:lrt,packing:crt,premultiplied_alpha_fragment:urt,project_vertex:drt,dithering_fragment:frt,dithering_pars_fragment:hrt,roughnessmap_fragment:prt,roughnessmap_pars_fragment:mrt,shadowmap_pars_fragment:vrt,shadowmap_pars_vertex:grt,shadowmap_vertex:yrt,shadowmask_pars_fragment:brt,skinbase_vertex:xrt,skinning_pars_vertex:Art,skinning_vertex:wrt,skinnormal_vertex:Srt,specularmap_fragment:_rt,specularmap_pars_fragment:Crt,tonemapping_fragment:Mrt,tonemapping_pars_fragment:Trt,transmission_fragment:Ert,transmission_pars_fragment:Irt,uv_pars_fragment:Drt,uv_pars_vertex:Rrt,uv_vertex:Prt,worldpos_vertex:Lrt,background_vert:krt,background_frag:Frt,backgroundCube_vert:Brt,backgroundCube_frag:Nrt,cube_vert:Ort,cube_frag:Urt,depth_vert:zrt,depth_frag:Vrt,distanceRGBA_vert:Hrt,distanceRGBA_frag:Grt,equirect_vert:Wrt,equirect_frag:qrt,linedashed_vert:Krt,linedashed_frag:Yrt,meshbasic_vert:Xrt,meshbasic_frag:jrt,meshlambert_vert:$rt,meshlambert_frag:Qrt,meshmatcap_vert:Zrt,meshmatcap_frag:Jrt,meshnormal_vert:est,meshnormal_frag:tst,meshphong_vert:nst,meshphong_frag:ist,meshphysical_vert:rst,meshphysical_frag:sst,meshtoon_vert:ast,meshtoon_frag:ost,points_vert:lst,points_frag:cst,shadow_vert:ust,shadow_frag:dst,sprite_vert:fst,sprite_frag:hst},Sn={common:{diffuse:{value:new pr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mi},alphaMap:{value:null},alphaMapTransform:{value:new mi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mi}},envmap:{envMap:{value:null},envMapRotation:{value:new mi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mi},normalScale:{value:new Yn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new mi},alphaTest:{value:0},uvTransform:{value:new mi}},sprite:{diffuse:{value:new pr(16777215)},opacity:{value:1},center:{value:new Yn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mi},alphaMap:{value:null},alphaMapTransform:{value:new mi},alphaTest:{value:0}}},Lu={basic:{uniforms:ao([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.fog]),vertexShader:Ri.meshbasic_vert,fragmentShader:Ri.meshbasic_frag},lambert:{uniforms:ao([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,Sn.lights,{emissive:{value:new pr(0)}}]),vertexShader:Ri.meshlambert_vert,fragmentShader:Ri.meshlambert_frag},phong:{uniforms:ao([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,Sn.lights,{emissive:{value:new pr(0)},specular:{value:new pr(1118481)},shininess:{value:30}}]),vertexShader:Ri.meshphong_vert,fragmentShader:Ri.meshphong_frag},standard:{uniforms:ao([Sn.common,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.roughnessmap,Sn.metalnessmap,Sn.fog,Sn.lights,{emissive:{value:new pr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ri.meshphysical_vert,fragmentShader:Ri.meshphysical_frag},toon:{uniforms:ao([Sn.common,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.gradientmap,Sn.fog,Sn.lights,{emissive:{value:new pr(0)}}]),vertexShader:Ri.meshtoon_vert,fragmentShader:Ri.meshtoon_frag},matcap:{uniforms:ao([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,{matcap:{value:null}}]),vertexShader:Ri.meshmatcap_vert,fragmentShader:Ri.meshmatcap_frag},points:{uniforms:ao([Sn.points,Sn.fog]),vertexShader:Ri.points_vert,fragmentShader:Ri.points_frag},dashed:{uniforms:ao([Sn.common,Sn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ri.linedashed_vert,fragmentShader:Ri.linedashed_frag},depth:{uniforms:ao([Sn.common,Sn.displacementmap]),vertexShader:Ri.depth_vert,fragmentShader:Ri.depth_frag},normal:{uniforms:ao([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,{opacity:{value:1}}]),vertexShader:Ri.meshnormal_vert,fragmentShader:Ri.meshnormal_frag},sprite:{uniforms:ao([Sn.sprite,Sn.fog]),vertexShader:Ri.sprite_vert,fragmentShader:Ri.sprite_frag},background:{uniforms:{uvTransform:{value:new mi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ri.background_vert,fragmentShader:Ri.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new mi}},vertexShader:Ri.backgroundCube_vert,fragmentShader:Ri.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ri.cube_vert,fragmentShader:Ri.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ri.equirect_vert,fragmentShader:Ri.equirect_frag},distanceRGBA:{uniforms:ao([Sn.common,Sn.displacementmap,{referencePosition:{value:new nt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ri.distanceRGBA_vert,fragmentShader:Ri.distanceRGBA_frag},shadow:{uniforms:ao([Sn.lights,Sn.fog,{color:{value:new pr(0)},opacity:{value:1}}]),vertexShader:Ri.shadow_vert,fragmentShader:Ri.shadow_frag}};Lu.physical={uniforms:ao([Lu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mi},clearcoatNormalScale:{value:new Yn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mi},sheen:{value:0},sheenColor:{value:new pr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mi},transmissionSamplerSize:{value:new Yn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mi},attenuationDistance:{value:0},attenuationColor:{value:new pr(0)},specularColor:{value:new pr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mi},anisotropyVector:{value:new Yn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new mi}}]),vertexShader:Ri.meshphysical_vert,fragmentShader:Ri.meshphysical_frag};const v3={r:0,b:0,g:0},d0=new wf,pst=new gi;function mst(n,e,t,i,r,s,a){const o=new pr(0);let l=s===!0?0:1,c,u,d=null,f=0,h=null;function p(x){let b=x.isScene===!0?x.background:null;return b&&b.isTexture&&(b=(x.backgroundBlurriness>0?t:e).get(b)),b}function m(x){let b=!1;const A=p(x);A===null?g(o,l):A&&A.isColor&&(g(A,1),b=!0);const S=n.xr.getEnvironmentBlendMode();S==="additive"?i.buffers.color.setClear(0,0,0,1,a):S==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||b)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(x,b){const A=p(b);A&&(A.isCubeTexture||A.mapping===yT)?(u===void 0&&(u=new Ts(new Fy(1,1,1),new El({name:"BackgroundCubeMaterial",uniforms:j1(Lu.backgroundCube.uniforms),vertexShader:Lu.backgroundCube.vertexShader,fragmentShader:Lu.backgroundCube.fragmentShader,side:Zo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,C,_){this.matrixWorld.copyPosition(_.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),d0.copy(b.backgroundRotation),d0.x*=-1,d0.y*=-1,d0.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(d0.y*=-1,d0.z*=-1),u.material.uniforms.envMap.value=A,u.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(pst.makeRotationFromEuler(d0)),u.material.toneMapped=fr.getTransfer(A.colorSpace)!==kr,(d!==A||f!==A.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,d=A,f=A.version,h=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):A&&A.isTexture&&(c===void 0&&(c=new Ts(new $1(2,2),new El({name:"BackgroundMaterial",uniforms:j1(Lu.background.uniforms),vertexShader:Lu.background.vertexShader,fragmentShader:Lu.background.fragmentShader,side:nd,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=A,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.toneMapped=fr.getTransfer(A.colorSpace)!==kr,A.matrixAutoUpdate===!0&&A.updateMatrix(),c.material.uniforms.uvTransform.value.copy(A.matrix),(d!==A||f!==A.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,d=A,f=A.version,h=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function g(x,b){x.getRGB(v3,Qae(n)),i.buffers.color.setClear(v3.r,v3.g,v3.b,b,a)}function y(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(x,b=1){o.set(x),l=b,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,g(o,l)},render:m,addToRenderList:v,dispose:y}}function vst(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,a=!1;function o(T,E,I,L,F){let B=!1;const P=d(L,I,E);s!==P&&(s=P,c(s.object)),B=h(T,L,I,F),B&&p(T,L,I,F),F!==null&&e.update(F,n.ELEMENT_ARRAY_BUFFER),(B||a)&&(a=!1,b(T,E,I,L),F!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(F).buffer))}function l(){return n.createVertexArray()}function c(T){return n.bindVertexArray(T)}function u(T){return n.deleteVertexArray(T)}function d(T,E,I){const L=I.wireframe===!0;let F=i[T.id];F===void 0&&(F={},i[T.id]=F);let B=F[E.id];B===void 0&&(B={},F[E.id]=B);let P=B[L];return P===void 0&&(P=f(l()),B[L]=P),P}function f(T){const E=[],I=[],L=[];for(let F=0;F<t;F++)E[F]=0,I[F]=0,L[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:I,attributeDivisors:L,object:T,attributes:{},index:null}}function h(T,E,I,L){const F=s.attributes,B=E.attributes;let P=0;const z=I.getAttributes();for(const O in z)if(z[O].location>=0){const H=F[O];let q=B[O];if(q===void 0&&(O==="instanceMatrix"&&T.instanceMatrix&&(q=T.instanceMatrix),O==="instanceColor"&&T.instanceColor&&(q=T.instanceColor)),H===void 0||H.attribute!==q||q&&H.data!==q.data)return!0;P++}return s.attributesNum!==P||s.index!==L}function p(T,E,I,L){const F={},B=E.attributes;let P=0;const z=I.getAttributes();for(const O in z)if(z[O].location>=0){let H=B[O];H===void 0&&(O==="instanceMatrix"&&T.instanceMatrix&&(H=T.instanceMatrix),O==="instanceColor"&&T.instanceColor&&(H=T.instanceColor));const q={};q.attribute=H,H&&H.data&&(q.data=H.data),F[O]=q,P++}s.attributes=F,s.attributesNum=P,s.index=L}function m(){const T=s.newAttributes;for(let E=0,I=T.length;E<I;E++)T[E]=0}function v(T){g(T,0)}function g(T,E){const I=s.newAttributes,L=s.enabledAttributes,F=s.attributeDivisors;I[T]=1,L[T]===0&&(n.enableVertexAttribArray(T),L[T]=1),F[T]!==E&&(n.vertexAttribDivisor(T,E),F[T]=E)}function y(){const T=s.newAttributes,E=s.enabledAttributes;for(let I=0,L=E.length;I<L;I++)E[I]!==T[I]&&(n.disableVertexAttribArray(I),E[I]=0)}function x(T,E,I,L,F,B,P){P===!0?n.vertexAttribIPointer(T,E,I,F,B):n.vertexAttribPointer(T,E,I,L,F,B)}function b(T,E,I,L){m();const F=L.attributes,B=I.getAttributes(),P=E.defaultAttributeValues;for(const z in B){const O=B[z];if(O.location>=0){let N=F[z];if(N===void 0&&(z==="instanceMatrix"&&T.instanceMatrix&&(N=T.instanceMatrix),z==="instanceColor"&&T.instanceColor&&(N=T.instanceColor)),N!==void 0){const H=N.normalized,q=N.itemSize,te=e.get(N);if(te===void 0)continue;const Q=te.buffer,ee=te.type,de=te.bytesPerElement,J=ee===n.INT||ee===n.UNSIGNED_INT||N.gpuType===lB;if(N.isInterleavedBufferAttribute){const ue=N.data,Te=ue.stride,De=N.offset;if(ue.isInstancedInterleavedBuffer){for(let Le=0;Le<O.locationSize;Le++)g(O.location+Le,ue.meshPerAttribute);T.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Le=0;Le<O.locationSize;Le++)v(O.location+Le);n.bindBuffer(n.ARRAY_BUFFER,Q);for(let Le=0;Le<O.locationSize;Le++)x(O.location+Le,q/O.locationSize,ee,H,Te*de,(De+q/O.locationSize*Le)*de,J)}else{if(N.isInstancedBufferAttribute){for(let ue=0;ue<O.locationSize;ue++)g(O.location+ue,N.meshPerAttribute);T.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=N.meshPerAttribute*N.count)}else for(let ue=0;ue<O.locationSize;ue++)v(O.location+ue);n.bindBuffer(n.ARRAY_BUFFER,Q);for(let ue=0;ue<O.locationSize;ue++)x(O.location+ue,q/O.locationSize,ee,H,q*de,q/O.locationSize*ue*de,J)}}else if(P!==void 0){const H=P[z];if(H!==void 0)switch(H.length){case 2:n.vertexAttrib2fv(O.location,H);break;case 3:n.vertexAttrib3fv(O.location,H);break;case 4:n.vertexAttrib4fv(O.location,H);break;default:n.vertexAttrib1fv(O.location,H)}}}}y()}function A(){_();for(const T in i){const E=i[T];for(const I in E){const L=E[I];for(const F in L)u(L[F].object),delete L[F];delete E[I]}delete i[T]}}function S(T){if(i[T.id]===void 0)return;const E=i[T.id];for(const I in E){const L=E[I];for(const F in L)u(L[F].object),delete L[F];delete E[I]}delete i[T.id]}function C(T){for(const E in i){const I=i[E];if(I[T.id]===void 0)continue;const L=I[T.id];for(const F in L)u(L[F].object),delete L[F];delete I[T.id]}}function _(){M(),a=!0,s!==r&&(s=r,c(s.object))}function M(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:_,resetDefaultState:M,dispose:A,releaseStatesOfGeometry:S,releaseStatesOfProgram:C,initAttributes:m,enableAttribute:v,disableUnusedAttributes:y}}function gst(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function a(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function o(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let h=0;for(let p=0;p<d;p++)h+=u[p];t.update(h,i,1)}function l(c,u,d,f){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<c.length;p++)a(c[p],u[p],f[p]);else{h.multiDrawArraysInstancedWEBGL(i,c,0,u,0,f,0,d);let p=0;for(let m=0;m<d;m++)p+=u[m]*f[m];t.update(p,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function yst(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(C){return!(C!==yo&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(C){const _=C===ky&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==id&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==Yc&&!_)}function l(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),x=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=p>0,S=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:y,maxVaryings:x,maxFragmentUniforms:b,vertexTextures:A,maxSamples:S}}function bst(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new _h,o=new mi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||i!==0||r;return r=f,i=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!r||p===null||p.length===0||s&&!v)s?u(null):c();else{const y=s?0:i,x=y*4;let b=g.clippingState||null;l.value=b,b=u(p,f,x,h);for(let A=0;A!==x;++A)b[A]=t[A];g.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,f,h,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=h+m*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(v===null||v.length<g)&&(v=new Float32Array(g));for(let x=0,b=h;x!==m;++x,b+=4)a.copy(d[x]).applyMatrix4(y,o),a.normal.toArray(v,b),v[b+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function xst(n){let e=new WeakMap;function t(a,o){return o===xP?a.mapping=W1:o===AP&&(a.mapping=q1),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===xP||o===AP)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new Snt(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Lg=4,tY=[.125,.215,.35,.446,.526,.582],M0=20,PI=new vB,nY=new pr;let LI=null,kI=0,FI=0,BI=!1;const b0=(1+Math.sqrt(5))/2,jv=1/b0,iY=[new nt(-b0,jv,0),new nt(b0,jv,0),new nt(-jv,0,b0),new nt(jv,0,b0),new nt(0,b0,-jv),new nt(0,b0,jv),new nt(-1,1,-1),new nt(1,1,-1),new nt(-1,1,1),new nt(1,1,1)],Ast=new nt;class rY{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:a=256,position:o=Ast}=s;LI=this._renderer.getRenderTarget(),kI=this._renderer.getActiveCubeFace(),FI=this._renderer.getActiveMipmapLevel(),BI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=oY(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=aY(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(LI,kI,FI),this._renderer.xr.enabled=BI,e.scissorTest=!1,g3(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===W1||e.mapping===q1?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),LI=this._renderer.getRenderTarget(),kI=this._renderer.getActiveCubeFace(),FI=this._renderer.getActiveMipmapLevel(),BI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:zu,minFilter:zu,generateMipmaps:!1,type:ky,format:yo,colorSpace:X1,depthBuffer:!1},r=sY(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=sY(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=wst(s)),this._blurMaterial=Sst(s,e,t)}return r}_compileMaterial(e){const t=new Ts(this._lodPlanes[0],e);this._renderer.compile(t,PI)}_sceneToCubeUV(e,t,i,r,s){const l=new Ql(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,h=d.toneMapping;d.getClearColor(nY),d.toneMapping=Qh,d.autoClear=!1;const p=new Cm({name:"PMREM.Background",side:Zo,depthWrite:!1,depthTest:!1}),m=new Ts(new Fy,p);let v=!1;const g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,v=!0):(p.color.copy(nY),v=!0);for(let y=0;y<6;y++){const x=y%3;x===0?(l.up.set(0,c[y],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[y],s.y,s.z)):x===1?(l.up.set(0,0,c[y]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[y],s.z)):(l.up.set(0,c[y],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[y]));const b=this._cubeSize;g3(r,x*b,y>2?b:0,b,b),d.setRenderTarget(r),v&&d.render(m,l),d.render(e,l)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=h,d.autoClear=f,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===W1||e.mapping===q1;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=oY()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=aY());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Ts(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;g3(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,PI)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=iY[(r-s-1)%iY.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Ts(this._lodPlanes[r],c),f=c.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*M0-1),m=s/p,v=isFinite(s)?1+Math.floor(u*m):M0;v>M0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${M0}`);const g=[];let y=0;for(let C=0;C<M0;++C){const _=C/m,M=Math.exp(-_*_/2);g.push(M),C===0?y+=M:C<v&&(y+=2*M)}for(let C=0;C<g.length;C++)g[C]=g[C]/y;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:x}=this;f.dTheta.value=p,f.mipInt.value=x-i;const b=this._sizeLods[r],A=3*b*(r>x-Lg?r-x+Lg:0),S=4*(this._cubeSize-b);g3(t,A,S,3*b,2*b),l.setRenderTarget(t),l.render(d,PI)}}function wst(n){const e=[],t=[],i=[];let r=n;const s=n-Lg+1+tY.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Lg?l=tY[a-n+Lg-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,m=3,v=2,g=1,y=new Float32Array(m*p*h),x=new Float32Array(v*p*h),b=new Float32Array(g*p*h);for(let S=0;S<h;S++){const C=S%3*2/3-1,_=S>2?0:-1,M=[C,_,0,C+2/3,_,0,C+2/3,_+1,0,C,_,0,C+2/3,_+1,0,C,_+1,0];y.set(M,m*p*S),x.set(f,v*p*S);const T=[S,S,S,S,S,S];b.set(T,g*p*S)}const A=new Ac;A.setAttribute("position",new fc(y,m)),A.setAttribute("uv",new fc(x,v)),A.setAttribute("faceIndex",new fc(b,g)),e.push(A),r>Lg&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function sY(n,e,t){const i=new yp(n,e,t);return i.texture.mapping=yT,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function g3(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Sst(n,e,t){const i=new Float32Array(M0),r=new nt(0,1,0);return new El({name:"SphericalGaussianBlur",defines:{n:M0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:gB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:jh,depthTest:!1,depthWrite:!1})}function aY(){return new El({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:gB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:jh,depthTest:!1,depthWrite:!1})}function oY(){return new El({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:gB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:jh,depthTest:!1,depthWrite:!1})}function gB(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _st(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===xP||l===AP,u=l===W1||l===q1;if(c||u){let d=e.get(o);const f=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new rY(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const h=o.image;return c&&h&&h.height>0||u&&h&&r(h)?(t===null&&(t=new rY(n)),d=c?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",s),d.texture):null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function Cst(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&y0("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Mst(n,e,t,i){const r={},s=new WeakMap;function a(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",a),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const h in f)e.update(f[h],n.ARRAY_BUFFER)}function c(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const y=h.array;m=h.version;for(let x=0,b=y.length;x<b;x+=3){const A=y[x+0],S=y[x+1],C=y[x+2];f.push(A,S,S,C,C,A)}}else if(p!==void 0){const y=p.array;m=p.version;for(let x=0,b=y.length/3-1;x<b;x+=3){const A=x+0,S=x+1,C=x+2;f.push(A,S,S,C,C,A)}}else return;const v=new(Wae(f)?$ae:jae)(f,1);v.version=m;const g=s.get(d);g&&e.remove(g),s.set(d,v)}function u(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function Tst(n,e,t){let i;function r(f){i=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,h){n.drawElements(i,h,s,f*a),t.update(h,i,1)}function c(f,h,p){p!==0&&(n.drawElementsInstanced(i,h,s,f*a,p),t.update(h,i,p))}function u(f,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,h,0,s,f,0,p);let v=0;for(let g=0;g<p;g++)v+=h[g];t.update(v,i,1)}function d(f,h,p,m){if(p===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<f.length;g++)c(f[g]/a,h[g],m[g]);else{v.multiDrawElementsInstancedWEBGL(i,h,0,s,f,0,m,0,p);let g=0;for(let y=0;y<p;y++)g+=h[y]*m[y];t.update(g,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Est(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Ist(n,e,t){const i=new WeakMap,r=new us;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=u!==void 0?u.length:0;let f=i.get(o);if(f===void 0||f.count!==d){let T=function(){_.dispose(),i.delete(o),o.removeEventListener("dispose",T)};var h=T;f!==void 0&&f.texture.dispose();const p=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],y=o.morphAttributes.normal||[],x=o.morphAttributes.color||[];let b=0;p===!0&&(b=1),m===!0&&(b=2),v===!0&&(b=3);let A=o.attributes.position.count*b,S=1;A>e.maxTextureSize&&(S=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const C=new Float32Array(A*S*4*d),_=new qae(C,A,S,d);_.type=Yc,_.needsUpdate=!0;const M=b*4;for(let E=0;E<d;E++){const I=g[E],L=y[E],F=x[E],B=A*S*4*E;for(let P=0;P<I.count;P++){const z=P*M;p===!0&&(r.fromBufferAttribute(I,P),C[B+z+0]=r.x,C[B+z+1]=r.y,C[B+z+2]=r.z,C[B+z+3]=0),m===!0&&(r.fromBufferAttribute(L,P),C[B+z+4]=r.x,C[B+z+5]=r.y,C[B+z+6]=r.z,C[B+z+7]=0),v===!0&&(r.fromBufferAttribute(F,P),C[B+z+8]=r.x,C[B+z+9]=r.y,C[B+z+10]=r.z,C[B+z+11]=F.itemSize===4?r.w:1)}}f={count:d,texture:_,size:new Yn(A,S)},i.set(o,f),o.addEventListener("dispose",T)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let p=0;for(let v=0;v<c.length;v++)p+=c[v];const m=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function Dst(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return d}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const noe=new wo,lY=new pB(1,1),ioe=new qae,roe=new int,soe=new Jae,cY=[],uY=[],dY=new Float32Array(16),fY=new Float32Array(9),hY=new Float32Array(4);function By(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=cY[r];if(s===void 0&&(s=new Float32Array(r),cY[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function ra(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function sa(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function AT(n,e){let t=uY[e];t===void 0&&(t=new Int32Array(e),uY[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Rst(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Pst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ra(t,e))return;n.uniform2fv(this.addr,e),sa(t,e)}}function Lst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ra(t,e))return;n.uniform3fv(this.addr,e),sa(t,e)}}function kst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ra(t,e))return;n.uniform4fv(this.addr,e),sa(t,e)}}function Fst(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ra(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),sa(t,e)}else{if(ra(t,i))return;hY.set(i),n.uniformMatrix2fv(this.addr,!1,hY),sa(t,i)}}function Bst(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ra(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),sa(t,e)}else{if(ra(t,i))return;fY.set(i),n.uniformMatrix3fv(this.addr,!1,fY),sa(t,i)}}function Nst(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ra(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),sa(t,e)}else{if(ra(t,i))return;dY.set(i),n.uniformMatrix4fv(this.addr,!1,dY),sa(t,i)}}function Ost(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Ust(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ra(t,e))return;n.uniform2iv(this.addr,e),sa(t,e)}}function zst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ra(t,e))return;n.uniform3iv(this.addr,e),sa(t,e)}}function Vst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ra(t,e))return;n.uniform4iv(this.addr,e),sa(t,e)}}function Hst(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Gst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ra(t,e))return;n.uniform2uiv(this.addr,e),sa(t,e)}}function Wst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ra(t,e))return;n.uniform3uiv(this.addr,e),sa(t,e)}}function qst(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ra(t,e))return;n.uniform4uiv(this.addr,e),sa(t,e)}}function Kst(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(lY.compareFunction=Hae,s=lY):s=noe,t.setTexture2D(e||s,r)}function Yst(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||roe,r)}function Xst(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||soe,r)}function jst(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||ioe,r)}function $st(n){switch(n){case 5126:return Rst;case 35664:return Pst;case 35665:return Lst;case 35666:return kst;case 35674:return Fst;case 35675:return Bst;case 35676:return Nst;case 5124:case 35670:return Ost;case 35667:case 35671:return Ust;case 35668:case 35672:return zst;case 35669:case 35673:return Vst;case 5125:return Hst;case 36294:return Gst;case 36295:return Wst;case 36296:return qst;case 35678:case 36198:case 36298:case 36306:case 35682:return Kst;case 35679:case 36299:case 36307:return Yst;case 35680:case 36300:case 36308:case 36293:return Xst;case 36289:case 36303:case 36311:case 36292:return jst}}function Qst(n,e){n.uniform1fv(this.addr,e)}function Zst(n,e){const t=By(e,this.size,2);n.uniform2fv(this.addr,t)}function Jst(n,e){const t=By(e,this.size,3);n.uniform3fv(this.addr,t)}function eat(n,e){const t=By(e,this.size,4);n.uniform4fv(this.addr,t)}function tat(n,e){const t=By(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function nat(n,e){const t=By(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function iat(n,e){const t=By(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function rat(n,e){n.uniform1iv(this.addr,e)}function sat(n,e){n.uniform2iv(this.addr,e)}function aat(n,e){n.uniform3iv(this.addr,e)}function oat(n,e){n.uniform4iv(this.addr,e)}function lat(n,e){n.uniform1uiv(this.addr,e)}function cat(n,e){n.uniform2uiv(this.addr,e)}function uat(n,e){n.uniform3uiv(this.addr,e)}function dat(n,e){n.uniform4uiv(this.addr,e)}function fat(n,e,t){const i=this.cache,r=e.length,s=AT(t,r);ra(i,s)||(n.uniform1iv(this.addr,s),sa(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||noe,s[a])}function hat(n,e,t){const i=this.cache,r=e.length,s=AT(t,r);ra(i,s)||(n.uniform1iv(this.addr,s),sa(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||roe,s[a])}function pat(n,e,t){const i=this.cache,r=e.length,s=AT(t,r);ra(i,s)||(n.uniform1iv(this.addr,s),sa(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||soe,s[a])}function mat(n,e,t){const i=this.cache,r=e.length,s=AT(t,r);ra(i,s)||(n.uniform1iv(this.addr,s),sa(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||ioe,s[a])}function vat(n){switch(n){case 5126:return Qst;case 35664:return Zst;case 35665:return Jst;case 35666:return eat;case 35674:return tat;case 35675:return nat;case 35676:return iat;case 5124:case 35670:return rat;case 35667:case 35671:return sat;case 35668:case 35672:return aat;case 35669:case 35673:return oat;case 5125:return lat;case 36294:return cat;case 36295:return uat;case 36296:return dat;case 35678:case 36198:case 36298:case 36306:case 35682:return fat;case 35679:case 36299:case 36307:return hat;case 35680:case 36300:case 36308:case 36293:return pat;case 36289:case 36303:case 36311:case 36292:return mat}}class gat{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=$st(t.type)}}class yat{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=vat(t.type)}}class bat{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const NI=/(\w+)(\])?(\[|\.)?/g;function pY(n,e){n.seq.push(e),n.map[e.id]=e}function xat(n,e,t){const i=n.name,r=i.length;for(NI.lastIndex=0;;){const s=NI.exec(i),a=NI.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){pY(t,c===void 0?new gat(o,n,e):new yat(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new bat(o),pY(t,d)),t=d}}}class Y_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);xat(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function mY(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Aat=37297;let wat=0;function Sat(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const vY=new mi;function _at(n){fr._getMatrix(vY,fr.workingColorSpace,n);const e=`mat3( ${vY.elements.map(t=>t.toFixed(4))} )`;switch(fr.getTransfer(n)){case k4:return[e,"LinearTransferOETF"];case kr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function gY(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Sat(n.getShaderSource(e),a)}else return r}function Cat(n,e){const t=_at(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Mat(n,e){let t;switch(e){case Ttt:t="Linear";break;case Ett:t="Reinhard";break;case Itt:t="Cineon";break;case Dtt:t="ACESFilmic";break;case Ptt:t="AgX";break;case Ltt:t="Neutral";break;case Rtt:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const y3=new nt;function Tat(){fr.getLuminanceCoefficients(y3);const n=y3.x.toFixed(4),e=y3.y.toFixed(4),t=y3.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Eat(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($2).join(`
`)}function Iat(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Dat(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function $2(n){return n!==""}function yY(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bY(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Rat=/^[ \t]*#include +<([\w\d./]+)>/gm;function QP(n){return n.replace(Rat,Lat)}const Pat=new Map;function Lat(n,e){let t=Ri[e];if(t===void 0){const i=Pat.get(e);if(i!==void 0)t=Ri[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return QP(t)}const kat=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xY(n){return n.replace(kat,Fat)}function Fat(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function AY(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Bat(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Eae?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ott?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===kd&&(e="SHADOWMAP_TYPE_VSM"),e}function Nat(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case W1:case q1:e="ENVMAP_TYPE_CUBE";break;case yT:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Oat(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case q1:e="ENVMAP_MODE_REFRACTION";break}return e}function Uat(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Dae:e="ENVMAP_BLENDING_MULTIPLY";break;case Ctt:e="ENVMAP_BLENDING_MIX";break;case Mtt:e="ENVMAP_BLENDING_ADD";break}return e}function zat(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Vat(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Bat(t),c=Nat(t),u=Oat(t),d=Uat(t),f=zat(t),h=Eat(t),p=Iat(s),m=r.createProgram();let v,g,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter($2).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter($2).join(`
`),g.length>0&&(g+=`
`)):(v=[AY(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($2).join(`
`),g=[AY(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qh?"#define TONE_MAPPING":"",t.toneMapping!==Qh?Ri.tonemapping_pars_fragment:"",t.toneMapping!==Qh?Mat("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ri.colorspace_pars_fragment,Cat("linearToOutputTexel",t.outputColorSpace),Tat(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter($2).join(`
`)),a=QP(a),a=yY(a,t),a=bY(a,t),o=QP(o),o=yY(o,t),o=bY(o,t),a=xY(a),o=xY(o),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===FK?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===FK?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const x=y+v+a,b=y+g+o,A=mY(r,r.VERTEX_SHADER,x),S=mY(r,r.FRAGMENT_SHADER,b);r.attachShader(m,A),r.attachShader(m,S),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m);function C(E){if(n.debug.checkShaderErrors){const I=r.getProgramInfoLog(m).trim(),L=r.getShaderInfoLog(A).trim(),F=r.getShaderInfoLog(S).trim();let B=!0,P=!0;if(r.getProgramParameter(m,r.LINK_STATUS)===!1)if(B=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,m,A,S);else{const z=gY(r,A,"vertex"),O=gY(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+`

Material Name: `+E.name+`
Material Type: `+E.type+`

Program Info Log: `+I+`
`+z+`
`+O)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(L===""||F==="")&&(P=!1);P&&(E.diagnostics={runnable:B,programLog:I,vertexShader:{log:L,prefix:v},fragmentShader:{log:F,prefix:g}})}r.deleteShader(A),r.deleteShader(S),_=new Y_(r,m),M=Dat(r,m)}let _;this.getUniforms=function(){return _===void 0&&C(this),_};let M;this.getAttributes=function(){return M===void 0&&C(this),M};let T=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=r.getProgramParameter(m,Aat)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=wat++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=A,this.fragmentShader=S,this}let Hat=0;class Gat{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Wat(e),t.set(e,i)),i}}class Wat{constructor(e){this.id=Hat++,this.code=e,this.usedTimes=0}}function qat(n,e,t,i,r,s,a){const o=new Yae,l=new Gat,c=new Set,u=[],d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(M){return c.add(M),M===0?"uv":`uv${M}`}function v(M,T,E,I,L){const F=I.fog,B=L.geometry,P=M.isMeshStandardMaterial?I.environment:null,z=(M.isMeshStandardMaterial?t:e).get(M.envMap||P),O=z&&z.mapping===yT?z.image.height:null,N=p[M.type];M.precision!==null&&(h=r.getMaxPrecision(M.precision),h!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",h,"instead."));const H=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,q=H!==void 0?H.length:0;let te=0;B.morphAttributes.position!==void 0&&(te=1),B.morphAttributes.normal!==void 0&&(te=2),B.morphAttributes.color!==void 0&&(te=3);let Q,ee,de,J;if(N){const Pn=Lu[N];Q=Pn.vertexShader,ee=Pn.fragmentShader}else Q=M.vertexShader,ee=M.fragmentShader,l.update(M),de=l.getVertexShaderID(M),J=l.getFragmentShaderID(M);const ue=n.getRenderTarget(),Te=n.state.buffers.depth.getReversed(),De=L.isInstancedMesh===!0,Le=L.isBatchedMesh===!0,Ne=!!M.map,Y=!!M.matcap,oe=!!z,ne=!!M.aoMap,Xe=!!M.lightMap,ke=!!M.bumpMap,Ge=!!M.normalMap,He=!!M.displacementMap,qe=!!M.emissiveMap,tt=!!M.metalnessMap,pe=!!M.roughnessMap,G=M.anisotropy>0,Z=M.clearcoat>0,ge=M.dispersion>0,Oe=M.iridescence>0,je=M.sheen>0,bt=M.transmission>0,At=G&&!!M.anisotropyMap,Ee=Z&&!!M.clearcoatMap,gt=Z&&!!M.clearcoatNormalMap,lt=Z&&!!M.clearcoatRoughnessMap,$=Oe&&!!M.iridescenceMap,le=Oe&&!!M.iridescenceThicknessMap,fe=je&&!!M.sheenColorMap,Me=je&&!!M.sheenRoughnessMap,me=!!M.specularMap,Ae=!!M.specularColorMap,dt=!!M.specularIntensityMap,we=bt&&!!M.transmissionMap,_t=bt&&!!M.thicknessMap,it=!!M.gradientMap,wt=!!M.alphaMap,Ft=M.alphaTest>0,Rt=!!M.alphaHash,Wt=!!M.extensions;let hn=Qh;M.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(hn=n.toneMapping);const pi={shaderID:N,shaderType:M.type,shaderName:M.name,vertexShader:Q,fragmentShader:ee,defines:M.defines,customVertexShaderID:de,customFragmentShaderID:J,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:h,batching:Le,batchingColor:Le&&L._colorsTexture!==null,instancing:De,instancingColor:De&&L.instanceColor!==null,instancingMorph:De&&L.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ue===null?n.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:X1,alphaToCoverage:!!M.alphaToCoverage,map:Ne,matcap:Y,envMap:oe,envMapMode:oe&&z.mapping,envMapCubeUVHeight:O,aoMap:ne,lightMap:Xe,bumpMap:ke,normalMap:Ge,displacementMap:f&&He,emissiveMap:qe,normalMapObjectSpace:Ge&&M.normalMapType===Ott,normalMapTangentSpace:Ge&&M.normalMapType===Ntt,metalnessMap:tt,roughnessMap:pe,anisotropy:G,anisotropyMap:At,clearcoat:Z,clearcoatMap:Ee,clearcoatNormalMap:gt,clearcoatRoughnessMap:lt,dispersion:ge,iridescence:Oe,iridescenceMap:$,iridescenceThicknessMap:le,sheen:je,sheenColorMap:fe,sheenRoughnessMap:Me,specularMap:me,specularColorMap:Ae,specularIntensityMap:dt,transmission:bt,transmissionMap:we,thicknessMap:_t,gradientMap:it,opaque:M.transparent===!1&&M.blending===$h&&M.alphaToCoverage===!1,alphaMap:wt,alphaTest:Ft,alphaHash:Rt,combine:M.combine,mapUv:Ne&&m(M.map.channel),aoMapUv:ne&&m(M.aoMap.channel),lightMapUv:Xe&&m(M.lightMap.channel),bumpMapUv:ke&&m(M.bumpMap.channel),normalMapUv:Ge&&m(M.normalMap.channel),displacementMapUv:He&&m(M.displacementMap.channel),emissiveMapUv:qe&&m(M.emissiveMap.channel),metalnessMapUv:tt&&m(M.metalnessMap.channel),roughnessMapUv:pe&&m(M.roughnessMap.channel),anisotropyMapUv:At&&m(M.anisotropyMap.channel),clearcoatMapUv:Ee&&m(M.clearcoatMap.channel),clearcoatNormalMapUv:gt&&m(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:lt&&m(M.clearcoatRoughnessMap.channel),iridescenceMapUv:$&&m(M.iridescenceMap.channel),iridescenceThicknessMapUv:le&&m(M.iridescenceThicknessMap.channel),sheenColorMapUv:fe&&m(M.sheenColorMap.channel),sheenRoughnessMapUv:Me&&m(M.sheenRoughnessMap.channel),specularMapUv:me&&m(M.specularMap.channel),specularColorMapUv:Ae&&m(M.specularColorMap.channel),specularIntensityMapUv:dt&&m(M.specularIntensityMap.channel),transmissionMapUv:we&&m(M.transmissionMap.channel),thicknessMapUv:_t&&m(M.thicknessMap.channel),alphaMapUv:wt&&m(M.alphaMap.channel),vertexTangents:!!B.attributes.tangent&&(Ge||G),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!B.attributes.uv&&(Ne||wt),fog:!!F,useFog:M.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Te,skinning:L.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:te,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&E.length>0,shadowMapType:n.shadowMap.type,toneMapping:hn,decodeVideoTexture:Ne&&M.map.isVideoTexture===!0&&fr.getTransfer(M.map.colorSpace)===kr,decodeVideoTextureEmissive:qe&&M.emissiveMap.isVideoTexture===!0&&fr.getTransfer(M.emissiveMap.colorSpace)===kr,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Jl,flipSided:M.side===Zo,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:Wt&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Wt&&M.extensions.multiDraw===!0||Le)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return pi.vertexUv1s=c.has(1),pi.vertexUv2s=c.has(2),pi.vertexUv3s=c.has(3),c.clear(),pi}function g(M){const T=[];if(M.shaderID?T.push(M.shaderID):(T.push(M.customVertexShaderID),T.push(M.customFragmentShaderID)),M.defines!==void 0)for(const E in M.defines)T.push(E),T.push(M.defines[E]);return M.isRawShaderMaterial===!1&&(y(T,M),x(T,M),T.push(n.outputColorSpace)),T.push(M.customProgramCacheKey),T.join()}function y(M,T){M.push(T.precision),M.push(T.outputColorSpace),M.push(T.envMapMode),M.push(T.envMapCubeUVHeight),M.push(T.mapUv),M.push(T.alphaMapUv),M.push(T.lightMapUv),M.push(T.aoMapUv),M.push(T.bumpMapUv),M.push(T.normalMapUv),M.push(T.displacementMapUv),M.push(T.emissiveMapUv),M.push(T.metalnessMapUv),M.push(T.roughnessMapUv),M.push(T.anisotropyMapUv),M.push(T.clearcoatMapUv),M.push(T.clearcoatNormalMapUv),M.push(T.clearcoatRoughnessMapUv),M.push(T.iridescenceMapUv),M.push(T.iridescenceThicknessMapUv),M.push(T.sheenColorMapUv),M.push(T.sheenRoughnessMapUv),M.push(T.specularMapUv),M.push(T.specularColorMapUv),M.push(T.specularIntensityMapUv),M.push(T.transmissionMapUv),M.push(T.thicknessMapUv),M.push(T.combine),M.push(T.fogExp2),M.push(T.sizeAttenuation),M.push(T.morphTargetsCount),M.push(T.morphAttributeCount),M.push(T.numDirLights),M.push(T.numPointLights),M.push(T.numSpotLights),M.push(T.numSpotLightMaps),M.push(T.numHemiLights),M.push(T.numRectAreaLights),M.push(T.numDirLightShadows),M.push(T.numPointLightShadows),M.push(T.numSpotLightShadows),M.push(T.numSpotLightShadowsWithMaps),M.push(T.numLightProbes),M.push(T.shadowMapType),M.push(T.toneMapping),M.push(T.numClippingPlanes),M.push(T.numClipIntersection),M.push(T.depthPacking)}function x(M,T){o.disableAll(),T.supportsVertexTextures&&o.enable(0),T.instancing&&o.enable(1),T.instancingColor&&o.enable(2),T.instancingMorph&&o.enable(3),T.matcap&&o.enable(4),T.envMap&&o.enable(5),T.normalMapObjectSpace&&o.enable(6),T.normalMapTangentSpace&&o.enable(7),T.clearcoat&&o.enable(8),T.iridescence&&o.enable(9),T.alphaTest&&o.enable(10),T.vertexColors&&o.enable(11),T.vertexAlphas&&o.enable(12),T.vertexUv1s&&o.enable(13),T.vertexUv2s&&o.enable(14),T.vertexUv3s&&o.enable(15),T.vertexTangents&&o.enable(16),T.anisotropy&&o.enable(17),T.alphaHash&&o.enable(18),T.batching&&o.enable(19),T.dispersion&&o.enable(20),T.batchingColor&&o.enable(21),M.push(o.mask),o.disableAll(),T.fog&&o.enable(0),T.useFog&&o.enable(1),T.flatShading&&o.enable(2),T.logarithmicDepthBuffer&&o.enable(3),T.reverseDepthBuffer&&o.enable(4),T.skinning&&o.enable(5),T.morphTargets&&o.enable(6),T.morphNormals&&o.enable(7),T.morphColors&&o.enable(8),T.premultipliedAlpha&&o.enable(9),T.shadowMapEnabled&&o.enable(10),T.doubleSided&&o.enable(11),T.flipSided&&o.enable(12),T.useDepthPacking&&o.enable(13),T.dithering&&o.enable(14),T.transmission&&o.enable(15),T.sheen&&o.enable(16),T.opaque&&o.enable(17),T.pointsUvs&&o.enable(18),T.decodeVideoTexture&&o.enable(19),T.decodeVideoTextureEmissive&&o.enable(20),T.alphaToCoverage&&o.enable(21),M.push(o.mask)}function b(M){const T=p[M.type];let E;if(T){const I=Lu[T];E=bnt.clone(I.uniforms)}else E=M.uniforms;return E}function A(M,T){let E;for(let I=0,L=u.length;I<L;I++){const F=u[I];if(F.cacheKey===T){E=F,++E.usedTimes;break}}return E===void 0&&(E=new Vat(n,T,M,s),u.push(E)),E}function S(M){if(--M.usedTimes===0){const T=u.indexOf(M);u[T]=u[u.length-1],u.pop(),M.destroy()}}function C(M){l.remove(M)}function _(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:b,acquireProgram:A,releaseProgram:S,releaseShaderCache:C,programs:u,dispose:_}}function Kat(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function Yat(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function wY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function SY(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(d,f,h,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.push(g):h.transparent===!0?r.push(g):t.push(g)}function l(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.unshift(g):h.transparent===!0?r.unshift(g):t.unshift(g)}function c(d,f){t.length>1&&t.sort(d||Yat),i.length>1&&i.sort(f||wY),r.length>1&&r.sort(f||wY)}function u(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function Xat(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new SY,n.set(i,[a])):r>=s.length?(a=new SY,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function jat(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new nt,color:new pr};break;case"SpotLight":t={position:new nt,direction:new nt,color:new pr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new nt,color:new pr,distance:0,decay:0};break;case"HemisphereLight":t={direction:new nt,skyColor:new pr,groundColor:new pr};break;case"RectAreaLight":t={color:new pr,position:new nt,halfWidth:new nt,halfHeight:new nt};break}return n[e.id]=t,t}}}function $at(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yn};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yn};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Qat=0;function Zat(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Jat(n){const e=new jat,t=$at(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new nt);const r=new nt,s=new gi,a=new gi;function o(c){let u=0,d=0,f=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let h=0,p=0,m=0,v=0,g=0,y=0,x=0,b=0,A=0,S=0,C=0;c.sort(Zat);for(let M=0,T=c.length;M<T;M++){const E=c[M],I=E.color,L=E.intensity,F=E.distance,B=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)u+=I.r*L,d+=I.g*L,f+=I.b*L;else if(E.isLightProbe){for(let P=0;P<9;P++)i.probe[P].addScaledVector(E.sh.coefficients[P],L);C++}else if(E.isDirectionalLight){const P=e.get(E);if(P.color.copy(E.color).multiplyScalar(E.intensity),E.castShadow){const z=E.shadow,O=t.get(E);O.shadowIntensity=z.intensity,O.shadowBias=z.bias,O.shadowNormalBias=z.normalBias,O.shadowRadius=z.radius,O.shadowMapSize=z.mapSize,i.directionalShadow[h]=O,i.directionalShadowMap[h]=B,i.directionalShadowMatrix[h]=E.shadow.matrix,y++}i.directional[h]=P,h++}else if(E.isSpotLight){const P=e.get(E);P.position.setFromMatrixPosition(E.matrixWorld),P.color.copy(I).multiplyScalar(L),P.distance=F,P.coneCos=Math.cos(E.angle),P.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),P.decay=E.decay,i.spot[m]=P;const z=E.shadow;if(E.map&&(i.spotLightMap[A]=E.map,A++,z.updateMatrices(E),E.castShadow&&S++),i.spotLightMatrix[m]=z.matrix,E.castShadow){const O=t.get(E);O.shadowIntensity=z.intensity,O.shadowBias=z.bias,O.shadowNormalBias=z.normalBias,O.shadowRadius=z.radius,O.shadowMapSize=z.mapSize,i.spotShadow[m]=O,i.spotShadowMap[m]=B,b++}m++}else if(E.isRectAreaLight){const P=e.get(E);P.color.copy(I).multiplyScalar(L),P.halfWidth.set(E.width*.5,0,0),P.halfHeight.set(0,E.height*.5,0),i.rectArea[v]=P,v++}else if(E.isPointLight){const P=e.get(E);if(P.color.copy(E.color).multiplyScalar(E.intensity),P.distance=E.distance,P.decay=E.decay,E.castShadow){const z=E.shadow,O=t.get(E);O.shadowIntensity=z.intensity,O.shadowBias=z.bias,O.shadowNormalBias=z.normalBias,O.shadowRadius=z.radius,O.shadowMapSize=z.mapSize,O.shadowCameraNear=z.camera.near,O.shadowCameraFar=z.camera.far,i.pointShadow[p]=O,i.pointShadowMap[p]=B,i.pointShadowMatrix[p]=E.shadow.matrix,x++}i.point[p]=P,p++}else if(E.isHemisphereLight){const P=e.get(E);P.skyColor.copy(E.color).multiplyScalar(L),P.groundColor.copy(E.groundColor).multiplyScalar(L),i.hemi[g]=P,g++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Sn.LTC_FLOAT_1,i.rectAreaLTC2=Sn.LTC_FLOAT_2):(i.rectAreaLTC1=Sn.LTC_HALF_1,i.rectAreaLTC2=Sn.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=f;const _=i.hash;(_.directionalLength!==h||_.pointLength!==p||_.spotLength!==m||_.rectAreaLength!==v||_.hemiLength!==g||_.numDirectionalShadows!==y||_.numPointShadows!==x||_.numSpotShadows!==b||_.numSpotMaps!==A||_.numLightProbes!==C)&&(i.directional.length=h,i.spot.length=m,i.rectArea.length=v,i.point.length=p,i.hemi.length=g,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=b+A-S,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=S,i.numLightProbes=C,_.directionalLength=h,_.pointLength=p,_.spotLength=m,_.rectAreaLength=v,_.hemiLength=g,_.numDirectionalShadows=y,_.numPointShadows=x,_.numSpotShadows=b,_.numSpotMaps=A,_.numLightProbes=C,i.version=Qat++)}function l(c,u){let d=0,f=0,h=0,p=0,m=0;const v=u.matrixWorldInverse;for(let g=0,y=c.length;g<y;g++){const x=c[g];if(x.isDirectionalLight){const b=i.directional[d];b.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(v),d++}else if(x.isSpotLight){const b=i.spot[h];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(v),h++}else if(x.isRectAreaLight){const b=i.rectArea[p];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),a.identity(),s.copy(x.matrixWorld),s.premultiply(v),a.extractRotation(s),b.halfWidth.set(x.width*.5,0,0),b.halfHeight.set(0,x.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),p++}else if(x.isPointLight){const b=i.point[f];b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),f++}else if(x.isHemisphereLight){const b=i.hemi[m];b.direction.setFromMatrixPosition(x.matrixWorld),b.direction.transformDirection(v),m++}}}return{setup:o,setupView:l,state:i}}function _Y(n){const e=new Jat(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function a(u){i.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function eot(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new _Y(n),e.set(r,[o])):s>=a.length?(o=new _Y(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const tot=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,not=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function iot(n,e,t){let i=new eoe;const r=new Yn,s=new Yn,a=new us,o=new Int({depthPacking:Btt}),l=new Dnt,c={},u=t.maxTextureSize,d={[nd]:Zo,[Zo]:nd,[Jl]:Jl},f=new El({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yn},radius:{value:4}},vertexShader:tot,fragmentShader:not}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new Ac;p.setAttribute("position",new fc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ts(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Eae;let g=this.type;this.render=function(S,C,_){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||S.length===0)return;const M=n.getRenderTarget(),T=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),I=n.state;I.setBlending(jh),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const L=g!==kd&&this.type===kd,F=g===kd&&this.type!==kd;for(let B=0,P=S.length;B<P;B++){const z=S[B],O=z.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;r.copy(O.mapSize);const N=O.getFrameExtents();if(r.multiply(N),s.copy(O.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/N.x),r.x=s.x*N.x,O.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/N.y),r.y=s.y*N.y,O.mapSize.y=s.y)),O.map===null||L===!0||F===!0){const q=this.type!==kd?{minFilter:Ml,magFilter:Ml}:{};O.map!==null&&O.map.dispose(),O.map=new yp(r.x,r.y,q),O.map.texture.name=z.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const H=O.getViewportCount();for(let q=0;q<H;q++){const te=O.getViewport(q);a.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),I.viewport(a),O.updateMatrices(z,q),i=O.getFrustum(),b(C,_,O.camera,z,this.type)}O.isPointLightShadow!==!0&&this.type===kd&&y(O,_),O.needsUpdate=!1}g=this.type,v.needsUpdate=!1,n.setRenderTarget(M,T,E)};function y(S,C){const _=e.update(m);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,h.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new yp(r.x,r.y)),f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(C,null,_,f,m,null),h.uniforms.shadow_pass.value=S.mapPass.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(C,null,_,h,m,null)}function x(S,C,_,M){let T=null;const E=_.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(E!==void 0)T=E;else if(T=_.isPointLight===!0?l:o,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const I=T.uuid,L=C.uuid;let F=c[I];F===void 0&&(F={},c[I]=F);let B=F[L];B===void 0&&(B=T.clone(),F[L]=B,C.addEventListener("dispose",A)),T=B}if(T.visible=C.visible,T.wireframe=C.wireframe,M===kd?T.side=C.shadowSide!==null?C.shadowSide:C.side:T.side=C.shadowSide!==null?C.shadowSide:d[C.side],T.alphaMap=C.alphaMap,T.alphaTest=C.alphaTest,T.map=C.map,T.clipShadows=C.clipShadows,T.clippingPlanes=C.clippingPlanes,T.clipIntersection=C.clipIntersection,T.displacementMap=C.displacementMap,T.displacementScale=C.displacementScale,T.displacementBias=C.displacementBias,T.wireframeLinewidth=C.wireframeLinewidth,T.linewidth=C.linewidth,_.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const I=n.properties.get(T);I.light=_}return T}function b(S,C,_,M,T){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&T===kd)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,S.matrixWorld);const L=e.update(S),F=S.material;if(Array.isArray(F)){const B=L.groups;for(let P=0,z=B.length;P<z;P++){const O=B[P],N=F[O.materialIndex];if(N&&N.visible){const H=x(S,N,M,T);S.onBeforeShadow(n,S,C,_,L,H,O),n.renderBufferDirect(_,null,L,H,S,O),S.onAfterShadow(n,S,C,_,L,H,O)}}}else if(F.visible){const B=x(S,F,M,T);S.onBeforeShadow(n,S,C,_,L,B,null),n.renderBufferDirect(_,null,L,B,S,null),S.onAfterShadow(n,S,C,_,L,B,null)}}const I=S.children;for(let L=0,F=I.length;L<F;L++)b(I[L],C,_,M,T)}function A(S){S.target.removeEventListener("dispose",A);for(const _ in c){const M=c[_],T=S.target.uuid;T in M&&(M[T].dispose(),delete M[T])}}}const rot={[hP]:pP,[mP]:yP,[vP]:bP,[G1]:gP,[pP]:hP,[yP]:mP,[bP]:vP,[gP]:G1};function sot(n,e){function t(){let we=!1;const _t=new us;let it=null;const wt=new us(0,0,0,0);return{setMask:function(Ft){it!==Ft&&!we&&(n.colorMask(Ft,Ft,Ft,Ft),it=Ft)},setLocked:function(Ft){we=Ft},setClear:function(Ft,Rt,Wt,hn,pi){pi===!0&&(Ft*=hn,Rt*=hn,Wt*=hn),_t.set(Ft,Rt,Wt,hn),wt.equals(_t)===!1&&(n.clearColor(Ft,Rt,Wt,hn),wt.copy(_t))},reset:function(){we=!1,it=null,wt.set(-1,0,0,0)}}}function i(){let we=!1,_t=!1,it=null,wt=null,Ft=null;return{setReversed:function(Rt){if(_t!==Rt){const Wt=e.get("EXT_clip_control");_t?Wt.clipControlEXT(Wt.LOWER_LEFT_EXT,Wt.ZERO_TO_ONE_EXT):Wt.clipControlEXT(Wt.LOWER_LEFT_EXT,Wt.NEGATIVE_ONE_TO_ONE_EXT);const hn=Ft;Ft=null,this.setClear(hn)}_t=Rt},getReversed:function(){return _t},setTest:function(Rt){Rt?ue(n.DEPTH_TEST):Te(n.DEPTH_TEST)},setMask:function(Rt){it!==Rt&&!we&&(n.depthMask(Rt),it=Rt)},setFunc:function(Rt){if(_t&&(Rt=rot[Rt]),wt!==Rt){switch(Rt){case hP:n.depthFunc(n.NEVER);break;case pP:n.depthFunc(n.ALWAYS);break;case mP:n.depthFunc(n.LESS);break;case G1:n.depthFunc(n.LEQUAL);break;case vP:n.depthFunc(n.EQUAL);break;case gP:n.depthFunc(n.GEQUAL);break;case yP:n.depthFunc(n.GREATER);break;case bP:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}wt=Rt}},setLocked:function(Rt){we=Rt},setClear:function(Rt){Ft!==Rt&&(_t&&(Rt=1-Rt),n.clearDepth(Rt),Ft=Rt)},reset:function(){we=!1,it=null,wt=null,Ft=null,_t=!1}}}function r(){let we=!1,_t=null,it=null,wt=null,Ft=null,Rt=null,Wt=null,hn=null,pi=null;return{setTest:function(Pn){we||(Pn?ue(n.STENCIL_TEST):Te(n.STENCIL_TEST))},setMask:function(Pn){_t!==Pn&&!we&&(n.stencilMask(Pn),_t=Pn)},setFunc:function(Pn,Qi,ai){(it!==Pn||wt!==Qi||Ft!==ai)&&(n.stencilFunc(Pn,Qi,ai),it=Pn,wt=Qi,Ft=ai)},setOp:function(Pn,Qi,ai){(Rt!==Pn||Wt!==Qi||hn!==ai)&&(n.stencilOp(Pn,Qi,ai),Rt=Pn,Wt=Qi,hn=ai)},setLocked:function(Pn){we=Pn},setClear:function(Pn){pi!==Pn&&(n.clearStencil(Pn),pi=Pn)},reset:function(){we=!1,_t=null,it=null,wt=null,Ft=null,Rt=null,Wt=null,hn=null,pi=null}}}const s=new t,a=new i,o=new r,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,h=[],p=null,m=!1,v=null,g=null,y=null,x=null,b=null,A=null,S=null,C=new pr(0,0,0),_=0,M=!1,T=null,E=null,I=null,L=null,F=null;const B=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,z=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(O)[1]),P=z>=1):O.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),P=z>=2);let N=null,H={};const q=n.getParameter(n.SCISSOR_BOX),te=n.getParameter(n.VIEWPORT),Q=new us().fromArray(q),ee=new us().fromArray(te);function de(we,_t,it,wt){const Ft=new Uint8Array(4),Rt=n.createTexture();n.bindTexture(we,Rt),n.texParameteri(we,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(we,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Wt=0;Wt<it;Wt++)we===n.TEXTURE_3D||we===n.TEXTURE_2D_ARRAY?n.texImage3D(_t,0,n.RGBA,1,1,wt,0,n.RGBA,n.UNSIGNED_BYTE,Ft):n.texImage2D(_t+Wt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ft);return Rt}const J={};J[n.TEXTURE_2D]=de(n.TEXTURE_2D,n.TEXTURE_2D,1),J[n.TEXTURE_CUBE_MAP]=de(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),J[n.TEXTURE_2D_ARRAY]=de(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),J[n.TEXTURE_3D]=de(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ue(n.DEPTH_TEST),a.setFunc(G1),ke(!1),Ge(IK),ue(n.CULL_FACE),ne(jh);function ue(we){u[we]!==!0&&(n.enable(we),u[we]=!0)}function Te(we){u[we]!==!1&&(n.disable(we),u[we]=!1)}function De(we,_t){return d[we]!==_t?(n.bindFramebuffer(we,_t),d[we]=_t,we===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=_t),we===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=_t),!0):!1}function Le(we,_t){let it=h,wt=!1;if(we){it=f.get(_t),it===void 0&&(it=[],f.set(_t,it));const Ft=we.textures;if(it.length!==Ft.length||it[0]!==n.COLOR_ATTACHMENT0){for(let Rt=0,Wt=Ft.length;Rt<Wt;Rt++)it[Rt]=n.COLOR_ATTACHMENT0+Rt;it.length=Ft.length,wt=!0}}else it[0]!==n.BACK&&(it[0]=n.BACK,wt=!0);wt&&n.drawBuffers(it)}function Ne(we){return p!==we?(n.useProgram(we),p=we,!0):!1}const Y={[C0]:n.FUNC_ADD,[ltt]:n.FUNC_SUBTRACT,[ctt]:n.FUNC_REVERSE_SUBTRACT};Y[utt]=n.MIN,Y[dtt]=n.MAX;const oe={[ftt]:n.ZERO,[htt]:n.ONE,[ptt]:n.SRC_COLOR,[eA]:n.SRC_ALPHA,[xtt]:n.SRC_ALPHA_SATURATE,[ytt]:n.DST_COLOR,[vtt]:n.DST_ALPHA,[mtt]:n.ONE_MINUS_SRC_COLOR,[tA]:n.ONE_MINUS_SRC_ALPHA,[btt]:n.ONE_MINUS_DST_COLOR,[gtt]:n.ONE_MINUS_DST_ALPHA,[Att]:n.CONSTANT_COLOR,[wtt]:n.ONE_MINUS_CONSTANT_COLOR,[Stt]:n.CONSTANT_ALPHA,[_tt]:n.ONE_MINUS_CONSTANT_ALPHA};function ne(we,_t,it,wt,Ft,Rt,Wt,hn,pi,Pn){if(we===jh){m===!0&&(Te(n.BLEND),m=!1);return}if(m===!1&&(ue(n.BLEND),m=!0),we!==Iae){if(we!==v||Pn!==M){if((g!==C0||b!==C0)&&(n.blendEquation(n.FUNC_ADD),g=C0,b=C0),Pn)switch(we){case $h:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case DK:n.blendFunc(n.ONE,n.ONE);break;case RK:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case PK:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",we);break}else switch(we){case $h:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case DK:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case RK:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case PK:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",we);break}y=null,x=null,A=null,S=null,C.set(0,0,0),_=0,v=we,M=Pn}return}Ft=Ft||_t,Rt=Rt||it,Wt=Wt||wt,(_t!==g||Ft!==b)&&(n.blendEquationSeparate(Y[_t],Y[Ft]),g=_t,b=Ft),(it!==y||wt!==x||Rt!==A||Wt!==S)&&(n.blendFuncSeparate(oe[it],oe[wt],oe[Rt],oe[Wt]),y=it,x=wt,A=Rt,S=Wt),(hn.equals(C)===!1||pi!==_)&&(n.blendColor(hn.r,hn.g,hn.b,pi),C.copy(hn),_=pi),v=we,M=!1}function Xe(we,_t){we.side===Jl?Te(n.CULL_FACE):ue(n.CULL_FACE);let it=we.side===Zo;_t&&(it=!it),ke(it),we.blending===$h&&we.transparent===!1?ne(jh):ne(we.blending,we.blendEquation,we.blendSrc,we.blendDst,we.blendEquationAlpha,we.blendSrcAlpha,we.blendDstAlpha,we.blendColor,we.blendAlpha,we.premultipliedAlpha),a.setFunc(we.depthFunc),a.setTest(we.depthTest),a.setMask(we.depthWrite),s.setMask(we.colorWrite);const wt=we.stencilWrite;o.setTest(wt),wt&&(o.setMask(we.stencilWriteMask),o.setFunc(we.stencilFunc,we.stencilRef,we.stencilFuncMask),o.setOp(we.stencilFail,we.stencilZFail,we.stencilZPass)),qe(we.polygonOffset,we.polygonOffsetFactor,we.polygonOffsetUnits),we.alphaToCoverage===!0?ue(n.SAMPLE_ALPHA_TO_COVERAGE):Te(n.SAMPLE_ALPHA_TO_COVERAGE)}function ke(we){T!==we&&(we?n.frontFace(n.CW):n.frontFace(n.CCW),T=we)}function Ge(we){we!==stt?(ue(n.CULL_FACE),we!==E&&(we===IK?n.cullFace(n.BACK):we===att?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Te(n.CULL_FACE),E=we}function He(we){we!==I&&(P&&n.lineWidth(we),I=we)}function qe(we,_t,it){we?(ue(n.POLYGON_OFFSET_FILL),(L!==_t||F!==it)&&(n.polygonOffset(_t,it),L=_t,F=it)):Te(n.POLYGON_OFFSET_FILL)}function tt(we){we?ue(n.SCISSOR_TEST):Te(n.SCISSOR_TEST)}function pe(we){we===void 0&&(we=n.TEXTURE0+B-1),N!==we&&(n.activeTexture(we),N=we)}function G(we,_t,it){it===void 0&&(N===null?it=n.TEXTURE0+B-1:it=N);let wt=H[it];wt===void 0&&(wt={type:void 0,texture:void 0},H[it]=wt),(wt.type!==we||wt.texture!==_t)&&(N!==it&&(n.activeTexture(it),N=it),n.bindTexture(we,_t||J[we]),wt.type=we,wt.texture=_t)}function Z(){const we=H[N];we!==void 0&&we.type!==void 0&&(n.bindTexture(we.type,null),we.type=void 0,we.texture=void 0)}function ge(){try{n.compressedTexImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Oe(){try{n.compressedTexImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function je(){try{n.texSubImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function bt(){try{n.texSubImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function At(){try{n.compressedTexSubImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function Ee(){try{n.compressedTexSubImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function gt(){try{n.texStorage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function lt(){try{n.texStorage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function $(){try{n.texImage2D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function le(){try{n.texImage3D(...arguments)}catch(we){console.error("THREE.WebGLState:",we)}}function fe(we){Q.equals(we)===!1&&(n.scissor(we.x,we.y,we.z,we.w),Q.copy(we))}function Me(we){ee.equals(we)===!1&&(n.viewport(we.x,we.y,we.z,we.w),ee.copy(we))}function me(we,_t){let it=c.get(_t);it===void 0&&(it=new WeakMap,c.set(_t,it));let wt=it.get(we);wt===void 0&&(wt=n.getUniformBlockIndex(_t,we.name),it.set(we,wt))}function Ae(we,_t){const wt=c.get(_t).get(we);l.get(_t)!==wt&&(n.uniformBlockBinding(_t,wt,we.__bindingPointIndex),l.set(_t,wt))}function dt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},N=null,H={},d={},f=new WeakMap,h=[],p=null,m=!1,v=null,g=null,y=null,x=null,b=null,A=null,S=null,C=new pr(0,0,0),_=0,M=!1,T=null,E=null,I=null,L=null,F=null,Q.set(0,0,n.canvas.width,n.canvas.height),ee.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ue,disable:Te,bindFramebuffer:De,drawBuffers:Le,useProgram:Ne,setBlending:ne,setMaterial:Xe,setFlipSided:ke,setCullFace:Ge,setLineWidth:He,setPolygonOffset:qe,setScissorTest:tt,activeTexture:pe,bindTexture:G,unbindTexture:Z,compressedTexImage2D:ge,compressedTexImage3D:Oe,texImage2D:$,texImage3D:le,updateUBOMapping:me,uniformBlockBinding:Ae,texStorage2D:gt,texStorage3D:lt,texSubImage2D:je,texSubImage3D:bt,compressedTexSubImage2D:At,compressedTexSubImage3D:Ee,scissor:fe,viewport:Me,reset:dt}}function aot(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Yn,u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(pe,G){return h?new OffscreenCanvas(pe,G):B4("canvas")}function m(pe,G,Z){let ge=1;const Oe=tt(pe);if((Oe.width>Z||Oe.height>Z)&&(ge=Z/Math.max(Oe.width,Oe.height)),ge<1)if(typeof HTMLImageElement<"u"&&pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&pe instanceof ImageBitmap||typeof VideoFrame<"u"&&pe instanceof VideoFrame){const je=Math.floor(ge*Oe.width),bt=Math.floor(ge*Oe.height);d===void 0&&(d=p(je,bt));const At=G?p(je,bt):d;return At.width=je,At.height=bt,At.getContext("2d").drawImage(pe,0,0,je,bt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Oe.width+"x"+Oe.height+") to ("+je+"x"+bt+")."),At}else return"data"in pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Oe.width+"x"+Oe.height+")."),pe;return pe}function v(pe){return pe.generateMipmaps}function g(pe){n.generateMipmap(pe)}function y(pe){return pe.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:pe.isWebGL3DRenderTarget?n.TEXTURE_3D:pe.isWebGLArrayRenderTarget||pe.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function x(pe,G,Z,ge,Oe=!1){if(pe!==null){if(n[pe]!==void 0)return n[pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+pe+"'")}let je=G;if(G===n.RED&&(Z===n.FLOAT&&(je=n.R32F),Z===n.HALF_FLOAT&&(je=n.R16F),Z===n.UNSIGNED_BYTE&&(je=n.R8)),G===n.RED_INTEGER&&(Z===n.UNSIGNED_BYTE&&(je=n.R8UI),Z===n.UNSIGNED_SHORT&&(je=n.R16UI),Z===n.UNSIGNED_INT&&(je=n.R32UI),Z===n.BYTE&&(je=n.R8I),Z===n.SHORT&&(je=n.R16I),Z===n.INT&&(je=n.R32I)),G===n.RG&&(Z===n.FLOAT&&(je=n.RG32F),Z===n.HALF_FLOAT&&(je=n.RG16F),Z===n.UNSIGNED_BYTE&&(je=n.RG8)),G===n.RG_INTEGER&&(Z===n.UNSIGNED_BYTE&&(je=n.RG8UI),Z===n.UNSIGNED_SHORT&&(je=n.RG16UI),Z===n.UNSIGNED_INT&&(je=n.RG32UI),Z===n.BYTE&&(je=n.RG8I),Z===n.SHORT&&(je=n.RG16I),Z===n.INT&&(je=n.RG32I)),G===n.RGB_INTEGER&&(Z===n.UNSIGNED_BYTE&&(je=n.RGB8UI),Z===n.UNSIGNED_SHORT&&(je=n.RGB16UI),Z===n.UNSIGNED_INT&&(je=n.RGB32UI),Z===n.BYTE&&(je=n.RGB8I),Z===n.SHORT&&(je=n.RGB16I),Z===n.INT&&(je=n.RGB32I)),G===n.RGBA_INTEGER&&(Z===n.UNSIGNED_BYTE&&(je=n.RGBA8UI),Z===n.UNSIGNED_SHORT&&(je=n.RGBA16UI),Z===n.UNSIGNED_INT&&(je=n.RGBA32UI),Z===n.BYTE&&(je=n.RGBA8I),Z===n.SHORT&&(je=n.RGBA16I),Z===n.INT&&(je=n.RGBA32I)),G===n.RGB&&Z===n.UNSIGNED_INT_5_9_9_9_REV&&(je=n.RGB9_E5),G===n.RGBA){const bt=Oe?k4:fr.getTransfer(ge);Z===n.FLOAT&&(je=n.RGBA32F),Z===n.HALF_FLOAT&&(je=n.RGBA16F),Z===n.UNSIGNED_BYTE&&(je=bt===kr?n.SRGB8_ALPHA8:n.RGBA8),Z===n.UNSIGNED_SHORT_4_4_4_4&&(je=n.RGBA4),Z===n.UNSIGNED_SHORT_5_5_5_1&&(je=n.RGB5_A1)}return(je===n.R16F||je===n.R32F||je===n.RG16F||je===n.RG32F||je===n.RGBA16F||je===n.RGBA32F)&&e.get("EXT_color_buffer_float"),je}function b(pe,G){let Z;return pe?G===null||G===sc||G===K1?Z=n.DEPTH24_STENCIL8:G===Yc?Z=n.DEPTH32F_STENCIL8:G===nA&&(Z=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):G===null||G===sc||G===K1?Z=n.DEPTH_COMPONENT24:G===Yc?Z=n.DEPTH_COMPONENT32F:G===nA&&(Z=n.DEPTH_COMPONENT16),Z}function A(pe,G){return v(pe)===!0||pe.isFramebufferTexture&&pe.minFilter!==Ml&&pe.minFilter!==zu?Math.log2(Math.max(G.width,G.height))+1:pe.mipmaps!==void 0&&pe.mipmaps.length>0?pe.mipmaps.length:pe.isCompressedTexture&&Array.isArray(pe.image)?G.mipmaps.length:1}function S(pe){const G=pe.target;G.removeEventListener("dispose",S),_(G),G.isVideoTexture&&u.delete(G)}function C(pe){const G=pe.target;G.removeEventListener("dispose",C),T(G)}function _(pe){const G=i.get(pe);if(G.__webglInit===void 0)return;const Z=pe.source,ge=f.get(Z);if(ge){const Oe=ge[G.__cacheKey];Oe.usedTimes--,Oe.usedTimes===0&&M(pe),Object.keys(ge).length===0&&f.delete(Z)}i.remove(pe)}function M(pe){const G=i.get(pe);n.deleteTexture(G.__webglTexture);const Z=pe.source,ge=f.get(Z);delete ge[G.__cacheKey],a.memory.textures--}function T(pe){const G=i.get(pe);if(pe.depthTexture&&(pe.depthTexture.dispose(),i.remove(pe.depthTexture)),pe.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(G.__webglFramebuffer[ge]))for(let Oe=0;Oe<G.__webglFramebuffer[ge].length;Oe++)n.deleteFramebuffer(G.__webglFramebuffer[ge][Oe]);else n.deleteFramebuffer(G.__webglFramebuffer[ge]);G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer[ge])}else{if(Array.isArray(G.__webglFramebuffer))for(let ge=0;ge<G.__webglFramebuffer.length;ge++)n.deleteFramebuffer(G.__webglFramebuffer[ge]);else n.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&n.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let ge=0;ge<G.__webglColorRenderbuffer.length;ge++)G.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(G.__webglColorRenderbuffer[ge]);G.__webglDepthRenderbuffer&&n.deleteRenderbuffer(G.__webglDepthRenderbuffer)}const Z=pe.textures;for(let ge=0,Oe=Z.length;ge<Oe;ge++){const je=i.get(Z[ge]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),a.memory.textures--),i.remove(Z[ge])}i.remove(pe)}let E=0;function I(){E=0}function L(){const pe=E;return pe>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+pe+" texture units while this GPU supports only "+r.maxTextures),E+=1,pe}function F(pe){const G=[];return G.push(pe.wrapS),G.push(pe.wrapT),G.push(pe.wrapR||0),G.push(pe.magFilter),G.push(pe.minFilter),G.push(pe.anisotropy),G.push(pe.internalFormat),G.push(pe.format),G.push(pe.type),G.push(pe.generateMipmaps),G.push(pe.premultiplyAlpha),G.push(pe.flipY),G.push(pe.unpackAlignment),G.push(pe.colorSpace),G.join()}function B(pe,G){const Z=i.get(pe);if(pe.isVideoTexture&&He(pe),pe.isRenderTargetTexture===!1&&pe.version>0&&Z.__version!==pe.version){const ge=pe.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(Z,pe,G);return}}t.bindTexture(n.TEXTURE_2D,Z.__webglTexture,n.TEXTURE0+G)}function P(pe,G){const Z=i.get(pe);if(pe.version>0&&Z.__version!==pe.version){ee(Z,pe,G);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Z.__webglTexture,n.TEXTURE0+G)}function z(pe,G){const Z=i.get(pe);if(pe.version>0&&Z.__version!==pe.version){ee(Z,pe,G);return}t.bindTexture(n.TEXTURE_3D,Z.__webglTexture,n.TEXTURE0+G)}function O(pe,G){const Z=i.get(pe);if(pe.version>0&&Z.__version!==pe.version){de(Z,pe,G);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Z.__webglTexture,n.TEXTURE0+G)}const N={[wP]:n.REPEAT,[V0]:n.CLAMP_TO_EDGE,[SP]:n.MIRRORED_REPEAT},H={[Ml]:n.NEAREST,[ktt]:n.NEAREST_MIPMAP_NEAREST,[QS]:n.NEAREST_MIPMAP_LINEAR,[zu]:n.LINEAR,[cI]:n.LINEAR_MIPMAP_NEAREST,[H0]:n.LINEAR_MIPMAP_LINEAR},q={[Utt]:n.NEVER,[qtt]:n.ALWAYS,[ztt]:n.LESS,[Hae]:n.LEQUAL,[Vtt]:n.EQUAL,[Wtt]:n.GEQUAL,[Htt]:n.GREATER,[Gtt]:n.NOTEQUAL};function te(pe,G){if(G.type===Yc&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===zu||G.magFilter===cI||G.magFilter===QS||G.magFilter===H0||G.minFilter===zu||G.minFilter===cI||G.minFilter===QS||G.minFilter===H0)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(pe,n.TEXTURE_WRAP_S,N[G.wrapS]),n.texParameteri(pe,n.TEXTURE_WRAP_T,N[G.wrapT]),(pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY)&&n.texParameteri(pe,n.TEXTURE_WRAP_R,N[G.wrapR]),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,H[G.magFilter]),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,H[G.minFilter]),G.compareFunction&&(n.texParameteri(pe,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(pe,n.TEXTURE_COMPARE_FUNC,q[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(G.magFilter===Ml||G.minFilter!==QS&&G.minFilter!==H0||G.type===Yc&&e.has("OES_texture_float_linear")===!1)return;if(G.anisotropy>1||i.get(G).__currentAnisotropy){const Z=e.get("EXT_texture_filter_anisotropic");n.texParameterf(pe,Z.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,r.getMaxAnisotropy())),i.get(G).__currentAnisotropy=G.anisotropy}}}function Q(pe,G){let Z=!1;pe.__webglInit===void 0&&(pe.__webglInit=!0,G.addEventListener("dispose",S));const ge=G.source;let Oe=f.get(ge);Oe===void 0&&(Oe={},f.set(ge,Oe));const je=F(G);if(je!==pe.__cacheKey){Oe[je]===void 0&&(Oe[je]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Z=!0),Oe[je].usedTimes++;const bt=Oe[pe.__cacheKey];bt!==void 0&&(Oe[pe.__cacheKey].usedTimes--,bt.usedTimes===0&&M(G)),pe.__cacheKey=je,pe.__webglTexture=Oe[je].texture}return Z}function ee(pe,G,Z){let ge=n.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),G.isData3DTexture&&(ge=n.TEXTURE_3D);const Oe=Q(pe,G),je=G.source;t.bindTexture(ge,pe.__webglTexture,n.TEXTURE0+Z);const bt=i.get(je);if(je.version!==bt.__version||Oe===!0){t.activeTexture(n.TEXTURE0+Z);const At=fr.getPrimaries(fr.workingColorSpace),Ee=G.colorSpace===Ih?null:fr.getPrimaries(G.colorSpace),gt=G.colorSpace===Ih||At===Ee?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,gt);let lt=m(G.image,!1,r.maxTextureSize);lt=qe(G,lt);const $=s.convert(G.format,G.colorSpace),le=s.convert(G.type);let fe=x(G.internalFormat,$,le,G.colorSpace,G.isVideoTexture);te(ge,G);let Me;const me=G.mipmaps,Ae=G.isVideoTexture!==!0,dt=bt.__version===void 0||Oe===!0,we=je.dataReady,_t=A(G,lt);if(G.isDepthTexture)fe=b(G.format===Y1,G.type),dt&&(Ae?t.texStorage2D(n.TEXTURE_2D,1,fe,lt.width,lt.height):t.texImage2D(n.TEXTURE_2D,0,fe,lt.width,lt.height,0,$,le,null));else if(G.isDataTexture)if(me.length>0){Ae&&dt&&t.texStorage2D(n.TEXTURE_2D,_t,fe,me[0].width,me[0].height);for(let it=0,wt=me.length;it<wt;it++)Me=me[it],Ae?we&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,Me.width,Me.height,$,le,Me.data):t.texImage2D(n.TEXTURE_2D,it,fe,Me.width,Me.height,0,$,le,Me.data);G.generateMipmaps=!1}else Ae?(dt&&t.texStorage2D(n.TEXTURE_2D,_t,fe,lt.width,lt.height),we&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,lt.width,lt.height,$,le,lt.data)):t.texImage2D(n.TEXTURE_2D,0,fe,lt.width,lt.height,0,$,le,lt.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Ae&&dt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_t,fe,me[0].width,me[0].height,lt.depth);for(let it=0,wt=me.length;it<wt;it++)if(Me=me[it],G.format!==yo)if($!==null)if(Ae){if(we)if(G.layerUpdates.size>0){const Ft=eY(Me.width,Me.height,G.format,G.type);for(const Rt of G.layerUpdates){const Wt=Me.data.subarray(Rt*Ft/Me.data.BYTES_PER_ELEMENT,(Rt+1)*Ft/Me.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,Rt,Me.width,Me.height,1,$,Wt)}G.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,Me.width,Me.height,lt.depth,$,Me.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,it,fe,Me.width,Me.height,lt.depth,0,Me.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ae?we&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,it,0,0,0,Me.width,Me.height,lt.depth,$,le,Me.data):t.texImage3D(n.TEXTURE_2D_ARRAY,it,fe,Me.width,Me.height,lt.depth,0,$,le,Me.data)}else{Ae&&dt&&t.texStorage2D(n.TEXTURE_2D,_t,fe,me[0].width,me[0].height);for(let it=0,wt=me.length;it<wt;it++)Me=me[it],G.format!==yo?$!==null?Ae?we&&t.compressedTexSubImage2D(n.TEXTURE_2D,it,0,0,Me.width,Me.height,$,Me.data):t.compressedTexImage2D(n.TEXTURE_2D,it,fe,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?we&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,Me.width,Me.height,$,le,Me.data):t.texImage2D(n.TEXTURE_2D,it,fe,Me.width,Me.height,0,$,le,Me.data)}else if(G.isDataArrayTexture)if(Ae){if(dt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_t,fe,lt.width,lt.height,lt.depth),we)if(G.layerUpdates.size>0){const it=eY(lt.width,lt.height,G.format,G.type);for(const wt of G.layerUpdates){const Ft=lt.data.subarray(wt*it/lt.data.BYTES_PER_ELEMENT,(wt+1)*it/lt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,wt,lt.width,lt.height,1,$,le,Ft)}G.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,lt.width,lt.height,lt.depth,$,le,lt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,fe,lt.width,lt.height,lt.depth,0,$,le,lt.data);else if(G.isData3DTexture)Ae?(dt&&t.texStorage3D(n.TEXTURE_3D,_t,fe,lt.width,lt.height,lt.depth),we&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,lt.width,lt.height,lt.depth,$,le,lt.data)):t.texImage3D(n.TEXTURE_3D,0,fe,lt.width,lt.height,lt.depth,0,$,le,lt.data);else if(G.isFramebufferTexture){if(dt)if(Ae)t.texStorage2D(n.TEXTURE_2D,_t,fe,lt.width,lt.height);else{let it=lt.width,wt=lt.height;for(let Ft=0;Ft<_t;Ft++)t.texImage2D(n.TEXTURE_2D,Ft,fe,it,wt,0,$,le,null),it>>=1,wt>>=1}}else if(me.length>0){if(Ae&&dt){const it=tt(me[0]);t.texStorage2D(n.TEXTURE_2D,_t,fe,it.width,it.height)}for(let it=0,wt=me.length;it<wt;it++)Me=me[it],Ae?we&&t.texSubImage2D(n.TEXTURE_2D,it,0,0,$,le,Me):t.texImage2D(n.TEXTURE_2D,it,fe,$,le,Me);G.generateMipmaps=!1}else if(Ae){if(dt){const it=tt(lt);t.texStorage2D(n.TEXTURE_2D,_t,fe,it.width,it.height)}we&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,$,le,lt)}else t.texImage2D(n.TEXTURE_2D,0,fe,$,le,lt);v(G)&&g(ge),bt.__version=je.version,G.onUpdate&&G.onUpdate(G)}pe.__version=G.version}function de(pe,G,Z){if(G.image.length!==6)return;const ge=Q(pe,G),Oe=G.source;t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+Z);const je=i.get(Oe);if(Oe.version!==je.__version||ge===!0){t.activeTexture(n.TEXTURE0+Z);const bt=fr.getPrimaries(fr.workingColorSpace),At=G.colorSpace===Ih?null:fr.getPrimaries(G.colorSpace),Ee=G.colorSpace===Ih||bt===At?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ee);const gt=G.isCompressedTexture||G.image[0].isCompressedTexture,lt=G.image[0]&&G.image[0].isDataTexture,$=[];for(let wt=0;wt<6;wt++)!gt&&!lt?$[wt]=m(G.image[wt],!0,r.maxCubemapSize):$[wt]=lt?G.image[wt].image:G.image[wt],$[wt]=qe(G,$[wt]);const le=$[0],fe=s.convert(G.format,G.colorSpace),Me=s.convert(G.type),me=x(G.internalFormat,fe,Me,G.colorSpace),Ae=G.isVideoTexture!==!0,dt=je.__version===void 0||ge===!0,we=Oe.dataReady;let _t=A(G,le);te(n.TEXTURE_CUBE_MAP,G);let it;if(gt){Ae&&dt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,_t,me,le.width,le.height);for(let wt=0;wt<6;wt++){it=$[wt].mipmaps;for(let Ft=0;Ft<it.length;Ft++){const Rt=it[Ft];G.format!==yo?fe!==null?Ae?we&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft,0,0,Rt.width,Rt.height,fe,Rt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft,me,Rt.width,Rt.height,0,Rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ae?we&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft,0,0,Rt.width,Rt.height,fe,Me,Rt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft,me,Rt.width,Rt.height,0,fe,Me,Rt.data)}}}else{if(it=G.mipmaps,Ae&&dt){it.length>0&&_t++;const wt=tt($[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,_t,me,wt.width,wt.height)}for(let wt=0;wt<6;wt++)if(lt){Ae?we&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,0,0,$[wt].width,$[wt].height,fe,Me,$[wt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,me,$[wt].width,$[wt].height,0,fe,Me,$[wt].data);for(let Ft=0;Ft<it.length;Ft++){const Wt=it[Ft].image[wt].image;Ae?we&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft+1,0,0,Wt.width,Wt.height,fe,Me,Wt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft+1,me,Wt.width,Wt.height,0,fe,Me,Wt.data)}}else{Ae?we&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,0,0,fe,Me,$[wt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,me,fe,Me,$[wt]);for(let Ft=0;Ft<it.length;Ft++){const Rt=it[Ft];Ae?we&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft+1,0,0,fe,Me,Rt.image[wt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Ft+1,me,fe,Me,Rt.image[wt])}}}v(G)&&g(n.TEXTURE_CUBE_MAP),je.__version=Oe.version,G.onUpdate&&G.onUpdate(G)}pe.__version=G.version}function J(pe,G,Z,ge,Oe,je){const bt=s.convert(Z.format,Z.colorSpace),At=s.convert(Z.type),Ee=x(Z.internalFormat,bt,At,Z.colorSpace),gt=i.get(G),lt=i.get(Z);if(lt.__renderTarget=G,!gt.__hasExternalTextures){const $=Math.max(1,G.width>>je),le=Math.max(1,G.height>>je);Oe===n.TEXTURE_3D||Oe===n.TEXTURE_2D_ARRAY?t.texImage3D(Oe,je,Ee,$,le,G.depth,0,bt,At,null):t.texImage2D(Oe,je,Ee,$,le,0,bt,At,null)}t.bindFramebuffer(n.FRAMEBUFFER,pe),Ge(G)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,Oe,lt.__webglTexture,0,ke(G)):(Oe===n.TEXTURE_2D||Oe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Oe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ge,Oe,lt.__webglTexture,je),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(pe,G,Z){if(n.bindRenderbuffer(n.RENDERBUFFER,pe),G.depthBuffer){const ge=G.depthTexture,Oe=ge&&ge.isDepthTexture?ge.type:null,je=b(G.stencilBuffer,Oe),bt=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,At=ke(G);Ge(G)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,At,je,G.width,G.height):Z?n.renderbufferStorageMultisample(n.RENDERBUFFER,At,je,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,je,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,bt,n.RENDERBUFFER,pe)}else{const ge=G.textures;for(let Oe=0;Oe<ge.length;Oe++){const je=ge[Oe],bt=s.convert(je.format,je.colorSpace),At=s.convert(je.type),Ee=x(je.internalFormat,bt,At,je.colorSpace),gt=ke(G);Z&&Ge(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,gt,Ee,G.width,G.height):Ge(G)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,gt,Ee,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,Ee,G.width,G.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Te(pe,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,pe),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ge=i.get(G.depthTexture);ge.__renderTarget=G,(!ge.__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),B(G.depthTexture,0);const Oe=ge.__webglTexture,je=ke(G);if(G.depthTexture.format===tm)Ge(G)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0,je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Oe,0);else if(G.depthTexture.format===Y1)Ge(G)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0,je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Oe,0);else throw new Error("Unknown depthTexture format")}function De(pe){const G=i.get(pe),Z=pe.isWebGLCubeRenderTarget===!0;if(G.__boundDepthTexture!==pe.depthTexture){const ge=pe.depthTexture;if(G.__depthDisposeCallback&&G.__depthDisposeCallback(),ge){const Oe=()=>{delete G.__boundDepthTexture,delete G.__depthDisposeCallback,ge.removeEventListener("dispose",Oe)};ge.addEventListener("dispose",Oe),G.__depthDisposeCallback=Oe}G.__boundDepthTexture=ge}if(pe.depthTexture&&!G.__autoAllocateDepthBuffer){if(Z)throw new Error("target.depthTexture not supported in Cube render targets");Te(G.__webglFramebuffer,pe)}else if(Z){G.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)if(t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer[ge]),G.__webglDepthbuffer[ge]===void 0)G.__webglDepthbuffer[ge]=n.createRenderbuffer(),ue(G.__webglDepthbuffer[ge],pe,!1);else{const Oe=pe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=G.__webglDepthbuffer[ge];n.bindRenderbuffer(n.RENDERBUFFER,je),n.framebufferRenderbuffer(n.FRAMEBUFFER,Oe,n.RENDERBUFFER,je)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer===void 0)G.__webglDepthbuffer=n.createRenderbuffer(),ue(G.__webglDepthbuffer,pe,!1);else{const ge=pe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=G.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Oe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,Oe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Le(pe,G,Z){const ge=i.get(pe);G!==void 0&&J(ge.__webglFramebuffer,pe,pe.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Z!==void 0&&De(pe)}function Ne(pe){const G=pe.texture,Z=i.get(pe),ge=i.get(G);pe.addEventListener("dispose",C);const Oe=pe.textures,je=pe.isWebGLCubeRenderTarget===!0,bt=Oe.length>1;if(bt||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=G.version,a.memory.textures++),je){Z.__webglFramebuffer=[];for(let At=0;At<6;At++)if(G.mipmaps&&G.mipmaps.length>0){Z.__webglFramebuffer[At]=[];for(let Ee=0;Ee<G.mipmaps.length;Ee++)Z.__webglFramebuffer[At][Ee]=n.createFramebuffer()}else Z.__webglFramebuffer[At]=n.createFramebuffer()}else{if(G.mipmaps&&G.mipmaps.length>0){Z.__webglFramebuffer=[];for(let At=0;At<G.mipmaps.length;At++)Z.__webglFramebuffer[At]=n.createFramebuffer()}else Z.__webglFramebuffer=n.createFramebuffer();if(bt)for(let At=0,Ee=Oe.length;At<Ee;At++){const gt=i.get(Oe[At]);gt.__webglTexture===void 0&&(gt.__webglTexture=n.createTexture(),a.memory.textures++)}if(pe.samples>0&&Ge(pe)===!1){Z.__webglMultisampledFramebuffer=n.createFramebuffer(),Z.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglMultisampledFramebuffer);for(let At=0;At<Oe.length;At++){const Ee=Oe[At];Z.__webglColorRenderbuffer[At]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Z.__webglColorRenderbuffer[At]);const gt=s.convert(Ee.format,Ee.colorSpace),lt=s.convert(Ee.type),$=x(Ee.internalFormat,gt,lt,Ee.colorSpace,pe.isXRRenderTarget===!0),le=ke(pe);n.renderbufferStorageMultisample(n.RENDERBUFFER,le,$,pe.width,pe.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+At,n.RENDERBUFFER,Z.__webglColorRenderbuffer[At])}n.bindRenderbuffer(n.RENDERBUFFER,null),pe.depthBuffer&&(Z.__webglDepthRenderbuffer=n.createRenderbuffer(),ue(Z.__webglDepthRenderbuffer,pe,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(je){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),te(n.TEXTURE_CUBE_MAP,G);for(let At=0;At<6;At++)if(G.mipmaps&&G.mipmaps.length>0)for(let Ee=0;Ee<G.mipmaps.length;Ee++)J(Z.__webglFramebuffer[At][Ee],pe,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,Ee);else J(Z.__webglFramebuffer[At],pe,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,0);v(G)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(bt){for(let At=0,Ee=Oe.length;At<Ee;At++){const gt=Oe[At],lt=i.get(gt);t.bindTexture(n.TEXTURE_2D,lt.__webglTexture),te(n.TEXTURE_2D,gt),J(Z.__webglFramebuffer,pe,gt,n.COLOR_ATTACHMENT0+At,n.TEXTURE_2D,0),v(gt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let At=n.TEXTURE_2D;if((pe.isWebGL3DRenderTarget||pe.isWebGLArrayRenderTarget)&&(At=pe.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(At,ge.__webglTexture),te(At,G),G.mipmaps&&G.mipmaps.length>0)for(let Ee=0;Ee<G.mipmaps.length;Ee++)J(Z.__webglFramebuffer[Ee],pe,G,n.COLOR_ATTACHMENT0,At,Ee);else J(Z.__webglFramebuffer,pe,G,n.COLOR_ATTACHMENT0,At,0);v(G)&&g(At),t.unbindTexture()}pe.depthBuffer&&De(pe)}function Y(pe){const G=pe.textures;for(let Z=0,ge=G.length;Z<ge;Z++){const Oe=G[Z];if(v(Oe)){const je=y(pe),bt=i.get(Oe).__webglTexture;t.bindTexture(je,bt),g(je),t.unbindTexture()}}}const oe=[],ne=[];function Xe(pe){if(pe.samples>0){if(Ge(pe)===!1){const G=pe.textures,Z=pe.width,ge=pe.height;let Oe=n.COLOR_BUFFER_BIT;const je=pe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,bt=i.get(pe),At=G.length>1;if(At)for(let Ee=0;Ee<G.length;Ee++)t.bindFramebuffer(n.FRAMEBUFFER,bt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,bt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,bt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,bt.__webglFramebuffer);for(let Ee=0;Ee<G.length;Ee++){if(pe.resolveDepthBuffer&&(pe.depthBuffer&&(Oe|=n.DEPTH_BUFFER_BIT),pe.stencilBuffer&&pe.resolveStencilBuffer&&(Oe|=n.STENCIL_BUFFER_BIT)),At){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,bt.__webglColorRenderbuffer[Ee]);const gt=i.get(G[Ee]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,gt,0)}n.blitFramebuffer(0,0,Z,ge,0,0,Z,ge,Oe,n.NEAREST),l===!0&&(oe.length=0,ne.length=0,oe.push(n.COLOR_ATTACHMENT0+Ee),pe.depthBuffer&&pe.resolveDepthBuffer===!1&&(oe.push(je),ne.push(je),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ne)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,oe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),At)for(let Ee=0;Ee<G.length;Ee++){t.bindFramebuffer(n.FRAMEBUFFER,bt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.RENDERBUFFER,bt.__webglColorRenderbuffer[Ee]);const gt=i.get(G[Ee]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,bt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ee,n.TEXTURE_2D,gt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,bt.__webglMultisampledFramebuffer)}else if(pe.depthBuffer&&pe.resolveDepthBuffer===!1&&l){const G=pe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[G])}}}function ke(pe){return Math.min(r.maxSamples,pe.samples)}function Ge(pe){const G=i.get(pe);return pe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function He(pe){const G=a.render.frame;u.get(pe)!==G&&(u.set(pe,G),pe.update())}function qe(pe,G){const Z=pe.colorSpace,ge=pe.format,Oe=pe.type;return pe.isCompressedTexture===!0||pe.isVideoTexture===!0||Z!==X1&&Z!==Ih&&(fr.getTransfer(Z)===kr?(ge!==yo||Oe!==id)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Z)),G}function tt(pe){return typeof HTMLImageElement<"u"&&pe instanceof HTMLImageElement?(c.width=pe.naturalWidth||pe.width,c.height=pe.naturalHeight||pe.height):typeof VideoFrame<"u"&&pe instanceof VideoFrame?(c.width=pe.displayWidth,c.height=pe.displayHeight):(c.width=pe.width,c.height=pe.height),c}this.allocateTextureUnit=L,this.resetTextureUnits=I,this.setTexture2D=B,this.setTexture2DArray=P,this.setTexture3D=z,this.setTextureCube=O,this.rebindTextures=Le,this.setupRenderTarget=Ne,this.updateRenderTargetMipmap=Y,this.updateMultisampleRenderTarget=Xe,this.setupDepthRenderbuffer=De,this.setupFrameBufferTexture=J,this.useMultisampledRTT=Ge}function aoe(n,e){function t(i,r=Ih){let s;const a=fr.getTransfer(r);if(i===id)return n.UNSIGNED_BYTE;if(i===cB)return n.UNSIGNED_SHORT_4_4_4_4;if(i===uB)return n.UNSIGNED_SHORT_5_5_5_1;if(i===kae)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Pae)return n.BYTE;if(i===Lae)return n.SHORT;if(i===nA)return n.UNSIGNED_SHORT;if(i===lB)return n.INT;if(i===sc)return n.UNSIGNED_INT;if(i===Yc)return n.FLOAT;if(i===ky)return n.HALF_FLOAT;if(i===Fae)return n.ALPHA;if(i===Bae)return n.RGB;if(i===yo)return n.RGBA;if(i===Nae)return n.LUMINANCE;if(i===Oae)return n.LUMINANCE_ALPHA;if(i===tm)return n.DEPTH_COMPONENT;if(i===Y1)return n.DEPTH_STENCIL;if(i===Uae)return n.RED;if(i===bT)return n.RED_INTEGER;if(i===zae)return n.RG;if(i===dB)return n.RG_INTEGER;if(i===r1)return n.RGBA_INTEGER;if(i===V_||i===H_||i===G_||i===W_)if(a===kr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===V_)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===H_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===G_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===W_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===V_)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===H_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===G_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===W_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===_P||i===CP||i===MP||i===TP)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===_P)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===CP)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===MP)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===TP)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===EP||i===IP||i===DP)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===EP||i===IP)return a===kr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===DP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===RP||i===PP||i===LP||i===kP||i===FP||i===BP||i===NP||i===OP||i===UP||i===zP||i===VP||i===HP||i===GP||i===WP)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===RP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===PP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===LP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===kP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===FP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===BP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===NP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===OP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===UP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===zP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===VP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===HP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===GP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===WP)return a===kr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===q_||i===qP||i===KP)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===q_)return a===kr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===qP)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===KP)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Vae||i===YP||i===XP||i===jP)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===q_)return s.COMPRESSED_RED_RGTC1_EXT;if(i===YP)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===XP)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===jP)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===K1?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const oot=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lot=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cot{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new wo,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new El({vertexShader:oot,fragmentShader:lot,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ts(new $1(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class uot extends Um{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,f=null,h=null,p=null;const m=new cot,v=t.getContextAttributes();let g=null,y=null;const x=[],b=[],A=new Yn;let S=null;const C=new Ql;C.viewport=new us;const _=new Ql;_.viewport=new us;const M=[C,_],T=new Pnt;let E=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let de=x[ee];return de===void 0&&(de=new DI,x[ee]=de),de.getTargetRaySpace()},this.getControllerGrip=function(ee){let de=x[ee];return de===void 0&&(de=new DI,x[ee]=de),de.getGripSpace()},this.getHand=function(ee){let de=x[ee];return de===void 0&&(de=new DI,x[ee]=de),de.getHandSpace()};function L(ee){const de=b.indexOf(ee.inputSource);if(de===-1)return;const J=x[de];J!==void 0&&(J.update(ee.inputSource,ee.frame,c||a),J.dispatchEvent({type:ee.type,data:ee.inputSource}))}function F(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",B);for(let ee=0;ee<x.length;ee++){const de=b[ee];de!==null&&(b[ee]=null,x[ee].disconnect(de))}E=null,I=null,m.reset(),e.setRenderTarget(g),h=null,f=null,d=null,r=null,y=null,Q.stop(),i.isPresenting=!1,e.setPixelRatio(S),e.setSize(A.width,A.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){o=ee,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(ee){c=ee},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(ee){if(r=ee,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",F),r.addEventListener("inputsourceschange",B),v.xrCompatible!==!0&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(A),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let J=null,ue=null,Te=null;v.depth&&(Te=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,J=v.stencil?Y1:tm,ue=v.stencil?K1:sc);const De={colorFormat:t.RGBA8,depthFormat:Te,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(De),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),y=new yp(f.textureWidth,f.textureHeight,{format:yo,type:id,depthTexture:new pB(f.textureWidth,f.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,J),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const J={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,t,J),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),y=new yp(h.framebufferWidth,h.framebufferHeight,{format:yo,type:id,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),Q.setContext(r),Q.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function B(ee){for(let de=0;de<ee.removed.length;de++){const J=ee.removed[de],ue=b.indexOf(J);ue>=0&&(b[ue]=null,x[ue].disconnect(J))}for(let de=0;de<ee.added.length;de++){const J=ee.added[de];let ue=b.indexOf(J);if(ue===-1){for(let De=0;De<x.length;De++)if(De>=b.length){b.push(J),ue=De;break}else if(b[De]===null){b[De]=J,ue=De;break}if(ue===-1)break}const Te=x[ue];Te&&Te.connect(J)}}const P=new nt,z=new nt;function O(ee,de,J){P.setFromMatrixPosition(de.matrixWorld),z.setFromMatrixPosition(J.matrixWorld);const ue=P.distanceTo(z),Te=de.projectionMatrix.elements,De=J.projectionMatrix.elements,Le=Te[14]/(Te[10]-1),Ne=Te[14]/(Te[10]+1),Y=(Te[9]+1)/Te[5],oe=(Te[9]-1)/Te[5],ne=(Te[8]-1)/Te[0],Xe=(De[8]+1)/De[0],ke=Le*ne,Ge=Le*Xe,He=ue/(-ne+Xe),qe=He*-ne;if(de.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(qe),ee.translateZ(He),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert(),Te[10]===-1)ee.projectionMatrix.copy(de.projectionMatrix),ee.projectionMatrixInverse.copy(de.projectionMatrixInverse);else{const tt=Le+He,pe=Ne+He,G=ke-qe,Z=Ge+(ue-qe),ge=Y*Ne/pe*tt,Oe=oe*Ne/pe*tt;ee.projectionMatrix.makePerspective(G,Z,ge,Oe,tt,pe),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}}function N(ee,de){de===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(de.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(r===null)return;let de=ee.near,J=ee.far;m.texture!==null&&(m.depthNear>0&&(de=m.depthNear),m.depthFar>0&&(J=m.depthFar)),T.near=_.near=C.near=de,T.far=_.far=C.far=J,(E!==T.near||I!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),E=T.near,I=T.far),C.layers.mask=ee.layers.mask|2,_.layers.mask=ee.layers.mask|4,T.layers.mask=C.layers.mask|_.layers.mask;const ue=ee.parent,Te=T.cameras;N(T,ue);for(let De=0;De<Te.length;De++)N(Te[De],ue);Te.length===2?O(T,C,_):T.projectionMatrix.copy(C.projectionMatrix),H(ee,T,ue)};function H(ee,de,J){J===null?ee.matrix.copy(de.matrixWorld):(ee.matrix.copy(J.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(de.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(de.projectionMatrix),ee.projectionMatrixInverse.copy(de.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=$P*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(ee){l=ee,f!==null&&(f.fixedFoveation=ee),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=ee)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(T)};let q=null;function te(ee,de){if(u=de.getViewerPose(c||a),p=de,u!==null){const J=u.views;h!==null&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let ue=!1;J.length!==T.cameras.length&&(T.cameras.length=0,ue=!0);for(let Le=0;Le<J.length;Le++){const Ne=J[Le];let Y=null;if(h!==null)Y=h.getViewport(Ne);else{const ne=d.getViewSubImage(f,Ne);Y=ne.viewport,Le===0&&(e.setRenderTargetTextures(y,ne.colorTexture,f.ignoreDepthValues?void 0:ne.depthStencilTexture),e.setRenderTarget(y))}let oe=M[Le];oe===void 0&&(oe=new Ql,oe.layers.enable(Le),oe.viewport=new us,M[Le]=oe),oe.matrix.fromArray(Ne.transform.matrix),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.projectionMatrix.fromArray(Ne.projectionMatrix),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert(),oe.viewport.set(Y.x,Y.y,Y.width,Y.height),Le===0&&(T.matrix.copy(oe.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ue===!0&&T.cameras.push(oe)}const Te=r.enabledFeatures;if(Te&&Te.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&d){const Le=d.getDepthInformation(J[0]);Le&&Le.isValid&&Le.texture&&m.init(e,Le,r.renderState)}}for(let J=0;J<x.length;J++){const ue=b[J],Te=x[J];ue!==null&&Te!==void 0&&Te.update(ue,de,c||a)}q&&q(ee,de),de.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:de}),p=null}const Q=new toe;Q.setAnimationLoop(te),this.setAnimationLoop=function(ee){q=ee},this.dispose=function(){}}}const f0=new wf,dot=new gi;function fot(n,e){function t(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function i(v,g){g.color.getRGB(v.fogColor.value,Qae(n)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function r(v,g,y,x,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(v,g):g.isMeshToonMaterial?(s(v,g),d(v,g)):g.isMeshPhongMaterial?(s(v,g),u(v,g)):g.isMeshStandardMaterial?(s(v,g),f(v,g),g.isMeshPhysicalMaterial&&h(v,g,b)):g.isMeshMatcapMaterial?(s(v,g),p(v,g)):g.isMeshDepthMaterial?s(v,g):g.isMeshDistanceMaterial?(s(v,g),m(v,g)):g.isMeshNormalMaterial?s(v,g):g.isLineBasicMaterial?(a(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?l(v,g,y,x):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,t(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===Zo&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,t(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===Zo&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,t(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,t(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const y=e.get(g),x=y.envMap,b=y.envMapRotation;x&&(v.envMap.value=x,f0.copy(b),f0.x*=-1,f0.y*=-1,f0.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(f0.y*=-1,f0.z*=-1),v.envMapRotation.value.setFromMatrix4(dot.makeRotationFromEuler(f0)),v.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,v.aoMapTransform))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform))}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,y,x){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*y,v.scale.value=x*.5,g.map&&(v.map.value=g.map,t(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function f(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function h(v,g,y){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Zo&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=y.texture,v.transmissionSamplerSize.value.set(y.width,y.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,v.specularIntensityMapTransform))}function p(v,g){g.matcap&&(v.matcap.value=g.matcap)}function m(v,g){const y=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(y.matrixWorld),v.nearDistance.value=y.shadow.camera.near,v.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function hot(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,x){const b=x.program;i.uniformBlockBinding(y,b)}function c(y,x){let b=r[y.id];b===void 0&&(p(y),b=u(y),r[y.id]=b,y.addEventListener("dispose",v));const A=x.program;i.updateUBOMapping(y,A);const S=e.render.frame;s[y.id]!==S&&(f(y),s[y.id]=S)}function u(y){const x=d();y.__bindingPointIndex=x;const b=n.createBuffer(),A=y.__size,S=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,A,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,b),b}function d(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const x=r[y.id],b=y.uniforms,A=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,x);for(let S=0,C=b.length;S<C;S++){const _=Array.isArray(b[S])?b[S]:[b[S]];for(let M=0,T=_.length;M<T;M++){const E=_[M];if(h(E,S,M,A)===!0){const I=E.__offset,L=Array.isArray(E.value)?E.value:[E.value];let F=0;for(let B=0;B<L.length;B++){const P=L[B],z=m(P);typeof P=="number"||typeof P=="boolean"?(E.__data[0]=P,n.bufferSubData(n.UNIFORM_BUFFER,I+F,E.__data)):P.isMatrix3?(E.__data[0]=P.elements[0],E.__data[1]=P.elements[1],E.__data[2]=P.elements[2],E.__data[3]=0,E.__data[4]=P.elements[3],E.__data[5]=P.elements[4],E.__data[6]=P.elements[5],E.__data[7]=0,E.__data[8]=P.elements[6],E.__data[9]=P.elements[7],E.__data[10]=P.elements[8],E.__data[11]=0):(P.toArray(E.__data,F),F+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,E.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(y,x,b,A){const S=y.value,C=x+"_"+b;if(A[C]===void 0)return typeof S=="number"||typeof S=="boolean"?A[C]=S:A[C]=S.clone(),!0;{const _=A[C];if(typeof S=="number"||typeof S=="boolean"){if(_!==S)return A[C]=S,!0}else if(_.equals(S)===!1)return _.copy(S),!0}return!1}function p(y){const x=y.uniforms;let b=0;const A=16;for(let C=0,_=x.length;C<_;C++){const M=Array.isArray(x[C])?x[C]:[x[C]];for(let T=0,E=M.length;T<E;T++){const I=M[T],L=Array.isArray(I.value)?I.value:[I.value];for(let F=0,B=L.length;F<B;F++){const P=L[F],z=m(P),O=b%A,N=O%z.boundary,H=O+N;b+=N,H!==0&&A-H<z.storage&&(b+=A-H),I.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=b,b+=z.storage}}}const S=b%A;return S>0&&(b+=A-S),y.__size=b,y.__cache={},this}function m(y){const x={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function v(y){const x=y.target;x.removeEventListener("dispose",v);const b=a.indexOf(x.__bindingPointIndex);a.splice(b,1),n.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function g(){for(const y in r)n.deleteBuffer(r[y]);a=[],r={},s={}}return{bind:l,update:c,dispose:g}}class pot{constructor(e={}){const{canvas:t=Xtt(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=a;const p=new Uint32Array(4),m=new Int32Array(4);let v=null,g=null;const y=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Yl,this.toneMapping=Qh,this.toneMappingExposure=1;const b=this;let A=!1,S=0,C=0,_=null,M=-1,T=null;const E=new us,I=new us;let L=null;const F=new pr(0);let B=0,P=t.width,z=t.height,O=1,N=null,H=null;const q=new us(0,0,P,z),te=new us(0,0,P,z);let Q=!1;const ee=new eoe;let de=!1,J=!1;this.transmissionResolutionScale=1;const ue=new gi,Te=new gi,De=new nt,Le=new us,Ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Y=!1;function oe(){return _===null?O:1}let ne=i;function Xe(he,Ze){return t.getContext(he,Ze)}try{const he={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${oB}`),t.addEventListener("webglcontextlost",wt,!1),t.addEventListener("webglcontextrestored",Ft,!1),t.addEventListener("webglcontextcreationerror",Rt,!1),ne===null){const Ze="webgl2";if(ne=Xe(Ze,he),ne===null)throw Xe(Ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}let ke,Ge,He,qe,tt,pe,G,Z,ge,Oe,je,bt,At,Ee,gt,lt,$,le,fe,Me,me,Ae,dt,we;function _t(){ke=new Cst(ne),ke.init(),Ae=new aoe(ne,ke),Ge=new yst(ne,ke,e,Ae),He=new sot(ne,ke),Ge.reverseDepthBuffer&&f&&He.buffers.depth.setReversed(!0),qe=new Est(ne),tt=new Kat,pe=new aot(ne,ke,He,tt,Ge,Ae,qe),G=new xst(b),Z=new _st(b),ge=new knt(ne),dt=new vst(ne,ge),Oe=new Mst(ne,ge,qe,dt),je=new Dst(ne,Oe,ge,qe),fe=new Ist(ne,Ge,pe),lt=new bst(tt),bt=new qat(b,G,Z,ke,Ge,dt,lt),At=new fot(b,tt),Ee=new Xat,gt=new eot(ke),le=new mst(b,G,Z,He,je,h,l),$=new iot(b,je,Ge),we=new hot(ne,qe,Ge,He),Me=new gst(ne,ke,qe),me=new Tst(ne,ke,qe),qe.programs=bt.programs,b.capabilities=Ge,b.extensions=ke,b.properties=tt,b.renderLists=Ee,b.shadowMap=$,b.state=He,b.info=qe}_t();const it=new uot(b,ne);this.xr=it,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const he=ke.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=ke.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(he){he!==void 0&&(O=he,this.setSize(P,z,!1))},this.getSize=function(he){return he.set(P,z)},this.setSize=function(he,Ze,ft=!0){if(it.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=he,z=Ze,t.width=Math.floor(he*O),t.height=Math.floor(Ze*O),ft===!0&&(t.style.width=he+"px",t.style.height=Ze+"px"),this.setViewport(0,0,he,Ze)},this.getDrawingBufferSize=function(he){return he.set(P*O,z*O).floor()},this.setDrawingBufferSize=function(he,Ze,ft){P=he,z=Ze,O=ft,t.width=Math.floor(he*ft),t.height=Math.floor(Ze*ft),this.setViewport(0,0,he,Ze)},this.getCurrentViewport=function(he){return he.copy(E)},this.getViewport=function(he){return he.copy(q)},this.setViewport=function(he,Ze,ft,yt){he.isVector4?q.set(he.x,he.y,he.z,he.w):q.set(he,Ze,ft,yt),He.viewport(E.copy(q).multiplyScalar(O).round())},this.getScissor=function(he){return he.copy(te)},this.setScissor=function(he,Ze,ft,yt){he.isVector4?te.set(he.x,he.y,he.z,he.w):te.set(he,Ze,ft,yt),He.scissor(I.copy(te).multiplyScalar(O).round())},this.getScissorTest=function(){return Q},this.setScissorTest=function(he){He.setScissorTest(Q=he)},this.setOpaqueSort=function(he){N=he},this.setTransparentSort=function(he){H=he},this.getClearColor=function(he){return he.copy(le.getClearColor())},this.setClearColor=function(){le.setClearColor(...arguments)},this.getClearAlpha=function(){return le.getClearAlpha()},this.setClearAlpha=function(){le.setClearAlpha(...arguments)},this.clear=function(he=!0,Ze=!0,ft=!0){let yt=0;if(he){let ct=!1;if(_!==null){const Ht=_.texture.format;ct=Ht===r1||Ht===dB||Ht===bT}if(ct){const Ht=_.texture.type,$t=Ht===id||Ht===sc||Ht===nA||Ht===K1||Ht===cB||Ht===uB,cn=le.getClearColor(),mn=le.getClearAlpha(),nn=cn.r,Fn=cn.g,on=cn.b;$t?(p[0]=nn,p[1]=Fn,p[2]=on,p[3]=mn,ne.clearBufferuiv(ne.COLOR,0,p)):(m[0]=nn,m[1]=Fn,m[2]=on,m[3]=mn,ne.clearBufferiv(ne.COLOR,0,m))}else yt|=ne.COLOR_BUFFER_BIT}Ze&&(yt|=ne.DEPTH_BUFFER_BIT),ft&&(yt|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(yt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",wt,!1),t.removeEventListener("webglcontextrestored",Ft,!1),t.removeEventListener("webglcontextcreationerror",Rt,!1),le.dispose(),Ee.dispose(),gt.dispose(),tt.dispose(),G.dispose(),Z.dispose(),je.dispose(),dt.dispose(),we.dispose(),bt.dispose(),it.dispose(),it.removeEventListener("sessionstart",X),it.removeEventListener("sessionend",se),zt.stop()};function wt(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Ft(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const he=qe.autoReset,Ze=$.enabled,ft=$.autoUpdate,yt=$.needsUpdate,ct=$.type;_t(),qe.autoReset=he,$.enabled=Ze,$.autoUpdate=ft,$.needsUpdate=yt,$.type=ct}function Rt(he){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",he.statusMessage)}function Wt(he){const Ze=he.target;Ze.removeEventListener("dispose",Wt),hn(Ze)}function hn(he){pi(he),tt.remove(he)}function pi(he){const Ze=tt.get(he).programs;Ze!==void 0&&(Ze.forEach(function(ft){bt.releaseProgram(ft)}),he.isShaderMaterial&&bt.releaseShaderCache(he))}this.renderBufferDirect=function(he,Ze,ft,yt,ct,Ht){Ze===null&&(Ze=Ne);const $t=ct.isMesh&&ct.matrixWorld.determinant()<0,cn=En(he,Ze,ft,yt,ct);He.setMaterial(yt,$t);let mn=ft.index,nn=1;if(yt.wireframe===!0){if(mn=Oe.getWireframeAttribute(ft),mn===void 0)return;nn=2}const Fn=ft.drawRange,on=ft.attributes.position;let ni=Fn.start*nn,xi=(Fn.start+Fn.count)*nn;Ht!==null&&(ni=Math.max(ni,Ht.start*nn),xi=Math.min(xi,(Ht.start+Ht.count)*nn)),mn!==null?(ni=Math.max(ni,0),xi=Math.min(xi,mn.count)):on!=null&&(ni=Math.max(ni,0),xi=Math.min(xi,on.count));const Mi=xi-ni;if(Mi<0||Mi===1/0)return;dt.setup(ct,yt,cn,ft,mn);let ur,_i=Me;if(mn!==null&&(ur=ge.get(mn),_i=me,_i.setIndex(ur)),ct.isMesh)yt.wireframe===!0?(He.setLineWidth(yt.wireframeLinewidth*oe()),_i.setMode(ne.LINES)):_i.setMode(ne.TRIANGLES);else if(ct.isLine){let Xn=yt.linewidth;Xn===void 0&&(Xn=1),He.setLineWidth(Xn*oe()),ct.isLineSegments?_i.setMode(ne.LINES):ct.isLineLoop?_i.setMode(ne.LINE_LOOP):_i.setMode(ne.LINE_STRIP)}else ct.isPoints?_i.setMode(ne.POINTS):ct.isSprite&&_i.setMode(ne.TRIANGLES);if(ct.isBatchedMesh)if(ct._multiDrawInstances!==null)y0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_i.renderMultiDrawInstances(ct._multiDrawStarts,ct._multiDrawCounts,ct._multiDrawCount,ct._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))_i.renderMultiDraw(ct._multiDrawStarts,ct._multiDrawCounts,ct._multiDrawCount);else{const Xn=ct._multiDrawStarts,ys=ct._multiDrawCounts,rr=ct._multiDrawCount,Hs=mn?ge.get(mn).bytesPerElement:1,Bi=tt.get(yt).currentProgram.getUniforms();for(let Gs=0;Gs<rr;Gs++)Bi.setValue(ne,"_gl_DrawID",Gs),_i.render(Xn[Gs]/Hs,ys[Gs])}else if(ct.isInstancedMesh)_i.renderInstances(ni,Mi,ct.count);else if(ft.isInstancedBufferGeometry){const Xn=ft._maxInstanceCount!==void 0?ft._maxInstanceCount:1/0,ys=Math.min(ft.instanceCount,Xn);_i.renderInstances(ni,Mi,ys)}else _i.render(ni,Mi)};function Pn(he,Ze,ft){he.transparent===!0&&he.side===Jl&&he.forceSinglePass===!1?(he.side=Zo,he.needsUpdate=!0,xt(he,Ze,ft),he.side=nd,he.needsUpdate=!0,xt(he,Ze,ft),he.side=Jl):xt(he,Ze,ft)}this.compile=function(he,Ze,ft=null){ft===null&&(ft=he),g=gt.get(ft),g.init(Ze),x.push(g),ft.traverseVisible(function(ct){ct.isLight&&ct.layers.test(Ze.layers)&&(g.pushLight(ct),ct.castShadow&&g.pushShadow(ct))}),he!==ft&&he.traverseVisible(function(ct){ct.isLight&&ct.layers.test(Ze.layers)&&(g.pushLight(ct),ct.castShadow&&g.pushShadow(ct))}),g.setupLights();const yt=new Set;return he.traverse(function(ct){if(!(ct.isMesh||ct.isPoints||ct.isLine||ct.isSprite))return;const Ht=ct.material;if(Ht)if(Array.isArray(Ht))for(let $t=0;$t<Ht.length;$t++){const cn=Ht[$t];Pn(cn,ft,ct),yt.add(cn)}else Pn(Ht,ft,ct),yt.add(Ht)}),g=x.pop(),yt},this.compileAsync=function(he,Ze,ft=null){const yt=this.compile(he,Ze,ft);return new Promise(ct=>{function Ht(){if(yt.forEach(function($t){tt.get($t).currentProgram.isReady()&&yt.delete($t)}),yt.size===0){ct(he);return}setTimeout(Ht,10)}ke.get("KHR_parallel_shader_compile")!==null?Ht():setTimeout(Ht,10)})};let Qi=null;function ai(he){Qi&&Qi(he)}function X(){zt.stop()}function se(){zt.start()}const zt=new toe;zt.setAnimationLoop(ai),typeof self<"u"&&zt.setContext(self),this.setAnimationLoop=function(he){Qi=he,it.setAnimationLoop(he),he===null?zt.stop():zt.start()},it.addEventListener("sessionstart",X),it.addEventListener("sessionend",se),this.render=function(he,Ze){if(Ze!==void 0&&Ze.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;if(he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),Ze.parent===null&&Ze.matrixWorldAutoUpdate===!0&&Ze.updateMatrixWorld(),it.enabled===!0&&it.isPresenting===!0&&(it.cameraAutoUpdate===!0&&it.updateCamera(Ze),Ze=it.getCamera()),he.isScene===!0&&he.onBeforeRender(b,he,Ze,_),g=gt.get(he,x.length),g.init(Ze),x.push(g),Te.multiplyMatrices(Ze.projectionMatrix,Ze.matrixWorldInverse),ee.setFromProjectionMatrix(Te),J=this.localClippingEnabled,de=lt.init(this.clippingPlanes,J),v=Ee.get(he,y.length),v.init(),y.push(v),it.enabled===!0&&it.isPresenting===!0){const Ht=b.xr.getDepthSensingMesh();Ht!==null&&Ce(Ht,Ze,-1/0,b.sortObjects)}Ce(he,Ze,0,b.sortObjects),v.finish(),b.sortObjects===!0&&v.sort(N,H),Y=it.enabled===!1||it.isPresenting===!1||it.hasDepthSensing()===!1,Y&&le.addToRenderList(v,he),this.info.render.frame++,de===!0&&lt.beginShadows();const ft=g.state.shadowsArray;$.render(ft,he,Ze),de===!0&&lt.endShadows(),this.info.autoReset===!0&&this.info.reset();const yt=v.opaque,ct=v.transmissive;if(g.setupLights(),Ze.isArrayCamera){const Ht=Ze.cameras;if(ct.length>0)for(let $t=0,cn=Ht.length;$t<cn;$t++){const mn=Ht[$t];Ct(yt,ct,he,mn)}Y&&le.render(he);for(let $t=0,cn=Ht.length;$t<cn;$t++){const mn=Ht[$t];ce(v,he,mn,mn.viewport)}}else ct.length>0&&Ct(yt,ct,he,Ze),Y&&le.render(he),ce(v,he,Ze);_!==null&&C===0&&(pe.updateMultisampleRenderTarget(_),pe.updateRenderTargetMipmap(_)),he.isScene===!0&&he.onAfterRender(b,he,Ze),dt.resetDefaultState(),M=-1,T=null,x.pop(),x.length>0?(g=x[x.length-1],de===!0&&lt.setGlobalState(b.clippingPlanes,g.state.camera)):g=null,y.pop(),y.length>0?v=y[y.length-1]:v=null};function Ce(he,Ze,ft,yt){if(he.visible===!1)return;if(he.layers.test(Ze.layers)){if(he.isGroup)ft=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(Ze);else if(he.isLight)g.pushLight(he),he.castShadow&&g.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||ee.intersectsSprite(he)){yt&&Le.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Te);const $t=je.update(he),cn=he.material;cn.visible&&v.push(he,$t,cn,ft,Le.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(!he.frustumCulled||ee.intersectsObject(he))){const $t=je.update(he),cn=he.material;if(yt&&(he.boundingSphere!==void 0?(he.boundingSphere===null&&he.computeBoundingSphere(),Le.copy(he.boundingSphere.center)):($t.boundingSphere===null&&$t.computeBoundingSphere(),Le.copy($t.boundingSphere.center)),Le.applyMatrix4(he.matrixWorld).applyMatrix4(Te)),Array.isArray(cn)){const mn=$t.groups;for(let nn=0,Fn=mn.length;nn<Fn;nn++){const on=mn[nn],ni=cn[on.materialIndex];ni&&ni.visible&&v.push(he,$t,ni,ft,Le.z,on)}}else cn.visible&&v.push(he,$t,cn,ft,Le.z,null)}}const Ht=he.children;for(let $t=0,cn=Ht.length;$t<cn;$t++)Ce(Ht[$t],Ze,ft,yt)}function ce(he,Ze,ft,yt){const ct=he.opaque,Ht=he.transmissive,$t=he.transparent;g.setupLightsView(ft),de===!0&&lt.setGlobalState(b.clippingPlanes,ft),yt&&He.viewport(E.copy(yt)),ct.length>0&&vt(ct,Ze,ft),Ht.length>0&&vt(Ht,Ze,ft),$t.length>0&&vt($t,Ze,ft),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function Ct(he,Ze,ft,yt){if((ft.isScene===!0?ft.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[yt.id]===void 0&&(g.state.transmissionRenderTarget[yt.id]=new yp(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?ky:id,minFilter:H0,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fr.workingColorSpace}));const Ht=g.state.transmissionRenderTarget[yt.id],$t=yt.viewport||E;Ht.setSize($t.z*b.transmissionResolutionScale,$t.w*b.transmissionResolutionScale);const cn=b.getRenderTarget();b.setRenderTarget(Ht),b.getClearColor(F),B=b.getClearAlpha(),B<1&&b.setClearColor(16777215,.5),b.clear(),Y&&le.render(ft);const mn=b.toneMapping;b.toneMapping=Qh;const nn=yt.viewport;if(yt.viewport!==void 0&&(yt.viewport=void 0),g.setupLightsView(yt),de===!0&&lt.setGlobalState(b.clippingPlanes,yt),vt(he,ft,yt),pe.updateMultisampleRenderTarget(Ht),pe.updateRenderTargetMipmap(Ht),ke.has("WEBGL_multisampled_render_to_texture")===!1){let Fn=!1;for(let on=0,ni=Ze.length;on<ni;on++){const xi=Ze[on],Mi=xi.object,ur=xi.geometry,_i=xi.material,Xn=xi.group;if(_i.side===Jl&&Mi.layers.test(yt.layers)){const ys=_i.side;_i.side=Zo,_i.needsUpdate=!0,We(Mi,ft,yt,ur,_i,Xn),_i.side=ys,_i.needsUpdate=!0,Fn=!0}}Fn===!0&&(pe.updateMultisampleRenderTarget(Ht),pe.updateRenderTargetMipmap(Ht))}b.setRenderTarget(cn),b.setClearColor(F,B),nn!==void 0&&(yt.viewport=nn),b.toneMapping=mn}function vt(he,Ze,ft){const yt=Ze.isScene===!0?Ze.overrideMaterial:null;for(let ct=0,Ht=he.length;ct<Ht;ct++){const $t=he[ct],cn=$t.object,mn=$t.geometry,nn=yt===null?$t.material:yt,Fn=$t.group;cn.layers.test(ft.layers)&&We(cn,Ze,ft,mn,nn,Fn)}}function We(he,Ze,ft,yt,ct,Ht){he.onBeforeRender(b,Ze,ft,yt,ct,Ht),he.modelViewMatrix.multiplyMatrices(ft.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),ct.onBeforeRender(b,Ze,ft,yt,he,Ht),ct.transparent===!0&&ct.side===Jl&&ct.forceSinglePass===!1?(ct.side=Zo,ct.needsUpdate=!0,b.renderBufferDirect(ft,Ze,yt,ct,he,Ht),ct.side=nd,ct.needsUpdate=!0,b.renderBufferDirect(ft,Ze,yt,ct,he,Ht),ct.side=Jl):b.renderBufferDirect(ft,Ze,yt,ct,he,Ht),he.onAfterRender(b,Ze,ft,yt,ct,Ht)}function xt(he,Ze,ft){Ze.isScene!==!0&&(Ze=Ne);const yt=tt.get(he),ct=g.state.lights,Ht=g.state.shadowsArray,$t=ct.state.version,cn=bt.getParameters(he,ct.state,Ht,Ze,ft),mn=bt.getProgramCacheKey(cn);let nn=yt.programs;yt.environment=he.isMeshStandardMaterial?Ze.environment:null,yt.fog=Ze.fog,yt.envMap=(he.isMeshStandardMaterial?Z:G).get(he.envMap||yt.environment),yt.envMapRotation=yt.environment!==null&&he.envMap===null?Ze.environmentRotation:he.envMapRotation,nn===void 0&&(he.addEventListener("dispose",Wt),nn=new Map,yt.programs=nn);let Fn=nn.get(mn);if(Fn!==void 0){if(yt.currentProgram===Fn&&yt.lightsStateVersion===$t)return dn(he,cn),Fn}else cn.uniforms=bt.getUniforms(he),he.onBeforeCompile(cn,b),Fn=bt.acquireProgram(cn,mn),nn.set(mn,Fn),yt.uniforms=cn.uniforms;const on=yt.uniforms;return(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(on.clippingPlanes=lt.uniform),dn(he,cn),yt.needsLights=Je(he),yt.lightsStateVersion=$t,yt.needsLights&&(on.ambientLightColor.value=ct.state.ambient,on.lightProbe.value=ct.state.probe,on.directionalLights.value=ct.state.directional,on.directionalLightShadows.value=ct.state.directionalShadow,on.spotLights.value=ct.state.spot,on.spotLightShadows.value=ct.state.spotShadow,on.rectAreaLights.value=ct.state.rectArea,on.ltc_1.value=ct.state.rectAreaLTC1,on.ltc_2.value=ct.state.rectAreaLTC2,on.pointLights.value=ct.state.point,on.pointLightShadows.value=ct.state.pointShadow,on.hemisphereLights.value=ct.state.hemi,on.directionalShadowMap.value=ct.state.directionalShadowMap,on.directionalShadowMatrix.value=ct.state.directionalShadowMatrix,on.spotShadowMap.value=ct.state.spotShadowMap,on.spotLightMatrix.value=ct.state.spotLightMatrix,on.spotLightMap.value=ct.state.spotLightMap,on.pointShadowMap.value=ct.state.pointShadowMap,on.pointShadowMatrix.value=ct.state.pointShadowMatrix),yt.currentProgram=Fn,yt.uniformsList=null,Fn}function Pt(he){if(he.uniformsList===null){const Ze=he.currentProgram.getUniforms();he.uniformsList=Y_.seqWithValue(Ze.seq,he.uniforms)}return he.uniformsList}function dn(he,Ze){const ft=tt.get(he);ft.outputColorSpace=Ze.outputColorSpace,ft.batching=Ze.batching,ft.batchingColor=Ze.batchingColor,ft.instancing=Ze.instancing,ft.instancingColor=Ze.instancingColor,ft.instancingMorph=Ze.instancingMorph,ft.skinning=Ze.skinning,ft.morphTargets=Ze.morphTargets,ft.morphNormals=Ze.morphNormals,ft.morphColors=Ze.morphColors,ft.morphTargetsCount=Ze.morphTargetsCount,ft.numClippingPlanes=Ze.numClippingPlanes,ft.numIntersection=Ze.numClipIntersection,ft.vertexAlphas=Ze.vertexAlphas,ft.vertexTangents=Ze.vertexTangents,ft.toneMapping=Ze.toneMapping}function En(he,Ze,ft,yt,ct){Ze.isScene!==!0&&(Ze=Ne),pe.resetTextureUnits();const Ht=Ze.fog,$t=yt.isMeshStandardMaterial?Ze.environment:null,cn=_===null?b.outputColorSpace:_.isXRRenderTarget===!0?_.texture.colorSpace:X1,mn=(yt.isMeshStandardMaterial?Z:G).get(yt.envMap||$t),nn=yt.vertexColors===!0&&!!ft.attributes.color&&ft.attributes.color.itemSize===4,Fn=!!ft.attributes.tangent&&(!!yt.normalMap||yt.anisotropy>0),on=!!ft.morphAttributes.position,ni=!!ft.morphAttributes.normal,xi=!!ft.morphAttributes.color;let Mi=Qh;yt.toneMapped&&(_===null||_.isXRRenderTarget===!0)&&(Mi=b.toneMapping);const ur=ft.morphAttributes.position||ft.morphAttributes.normal||ft.morphAttributes.color,_i=ur!==void 0?ur.length:0,Xn=tt.get(yt),ys=g.state.lights;if(de===!0&&(J===!0||he!==T)){const ns=he===T&&yt.id===M;lt.setState(yt,he,ns)}let rr=!1;yt.version===Xn.__version?(Xn.needsLights&&Xn.lightsStateVersion!==ys.state.version||Xn.outputColorSpace!==cn||ct.isBatchedMesh&&Xn.batching===!1||!ct.isBatchedMesh&&Xn.batching===!0||ct.isBatchedMesh&&Xn.batchingColor===!0&&ct.colorTexture===null||ct.isBatchedMesh&&Xn.batchingColor===!1&&ct.colorTexture!==null||ct.isInstancedMesh&&Xn.instancing===!1||!ct.isInstancedMesh&&Xn.instancing===!0||ct.isSkinnedMesh&&Xn.skinning===!1||!ct.isSkinnedMesh&&Xn.skinning===!0||ct.isInstancedMesh&&Xn.instancingColor===!0&&ct.instanceColor===null||ct.isInstancedMesh&&Xn.instancingColor===!1&&ct.instanceColor!==null||ct.isInstancedMesh&&Xn.instancingMorph===!0&&ct.morphTexture===null||ct.isInstancedMesh&&Xn.instancingMorph===!1&&ct.morphTexture!==null||Xn.envMap!==mn||yt.fog===!0&&Xn.fog!==Ht||Xn.numClippingPlanes!==void 0&&(Xn.numClippingPlanes!==lt.numPlanes||Xn.numIntersection!==lt.numIntersection)||Xn.vertexAlphas!==nn||Xn.vertexTangents!==Fn||Xn.morphTargets!==on||Xn.morphNormals!==ni||Xn.morphColors!==xi||Xn.toneMapping!==Mi||Xn.morphTargetsCount!==_i)&&(rr=!0):(rr=!0,Xn.__version=yt.version);let Hs=Xn.currentProgram;rr===!0&&(Hs=xt(yt,Ze,ct));let Bi=!1,Gs=!1,fd=!1;const Mr=Hs.getUniforms(),ya=Xn.uniforms;if(He.useProgram(Hs.program)&&(Bi=!0,Gs=!0,fd=!0),yt.id!==M&&(M=yt.id,Gs=!0),Bi||T!==he){He.buffers.depth.getReversed()?(ue.copy(he.projectionMatrix),$tt(ue),Qtt(ue),Mr.setValue(ne,"projectionMatrix",ue)):Mr.setValue(ne,"projectionMatrix",he.projectionMatrix),Mr.setValue(ne,"viewMatrix",he.matrixWorldInverse);const sr=Mr.map.cameraPosition;sr!==void 0&&sr.setValue(ne,De.setFromMatrixPosition(he.matrixWorld)),Ge.logarithmicDepthBuffer&&Mr.setValue(ne,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),(yt.isMeshPhongMaterial||yt.isMeshToonMaterial||yt.isMeshLambertMaterial||yt.isMeshBasicMaterial||yt.isMeshStandardMaterial||yt.isShaderMaterial)&&Mr.setValue(ne,"isOrthographic",he.isOrthographicCamera===!0),T!==he&&(T=he,Gs=!0,fd=!0)}if(ct.isSkinnedMesh){Mr.setOptional(ne,ct,"bindMatrix"),Mr.setOptional(ne,ct,"bindMatrixInverse");const ns=ct.skeleton;ns&&(ns.boneTexture===null&&ns.computeBoneTexture(),Mr.setValue(ne,"boneTexture",ns.boneTexture,pe))}ct.isBatchedMesh&&(Mr.setOptional(ne,ct,"batchingTexture"),Mr.setValue(ne,"batchingTexture",ct._matricesTexture,pe),Mr.setOptional(ne,ct,"batchingIdTexture"),Mr.setValue(ne,"batchingIdTexture",ct._indirectTexture,pe),Mr.setOptional(ne,ct,"batchingColorTexture"),ct._colorsTexture!==null&&Mr.setValue(ne,"batchingColorTexture",ct._colorsTexture,pe));const aa=ft.morphAttributes;if((aa.position!==void 0||aa.normal!==void 0||aa.color!==void 0)&&fe.update(ct,ft,Hs),(Gs||Xn.receiveShadow!==ct.receiveShadow)&&(Xn.receiveShadow=ct.receiveShadow,Mr.setValue(ne,"receiveShadow",ct.receiveShadow)),yt.isMeshGouraudMaterial&&yt.envMap!==null&&(ya.envMap.value=mn,ya.flipEnvMap.value=mn.isCubeTexture&&mn.isRenderTargetTexture===!1?-1:1),yt.isMeshStandardMaterial&&yt.envMap===null&&Ze.environment!==null&&(ya.envMapIntensity.value=Ze.environmentIntensity),Gs&&(Mr.setValue(ne,"toneMappingExposure",b.toneMappingExposure),Xn.needsLights&&ei(ya,fd),Ht&&yt.fog===!0&&At.refreshFogUniforms(ya,Ht),At.refreshMaterialUniforms(ya,yt,O,z,g.state.transmissionRenderTarget[he.id]),Y_.upload(ne,Pt(Xn),ya,pe)),yt.isShaderMaterial&&yt.uniformsNeedUpdate===!0&&(Y_.upload(ne,Pt(Xn),ya,pe),yt.uniformsNeedUpdate=!1),yt.isSpriteMaterial&&Mr.setValue(ne,"center",ct.center),Mr.setValue(ne,"modelViewMatrix",ct.modelViewMatrix),Mr.setValue(ne,"normalMatrix",ct.normalMatrix),Mr.setValue(ne,"modelMatrix",ct.matrixWorld),yt.isShaderMaterial||yt.isRawShaderMaterial){const ns=yt.uniformsGroups;for(let sr=0,hd=ns.length;sr<hd;sr++){const wc=ns[sr];we.update(wc,Hs),we.bind(wc,Hs)}}return Hs}function ei(he,Ze){he.ambientLightColor.needsUpdate=Ze,he.lightProbe.needsUpdate=Ze,he.directionalLights.needsUpdate=Ze,he.directionalLightShadows.needsUpdate=Ze,he.pointLights.needsUpdate=Ze,he.pointLightShadows.needsUpdate=Ze,he.spotLights.needsUpdate=Ze,he.spotLightShadows.needsUpdate=Ze,he.rectAreaLights.needsUpdate=Ze,he.hemisphereLights.needsUpdate=Ze}function Je(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(he,Ze,ft){tt.get(he.texture).__webglTexture=Ze,tt.get(he.depthTexture).__webglTexture=ft;const yt=tt.get(he);yt.__hasExternalTextures=!0,yt.__autoAllocateDepthBuffer=ft===void 0,yt.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),yt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(he,Ze){const ft=tt.get(he);ft.__webglFramebuffer=Ze,ft.__useDefaultFramebuffer=Ze===void 0};const ti=ne.createFramebuffer();this.setRenderTarget=function(he,Ze=0,ft=0){_=he,S=Ze,C=ft;let yt=!0,ct=null,Ht=!1,$t=!1;if(he){const mn=tt.get(he);if(mn.__useDefaultFramebuffer!==void 0)He.bindFramebuffer(ne.FRAMEBUFFER,null),yt=!1;else if(mn.__webglFramebuffer===void 0)pe.setupRenderTarget(he);else if(mn.__hasExternalTextures)pe.rebindTextures(he,tt.get(he.texture).__webglTexture,tt.get(he.depthTexture).__webglTexture);else if(he.depthBuffer){const on=he.depthTexture;if(mn.__boundDepthTexture!==on){if(on!==null&&tt.has(on)&&(he.width!==on.image.width||he.height!==on.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");pe.setupDepthRenderbuffer(he)}}const nn=he.texture;(nn.isData3DTexture||nn.isDataArrayTexture||nn.isCompressedArrayTexture)&&($t=!0);const Fn=tt.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(Array.isArray(Fn[Ze])?ct=Fn[Ze][ft]:ct=Fn[Ze],Ht=!0):he.samples>0&&pe.useMultisampledRTT(he)===!1?ct=tt.get(he).__webglMultisampledFramebuffer:Array.isArray(Fn)?ct=Fn[ft]:ct=Fn,E.copy(he.viewport),I.copy(he.scissor),L=he.scissorTest}else E.copy(q).multiplyScalar(O).floor(),I.copy(te).multiplyScalar(O).floor(),L=Q;if(ft!==0&&(ct=ti),He.bindFramebuffer(ne.FRAMEBUFFER,ct)&&yt&&He.drawBuffers(he,ct),He.viewport(E),He.scissor(I),He.setScissorTest(L),Ht){const mn=tt.get(he.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,mn.__webglTexture,ft)}else if($t){const mn=tt.get(he.texture),nn=Ze;ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,mn.__webglTexture,ft,nn)}else if(he!==null&&ft!==0){const mn=tt.get(he.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,mn.__webglTexture,ft)}M=-1},this.readRenderTargetPixels=function(he,Ze,ft,yt,ct,Ht,$t){if(!(he&&he.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let cn=tt.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&$t!==void 0&&(cn=cn[$t]),cn){He.bindFramebuffer(ne.FRAMEBUFFER,cn);try{const mn=he.texture,nn=mn.format,Fn=mn.type;if(!Ge.textureFormatReadable(nn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ge.textureTypeReadable(Fn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ze>=0&&Ze<=he.width-yt&&ft>=0&&ft<=he.height-ct&&ne.readPixels(Ze,ft,yt,ct,Ae.convert(nn),Ae.convert(Fn),Ht)}finally{const mn=_!==null?tt.get(_).__webglFramebuffer:null;He.bindFramebuffer(ne.FRAMEBUFFER,mn)}}},this.readRenderTargetPixelsAsync=async function(he,Ze,ft,yt,ct,Ht,$t){if(!(he&&he.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let cn=tt.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&$t!==void 0&&(cn=cn[$t]),cn){const mn=he.texture,nn=mn.format,Fn=mn.type;if(!Ge.textureFormatReadable(nn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ge.textureTypeReadable(Fn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Ze>=0&&Ze<=he.width-yt&&ft>=0&&ft<=he.height-ct){He.bindFramebuffer(ne.FRAMEBUFFER,cn);const on=ne.createBuffer();ne.bindBuffer(ne.PIXEL_PACK_BUFFER,on),ne.bufferData(ne.PIXEL_PACK_BUFFER,Ht.byteLength,ne.STREAM_READ),ne.readPixels(Ze,ft,yt,ct,Ae.convert(nn),Ae.convert(Fn),0);const ni=_!==null?tt.get(_).__webglFramebuffer:null;He.bindFramebuffer(ne.FRAMEBUFFER,ni);const xi=ne.fenceSync(ne.SYNC_GPU_COMMANDS_COMPLETE,0);return ne.flush(),await jtt(ne,xi,4),ne.bindBuffer(ne.PIXEL_PACK_BUFFER,on),ne.getBufferSubData(ne.PIXEL_PACK_BUFFER,0,Ht),ne.deleteBuffer(on),ne.deleteSync(xi),Ht}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(he,Ze=null,ft=0){he.isTexture!==!0&&(y0("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Ze=arguments[0]||null,he=arguments[1]);const yt=Math.pow(2,-ft),ct=Math.floor(he.image.width*yt),Ht=Math.floor(he.image.height*yt),$t=Ze!==null?Ze.x:0,cn=Ze!==null?Ze.y:0;pe.setTexture2D(he,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,ft,0,0,$t,cn,ct,Ht),He.unbindTexture()};const st=ne.createFramebuffer(),nr=ne.createFramebuffer();this.copyTextureToTexture=function(he,Ze,ft=null,yt=null,ct=0,Ht=null){he.isTexture!==!0&&(y0("WebGLRenderer: copyTextureToTexture function signature has changed."),yt=arguments[0]||null,he=arguments[1],Ze=arguments[2],Ht=arguments[3]||0,ft=null),Ht===null&&(ct!==0?(y0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ht=ct,ct=0):Ht=0);let $t,cn,mn,nn,Fn,on,ni,xi,Mi;const ur=he.isCompressedTexture?he.mipmaps[Ht]:he.image;if(ft!==null)$t=ft.max.x-ft.min.x,cn=ft.max.y-ft.min.y,mn=ft.isBox3?ft.max.z-ft.min.z:1,nn=ft.min.x,Fn=ft.min.y,on=ft.isBox3?ft.min.z:0;else{const aa=Math.pow(2,-ct);$t=Math.floor(ur.width*aa),cn=Math.floor(ur.height*aa),he.isDataArrayTexture?mn=ur.depth:he.isData3DTexture?mn=Math.floor(ur.depth*aa):mn=1,nn=0,Fn=0,on=0}yt!==null?(ni=yt.x,xi=yt.y,Mi=yt.z):(ni=0,xi=0,Mi=0);const _i=Ae.convert(Ze.format),Xn=Ae.convert(Ze.type);let ys;Ze.isData3DTexture?(pe.setTexture3D(Ze,0),ys=ne.TEXTURE_3D):Ze.isDataArrayTexture||Ze.isCompressedArrayTexture?(pe.setTexture2DArray(Ze,0),ys=ne.TEXTURE_2D_ARRAY):(pe.setTexture2D(Ze,0),ys=ne.TEXTURE_2D),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,Ze.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ze.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,Ze.unpackAlignment);const rr=ne.getParameter(ne.UNPACK_ROW_LENGTH),Hs=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),Bi=ne.getParameter(ne.UNPACK_SKIP_PIXELS),Gs=ne.getParameter(ne.UNPACK_SKIP_ROWS),fd=ne.getParameter(ne.UNPACK_SKIP_IMAGES);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,ur.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,ur.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,nn),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Fn),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,on);const Mr=he.isDataArrayTexture||he.isData3DTexture,ya=Ze.isDataArrayTexture||Ze.isData3DTexture;if(he.isDepthTexture){const aa=tt.get(he),ns=tt.get(Ze),sr=tt.get(aa.__renderTarget),hd=tt.get(ns.__renderTarget);He.bindFramebuffer(ne.READ_FRAMEBUFFER,sr.__webglFramebuffer),He.bindFramebuffer(ne.DRAW_FRAMEBUFFER,hd.__webglFramebuffer);for(let wc=0;wc<mn;wc++)Mr&&(ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,tt.get(he).__webglTexture,ct,on+wc),ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,tt.get(Ze).__webglTexture,Ht,Mi+wc)),ne.blitFramebuffer(nn,Fn,$t,cn,ni,xi,$t,cn,ne.DEPTH_BUFFER_BIT,ne.NEAREST);He.bindFramebuffer(ne.READ_FRAMEBUFFER,null),He.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else if(ct!==0||he.isRenderTargetTexture||tt.has(he)){const aa=tt.get(he),ns=tt.get(Ze);He.bindFramebuffer(ne.READ_FRAMEBUFFER,st),He.bindFramebuffer(ne.DRAW_FRAMEBUFFER,nr);for(let sr=0;sr<mn;sr++)Mr?ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,aa.__webglTexture,ct,on+sr):ne.framebufferTexture2D(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,aa.__webglTexture,ct),ya?ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ns.__webglTexture,Ht,Mi+sr):ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,ns.__webglTexture,Ht),ct!==0?ne.blitFramebuffer(nn,Fn,$t,cn,ni,xi,$t,cn,ne.COLOR_BUFFER_BIT,ne.NEAREST):ya?ne.copyTexSubImage3D(ys,Ht,ni,xi,Mi+sr,nn,Fn,$t,cn):ne.copyTexSubImage2D(ys,Ht,ni,xi,nn,Fn,$t,cn);He.bindFramebuffer(ne.READ_FRAMEBUFFER,null),He.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else ya?he.isDataTexture||he.isData3DTexture?ne.texSubImage3D(ys,Ht,ni,xi,Mi,$t,cn,mn,_i,Xn,ur.data):Ze.isCompressedArrayTexture?ne.compressedTexSubImage3D(ys,Ht,ni,xi,Mi,$t,cn,mn,_i,ur.data):ne.texSubImage3D(ys,Ht,ni,xi,Mi,$t,cn,mn,_i,Xn,ur):he.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,Ht,ni,xi,$t,cn,_i,Xn,ur.data):he.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,Ht,ni,xi,ur.width,ur.height,_i,ur.data):ne.texSubImage2D(ne.TEXTURE_2D,Ht,ni,xi,$t,cn,_i,Xn,ur);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,rr),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,Hs),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Bi),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Gs),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,fd),Ht===0&&Ze.generateMipmaps&&ne.generateMipmap(ys),He.unbindTexture()},this.copyTextureToTexture3D=function(he,Ze,ft=null,yt=null,ct=0){return he.isTexture!==!0&&(y0("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ft=arguments[0]||null,yt=arguments[1]||null,he=arguments[2],Ze=arguments[3],ct=arguments[4]||0),y0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(he,Ze,ft,yt,ct)},this.initRenderTarget=function(he){tt.get(he).__webglFramebuffer===void 0&&pe.setupRenderTarget(he)},this.initTexture=function(he){he.isCubeTexture?pe.setTextureCube(he,0):he.isData3DTexture?pe.setTexture3D(he,0):he.isDataArrayTexture||he.isCompressedArrayTexture?pe.setTexture2DArray(he,0):pe.setTexture2D(he,0),He.unbindTexture()},this.resetState=function(){S=0,C=0,_=null,He.reset(),dt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ef}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=fr._getDrawingBufferColorSpace(e),t.unpackColorSpace=fr._getUnpackColorSpace()}}const I0=class I0{constructor(e,t){let i,r;this.promise=new Promise((c,u)=>{i=c,r=u});const s=i.bind(this),a=r.bind(this),o=(...c)=>{s(...c)},l=c=>{a(c)};e(o.bind(this),l.bind(this)),this.abortHandler=t,this.id=I0.idGen++}then(e){return new I0((t,i)=>{this.promise=this.promise.then((...r)=>{const s=e(...r);s instanceof Promise||s instanceof I0?s.then((...a)=>{t(...a)}):t(s)}).catch(r=>{i(r)})},this.abortHandler)}catch(e){return new I0(t=>{this.promise=this.promise.then((...i)=>{t(...i)}).catch(e)},this.abortHandler)}abort(e){this.abortHandler&&this.abortHandler(e)}};at(I0,"idGen",0);let sA=I0;class ooe extends Error{constructor(e){super(e)}}(function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){n[0]=t;const i=e[0];let r=i>>16&32768,s=i>>12&2047;const a=i>>23&255;return a<103?r:a>142?(r|=31744,r|=(a==255?0:1)&&i&8388607,r):a<113?(s|=2048,r|=(s>>114-a)+(s>>113-a&1),r):(r|=a-112<<10|s>>1,r+=s&1,r)}})();const OI=function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){return n[0]=t,e[0]}}(),mot=function(n,e){return n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)},wT=function(n,e,t=!0,i){const r=new AbortController,s=r.signal;let a=!1;const o=u=>{r.abort(u),a=!0};let l=!1;const c=(u,d,f,h)=>{e&&!l&&(e(u,d,f,h),u===100&&(l=!0))};return new sA((u,d)=>{const f={signal:s};i&&(f.headers=i),fetch(n,f).then(async h=>{if(!h.ok){const x=await h.text();d(new Error(`Fetch failed: ${h.status} ${h.statusText} ${x}`));return}const p=h.body.getReader();let m=0,v=h.headers.get("Content-Length"),g=v?parseInt(v):void 0;const y=[];for(;!a;)try{const{value:x,done:b}=await p.read();if(b){if(c(100,"100%",x,g),t){const C=new Blob(y).arrayBuffer();u(C)}else u();break}m+=x.length;let A,S;g!==void 0&&(A=m/g*100,S=`${A.toFixed(2)}%`),t&&y.push(x),c(A,S,x,g)}catch(x){d(x);return}}).catch(h=>{d(new ooe(h))})},o)},ls=function(n,e,t){return Math.max(Math.min(n,t),e)},$v=function(){return performance.now()/1e3},pg=n=>{if(n.geometry&&(n.geometry.dispose(),n.geometry=null),n.material&&(n.material.dispose(),n.material=null),n.children)for(let e of n.children)pg(e)},Al=(n,e)=>new Promise(t=>{window.setTimeout(()=>{t(n?n():void 0)},e?1:50)}),a1=(n=0)=>{let e=0;if(n===1)e=9;else if(n===2)e=24;else if(n===3)e=45;else if(n>3)throw new Error("getSphericalHarmonicsComponentCountForDegree() -> Invalid spherical harmonics degree");return e},yB=()=>{let n,e;return{promise:new Promise((i,r)=>{n=i,e=r}),resolve:n,reject:e}},UI=n=>{let e,t;return n||(n=()=>{}),{promise:new sA((r,s)=>{e=r,t=s},n),resolve:e,reject:t}};class vot{constructor(e,t,i){this.major=e,this.minor=t,this.patch=i}toString(){return`${this.major}_${this.minor}_${this.patch}`}}function bB(){const n=navigator.userAgent;return n.indexOf("iPhone")>0||n.indexOf("iPad")>0}function loe(){if(bB()){const n=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return new vot(parseInt(n[1]||0,10),parseInt(n[2]||0,10),parseInt(n[3]||0,10))}else return null}const got=14,qb=class qb{constructor(e=0){this.sphericalHarmonicsDegree=e,this.sphericalHarmonicsCount=a1(this.sphericalHarmonicsDegree),this.componentCount=this.sphericalHarmonicsCount+got,this.defaultSphericalHarmonics=new Array(this.sphericalHarmonicsCount).fill(0),this.splats=[],this.splatCount=0}static createSplat(e=0){const t=[0,0,0,1,1,1,1,0,0,0,0,0,0,0];let i=a1(e);for(let r=0;r<i;r++)t.push(0);return t}addSplat(e){this.splats.push(e),this.splatCount++}getSplat(e){return this.splats[e]}addDefaultSplat(){const e=qb.createSplat(this.sphericalHarmonicsDegree);return this.addSplat(e),e}addSplatFromComonents(e,t,i,r,s,a,o,l,c,u,d,f,h,p,...m){const v=[e,t,i,r,s,a,o,l,c,u,d,f,h,p,...this.defaultSphericalHarmonics];for(let g=0;g<m.length&&g<this.sphericalHarmonicsCount;g++)v[g]=m[g];return this.addSplat(v),v}addSplatFromArray(e,t){const i=e.splats[t],r=qb.createSplat(this.sphericalHarmonicsDegree);for(let s=0;s<this.componentCount&&s<i.length;s++)r[s]=i[s];this.addSplat(r)}};at(qb,"OFFSET",{X:0,Y:1,Z:2,SCALE0:3,SCALE1:4,SCALE2:5,ROTATION0:6,ROTATION1:7,ROTATION2:8,ROTATION3:9,FDC0:10,FDC1:11,FDC2:12,OPACITY:13,FRC0:14,FRC1:15,FRC2:16,FRC3:17,FRC4:18,FRC5:19,FRC6:20,FRC7:21,FRC8:22,FRC9:23,FRC10:24,FRC11:25,FRC12:26,FRC13:27,FRC14:28,FRC15:29,FRC16:30,FRC17:31,FRC18:32,FRC19:33,FRC20:34,FRC21:35,FRC22:36,FRC23:37});let gn=qb;class Ji{}at(Ji,"DefaultSplatSortDistanceMapPrecision",16),at(Ji,"MemoryPageSize",65536),at(Ji,"BytesPerFloat",4),at(Ji,"BytesPerInt",4),at(Ji,"MaxScenes",32),at(Ji,"ProgressiveLoadSectionSize",262144),at(Ji,"ProgressiveLoadSectionDelayDuration",15),at(Ji,"SphericalHarmonics8BitCompressionRange",3);const yot=Ji.SphericalHarmonics8BitCompressionRange,b3=yot/2,qs=iA.toHalfFloat.bind(iA),xB=iA.fromHalfFloat.bind(iA),ss=(n,e,t=!1,i,r)=>{if(e===0)return n;if(e===1||e===2&&!t)return iA.fromHalfFloat(n);if(e===2)return AB(n,i,r)},Ob=(n,e,t)=>{n=ls(n,e,t);const i=t-e;return ls(Math.floor((n-e)/i*255),0,255)},AB=(n,e,t)=>{const i=t-e;return n/255*i+e},coe=(n,e,t)=>Ob(xB(n,e,t)),bot=(n,e,t)=>qs(AB(n,e,t)),Ar=(n,e,t,i=!1)=>t===0?n.getFloat32(e*4,!0):t===1||t===2&&!i?n.getUint16(e*2,!0):n.getUint8(e,!0),xot=function(){const n=e=>e;return function(e,t,i,r=!1){if(t===i)return e;let s=n;return t===2&&r?i===1?s=bot:i==0&&(s=AB):t===2||t===1?i===0?s=xB:i==2&&(r?s=coe:s=n):t===0&&(i===1?s=qs:i==2&&(r?s=Ob:s=qs)),s(e)}}(),Qv=(n,e,t,i,r=0)=>{const s=new Uint8Array(n,e),a=new Uint8Array(t,i);for(let o=0;o<r;o++)a[o]=s[o]},Bt=class Bt{constructor(e,t=!0){at(this,"getSplatScaleAndRotation",function(){const e=new gi,t=new gi,i=new gi,r=new nt,s=new nt,a=new ds;return function(o,l,c,u,d){const f=this.globalSplatIndexToSectionMap[o],h=this.sections[f],p=o-h.splatCountOffset,m=h.bytesPerSplat*p+Bt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,h.dataBase+m);s.set(ss(Ar(v,0,this.compressionLevel),this.compressionLevel),ss(Ar(v,1,this.compressionLevel),this.compressionLevel),ss(Ar(v,2,this.compressionLevel),this.compressionLevel)),d&&(d.x!==void 0&&(s.x=d.x),d.y!==void 0&&(s.y=d.y),d.z!==void 0&&(s.z=d.z)),a.set(ss(Ar(v,4,this.compressionLevel),this.compressionLevel),ss(Ar(v,5,this.compressionLevel),this.compressionLevel),ss(Ar(v,6,this.compressionLevel),this.compressionLevel),ss(Ar(v,3,this.compressionLevel),this.compressionLevel)),u?(e.makeScale(s.x,s.y,s.z),t.makeRotationFromQuaternion(a),i.copy(e).multiply(t).multiply(u),i.decompose(r,c,l)):(l.copy(s),c.copy(a))}}());at(this,"fillSplatScaleRotationArray",function(){const e=new gi,t=new gi,i=new gi,r=new nt,s=new ds,a=new nt,o=l=>{const c=l.w<0?-1:1;l.x*=c,l.y*=c,l.z*=c,l.w*=c};return function(l,c,u,d,f,h,p,m){const v=this.splatCount;d=d||0,f=f||v-1,h===void 0&&(h=d);const g=(y,x)=>xot(y,x,p);for(let y=d;y<=f;y++){const x=this.globalSplatIndexToSectionMap[y],b=this.sections[x],A=y-b.splatCountOffset,S=b.bytesPerSplat*A+Bt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,C=(y-d+h)*Bt.ScaleComponentCount,_=(y-d+h)*Bt.RotationComponentCount,M=new DataView(this.bufferData,b.dataBase+S),T=m&&m.x!==void 0?m.x:Ar(M,0,this.compressionLevel),E=m&&m.y!==void 0?m.y:Ar(M,1,this.compressionLevel),I=m&&m.z!==void 0?m.z:Ar(M,2,this.compressionLevel),L=Ar(M,3,this.compressionLevel),F=Ar(M,4,this.compressionLevel),B=Ar(M,5,this.compressionLevel),P=Ar(M,6,this.compressionLevel);r.set(ss(T,this.compressionLevel),ss(E,this.compressionLevel),ss(I,this.compressionLevel)),s.set(ss(F,this.compressionLevel),ss(B,this.compressionLevel),ss(P,this.compressionLevel),ss(L,this.compressionLevel)).normalize(),u&&(a.set(0,0,0),e.makeScale(r.x,r.y,r.z),t.makeRotationFromQuaternion(s),i.identity().premultiply(e).premultiply(t),i.premultiply(u),i.decompose(a,s,r),s.normalize()),o(s),l&&(l[C]=g(r.x,0),l[C+1]=g(r.y,0),l[C+2]=g(r.z,0)),c&&(c[_]=g(s.x,0),c[_+1]=g(s.y,0),c[_+2]=g(s.z,0),c[_+3]=g(s.w,0))}}}());at(this,"fillSphericalHarmonicsArray",function(){for(let F=0;F<15;F++)new nt;const e=new mi,t=new gi,i=new nt,r=new nt,s=new ds,a=[],o=[],l=[],c=[],u=[],d=[],f=[],h=[],p=[],m=[],v=[],g=[],y=[],x=[],b=[],A=[],S=[],C=[],_=F=>F,M=(F,B,P,z)=>{F[0]=B,F[1]=P,F[2]=z},T=(F,B,P,z,O)=>{F[0]=Ar(B,z,O,!0),F[1]=Ar(B,z+P,O,!0),F[2]=Ar(B,z+P+P,O,!0)},E=(F,B)=>{B[0]=F[0],B[1]=F[1],B[2]=F[2]},I=(F,B,P,z)=>{B[P]=z(F[0]),B[P+1]=z(F[1]),B[P+2]=z(F[2])},L=(F,B,P,z,O)=>(B[0]=ss(F[0],P,!0,z,O),B[1]=ss(F[1],P,!0,z,O),B[2]=ss(F[2],P,!0,z,O),B);return function(F,B,P,z,O,N,H){const q=this.splatCount;z=z||0,O=O||q-1,N===void 0&&(N=z),P&&B>=1&&(t.copy(P),t.decompose(i,s,r),s.normalize(),t.makeRotationFromQuaternion(s),e.setFromMatrix4(t),M(a,e.elements[4],-e.elements[7],e.elements[1]),M(o,-e.elements[5],e.elements[8],-e.elements[2]),M(l,e.elements[3],-e.elements[6],e.elements[0]));const te=ee=>coe(ee,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff),Q=ee=>Ob(ee,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff);for(let ee=z;ee<=O;ee++){const de=this.globalSplatIndexToSectionMap[ee],J=this.sections[de];B=Math.min(B,J.sphericalHarmonicsDegree);const ue=a1(B),Te=ee-J.splatCountOffset,De=J.bytesPerSplat*Te+Bt.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes,Le=new DataView(this.bufferData,J.dataBase+De),Ne=(ee-z+N)*ue;let Y=P?0:this.compressionLevel,oe=_;Y!==H&&(Y===1?H===0?oe=xB:H==2&&(oe=te):Y===0&&(H===1?oe=qs:H==2&&(oe=Q)));const ne=this.minSphericalHarmonicsCoeff,Xe=this.maxSphericalHarmonicsCoeff;B>=1&&(T(p,Le,3,0,this.compressionLevel),T(m,Le,3,1,this.compressionLevel),T(v,Le,3,2,this.compressionLevel),P?(L(p,p,this.compressionLevel,ne,Xe),L(m,m,this.compressionLevel,ne,Xe),L(v,v,this.compressionLevel,ne,Xe),Bt.rotateSphericalHarmonics3(p,m,v,a,o,l,x,b,A)):(E(p,x),E(m,b),E(v,A)),I(x,F,Ne,oe),I(b,F,Ne+3,oe),I(A,F,Ne+6,oe),B>=2&&(T(p,Le,5,9,this.compressionLevel),T(m,Le,5,10,this.compressionLevel),T(v,Le,5,11,this.compressionLevel),T(g,Le,5,12,this.compressionLevel),T(y,Le,5,13,this.compressionLevel),P?(L(p,p,this.compressionLevel,ne,Xe),L(m,m,this.compressionLevel,ne,Xe),L(v,v,this.compressionLevel,ne,Xe),L(g,g,this.compressionLevel,ne,Xe),L(y,y,this.compressionLevel,ne,Xe),Bt.rotateSphericalHarmonics5(p,m,v,g,y,a,o,l,c,u,d,f,h,x,b,A,S,C)):(E(p,x),E(m,b),E(v,A),E(g,S),E(y,C)),I(x,F,Ne+9,oe),I(b,F,Ne+12,oe),I(A,F,Ne+15,oe),I(S,F,Ne+18,oe),I(C,F,Ne+21,oe)))}}}());this.constructFromBuffer(e,t)}getSplatCount(){return this.splatCount}getMaxSplatCount(){return this.maxSplatCount}getMinSphericalHarmonicsDegree(){let e=0;for(let t=0;t<this.sections.length;t++){const i=this.sections[t];(t===0||i.sphericalHarmonicsDegree<e)&&(e=i.sphericalHarmonicsDegree)}return e}getBucketIndex(e,t){let i;const r=e.fullBucketCount*e.bucketSize;if(t<r)i=Math.floor(t/e.bucketSize);else{let s=r;i=e.fullBucketCount;let a=0;for(;s<e.splatCount;){let o=e.partiallyFilledBucketLengths[a];if(t>=s&&t<s+o)break;s+=o,i++,a++}}return i}getSplatCenter(e,t,i){const r=this.globalSplatIndexToSectionMap[e],s=this.sections[r],a=e-s.splatCountOffset,o=s.bytesPerSplat*a,l=new DataView(this.bufferData,s.dataBase+o),c=Ar(l,0,this.compressionLevel),u=Ar(l,1,this.compressionLevel),d=Ar(l,2,this.compressionLevel);if(this.compressionLevel>=1){const h=this.getBucketIndex(s,a)*Bt.BucketStorageSizeFloats,p=s.compressionScaleFactor,m=s.compressionScaleRange;t.x=(c-m)*p+s.bucketArray[h],t.y=(u-m)*p+s.bucketArray[h+1],t.z=(d-m)*p+s.bucketArray[h+2]}else t.x=c,t.y=u,t.z=d;i&&t.applyMatrix4(i)}getSplatColor(e,t){const i=this.globalSplatIndexToSectionMap[e],r=this.sections[i],s=e-r.splatCountOffset,a=r.bytesPerSplat*s+Bt.CompressionLevels[this.compressionLevel].ColorOffsetBytes,o=new Uint8Array(this.bufferData,r.dataBase+a,4);t.set(o[0],o[1],o[2],o[3])}fillSplatCenterArray(e,t,i,r,s){const a=this.splatCount;i=i||0,r=r||a-1,s===void 0&&(s=i);const o=new nt;for(let l=i;l<=r;l++){const c=this.globalSplatIndexToSectionMap[l],u=this.sections[c],d=l-u.splatCountOffset,f=(l-i+s)*Bt.CenterComponentCount,h=u.bytesPerSplat*d,p=new DataView(this.bufferData,u.dataBase+h),m=Ar(p,0,this.compressionLevel),v=Ar(p,1,this.compressionLevel),g=Ar(p,2,this.compressionLevel);if(this.compressionLevel>=1){const x=this.getBucketIndex(u,d)*Bt.BucketStorageSizeFloats,b=u.compressionScaleFactor,A=u.compressionScaleRange;o.x=(m-A)*b+u.bucketArray[x],o.y=(v-A)*b+u.bucketArray[x+1],o.z=(g-A)*b+u.bucketArray[x+2]}else o.x=m,o.y=v,o.z=g;t&&o.applyMatrix4(t),e[f]=o.x,e[f+1]=o.y,e[f+2]=o.z}}fillSplatCovarianceArray(e,t,i,r,s,a){const o=this.splatCount,l=new nt,c=new ds;i=i||0,r=r||o-1,s===void 0&&(s=i);for(let u=i;u<=r;u++){const d=this.globalSplatIndexToSectionMap[u],f=this.sections[d],h=u-f.splatCountOffset,p=(u-i+s)*Bt.CovarianceComponentCount,m=f.bytesPerSplat*h+Bt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,f.dataBase+m);l.set(ss(Ar(v,0,this.compressionLevel),this.compressionLevel),ss(Ar(v,1,this.compressionLevel),this.compressionLevel),ss(Ar(v,2,this.compressionLevel),this.compressionLevel)),c.set(ss(Ar(v,4,this.compressionLevel),this.compressionLevel),ss(Ar(v,5,this.compressionLevel),this.compressionLevel),ss(Ar(v,6,this.compressionLevel),this.compressionLevel),ss(Ar(v,3,this.compressionLevel),this.compressionLevel)),Bt.computeCovariance(l,c,t,e,p,a)}}fillSplatColorArray(e,t,i,r,s){const a=this.splatCount;i=i||0,r=r||a-1,s===void 0&&(s=i);for(let o=i;o<=r;o++){const l=this.globalSplatIndexToSectionMap[o],c=this.sections[l],u=o-c.splatCountOffset,d=(o-i+s)*Bt.ColorComponentCount,f=c.bytesPerSplat*u+Bt.CompressionLevels[this.compressionLevel].ColorOffsetBytes,h=new Uint8Array(this.bufferData,c.dataBase+f);let p=h[3];p=p>=t?p:0,e[d]=h[0],e[d+1]=h[1],e[d+2]=h[2],e[d+3]=p}}static parseHeader(e){const t=new Uint8Array(e,0,Bt.HeaderSizeBytes),i=new Uint16Array(e,0,Bt.HeaderSizeBytes/2),r=new Uint32Array(e,0,Bt.HeaderSizeBytes/4),s=new Float32Array(e,0,Bt.HeaderSizeBytes/4),a=t[0],o=t[1],l=r[1],c=r[2],u=r[3],d=r[4],f=i[10],h=new nt(s[6],s[7],s[8]),p=s[9]||-1.5,m=s[10]||b3;return{versionMajor:a,versionMinor:o,maxSectionCount:l,sectionCount:c,maxSplatCount:u,splatCount:d,compressionLevel:f,sceneCenter:h,minSphericalHarmonicsCoeff:p,maxSphericalHarmonicsCoeff:m}}static writeHeaderCountsToBuffer(e,t,i){const r=new Uint32Array(i,0,Bt.HeaderSizeBytes/4);r[2]=e,r[4]=t}static writeHeaderToBuffer(e,t){const i=new Uint8Array(t,0,Bt.HeaderSizeBytes),r=new Uint16Array(t,0,Bt.HeaderSizeBytes/2),s=new Uint32Array(t,0,Bt.HeaderSizeBytes/4),a=new Float32Array(t,0,Bt.HeaderSizeBytes/4);i[0]=e.versionMajor,i[1]=e.versionMinor,i[2]=0,i[3]=0,s[1]=e.maxSectionCount,s[2]=e.sectionCount,s[3]=e.maxSplatCount,s[4]=e.splatCount,r[10]=e.compressionLevel,a[6]=e.sceneCenter.x,a[7]=e.sceneCenter.y,a[8]=e.sceneCenter.z,a[9]=e.minSphericalHarmonicsCoeff||-1.5,a[10]=e.maxSphericalHarmonicsCoeff||b3}static parseSectionHeaders(e,t,i=0,r){const s=e.compressionLevel,a=e.maxSectionCount,o=new Uint16Array(t,i,a*Bt.SectionHeaderSizeBytes/2),l=new Uint32Array(t,i,a*Bt.SectionHeaderSizeBytes/4),c=new Float32Array(t,i,a*Bt.SectionHeaderSizeBytes/4),u=[];let d=0,f=d/2,h=d/4,p=Bt.HeaderSizeBytes+e.maxSectionCount*Bt.SectionHeaderSizeBytes,m=0;for(let v=0;v<a;v++){const g=l[h+1],y=l[h+2],x=l[h+3],b=c[h+4],A=b/2,S=o[f+10],C=l[h+6]||Bt.CompressionLevels[s].ScaleRange,_=l[h+8],M=l[h+9],T=M*4,E=S*x+T,I=o[f+20],{bytesPerSplat:L}=Bt.calculateComponentStorage(s,I),F=L*g,B=F+E,P={bytesPerSplat:L,splatCountOffset:m,splatCount:r?g:0,maxSplatCount:g,bucketSize:y,bucketCount:x,bucketBlockSize:b,halfBucketBlockSize:A,bucketStorageSizeBytes:S,bucketsStorageSizeBytes:E,splatDataStorageSizeBytes:F,storageSizeBytes:B,compressionScaleRange:C,compressionScaleFactor:A/C,base:p,bucketsBase:p+T,dataBase:p+E,fullBucketCount:_,partiallyFilledBucketCount:M,sphericalHarmonicsDegree:I};u[v]=P,p+=B,d+=Bt.SectionHeaderSizeBytes,f=d/2,h=d/4,m+=g}return u}static writeSectionHeaderToBuffer(e,t,i,r=0){const s=new Uint16Array(i,r,Bt.SectionHeaderSizeBytes/2),a=new Uint32Array(i,r,Bt.SectionHeaderSizeBytes/4),o=new Float32Array(i,r,Bt.SectionHeaderSizeBytes/4);a[0]=e.splatCount,a[1]=e.maxSplatCount,a[2]=t>=1?e.bucketSize:0,a[3]=t>=1?e.bucketCount:0,o[4]=t>=1?e.bucketBlockSize:0,s[10]=t>=1?Bt.BucketStorageSizeBytes:0,a[6]=t>=1?e.compressionScaleRange:0,a[7]=e.storageSizeBytes,a[8]=t>=1?e.fullBucketCount:0,a[9]=t>=1?e.partiallyFilledBucketCount:0,s[20]=e.sphericalHarmonicsDegree}static writeSectionHeaderSplatCountToBuffer(e,t,i=0){const r=new Uint32Array(t,i,Bt.SectionHeaderSizeBytes/4);r[0]=e}constructFromBuffer(e,t){this.bufferData=e,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSectionMap=[];const i=Bt.parseHeader(this.bufferData);this.versionMajor=i.versionMajor,this.versionMinor=i.versionMinor,this.maxSectionCount=i.maxSectionCount,this.sectionCount=t?i.maxSectionCount:0,this.maxSplatCount=i.maxSplatCount,this.splatCount=t?i.maxSplatCount:0,this.compressionLevel=i.compressionLevel,this.sceneCenter=new nt().copy(i.sceneCenter),this.minSphericalHarmonicsCoeff=i.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff=i.maxSphericalHarmonicsCoeff,this.sections=Bt.parseSectionHeaders(i,this.bufferData,Bt.HeaderSizeBytes,t),this.linkBufferArrays(),this.buildMaps()}static calculateComponentStorage(e,t){const i=Bt.CompressionLevels[e].BytesPerCenter,r=Bt.CompressionLevels[e].BytesPerScale,s=Bt.CompressionLevels[e].BytesPerRotation,a=Bt.CompressionLevels[e].BytesPerColor,o=a1(t),l=Bt.CompressionLevels[e].BytesPerSphericalHarmonicsComponent*o,c=i+r+s+a+l;return{bytesPerCenter:i,bytesPerScale:r,bytesPerRotation:s,bytesPerColor:a,sphericalHarmonicsComponentsPerSplat:o,sphericalHarmonicsBytesPerSplat:l,bytesPerSplat:c}}linkBufferArrays(){for(let e=0;e<this.maxSectionCount;e++){const t=this.sections[e];t.bucketArray=new Float32Array(this.bufferData,t.bucketsBase,t.bucketCount*Bt.BucketStorageSizeFloats),t.partiallyFilledBucketCount>0&&(t.partiallyFilledBucketLengths=new Uint32Array(this.bufferData,t.base,t.partiallyFilledBucketCount))}}buildMaps(){let e=0;for(let t=0;t<this.maxSectionCount;t++){const i=this.sections[t];for(let r=0;r<i.maxSplatCount;r++){const s=e+r;this.globalSplatIndexToLocalSplatIndexMap[s]=r,this.globalSplatIndexToSectionMap[s]=t}e+=i.maxSplatCount}}updateLoadedCounts(e,t){Bt.writeHeaderCountsToBuffer(e,t,this.bufferData),this.sectionCount=e,this.splatCount=t}updateSectionLoadedCounts(e,t){const i=Bt.HeaderSizeBytes+Bt.SectionHeaderSizeBytes*e;Bt.writeSectionHeaderSplatCountToBuffer(t,this.bufferData,i),this.sections[e].splatCount=t}static generateFromUncompressedSplatArrays(e,t,i,r,s,a,o=[]){let l=0;for(let A=0;A<e.length;A++){const S=e[A];l=Math.max(S.sphericalHarmonicsDegree,l)}let c,u;for(let A=0;A<e.length;A++){const S=e[A];for(let C=0;C<S.splats.length;C++){const _=S.splats[C];for(let M=gn.OFFSET.FRC0;M<gn.OFFSET.FRC23&&M<_.length;M++)(!c||_[M]<c)&&(c=_[M]),(!u||_[M]>u)&&(u=_[M])}}c=c||-1.5,u=u||b3;const{bytesPerSplat:d}=Bt.calculateComponentStorage(i,l),f=Bt.CompressionLevels[i].ScaleRange,h=[],p=[];let m=0;for(let A=0;A<e.length;A++){const S=e[A],C=new gn(l);for(let de=0;de<S.splatCount;de++){const J=S.splats[de];(J[gn.OFFSET.OPACITY]||0)>=t&&C.addSplat(J)}const _=o[A]||{},M=(_.blockSizeFactor||1)*(s||Bt.BucketBlockSize),T=Math.ceil((_.bucketSizeFactor||1)*(a||Bt.BucketSize)),E=Bt.computeBucketsForUncompressedSplatArray(C,M,T),I=E.fullBuckets.length,L=E.partiallyFullBuckets.map(de=>de.splats.length),F=L.length,B=[...E.fullBuckets,...E.partiallyFullBuckets],P=C.splats.length*d,z=F*4,O=i>=1?B.length*Bt.BucketStorageSizeBytes+z:0,N=P+O,H=new ArrayBuffer(N),q=f/(M*.5),te=new nt;let Q=0;for(let de=0;de<B.length;de++){const J=B[de];te.fromArray(J.center);for(let ue=0;ue<J.splats.length;ue++){let Te=J.splats[ue];const De=C.splats[Te],Le=O+Q*d;Bt.writeSplatDataToSectionBuffer(De,H,Le,i,l,te,q,f,c,u),Q++}}if(m+=Q,i>=1){const de=new Uint32Array(H,0,L.length*4);for(let ue=0;ue<L.length;ue++)de[ue]=L[ue];const J=new Float32Array(H,z,B.length*Bt.BucketStorageSizeFloats);for(let ue=0;ue<B.length;ue++){const Te=B[ue],De=ue*3;J[De]=Te.center[0],J[De+1]=Te.center[1],J[De+2]=Te.center[2]}}h.push(H);const ee=new ArrayBuffer(Bt.SectionHeaderSizeBytes);Bt.writeSectionHeaderToBuffer({maxSplatCount:Q,splatCount:Q,bucketSize:T,bucketCount:B.length,bucketBlockSize:M,compressionScaleRange:f,storageSizeBytes:N,fullBucketCount:I,partiallyFilledBucketCount:F,sphericalHarmonicsDegree:l},i,ee,0),p.push(ee)}let v=0;for(let A of h)v+=A.byteLength;const g=Bt.HeaderSizeBytes+Bt.SectionHeaderSizeBytes*h.length+v,y=new ArrayBuffer(g);Bt.writeHeaderToBuffer({versionMajor:0,versionMinor:1,maxSectionCount:h.length,sectionCount:h.length,maxSplatCount:m,splatCount:m,compressionLevel:i,sceneCenter:r,minSphericalHarmonicsCoeff:c,maxSphericalHarmonicsCoeff:u},y);let x=Bt.HeaderSizeBytes;for(let A of p)new Uint8Array(y,x,Bt.SectionHeaderSizeBytes).set(new Uint8Array(A)),x+=Bt.SectionHeaderSizeBytes;for(let A of h)new Uint8Array(y,x,A.byteLength).set(new Uint8Array(A)),x+=A.byteLength;return new Bt(y)}static computeBucketsForUncompressedSplatArray(e,t,i){let r=e.splatCount;const s=t/2,a=new nt,o=new nt;for(let m=0;m<r;m++){const v=e.splats[m],g=[v[gn.OFFSET.X],v[gn.OFFSET.Y],v[gn.OFFSET.Z]];(m===0||g[0]<a.x)&&(a.x=g[0]),(m===0||g[0]>o.x)&&(o.x=g[0]),(m===0||g[1]<a.y)&&(a.y=g[1]),(m===0||g[1]>o.y)&&(o.y=g[1]),(m===0||g[2]<a.z)&&(a.z=g[2]),(m===0||g[2]>o.z)&&(o.z=g[2])}const l=new nt().copy(o).sub(a),c=Math.ceil(l.y/t),u=Math.ceil(l.z/t),d=new nt,f=[],h={};for(let m=0;m<r;m++){const v=e.splats[m],g=[v[gn.OFFSET.X],v[gn.OFFSET.Y],v[gn.OFFSET.Z]],y=Math.floor((g[0]-a.x)/t),x=Math.floor((g[1]-a.y)/t),b=Math.floor((g[2]-a.z)/t);d.x=y*t+a.x+s,d.y=x*t+a.y+s,d.z=b*t+a.z+s;const A=y*(c*u)+x*u+b;let S=h[A];S||(h[A]=S={splats:[],center:d.toArray()}),S.splats.push(m),S.splats.length>=i&&(f.push(S),h[A]=null)}const p=[];for(let m in h)if(h.hasOwnProperty(m)){const v=h[m];v&&p.push(v)}return{fullBuckets:f,partiallyFullBuckets:p}}static preallocateUncompressed(e,t){const i=Bt.CompressionLevels[0].SphericalHarmonicsDegrees[t],r=Bt.HeaderSizeBytes+Bt.SectionHeaderSizeBytes,s=r+i.BytesPerSplat*e,a=new ArrayBuffer(s);return Bt.writeHeaderToBuffer({versionMajor:Bt.CurrentMajorVersion,versionMinor:Bt.CurrentMinorVersion,maxSectionCount:1,sectionCount:1,maxSplatCount:e,splatCount:e,compressionLevel:0,sceneCenter:new nt},a),Bt.writeSectionHeaderToBuffer({maxSplatCount:e,splatCount:e,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:t},0,a,Bt.HeaderSizeBytes),{splatBuffer:new Bt(a,!0),splatBufferDataOffsetBytes:r}}};at(Bt,"CurrentMajorVersion",0),at(Bt,"CurrentMinorVersion",1),at(Bt,"CenterComponentCount",3),at(Bt,"ScaleComponentCount",3),at(Bt,"RotationComponentCount",4),at(Bt,"ColorComponentCount",4),at(Bt,"CovarianceComponentCount",6),at(Bt,"SplatScaleOffsetFloat",3),at(Bt,"SplatRotationOffsetFloat",6),at(Bt,"CompressionLevels",{0:{BytesPerCenter:12,BytesPerScale:12,BytesPerRotation:16,BytesPerColor:4,ScaleOffsetBytes:12,RotationffsetBytes:24,ColorOffsetBytes:40,SphericalHarmonicsOffsetBytes:44,ScaleRange:1,BytesPerSphericalHarmonicsComponent:4,SphericalHarmonicsOffsetFloat:11,SphericalHarmonicsDegrees:{0:{BytesPerSplat:44},1:{BytesPerSplat:80},2:{BytesPerSplat:140}}},1:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:2,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:42},2:{BytesPerSplat:72}}},2:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:1,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:33},2:{BytesPerSplat:48}}}}),at(Bt,"CovarianceSizeFloats",6),at(Bt,"HeaderSizeBytes",4096),at(Bt,"SectionHeaderSizeBytes",1024),at(Bt,"BucketStorageSizeBytes",12),at(Bt,"BucketStorageSizeFloats",3),at(Bt,"BucketBlockSize",5),at(Bt,"BucketSize",256),at(Bt,"computeCovariance",function(){const e=new gi,t=new mi,i=new mi,r=new mi,s=new mi,a=new mi,o=new mi;return function(l,c,u,d,f=0,h){e.makeScale(l.x,l.y,l.z),t.setFromMatrix4(e),e.makeRotationFromQuaternion(c),i.setFromMatrix4(e),r.copy(i).multiply(t),s.copy(r).transpose().premultiply(r),u&&(a.setFromMatrix4(u),o.copy(a).transpose(),s.multiply(o),s.premultiply(a)),h>=1?(d[f]=qs(s.elements[0]),d[f+1]=qs(s.elements[3]),d[f+2]=qs(s.elements[6]),d[f+3]=qs(s.elements[4]),d[f+4]=qs(s.elements[7]),d[f+5]=qs(s.elements[8])):(d[f]=s.elements[0],d[f+1]=s.elements[3],d[f+2]=s.elements[6],d[f+3]=s.elements[4],d[f+4]=s.elements[7],d[f+5]=s.elements[8])}}()),at(Bt,"dot3",(e,t,i,r,s)=>{s[0]=s[1]=s[2]=0;const a=r[0],o=r[1],l=r[2];Bt.addInto3(e[0]*a,e[1]*a,e[2]*a,s),Bt.addInto3(t[0]*o,t[1]*o,t[2]*o,s),Bt.addInto3(i[0]*l,i[1]*l,i[2]*l,s)}),at(Bt,"addInto3",(e,t,i,r)=>{r[0]=r[0]+e,r[1]=r[1]+t,r[2]=r[2]+i}),at(Bt,"dot5",(e,t,i,r,s,a,o)=>{o[0]=o[1]=o[2]=0;const l=a[0],c=a[1],u=a[2],d=a[3],f=a[4];Bt.addInto3(e[0]*l,e[1]*l,e[2]*l,o),Bt.addInto3(t[0]*c,t[1]*c,t[2]*c,o),Bt.addInto3(i[0]*u,i[1]*u,i[2]*u,o),Bt.addInto3(r[0]*d,r[1]*d,r[2]*d,o),Bt.addInto3(s[0]*f,s[1]*f,s[2]*f,o)}),at(Bt,"rotateSphericalHarmonics3",(e,t,i,r,s,a,o,l,c)=>{Bt.dot3(e,t,i,r,o),Bt.dot3(e,t,i,s,l),Bt.dot3(e,t,i,a,c)}),at(Bt,"rotateSphericalHarmonics5",(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v,g,y)=>{const x=Math.sqrt(.25),b=Math.sqrt(3/4),A=Math.sqrt(1/3),S=Math.sqrt(4/3),C=Math.sqrt(1/12);c[0]=x*(l[2]*a[0]+l[0]*a[2]+(a[2]*l[0]+a[0]*l[2])),c[1]=l[1]*a[0]+a[1]*l[0],c[2]=b*(l[1]*a[1]+a[1]*l[1]),c[3]=l[1]*a[2]+a[1]*l[2],c[4]=x*(l[2]*a[2]-l[0]*a[0]+(a[2]*l[2]-a[0]*l[0])),Bt.dot5(e,t,i,r,s,c,p),u[0]=x*(o[2]*a[0]+o[0]*a[2]+(a[2]*o[0]+a[0]*o[2])),u[1]=o[1]*a[0]+a[1]*o[0],u[2]=b*(o[1]*a[1]+a[1]*o[1]),u[3]=o[1]*a[2]+a[1]*o[2],u[4]=x*(o[2]*a[2]-o[0]*a[0]+(a[2]*o[2]-a[0]*o[0])),Bt.dot5(e,t,i,r,s,u,m),d[0]=A*(o[2]*o[0]+o[0]*o[2])+-C*(l[2]*l[0]+l[0]*l[2]+(a[2]*a[0]+a[0]*a[2])),d[1]=S*o[1]*o[0]+-A*(l[1]*l[0]+a[1]*a[0]),d[2]=o[1]*o[1]+-x*(l[1]*l[1]+a[1]*a[1]),d[3]=S*o[1]*o[2]+-A*(l[1]*l[2]+a[1]*a[2]),d[4]=A*(o[2]*o[2]-o[0]*o[0])+-C*(l[2]*l[2]-l[0]*l[0]+(a[2]*a[2]-a[0]*a[0])),Bt.dot5(e,t,i,r,s,d,v),f[0]=x*(o[2]*l[0]+o[0]*l[2]+(l[2]*o[0]+l[0]*o[2])),f[1]=o[1]*l[0]+l[1]*o[0],f[2]=b*(o[1]*l[1]+l[1]*o[1]),f[3]=o[1]*l[2]+l[1]*o[2],f[4]=x*(o[2]*l[2]-o[0]*l[0]+(l[2]*o[2]-l[0]*o[0])),Bt.dot5(e,t,i,r,s,f,g),h[0]=x*(l[2]*l[0]+l[0]*l[2]-(a[2]*a[0]+a[0]*a[2])),h[1]=l[1]*l[0]-a[1]*a[0],h[2]=b*(l[1]*l[1]-a[1]*a[1]),h[3]=l[1]*l[2]-a[1]*a[2],h[4]=x*(l[2]*l[2]-l[0]*l[0]-(a[2]*a[2]-a[0]*a[0])),Bt.dot5(e,t,i,r,s,h,y)}),at(Bt,"writeSplatDataToSectionBuffer",function(){const e=new ArrayBuffer(12),t=new ArrayBuffer(12),i=new ArrayBuffer(16),r=new ArrayBuffer(4),s=new ArrayBuffer(256),a=new ds,o=new nt,l=new nt,{X:c,Y:u,Z:d,SCALE0:f,SCALE1:h,SCALE2:p,ROTATION0:m,ROTATION1:v,ROTATION2:g,ROTATION3:y,FDC0:x,FDC1:b,FDC2:A,OPACITY:S,FRC0:C,FRC9:_}=gn.OFFSET,M=(T,E,I)=>{const L=I*2+1;return T=Math.round(T*E)+I,ls(T,0,L)};return function(T,E,I,L,F,B,P,z,O=-1.5,N=b3){const H=a1(F),q=Bt.CompressionLevels[L].BytesPerCenter,te=Bt.CompressionLevels[L].BytesPerScale,Q=Bt.CompressionLevels[L].BytesPerRotation,ee=Bt.CompressionLevels[L].BytesPerColor,de=I,J=de+q,ue=J+te,Te=ue+Q,De=Te+ee;if(T[m]!==void 0?(a.set(T[m],T[v],T[g],T[y]),a.normalize()):a.set(1,0,0,0),T[f]!==void 0?o.set(T[f]||0,T[h]||0,T[p]||0):o.set(0,0,0),L===0){const Ne=new Float32Array(E,de,Bt.CenterComponentCount),Y=new Float32Array(E,ue,Bt.RotationComponentCount),oe=new Float32Array(E,J,Bt.ScaleComponentCount);if(Y.set([a.x,a.y,a.z,a.w]),oe.set([o.x,o.y,o.z]),Ne.set([T[c],T[u],T[d]]),F>0){const ne=new Float32Array(E,De,H);if(F>=1){for(let Xe=0;Xe<9;Xe++)ne[Xe]=T[C+Xe]||0;if(F>=2)for(let Xe=0;Xe<15;Xe++)ne[Xe+9]=T[_+Xe]||0}}}else{const Ne=new Uint16Array(e,0,Bt.CenterComponentCount),Y=new Uint16Array(i,0,Bt.RotationComponentCount),oe=new Uint16Array(t,0,Bt.ScaleComponentCount);if(Y.set([qs(a.x),qs(a.y),qs(a.z),qs(a.w)]),oe.set([qs(o.x),qs(o.y),qs(o.z)]),l.set(T[c],T[u],T[d]).sub(B),l.x=M(l.x,P,z),l.y=M(l.y,P,z),l.z=M(l.z,P,z),Ne.set([l.x,l.y,l.z]),F>0){const ne=L===1?Uint16Array:Uint8Array,Xe=L===1?2:1,ke=new ne(s,0,H);if(F>=1){for(let He=0;He<9;He++){const qe=T[C+He]||0;ke[He]=L===1?qs(qe):Ob(qe,O,N)}const Ge=9*Xe;if(Qv(ke.buffer,0,E,De,Ge),F>=2){for(let He=0;He<15;He++){const qe=T[_+He]||0;ke[He+9]=L===1?qs(qe):Ob(qe,O,N)}Qv(ke.buffer,Ge,E,De+Ge,15*Xe)}}}Qv(Ne.buffer,0,E,de,6),Qv(oe.buffer,0,E,J,6),Qv(Y.buffer,0,E,ue,8)}const Le=new Uint8ClampedArray(r,0,4);Le.set([T[x]||0,T[b]||0,T[A]||0]),Le[3]=T[S]||0,Qv(Le.buffer,0,E,Te,4)}}());let Vn=Bt;const CY=new Uint8Array([112,108,121,10]),MY=new Uint8Array([10,101,110,100,95,104,101,97,100,101,114,10]),zI="end_header",VI=new Map([["char",Int8Array],["uchar",Uint8Array],["short",Int16Array],["ushort",Uint16Array],["int",Int32Array],["uint",Uint32Array],["float",Float32Array],["double",Float64Array]]),Hu=(n,e)=>{const t=(1<<e)-1;return(n&t)/t},TY=(n,e)=>{n.x=Hu(e>>>21,11),n.y=Hu(e>>>11,10),n.z=Hu(e,11)},Aot=(n,e)=>{n.x=Hu(e>>>24,8),n.y=Hu(e>>>16,8),n.z=Hu(e>>>8,8),n.w=Hu(e,8)},wot=(n,e)=>{const t=1/(Math.sqrt(2)*.5),i=(Hu(e>>>20,10)-.5)*t,r=(Hu(e>>>10,10)-.5)*t,s=(Hu(e,10)-.5)*t,a=Math.sqrt(1-(i*i+r*r+s*s));switch(e>>>30){case 0:n.set(a,i,r,s);break;case 1:n.set(i,a,r,s);break;case 2:n.set(i,r,a,s);break;case 3:n.set(i,r,s,a);break}},Ld=(n,e,t)=>n*(1-t)+e*t,ms=(n,e)=>{var t;return(t=n.properties.find(i=>i.name===e&&i.storage))==null?void 0:t.storage},Lr=class Lr{static decodeHeaderText(e){let t,i,r,s;const a=e.split(`
`).filter(d=>!d.startsWith("comment "));let o=0,l=!1;for(let d=1;d<a.length;++d){const f=a[d].split(" ");switch(f[0]){case"format":if(f[1]!=="binary_little_endian")throw new Error("Unsupported ply format");break;case"element":t={name:f[1],count:parseInt(f[2],10),properties:[],storageSizeBytes:0},t.name==="chunk"?i=t:t.name==="vertex"?r=t:t.name==="sh"&&(s=t);break;case"property":{if(!VI.has(f[1]))throw new Error(`Unrecognized property data type '${f[1]}' in ply header`);const h=VI.get(f[1]),p=h.BYTES_PER_ELEMENT*t.count;t.name==="vertex"&&(o+=h.BYTES_PER_ELEMENT),t.properties.push({type:f[1],name:f[2],storage:null,byteSize:h.BYTES_PER_ELEMENT,storageSizeByes:p}),t.storageSizeBytes+=p;break}case zI:l=!0;break;default:throw new Error(`Unrecognized header value '${f[0]}' in ply header`)}if(l)break}let c=0,u=0;return s&&(u=s.properties.length,s.properties.length>=45?c=3:s.properties.length>=24?c=2:s.properties.length>=9&&(c=1)),{chunkElement:i,vertexElement:r,shElement:s,bytesPerSplat:o,headerSizeBytes:e.indexOf(zI)+zI.length+1,sphericalHarmonicsDegree:c,sphericalHarmonicsPerSplat:u}}static decodeHeader(e){const t=(h,p)=>{const m=h.length-p.length;let v,g;for(v=0;v<=m;++v){for(g=0;g<p.length&&h[v+g]===p[g];++g);if(g===p.length)return v}return-1},i=(h,p)=>{if(h.length<p.length)return!1;for(let m=0;m<p.length;++m)if(h[m]!==p[m])return!1;return!0};let r=new Uint8Array(e),s;if(r.length>=CY.length&&!i(r,CY))throw new Error("Invalid PLY header");if(s=t(r,MY),s===-1)throw new Error("End of PLY header not found");const a=new TextDecoder("ascii").decode(r.slice(0,s)),{chunkElement:o,vertexElement:l,shElement:c,sphericalHarmonicsDegree:u,sphericalHarmonicsPerSplat:d,bytesPerSplat:f}=Lr.decodeHeaderText(a);return{headerSizeBytes:s+MY.length,bytesPerSplat:f,chunkElement:o,vertexElement:l,shElement:c,sphericalHarmonicsDegree:u,sphericalHarmonicsPerSplat:d}}static readElementData(e,t,i,r,s,a=null){let o=t instanceof DataView?t:new DataView(t);r=r||0,s=s||e.count-1;for(let l=r;l<=s;++l)for(let c=0;c<e.properties.length;++c){const u=e.properties[c],d=VI.get(u.type),f=d.BYTES_PER_ELEMENT*e.count;if((!u.storage||u.storage.byteLength<f)&&(!a||a(u.name))&&(u.storage=new d(e.count)),u.storage)switch(u.type){case"char":u.storage[l]=o.getInt8(i);break;case"uchar":u.storage[l]=o.getUint8(i);break;case"short":u.storage[l]=o.getInt16(i,!0);break;case"ushort":u.storage[l]=o.getUint16(i,!0);break;case"int":u.storage[l]=o.getInt32(i,!0);break;case"uint":u.storage[l]=o.getUint32(i,!0);break;case"float":u.storage[l]=o.getFloat32(i,!0);break;case"double":u.storage[l]=o.getFloat64(i,!0);break}i+=u.byteSize}return i}static readPly(e,t=null){const i=Lr.decodeHeader(e);let r=Lr.readElementData(i.chunkElement,e,i.headerSizeBytes,null,null,t);return r=Lr.readElementData(i.vertexElement,e,r,null,null,t),Lr.readElementData(i.shElement,e,r,null,null,t),{chunkElement:i.chunkElement,vertexElement:i.vertexElement,shElement:i.shElement,sphericalHarmonicsDegree:i.sphericalHarmonicsDegree,sphericalHarmonicsPerSplat:i.sphericalHarmonicsPerSplat}}static getElementStorageArrays(e,t,i){const r={};if(t){const s=ms(e,"min_r"),a=ms(e,"min_g"),o=ms(e,"min_b"),l=ms(e,"max_r"),c=ms(e,"max_g"),u=ms(e,"max_b"),d=ms(e,"min_x"),f=ms(e,"min_y"),h=ms(e,"min_z"),p=ms(e,"max_x"),m=ms(e,"max_y"),v=ms(e,"max_z"),g=ms(e,"min_scale_x"),y=ms(e,"min_scale_y"),x=ms(e,"min_scale_z"),b=ms(e,"max_scale_x"),A=ms(e,"max_scale_y"),S=ms(e,"max_scale_z"),C=ms(t,"packed_position"),_=ms(t,"packed_rotation"),M=ms(t,"packed_scale"),T=ms(t,"packed_color");r.colorExtremes={minR:s,maxR:l,minG:a,maxG:c,minB:o,maxB:u},r.positionExtremes={minX:d,maxX:p,minY:f,maxY:m,minZ:h,maxZ:v},r.scaleExtremes={minScaleX:g,maxScaleX:b,minScaleY:y,maxScaleY:A,minScaleZ:x,maxScaleZ:S},r.position=C,r.rotation=_,r.scale=M,r.color=T}if(i){const s={};for(let a=0;a<45;a++){const o=`f_rest_${a}`,l=ms(i,o);if(l)s[o]=l;else break}r.sh=s}return r}static parseToUncompressedSplatBufferSection(e,t,i,r,s,a,o,l,c=null){Lr.readElementData(t,a,0,i,r,c);const u=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,{positionExtremes:d,scaleExtremes:f,colorExtremes:h,position:p,rotation:m,scale:v,color:g}=Lr.getElementStorageArrays(e,t),y=gn.createSplat();for(let x=i;x<=r;++x){Lr.decompressBaseSplat(x,s,p,d,v,f,m,h,g,y);const b=x*u+l;Vn.writeSplatDataToSectionBuffer(y,o,b,0,0)}}static parseToUncompressedSplatArraySection(e,t,i,r,s,a,o,l=null){Lr.readElementData(t,a,0,i,r,l);const{positionExtremes:c,scaleExtremes:u,colorExtremes:d,position:f,rotation:h,scale:p,color:m}=Lr.getElementStorageArrays(e,t);for(let v=i;v<=r;++v){const g=gn.createSplat();Lr.decompressBaseSplat(v,s,f,c,p,u,h,d,m,g),o.addSplat(g)}}static parseSphericalHarmonicsToUncompressedSplatArraySection(e,t,i,r,s,a,o,l,c,u=null){Lr.readElementData(t,s,a,i,r,u);const{sh:d}=Lr.getElementStorageArrays(e,void 0,t),f=Object.values(d);for(let h=i;h<=r;++h)Lr.decompressSphericalHarmonics(h,f,o,l,c.splats[h])}static parseToUncompressedSplatArray(e,t){const{chunkElement:i,vertexElement:r,shElement:s,sphericalHarmonicsDegree:a}=Lr.readPly(e);t=Math.min(t,a);const o=new gn(t),{positionExtremes:l,scaleExtremes:c,colorExtremes:u,position:d,rotation:f,scale:h,color:p}=Lr.getElementStorageArrays(i,r);let m;if(t>0){const{sh:v}=Lr.getElementStorageArrays(i,void 0,s);m=Object.values(v)}for(let v=0;v<r.count;++v){o.addDefaultSplat();const g=o.getSplat(o.splatCount-1);Lr.decompressBaseSplat(v,0,d,l,h,c,f,u,p,g),t>0&&Lr.decompressSphericalHarmonics(v,m,t,a,g)}return o}static parseToUncompressedSplatBuffer(e,t){const{chunkElement:i,vertexElement:r,shElement:s,sphericalHarmonicsDegree:a}=Lr.readPly(e);t=Math.min(t,a);const{splatBuffer:o,splatBufferDataOffsetBytes:l}=Vn.preallocateUncompressed(r.count,t),{positionExtremes:c,scaleExtremes:u,colorExtremes:d,position:f,rotation:h,scale:p,color:m}=Lr.getElementStorageArrays(i,r);let v;if(t>0){const{sh:x}=Lr.getElementStorageArrays(i,void 0,s);v=Object.values(x)}const g=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[t].BytesPerSplat,y=gn.createSplat(t);for(let x=0;x<r.count;++x){Lr.decompressBaseSplat(x,0,f,c,p,u,h,d,m,y),t>0&&Lr.decompressSphericalHarmonics(x,v,t,a,y);const b=x*g+l;Vn.writeSplatDataToSectionBuffer(y,o.bufferData,b,0,t)}return o}};at(Lr,"decompressBaseSplat",function(){const e=new nt,t=new ds,i=new nt,r=new us,s=gn.OFFSET;return function(a,o,l,c,u,d,f,h,p,m){m=m||gn.createSplat();const v=Math.floor((o+a)/256);return TY(e,l[a]),wot(t,f[a]),TY(i,u[a]),Aot(r,p[a]),m[s.X]=Ld(c.minX[v],c.maxX[v],e.x),m[s.Y]=Ld(c.minY[v],c.maxY[v],e.y),m[s.Z]=Ld(c.minZ[v],c.maxZ[v],e.z),m[s.ROTATION0]=t.x,m[s.ROTATION1]=t.y,m[s.ROTATION2]=t.z,m[s.ROTATION3]=t.w,m[s.SCALE0]=Math.exp(Ld(d.minScaleX[v],d.maxScaleX[v],i.x)),m[s.SCALE1]=Math.exp(Ld(d.minScaleY[v],d.maxScaleY[v],i.y)),m[s.SCALE2]=Math.exp(Ld(d.minScaleZ[v],d.maxScaleZ[v],i.z)),h.minR&&h.maxR?m[s.FDC0]=ls(Math.round(Ld(h.minR[v],h.maxR[v],r.x)*255),0,255):m[s.FDC0]=ls(Math.floor(r.x*255),0,255),h.minG&&h.maxG?m[s.FDC1]=ls(Math.round(Ld(h.minG[v],h.maxG[v],r.y)*255),0,255):m[s.FDC1]=ls(Math.floor(r.y*255),0,255),h.minB&&h.maxB?m[s.FDC2]=ls(Math.round(Ld(h.minB[v],h.maxB[v],r.z)*255),0,255):m[s.FDC2]=ls(Math.floor(r.z*255),0,255),m[s.OPACITY]=ls(Math.floor(r.w*255),0,255),m}}()),at(Lr,"decompressSphericalHarmonics",function(){const e=[0,3,8,15],t=[0,1,2,9,10,11,12,13,24,25,26,27,28,29,30,3,4,5,14,15,16,17,18,31,32,33,34,35,36,37,6,7,8,19,20,21,22,23,38,39,40,41,42,43,44];return function(i,r,s,a,o){o=o||gn.createSplat();let l=e[s],c=e[a];for(let u=0;u<3;++u)for(let d=0;d<15;++d){const f=t[u*15+d];d<l&&d<c&&(o[gn.OFFSET.FRC0+f]=r[u*c+d][i]*(8/255)-4)}return o}}());let Kd=Lr;const po={INRIAV1:0,INRIAV2:1,PlayCanvasCompressed:2},[uoe,wB,SB,_B,CB,MB,TB]=[0,1,2,3,4,5,6],EY={double:uoe,int:wB,uint:SB,float:_B,short:CB,ushort:MB,uchar:TB},Sot={[uoe]:8,[wB]:4,[SB]:4,[_B]:4,[CB]:2,[MB]:2,[TB]:1},Fo=class Fo{static decodeSectionHeader(e,t,i=0){const r=[];let s=!1,a=-1,o=0,l=!1,c=null;const u=[],d=[],f=[],h={};for(let g=i;g<e.length;g++){const y=e[g].trim();if(y.startsWith("element"))if(s){a--;break}else{s=!0,i=g,a=g;const x=y.split(" ");let b=0;for(let A of x){const S=A.trim();S.length>0&&(b++,b===2?c=S:b===3&&(o=parseInt(S)))}}else if(y.startsWith("property")){const x=y.match(/(\w+)\s+(\w+)\s+(\w+)/);if(x){const b=x[2],A=x[3];f.push(A);const S=t[A];h[A]=b;const C=EY[b];S!==void 0&&(u.push(S),d[S]=C)}}if(y===Fo.HeaderEndToken){l=!0;break}s&&(r.push(y),a++)}const p=[];let m=0;for(let g of f){const y=h[g];if(h.hasOwnProperty(g)){const x=t[g];x!==void 0&&(p[x]=m)}m+=Sot[EY[y]]}const v=Fo.decodeSphericalHarmonicsFromSectionHeader(f,t);return{headerLines:r,headerStartLine:i,headerEndLine:a,fieldTypes:d,fieldIds:u,fieldOffsets:p,bytesPerVertex:m,vertexCount:o,dataSizeBytes:m*o,endOfHeader:l,sectionName:c,sphericalHarmonicsDegree:v.degree,sphericalHarmonicsCoefficientsPerChannel:v.coefficientsPerChannel,sphericalHarmonicsDegree1Fields:v.degree1Fields,sphericalHarmonicsDegree2Fields:v.degree2Fields}}static decodeSphericalHarmonicsFromSectionHeader(e,t){let i=0,r=0;for(let l of e)l.startsWith("f_rest")&&i++;r=i/3;let s=0;r>=3&&(s=1),r>=8&&(s=2);let a=[],o=[];for(let l=0;l<3;l++){if(s>=1)for(let c=0;c<3;c++)a.push(t["f_rest_"+(c+r*l)]);if(s>=2)for(let c=0;c<5;c++)o.push(t["f_rest_"+(c+r*l+3)])}return{degree:s,coefficientsPerChannel:r,degree1Fields:a,degree2Fields:o}}static getHeaderSectionNames(e){const t=[];for(let i of e)if(i.startsWith("element")){const r=i.split(" ");let s=0;for(let a of r){const o=a.trim();o.length>0&&(s++,s===2&&t.push(o))}}return t}static checkTextForEndHeader(e){return!!e.includes(Fo.HeaderEndToken)}static checkBufferForEndHeader(e,t,i,r){const s=new Uint8Array(e,Math.max(0,t-i),i),a=r.decode(s);return Fo.checkTextForEndHeader(a)}static extractHeaderFromBufferToText(e){const t=new TextDecoder;let i=0,r="";const s=100;for(;;){if(i+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,i,s);if(r+=t.decode(a),i+=s,Fo.checkBufferForEndHeader(e,i,s*2,t))break}return r}static readHeaderFromBuffer(e){const t=new TextDecoder;let i=0,r="";const s=100;for(;;){if(i+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,i,s);if(r+=t.decode(a),i+=s,Fo.checkBufferForEndHeader(e,i,s*2,t))break}return r}static convertHeaderTextToLines(e){const t=e.split(`
`),i=[];for(let r=0;r<t.length;r++){const s=t[r].trim();if(i.push(s),s===Fo.HeaderEndToken)break}return i}static determineHeaderFormatFromHeaderText(e){const t=Fo.convertHeaderTextToLines(e);let i=po.INRIAV1;for(let r=0;r<t.length;r++){const s=t[r].trim();if(s.startsWith("element chunk")||s.match(/[A-Za-z]*packed_[A-Za-z]*/))i=po.PlayCanvasCompressed;else if(s.startsWith("element codebook_centers"))i=po.INRIAV2;else if(s===Fo.HeaderEndToken)break}return i}static determineHeaderFormatFromPlyBuffer(e){const t=Fo.extractHeaderFromBufferToText(e);return Fo.determineHeaderFormatFromHeaderText(t)}static readVertex(e,t,i,r,s,a,o=!0){const l=i*t.bytesPerVertex+r,c=t.fieldOffsets,u=t.fieldTypes;for(let d of s){const f=u[d];f===_B?a[d]=e.getFloat32(l+c[d],!0):f===CB?a[d]=e.getInt16(l+c[d],!0):f===MB?a[d]=e.getUint16(l+c[d],!0):f===wB?a[d]=e.getInt32(l+c[d],!0):f===SB?a[d]=e.getUint32(l+c[d],!0):f===TB&&(o?a[d]=e.getUint8(l+c[d])/255:a[d]=e.getUint8(l+c[d]))}}};at(Fo,"HeaderEndToken","end_header");let Es=Fo;const doe=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0"],_ot=doe.map((n,e)=>e),[IY,Cot,Mot,Tot,Eot,Iot,Dot,Rot,Pot,Lot,DY,kot,Fot,RY,PY,Bot,Not,Oot]=_ot,Vl=class Vl{static decodeHeaderLines(e){let t=0;e.forEach(u=>{u.includes("f_rest_")&&t++});let i=0;t>=45?i=45:t>=24?i=24:t>=9&&(i=9);let s=Array.from(Array(Math.max(i-1,0))).map((u,d)=>`f_rest_${d+1}`);const a=[...doe,...s],o=a.map((u,d)=>d),l=o.reduce((u,d)=>(u[a[d]]=d,u),{}),c=Es.decodeSectionHeader(e,l,0);return c.splatCount=c.vertexCount,c.bytesPerSplat=c.bytesPerVertex,c.fieldsToReadIndexes=o,c}static decodeHeaderText(e){const t=Es.convertHeaderTextToLines(e),i=Vl.decodeHeaderLines(t);return i.headerText=e,i.headerSizeBytes=e.indexOf(Es.HeaderEndToken)+Es.HeaderEndToken.length+1,i}static decodeHeaderFromBuffer(e){const t=Es.readHeaderFromBuffer(e);return Vl.decodeHeaderText(t)}static findSplatData(e,t){return new DataView(e,t.headerSizeBytes)}static parseToUncompressedSplatBufferSection(e,t,i,r,s,a,o,l=0){l=Math.min(l,e.sphericalHarmonicsDegree);const c=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[l].BytesPerSplat;for(let u=t;u<=i;u++){const d=Vl.parseToUncompressedSplat(r,u,e,s,l),f=u*c+o;Vn.writeSplatDataToSectionBuffer(d,a,f,0,l)}}static parseToUncompressedSplatArraySection(e,t,i,r,s,a,o=0){o=Math.min(o,e.sphericalHarmonicsDegree);for(let l=t;l<=i;l++){const c=Vl.parseToUncompressedSplat(r,l,e,s,o);a.addSplat(c)}}static decodeSectionSplatData(e,t,i,r,s=!0){if(r=Math.min(r,i.sphericalHarmonicsDegree),s){const a=new gn(r);for(let o=0;o<t;o++){const l=Vl.parseToUncompressedSplat(e,o,i,0,r);a.addSplat(l)}return a}else{const{splatBuffer:a,splatBufferDataOffsetBytes:o}=Vn.preallocateUncompressed(t,r);return Vl.parseToUncompressedSplatBufferSection(i,0,t-1,e,0,a.bufferData,o,r),a}}static readSplat(e,t,i,r,s){return Es.readVertex(e,t,i,r,t.fieldsToReadIndexes,s,!0)}static parseToUncompressedSplatArray(e,t=0){const{header:i,splatCount:r,splatData:s}=LY(e);return Vl.decodeSectionSplatData(s,r,i,t,!0)}static parseToUncompressedSplatBuffer(e,t=0){const{header:i,splatCount:r,splatData:s}=LY(e);return Vl.decodeSectionSplatData(s,r,i,t,!1)}};at(Vl,"parseToUncompressedSplat",function(){let e=[];const t=new ds,i=gn.OFFSET.X,r=gn.OFFSET.Y,s=gn.OFFSET.Z,a=gn.OFFSET.SCALE0,o=gn.OFFSET.SCALE1,l=gn.OFFSET.SCALE2,c=gn.OFFSET.ROTATION0,u=gn.OFFSET.ROTATION1,d=gn.OFFSET.ROTATION2,f=gn.OFFSET.ROTATION3,h=gn.OFFSET.FDC0,p=gn.OFFSET.FDC1,m=gn.OFFSET.FDC2,v=gn.OFFSET.OPACITY,g=[];for(let y=0;y<45;y++)g[y]=gn.OFFSET.FRC0+y;return function(y,x,b,A=0,S=0){S=Math.min(S,b.sphericalHarmonicsDegree),Vl.readSplat(y,b,x,A,e);const C=gn.createSplat(S);if(e[IY]!==void 0?(C[a]=Math.exp(e[IY]),C[o]=Math.exp(e[Cot]),C[l]=Math.exp(e[Mot])):(C[a]=.01,C[o]=.01,C[l]=.01),e[DY]!==void 0){const _=.28209479177387814;C[h]=(.5+_*e[DY])*255,C[p]=(.5+_*e[kot])*255,C[m]=(.5+_*e[Fot])*255}else e[PY]!==void 0?(C[h]=e[PY]*255,C[p]=e[Bot]*255,C[m]=e[Not]*255):(C[h]=0,C[p]=0,C[m]=0);if(e[RY]!==void 0&&(C[v]=1/(1+Math.exp(-e[RY]))*255),C[h]=ls(Math.floor(C[h]),0,255),C[p]=ls(Math.floor(C[p]),0,255),C[m]=ls(Math.floor(C[m]),0,255),C[v]=ls(Math.floor(C[v]),0,255),S>=1&&e[Oot]!==void 0){for(let _=0;_<9;_++)C[g[_]]=e[b.sphericalHarmonicsDegree1Fields[_]];if(S>=2)for(let _=0;_<15;_++)C[g[9+_]]=e[b.sphericalHarmonicsDegree2Fields[_]]}return t.set(e[Tot],e[Eot],e[Iot],e[Dot]),t.normalize(),C[c]=t.x,C[u]=t.y,C[d]=t.z,C[f]=t.w,C[i]=e[Rot],C[r]=e[Pot],C[s]=e[Lot],C}}());let cf=Vl;function LY(n){const e=cf.decodeHeaderFromBuffer(n),t=e.splatCount,i=cf.findSplatData(n,e);return{header:e,splatCount:t,splatData:i}}const foe=["features_dc","features_rest_0","features_rest_1","features_rest_2","features_rest_3","features_rest_4","features_rest_5","features_rest_6","features_rest_7","features_rest_8","features_rest_9","features_rest_10","features_rest_11","features_rest_12","features_rest_13","features_rest_14","opacity","scaling","rotation_re","rotation_im"],x3=foe.map((n,e)=>e),[A3,Uot,zot,kY,w3,Vot,HI]=[0,1,4,16,17,18,19],hoe=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0","f_rest_1","f_rest_2","f_rest_3","f_rest_4","f_rest_5","f_rest_6","f_rest_7","f_rest_8","f_rest_9","f_rest_10","f_rest_11","f_rest_12","f_rest_13","f_rest_14","f_rest_15","f_rest_16","f_rest_17","f_rest_18","f_rest_19","f_rest_20","f_rest_21","f_rest_22","f_rest_23","f_rest_24","f_rest_25","f_rest_26","f_rest_27","f_rest_28","f_rest_29","f_rest_30","f_rest_31","f_rest_32","f_rest_33","f_rest_34","f_rest_35","f_rest_36","f_rest_37","f_rest_38","f_rest_39","f_rest_40","f_rest_41","f_rest_42","f_rest_43","f_rest_44","f_rest_45"],ZP=hoe.map((n,e)=>e),[FY,Hot,Got,Wot,qot,Kot,Yot,Xot,jot,$ot,JP,poe,moe,BY]=ZP,NY=JP,Qot=poe,Zot=moe,S3=n=>{const e=(31744&n)>>10,t=1023&n;return(n>>15?-1:1)*(e?e===31?t?NaN:1/0:Math.pow(2,e-15)*(1+t/1024):t/1024*6103515625e-14)},Bo=class Bo{static decodeSectionHeadersFromHeaderLines(e){const t=ZP.reduce((u,d)=>(u[hoe[d]]=d,u),{}),i=x3.reduce((u,d)=>(u[foe[d]]=d,u),{}),r=Es.getHeaderSectionNames(e);let s;for(let u=0;u<r.length;u++)r[u]==="codebook_centers"&&(s=u);let a=0,o=!1;const l=[];let c=0;for(;!o;){let u;c===s?u=Es.decodeSectionHeader(e,i,a):u=Es.decodeSectionHeader(e,t,a),o=u.endOfHeader,a=u.headerEndLine+1,o||(u.splatCount=u.vertexCount,u.bytesPerSplat=u.bytesPerVertex),l.push(u),c++}return l}static decodeSectionHeadersFromHeaderText(e){const t=Es.convertHeaderTextToLines(e);return Bo.decodeSectionHeadersFromHeaderLines(t)}static getSplatCountFromSectionHeaders(e){let t=0;for(let i of e)i.sectionName!=="codebook_centers"&&(t+=i.vertexCount);return t}static decodeHeaderFromHeaderText(e){const t=e.indexOf(Es.HeaderEndToken)+Es.HeaderEndToken.length+1,i=Bo.decodeSectionHeadersFromHeaderText(e),r=Bo.getSplatCountFromSectionHeaders(i);return{headerSizeBytes:t,sectionHeaders:i,splatCount:r}}static decodeHeaderFromBuffer(e){const t=Es.readHeaderFromBuffer(e);return Bo.decodeHeaderFromHeaderText(t)}static findVertexData(e,t,i){let r=t.headerSizeBytes;for(let s=0;s<i&&s<t.sectionHeaders.length;s++){const a=t.sectionHeaders[s];r+=a.dataSizeBytes}return new DataView(e,r,t.sectionHeaders[i].dataSizeBytes)}static decodeCodeBook(e,t){const i=[],r=[];for(let s=0;s<t.vertexCount;s++){Es.readVertex(e,t,s,0,x3,i);for(let a of x3){const o=x3[a];let l=r[o];l||(r[o]=l=[]),l.push(i[a])}}for(let s=0;s<r.length;s++){const a=r[s],o=.28209479177387814;for(let l=0;l<a.length;l++){const c=S3(a[l]);s===kY?a[l]=Math.round(1/(1+Math.exp(-c))*255):s===A3?a[l]=Math.round((.5+o*c)*255):s===w3?a[l]=Math.exp(c):a[l]=c}}return r}static decodeSectionSplatData(e,t,i,r,s){s=Math.min(s,i.sphericalHarmonicsDegree);const a=new gn(s);for(let o=0;o<t;o++){const l=Bo.parseToUncompressedSplat(e,o,i,r,0,s);a.addSplat(l)}return a}static readSplat(e,t,i,r,s){return Es.readVertex(e,t,i,r,ZP,s,!1)}static parseToUncompressedSplatArray(e,t=0){const i=[],r=Bo.decodeHeaderFromBuffer(e,t);let s;for(let o=0;o<r.sectionHeaders.length;o++){const l=r.sectionHeaders[o];if(l.sectionName==="codebook_centers"){const c=Bo.findVertexData(e,r,o);s=Bo.decodeCodeBook(c,l)}}for(let o=0;o<r.sectionHeaders.length;o++){const l=r.sectionHeaders[o];if(l.sectionName!=="codebook_centers"){const c=l.vertexCount,u=Bo.findVertexData(e,r,o),d=Bo.decodeSectionSplatData(u,c,l,s,t);i.push(d)}}const a=new gn(t);for(let o of i)for(let l of o.splats)a.addSplat(l);return a}};at(Bo,"parseToUncompressedSplat",function(){let e=[];const t=new ds,i=gn.OFFSET.X,r=gn.OFFSET.Y,s=gn.OFFSET.Z,a=gn.OFFSET.SCALE0,o=gn.OFFSET.SCALE1,l=gn.OFFSET.SCALE2,c=gn.OFFSET.ROTATION0,u=gn.OFFSET.ROTATION1,d=gn.OFFSET.ROTATION2,f=gn.OFFSET.ROTATION3,h=gn.OFFSET.FDC0,p=gn.OFFSET.FDC1,m=gn.OFFSET.FDC2,v=gn.OFFSET.OPACITY,g=[];for(let y=0;y<45;y++)g[y]=gn.OFFSET.FRC0+y;return function(y,x,b,A,S=0,C=0){C=Math.min(C,b.sphericalHarmonicsDegree),Bo.readSplat(y,b,x,S,e);const _=gn.createSplat(C);if(e[FY]!==void 0?(_[a]=A[w3][e[FY]],_[o]=A[w3][e[Hot]],_[l]=A[w3][e[Got]]):(_[a]=.01,_[o]=.01,_[l]=.01),e[JP]!==void 0?(_[h]=A[A3][e[JP]],_[p]=A[A3][e[poe]],_[m]=A[A3][e[moe]]):e[NY]!==void 0?(_[h]=e[NY]*255,_[p]=e[Qot]*255,_[m]=e[Zot]*255):(_[h]=0,_[p]=0,_[m]=0),e[BY]!==void 0&&(_[v]=A[kY][e[BY]]),_[h]=ls(Math.floor(_[h]),0,255),_[p]=ls(Math.floor(_[p]),0,255),_[m]=ls(Math.floor(_[m]),0,255),_[v]=ls(Math.floor(_[v]),0,255),C>=1&&b.sphericalHarmonicsDegree>=1){for(let L=0;L<9;L++){const F=A[Uot+L%3];_[g[L]]=F[e[b.sphericalHarmonicsDegree1Fields[L]]]}if(C>=2&&b.sphericalHarmonicsDegree>=2)for(let L=0;L<15;L++){const F=A[zot+L%5];_[g[9+L]]=F[e[b.sphericalHarmonicsDegree2Fields[L]]]}}const M=A[Vot][e[Wot]],T=A[HI][e[qot]],E=A[HI][e[Kot]],I=A[HI][e[Yot]];return t.set(M,T,E,I),t.normalize(),_[c]=t.x,_[u]=t.y,_[d]=t.z,_[f]=t.w,_[i]=S3(e[Xot]),_[r]=S3(e[jot]),_[s]=S3(e[$ot]),_}}());let eL=Bo;class OY{static parseToUncompressedSplatArray(e,t=0){const i=Es.determineHeaderFormatFromPlyBuffer(e);if(i===po.PlayCanvasCompressed)return Kd.parseToUncompressedSplatArray(e,t);if(i===po.INRIAV1)return cf.parseToUncompressedSplatArray(e,t);if(i===po.INRIAV2)return eL.parseToUncompressedSplatArray(e,t)}static parseToUncompressedSplatBuffer(e,t=0){const i=Es.determineHeaderFormatFromPlyBuffer(e);if(i===po.PlayCanvasCompressed)return Kd.parseToUncompressedSplatBuffer(e,t);if(i===po.INRIAV1)return cf.parseToUncompressedSplatBuffer(e,t);if(i===po.INRIAV2)throw new Error("parseToUncompressedSplatBuffer() is not implemented for INRIA V2 PLY files")}}class EB{constructor(e,t,i,r){this.sectionCount=e,this.sectionFilters=t,this.groupingParameters=i,this.partitionGenerator=r}partitionUncompressedSplatArray(e){let t,i,r;if(this.partitionGenerator){const a=this.partitionGenerator(e);t=a.groupingParameters,i=a.sectionCount,r=a.sectionFilters}else t=this.groupingParameters,i=this.sectionCount,r=this.sectionFilters;const s=[];for(let a=0;a<i;a++){const o=new gn(e.sphericalHarmonicsDegree),l=r[a];for(let c=0;c<e.splatCount;c++)l(c)&&o.addSplat(e.splats[c]);s.push(o)}return{splatArrays:s,parameters:t}}static getStandardPartitioner(e=0,t=new nt,i=Vn.BucketBlockSize,r=Vn.BucketSize){const s=a=>{const o=gn.OFFSET.X,l=gn.OFFSET.Y,c=gn.OFFSET.Z;e<=0&&(e=a.splatCount);const u=new nt,d=.5,f=g=>{g.x=Math.floor(g.x/d)*d,g.y=Math.floor(g.y/d)*d,g.z=Math.floor(g.z/d)*d};a.splats.forEach(g=>{u.set(g[o],g[l],g[c]).sub(t),f(u),g.centerDist=u.lengthSq()}),a.splats.sort((g,y)=>{let x=g.centerDist,b=y.centerDist;return x>b?1:-1});const h=[],p=[];e=Math.min(a.splatCount,e);const m=Math.ceil(a.splatCount/e);let v=0;for(let g=0;g<m;g++){let y=v;h.push(x=>x>=y&&x<y+e),p.push({blocksSize:i,bucketSize:r}),v+=e}return{sectionCount:h.length,sectionFilters:h,groupingParameters:p}};return new EB(void 0,void 0,void 0,s)}}class HA{constructor(e,t,i,r,s,a,o){this.splatPartitioner=e,this.alphaRemovalThreshold=t,this.compressionLevel=i,this.sectionSize=r,this.sceneCenter=s?new nt().copy(s):void 0,this.blockSize=a,this.bucketSize=o}generateFromUncompressedSplatArray(e){const t=this.splatPartitioner.partitionUncompressedSplatArray(e);return Vn.generateFromUncompressedSplatArrays(t.splatArrays,this.alphaRemovalThreshold,this.compressionLevel,this.sceneCenter,this.blockSize,this.bucketSize,t.parameters)}static getStandardGenerator(e=1,t=1,i=0,r=new nt,s=Vn.BucketBlockSize,a=Vn.BucketSize){const o=EB.getStandardPartitioner(i,r,s,a);return new HA(o,e,t,i,r,s,a)}}const Is={Downloading:0,Processing:1,Done:2};class O4 extends Error{constructor(e){super(e)}}const Qr={ProgressiveToSplatBuffer:0,ProgressiveToSplatArray:1,DownloadBeforeProcessing:2};function UY(n,e){let t=0;for(let r of n)t+=r.sizeBytes;(!e||e.byteLength<t)&&(e=new ArrayBuffer(t));let i=0;for(let r of n)new Uint8Array(e,i,r.sizeBytes).set(r.data),i+=r.sizeBytes;return e}function zY(n,e,t,i,r,s,a,o){return e?HA.getStandardGenerator(t,i,r,s,a,o).generateFromUncompressedSplatArray(n):Vn.generateFromUncompressedSplatArrays([n],t,0,new nt)}class IB{static loadFromURL(e,t,i,r,s,a,o=!0,l=0,c,u,d,f,h){let p;!i&&!o?p=Qr.DownloadBeforeProcessing:o?p=Qr.ProgressiveToSplatArray:p=Qr.ProgressiveToSplatBuffer;const m=Ji.ProgressiveLoadSectionSize,v=Vn.HeaderSizeBytes+Vn.SectionHeaderSizeBytes,g=1;let y,x,b,A,S,C=0,_=0,M=0,T=!1,E=!1,I=!1;const L=yB();let F=0,B=0,P=0,z=0,O="",N=null,H=[],q;const te=new TextDecoder,Q=(ee,de,J)=>{const ue=ee>=100;if(J&&(H.push({data:J,sizeBytes:J.byteLength,startBytes:P,endBytes:P+J.byteLength}),P+=J.byteLength),p===Qr.DownloadBeforeProcessing)ue&&L.resolve(H);else{if(T){if(y===po.PlayCanvasCompressed&&!E){const Te=N.headerSizeBytes+N.chunkElement.storageSizeBytes;S=UY(H,S),S.byteLength>=Te&&(Kd.readElementData(N.chunkElement,S,N.headerSizeBytes),F=Te,B=Te,E=!0)}}else if(O+=te.decode(J),Es.checkTextForEndHeader(O)){if(y=Es.determineHeaderFormatFromHeaderText(O),y===po.INRIAV1)N=cf.decodeHeaderText(O),l=Math.min(l,N.sphericalHarmonicsDegree),C=N.splatCount,E=!0,z=N.headerSizeBytes+N.bytesPerSplat*C;else if(y===po.PlayCanvasCompressed){if(N=Kd.decodeHeaderText(O),l=Math.min(l,N.sphericalHarmonicsDegree),p===Qr.ProgressiveToSplatBuffer&&l>0)throw new O4("PlyLoader.loadFromURL() -> Selected PLY format has spherical harmonics data that cannot be progressively loaded.");C=N.vertexElement.count,z=N.headerSizeBytes+N.bytesPerSplat*C+N.chunkElement.storageSizeBytes}else{if(p===Qr.ProgressiveToSplatBuffer)throw new O4("PlyLoader.loadFromURL() -> Selected PLY format cannot be progressively loaded.");p=Qr.DownloadBeforeProcessing;return}if(p===Qr.ProgressiveToSplatBuffer){const Te=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[l],De=v+Te.BytesPerSplat*C;b=new ArrayBuffer(De),Vn.writeHeaderToBuffer({versionMajor:Vn.CurrentMajorVersion,versionMinor:Vn.CurrentMinorVersion,maxSectionCount:g,sectionCount:g,maxSplatCount:C,splatCount:0,compressionLevel:0,sceneCenter:new nt},b)}else q=new gn(l);F=N.headerSizeBytes,B=N.headerSizeBytes,T=!0}if(T&&E&&H.length>0&&(x=UY(H,x),P-F>m||P>=z&&!I||ue)){const De=I?N.sphericalHarmonicsPerSplat:N.bytesPerSplat,Ne=(I?P:Math.min(z,P))-B,Y=Math.floor(Ne/De),oe=Y*De,ne=P-B-oe,Xe=B-H[0].startBytes,ke=new DataView(x,Xe,oe);if(I)y===po.PlayCanvasCompressed&&p===Qr.ProgressiveToSplatArray&&(Kd.parseSphericalHarmonicsToUncompressedSplatArraySection(N.chunkElement,N.shElement,M,M+Y-1,ke,0,l,N.sphericalHarmonicsDegree,q),M+=Y);else{if(p===Qr.ProgressiveToSplatBuffer){const Ge=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[l],He=_*Ge.BytesPerSplat+v;y===po.PlayCanvasCompressed?Kd.parseToUncompressedSplatBufferSection(N.chunkElement,N.vertexElement,0,Y-1,_,ke,b,He):cf.parseToUncompressedSplatBufferSection(N,0,Y-1,ke,0,b,He,l)}else y===po.PlayCanvasCompressed?Kd.parseToUncompressedSplatArraySection(N.chunkElement,N.vertexElement,0,Y-1,_,ke,q):cf.parseToUncompressedSplatArraySection(N,0,Y-1,ke,0,q,l);_+=Y,p===Qr.ProgressiveToSplatBuffer&&(A||(Vn.writeSectionHeaderToBuffer({maxSplatCount:C,splatCount:_,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:l},0,b,Vn.HeaderSizeBytes),A=new Vn(b,!1)),A.updateLoadedCounts(1,_)),P>=z&&(I=!0)}if(ne===0)H=[];else{let Ge=[],He=0;for(let qe=H.length-1;qe>=0;qe--){const tt=H[qe];if(He+=tt.sizeBytes,Ge.unshift(tt),He>=ne)break}H=Ge}F+=m,B+=oe}r&&A&&r(A,ue),ue&&(p===Qr.ProgressiveToSplatBuffer?L.resolve(A):L.resolve(q))}t&&t(ee,de,Is.Downloading)};return t&&t(0,"0%",Is.Downloading),wT(e,Q,!1,c).then(()=>(t&&t(0,"0%",Is.Processing),L.promise.then(ee=>{if(t&&t(100,"100%",Is.Done),p===Qr.DownloadBeforeProcessing){const de=H.map(J=>J.data);return new Blob(de).arrayBuffer().then(J=>IB.loadFromFileData(J,s,a,o,l,u,d,f,h))}else return p===Qr.ProgressiveToSplatBuffer?ee:Al(()=>zY(ee,o,s,a,u,d,f,h))})))}static loadFromFileData(e,t,i,r,s=0,a,o,l,c){return r?Al(()=>OY.parseToUncompressedSplatArray(e,s)).then(u=>zY(u,r,t,i,a,o,l,c)):Al(()=>OY.parseToUncompressedSplatBuffer(e,s))}}const Jot=n=>new ReadableStream({async start(e){e.enqueue(n),e.close()}});async function elt(n){try{const e=Jot(n);if(!e)throw new Error("Failed to create stream from data");return await tlt(e)}catch(e){throw console.error("Error decompressing gzipped data:",e),e}}async function tlt(n){const e=n.pipeThrough(new DecompressionStream("gzip")),i=await new Response(e).arrayBuffer();return new Uint8Array(i)}const nlt=1347635022,ilt=1,rlt=.15;function slt(n){const e=n>>15&1,t=n>>10&31,i=n&1023,r=e===1?-1:1;return t===0?r*Math.pow(2,-14)*i/1024:t===31?i!==0?NaN:r*(1/0):r*Math.pow(2,t-15)*(1+i/1024)}function alt(n){return(n-128)/128}function G0(n){switch(n){case 0:return 0;case 1:return 3;case 2:return 8;case 3:return 15;default:return console.error(`[SPZ: ERROR] Unsupported SH degree: ${n}`),0}}const olt=function(){let n=[];const e=new ds,t=gn.OFFSET.X,i=gn.OFFSET.Y,r=gn.OFFSET.Z,s=gn.OFFSET.SCALE0,a=gn.OFFSET.SCALE1,o=gn.OFFSET.SCALE2,l=gn.OFFSET.ROTATION0,c=gn.OFFSET.ROTATION1,u=gn.OFFSET.ROTATION2,d=gn.OFFSET.ROTATION3,f=gn.OFFSET.FDC0,h=gn.OFFSET.FDC1,p=gn.OFFSET.FDC2,m=gn.OFFSET.OPACITY,v=[G0(0),G0(1),G0(2),G0(3)],g=[0,1,2,9,10,11,12,13,24,25,26,27,28,29,30,3,4,5,14,15,16,17,18,31,32,33,34,35,36,37,6,7,8,19,20,21,22,23,38,39,40,41,42,43,44];return function(y,x,b){b=Math.min(x,b);const A=gn.createSplat(b);y.scale[0]!==void 0?(A[s]=y.scale[0],A[a]=y.scale[1],A[o]=y.scale[2]):(A[s]=.01,A[a]=.01,A[o]=.01),y.color[0]!==void 0?(A[f]=y.color[0],A[h]=y.color[1],A[p]=y.color[2]):n[RED]!==void 0?(A[f]=n[RED]*255,A[h]=n[GREEN]*255,A[p]=n[BLUE]*255):(A[f]=0,A[h]=0,A[p]=0),y.alpha!==void 0&&(A[m]=y.alpha),A[f]=ls(Math.floor(A[f]),0,255),A[h]=ls(Math.floor(A[h]),0,255),A[p]=ls(Math.floor(A[p]),0,255),A[m]=ls(Math.floor(A[m]),0,255);let S=v[b],C=v[x];for(let _=0;_<3;++_)for(let M=0;M<15;++M){const T=g[_*15+M];M<S&&M<C&&(A[gn.OFFSET.FRC0+T]=y.sh[_*C+M])}return e.set(y.rotation[3],y.rotation[0],y.rotation[1],y.rotation[2]),e.normalize(),A[l]=e.x,A[c]=e.y,A[u]=e.z,A[d]=e.w,A[t]=y.position[0],A[i]=y.position[1],A[r]=y.position[2],A}}();function llt(n,e,t,i){return!(n.positions.length!==e*3*(i?2:3)||n.scales.length!==e*3||n.rotations.length!==e*3||n.alphas.length!==e||n.colors.length!==e*3||n.sh.length!==e*t*3)}function VY(n,e,t,i,r){e=Math.min(e,n.shDegree);const s=n.numPoints,a=G0(n.shDegree),o=n.positions.length===s*3*2;if(!llt(n,s,a,o))return null;const l={position:[],scale:[],rotation:[],alpha:void 0,color:[],sh:[]};let c;o&&(c=new Uint16Array(n.positions.buffer,n.positions.byteOffset,s*3));const u=1/(1<<n.fractionalBits),d=G0(n.shDegree),f=.28209479177387814;for(let h=0;h<s;h++){if(o)for(let y=0;y<3;y++)l.position[y]=slt(c[h*3+y]);else for(let y=0;y<3;y++){const x=h*9+y*3;let b=n.positions[x];b|=n.positions[x+1]<<8,b|=n.positions[x+2]<<16,b|=b&8388608?4278190080:0,l.position[y]=b*u}for(let y=0;y<3;y++)l.scale[y]=Math.exp(n.scales[h*3+y]/16-10);const p=n.rotations.subarray(h*3,h*3+3),m=[p[0]/127.5-1,p[1]/127.5-1,p[2]/127.5-1];l.rotation[0]=m[0],l.rotation[1]=m[1],l.rotation[2]=m[2];const v=m[0]*m[0]+m[1]*m[1]+m[2]*m[2];l.rotation[3]=Math.sqrt(Math.max(0,1-v)),l.alpha=Math.floor(n.alphas[h]);for(let y=0;y<3;y++)l.color[y]=Math.floor(((n.colors[h*3+y]/255-.5)/rlt*f+.5)*255);for(let y=0;y<3;y++)for(let x=0;x<d;x++)l.sh[y*d+x]=alt(n.sh[d*3*h+x*3+y]);const g=olt(l,n.shDegree,e);if(t){const y=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[e].BytesPerSplat,x=h*y+r;Vn.writeSplatDataToSectionBuffer(g,i,x,0,e)}else i.addSplat(g)}}const clt=16,ult=1e7;function dlt(n){const e=new DataView(n);let t=0;const i={magic:e.getUint32(t,!0),version:e.getUint32(t+4,!0),numPoints:e.getUint32(t+8,!0),shDegree:e.getUint8(t+12),fractionalBits:e.getUint8(t+13),flags:e.getUint8(t+14),reserved:e.getUint8(t+15)};if(t+=clt,i.magic!==nlt)return console.error("[SPZ ERROR] deserializePackedGaussians: header not found"),null;if(i.version<1||i.version>2)return console.error(`[SPZ ERROR] deserializePackedGaussians: version not supported: ${i.version}`),null;if(i.numPoints>ult)return console.error(`[SPZ ERROR] deserializePackedGaussians: Too many points: ${i.numPoints}`),null;if(i.shDegree>3)return console.error(`[SPZ ERROR] deserializePackedGaussians: Unsupported SH degree: ${i.shDegree}`),null;const r=i.numPoints,s=G0(i.shDegree),a=i.version===1,o={numPoints:r,shDegree:i.shDegree,fractionalBits:i.fractionalBits,antialiased:(i.flags&ilt)!==0,positions:new Uint8Array(r*3*(a?2:3)),scales:new Uint8Array(r*3),rotations:new Uint8Array(r*3),alphas:new Uint8Array(r),colors:new Uint8Array(r*3),sh:new Uint8Array(r*s*3)};try{const l=new Uint8Array(n);let c=o.positions.length,u=t;if(o.positions.set(l.slice(u,u+c)),u+=c,o.alphas.set(l.slice(u,u+o.alphas.length)),u+=o.alphas.length,o.colors.set(l.slice(u,u+o.colors.length)),u+=o.colors.length,o.scales.set(l.slice(u,u+o.scales.length)),u+=o.scales.length,o.rotations.set(l.slice(u,u+o.rotations.length)),u+=o.rotations.length,o.sh.set(l.slice(u,u+o.sh.length)),u+o.sh.length!==n.byteLength)return console.error("[SPZ ERROR] deserializePackedGaussians: incorrect buffer size"),null}catch(l){return console.error("[SPZ ERROR] deserializePackedGaussians: read error",l),null}return o}async function flt(n){try{const e=await elt(n);return dlt(e.buffer)}catch(e){return console.error("[SPZ ERROR] loadSpzPacked: decompression error",e),null}}class DB{static loadFromURL(e,t,i,r,s=!0,a=0,o,l,c,u,d){return t&&t(0,"0%",Is.Downloading),wT(e,t,!0,o).then(f=>(t&&t(0,"0%",Is.Processing),DB.loadFromFileData(f,i,r,s,a,l,c,u,d)))}static async loadFromFileData(e,t,i,r,s=0,a,o,l,c){await Al();const u=await flt(e);s=Math.min(u.shDegree,s);const d=new gn(s);if(r)return VY(u,s,!1,d,0),HA.getStandardGenerator(t,i,a,o,l,c).generateFromUncompressedSplatArray(d);{const{splatBuffer:f,splatBufferDataOffsetBytes:h}=Vn.preallocateUncompressed(u.numPoints,s);return VY(u,s,!0,f.bufferData,h),f}}}const Ir=class Ir{static parseToUncompressedSplatBufferSection(e,t,i,r,s,a){const o=Vn.CompressionLevels[0].BytesPerCenter,l=Vn.CompressionLevels[0].BytesPerScale,c=Vn.CompressionLevels[0].BytesPerRotation,u=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat;for(let d=e;d<=t;d++){const f=d*Ir.RowSizeBytes+r,h=new Float32Array(i,f,3),p=new Float32Array(i,f+Ir.CenterSizeBytes,3),m=new Uint8Array(i,f+Ir.CenterSizeBytes+Ir.ScaleSizeBytes,4),v=new Uint8Array(i,f+Ir.CenterSizeBytes+Ir.ScaleSizeBytes+Ir.RotationSizeBytes,4),g=new ds((v[1]-128)/128,(v[2]-128)/128,(v[3]-128)/128,(v[0]-128)/128);g.normalize();const y=d*u+a,x=new Float32Array(s,y,3),b=new Float32Array(s,y+o,3),A=new Float32Array(s,y+o+l,4),S=new Uint8Array(s,y+o+l+c,4);x[0]=h[0],x[1]=h[1],x[2]=h[2],b[0]=p[0],b[1]=p[1],b[2]=p[2],A[0]=g.w,A[1]=g.x,A[2]=g.y,A[3]=g.z,S[0]=m[0],S[1]=m[1],S[2]=m[2],S[3]=m[3]}}static parseToUncompressedSplatArraySection(e,t,i,r,s){for(let a=e;a<=t;a++){const o=a*Ir.RowSizeBytes+r,l=new Float32Array(i,o,3),c=new Float32Array(i,o+Ir.CenterSizeBytes,3),u=new Uint8Array(i,o+Ir.CenterSizeBytes+Ir.ScaleSizeBytes,4),d=new Uint8Array(i,o+Ir.CenterSizeBytes+Ir.ScaleSizeBytes+Ir.RotationSizeBytes,4),f=new ds((d[1]-128)/128,(d[2]-128)/128,(d[3]-128)/128,(d[0]-128)/128);f.normalize(),s.addSplatFromComonents(l[0],l[1],l[2],c[0],c[1],c[2],f.w,f.x,f.y,f.z,u[0],u[1],u[2],u[3])}}static parseStandardSplatToUncompressedSplatArray(e){const t=e.byteLength/Ir.RowSizeBytes,i=new gn;for(let r=0;r<t;r++){const s=r*Ir.RowSizeBytes,a=new Float32Array(e,s,3),o=new Float32Array(e,s+Ir.CenterSizeBytes,3),l=new Uint8Array(e,s+Ir.CenterSizeBytes+Ir.ScaleSizeBytes,4),c=new Uint8Array(e,s+Ir.CenterSizeBytes+Ir.ScaleSizeBytes+Ir.ColorSizeBytes,4),u=new ds((c[1]-128)/128,(c[2]-128)/128,(c[3]-128)/128,(c[0]-128)/128);u.normalize(),i.addSplatFromComonents(a[0],a[1],a[2],o[0],o[1],o[2],u.w,u.x,u.y,u.z,l[0],l[1],l[2],l[3])}return i}};at(Ir,"RowSizeBytes",32),at(Ir,"CenterSizeBytes",12),at(Ir,"ScaleSizeBytes",12),at(Ir,"RotationSizeBytes",4),at(Ir,"ColorSizeBytes",4);let T0=Ir;function HY(n,e,t,i,r,s,a,o){return e?HA.getStandardGenerator(t,i,r,s,a,o).generateFromUncompressedSplatArray(n):Vn.generateFromUncompressedSplatArrays([n],t,0,new nt)}class RB{static loadFromURL(e,t,i,r,s,a,o=!0,l,c,u,d,f){let h=i?Qr.ProgressiveToSplatBuffer:Qr.ProgressiveToSplatArray;o&&(h=Qr.ProgressiveToSplatArray);const p=Vn.HeaderSizeBytes+Vn.SectionHeaderSizeBytes,m=Ji.ProgressiveLoadSectionSize,v=1;let g,y,x,b=0,A=0,S;const C=yB();let _=0,M=0,T=[];const E=(I,L,F,B)=>{const P=I>=100;if(F&&T.push(F),h===Qr.DownloadBeforeProcessing){P&&C.resolve(T);return}if(!B){if(i)throw new O4("Cannon directly load .splat because no file size info is available.");h=Qr.DownloadBeforeProcessing;return}if(!g){b=B/T0.RowSizeBytes,g=new ArrayBuffer(B);const z=Vn.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,O=p+z*b;h===Qr.ProgressiveToSplatBuffer?(y=new ArrayBuffer(O),Vn.writeHeaderToBuffer({versionMajor:Vn.CurrentMajorVersion,versionMinor:Vn.CurrentMinorVersion,maxSectionCount:v,sectionCount:v,maxSplatCount:b,splatCount:A,compressionLevel:0,sceneCenter:new nt},y)):S=new gn(0)}if(F){new Uint8Array(g,M,F.byteLength).set(new Uint8Array(F)),M+=F.byteLength;const z=M-_;if(z>m||P){const N=(P?z:m)/T0.RowSizeBytes,H=A+N;h===Qr.ProgressiveToSplatBuffer?T0.parseToUncompressedSplatBufferSection(A,H-1,g,0,y,p):T0.parseToUncompressedSplatArraySection(A,H-1,g,0,S),A=H,h===Qr.ProgressiveToSplatBuffer&&(x||(Vn.writeSectionHeaderToBuffer({maxSplatCount:b,splatCount:A,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0},0,y,Vn.HeaderSizeBytes),x=new Vn(y,!1)),x.updateLoadedCounts(1,A),r&&r(x,P)),_+=m}}P&&(h===Qr.ProgressiveToSplatBuffer?C.resolve(x):C.resolve(S)),t&&t(I,L,Is.Downloading)};return t&&t(0,"0%",Is.Downloading),wT(e,E,!1,l).then(()=>(t&&t(0,"0%",Is.Processing),C.promise.then(I=>(t&&t(100,"100%",Is.Done),h===Qr.DownloadBeforeProcessing?new Blob(T).arrayBuffer().then(L=>RB.loadFromFileData(L,s,a,o,c,u,d,f)):h===Qr.ProgressiveToSplatBuffer?I:Al(()=>HY(I,o,s,a,c,u,d,f))))))}static loadFromFileData(e,t,i,r,s,a,o,l){return Al(()=>{const c=T0.parseStandardSplatToUncompressedSplatArray(e);return HY(c,r,t,i,s,a,o,l)})}}const Fg=class Fg{static checkVersion(e){const t=Vn.CurrentMajorVersion,i=Vn.CurrentMinorVersion,r=Vn.parseHeader(e);if(r.versionMajor===t&&r.versionMinor>=i||r.versionMajor>t)return!0;throw new Error(`KSplat version not supported: v${r.versionMajor}.${r.versionMinor}. Minimum required: v${t}.${i}`)}static loadFromURL(e,t,i,r,s){let a,o,l,c,u=!1,d=!1,f,h=[],p=!1,m=!1,v=0,g=0,y=0,x=!1,b=!1,A=!1,S=[];const C=yB(),_=()=>{!u&&!d&&v>=Vn.HeaderSizeBytes&&(d=!0,new Blob(S).arrayBuffer().then(B=>{l=new ArrayBuffer(Vn.HeaderSizeBytes),new Uint8Array(l).set(new Uint8Array(B,0,Vn.HeaderSizeBytes)),Fg.checkVersion(l),d=!1,u=!0,c=Vn.parseHeader(l),window.setTimeout(()=>{E()},1)}))};let M=0;const T=()=>{M===0&&(M++,window.setTimeout(()=>{M--,I()},1))},E=()=>{const F=()=>{m=!0,new Blob(S).arrayBuffer().then(P=>{m=!1,p=!0,f=new ArrayBuffer(c.maxSectionCount*Vn.SectionHeaderSizeBytes),new Uint8Array(f).set(new Uint8Array(P,Vn.HeaderSizeBytes,c.maxSectionCount*Vn.SectionHeaderSizeBytes)),h=Vn.parseSectionHeaders(c,f,0,!1);let z=0;for(let N=0;N<c.maxSectionCount;N++)z+=h[N].storageSizeBytes;const O=Vn.HeaderSizeBytes+c.maxSectionCount*Vn.SectionHeaderSizeBytes+z;if(!a){a=new ArrayBuffer(O);let N=0;for(let H=0;H<S.length;H++){const q=S[H];new Uint8Array(a,N,q.byteLength).set(new Uint8Array(q)),N+=q.byteLength}}y=Vn.HeaderSizeBytes+Vn.SectionHeaderSizeBytes*c.maxSectionCount;for(let N=0;N<=h.length&&N<c.maxSectionCount;N++)y+=h[N].storageSizeBytes;T()})};!m&&!p&&u&&v>=Vn.HeaderSizeBytes+Vn.SectionHeaderSizeBytes*c.maxSectionCount&&F()},I=()=>{if(A)return;A=!0;const F=()=>{if(A=!1,p){if(b)return;if(x=v>=y,v-g>Ji.ProgressiveLoadSectionSize||x){g+=Ji.ProgressiveLoadSectionSize,b=g>=y,o||(o=new Vn(a,!1));const P=Vn.HeaderSizeBytes+Vn.SectionHeaderSizeBytes*c.maxSectionCount;let z=0,O=0,N=0;for(let te=0;te<c.maxSectionCount;te++){const Q=h[te],ee=z+Q.partiallyFilledBucketCount*4+Q.bucketStorageSizeBytes*Q.bucketCount,de=P+ee;if(g>=de){O++;const J=g-de,De=Vn.CompressionLevels[c.compressionLevel].SphericalHarmonicsDegrees[Q.sphericalHarmonicsDegree].BytesPerSplat;let Le=Math.floor(J/De);Le=Math.min(Le,Q.maxSplatCount),N+=Le,o.updateLoadedCounts(O,N),o.updateSectionLoadedCounts(te,Le)}else break;z+=Q.storageSizeBytes}r(o,b);const H=g/y*100,q=H.toFixed(2)+"%";t&&t(H,q,Is.Downloading),b?C.resolve(o):I()}}};window.setTimeout(F,Ji.ProgressiveLoadSectionDelayDuration)};return wT(e,(F,B,P)=>{P&&(S.push(P),a&&new Uint8Array(a,v,P.byteLength).set(new Uint8Array(P)),v+=P.byteLength),i?(_(),E(),I()):t&&t(F,B,Is.Downloading)},!i,s).then(F=>(t&&t(0,"0%",Is.Processing),(i?C.promise:Fg.loadFromFileData(F)).then(P=>(t&&t(100,"100%",Is.Done),P))))}static loadFromFileData(e){return Al(()=>(Fg.checkVersion(e),new Vn(e)))}};at(Fg,"downloadFile",function(){let e;return function(t,i){const r=new Blob([t.bufferData],{type:"application/octet-stream"});e||(e=document.createElement("a"),document.body.appendChild(e)),e.download=i,e.href=URL.createObjectURL(r),e.click()}}());let tL=Fg;const Oo={Splat:0,KSplat:1,Ply:2,Spz:3},GY=n=>n.endsWith(".ply")?Oo.Ply:n.endsWith(".splat")?Oo.Splat:n.endsWith(".ksplat")?Oo.KSplat:n.endsWith(".spz")?Oo.Spz:null,WY={type:"change"},GI={type:"start"},qY={type:"end"},_3=new Kae,KY=new _h,hlt=Math.cos(70*Gae.DEG2RAD);class C3 extends Um{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new nt,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"KeyA",UP:"KeyW",RIGHT:"KeyD",BOTTOM:"KeyS"},this.mouseButtons={LEFT:kv.ROTATE,MIDDLE:kv.DOLLY,RIGHT:kv.PAN},this.touches={ONE:Fv.ROTATE,TWO:Fv.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function($){$.addEventListener("keydown",ge),this._domElementKeyEvents=$},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ge),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,this.clearDampedRotation(),this.clearDampedPan(),i.object.updateProjectionMatrix(),i.dispatchEvent(WY),i.update(),s=r.NONE},this.clearDampedRotation=function(){l.theta=0,l.phi=0},this.clearDampedPan=function(){u.set(0,0,0)},this.update=function(){const $=new nt,le=new ds().setFromUnitVectors(e.up,new nt(0,1,0)),fe=le.clone().invert(),Me=new nt,me=new ds,Ae=new nt,dt=2*Math.PI;return function(){le.setFromUnitVectors(e.up,new nt(0,1,0)),fe.copy(le).invert();const _t=i.object.position;$.copy(_t).sub(i.target),$.applyQuaternion(le),o.setFromVector3($),i.autoRotate&&s===r.NONE&&E(M()),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let it=i.minAzimuthAngle,wt=i.maxAzimuthAngle;isFinite(it)&&isFinite(wt)&&(it<-Math.PI?it+=dt:it>Math.PI&&(it-=dt),wt<-Math.PI?wt+=dt:wt>Math.PI&&(wt-=dt),it<=wt?o.theta=Math.max(it,Math.min(wt,o.theta)):o.theta=o.theta>(it+wt)/2?Math.max(it,o.theta):Math.min(wt,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.zoomToCursor&&S||i.object.isOrthographicCamera?o.radius=N(o.radius):o.radius=N(o.radius*c),$.setFromSpherical(o),$.applyQuaternion(fe),_t.copy(i.target).add($),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let Ft=!1;if(i.zoomToCursor&&S){let Rt=null;if(i.object.isPerspectiveCamera){const Wt=$.length();Rt=N(Wt*c);const hn=Wt-Rt;i.object.position.addScaledVector(b,hn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Wt=new nt(A.x,A.y,0);Wt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),Ft=!0;const hn=new nt(A.x,A.y,0);hn.unproject(i.object),i.object.position.sub(hn).add(Wt),i.object.updateMatrixWorld(),Rt=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Rt!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Rt).add(i.object.position):(_3.origin.copy(i.object.position),_3.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(_3.direction))<hlt?e.lookAt(i.target):(KY.setFromNormalAndCoplanarPoint(i.object.up,i.target),_3.intersectPlane(KY,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),Ft=!0);return c=1,S=!1,Ft||Me.distanceToSquared(i.object.position)>a||8*(1-me.dot(i.object.quaternion))>a||Ae.distanceToSquared(i.target)>0?(i.dispatchEvent(WY),Me.copy(i.object.position),me.copy(i.object.quaternion),Ae.copy(i.target),Ft=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",bt),i.domElement.removeEventListener("pointerdown",He),i.domElement.removeEventListener("pointercancel",tt),i.domElement.removeEventListener("wheel",Z),i.domElement.removeEventListener("pointermove",qe),i.domElement.removeEventListener("pointerup",tt),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",ge),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new JK,l=new JK;let c=1;const u=new nt,d=new Yn,f=new Yn,h=new Yn,p=new Yn,m=new Yn,v=new Yn,g=new Yn,y=new Yn,x=new Yn,b=new nt,A=new Yn;let S=!1;const C=[],_={};function M(){return 2*Math.PI/60/60*i.autoRotateSpeed}function T(){return Math.pow(.95,i.zoomSpeed)}function E($){l.theta-=$}function I($){l.phi-=$}const L=function(){const $=new nt;return function(fe,Me){$.setFromMatrixColumn(Me,0),$.multiplyScalar(-fe),u.add($)}}(),F=function(){const $=new nt;return function(fe,Me){i.screenSpacePanning===!0?$.setFromMatrixColumn(Me,1):($.setFromMatrixColumn(Me,0),$.crossVectors(i.object.up,$)),$.multiplyScalar(fe),u.add($)}}(),B=function(){const $=new nt;return function(fe,Me){const me=i.domElement;if(i.object.isPerspectiveCamera){const Ae=i.object.position;$.copy(Ae).sub(i.target);let dt=$.length();dt*=Math.tan(i.object.fov/2*Math.PI/180),L(2*fe*dt/me.clientHeight,i.object.matrix),F(2*Me*dt/me.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(L(fe*(i.object.right-i.object.left)/i.object.zoom/me.clientWidth,i.object.matrix),F(Me*(i.object.top-i.object.bottom)/i.object.zoom/me.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function P($){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z($){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O($){if(!i.zoomToCursor)return;S=!0;const le=i.domElement.getBoundingClientRect(),fe=$.clientX-le.left,Me=$.clientY-le.top,me=le.width,Ae=le.height;A.x=fe/me*2-1,A.y=-(Me/Ae)*2+1,b.set(A.x,A.y,1).unproject(e).sub(e.position).normalize()}function N($){return Math.max(i.minDistance,Math.min(i.maxDistance,$))}function H($){d.set($.clientX,$.clientY)}function q($){O($),g.set($.clientX,$.clientY)}function te($){p.set($.clientX,$.clientY)}function Q($){f.set($.clientX,$.clientY),h.subVectors(f,d).multiplyScalar(i.rotateSpeed);const le=i.domElement;E(2*Math.PI*h.x/le.clientHeight),I(2*Math.PI*h.y/le.clientHeight),d.copy(f),i.update()}function ee($){y.set($.clientX,$.clientY),x.subVectors(y,g),x.y>0?P(T()):x.y<0&&z(T()),g.copy(y),i.update()}function de($){m.set($.clientX,$.clientY),v.subVectors(m,p).multiplyScalar(i.panSpeed),B(v.x,v.y),p.copy(m),i.update()}function J($){O($),$.deltaY<0?z(T()):$.deltaY>0&&P(T()),i.update()}function ue($){let le=!1;switch($.code){case i.keys.UP:$.ctrlKey||$.metaKey||$.shiftKey?I(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(0,i.keyPanSpeed),le=!0;break;case i.keys.BOTTOM:$.ctrlKey||$.metaKey||$.shiftKey?I(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(0,-i.keyPanSpeed),le=!0;break;case i.keys.LEFT:$.ctrlKey||$.metaKey||$.shiftKey?E(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(i.keyPanSpeed,0),le=!0;break;case i.keys.RIGHT:$.ctrlKey||$.metaKey||$.shiftKey?E(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):B(-i.keyPanSpeed,0),le=!0;break}le&&($.preventDefault(),i.update())}function Te(){if(C.length===1)d.set(C[0].pageX,C[0].pageY);else{const $=.5*(C[0].pageX+C[1].pageX),le=.5*(C[0].pageY+C[1].pageY);d.set($,le)}}function De(){if(C.length===1)p.set(C[0].pageX,C[0].pageY);else{const $=.5*(C[0].pageX+C[1].pageX),le=.5*(C[0].pageY+C[1].pageY);p.set($,le)}}function Le(){const $=C[0].pageX-C[1].pageX,le=C[0].pageY-C[1].pageY,fe=Math.sqrt($*$+le*le);g.set(0,fe)}function Ne(){i.enableZoom&&Le(),i.enablePan&&De()}function Y(){i.enableZoom&&Le(),i.enableRotate&&Te()}function oe($){if(C.length==1)f.set($.pageX,$.pageY);else{const fe=lt($),Me=.5*($.pageX+fe.x),me=.5*($.pageY+fe.y);f.set(Me,me)}h.subVectors(f,d).multiplyScalar(i.rotateSpeed);const le=i.domElement;E(2*Math.PI*h.x/le.clientHeight),I(2*Math.PI*h.y/le.clientHeight),d.copy(f)}function ne($){if(C.length===1)m.set($.pageX,$.pageY);else{const le=lt($),fe=.5*($.pageX+le.x),Me=.5*($.pageY+le.y);m.set(fe,Me)}v.subVectors(m,p).multiplyScalar(i.panSpeed),B(v.x,v.y),p.copy(m)}function Xe($){const le=lt($),fe=$.pageX-le.x,Me=$.pageY-le.y,me=Math.sqrt(fe*fe+Me*Me);y.set(0,me),x.set(0,Math.pow(y.y/g.y,i.zoomSpeed)),P(x.y),g.copy(y)}function ke($){i.enableZoom&&Xe($),i.enablePan&&ne($)}function Ge($){i.enableZoom&&Xe($),i.enableRotate&&oe($)}function He($){i.enabled!==!1&&(C.length===0&&(i.domElement.setPointerCapture($.pointerId),i.domElement.addEventListener("pointermove",qe),i.domElement.addEventListener("pointerup",tt)),At($),$.pointerType==="touch"?Oe($):pe($))}function qe($){i.enabled!==!1&&($.pointerType==="touch"?je($):G($))}function tt($){Ee($),C.length===0&&(i.domElement.releasePointerCapture($.pointerId),i.domElement.removeEventListener("pointermove",qe),i.domElement.removeEventListener("pointerup",tt)),i.dispatchEvent(qY),s=r.NONE}function pe($){let le;switch($.button){case 0:le=i.mouseButtons.LEFT;break;case 1:le=i.mouseButtons.MIDDLE;break;case 2:le=i.mouseButtons.RIGHT;break;default:le=-1}switch(le){case kv.DOLLY:if(i.enableZoom===!1)return;q($),s=r.DOLLY;break;case kv.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enablePan===!1)return;te($),s=r.PAN}else{if(i.enableRotate===!1)return;H($),s=r.ROTATE}break;case kv.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enableRotate===!1)return;H($),s=r.ROTATE}else{if(i.enablePan===!1)return;te($),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(GI)}function G($){switch(s){case r.ROTATE:if(i.enableRotate===!1)return;Q($);break;case r.DOLLY:if(i.enableZoom===!1)return;ee($);break;case r.PAN:if(i.enablePan===!1)return;de($);break}}function Z($){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||($.preventDefault(),i.dispatchEvent(GI),J($),i.dispatchEvent(qY))}function ge($){i.enabled===!1||i.enablePan===!1||ue($)}function Oe($){switch(gt($),C.length){case 1:switch(i.touches.ONE){case Fv.ROTATE:if(i.enableRotate===!1)return;Te(),s=r.TOUCH_ROTATE;break;case Fv.PAN:if(i.enablePan===!1)return;De(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case Fv.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ne(),s=r.TOUCH_DOLLY_PAN;break;case Fv.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Y(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(GI)}function je($){switch(gt($),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;oe($),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;ne($),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ke($),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ge($),i.update();break;default:s=r.NONE}}function bt($){i.enabled!==!1&&$.preventDefault()}function At($){C.push($)}function Ee($){delete _[$.pointerId];for(let le=0;le<C.length;le++)if(C[le].pointerId==$.pointerId){C.splice(le,1);return}}function gt($){let le=_[$.pointerId];le===void 0&&(le=new Yn,_[$.pointerId]=le),le.set($.pageX,$.pageY)}function lt($){const le=$.pointerId===C[0].pointerId?C[1]:C[0];return _[le.pointerId]}i.domElement.addEventListener("contextmenu",bt),i.domElement.addEventListener("pointerdown",He),i.domElement.addEventListener("pointercancel",tt),i.domElement.addEventListener("wheel",Z,{passive:!1}),this.update()}}const plt=(n,e,t,i,r)=>{const s=performance.now();let a=n.style.display==="none"?0:parseFloat(n.style.opacity);isNaN(a)&&(a=1);const o=window.setInterval(()=>{const c=performance.now()-s;let u=Math.min(c/i,1);u>.999&&(u=1);let d;e?(d=(1-u)*a,d<1e-4&&(d=0)):d=(1-a)*u+a,d>0?(n.style.display=t,n.style.opacity=d):n.style.display="none",u>=1&&(r&&r(),window.clearInterval(o))},16);return o},mlt=500,G4=class G4{constructor(e,t){this.taskIDGen=0,this.elementID=G4.elementIDGen++,this.tasks=[],this.message=e||"Loading...",this.container=t||document.body,this.spinnerContainerOuter=document.createElement("div"),this.spinnerContainerOuter.className=`spinnerOuterContainer${this.elementID}`,this.spinnerContainerOuter.style.display="none",this.spinnerContainerPrimary=document.createElement("div"),this.spinnerContainerPrimary.className=`spinnerContainerPrimary${this.elementID}`,this.spinnerPrimary=document.createElement("div"),this.spinnerPrimary.classList.add(`spinner${this.elementID}`,`spinnerPrimary${this.elementID}`),this.messageContainerPrimary=document.createElement("div"),this.messageContainerPrimary.classList.add(`messageContainer${this.elementID}`,`messageContainerPrimary${this.elementID}`),this.messageContainerPrimary.innerHTML=this.message,this.spinnerContainerMin=document.createElement("div"),this.spinnerContainerMin.className=`spinnerContainerMin${this.elementID}`,this.spinnerMin=document.createElement("div"),this.spinnerMin.classList.add(`spinner${this.elementID}`,`spinnerMin${this.elementID}`),this.messageContainerMin=document.createElement("div"),this.messageContainerMin.classList.add(`messageContainer${this.elementID}`,`messageContainerMin${this.elementID}`),this.messageContainerMin.innerHTML=this.message,this.spinnerContainerPrimary.appendChild(this.spinnerPrimary),this.spinnerContainerPrimary.appendChild(this.messageContainerPrimary),this.spinnerContainerOuter.appendChild(this.spinnerContainerPrimary),this.spinnerContainerMin.appendChild(this.spinnerMin),this.spinnerContainerMin.appendChild(this.messageContainerMin),this.spinnerContainerOuter.appendChild(this.spinnerContainerMin);const i=document.createElement("style");i.innerHTML=`

            .spinnerOuterContainer${this.elementID} {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .messageContainer${this.elementID} {
                height: 20px;
                font-family: arial;
                font-size: 12pt;
                color: #ffffff;
                text-align: center;
                vertical-align: middle;
            }

            .spinner${this.elementID} {
                padding: 15px;
                background: #07e8d6;
                z-index:99999;
            
                aspect-ratio: 1;
                border-radius: 50%;
                --_m: 
                    conic-gradient(#0000,#000),
                    linear-gradient(#000 0 0) content-box;
                -webkit-mask: var(--_m);
                    mask: var(--_m);
                -webkit-mask-composite: source-out;
                    mask-composite: subtract;
                box-sizing: border-box;
                animation: load 1s linear infinite;
            }

            .spinnerContainerPrimary${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 10px;
                margin: 0;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-80px, -80px);
                width: 180px;
                pointer-events: auto;
            }

            .spinnerPrimary${this.elementID} {
                width: 120px;
                margin-left: 30px;
            }

            .messageContainerPrimary${this.elementID} {
                padding-top: 15px;
            }

            .spinnerContainerMin${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                display: flex;
                flex-direction: left;
                pointer-events: auto;
                min-width: 250px;
            }

            .messageContainerMin${this.elementID} {
                margin-right: 15px;
            }

            .spinnerMin${this.elementID} {
                width: 50px;
                height: 50px;
                margin-left: 15px;
                margin-right: 25px;
            }

            .messageContainerMin${this.elementID} {
                padding-top: 15px;
            }
            
            @keyframes load {
                to{transform: rotate(1turn)}
            }

        `,this.spinnerContainerOuter.appendChild(i),this.container.appendChild(this.spinnerContainerOuter),this.setMinimized(!1,!0),this.fadeTransitions=[]}addTask(e){const t={message:e,id:this.taskIDGen++};return this.tasks.push(t),this.update(),t.id}removeTask(e){let t=0;for(let i of this.tasks){if(i.id===e){this.tasks.splice(t,1);break}t++}this.update()}removeAllTasks(){this.tasks=[],this.update()}setMessageForTask(e,t){for(let i of this.tasks)if(i.id===e){i.message=t;break}this.update()}update(){this.tasks.length>0?(this.show(),this.setMessage(this.tasks[this.tasks.length-1].message)):this.hide()}show(){this.spinnerContainerOuter.style.display="block",this.visible=!0}hide(){this.spinnerContainerOuter.style.display="none",this.visible=!1}setContainer(e){this.container&&this.spinnerContainerOuter.parentElement===this.container&&this.container.removeChild(this.spinnerContainerOuter),e&&(this.container=e,this.container.appendChild(this.spinnerContainerOuter),this.spinnerContainerOuter.style.zIndex=this.container.style.zIndex+1)}setMinimized(e,t){const i=(r,s,a,o,l)=>{a?r.style.display=s?o:"none":this.fadeTransitions[l]=plt(r,!s,o,mlt,()=>{this.fadeTransitions[l]=null})};i(this.spinnerContainerPrimary,!e,t,"block",0),i(this.spinnerContainerMin,e,t,"flex",1),this.minimized=e}setMessage(e){this.messageContainerPrimary.innerHTML=e,this.messageContainerMin.innerHTML=e}};at(G4,"elementIDGen",0);let nL=G4;class vlt{constructor(e){this.idGen=0,this.tasks=[],this.container=e||document.body,this.progressBarContainerOuter=document.createElement("div"),this.progressBarContainerOuter.className="progressBarOuterContainer",this.progressBarContainerOuter.style.display="none",this.progressBarBox=document.createElement("div"),this.progressBarBox.className="progressBarBox",this.progressBarBackground=document.createElement("div"),this.progressBarBackground.className="progressBarBackground",this.progressBar=document.createElement("div"),this.progressBar.className="progressBar",this.progressBarBackground.appendChild(this.progressBar),this.progressBarBox.appendChild(this.progressBarBackground),this.progressBarContainerOuter.appendChild(this.progressBarBox);const t=document.createElement("style");t.innerHTML=`

            .progressBarOuterContainer {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .progressBarBox {
                z-index:99999;
                padding: 7px 9px 5px 7px;
                background-color: rgba(190, 190, 190, 0.75);
                border: #555555 1px solid;
                border-radius: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                width: 180px;
                height: 30px;
                pointer-events: auto;
            }

            .progressBarBackground {
                width: 100%;
                height: 25px;
                border-radius:10px;
                background-color: rgba(128, 128, 128, 0.75);
                border: #444444 1px solid;
                box-shadow: inset 0 0 10px #333333;
            }

            .progressBar {
                height: 25px;
                width: 0px;
                border-radius:10px;
                background-color: rgba(0, 200, 0, 0.75);
                box-shadow: inset 0 0 10px #003300;
            }

        `,this.progressBarContainerOuter.appendChild(t),this.container.appendChild(this.progressBarContainerOuter)}show(){this.progressBarContainerOuter.style.display="block"}hide(){this.progressBarContainerOuter.style.display="none"}setProgress(e){this.progressBar.style.width=e+"%"}setContainer(e){this.container&&this.progressBarContainerOuter.parentElement===this.container&&this.container.removeChild(this.progressBarContainerOuter),e&&(this.container=e,this.container.appendChild(this.progressBarContainerOuter),this.progressBarContainerOuter.style.zIndex=this.container.style.zIndex+1)}}class glt{constructor(e){at(this,"update",function(e,t,i,r,s,a,o,l,c,u,d,f,h,p){const m=`${t.x.toFixed(5)}, ${t.y.toFixed(5)}, ${t.z.toFixed(5)}`;if(this.infoCells.cameraPosition.innerHTML!==m&&(this.infoCells.cameraPosition.innerHTML=m),i){const g=i,y=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cameraLookAt.innerHTML!==y&&(this.infoCells.cameraLookAt.innerHTML=y)}const v=`${r.x.toFixed(5)}, ${r.y.toFixed(5)}, ${r.z.toFixed(5)}`;if(this.infoCells.cameraUp.innerHTML!==v&&(this.infoCells.cameraUp.innerHTML=v),this.infoCells.orthographicCamera.innerHTML=s?"Orthographic":"Perspective",a){const g=a,y=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cursorPosition.innerHTML=y}else this.infoCells.cursorPosition.innerHTML="N/A";this.infoCells.fps.innerHTML=o,this.infoCells.renderWindow.innerHTML=`${e.x} x ${e.y}`,this.infoCells.renderSplatCount.innerHTML=`${c} splats out of ${l} (${u.toFixed(2)}%)`,this.infoCells.sortTime.innerHTML=`${d.toFixed(3)} ms`,this.infoCells.focalAdjustment.innerHTML=`${f.toFixed(3)}`,this.infoCells.splatScale.innerHTML=`${h.toFixed(3)}`,this.infoCells.pointCloudMode.innerHTML=`${p}`});this.container=e||document.body,this.infoCells={};const t=[["Camera position","cameraPosition"],["Camera look-at","cameraLookAt"],["Camera up","cameraUp"],["Camera mode","orthographicCamera"],["Cursor position","cursorPosition"],["FPS","fps"],["Rendering:","renderSplatCount"],["Sort time","sortTime"],["Render window","renderWindow"],["Focal adjustment","focalAdjustment"],["Splat scale","splatScale"],["Point cloud mode","pointCloudMode"]];this.infoPanelContainer=document.createElement("div");const i=document.createElement("style");i.innerHTML=`

            .infoPanel {
                width: 430px;
                padding: 10px;
                background-color: rgba(50, 50, 50, 0.85);
                border: #555555 2px solid;
                color: #dddddd;
                border-radius: 10px;
                z-index: 9999;
                font-family: arial;
                font-size: 11pt;
                text-align: left;
                margin: 0;
                top: 10px;
                left:10px;
                position: absolute;
                pointer-events: auto;
            }

            .info-panel-cell {
                margin-bottom: 5px;
                padding-bottom: 2px;
            }

            .label-cell {
                font-weight: bold;
                font-size: 12pt;
                width: 140px;
            }

        `,this.infoPanelContainer.append(i),this.infoPanel=document.createElement("div"),this.infoPanel.className="infoPanel";const r=document.createElement("div");r.style.display="table";for(let s of t){const a=document.createElement("div");a.style.display="table-row",a.className="info-panel-row";const o=document.createElement("div");o.style.display="table-cell",o.innerHTML=`${s[0]}: `,o.classList.add("info-panel-cell","label-cell");const l=document.createElement("div");l.style.display="table-cell",l.style.width="10px",l.innerHTML=" ",l.className="info-panel-cell";const c=document.createElement("div");c.style.display="table-cell",c.innerHTML="",c.className="info-panel-cell",this.infoCells[s[1]]=c,a.appendChild(o),a.appendChild(l),a.appendChild(c),r.appendChild(a)}this.infoPanel.appendChild(r),this.infoPanelContainer.append(this.infoPanel),this.infoPanelContainer.style.display="none",this.container.appendChild(this.infoPanelContainer),this.visible=!1}setContainer(e){this.container&&this.infoPanelContainer.parentElement===this.container&&this.container.removeChild(this.infoPanelContainer),e&&(this.container=e,this.container.appendChild(this.infoPanelContainer),this.infoPanelContainer.style.zIndex=this.container.style.zIndex+1)}show(){this.infoPanelContainer.style.display="block",this.visible=!0}hide(){this.infoPanelContainer.style.display="none",this.visible=!1}}const YY=new nt;class ylt extends Zs{constructor(e=new nt(0,0,1),t=new nt(0,0,0),i=1,r=.1,s=16776960,a=i*.2,o=a*.2){super(),this.type="ArrowHelper";const l=new rA(r,r,i,32);l.translate(0,i/2,0);const c=new rA(0,o,a,32);c.translate(0,i,0),this.position.copy(t),this.line=new Ts(l,new Cm({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ts(c,new Cm({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{YY.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(YY,t)}}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Ub{constructor(e){at(this,"updateFocusMarker",function(){const e=new nt,t=new gi,i=new nt;return function(r,s,a){t.copy(s.matrixWorld).invert(),e.copy(r).applyMatrix4(t),e.normalize().multiplyScalar(10),e.applyMatrix4(s.matrixWorld),i.copy(s.position).sub(r);const o=i.length();this.focusMarker.position.copy(r),this.focusMarker.scale.set(o,o,o),this.focusMarker.material.uniforms.realFocusPosition.value.copy(r),this.focusMarker.material.uniforms.viewport.value.copy(a),this.focusMarker.material.uniformsNeedUpdate=!0}}());at(this,"positionAndOrientControlPlane",function(){const e=new ds,t=new nt(0,1,0);return function(i,r){e.setFromUnitVectors(t,r),this.controlPlane.position.copy(i),this.controlPlane.quaternion.copy(e)}}());this.threeScene=e,this.splatRenderTarget=null,this.renderTargetCopyQuad=null,this.renderTargetCopyCamera=null,this.meshCursor=null,this.focusMarker=null,this.controlPlane=null,this.debugRoot=null,this.secondaryDebugRoot=null}updateSplatRenderTargetForRenderDimensions(e,t){this.destroySplatRendertarget(),this.splatRenderTarget=new yp(e,t,{format:yo,stencilBuffer:!1,depthBuffer:!0}),this.splatRenderTarget.depthTexture=new pB(e,t),this.splatRenderTarget.depthTexture.format=tm,this.splatRenderTarget.depthTexture.type=sc}destroySplatRendertarget(){this.splatRenderTarget&&(this.splatRenderTarget=null)}setupRenderTargetCopyObjects(){const e={sourceColorTexture:{type:"t",value:null},sourceDepthTexture:{type:"t",value:null}},t=new El({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = vec4( position.xy, 0.0, 1.0 );    
                }
            `,fragmentShader:`
                #include <common>
                #include <packing>
                varying vec2 vUv;
                uniform sampler2D sourceColorTexture;
                uniform sampler2D sourceDepthTexture;
                void main() {
                    vec4 color = texture2D(sourceColorTexture, vUv);
                    float fragDepth = texture2D(sourceDepthTexture, vUv).x;
                    gl_FragDepth = fragDepth;
                    gl_FragColor = vec4(color.rgb, color.a * 2.0);
              }
            `,uniforms:e,depthWrite:!1,depthTest:!1,transparent:!0,blending:Iae,blendSrc:eA,blendSrcAlpha:eA,blendDst:tA,blendDstAlpha:tA});t.extensions.fragDepth=!0,this.renderTargetCopyQuad=new Ts(new $1(2,2),t),this.renderTargetCopyCamera=new vB(-1,1,1,-1,0,1)}destroyRenderTargetCopyObjects(){this.renderTargetCopyQuad&&(pg(this.renderTargetCopyQuad),this.renderTargetCopyQuad=null)}setupMeshCursor(){if(!this.meshCursor){const e=new mB(.5,1.5,32),t=new Cm({color:16777215}),i=new Ts(e,t);i.rotation.set(0,0,Math.PI),i.position.set(0,1,0);const r=new Ts(e,t);r.position.set(0,-1,0);const s=new Ts(e,t);s.rotation.set(0,0,Math.PI/2),s.position.set(1,0,0);const a=new Ts(e,t);a.rotation.set(0,0,-Math.PI/2),a.position.set(-1,0,0),this.meshCursor=new Zs,this.meshCursor.add(i),this.meshCursor.add(r),this.meshCursor.add(s),this.meshCursor.add(a),this.meshCursor.scale.set(.1,.1,.1),this.threeScene.add(this.meshCursor),this.meshCursor.visible=!1}}destroyMeshCursor(){this.meshCursor&&(pg(this.meshCursor),this.threeScene.remove(this.meshCursor),this.meshCursor=null)}setMeshCursorVisibility(e){this.meshCursor.visible=e}getMeschCursorVisibility(){return this.meshCursor.visible}setMeshCursorPosition(e){this.meshCursor.position.copy(e)}positionAndOrientMeshCursor(e,t){this.meshCursor.position.copy(e),this.meshCursor.up.copy(t.up),this.meshCursor.lookAt(t.position)}setupFocusMarker(){if(!this.focusMarker){const e=new N4(.5,32,32),t=Ub.buildFocusMarkerMaterial();t.depthTest=!1,t.depthWrite=!1,t.transparent=!0,this.focusMarker=new Ts(e,t)}}destroyFocusMarker(){this.focusMarker&&(pg(this.focusMarker),this.focusMarker=null)}setFocusMarkerVisibility(e){this.focusMarker.visible=e}setFocusMarkerOpacity(e){this.focusMarker.material.uniforms.opacity.value=e,this.focusMarker.material.uniformsNeedUpdate=!0}getFocusMarkerOpacity(){return this.focusMarker.material.uniforms.opacity.value}setupControlPlane(){if(!this.controlPlane){const e=new $1(1,1);e.rotateX(-Math.PI/2);const t=new Cm({color:16777215});t.transparent=!0,t.opacity=.6,t.depthTest=!1,t.depthWrite=!1,t.side=Jl;const i=new Ts(e,t),r=new nt(0,1,0);r.normalize();const s=new nt(0,0,0),a=.5,o=.01,l=56576,c=new ylt(r,s,a,o,l,.1,.03);this.controlPlane=new Zs,this.controlPlane.add(i),this.controlPlane.add(c)}}destroyControlPlane(){this.controlPlane&&(pg(this.controlPlane),this.controlPlane=null)}setControlPlaneVisibility(e){this.controlPlane.visible=e}addDebugMeshes(){this.debugRoot=this.createDebugMeshes(),this.secondaryDebugRoot=this.createSecondaryDebugMeshes(),this.threeScene.add(this.debugRoot),this.threeScene.add(this.secondaryDebugRoot)}destroyDebugMeshes(){for(let e of[this.debugRoot,this.secondaryDebugRoot])e&&(pg(e),this.threeScene.remove(e));this.debugRoot=null,this.secondaryDebugRoot=null}createDebugMeshes(e){const t=new N4(1,32,32),i=new Zs,r=(s,a)=>{let o=new Ts(t,Ub.buildDebugMaterial(s));o.renderOrder=e,i.add(o),o.position.fromArray(a)};return r(16711680,[-50,0,0]),r(16711680,[50,0,0]),r(65280,[0,0,-50]),r(65280,[0,0,50]),r(16755200,[5,0,5]),i}createSecondaryDebugMeshes(e){const t=new Fy(3,3,3),i=new Zs;let r=12303291;const s=o=>{let l=new Ts(t,Ub.buildDebugMaterial(r));l.renderOrder=e,i.add(l),l.position.fromArray(o)};let a=10;return s([-10,0,-10]),s([-10,0,a]),s([a,0,-10]),s([a,0,a]),i}static buildDebugMaterial(e){const t=`
            #include <common>
            varying float ndcDepth;

            void main() {
                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position.xyz, 1.0);
                ndcDepth = gl_Position.z / gl_Position.w;
                gl_Position.x = gl_Position.x / gl_Position.w;
                gl_Position.y = gl_Position.y / gl_Position.w;
                gl_Position.z = 0.0;
                gl_Position.w = 1.0;
    
            }
        `,i=`
            #include <common>
            uniform vec3 color;
            varying float ndcDepth;
            void main() {
                gl_FragDepth = (ndcDepth + 1.0) / 2.0;
                gl_FragColor = vec4(color.rgb, 0.0);
            }
        `,r={color:{type:"v3",value:new pr(e)}},s=new El({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!1,depthTest:!0,depthWrite:!0,side:nd});return s.extensions.fragDepth=!0,s}static buildFocusMarkerMaterial(e){const t=`
            #include <common>

            uniform vec2 viewport;
            uniform vec3 realFocusPosition;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                float radius = 0.01;

                vec4 viewPosition = modelViewMatrix * vec4(position.xyz, 1.0);
                vec4 viewCenter = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);

                vec4 viewFocusPosition = modelViewMatrix * vec4(realFocusPosition, 1.0);

                ndcPosition = projectionMatrix * viewPosition;
                ndcPosition = ndcPosition * vec4(1.0 / ndcPosition.w);
                ndcCenter = projectionMatrix * viewCenter;
                ndcCenter = ndcCenter * vec4(1.0 / ndcCenter.w);

                ndcFocusPosition = projectionMatrix * viewFocusPosition;
                ndcFocusPosition = ndcFocusPosition * vec4(1.0 / ndcFocusPosition.w);

                gl_Position = projectionMatrix * viewPosition;

            }
        `,i=`
            #include <common>
            uniform vec3 color;
            uniform vec2 viewport;
            uniform float opacity;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                vec2 screenPosition = vec2(ndcPosition) * viewport;
                vec2 screenCenter = vec2(ndcCenter) * viewport;

                vec2 screenVec = screenPosition - screenCenter;

                float projectedRadius = length(screenVec);

                float lineWidth = 0.0005 * viewport.y;
                float aaRange = 0.0025 * viewport.y;
                float radius = 0.06 * viewport.y;
                float radDiff = abs(projectedRadius - radius) - lineWidth;
                float alpha = 1.0 - clamp(radDiff / 5.0, 0.0, 1.0); 

                gl_FragColor = vec4(color.rgb, alpha * opacity);
            }
        `,r={color:{type:"v3",value:new pr(e)},realFocusPosition:{type:"v3",value:new nt},viewport:{type:"v2",value:new Yn},opacity:{value:0}};return new El({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!0,depthTest:!1,depthWrite:!1,side:nd})}dispose(){this.destroyMeshCursor(),this.destroyFocusMarker(),this.destroyDebugMeshes(),this.destroyControlPlane(),this.destroyRenderTargetCopyObjects(),this.destroySplatRendertarget()}}const blt=new nt(1,0,0),xlt=new nt(0,1,0),Alt=new nt(0,0,1);class WI{constructor(e=new nt,t=new nt){at(this,"intersectBox",function(){const e=new nt,t=[],i=[],r=[];return function(s,a){if(i[0]=this.origin.x,i[1]=this.origin.y,i[2]=this.origin.z,r[0]=this.direction.x,r[1]=this.direction.y,r[2]=this.direction.z,this.boxContainsPoint(s,this.origin,1e-4))return a&&(a.origin.copy(this.origin),a.normal.set(0,0,0),a.distance=-1),!0;for(let o=0;o<3;o++){if(r[o]==0)continue;const l=o==0?blt:o==1?xlt:Alt,c=r[o]<0?s.max:s.min;let u=-Math.sign(r[o]);t[0]=o==0?c.x:o==1?c.y:c.z;let d=t[0]-i[o];if(d*u<0){const f=(o+1)%3,h=(o+2)%3;if(t[2]=r[f]/r[o]*d+i[f],t[1]=r[h]/r[o]*d+i[h],e.set(t[o],t[h],t[f]),this.boxContainsPoint(s,e,1e-4))return a&&(a.origin.copy(e),a.normal.copy(l).multiplyScalar(u),a.distance=e.sub(this.origin).length()),!0}}return!1}}());at(this,"intersectSphere",function(){const e=new nt;return function(t,i,r){e.copy(t).sub(this.origin);const s=e.dot(this.direction),a=s*s,l=e.dot(e)-a,c=i*i;if(l>c)return!1;const u=Math.sqrt(c-l),d=s-u,f=s+u;if(f<0)return!1;let h=d<0?f:d;return r&&(r.origin.copy(this.origin).addScaledVector(this.direction,h),r.normal.copy(r.origin).sub(t).normalize(),r.distance=h),!0}}());this.origin=new nt,this.direction=new nt,this.setParameters(e,t)}setParameters(e,t){this.origin.copy(e),this.direction.copy(t).normalize()}boxContainsPoint(e,t,i){return!(t.x<e.min.x-i||t.x>e.max.x+i||t.y<e.min.y-i||t.y>e.max.y+i||t.z<e.min.z-i||t.z>e.max.z+i)}}class PB{constructor(){this.origin=new nt,this.normal=new nt,this.distance=0,this.splatIndex=0}set(e,t,i,r){this.origin.copy(e),this.normal.copy(t),this.distance=i,this.splatIndex=r}clone(){const e=new PB;return e.origin.copy(this.origin),e.normal.copy(this.normal),e.distance=this.distance,e.splatIndex=this.splatIndex,e}}const zd={ThreeD:0,TwoD:1};class wlt{constructor(e,t,i=!1){at(this,"setFromCameraAndScreenPosition",function(){const e=new Yn;return function(t,i,r){if(e.x=i.x/r.x*2-1,e.y=(r.y-i.y)/r.y*2-1,t.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t;else if(t.isOrthographicCamera)this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t;else throw new Error("Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type")}}());at(this,"intersectSplatMesh",function(){const e=new gi,t=new gi,i=new gi,r=new WI,s=new nt;return function(a,o=[]){const l=a.getSplatTree();if(l){for(let c=0;c<l.subTrees.length;c++){const u=l.subTrees[c];t.copy(a.matrixWorld),a.dynamicMode&&(a.getSceneTransform(c,i),t.multiply(i)),e.copy(t).invert(),r.origin.copy(this.ray.origin).applyMatrix4(e),r.direction.copy(this.ray.origin).add(this.ray.direction),r.direction.applyMatrix4(e).sub(r.origin).normalize();const d=[];u.rootNode&&this.castRayAtSplatTreeNode(r,l,u.rootNode,d),d.forEach(f=>{f.origin.applyMatrix4(t),f.normal.applyMatrix4(t).normalize(),f.distance=s.copy(f.origin).sub(this.ray.origin).length()}),o.push(...d)}return o.sort((c,u)=>c.distance>u.distance?1:-1),o}}}());at(this,"castRayAtSplatTreeNode",function(){const e=new us,t=new nt,i=new nt,r=new ds,s=new PB,a=1e-7,o=new nt(0,0,0),l=new gi,c=new gi,u=new gi,d=new gi,f=new gi,h=new WI;return function(p,m,v,g=[]){if(p.intersectBox(v.boundingBox)){if(v.data&&v.data.indexes&&v.data.indexes.length>0)for(let y=0;y<v.data.indexes.length;y++){const x=v.data.indexes[y],b=m.splatMesh.getSceneIndexForSplat(x);if(m.splatMesh.getScene(b).visible&&(m.splatMesh.getSplatColor(x,e),m.splatMesh.getSplatCenter(x,t),m.splatMesh.getSplatScaleAndRotation(x,i,r),!(i.x<=a||i.y<=a||m.splatMesh.splatRenderMode===zd.ThreeD&&i.z<=a)))if(this.raycastAgainstTrueSplatEllipsoid){c.makeScale(i.x,i.y,i.z),u.makeRotationFromQuaternion(r);const S=Math.log10(e.w)*2;if(l.makeScale(S,S,S),f.copy(l).multiply(u).multiply(c),d.copy(f).invert(),h.origin.copy(p.origin).sub(t).applyMatrix4(d),h.direction.copy(p.origin).add(p.direction).sub(t),h.direction.applyMatrix4(d).sub(h.origin).normalize(),h.intersectSphere(o,1,s)){const C=s.clone();C.splatIndex=x,C.origin.applyMatrix4(f).add(t),g.push(C)}}else{let S=i.x+i.y,C=2;if(m.splatMesh.splatRenderMode===zd.ThreeD&&(S+=i.z,C=3),S=S/C,p.intersectSphere(t,S,s)){const _=s.clone();_.splatIndex=x,g.push(_)}}}if(v.children&&v.children.length>0)for(let y of v.children)this.castRayAtSplatTreeNode(p,m,y,g);return g}}}());this.ray=new WI(e,t),this.raycastAgainstTrueSplatEllipsoid=i}}class o1{static buildVertexShaderBase(e=!1,t=!1,i=0,r=""){let s=`
        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
    `;return t&&(s+=`
            uniform float sceneOpacity[${Ji.MaxScenes}];
            uniform int sceneVisibility[${Ji.MaxScenes}];
        `),e&&(s+=`
            uniform highp mat4 transforms[${Ji.MaxScenes}];
        `),s+=`
        ${r}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${Ji.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${Ji.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(sIndex) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `,t&&(s+=`
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `),e?s+=`
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
            `:s+="mat4 transformModelViewMatrix = modelViewMatrix;",s+=`
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vColor = uintToRGBAVec(sampledCenterColor.r);
        `,i>=1&&(s+=`   
            if (sphericalHarmonicsDegree >= 1) {
            `,e?s+=`
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `:s+=`
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `,s+=`
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `,i>=2&&(s+=`
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `),i===1?s+=`
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `:i===2&&(s+=`
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `),s+=`
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `,i>=2&&(s+=`
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `,i===2&&(s+=`
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `),s+=`
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `),s+=`

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `),s}static getVertexShaderFadeIn(){return`
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `}static getUniforms(e=!1,t=!1,i=0,r=1,s=!1){const a={sceneCenter:{type:"v3",value:new nt},fadeInComplete:{type:"i",value:0},orthographicMode:{type:"i",value:0},visibleRegionFadeStartRadius:{type:"f",value:0},visibleRegionRadius:{type:"f",value:0},currentTime:{type:"f",value:0},firstRenderTime:{type:"f",value:0},centersColorsTexture:{type:"t",value:null},sphericalHarmonicsTexture:{type:"t",value:null},sphericalHarmonicsTextureR:{type:"t",value:null},sphericalHarmonicsTextureG:{type:"t",value:null},sphericalHarmonicsTextureB:{type:"t",value:null},sphericalHarmonics8BitCompressionRangeMin:{type:"f",value:[]},sphericalHarmonics8BitCompressionRangeMax:{type:"f",value:[]},focal:{type:"v2",value:new Yn},orthoZoom:{type:"f",value:1},inverseFocalAdjustment:{type:"f",value:1},viewport:{type:"v2",value:new Yn},basisViewport:{type:"v2",value:new Yn},debugColor:{type:"v3",value:new pr},centersColorsTextureSize:{type:"v2",value:new Yn(1024,1024)},sphericalHarmonicsDegree:{type:"i",value:i},sphericalHarmonicsTextureSize:{type:"v2",value:new Yn(1024,1024)},sphericalHarmonics8BitMode:{type:"i",value:0},sphericalHarmonicsMultiTextureMode:{type:"i",value:0},splatScale:{type:"f",value:r},pointCloudModeEnabled:{type:"i",value:s?1:0},sceneIndexesTexture:{type:"t",value:null},sceneIndexesTextureSize:{type:"v2",value:new Yn(1024,1024)},sceneCount:{type:"i",value:1}};for(let o=0;o<Ji.MaxScenes;o++)a.sphericalHarmonics8BitCompressionRangeMin.value.push(-3/2),a.sphericalHarmonics8BitCompressionRangeMax.value.push(Ji.SphericalHarmonics8BitCompressionRange/2);if(t){const o=[];for(let c=0;c<Ji.MaxScenes;c++)o.push(1);a.sceneOpacity={type:"f",value:o};const l=[];for(let c=0;c<Ji.MaxScenes;c++)l.push(1);a.sceneVisibility={type:"i",value:l}}if(e){const o=[];for(let l=0;l<Ji.MaxScenes;l++)o.push(new gi);a.transforms={type:"mat4",value:o}}return a}}class U4{static build(e=!1,t=!1,i=!1,r=2048,s=1,a=!1,o=0,l=.3){let u=o1.buildVertexShaderBase(e,t,o,`
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `);u+=U4.buildVertexShaderProjection(i,t,r,l);const d=U4.buildFragmentShader(),f=o1.getUniforms(e,t,o,s,a);return f.covariancesTextureSize={type:"v2",value:new Yn(1024,1024)},f.covariancesTexture={type:"t",value:null},f.covariancesTextureHalfFloat={type:"t",value:null},f.covariancesAreHalfFloat={type:"i",value:0},new El({uniforms:f,vertexShader:u,fragmentShader:d,transparent:!0,alphaTest:1,blending:$h,depthTest:!0,depthWrite:!1,side:Jl})}static buildVertexShaderProjection(e,t,i,r){let s=`

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;return e?s+=`
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${r};
                cov2Dm[1][1] += ${r};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `:s+=`
                cov2Dm[0][0] += ${r};
                cov2Dm[1][1] += ${r};
            `,s+=`

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(i)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(i)}.0);
            `,t&&(s+=`
                vColor.a *= splatOpacityFromScene;
            `),s+=`
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `,s+=o1.getVertexShaderFadeIn(),s+="}",s}static buildFragmentShader(){let e=`
            precision highp float;
            #include <common>
 
            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
        `;return e+=`
            void main () {
                // Compute the positional squared distance from the center of the splat to the current fragment.
                float A = dot(vPosition, vPosition);
                // Since the positional data in vPosition has been scaled by sqrt(8), the squared result will be
                // scaled by a factor of 8. If the squared result is larger than 8, it means it is outside the ellipse
                // defined by the rectangle formed by vPosition. It also means it's farther
                // away than sqrt(8) standard deviations from the mean.
                if (A > 8.0) discard;
                vec3 color = vColor.rgb;

                // Since the rendered splat is scaled by sqrt(8), the inverse covariance matrix that is part of
                // the gaussian formula becomes the identity matrix. We're then left with (X - mean) * (X - mean),
                // and since 'mean' is zero, we have X * X, which is the same as A:
                float opacity = exp(-0.5 * A) * vColor.a;

                gl_FragColor = vec4(color.rgb, opacity);
            }
        `,e}}class z4{static build(e=!1,t=!1,i=1,r=!1,s=0){let o=o1.buildVertexShaderBase(e,t,s,`
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `);o+=z4.buildVertexShaderProjection();const l=z4.buildFragmentShader(),c=o1.getUniforms(e,t,s,i,r);return c.scaleRotationsTexture={type:"t",value:null},c.scaleRotationsTextureSize={type:"v2",value:new Yn(1024,1024)},new El({uniforms:c,vertexShader:o,fragmentShader:l,transparent:!0,alphaTest:1,blending:$h,depthTest:!0,depthWrite:!1,side:Jl})}static buildVertexShaderProjection(){let e=`

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;return e+=`

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `,e+=o1.getVertexShaderFadeIn(),e+="}",e}static buildFragmentShader(){return`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `}}class Slt{static build(e){const t=new Ac;t.setIndex([0,1,2,0,2,3]);const i=new Float32Array(4*3),r=new fc(i,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;const s=new Rnt().copy(t),a=new Uint32Array(e),o=new Mnt(a,1,!1);return o.setUsage(Ktt),s.setAttribute("splatIndex",o),s.instanceCount=0,s}}class _lt extends Zs{constructor(e,t=new nt,i=new ds,r=new nt(1,1,1),s=1,a=1,o=!0){super(),this.splatBuffer=e,this.position.copy(t),this.quaternion.copy(i),this.scale.copy(r),this.transform=new gi,this.minimumAlpha=s,this.opacity=a,this.visible=o}copyTransformData(e){this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.transform.copy(e.transform)}updateTransform(e){e?(this.matrixWorldAutoUpdate&&this.updateWorldMatrix(!0,!1),this.transform.copy(this.matrixWorld)):(this.matrixAutoUpdate&&this.updateMatrix(),this.transform.copy(this.matrix))}}const W4=class W4{constructor(e,t,i,r){this.min=new nt().copy(e),this.max=new nt().copy(t),this.boundingBox=new Vu(this.min,this.max),this.center=new nt().copy(this.max).sub(this.min).multiplyScalar(.5).add(this.min),this.depth=i,this.children=[],this.data=null,this.id=r||W4.idGen++}};at(W4,"idGen",0);let iL=W4;class zb{constructor(e,t){this.maxDepth=e,this.maxCentersPerNode=t,this.sceneDimensions=new nt,this.sceneMin=new nt,this.sceneMax=new nt,this.rootNode=null,this.nodesWithIndexes=[],this.splatMesh=null}static convertWorkerSubTreeNode(e){const t=new nt().fromArray(e.min),i=new nt().fromArray(e.max),r=new iL(t,i,e.depth,e.id);if(e.data.indexes){r.data={indexes:[]};for(let s of e.data.indexes)r.data.indexes.push(s)}if(e.children)for(let s of e.children)r.children.push(zb.convertWorkerSubTreeNode(s));return r}static convertWorkerSubTree(e,t){const i=new zb(e.maxDepth,e.maxCentersPerNode);i.sceneMin=new nt().fromArray(e.sceneMin),i.sceneMax=new nt().fromArray(e.sceneMax),i.splatMesh=t,i.rootNode=zb.convertWorkerSubTreeNode(e.rootNode);const r=(s,a)=>{s.children.length===0&&a(s);for(let o of s.children)r(o,a)};return i.nodesWithIndexes=[],r(i.rootNode,s=>{s.data&&s.data.indexes&&s.data.indexes.length>0&&i.nodesWithIndexes.push(s)}),i}}function Clt(n){let e=0;class t{constructor(l,c){this.min=[l[0],l[1],l[2]],this.max=[c[0],c[1],c[2]]}containsPoint(l){return l[0]>=this.min[0]&&l[0]<=this.max[0]&&l[1]>=this.min[1]&&l[1]<=this.max[1]&&l[2]>=this.min[2]&&l[2]<=this.max[2]}}class i{constructor(l,c){this.maxDepth=l,this.maxCentersPerNode=c,this.sceneDimensions=[],this.sceneMin=[],this.sceneMax=[],this.rootNode=null,this.addedIndexes={},this.nodesWithIndexes=[],this.splatMesh=null,this.disposed=!1}}class r{constructor(l,c,u,d){this.min=[l[0],l[1],l[2]],this.max=[c[0],c[1],c[2]],this.center=[(c[0]-l[0])*.5+l[0],(c[1]-l[1])*.5+l[1],(c[2]-l[2])*.5+l[2]],this.depth=u,this.children=[],this.data=null,this.id=d||e++}}processSplatTreeNode=function(o,l,c,u){const d=l.data.indexes.length;if(d<o.maxCentersPerNode||l.depth>o.maxDepth){const y=[];for(let x=0;x<l.data.indexes.length;x++)o.addedIndexes[l.data.indexes[x]]||(y.push(l.data.indexes[x]),o.addedIndexes[l.data.indexes[x]]=!0);l.data.indexes=y,l.data.indexes.sort((x,b)=>x>b?1:-1),o.nodesWithIndexes.push(l);return}const f=[l.max[0]-l.min[0],l.max[1]-l.min[1],l.max[2]-l.min[2]],h=[f[0]*.5,f[1]*.5,f[2]*.5],p=[l.min[0]+h[0],l.min[1]+h[1],l.min[2]+h[2]],m=[new t([p[0]-h[0],p[1],p[2]-h[2]],[p[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]-h[2]],[p[0]+h[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]],[p[0]+h[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1],p[2]],[p[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]-h[2]],[p[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]-h[2]],[p[0]+h[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]],[p[0]+h[0],p[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]],[p[0],p[1],p[2]+h[2]])],v=[];for(let y=0;y<m.length;y++)v[y]=[];const g=[0,0,0];for(let y=0;y<d;y++){const x=l.data.indexes[y],b=c[x];g[0]=u[b],g[1]=u[b+1],g[2]=u[b+2];for(let A=0;A<m.length;A++)m[A].containsPoint(g)&&v[A].push(x)}for(let y=0;y<m.length;y++){const x=new r(m[y].min,m[y].max,l.depth+1);x.data={indexes:v[y]},l.children.push(x)}l.data={};for(let y of l.children)processSplatTreeNode(o,y,c,u)};const s=(o,l,c)=>{const u=[0,0,0],d=[0,0,0],f=[],h=Math.floor(o.length/4);for(let m=0;m<h;m++){const v=m*4,g=o[v],y=o[v+1],x=o[v+2],b=Math.round(o[v+3]);(m===0||g<u[0])&&(u[0]=g),(m===0||g>d[0])&&(d[0]=g),(m===0||y<u[1])&&(u[1]=y),(m===0||y>d[1])&&(d[1]=y),(m===0||x<u[2])&&(u[2]=x),(m===0||x>d[2])&&(d[2]=x),f.push(b)}const p=new i(l,c);return p.sceneMin=u,p.sceneMax=d,p.rootNode=new r(p.sceneMin,p.sceneMax,0),p.rootNode.data={indexes:f},p};function a(o,l,c){const u=[];for(let f of o){const h=Math.floor(f.length/4);for(let p=0;p<h;p++){const m=p*4,v=Math.round(f[m+3]);u[v]=m}}const d=[];for(let f of o){const h=s(f,l,c);d.push(h),processSplatTreeNode(h,h.rootNode,u,f)}n.postMessage({subTrees:d})}n.onmessage=o=>{o.data.process&&a(o.data.process.centers,o.data.process.maxDepth,o.data.process.maxCentersPerNode)}}function Mlt(n,e,t,i,r){n.postMessage({process:{centers:e,maxDepth:i,maxCentersPerNode:r}},t)}function Tlt(){return new Worker(URL.createObjectURL(new Blob(["(",Clt.toString(),")(self)"],{type:"application/javascript"})))}class Elt{constructor(e,t){at(this,"processSplatMesh",function(e,t=()=>!0,i,r){this.splatTreeWorker||(this.splatTreeWorker=Tlt()),this.splatMesh=e,this.subTrees=[];const s=new nt,a=(o,l)=>{const c=new Float32Array(l*4);let u=0;for(let d=0;d<l;d++){const f=d+o;if(t(f)){e.getSplatCenter(f,s);const h=u*4;c[h]=s.x,c[h+1]=s.y,c[h+2]=s.z,c[h+3]=f,u++}}return c};return new Promise(o=>{const l=()=>this.disposed?(this.diposeSplatTreeWorker(),o(),!0):!1;i&&i(!1),Al(()=>{if(l())return;const c=[];if(e.dynamicMode){let u=0;for(let d=0;d<e.scenes.length;d++){const h=e.getScene(d).splatBuffer.getSplatCount(),p=a(u,h);c.push(p),u+=h}}else{const u=a(0,e.getSplatCount());c.push(u)}this.splatTreeWorker.onmessage=u=>{l()||u.data.subTrees&&(r&&r(!1),Al(()=>{if(!l()){for(let d of u.data.subTrees){const f=zb.convertWorkerSubTree(d,e);this.subTrees.push(f)}this.diposeSplatTreeWorker(),r&&r(!0),Al(()=>{o()})}}))},Al(()=>{if(l())return;i&&i(!0);const u=c.map(d=>d.buffer);Mlt(this.splatTreeWorker,c,u,this.maxDepth,this.maxCentersPerNode)})})})});this.maxDepth=e,this.maxCentersPerNode=t,this.subTrees=[],this.splatMesh=null}dispose(){this.diposeSplatTreeWorker(),this.disposed=!0}diposeSplatTreeWorker(){this.splatTreeWorker&&this.splatTreeWorker.terminate(),this.splatTreeWorker=null}countLeaves(){let e=0;return this.visitLeaves(()=>{e++}),e}visitLeaves(e){const t=(i,r)=>{i.children.length===0&&r(i);for(let s of i.children)t(s,r)};for(let i of this.subTrees)t(i.rootNode,e)}}function Ilt(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Dlt(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=f>0,b=a||e.has("OES_texture_float"),A=x&&b,S=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:A,maxSamples:S}}const Vb={Default:0,Instant:2},l1={None:0,Info:3},XY=new Ac,Rlt=new Cm,M3=6,Plt=4,Llt=4,klt=4,Flt=6,Blt=8,qI=4,KI=4,jY=1,Nlt=.012,Olt=.003,$Y=1,QY=16777216;class xa extends Ts{constructor(t=zd.ThreeD,i=!1,r=!1,s=!1,a=1,o=!0,l=!1,c=!1,u=1024,d=l1.None,f=0,h=1,p=.3){super(XY,Rlt);at(this,"buildSplatTree",function(t=[],i,r){return new Promise(s=>{this.disposeSplatTree(),this.baseSplatTree=new Elt(8,1e3);const a=performance.now(),o=new us;this.baseSplatTree.processSplatMesh(this,l=>{this.getSplatColor(l,o);const c=this.getSceneIndexForSplat(l),u=t[c]||1;return o.w>=u},i,r).then(()=>{const l=performance.now()-a;if(this.logLevel>=l1.Info&&console.log("SplatTree build: "+l+" ms"),this.disposed)s();else{this.splatTree=this.baseSplatTree,this.baseSplatTree=null;let c=0,u=0,d=0;this.splatTree.visitLeaves(f=>{const h=f.data.indexes.length;h>0&&(u+=h,d++,c++)}),this.logLevel>=l1.Info&&(console.log(`SplatTree leaves: ${this.splatTree.countLeaves()}`),console.log(`SplatTree leaves with splats:${c}`),u=u/d,console.log(`Avg splat count per node: ${u}`),console.log(`Total splat count: ${this.getSplatCount()}`)),s()}})})});at(this,"updateUniforms",function(){const t=new Yn;return function(i,r,s,a,o,l){if(this.getSplatCount()>0){if(t.set(i.x*this.devicePixelRatio,i.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(t),this.material.uniforms.basisViewport.value.set(1/t.x,1/t.y),this.material.uniforms.focal.value.set(r,s),this.material.uniforms.orthographicMode.value=a?1:0,this.material.uniforms.orthoZoom.value=o,this.material.uniforms.inverseFocalAdjustment.value=l,this.dynamicMode)for(let u=0;u<this.scenes.length;u++)this.material.uniforms.transforms.value[u].copy(this.getScene(u).transform);if(this.enableOptionalEffects)for(let u=0;u<this.scenes.length;u++)this.material.uniforms.sceneOpacity.value[u]=ls(this.getScene(u).opacity,0,1),this.material.uniforms.sceneVisibility.value[u]=this.getScene(u).visible?1:0,this.material.uniformsNeedUpdate=!0;this.material.uniformsNeedUpdate=!0}}}());at(this,"setupDistancesComputationTransformFeedback",function(){let t;return function(){const i=this.getMaxSplatCount();if(!this.renderer)return;const r=this.lastRenderer!==this.renderer,s=t!==i;if(!r&&!s)return;r?this.disposeDistancesComputationGPUResources():s&&this.disposeDistancesComputationGPUBufferResources();const a=this.renderer.getContext(),o=(h,p,m)=>{const v=h.createShader(p);if(!v)return console.error("Fatal error: gl could not create a shader object."),null;if(h.shaderSource(v,m),h.compileShader(v),!h.getShaderParameter(v,h.COMPILE_STATUS)){let y="unknown";p===h.VERTEX_SHADER?y="vertex shader":p===h.FRAGMENT_SHADER&&(y="fragement shader");const x=h.getShaderInfoLog(v);return console.error("Failed to compile "+y+" with these errors:"+x),h.deleteShader(v),null}return v};let l;this.integerBasedDistancesComputation?(l=`#version 300 es
                in ivec4 center;
                flat out int distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform ivec4 transforms[${Ji.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `:l+=`
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `):(l=`#version 300 es
                in vec4 center;
                flat out float distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform mat4 transforms[${Ji.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `:l+=`
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `);const c=`#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `,u=a.getParameter(a.VERTEX_ARRAY_BINDING),d=a.getParameter(a.CURRENT_PROGRAM),f=d?a.getProgramParameter(d,a.DELETE_STATUS):!1;if(r&&(this.distancesTransformFeedback.vao=a.createVertexArray()),a.bindVertexArray(this.distancesTransformFeedback.vao),r){const h=a.createProgram(),p=o(a,a.VERTEX_SHADER,l),m=o(a,a.FRAGMENT_SHADER,c);if(!p||!m)throw new Error("Could not compile shaders for distances computation on GPU.");if(a.attachShader(h,p),a.attachShader(h,m),a.transformFeedbackVaryings(h,["distance"],a.SEPARATE_ATTRIBS),a.linkProgram(h),!a.getProgramParameter(h,a.LINK_STATUS)){const g=a.getProgramInfoLog(h);throw console.error("Fatal error: Failed to link program: "+g),a.deleteProgram(h),a.deleteShader(m),a.deleteShader(p),new Error("Could not link shaders for distances computation on GPU.")}this.distancesTransformFeedback.program=h,this.distancesTransformFeedback.vertexShader=p,this.distancesTransformFeedback.vertexShader=m}if(a.useProgram(this.distancesTransformFeedback.program),this.distancesTransformFeedback.centersLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"center"),this.dynamicMode){this.distancesTransformFeedback.sceneIndexesLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"sceneIndex");for(let h=0;h<this.scenes.length;h++)this.distancesTransformFeedback.transformsLocs[h]=a.getUniformLocation(this.distancesTransformFeedback.program,`transforms[${h}]`)}else this.distancesTransformFeedback.modelViewProjLoc=a.getUniformLocation(this.distancesTransformFeedback.program,"modelViewProj");(r||s)&&(this.distancesTransformFeedback.centersBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?a.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,a.INT,0,0):a.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,a.FLOAT,!1,0,0),this.dynamicMode&&(this.distancesTransformFeedback.sceneIndexesBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),a.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,a.UNSIGNED_INT,0,0))),(r||s)&&(this.distancesTransformFeedback.outDistancesBuffer=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),a.bufferData(a.ARRAY_BUFFER,i*4,a.STATIC_READ),r&&(this.distancesTransformFeedback.id=a.createTransformFeedback()),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),d&&f!==!0&&a.useProgram(d),u&&a.bindVertexArray(u),this.lastRenderer=this.renderer,t=i}}());at(this,"fillTransformsArray",function(){const t=[];return function(i){t.length!==i.length&&(t.length=i.length);for(let r=0;r<this.scenes.length;r++){const a=this.getScene(r).transform.elements;for(let o=0;o<16;o++)t[r*16+o]=a[o]}i.set(t)}}());at(this,"computeDistancesOnGPU",function(){const t=new gi;return function(i,r){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING),o=s.getParameter(s.CURRENT_PROGRAM),l=o?s.getProgramParameter(o,s.DELETE_STATUS):!1;if(s.bindVertexArray(this.distancesTransformFeedback.vao),s.useProgram(this.distancesTransformFeedback.program),s.enable(s.RASTERIZER_DISCARD),this.dynamicMode)for(let d=0;d<this.scenes.length;d++)if(t.copy(this.getScene(d).transform),t.premultiply(i),this.integerBasedDistancesComputation){const f=xa.getIntegerMatrixArray(t),h=[f[2],f[6],f[10],f[14]];s.uniform4i(this.distancesTransformFeedback.transformsLocs[d],h[0],h[1],h[2],h[3])}else s.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[d],!1,t.elements);else if(this.integerBasedDistancesComputation){const d=xa.getIntegerMatrixArray(i),f=[d[2],d[6],d[10]];s.uniform3i(this.distancesTransformFeedback.modelViewProjLoc,f[0],f[1],f[2])}else{const d=[i.elements[2],i.elements[6],i.elements[10]];s.uniform3f(this.distancesTransformFeedback.modelViewProjLoc,d[0],d[1],d[2])}s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?s.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,s.INT,0,0):s.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,s.FLOAT,!1,0,0),this.dynamicMode&&(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),s.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,s.UNSIGNED_INT,0,0)),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),s.beginTransformFeedback(s.POINTS),s.drawArrays(s.POINTS,0,this.getSplatCount()),s.endTransformFeedback(),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,null),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null),s.disable(s.RASTERIZER_DISCARD);const c=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);s.flush();const u=new Promise(d=>{const f=()=>{if(this.disposed)d();else switch(s.clientWaitSync(c,0,0)){case s.TIMEOUT_EXPIRED:return this.computeDistancesOnGPUSyncTimeout=setTimeout(f),this.computeDistancesOnGPUSyncTimeout;case s.WAIT_FAILED:throw new Error("should never get here");default:this.computeDistancesOnGPUSyncTimeout=null,s.deleteSync(c);const v=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao),s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),s.getBufferSubData(s.ARRAY_BUFFER,0,r),s.bindBuffer(s.ARRAY_BUFFER,null),v&&s.bindVertexArray(v),d()}};this.computeDistancesOnGPUSyncTimeout=setTimeout(f)});return o&&l!==!0&&s.useProgram(o),a&&s.bindVertexArray(a),u}}());at(this,"getSplatCenter",function(){const t={};return function(i,r,s){this.getLocalSplatParameters(i,t,s),t.splatBuffer.getSplatCenter(t.localIndex,r,t.sceneTransform)}}());at(this,"getSplatScaleAndRotation",function(){const t={},i=new nt;return function(r,s,a,o){this.getLocalSplatParameters(r,t,o),i.x=void 0,i.y=void 0,i.z=void 0,this.splatRenderMode===zd.TwoD&&(i.z=0),t.splatBuffer.getSplatScaleAndRotation(t.localIndex,s,a,t.sceneTransform,i)}}());at(this,"getSplatColor",function(){const t={};return function(i,r){this.getLocalSplatParameters(i,t),t.splatBuffer.getSplatColor(t.localIndex,r)}}());this.renderer=void 0,this.splatRenderMode=t,this.dynamicMode=i,this.enableOptionalEffects=r,this.halfPrecisionCovariancesOnGPU=s,this.devicePixelRatio=a,this.enableDistancesComputationOnGPU=o,this.integerBasedDistancesComputation=l,this.antialiased=c,this.kernel2DSize=p,this.maxScreenSpaceSplatSize=u,this.logLevel=d,this.sphericalHarmonicsDegree=f,this.minSphericalHarmonicsDegree=0,this.sceneFadeInRateMultiplier=h,this.scenes=[],this.splatTree=null,this.baseSplatTree=null,this.splatDataTextures={},this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Vu,this.calculatedSceneCenter=new nt,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!1,this.lastRenderer=null,this.visible=!1}static buildScenes(t,i,r){const s=[];s.length=i.length;for(let a=0;a<i.length;a++){const o=i[a],l=r[a]||{};let c=l.position||[0,0,0],u=l.rotation||[0,0,0,1],d=l.scale||[1,1,1];const f=new nt().fromArray(c),h=new ds().fromArray(u),p=new nt().fromArray(d),m=xa.createScene(o,f,h,p,l.splatAlphaRemovalThreshold||1,l.opacity,l.visible);t.add(m),s[a]=m}return s}static createScene(t,i,r,s,a,o=1,l=!0){return new _lt(t,i,r,s,a,o,l)}static buildSplatIndexMaps(t){const i=[],r=[];let s=0;for(let a=0;a<t.length;a++){const l=t[a].getMaxSplatCount();for(let c=0;c<l;c++)i[s]=c,r[s]=a,s++}return{localSplatIndexMap:i,sceneIndexMap:r}}build(t,i,r=!0,s=!1,a,o,l=!0){this.sceneOptions=i,this.finalBuild=s;const c=xa.getTotalMaxSplatCountForSplatBuffers(t),u=xa.buildScenes(this,t,i);if(r)for(let v=0;v<this.scenes.length&&v<u.length;v++){const g=u[v],y=this.getScene(v);g.copyTransformData(y)}this.scenes=u;let d=3;for(let v of t){const g=v.getMinSphericalHarmonicsDegree();g<d&&(d=g)}this.minSphericalHarmonicsDegree=Math.min(d,this.sphericalHarmonicsDegree);let f=!1;if(t.length!==this.lastBuildScenes.length)f=!0;else for(let v=0;v<t.length;v++)if(t[v]!==this.lastBuildScenes[v].splatBuffer){f=!0;break}let h=!0;if((this.scenes.length!==1||this.lastBuildSceneCount!==this.scenes.length||this.lastBuildMaxSplatCount!==c||f)&&(h=!1),!h){this.boundingBox=new Vu,l||(this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.firstRenderTime=-1),this.lastBuildScenes=[],this.lastBuildSplatCount=0,this.lastBuildMaxSplatCount=0,this.disposeMeshData(),this.geometry=Slt.build(c),this.splatRenderMode===zd.ThreeD?this.material=U4.build(this.dynamicMode,this.enableOptionalEffects,this.antialiased,this.maxScreenSpaceSplatSize,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree,this.kernel2DSize):this.material=z4.build(this.dynamicMode,this.enableOptionalEffects,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree);const v=xa.buildSplatIndexMaps(t);this.globalSplatIndexToLocalSplatIndexMap=v.localSplatIndexMap,this.globalSplatIndexToSceneIndexMap=v.sceneIndexMap}const p=this.getSplatCount(!0);this.enableDistancesComputationOnGPU&&this.setupDistancesComputationTransformFeedback();const m=this.refreshGPUDataFromSplatBuffers(h);for(let v=0;v<this.scenes.length;v++)this.lastBuildScenes[v]=this.scenes[v];return this.lastBuildSplatCount=p,this.lastBuildMaxSplatCount=this.getMaxSplatCount(),this.lastBuildSceneCount=this.scenes.length,s&&this.scenes.length>0&&this.buildSplatTree(i.map(v=>v.splatAlphaRemovalThreshold||1),a,o).then(()=>{this.onSplatTreeReadyCallback&&this.onSplatTreeReadyCallback(this.splatTree),this.onSplatTreeReadyCallback=null}),this.visible=this.scenes.length>0,m}freeIntermediateSplatData(){const t=i=>{delete i.source.data,delete i.image,i.onUpdate=null};delete this.splatDataTextures.baseData.covariances,delete this.splatDataTextures.baseData.centers,delete this.splatDataTextures.baseData.colors,delete this.splatDataTextures.baseData.sphericalHarmonics,delete this.splatDataTextures.centerColors.data,delete this.splatDataTextures.covariances.data,this.splatDataTextures.sphericalHarmonics&&delete this.splatDataTextures.sphericalHarmonics.data,this.splatDataTextures.sceneIndexes&&delete this.splatDataTextures.sceneIndexes.data,this.splatDataTextures.centerColors.texture.needsUpdate=!0,this.splatDataTextures.centerColors.texture.onUpdate=()=>{t(this.splatDataTextures.centerColors.texture)},this.splatDataTextures.covariances.texture.needsUpdate=!0,this.splatDataTextures.covariances.texture.onUpdate=()=>{t(this.splatDataTextures.covariances.texture)},this.splatDataTextures.sphericalHarmonics&&(this.splatDataTextures.sphericalHarmonics.texture?(this.splatDataTextures.sphericalHarmonics.texture.needsUpdate=!0,this.splatDataTextures.sphericalHarmonics.texture.onUpdate=()=>{t(this.splatDataTextures.sphericalHarmonics.texture)}):this.splatDataTextures.sphericalHarmonics.textures.forEach(i=>{i.needsUpdate=!0,i.onUpdate=()=>{t(i)}})),this.splatDataTextures.sceneIndexes&&(this.splatDataTextures.sceneIndexes.texture.needsUpdate=!0,this.splatDataTextures.sceneIndexes.texture.onUpdate=()=>{t(this.splatDataTextures.sceneIndexes.texture)})}dispose(){this.disposeMeshData(),this.disposeTextures(),this.disposeSplatTree(),this.enableDistancesComputationOnGPU&&(this.computeDistancesOnGPUSyncTimeout&&(clearTimeout(this.computeDistancesOnGPUSyncTimeout),this.computeDistancesOnGPUSyncTimeout=null),this.disposeDistancesComputationGPUResources()),this.scenes=[],this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.renderer=null,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Vu,this.calculatedSceneCenter=new nt,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!0,this.lastRenderer=null,this.visible=!1}disposeMeshData(){this.geometry&&this.geometry!==XY&&(this.geometry.dispose(),this.geometry=null),this.material&&(this.material.dispose(),this.material=null)}disposeTextures(){for(let t in this.splatDataTextures)if(this.splatDataTextures.hasOwnProperty(t)){const i=this.splatDataTextures[t];i.texture&&(i.texture.dispose(),i.texture=null)}this.splatDataTextures=null}disposeSplatTree(){this.splatTree&&(this.splatTree.dispose(),this.splatTree=null),this.baseSplatTree&&(this.baseSplatTree.dispose(),this.baseSplatTree=null)}getSplatTree(){return this.splatTree}onSplatTreeReady(t){this.onSplatTreeReadyCallback=t}getDataForDistancesComputation(t,i){const r=this.integerBasedDistancesComputation?this.getIntegerCenters(t,i,!0):this.getFloatCenters(t,i,!0),s=this.getSceneIndexes(t,i);return{centers:r,sceneIndexes:s}}refreshGPUDataFromSplatBuffers(t){const i=this.getSplatCount(!0);this.refreshDataTexturesFromSplatBuffers(t);const r=t?this.lastBuildSplatCount:0,{centers:s,sceneIndexes:a}=this.getDataForDistancesComputation(r,i-1);return this.enableDistancesComputationOnGPU&&this.refreshGPUBuffersForDistancesComputation(s,a,t),{from:r,to:i-1,count:i-r,centers:s,sceneIndexes:a}}refreshGPUBuffersForDistancesComputation(t,i,r=!1){const s=r?this.lastBuildSplatCount:0;this.updateGPUCentersBufferForDistancesComputation(r,t,s),this.updateGPUTransformIndexesBufferForDistancesComputation(r,i,s)}refreshDataTexturesFromSplatBuffers(t){const i=this.getSplatCount(!0),r=this.lastBuildSplatCount,s=i-1;t?this.updateBaseDataFromSplatBuffers(r,s):(this.setupDataTextures(),this.updateBaseDataFromSplatBuffers()),this.updateDataTexturesFromBaseData(r,s),this.updateVisibleRegion(t)}setupDataTextures(){const t=this.getMaxSplatCount(),i=this.getSplatCount(!0);this.disposeTextures();const r=(_,M)=>{const T=new Yn(4096,1024);for(;T.x*T.y*_<t*M;)T.y*=2;return T},s=_=>_>=1?Flt:Llt,a=_=>{const M=s(_),T=r(M,6);return{elementsPerTexelStored:M,texSize:T}};let o=this.getTargetCovarianceCompressionLevel();const l=0,c=this.getTargetSphericalHarmonicsCompressionLevel();let u,d,f;if(this.splatRenderMode===zd.ThreeD){const _=a(o);_.texSize.x*_.texSize.y>QY&&o===0&&(o=1),u=new Float32Array(t*M3)}else d=new Float32Array(t*3),f=new Float32Array(t*4);const h=new Float32Array(t*3),p=new Uint8Array(t*4);let m=Float32Array;c===1?m=Uint16Array:c===2&&(m=Uint8Array);const v=a1(this.minSphericalHarmonicsDegree),g=this.minSphericalHarmonicsDegree?new m(t*v):void 0,y=r(KI,4),x=new Uint32Array(y.x*y.y*KI);xa.updateCenterColorsPaddedData(0,i-1,h,p,x);const b=new dh(x,y.x,y.y,r1,sc);if(b.internalFormat="RGBA32UI",b.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=b,this.material.uniforms.centersColorsTextureSize.value.copy(y),this.material.uniformsNeedUpdate=!0,this.splatDataTextures={baseData:{covariances:u,scales:d,rotations:f,centers:h,colors:p,sphericalHarmonics:g},centerColors:{data:x,texture:b,size:y}},this.splatRenderMode===zd.ThreeD){const _=a(o),M=_.elementsPerTexelStored,T=_.texSize;let E=o>=1?Uint32Array:Float32Array;const I=o>=1?Blt:klt,L=new E(T.x*T.y*I);o===0?L.set(u):xa.updatePaddedCompressedCovariancesTextureData(u,L,0,0,u.length);let F;if(o>=1)F=new dh(L,T.x,T.y,r1,sc),F.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=F;else{F=new dh(L,T.x,T.y,yo,Yc),this.material.uniforms.covariancesTexture.value=F;const B=new dh(new Uint32Array(32),2,2,r1,sc);B.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=B,B.needsUpdate=!0}F.needsUpdate=!0,this.material.uniforms.covariancesAreHalfFloat.value=o>=1?1:0,this.material.uniforms.covariancesTextureSize.value.copy(T),this.splatDataTextures.covariances={data:L,texture:F,size:T,compressionLevel:o,elementsPerTexelStored:M,elementsPerTexelAllocated:I}}else{const M=r(qI,6);let T=Float32Array,E=Yc;const I=new T(M.x*M.y*qI);xa.updateScaleRotationsPaddedData(0,i-1,d,f,I);const L=new dh(I,M.x,M.y,yo,E);L.needsUpdate=!0,this.material.uniforms.scaleRotationsTexture.value=L,this.material.uniforms.scaleRotationsTextureSize.value.copy(M),this.splatDataTextures.scaleRotations={data:I,texture:L,size:M,compressionLevel:l}}if(g){const _=c===2?id:ky;let M=v;M%2!==0&&M++;const T=4,E=yo;let I=r(T,M);if(I.x*I.y<=QY){const L=I.x*I.y*T,F=new m(L);for(let P=0;P<i;P++){const z=v*P,O=M*P;for(let N=0;N<v;N++)F[O+N]=g[z+N]}const B=new dh(F,I.x,I.y,E,_);B.needsUpdate=!0,this.material.uniforms.sphericalHarmonicsTexture.value=B,this.splatDataTextures.sphericalHarmonics={componentCount:v,paddedComponentCount:M,data:F,textureCount:1,texture:B,size:I,compressionLevel:c,elementsPerTexel:T}}else{const L=v/3;M=L,M%2!==0&&M++,I=r(T,M);const F=I.x*I.y*T,B=[this.material.uniforms.sphericalHarmonicsTextureR,this.material.uniforms.sphericalHarmonicsTextureG,this.material.uniforms.sphericalHarmonicsTextureB],P=[],z=[];for(let O=0;O<3;O++){const N=new m(F);P.push(N);for(let q=0;q<i;q++){const te=v*q,Q=M*q;if(L>=3){for(let ee=0;ee<3;ee++)N[Q+ee]=g[te+O*3+ee];if(L>=8)for(let ee=0;ee<5;ee++)N[Q+3+ee]=g[te+9+O*5+ee]}}const H=new dh(N,I.x,I.y,E,_);z.push(H),H.needsUpdate=!0,B[O].value=H}this.material.uniforms.sphericalHarmonicsMultiTextureMode.value=1,this.splatDataTextures.sphericalHarmonics={componentCount:v,componentCountPerChannel:L,paddedComponentCount:M,data:P,textureCount:3,textures:z,size:I,compressionLevel:c,elementsPerTexel:T}}this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(I),this.material.uniforms.sphericalHarmonics8BitMode.value=c===2?1:0;for(let L=0;L<this.scenes.length;L++){const F=this.scenes[L].splatBuffer;this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[L]=F.minSphericalHarmonicsCoeff,this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[L]=F.maxSphericalHarmonicsCoeff}this.material.uniformsNeedUpdate=!0}const A=r(jY,4),S=new Uint32Array(A.x*A.y*jY);for(let _=0;_<i;_++)S[_]=this.globalSplatIndexToSceneIndexMap[_];const C=new dh(S,A.x,A.y,bT,sc);C.internalFormat="R32UI",C.needsUpdate=!0,this.material.uniforms.sceneIndexesTexture.value=C,this.material.uniforms.sceneIndexesTextureSize.value.copy(A),this.material.uniformsNeedUpdate=!0,this.splatDataTextures.sceneIndexes={data:S,texture:C,size:A},this.material.uniforms.sceneCount.value=this.scenes.length}updateBaseDataFromSplatBuffers(t,i){const r=this.splatDataTextures.covariances,s=r?r.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,c=l?l.compressionLevel:0;this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,this.splatDataTextures.baseData.sphericalHarmonics,void 0,s,o,c,t,i,t)}updateDataTexturesFromBaseData(t,i){const r=this.splatDataTextures.covariances,s=r?r.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,c=l?l.compressionLevel:0,u=this.splatDataTextures.centerColors,d=u.data,f=u.texture;xa.updateCenterColorsPaddedData(t,i,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,d);const h=this.renderer?this.renderer.properties.get(f):null;if(!h||!h.__webglTexture?f.needsUpdate=!0:this.updateDataTexture(d,u.texture,u.size,h,KI,Plt,4,t,i),r){const x=r.texture,b=t*M3,A=i*M3;if(s===0)for(let C=b;C<=A;C++){const _=this.splatDataTextures.baseData.covariances[C];r.data[C]=_}else xa.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,r.data,t*r.elementsPerTexelAllocated,b,A);const S=this.renderer?this.renderer.properties.get(x):null;!S||!S.__webglTexture?x.needsUpdate=!0:s===0?this.updateDataTexture(r.data,r.texture,r.size,S,r.elementsPerTexelStored,M3,4,t,i):this.updateDataTexture(r.data,r.texture,r.size,S,r.elementsPerTexelAllocated,r.elementsPerTexelAllocated,2,t,i)}if(a){const x=a.data,b=a.texture,A=6,S=o===0?4:2;xa.updateScaleRotationsPaddedData(t,i,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,x);const C=this.renderer?this.renderer.properties.get(b):null;!C||!C.__webglTexture?b.needsUpdate=!0:this.updateDataTexture(x,a.texture,a.size,C,qI,A,S,t,i)}const p=this.splatDataTextures.baseData.sphericalHarmonics;if(p){let x=4;c===1?x=2:c===2&&(x=1);const b=(C,_,M,T,E)=>{const I=this.renderer?this.renderer.properties.get(C):null;!I||!I.__webglTexture?C.needsUpdate=!0:this.updateDataTexture(T,C,_,I,M,E,x,t,i)},A=l.componentCount,S=l.paddedComponentCount;if(l.textureCount===1){const C=l.data;for(let _=t;_<=i;_++){const M=A*_,T=S*_;for(let E=0;E<A;E++)C[T+E]=p[M+E]}b(l.texture,l.size,l.elementsPerTexel,C,S)}else{const C=l.componentCountPerChannel;for(let _=0;_<3;_++){const M=l.data[_];for(let T=t;T<=i;T++){const E=A*T,I=S*T;if(C>=3){for(let L=0;L<3;L++)M[I+L]=p[E+_*3+L];if(C>=8)for(let L=0;L<5;L++)M[I+3+L]=p[E+9+_*5+L]}}b(l.textures[_],l.size,l.elementsPerTexel,M,S)}}}const m=this.splatDataTextures.sceneIndexes,v=m.data;for(let x=this.lastBuildSplatCount;x<=i;x++)v[x]=this.globalSplatIndexToSceneIndexMap[x];const g=m.texture,y=this.renderer?this.renderer.properties.get(g):null;!y||!y.__webglTexture?g.needsUpdate=!0:this.updateDataTexture(v,m.texture,m.size,y,1,1,1,this.lastBuildSplatCount,i)}getTargetCovarianceCompressionLevel(){return this.halfPrecisionCovariancesOnGPU?1:0}getTargetSphericalHarmonicsCompressionLevel(){return Math.max(1,this.getMaximumSplatBufferCompressionLevel())}getMaximumSplatBufferCompressionLevel(){let t;for(let i=0;i<this.scenes.length;i++){const s=this.getScene(i).splatBuffer;(i===0||s.compressionLevel>t)&&(t=s.compressionLevel)}return t}getMinimumSplatBufferCompressionLevel(){let t;for(let i=0;i<this.scenes.length;i++){const s=this.getScene(i).splatBuffer;(i===0||s.compressionLevel<t)&&(t=s.compressionLevel)}return t}static computeTextureUpdateRegion(t,i,r,s,a){const o=a/s,l=t*o,c=Math.floor(l/r),u=c*r*s,d=i*o,f=Math.floor(d/r),h=f*r*s+r*s;return{dataStart:u,dataEnd:h,startRow:c,endRow:f}}updateDataTexture(t,i,r,s,a,o,l,c,u){const d=this.renderer.getContext(),f=xa.computeTextureUpdateRegion(c,u,r.x,a,o),h=f.dataEnd-f.dataStart,p=new t.constructor(t.buffer,f.dataStart*l,h),m=f.endRow-f.startRow+1,v=this.webGLUtils.convert(i.type),g=this.webGLUtils.convert(i.format,i.colorSpace),y=d.getParameter(d.TEXTURE_BINDING_2D);d.bindTexture(d.TEXTURE_2D,s.__webglTexture),d.texSubImage2D(d.TEXTURE_2D,0,0,f.startRow,r.x,m,g,v,p),d.bindTexture(d.TEXTURE_2D,y)}static updatePaddedCompressedCovariancesTextureData(t,i,r,s,a){let o=new DataView(i.buffer),l=r,c=0;for(let u=s;u<=a;u+=2)o.setUint16(l*2,t[u],!0),o.setUint16(l*2+2,t[u+1],!0),l+=2,c++,c>=3&&(l+=2,c=0)}static updateCenterColorsPaddedData(t,i,r,s,a){for(let o=t;o<=i;o++){const l=o*4,c=o*3,u=o*4;a[u]=mot(s,l),a[u+1]=OI(r[c]),a[u+2]=OI(r[c+1]),a[u+3]=OI(r[c+2])}}static updateScaleRotationsPaddedData(t,i,r,s,a){for(let l=t;l<=i;l++){const c=l*3,u=l*4,d=l*6;a[d]=r[c],a[d+1]=r[c+1],a[d+2]=r[c+2],a[d+3]=s[u],a[d+4]=s[u+1],a[d+5]=s[u+2]}}updateVisibleRegion(t){const i=this.getSplatCount(!0),r=new nt;if(!t){const a=new nt;this.scenes.forEach(o=>{a.add(o.splatBuffer.sceneCenter)}),a.multiplyScalar(1/this.scenes.length),this.calculatedSceneCenter.copy(a),this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter),this.material.uniformsNeedUpdate=!0}const s=t?this.lastBuildSplatCount:0;for(let a=s;a<i;a++){this.getSplatCenter(a,r,!0);const o=r.sub(this.calculatedSceneCenter).length();o>this.maxSplatDistanceFromSceneCenter&&(this.maxSplatDistanceFromSceneCenter=o)}this.maxSplatDistanceFromSceneCenter-this.visibleRegionBufferRadius>$Y&&(this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter,this.visibleRegionRadius=Math.max(this.visibleRegionBufferRadius-$Y,0)),this.finalBuild&&(this.visibleRegionRadius=this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter),this.updateVisibleRegionFadeDistance()}updateVisibleRegionFadeDistance(t=Vb.Default){const i=Nlt*this.sceneFadeInRateMultiplier,r=Olt*this.sceneFadeInRateMultiplier,s=this.finalBuild?i:r,a=t===Vb.Default?s:r;this.visibleRegionFadeStartRadius=(this.visibleRegionRadius-this.visibleRegionFadeStartRadius)*a+this.visibleRegionFadeStartRadius;const l=(this.visibleRegionBufferRadius>0?this.visibleRegionFadeStartRadius/this.visibleRegionBufferRadius:0)>.99,c=l||t===Vb.Instant?1:0;this.material.uniforms.visibleRegionFadeStartRadius.value=this.visibleRegionFadeStartRadius,this.material.uniforms.visibleRegionRadius.value=this.visibleRegionRadius,this.material.uniforms.firstRenderTime.value=this.firstRenderTime,this.material.uniforms.currentTime.value=performance.now(),this.material.uniforms.fadeInComplete.value=c,this.material.uniformsNeedUpdate=!0,this.visibleRegionChanging=!l}updateRenderIndexes(t,i){const r=this.geometry;r.attributes.splatIndex.set(t),r.attributes.splatIndex.needsUpdate=!0,i>0&&this.firstRenderTime===-1&&(this.firstRenderTime=performance.now()),r.instanceCount=i,r.setDrawRange(0,i)}updateTransforms(){for(let t=0;t<this.scenes.length;t++)this.getScene(t).updateTransform(this.dynamicMode)}setSplatScale(t=1){this.splatScale=t,this.material.uniforms.splatScale.value=t,this.material.uniformsNeedUpdate=!0}getSplatScale(){return this.splatScale}setPointCloudModeEnabled(t){this.pointCloudModeEnabled=t,this.material.uniforms.pointCloudModeEnabled.value=t?1:0,this.material.uniformsNeedUpdate=!0}getPointCloudModeEnabled(){return this.pointCloudModeEnabled}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(t=!1){return t?xa.getTotalSplatCountForScenes(this.scenes):this.lastBuildSplatCount}static getTotalSplatCountForScenes(t){let i=0;for(let r of t)r&&r.splatBuffer&&(i+=r.splatBuffer.getSplatCount());return i}static getTotalSplatCountForSplatBuffers(t){let i=0;for(let r of t)i+=r.getSplatCount();return i}getMaxSplatCount(){return xa.getTotalMaxSplatCountForScenes(this.scenes)}static getTotalMaxSplatCountForScenes(t){let i=0;for(let r of t)r&&r.splatBuffer&&(i+=r.splatBuffer.getMaxSplatCount());return i}static getTotalMaxSplatCountForSplatBuffers(t){let i=0;for(let r of t)i+=r.getMaxSplatCount();return i}disposeDistancesComputationGPUResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.vao&&(t.deleteVertexArray(this.distancesTransformFeedback.vao),this.distancesTransformFeedback.vao=null),this.distancesTransformFeedback.program&&(t.deleteProgram(this.distancesTransformFeedback.program),t.deleteShader(this.distancesTransformFeedback.vertexShader),t.deleteShader(this.distancesTransformFeedback.fragmentShader),this.distancesTransformFeedback.program=null,this.distancesTransformFeedback.vertexShader=null,this.distancesTransformFeedback.fragmentShader=null),this.disposeDistancesComputationGPUBufferResources(),this.distancesTransformFeedback.id&&(t.deleteTransformFeedback(this.distancesTransformFeedback.id),this.distancesTransformFeedback.id=null)}disposeDistancesComputationGPUBufferResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.centersBuffer&&(this.distancesTransformFeedback.centersBuffer=null,t.deleteBuffer(this.distancesTransformFeedback.centersBuffer)),this.distancesTransformFeedback.outDistancesBuffer&&(t.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer),this.distancesTransformFeedback.outDistancesBuffer=null)}setRenderer(t){if(t!==this.renderer){this.renderer=t;const i=this.renderer.getContext(),r=new Ilt(i),s=new Dlt(i,r,{});if(r.init(s),this.webGLUtils=new aoe(i,r),this.enableDistancesComputationOnGPU&&this.getSplatCount()>0){this.setupDistancesComputationTransformFeedback();const{centers:a,sceneIndexes:o}=this.getDataForDistancesComputation(0,this.getSplatCount()-1);this.refreshGPUBuffersForDistancesComputation(a,o)}}}updateGPUCentersBufferForDistancesComputation(t,i,r){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=this.integerBasedDistancesComputation?Uint32Array:Float32Array,l=16,c=r*l;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,c,i);else{const u=new o(this.getMaxSplatCount()*l);u.set(i),s.bufferData(s.ARRAY_BUFFER,u,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}updateGPUTransformIndexesBufferForDistancesComputation(t,i,r){if(!this.renderer||!this.dynamicMode)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=r*4;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,o,i);else{const l=new Uint32Array(this.getMaxSplatCount()*4);l.set(i),s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}getSceneIndexes(t,i){let r;const s=i-t+1;r=new Uint32Array(s);for(let a=t;a<=i;a++)r[a]=this.globalSplatIndexToSceneIndexMap[a];return r}getLocalSplatParameters(t,i,r){r==null&&(r=!this.dynamicMode),i.splatBuffer=this.getSplatBufferForSplat(t),i.localIndex=this.getSplatLocalIndex(t),i.sceneTransform=r?this.getSceneTransformForSplat(t):null}fillSplatDataArrays(t,i,r,s,a,o,l,c=0,u=0,d=1,f,h,p=0,m){const v=new nt;v.x=void 0,v.y=void 0,this.splatRenderMode===zd.ThreeD?v.z=void 0:v.z=1;const g=new gi;let y=0,x=this.scenes.length-1;m!=null&&m>=0&&m<=this.scenes.length&&(y=m,x=m);for(let b=y;b<=x;b++){l==null&&(l=!this.dynamicMode);const A=this.getScene(b),S=A.splatBuffer;let C;if(l&&(this.getSceneTransform(b,g),C=g),t&&S.fillSplatCovarianceArray(t,C,f,h,p,c),i||r){if(!i||!r)throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');S.fillSplatScaleRotationArray(i,r,C,f,h,p,u,v)}s&&S.fillSplatCenterArray(s,C,f,h,p),a&&S.fillSplatColorArray(a,A.minimumAlpha,f,h,p),o&&S.fillSphericalHarmonicsArray(o,this.minSphericalHarmonicsDegree,C,f,h,p,d),p+=S.getSplatCount()}}getIntegerCenters(t,i,r=!1){const s=i-t+1,a=new Float32Array(s*3);this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t);let o,l=r?4:3;o=new Int32Array(s*l);for(let c=0;c<s;c++){for(let u=0;u<3;u++)o[c*l+u]=Math.round(a[c*3+u]*1e3);r&&(o[c*l+3]=1e3)}return o}getFloatCenters(t,i,r=!1){const s=i-t+1,a=new Float32Array(s*3);if(this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t),!r)return a;let o=new Float32Array(s*4);for(let l=0;l<s;l++){for(let c=0;c<3;c++)o[l*4+c]=a[l*3+c];o[l*4+3]=1}return o}getSceneTransform(t,i){const r=this.getScene(t);r.updateTransform(this.dynamicMode),i.copy(r.transform)}getScene(t){if(t<0||t>=this.scenes.length)throw new Error("SplatMesh::getScene() -> Invalid scene index.");return this.scenes[t]}getSceneCount(){return this.scenes.length}getSplatBufferForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).splatBuffer}getSceneIndexForSplat(t){return this.globalSplatIndexToSceneIndexMap[t]}getSceneTransformForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).transform}getSplatLocalIndex(t){return this.globalSplatIndexToLocalSplatIndexMap[t]}static getIntegerMatrixArray(t){const i=t.elements,r=[];for(let s=0;s<16;s++)r[s]=Math.round(i[s]*1e3);return r}computeBoundingBox(t=!1,i){let r=this.getSplatCount();if(i!=null){if(i<0||i>=this.scenes.length)throw new Error("SplatMesh::computeBoundingBox() -> Invalid scene index.");r=this.scenes[i].splatBuffer.getSplatCount()}const s=new Float32Array(r*3);this.fillSplatDataArrays(null,null,null,s,null,null,t,void 0,void 0,void 0,void 0,i);const a=new nt,o=new nt;for(let l=0;l<r;l++){const c=l*3,u=s[c],d=s[c+1],f=s[c+2];(l===0||u<a.x)&&(a.x=u),(l===0||d<a.y)&&(a.y=d),(l===0||f<a.z)&&(a.z=f),(l===0||u>o.x)&&(o.x=u),(l===0||d>o.y)&&(o.y=d),(l===0||f>o.z)&&(o.z=f)}return new Vu(a,o)}}var Ult="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",ZY="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",zlt="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",Vlt="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";function Hlt(n){let e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v,g,y,x,b;function A(S,C,_,M,T,E,I){const L=performance.now();if(!i&&(new Uint32Array(t,o,T.byteLength/b.BytesPerInt).set(T),new Float32Array(t,u,I.byteLength/b.BytesPerFloat).set(I),M)){let O;r?O=new Int32Array(t,d,E.byteLength/b.BytesPerInt):O=new Float32Array(t,d,E.byteLength/b.BytesPerFloat),O.set(E)}v||(v=new Uint32Array(y)),new Float32Array(t,m,16).set(_),new Uint32Array(t,h,y).set(v),e.exports.sortIndexes(o,p,d,f,h,m,l,c,u,y,S,C,a,M,r,s);const F={sortDone:!0,splatSortCount:S,splatRenderCount:C,sortTime:0};if(!i){const P=new Uint32Array(t,l,C);(!g||g.length<C)&&(g=new Uint32Array(C)),g.set(P),F.sortedIndexes=g}const B=performance.now();F.sortTime=B-L,n.postMessage(F)}n.onmessage=S=>{if(S.data.centers)centers=S.data.centers,sceneIndexes=S.data.sceneIndexes,r?new Int32Array(t,p+S.data.range.from*b.BytesPerInt*4,S.data.range.count*4).set(new Int32Array(centers)):new Float32Array(t,p+S.data.range.from*b.BytesPerFloat*4,S.data.range.count*4).set(new Float32Array(centers)),s&&new Uint32Array(t,c+S.data.range.from*4,S.data.range.count).set(new Uint32Array(sceneIndexes)),x=S.data.range.from+S.data.range.count;else if(S.data.sort){const C=Math.min(S.data.sort.splatRenderCount||0,x),_=Math.min(S.data.sort.splatSortCount||0,x),M=S.data.sort.usePrecomputedDistances;let T,E,I;i||(T=S.data.sort.indexesToSort,I=S.data.sort.transforms,M&&(E=S.data.sort.precomputedDistances)),A(_,C,S.data.sort.modelViewProj,M,T,E,I)}else if(S.data.init){b=S.data.init.Constants,a=S.data.init.splatCount,i=S.data.init.useSharedMemory,r=S.data.init.integerBasedSort,s=S.data.init.dynamicMode,y=S.data.init.distanceMapRange,x=0;const C=r?b.BytesPerInt*4:b.BytesPerFloat*4,_=new Uint8Array(S.data.init.sorterWasmBytes),M=16*b.BytesPerFloat,T=a*b.BytesPerInt,E=a*C,I=M,L=r?a*b.BytesPerInt:a*b.BytesPerFloat,F=a*b.BytesPerInt,B=a*b.BytesPerInt,P=r?y*b.BytesPerInt*2:y*b.BytesPerFloat*2,z=s?a*b.BytesPerInt:0,O=s?b.MaxScenes*M:0,N=b.MemoryPageSize*32,H=T+E+I+L+F+P+B+z+O+N,q=Math.floor(H/b.MemoryPageSize)+1,te={module:{},env:{memory:new WebAssembly.Memory({initial:q,maximum:q,shared:!0})}};WebAssembly.compile(_).then(Q=>WebAssembly.instantiate(Q,te)).then(Q=>{e=Q,o=0,p=o+T,m=p+E,d=m+I,f=d+L,h=f+F,l=h+P,c=l+B,u=c+z,t=te.env.memory.buffer,i?n.postMessage({sortSetupPhase1Complete:!0,indexesToSortBuffer:t,indexesToSortOffset:o,sortedIndexesBuffer:t,sortedIndexesOffset:l,precomputedDistancesBuffer:t,precomputedDistancesOffset:d,transformsBuffer:t,transformsOffset:u}):n.postMessage({sortSetupPhase1Complete:!0})})}}}function Glt(n,e,t,i,r,s=Ji.DefaultSplatSortDistanceMapPrecision){const a=new Worker(URL.createObjectURL(new Blob(["(",Hlt.toString(),")(self)"],{type:"application/javascript"})));let o=Ult;const l=bB()?loe():null;!t&&!e?(o=ZY,l&&l.major<=16&&l.minor<4&&(o=Vlt)):t?e||l&&l.major<=16&&l.minor<4&&(o=zlt):o=ZY;const c=atob(o),u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d);return a.postMessage({init:{sorterWasmBytes:u.buffer,splatCount:n,useSharedMemory:e,integerBasedSort:i,dynamicMode:r,distanceMapRange:1<<s,Constants:{BytesPerFloat:Ji.BytesPerFloat,BytesPerInt:Ji.BytesPerInt,MemoryPageSize:Ji.MemoryPageSize,MaxScenes:Ji.MaxScenes}}}),a}const Zv={None:0,VR:1,AR:2};class Q1{static createButton(e,t={}){const i=document.createElement("button");function r(){let c=null;async function u(h){h.addEventListener("end",d),await e.xr.setSession(h),i.textContent="EXIT VR",c=h}function d(){c.removeEventListener("end",d),i.textContent="ENTER VR",c=null}i.style.display="",i.style.cursor="pointer",i.style.left="calc(50% - 50px)",i.style.width="100px",i.textContent="ENTER VR";const f={...t,optionalFeatures:["local-floor","bounded-floor","layers",...t.optionalFeatures||[]]};i.onmouseenter=function(){i.style.opacity="1.0"},i.onmouseleave=function(){i.style.opacity="0.5"},i.onclick=function(){c===null?navigator.xr.requestSession("immersive-vr",f).then(u):(c.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(u).catch(h=>{console.warn(h)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(u).catch(h=>{console.warn(h)})}function s(){i.style.display="",i.style.cursor="auto",i.style.left="calc(50% - 75px)",i.style.width="150px",i.onmouseenter=null,i.onmouseleave=null,i.onclick=null}function a(){s(),i.textContent="VR NOT SUPPORTED"}function o(c){s(),console.warn("Exception when trying to call xr.isSessionSupported",c),i.textContent="VR NOT ALLOWED"}function l(c){c.style.position="absolute",c.style.bottom="20px",c.style.padding="12px 6px",c.style.border="1px solid #fff",c.style.borderRadius="4px",c.style.background="rgba(0,0,0,0.1)",c.style.color="#fff",c.style.font="normal 13px sans-serif",c.style.textAlign="center",c.style.opacity="0.5",c.style.outline="none",c.style.zIndex="999"}if("xr"in navigator)return i.id="VRButton",i.style.display="none",l(i),navigator.xr.isSessionSupported("immersive-vr").then(function(c){c?r():a(),c&&Q1.xrSessionIsGranted&&i.click()}).catch(o),i;{const c=document.createElement("a");return window.isSecureContext===!1?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}static registerSessionGrantedListener(){if(typeof navigator<"u"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{Q1.xrSessionIsGranted=!0})}}}Q1.xrSessionIsGranted=!1;Q1.registerSessionGrantedListener();class Wlt{static createButton(e,t={}){const i=document.createElement("button");function r(){if(t.domOverlay===void 0){const f=document.createElement("div");f.style.display="none",document.body.appendChild(f);const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("width",38),h.setAttribute("height",38),h.style.position="absolute",h.style.right="20px",h.style.top="20px",h.addEventListener("click",function(){c.end()}),f.appendChild(h);const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),p.setAttribute("stroke","#fff"),p.setAttribute("stroke-width",2),h.appendChild(p),t.optionalFeatures===void 0&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:f}}let c=null;async function u(f){f.addEventListener("end",d),e.xr.setReferenceSpaceType("local"),await e.xr.setSession(f),i.textContent="STOP AR",t.domOverlay.root.style.display="",c=f}function d(){c.removeEventListener("end",d),i.textContent="START AR",t.domOverlay.root.style.display="none",c=null}i.style.display="",i.style.cursor="pointer",i.style.left="calc(50% - 50px)",i.style.width="100px",i.textContent="START AR",i.onmouseenter=function(){i.style.opacity="1.0"},i.onmouseleave=function(){i.style.opacity="0.5"},i.onclick=function(){c===null?navigator.xr.requestSession("immersive-ar",t).then(u):(c.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(u).catch(f=>{console.warn(f)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(u).catch(f=>{console.warn(f)})}function s(){i.style.display="",i.style.cursor="auto",i.style.left="calc(50% - 75px)",i.style.width="150px",i.onmouseenter=null,i.onmouseleave=null,i.onclick=null}function a(){s(),i.textContent="AR NOT SUPPORTED"}function o(c){s(),console.warn("Exception when trying to call xr.isSessionSupported",c),i.textContent="AR NOT ALLOWED"}function l(c){c.style.position="absolute",c.style.bottom="20px",c.style.padding="12px 6px",c.style.border="1px solid #fff",c.style.borderRadius="4px",c.style.background="rgba(0,0,0,0.1)",c.style.color="#fff",c.style.font="normal 13px sans-serif",c.style.textAlign="center",c.style.opacity="0.5",c.style.outline="none",c.style.zIndex="999"}if("xr"in navigator)return i.id="ARButton",i.style.display="none",l(i),navigator.xr.isSessionSupported("immersive-ar").then(function(c){c?r():a()}).catch(o),i;{const c=document.createElement("a");return window.isSecureContext===!1?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}}const YI={Always:0,Never:2},qlt=50,Klt=.75,Ylt=15e5,Xlt=10,jlt=2.5,$lt=60,Th=class Th{constructor(e={}){at(this,"onKeyDown",function(){const e=new nt,t=new gi,i=new gi;return function(r){switch(e.set(0,0,-1),e.transformDirection(this.camera.matrixWorld),t.makeRotationAxis(e,Math.PI/128),i.makeRotationAxis(e,-Math.PI/128),r.code){case"KeyG":this.focalAdjustment+=.02,this.forceRenderNextFrame();break;case"KeyF":this.focalAdjustment-=.02,this.forceRenderNextFrame();break;case"ArrowLeft":this.camera.up.transformDirection(t);break;case"ArrowRight":this.camera.up.transformDirection(i);break;case"KeyC":this.showMeshCursor=!this.showMeshCursor;break;case"KeyU":this.showControlPlane=!this.showControlPlane;break;case"KeyI":this.showInfo=!this.showInfo,this.showInfo?this.infoPanel.show():this.infoPanel.hide();break;case"KeyO":this.usingExternalCamera||this.setOrthographicMode(!this.camera.isOrthographicCamera);break;case"KeyP":this.usingExternalCamera||this.splatMesh.setPointCloudModeEnabled(!this.splatMesh.getPointCloudModeEnabled());break;case"Equal":this.usingExternalCamera||this.splatMesh.setSplatScale(this.splatMesh.getSplatScale()+.05);break;case"Minus":this.usingExternalCamera||this.splatMesh.setSplatScale(Math.max(this.splatMesh.getSplatScale()-.05,0));break}}}());at(this,"onMouseUp",function(){const e=new Yn;return function(t){e.copy(this.mousePosition).sub(this.mouseDownPosition),$v()-this.mouseDownTime<.5&&e.length()<2&&this.onMouseClick(t)}}());at(this,"checkForFocalPointChange",function(){const e=new Yn,t=new nt,i=[];return function(){if(!this.transitioningCameraTarget&&(this.getRenderDimensions(e),i.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,e),this.raycaster.intersectSplatMesh(this.splatMesh,i),i.length>0)){const s=i[0].origin;t.copy(s).sub(this.camera.position),t.length()>Klt&&(this.previousCameraTarget.copy(this.controls.target),this.nextCameraTarget.copy(s),this.transitioningCameraTarget=!0,this.transitioningCameraTargetStartTime=$v())}}}());at(this,"updateSplatMesh",function(){const e=new Yn;return function(){if(!this.splatMesh)return;if(this.splatMesh.getSplatCount()>0){this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode),this.splatMesh.updateTransforms(),this.getRenderDimensions(e);const i=this.camera.projectionMatrix.elements[0]*.5*this.devicePixelRatio*e.x,r=this.camera.projectionMatrix.elements[5]*.5*this.devicePixelRatio*e.y,s=this.camera.isOrthographicCamera?1/this.devicePixelRatio:1,a=this.focalAdjustment*s,o=1/a;this.adjustForWebXRStereo(e),this.splatMesh.updateUniforms(e,i*a,r*a,this.camera.isOrthographicCamera,this.camera.zoom||1,o)}}}());at(this,"addSplatBuffers",function(){return function(e,t=[],i=!0,r=!0,s=!0,a=!1,o=!1,l=!0){if(this.isDisposingOrDisposed())return Promise.resolve();let c=null;const u=()=>{c!==null&&(this.loadingSpinner.removeTask(c),c=null)};return this.splatRenderReady=!1,new Promise(d=>{r&&(c=this.loadingSpinner.addTask("Processing splats...")),Al(()=>{if(this.isDisposingOrDisposed())d();else{const f=this.addSplatBuffersToMesh(e,t,i,s,a,l),h=this.splatMesh.getMaxSplatCount();this.sortWorker&&this.sortWorker.maxSplatCount!==h&&this.disposeSortWorker(),this.gpuAcceleratedSort||this.preSortMessages.push({centers:f.centers.buffer,sceneIndexes:f.sceneIndexes.buffer,range:{from:f.from,to:f.to,count:f.count}}),(!this.sortWorker&&h>0?this.setupSortWorker(this.splatMesh):Promise.resolve()).then(()=>{this.isDisposingOrDisposed()||this.runSplatSort(!0,!0).then(m=>{!this.sortWorker||!m?(this.splatRenderReady=!0,u(),d()):(o?this.splatRenderReady=!0:this.runAfterNextSort.push(()=>{this.splatRenderReady=!0}),this.runAfterNextSort.push(()=>{u(),d()}))})})}},!0)})}}());at(this,"addSplatBuffersToMesh",function(){let e;return function(t,i,r=!0,s=!1,a=!1,o=!0){if(this.isDisposingOrDisposed())return;let l=[],c=[];a||(l=this.splatMesh.scenes.map(h=>h.splatBuffer)||[],c=this.splatMesh.sceneOptions?this.splatMesh.sceneOptions.map(h=>h):[]),l.push(...t),c.push(...i),this.renderer&&this.splatMesh.setRenderer(this.renderer);const u=h=>{if(this.isDisposingOrDisposed())return;const p=this.splatMesh.getSplatCount();s&&p>=Ylt&&!h&&!e&&(this.loadingSpinner.setMinimized(!0,!0),e=this.loadingSpinner.addTask("Optimizing data structures..."))},d=h=>{this.isDisposingOrDisposed()||h&&e&&(this.loadingSpinner.removeTask(e),e=null)},f=this.splatMesh.build(l,c,!0,r,u,d,o);return r&&this.freeIntermediateSplatData&&this.splatMesh.freeIntermediateSplatData(),f}}());at(this,"shouldRender",function(){let e=0;const t=new nt,i=new ds,r=1e-4;return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return!1;let s=!1,a=!1;if(this.camera){const o=this.camera.position,l=this.camera.quaternion;a=Math.abs(o.x-t.x)>r||Math.abs(o.y-t.y)>r||Math.abs(o.z-t.z)>r||Math.abs(l.x-i.x)>r||Math.abs(l.y-i.y)>r||Math.abs(l.z-i.z)>r||Math.abs(l.w-i.w)>r}return s=this.renderMode!==YI.Never&&(e===0||this.splatMesh.visibleRegionChanging||a||this.renderMode===YI.Always||this.dynamicMode===!0||this.renderNextFrame),this.camera&&(t.copy(this.camera.position),i.copy(this.camera.quaternion)),e++,s}}());at(this,"render",function(){return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return;const e=i=>{for(let r of i.children)if(r.visible)return!0;return!1},t=this.renderer.autoClear;e(this.threeScene)&&(this.renderer.render(this.threeScene,this.camera),this.renderer.autoClear=!1),this.renderer.render(this.splatMesh,this.camera),this.renderer.autoClear=!1,this.sceneHelper.getFocusMarkerOpacity()>0&&this.renderer.render(this.sceneHelper.focusMarker,this.camera),this.showControlPlane&&this.renderer.render(this.sceneHelper.controlPlane,this.camera),this.renderer.autoClear=t}}());at(this,"updateFPS",function(){let e=$v(),t=0;return function(){if(this.consecutiveRenderFrames>$lt){const i=$v();i-e>=1?(this.currentFPS=t,t=0,e=i):t++}else this.currentFPS=null}}());at(this,"updateForRendererSizeChanges",function(){const e=new Yn,t=new Yn;let i;return function(){this.usingExternalCamera||(this.renderer.getSize(t),(i===void 0||i!==this.camera.isOrthographicCamera||t.x!==e.x||t.y!==e.y)&&(this.camera.isOrthographicCamera?(this.camera.left=-t.x/2,this.camera.right=t.x/2,this.camera.top=t.y/2,this.camera.bottom=-t.y/2):this.camera.aspect=t.x/t.y,this.camera.updateProjectionMatrix(),e.copy(t),i=this.camera.isOrthographicCamera))}}());at(this,"timingSensitiveUpdates",function(){let e;return function(){const t=$v();e||(e=t);const i=t-e;this.updateCameraTransition(t),this.updateFocusMarker(i),e=t}}());at(this,"updateCameraTransition",function(){let e=new nt,t=new nt,i=new nt;return function(r){if(this.transitioningCameraTarget){t.copy(this.previousCameraTarget).sub(this.camera.position).normalize(),i.copy(this.nextCameraTarget).sub(this.camera.position).normalize();const s=Math.acos(t.dot(i)),o=(s/(Math.PI/3)*.65+.3)/s*(r-this.transitioningCameraTargetStartTime);e.copy(this.previousCameraTarget).lerp(this.nextCameraTarget,o),this.camera.lookAt(e),this.controls.target.copy(e),o>=1&&(this.transitioningCameraTarget=!1)}}}());at(this,"updateFocusMarker",function(){const e=new Yn;let t=!1;return function(i){if(this.getRenderDimensions(e),this.transitioningCameraTarget){this.sceneHelper.setFocusMarkerVisibility(!0);const r=Math.max(this.sceneHelper.getFocusMarkerOpacity(),0);let s=Math.min(r+Xlt*i,1);this.sceneHelper.setFocusMarkerOpacity(s),this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e),t=!0,this.forceRenderNextFrame()}else{let r;if(t?r=1:r=Math.min(this.sceneHelper.getFocusMarkerOpacity(),1),r>0){this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e);let s=Math.max(r-jlt*i,0);this.sceneHelper.setFocusMarkerOpacity(s),s===0&&this.sceneHelper.setFocusMarkerVisibility(!1)}r>0&&this.forceRenderNextFrame(),t=!1}}}());at(this,"updateMeshCursor",function(){const e=[],t=new Yn;return function(){this.showMeshCursor?(this.forceRenderNextFrame(),this.getRenderDimensions(t),e.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,t),this.raycaster.intersectSplatMesh(this.splatMesh,e),e.length>0?(this.sceneHelper.setMeshCursorVisibility(!0),this.sceneHelper.positionAndOrientMeshCursor(e[0].origin,this.camera)):this.sceneHelper.setMeshCursorVisibility(!1)):(this.sceneHelper.getMeschCursorVisibility()&&this.forceRenderNextFrame(),this.sceneHelper.setMeshCursorVisibility(!1))}}());at(this,"updateInfoPanel",function(){const e=new Yn;return function(){if(!this.showInfo)return;const t=this.splatMesh.getSplatCount();this.getRenderDimensions(e);const i=this.controls?this.controls.target:null,r=this.showMeshCursor?this.sceneHelper.meshCursor.position:null,s=t>0?this.splatRenderCount/t*100:0;this.infoPanel.update(e,this.camera.position,i,this.camera.up,this.camera.isOrthographicCamera,r,this.currentFPS||"N/A",t,this.splatRenderCount,s,this.lastSortTime,this.focalAdjustment,this.splatMesh.getSplatScale(),this.splatMesh.getPointCloudModeEnabled())}}());at(this,"runSplatSort",function(){const e=new gi,t=[],i=new nt(0,0,-1),r=new nt(0,0,-1),s=new nt,a=new nt,o=[],l=[{angleThreshold:.55,sortFractions:[.125,.33333,.75]},{angleThreshold:.65,sortFractions:[.33333,.66667]},{angleThreshold:.8,sortFractions:[.5]}];return function(c=!1,u=!1){if(!this.initialized)return Promise.resolve(!1);if(this.sortRunning)return Promise.resolve(!0);if(this.splatMesh.getSplatCount()<=0)return this.splatRenderCount=0,Promise.resolve(!1);let d=0,f=0,h=!1,p=!1;if(r.set(0,0,-1).applyQuaternion(this.camera.quaternion),d=r.dot(i),f=a.copy(this.camera.position).sub(s).length(),!c&&!this.splatMesh.dynamicMode&&o.length===0&&(d<=.99&&(h=!0),f>=1&&(p=!0),!h&&!p))return Promise.resolve(!1);this.sortRunning=!0;let{splatRenderCount:m,shouldSortAll:v}=this.gatherSceneNodesForSort();v=v||u,this.splatRenderCount=m,e.copy(this.camera.matrixWorld).invert();const g=this.perspectiveCamera||this.camera;e.premultiply(g.projectionMatrix),this.splatMesh.dynamicMode||e.multiply(this.splatMesh.matrixWorld);let y=Promise.resolve(!0);return this.gpuAcceleratedSort&&(o.length<=1||o.length%2===0)&&(y=this.splatMesh.computeDistancesOnGPU(e,this.sortWorkerPrecomputedDistances)),y.then(()=>{if(o.length===0)if(this.splatMesh.dynamicMode||v)o.push(this.splatRenderCount);else{for(let A of l)if(d<A.angleThreshold){for(let S of A.sortFractions)o.push(Math.floor(this.splatRenderCount*S));break}o.push(this.splatRenderCount)}let x=Math.min(o.shift(),this.splatRenderCount);this.splatSortCount=x,t[0]=this.camera.position.x,t[1]=this.camera.position.y,t[2]=this.camera.position.z;const b={modelViewProj:e.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:x,usePrecomputedDistances:this.gpuAcceleratedSort};return this.splatMesh.dynamicMode&&this.splatMesh.fillTransformsArray(this.sortWorkerTransforms),this.sharedMemoryForWorkers||(b.indexesToSort=this.sortWorkerIndexesToSort,b.transforms=this.sortWorkerTransforms,this.gpuAcceleratedSort&&(b.precomputedDistances=this.sortWorkerPrecomputedDistances)),this.sortPromise=new Promise(A=>{this.sortPromiseResolver=A}),this.preSortMessages.length>0&&(this.preSortMessages.forEach(A=>{this.sortWorker.postMessage(A)}),this.preSortMessages=[]),this.sortWorker.postMessage({sort:b}),o.length===0&&(s.copy(this.camera.position),i.copy(r)),!0}),y}}());at(this,"gatherSceneNodesForSort",function(){const e=[];let t=null;const i=new nt,r=new nt,s=new nt,a=new gi,o=new gi,l=new gi,c=new nt,u=new nt(0,0,-1),d=new nt,f=h=>d.copy(h.max).sub(h.min).length();return function(h=!1){this.getRenderDimensions(c);const p=c.y/2/Math.tan(this.camera.fov/2*Gae.DEG2RAD),m=Math.atan(c.x/2/p),v=Math.atan(c.y/2/p),g=Math.cos(m),y=Math.cos(v),x=this.splatMesh.getSplatTree();if(x){o.copy(this.camera.matrixWorld).invert(),this.splatMesh.dynamicMode||o.multiply(this.splatMesh.matrixWorld);let b=0,A=0;for(let C=0;C<x.subTrees.length;C++){const _=x.subTrees[C];a.copy(o),this.splatMesh.dynamicMode&&(this.splatMesh.getSceneTransform(C,l),a.multiply(l));const M=_.nodesWithIndexes.length;for(let T=0;T<M;T++){const E=_.nodesWithIndexes[T];if(!E.data||!E.data.indexes||E.data.indexes.length===0)continue;s.copy(E.center).applyMatrix4(a);const I=s.length();s.normalize(),i.copy(s).setX(0).normalize(),r.copy(s).setY(0).normalize();const L=u.dot(r),F=u.dot(i),B=f(E),P=F<y-.6,z=L<g-.6;!h&&(z||P)&&I>B||(A+=E.data.indexes.length,e[b]=E,E.data.distanceToNode=I,b++)}}e.length=b,e.sort((C,_)=>C.data.distanceToNode<_.data.distanceToNode?-1:1);let S=A*Ji.BytesPerInt;for(let C=0;C<b;C++){const _=e[C],M=_.data.indexes.length,T=M*Ji.BytesPerInt;new Uint32Array(this.sortWorkerIndexesToSort.buffer,S-T,M).set(_.data.indexes),S-=T}return{splatRenderCount:A,shouldSortAll:!1}}else{const b=this.splatMesh.getSplatCount();if(!t||t.length!==b){t=new Uint32Array(b);for(let A=0;A<b;A++)t[A]=A}return this.sortWorkerIndexesToSort.set(t),{splatRenderCount:b,shouldSortAll:!0}}}}());if(e.cameraUp||(e.cameraUp=[0,1,0]),this.cameraUp=new nt().fromArray(e.cameraUp),e.initialCameraPosition||(e.initialCameraPosition=[0,10,15]),this.initialCameraPosition=new nt().fromArray(e.initialCameraPosition),e.initialCameraLookAt||(e.initialCameraLookAt=[0,0,0]),this.initialCameraLookAt=new nt().fromArray(e.initialCameraLookAt),this.dropInMode=e.dropInMode||!1,(e.selfDrivenMode===void 0||e.selfDrivenMode===null)&&(e.selfDrivenMode=!0),this.selfDrivenMode=e.selfDrivenMode&&!this.dropInMode,this.selfDrivenUpdateFunc=this.selfDrivenUpdate.bind(this),e.useBuiltInControls===void 0&&(e.useBuiltInControls=!0),this.useBuiltInControls=e.useBuiltInControls,this.rootElement=e.rootElement,this.ignoreDevicePixelRatio=e.ignoreDevicePixelRatio||!1,this.devicePixelRatio=this.ignoreDevicePixelRatio?1:window.devicePixelRatio||1,this.halfPrecisionCovariancesOnGPU=e.halfPrecisionCovariancesOnGPU||!1,this.threeScene=e.threeScene,this.renderer=e.renderer,this.camera=e.camera,this.gpuAcceleratedSort=e.gpuAcceleratedSort||!1,(e.integerBasedSort===void 0||e.integerBasedSort===null)&&(e.integerBasedSort=!0),this.integerBasedSort=e.integerBasedSort,(e.sharedMemoryForWorkers===void 0||e.sharedMemoryForWorkers===null)&&(e.sharedMemoryForWorkers=!0),this.sharedMemoryForWorkers=e.sharedMemoryForWorkers,this.dynamicScene=!!e.dynamicScene,this.antialiased=e.antialiased||!1,this.kernel2DSize=e.kernel2DSize===void 0?.3:e.kernel2DSize,this.webXRMode=e.webXRMode||Zv.None,this.webXRMode!==Zv.None&&(this.gpuAcceleratedSort=!1),this.webXRActive=!1,this.webXRSessionInit=e.webXRSessionInit||{},this.renderMode=e.renderMode||YI.Always,this.sceneRevealMode=e.sceneRevealMode||Vb.Default,this.focalAdjustment=e.focalAdjustment||1,this.maxScreenSpaceSplatSize=e.maxScreenSpaceSplatSize||1024,this.logLevel=e.logLevel||l1.None,this.sphericalHarmonicsDegree=e.sphericalHarmonicsDegree||0,this.enableOptionalEffects=e.enableOptionalEffects||!1,(e.enableSIMDInSort===void 0||e.enableSIMDInSort===null)&&(e.enableSIMDInSort=!0),this.enableSIMDInSort=e.enableSIMDInSort,(e.inMemoryCompressionLevel===void 0||e.inMemoryCompressionLevel===null)&&(e.inMemoryCompressionLevel=0),this.inMemoryCompressionLevel=e.inMemoryCompressionLevel,(e.optimizeSplatData===void 0||e.optimizeSplatData===null)&&(e.optimizeSplatData=!0),this.optimizeSplatData=e.optimizeSplatData,(e.freeIntermediateSplatData===void 0||e.freeIntermediateSplatData===null)&&(e.freeIntermediateSplatData=!1),this.freeIntermediateSplatData=e.freeIntermediateSplatData,bB()){const i=loe();i.major<17&&(this.enableSIMDInSort=!1),i.major<16&&(this.sharedMemoryForWorkers=!1)}(e.splatRenderMode===void 0||e.splatRenderMode===null)&&(e.splatRenderMode=zd.ThreeD),this.splatRenderMode=e.splatRenderMode,this.sceneFadeInRateMultiplier=e.sceneFadeInRateMultiplier||1,this.splatSortDistanceMapPrecision=e.splatSortDistanceMapPrecision||Ji.DefaultSplatSortDistanceMapPrecision;const t=this.integerBasedSort?20:24;this.splatSortDistanceMapPrecision=ls(this.splatSortDistanceMapPrecision,10,t),this.onSplatMeshChangedCallback=null,this.createSplatMesh(),this.controls=null,this.perspectiveControls=null,this.orthographicControls=null,this.orthographicCamera=null,this.perspectiveCamera=null,this.showMeshCursor=!1,this.showControlPlane=!1,this.showInfo=!1,this.sceneHelper=null,this.sortWorker=null,this.sortRunning=!1,this.splatRenderCount=0,this.splatSortCount=0,this.lastSplatSortCount=0,this.sortWorkerIndexesToSort=null,this.sortWorkerSortedIndexes=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.preSortMessages=[],this.runAfterNextSort=[],this.selfDrivenModeRunning=!1,this.splatRenderReady=!1,this.raycaster=new wlt,this.infoPanel=null,this.startInOrthographicMode=!1,this.currentFPS=0,this.lastSortTime=0,this.consecutiveRenderFrames=0,this.previousCameraTarget=new nt,this.nextCameraTarget=new nt,this.mousePosition=new Yn,this.mouseDownPosition=new Yn,this.mouseDownTime=null,this.resizeObserver=null,this.mouseMoveListener=null,this.mouseDownListener=null,this.mouseUpListener=null,this.keyDownListener=null,this.sortPromise=null,this.sortPromiseResolver=null,this.splatSceneDownloadPromises={},this.splatSceneDownloadAndBuildPromise=null,this.splatSceneRemovalPromise=null,this.loadingSpinner=new nL(null,this.rootElement||document.body),this.loadingSpinner.hide(),this.loadingProgressBar=new vlt(this.rootElement||document.body),this.loadingProgressBar.hide(),this.infoPanel=new glt(this.rootElement||document.body),this.infoPanel.hide(),this.usingExternalCamera=!!(this.dropInMode||this.camera),this.usingExternalRenderer=!!(this.dropInMode||this.renderer),this.initialized=!1,this.disposing=!1,this.disposed=!1,this.disposePromise=null,this.dropInMode||this.init()}createSplatMesh(){this.splatMesh=new xa(this.splatRenderMode,this.dynamicScene,this.enableOptionalEffects,this.halfPrecisionCovariancesOnGPU,this.devicePixelRatio,this.gpuAcceleratedSort,this.integerBasedSort,this.antialiased,this.maxScreenSpaceSplatSize,this.logLevel,this.sphericalHarmonicsDegree,this.sceneFadeInRateMultiplier,this.kernel2DSize),this.splatMesh.frustumCulled=!1,this.onSplatMeshChangedCallback&&this.onSplatMeshChangedCallback()}init(){this.initialized||(this.rootElement||(this.usingExternalRenderer?this.rootElement=this.renderer.domElement||document.body:(this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="absolute",document.body.appendChild(this.rootElement))),this.setupCamera(),this.setupRenderer(),this.setupWebXR(this.webXRSessionInit),this.setupControls(),this.setupEventHandlers(),this.threeScene=this.threeScene||new Cnt,this.sceneHelper=new Ub(this.threeScene),this.sceneHelper.setupMeshCursor(),this.sceneHelper.setupFocusMarker(),this.sceneHelper.setupControlPlane(),this.loadingProgressBar.setContainer(this.rootElement),this.loadingSpinner.setContainer(this.rootElement),this.infoPanel.setContainer(this.rootElement),this.initialized=!0)}setupCamera(){if(!this.usingExternalCamera){const e=new Yn;this.getRenderDimensions(e),this.perspectiveCamera=new Ql(qlt,e.x/e.y,.1,1e3),this.orthographicCamera=new vB(e.x/-2,e.x/2,e.y/2,e.y/-2,.1,1e3),this.camera=this.startInOrthographicMode?this.orthographicCamera:this.perspectiveCamera,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt)}}setupRenderer(){if(!this.usingExternalRenderer){const e=new Yn;this.getRenderDimensions(e),this.renderer=new pot({antialias:!1,precision:"highp"}),this.renderer.setPixelRatio(this.devicePixelRatio),this.renderer.autoClear=!0,this.renderer.setClearColor(new pr(0),0),this.renderer.setSize(e.x,e.y),this.resizeObserver=new ResizeObserver(()=>{this.getRenderDimensions(e),this.renderer.setSize(e.x,e.y),this.forceRenderNextFrame()}),this.resizeObserver.observe(this.rootElement),this.rootElement.appendChild(this.renderer.domElement)}}setupWebXR(e){this.webXRMode&&(this.webXRMode===Zv.VR?this.rootElement.appendChild(Q1.createButton(this.renderer,e)):this.webXRMode===Zv.AR&&this.rootElement.appendChild(Wlt.createButton(this.renderer,e)),this.renderer.xr.addEventListener("sessionstart",t=>{this.webXRActive=!0}),this.renderer.xr.addEventListener("sessionend",t=>{this.webXRActive=!1}),this.renderer.xr.enabled=!0,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt))}setupControls(){if(this.useBuiltInControls&&this.webXRMode===Zv.None){this.usingExternalCamera?this.camera.isOrthographicCamera?this.orthographicControls=new C3(this.camera,this.renderer.domElement):this.perspectiveControls=new C3(this.camera,this.renderer.domElement):(this.perspectiveControls=new C3(this.perspectiveCamera,this.renderer.domElement),this.orthographicControls=new C3(this.orthographicCamera,this.renderer.domElement));for(let e of[this.orthographicControls,this.perspectiveControls])e&&(e.listenToKeyEvents(window),e.rotateSpeed=.5,e.maxPolarAngle=Math.PI*.75,e.minPolarAngle=.1,e.enableDamping=!0,e.dampingFactor=.05,e.target.copy(this.initialCameraLookAt),e.update());this.controls=this.camera.isOrthographicCamera?this.orthographicControls:this.perspectiveControls,this.controls.update()}}setupEventHandlers(){this.useBuiltInControls&&this.webXRMode===Zv.None&&(this.mouseMoveListener=this.onMouseMove.bind(this),this.renderer.domElement.addEventListener("pointermove",this.mouseMoveListener,!1),this.mouseDownListener=this.onMouseDown.bind(this),this.renderer.domElement.addEventListener("pointerdown",this.mouseDownListener,!1),this.mouseUpListener=this.onMouseUp.bind(this),this.renderer.domElement.addEventListener("pointerup",this.mouseUpListener,!1),this.keyDownListener=this.onKeyDown.bind(this),window.addEventListener("keydown",this.keyDownListener,!1))}removeEventHandlers(){this.useBuiltInControls&&(this.renderer.domElement.removeEventListener("pointermove",this.mouseMoveListener),this.mouseMoveListener=null,this.renderer.domElement.removeEventListener("pointerdown",this.mouseDownListener),this.mouseDownListener=null,this.renderer.domElement.removeEventListener("pointerup",this.mouseUpListener),this.mouseUpListener=null,window.removeEventListener("keydown",this.keyDownListener),this.keyDownListener=null)}setRenderMode(e){this.renderMode=e}setActiveSphericalHarmonicsDegrees(e){this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value=e,this.splatMesh.material.uniformsNeedUpdate=!0}onSplatMeshChanged(e){this.onSplatMeshChangedCallback=e}onMouseMove(e){this.mousePosition.set(e.offsetX,e.offsetY)}onMouseDown(){this.mouseDownPosition.copy(this.mousePosition),this.mouseDownTime=$v()}onMouseClick(e){this.mousePosition.set(e.offsetX,e.offsetY),this.checkForFocalPointChange()}getRenderDimensions(e){this.rootElement?(e.x=this.rootElement.offsetWidth,e.y=this.rootElement.offsetHeight):this.renderer.getSize(e)}setOrthographicMode(e){if(e===this.camera.isOrthographicCamera)return;const t=this.camera,i=e?this.orthographicCamera:this.perspectiveCamera;if(i.position.copy(t.position),i.up.copy(t.up),i.rotation.copy(t.rotation),i.quaternion.copy(t.quaternion),i.matrix.copy(t.matrix),this.camera=i,this.controls){const r=o=>{o.saveState(),o.reset()},s=this.controls,a=e?this.orthographicControls:this.perspectiveControls;r(a),r(s),a.target.copy(s.target),e?Th.setCameraZoomFromPosition(i,t,s):Th.setCameraPositionFromZoom(i,t,a),this.controls=a,this.camera.lookAt(this.controls.target)}}adjustForWebXRStereo(e){if(this.camera&&this.webXRActive){const i=this.renderer.xr.getCamera().projectionMatrix.elements[0],r=this.camera.projectionMatrix.elements[0];e.x*=r/i}}isLoadingOrUnloading(){return Object.keys(this.splatSceneDownloadPromises).length>0||this.splatSceneDownloadAndBuildPromise!==null||this.splatSceneRemovalPromise!==null}isDisposingOrDisposed(){return this.disposing||this.disposed}addSplatSceneDownloadPromise(e){this.splatSceneDownloadPromises[e.id]=e}removeSplatSceneDownloadPromise(e){delete this.splatSceneDownloadPromises[e.id]}setSplatSceneDownloadAndBuildPromise(e){this.splatSceneDownloadAndBuildPromise=e}clearSplatSceneDownloadAndBuildPromise(){this.splatSceneDownloadAndBuildPromise=null}addSplatScene(e,t={}){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");t.progressiveLoad&&this.splatMesh.scenes&&this.splatMesh.scenes.length>0&&(console.log('addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'),t.progressiveLoad=!1);const i=t.format!==void 0&&t.format!==null?t.format:GY(e),r=Th.isProgressivelyLoadable(i)&&t.progressiveLoad,s=t.showLoadingUI!==void 0&&t.showLoadingUI!==null?t.showLoadingUI:!0;let a=null;s&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=()=>{this.loadingProgressBar.hide(),this.loadingSpinner.removeAllTasks()},l=(m,v,g)=>{if(s)if(g===Is.Downloading)if(m==100)this.loadingSpinner.setMessageForTask(a,"Download complete!");else if(r)this.loadingSpinner.setMessageForTask(a,"Downloading splats...");else{const y=v?`: ${v}`:"...";this.loadingSpinner.setMessageForTask(a,`Downloading${y}`)}else g===Is.Processing&&this.loadingSpinner.setMessageForTask(a,"Processing splats...")};let c=!1,u=0;const d=(m,v)=>{s&&((m&&r||v&&!r)&&(this.loadingSpinner.removeTask(a),!v&&!c&&this.loadingProgressBar.show()),r&&(v?(c=!0,this.loadingProgressBar.hide()):this.loadingProgressBar.setProgress(u)))},f=(m,v,g)=>{u=m,l(m,v,g),t.onProgress&&t.onProgress(m,v,g)},h=(m,v,g)=>{!r&&t.onProgress&&t.onProgress(0,"0%",Is.Processing);const y={rotation:t.rotation||t.orientation,position:t.position,scale:t.scale,splatAlphaRemovalThreshold:t.splatAlphaRemovalThreshold};return this.addSplatBuffers([m],[y],g,v&&s,s,r,r).then(()=>{!r&&t.onProgress&&t.onProgress(100,"100%",Is.Processing),d(v,g)})};return(r?this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this):this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this))(e,i,t.splatAlphaRemovalThreshold,h.bind(this),f,o.bind(this),t.headers)}downloadAndBuildSingleSplatSceneStandardLoad(e,t,i,r,s,a,o){const l=this.downloadSplatSceneToSplatBuffer(e,i,s,!1,void 0,t,o),c=UI(l.abortHandler);return l.then(u=>(this.removeSplatSceneDownloadPromise(l),r(u,!0,!0).then(()=>{c.resolve(),this.clearSplatSceneDownloadAndBuildPromise()}))).catch(u=>{a&&a(),this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(l),c.reject(this.updateError(u,`Viewer::addSplatScene -> Could not load file ${e}`))}),this.addSplatSceneDownloadPromise(l),this.setSplatSceneDownloadAndBuildPromise(c.promise),c.promise}downloadAndBuildSingleSplatSceneProgressiveLoad(e,t,i,r,s,a,o){let l=0,c=!1;const u=[],d=()=>{if(u.length>0&&!c&&!this.isDisposingOrDisposed()){c=!0;const v=u.shift();r(v.splatBuffer,v.firstBuild,v.finalBuild).then(()=>{c=!1,v.firstBuild?p.resolve():v.finalBuild&&(m.resolve(),this.clearSplatSceneDownloadAndBuildPromise()),u.length>0&&Al(()=>d())})}},f=(v,g)=>{this.isDisposingOrDisposed()||(g||u.length===0||v.getSplatCount()>u[0].splatBuffer.getSplatCount())&&(u.push({splatBuffer:v,firstBuild:l===0,finalBuild:g}),l++,d())},h=this.downloadSplatSceneToSplatBuffer(e,i,s,!0,f,t,o),p=UI(h.abortHandler),m=UI();return this.addSplatSceneDownloadPromise(h),this.setSplatSceneDownloadAndBuildPromise(m.promise),h.then(()=>{this.removeSplatSceneDownloadPromise(h)}).catch(v=>{this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(h);const g=this.updateError(v,"Viewer::addSplatScene -> Could not load one or more scenes");p.reject(g),a&&a(g)}),p.promise}addSplatScenes(e,t=!0,i=void 0){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");const r=e.length,s=[];let a;t&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=(d,f,h,p)=>{s[d]=f;let m=0;for(let v=0;v<r;v++)m+=s[v]||0;m=m/r,h=`${m.toFixed(2)}%`,t&&p===Is.Downloading&&this.loadingSpinner.setMessageForTask(a,m==100?"Download complete!":`Downloading: ${h}`),i&&i(m,h,p)},l=[],c=[];for(let d=0;d<e.length;d++){const f=e[d],h=f.format!==void 0&&f.format!==null?f.format:GY(f.path),p=this.downloadSplatSceneToSplatBuffer(f.path,f.splatAlphaRemovalThreshold,o.bind(this,d),!1,void 0,h,f.headers);l.push(p),c.push(p.promise)}const u=new sA((d,f)=>{Promise.all(c).then(h=>{t&&this.loadingSpinner.removeTask(a),i&&i(0,"0%",Is.Processing),this.addSplatBuffers(h,e,!0,t,t,!1,!1).then(()=>{i&&i(100,"100%",Is.Processing),this.clearSplatSceneDownloadAndBuildPromise(),d()})}).catch(h=>{t&&this.loadingSpinner.removeTask(a),this.clearSplatSceneDownloadAndBuildPromise(),f(this.updateError(h,"Viewer::addSplatScenes -> Could not load one or more splat scenes."))}).finally(()=>{this.removeSplatSceneDownloadPromise(u)})},d=>{for(let f of l)f.abort(d)});return this.addSplatSceneDownloadPromise(u),this.setSplatSceneDownloadAndBuildPromise(u),u}downloadSplatSceneToSplatBuffer(e,t=1,i=void 0,r=!1,s=void 0,a,o){try{if(a===Oo.Splat||a===Oo.KSplat||a===Oo.Ply){const l=r?!1:this.optimizeSplatData;if(a===Oo.Splat)return RB.loadFromURL(e,i,r,s,t,this.inMemoryCompressionLevel,l,o);if(a===Oo.KSplat)return tL.loadFromURL(e,i,r,s,o);if(a===Oo.Ply)return IB.loadFromURL(e,i,r,s,t,this.inMemoryCompressionLevel,l,this.sphericalHarmonicsDegree,o)}else if(a===Oo.Spz)return DB.loadFromURL(e,i,t,this.inMemoryCompressionLevel,this.optimizeSplatData,this.sphericalHarmonicsDegree,o)}catch(l){throw this.updateError(l,null)}throw new Error(`Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${e}`)}static isProgressivelyLoadable(e){return e===Oo.Splat||e===Oo.KSplat||e===Oo.Ply}setupSortWorker(e){if(!this.isDisposingOrDisposed())return new Promise(t=>{const i=this.integerBasedSort?Int32Array:Float32Array,r=e.getSplatCount(),s=e.getMaxSplatCount();this.sortWorker=Glt(s,this.sharedMemoryForWorkers,this.enableSIMDInSort,this.integerBasedSort,this.splatMesh.dynamicMode,this.splatSortDistanceMapPrecision),this.sortWorker.onmessage=a=>{if(a.data.sortDone){if(this.sortRunning=!1,this.sharedMemoryForWorkers)this.splatMesh.updateRenderIndexes(this.sortWorkerSortedIndexes,a.data.splatRenderCount);else{const o=new Uint32Array(a.data.sortedIndexes.buffer,0,a.data.splatRenderCount);this.splatMesh.updateRenderIndexes(o,a.data.splatRenderCount)}this.lastSplatSortCount=this.splatSortCount,this.lastSortTime=a.data.sortTime,this.sortPromiseResolver(),this.sortPromiseResolver=null,this.forceRenderNextFrame(),this.runAfterNextSort.length>0&&(this.runAfterNextSort.forEach(o=>{o()}),this.runAfterNextSort.length=0)}else if(a.data.sortCanceled)this.sortRunning=!1;else if(a.data.sortSetupPhase1Complete){this.logLevel>=l1.Info&&console.log("Sorting web worker WASM setup complete."),this.sharedMemoryForWorkers?(this.sortWorkerSortedIndexes=new Uint32Array(a.data.sortedIndexesBuffer,a.data.sortedIndexesOffset,s),this.sortWorkerIndexesToSort=new Uint32Array(a.data.indexesToSortBuffer,a.data.indexesToSortOffset,s),this.sortWorkerPrecomputedDistances=new i(a.data.precomputedDistancesBuffer,a.data.precomputedDistancesOffset,s),this.sortWorkerTransforms=new Float32Array(a.data.transformsBuffer,a.data.transformsOffset,Ji.MaxScenes*16)):(this.sortWorkerIndexesToSort=new Uint32Array(s),this.sortWorkerPrecomputedDistances=new i(s),this.sortWorkerTransforms=new Float32Array(Ji.MaxScenes*16));for(let o=0;o<r;o++)this.sortWorkerIndexesToSort[o]=o;if(this.sortWorker.maxSplatCount=s,this.logLevel>=l1.Info){console.log("Sorting web worker ready.");const o=this.splatMesh.getSplatDataTextures(),l=o.covariances.size,c=o.centerColors.size;console.log("Covariances texture size: "+l.x+" x "+l.y),console.log("Centers/colors texture size: "+c.x+" x "+c.y)}t()}}})}updateError(e,t){return e instanceof ooe?e:e instanceof O4?new Error("File type or server does not support progressive loading."):t?new Error(t):e}disposeSortWorker(){this.sortWorker&&this.sortWorker.terminate(),this.sortWorker=null,this.sortPromise=null,this.sortPromiseResolver&&(this.sortPromiseResolver(),this.sortPromiseResolver=null),this.preSortMessages=[],this.sortRunning=!1}removeSplatScene(e,t=!0){return this.removeSplatScenes([e],t)}removeSplatScenes(e,t=!0){if(this.isLoadingOrUnloading())throw new Error("Cannot remove splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot remove splat scene after dispose() is called.");let i;return this.splatSceneRemovalPromise=new Promise((r,s)=>{let a;t&&(this.loadingSpinner.removeAllTasks(),this.loadingSpinner.show(),a=this.loadingSpinner.addTask("Removing splat scene..."));const o=()=>{t&&(this.loadingSpinner.hide(),this.loadingSpinner.removeTask(a))},l=u=>{o(),this.splatSceneRemovalPromise=null,u?s(u):r()},c=()=>this.isDisposingOrDisposed()?(l(),!0):!1;i=this.sortPromise||Promise.resolve(),i.then(()=>{if(c())return;const u=[],d=[],f=[];for(let h=0;h<this.splatMesh.scenes.length;h++){let p=!1;for(let m of e)if(m===h){p=!0;break}if(!p){const m=this.splatMesh.scenes[h];u.push(m.splatBuffer),d.push(this.splatMesh.sceneOptions[h]),f.push({position:m.position.clone(),quaternion:m.quaternion.clone(),scale:m.scale.clone()})}}this.disposeSortWorker(),this.splatMesh.dispose(),this.sceneRevealMode=Vb.Instant,this.createSplatMesh(),this.addSplatBuffers(u,d,!0,!1,!0).then(()=>{c()||(o(),this.splatMesh.scenes.forEach((h,p)=>{h.position.copy(f[p].position),h.quaternion.copy(f[p].quaternion),h.scale.copy(f[p].scale)}),this.splatMesh.updateTransforms(),this.splatRenderReady=!1,this.runSplatSort(!0).then(()=>{if(c()){this.splatRenderReady=!0;return}i=this.sortPromise||Promise.resolve(),i.then(()=>{this.splatRenderReady=!0,l()})}))}).catch(h=>{l(h)})})}),this.splatSceneRemovalPromise}start(){if(this.selfDrivenMode)this.webXRMode?this.renderer.setAnimationLoop(this.selfDrivenUpdateFunc):this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc),this.selfDrivenModeRunning=!0;else throw new Error("Cannot start viewer unless it is in self driven mode.")}stop(){this.selfDrivenMode&&this.selfDrivenModeRunning&&(this.webXRMode?this.renderer.setAnimationLoop(null):cancelAnimationFrame(this.requestFrameId),this.selfDrivenModeRunning=!1)}async dispose(){if(this.isDisposingOrDisposed())return this.disposePromise;let e=[],t=[];for(let i in this.splatSceneDownloadPromises)if(this.splatSceneDownloadPromises.hasOwnProperty(i)){const r=this.splatSceneDownloadPromises[i];t.push(r),e.push(r.promise)}return this.sortPromise&&e.push(this.sortPromise),this.disposing=!0,this.disposePromise=Promise.all(e).finally(()=>{this.stop(),this.orthographicControls&&(this.orthographicControls.dispose(),this.orthographicControls=null),this.perspectiveControls&&(this.perspectiveControls.dispose(),this.perspectiveControls=null),this.controls=null,this.splatMesh&&(this.splatMesh.dispose(),this.splatMesh=null),this.sceneHelper&&(this.sceneHelper.dispose(),this.sceneHelper=null),this.resizeObserver&&(this.resizeObserver.unobserve(this.rootElement),this.resizeObserver=null),this.disposeSortWorker(),this.removeEventHandlers(),this.loadingSpinner.removeAllTasks(),this.loadingSpinner.setContainer(null),this.loadingProgressBar.hide(),this.loadingProgressBar.setContainer(null),this.infoPanel.setContainer(null),this.camera=null,this.threeScene=null,this.splatRenderReady=!1,this.initialized=!1,this.renderer&&(this.usingExternalRenderer||(this.rootElement.removeChild(this.renderer.domElement),this.renderer.dispose()),this.renderer=null),this.usingExternalRenderer||document.body.removeChild(this.rootElement),this.sortWorkerSortedIndexes=null,this.sortWorkerIndexesToSort=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.disposed=!0,this.disposing=!1,this.disposePromise=null}),t.forEach(i=>{i.abort("Scene disposed")}),this.disposePromise}selfDrivenUpdate(){this.selfDrivenMode&&!this.webXRMode&&(this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc)),this.update(),this.shouldRender()?(this.render(),this.consecutiveRenderFrames++):this.consecutiveRenderFrames=0,this.renderNextFrame=!1}forceRenderNextFrame(){this.renderNextFrame=!0}update(e,t){this.dropInMode&&this.updateForDropInMode(e,t),!(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())&&(this.controls&&(this.controls.update(),this.camera.isOrthographicCamera&&!this.usingExternalCamera&&Th.setCameraPositionFromZoom(this.camera,this.camera,this.controls)),this.runSplatSort(),this.updateForRendererSizeChanges(),this.updateSplatMesh(),this.updateMeshCursor(),this.updateFPS(),this.timingSensitiveUpdates(),this.updateInfoPanel(),this.updateControlPlane())}updateForDropInMode(e,t){this.renderer=e,this.splatMesh&&this.splatMesh.setRenderer(this.renderer),this.camera=t,this.controls&&(this.controls.object=t),this.init()}updateControlPlane(){this.showControlPlane?(this.sceneHelper.setControlPlaneVisibility(!0),this.sceneHelper.positionAndOrientControlPlane(this.controls.target,this.camera.up)):this.sceneHelper.setControlPlaneVisibility(!1)}getSplatMesh(){return this.splatMesh}getSplatScene(e){return this.splatMesh.getScene(e)}getSceneCount(){return this.splatMesh.getSceneCount()}isMobile(){return navigator.userAgent.includes("Mobi")}};at(Th,"setCameraPositionFromZoom",function(){const e=new nt;return function(t,i,r){const s=1/(i.zoom*.001);e.copy(r.target).sub(t.position).normalize().multiplyScalar(s).negate(),t.position.copy(r.target).add(e)}}()),at(Th,"setCameraZoomFromPosition",function(){const e=new nt;return function(t,i,r){const s=e.copy(r.target).sub(i.position).length();t.zoom=1/(s*.001)}}());let JY=Th;function eX(n){const e={h1:"h1",p:"p",...n.components};return pb(Kt,{children:[pb(e.h1,{children:"简介"}),`
`,pb(e.p,{children:"Aute amet minim mollit nisi adipisicing cupidatat. Duis sit tempor consequat ea nisi qui consequat deserunt. Officia duis sit mollit dolor officia occaecat. Minim aute excepteur nostrud adipisicing magna nisi amet. Laborum aliqua ut ex cillum qui ipsum tempor officia sunt. Reprehenderit est ex sit fugiat laborum reprehenderit proident deserunt sint pariatur cillum voluptate irure. Voluptate laboris velit veniam exercitation sunt eiusmod occaecat velit fugiat ad."})]})}function Qlt(n={}){const{wrapper:e}=n.components||{};return e?pb(e,{...n,children:pb(eX,{...n})}):eX(n)}const Zlt={__name:"Introduction",setup(n){return(e,t)=>{const i=an("el-divider"),r=an("el-col"),s=an("el-row");return W(),ve("div",null,[_e(i),_e(s,{justify:"center"},{default:Re(()=>[_e(r,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Re(()=>[_e(w(Qlt))]),_:1})]),_:1})])}}};var Jlt=1e-6,va=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function ect(){var n=new va(9);return va!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function h0(n,e,t,i,r,s,a,o,l){var c=new va(9);return c[0]=n,c[1]=e,c[2]=t,c[3]=i,c[4]=r,c[5]=s,c[6]=a,c[7]=o,c[8]=l,c}function tX(n,e,t){var i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=t[0],h=t[1],p=t[2],m=t[3],v=t[4],g=t[5],y=t[6],x=t[7],b=t[8];return n[0]=f*i+h*a+p*c,n[1]=f*r+h*o+p*u,n[2]=f*s+h*l+p*d,n[3]=m*i+v*a+g*c,n[4]=m*r+v*o+g*u,n[5]=m*s+v*l+g*d,n[6]=y*i+x*a+b*c,n[7]=y*r+x*o+b*u,n[8]=y*s+x*l+b*d,n}function Zi(){var n=new va(16);return va!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function _s(n){var e=new va(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function tct(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function pl(n,e,t,i,r,s,a,o,l,c,u,d,f,h,p,m){var v=new va(16);return v[0]=n,v[1]=e,v[2]=t,v[3]=i,v[4]=r,v[5]=s,v[6]=a,v[7]=o,v[8]=l,v[9]=c,v[10]=u,v[11]=d,v[12]=f,v[13]=h,v[14]=p,v[15]=m,v}function voe(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function ml(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],a=e[7],o=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=a,n[14]=o}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n}function zo(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=t*o-i*a,x=t*l-r*a,b=t*c-s*a,A=i*l-r*o,S=i*c-s*o,C=r*c-s*l,_=u*m-d*p,M=u*v-f*p,T=u*g-h*p,E=d*v-f*m,I=d*g-h*m,L=f*g-h*v,F=y*L-x*I+b*E+A*T-S*M+C*_;return F?(F=1/F,n[0]=(o*L-l*I+c*E)*F,n[1]=(r*I-i*L-s*E)*F,n[2]=(m*C-v*S+g*A)*F,n[3]=(f*S-d*C-h*A)*F,n[4]=(l*T-a*L-c*M)*F,n[5]=(t*L-r*T+s*M)*F,n[6]=(v*b-p*C-g*x)*F,n[7]=(u*C-f*b+h*x)*F,n[8]=(a*I-o*T+c*_)*F,n[9]=(i*T-t*I-s*_)*F,n[10]=(p*S-m*b+g*y)*F,n[11]=(d*b-u*S-h*y)*F,n[12]=(o*M-a*E-l*_)*F,n[13]=(t*E-i*M+r*_)*F,n[14]=(m*x-p*A-v*y)*F,n[15]=(u*A-d*x+f*y)*F,n):null}function Ch(n,e,t){var i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],m=e[12],v=e[13],g=e[14],y=e[15],x=t[0],b=t[1],A=t[2],S=t[3];return n[0]=x*i+b*o+A*d+S*m,n[1]=x*r+b*l+A*f+S*v,n[2]=x*s+b*c+A*h+S*g,n[3]=x*a+b*u+A*p+S*y,x=t[4],b=t[5],A=t[6],S=t[7],n[4]=x*i+b*o+A*d+S*m,n[5]=x*r+b*l+A*f+S*v,n[6]=x*s+b*c+A*h+S*g,n[7]=x*a+b*u+A*p+S*y,x=t[8],b=t[9],A=t[10],S=t[11],n[8]=x*i+b*o+A*d+S*m,n[9]=x*r+b*l+A*f+S*v,n[10]=x*s+b*c+A*h+S*g,n[11]=x*a+b*u+A*p+S*y,x=t[12],b=t[13],A=t[14],S=t[15],n[12]=x*i+b*o+A*d+S*m,n[13]=x*r+b*l+A*f+S*v,n[14]=x*s+b*c+A*h+S*g,n[15]=x*a+b*u+A*p+S*y,n}function mg(n,e,t){var i=t[0],r=t[1],s=t[2],a,o,l,c,u,d,f,h,p,m,v,g;return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],u=e[4],d=e[5],f=e[6],h=e[7],p=e[8],m=e[9],v=e[10],g=e[11],n[0]=a,n[1]=o,n[2]=l,n[3]=c,n[4]=u,n[5]=d,n[6]=f,n[7]=h,n[8]=p,n[9]=m,n[10]=v,n[11]=g,n[12]=a*i+u*r+p*s+e[12],n[13]=o*i+d*r+m*s+e[13],n[14]=l*i+f*r+v*s+e[14],n[15]=c*i+h*r+g*s+e[15]),n}function nX(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function T3(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+c*i,n[5]=a*r+u*i,n[6]=o*r+d*i,n[7]=l*r+f*i,n[8]=c*r-s*i,n[9]=u*r-a*i,n[10]=d*r-o*i,n[11]=f*r-l*i,n}function E3(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],a=e[1],o=e[2],l=e[3],c=e[4],u=e[5],d=e[6],f=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+c*i,n[1]=a*r+u*i,n[2]=o*r+d*i,n[3]=l*r+f*i,n[4]=c*r-s*i,n[5]=u*r-a*i,n[6]=d*r-o*i,n[7]=f*r-l*i,n}function nct(n,e,t){var i=t[0],r=t[1],s=t[2],a=Math.hypot(i,r,s),o,l,c;return a<Jlt?null:(a=1/a,i*=a,r*=a,s*=a,o=Math.sin(e),l=Math.cos(e),c=1-l,n[0]=i*i*c+l,n[1]=r*i*c+s*o,n[2]=s*i*c-r*o,n[3]=0,n[4]=i*r*c-s*o,n[5]=r*r*c+l,n[6]=s*r*c+i*o,n[7]=0,n[8]=i*s*c+r*o,n[9]=r*s*c-i*o,n[10]=s*s*c+l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function ict(n,e,t,i,r,s,a){var o=1/(e-t),l=1/(i-r),c=1/(s-a);return n[0]=-2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(e+t)*o,n[13]=(r+i)*l,n[14]=(a+s)*c,n[15]=1,n}var I3=ict;function rct(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n}var goe=Ch;function Zr(){var n=new va(3);return va!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Hb(n){var e=new va(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function Mh(n){var e=n[0],t=n[1],i=n[2];return Math.hypot(e,t,i)}function bn(n,e,t){var i=new va(3);return i[0]=n,i[1]=e,i[2]=t,i}function iX(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function nm(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function os(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function LB(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n}function kB(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n}function sct(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function act(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function ec(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s,n}function oct(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function X_(n,e,t){var i=e[0],r=e[1],s=e[2],a=t[0],o=t[1],l=t[2];return n[0]=r*l-s*o,n[1]=s*a-i*l,n[2]=i*o-r*a,n}function lct(n,e,t,i){var r=e[0],s=e[1],a=e[2];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=a+i*(t[2]-a),n}function XI(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],a=e[1],o=e[2],l=Math.sqrt(t*t+i*i+r*r),c=Math.sqrt(s*s+a*a+o*o),u=l*c,d=u&&oct(n,e)/u;return Math.acos(Math.min(Math.max(d,-1),1))}var rX=os,aA=Mh;(function(){var n=Zr();return function(e,t,i,r,s,a){var o,l;for(t||(t=3),i||(i=0),r?l=Math.min(r*t+i,e.length):l=e.length,o=i;o<l;o+=t)n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],s(n,n,a),e[o]=n[0],e[o+1]=n[1],e[o+2]=n[2];return e}})();function uf(){var n=new va(4);return va!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function Yd(n){var e=new va(4);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}function Jr(n,e,t,i){var r=new va(4);return r[0]=n,r[1]=e,r[2]=t,r[3]=i,r}function sX(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n}function cct(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n}function uct(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function Sa(n,e,t){var i=e[0],r=e[1],s=e[2],a=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*a,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*a,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*a,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*a,n}var dct=cct;(function(){var n=uf();return function(e,t,i,r,s,a){var o,l;for(t||(t=4),i||(i=0),r?l=Math.min(r*t+i,e.length):l=e.length,o=i;o<l;o+=t)n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],n[3]=e[o+3],s(n,n,a),e[o]=n[0],e[o+1]=n[1],e[o+2]=n[2],e[o+3]=n[3];return e}})();function fct(){var n=new va(2);return va!=Float32Array&&(n[0]=0,n[1]=0),n}function aX(n,e){var t=new va(2);return t[0]=n,t[1]=e,t}function hct(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function oX(n){var e=n[0],t=n[1];return Math.hypot(e,t)}function pct(n,e){var t=e[0],i=e[1],r=t*t+i*i;return r>0&&(r=1/Math.sqrt(r)),n[0]=e[0]*r,n[1]=e[1]*r,n}(function(){var n=fct();return function(e,t,i,r,s,a){var o,l;for(t||(t=2),i||(i=0),r?l=Math.min(r*t+i,e.length):l=e.length,o=i;o<l;o+=t)n[0]=e[o],n[1]=e[o+1],s(n,n,a),e[o]=n[0],e[o+1]=n[1];return e}})();var W0=256,j_=[],D3;for(;W0--;)j_[W0]=(W0+256).toString(16).substring(1);function rL(){var n=0,e,t="";if(!D3||W0+16>256){for(D3=Array(n=256);n--;)D3[n]=256*Math.random()|0;n=W0=0}for(;n<16;n++)e=D3[W0+n],n==6?t+=j_[e&15|64]:n==8?t+=j_[e&63|128]:t+=j_[e],n&1&&n>1&&n<11&&(t+="-");return W0++,t}var jI,lX;function mct(){return lX||(lX=1,jI=function(e,t){var i=e.length;if(e===t)return!0;if(i!==t.length)return!1;for(var r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}),jI}var vct=mct();const gct=uu(vct),yoe=-1,ST=0,Gb=1,V4=2,FB=3,BB=4,NB=5,OB=6,boe=7,xoe=8,cX=typeof self=="object"?self:globalThis,yct=(n,e)=>{const t=(r,s)=>(n.set(s,r),r),i=r=>{if(n.has(r))return n.get(r);const[s,a]=e[r];switch(s){case ST:case yoe:return t(a,r);case Gb:{const o=t([],r);for(const l of a)o.push(i(l));return o}case V4:{const o=t({},r);for(const[l,c]of a)o[i(l)]=i(c);return o}case FB:return t(new Date(a),r);case BB:{const{source:o,flags:l}=a;return t(new RegExp(o,l),r)}case NB:{const o=t(new Map,r);for(const[l,c]of a)o.set(i(l),i(c));return o}case OB:{const o=t(new Set,r);for(const l of a)o.add(i(l));return o}case boe:{const{name:o,message:l}=a;return t(new cX[o](l),r)}case xoe:return t(BigInt(a),r);case"BigInt":return t(Object(BigInt(a)),r);case"ArrayBuffer":return t(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return t(new DataView(o),a)}}return t(new cX[s](a),r)};return i},bct=n=>yct(new Map,n)(0),Jv="",{toString:xct}={},{keys:Act}=Object,L2=n=>{const e=typeof n;if(e!=="object"||!n)return[ST,e];const t=xct.call(n).slice(8,-1);switch(t){case"Array":return[Gb,Jv];case"Object":return[V4,Jv];case"Date":return[FB,Jv];case"RegExp":return[BB,Jv];case"Map":return[NB,Jv];case"Set":return[OB,Jv];case"DataView":return[Gb,t]}return t.includes("Array")?[Gb,t]:t.includes("Error")?[boe,t]:[V4,t]},R3=([n,e])=>n===ST&&(e==="function"||e==="symbol"),wct=(n,e,t,i)=>{const r=(a,o)=>{const l=i.push(a)-1;return t.set(o,l),l},s=a=>{if(t.has(a))return t.get(a);let[o,l]=L2(a);switch(o){case ST:{let u=a;switch(l){case"bigint":o=xoe,u=a.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return r([yoe],a)}return r([o,u],a)}case Gb:{if(l){let f=a;return l==="DataView"?f=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(a)),r([l,[...f]],a)}const u=[],d=r([o,u],a);for(const f of a)u.push(s(f));return d}case V4:{if(l)switch(l){case"BigInt":return r([l,a.toString()],a);case"Boolean":case"Number":case"String":return r([l,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const u=[],d=r([o,u],a);for(const f of Act(a))(n||!R3(L2(a[f])))&&u.push([s(f),s(a[f])]);return d}case FB:return r([o,a.toISOString()],a);case BB:{const{source:u,flags:d}=a;return r([o,{source:u,flags:d}],a)}case NB:{const u=[],d=r([o,u],a);for(const[f,h]of a)(n||!(R3(L2(f))||R3(L2(h))))&&u.push([s(f),s(h)]);return d}case OB:{const u=[],d=r([o,u],a);for(const f of a)(n||!R3(L2(f)))&&u.push(s(f));return d}}const{message:c}=a;return r([o,{name:l,message:c}],a)};return s},Sct=(n,{json:e,lossy:t}={})=>{const i=[];return wct(!(e||t),!!e,new Map,i)(n),i};var gl=Uint8Array,kg=Uint16Array,_ct=Int32Array,Aoe=new gl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),woe=new gl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cct=new gl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Soe=function(n,e){for(var t=new kg(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new _ct(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return{b:t,r}},_oe=Soe(Aoe,2),Coe=_oe.b,Mct=_oe.r;Coe[28]=258,Mct[258]=28;var Tct=Soe(woe,0),Ect=Tct.b,sL=new kg(32768);for(var ts=0;ts<32768;++ts){var fh=(ts&43690)>>1|(ts&21845)<<1;fh=(fh&52428)>>2|(fh&13107)<<2,fh=(fh&61680)>>4|(fh&3855)<<4,sL[ts]=((fh&65280)>>8|(fh&255)<<8)>>1}var Wb=function(n,e,t){for(var i=n.length,r=0,s=new kg(e);r<i;++r)n[r]&&++s[n[r]-1];var a=new kg(e);for(r=1;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new kg(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=a[n[r]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[sL[d]>>l]=c}else for(o=new kg(i),r=0;r<i;++r)n[r]&&(o[r]=sL[a[n[r]-1]++]>>15-n[r]);return o},GA=new gl(288);for(var ts=0;ts<144;++ts)GA[ts]=8;for(var ts=144;ts<256;++ts)GA[ts]=9;for(var ts=256;ts<280;++ts)GA[ts]=7;for(var ts=280;ts<288;++ts)GA[ts]=8;var Moe=new gl(32);for(var ts=0;ts<32;++ts)Moe[ts]=5;var Ict=Wb(GA,9,1),Dct=Wb(Moe,5,1),$I=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Lc=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},QI=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Rct=function(n){return(n+7)/8|0},Pct=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new gl(n.subarray(e,t))},Lct=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],fl=function(n,e,t){var i=new Error(e||Lct[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,fl),!t)throw i;return i},UB=function(n,e,t,i){var r=n.length,s=0;if(!r||e.f&&!e.l)return t||new gl(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new gl(r*3));var c=function(Ne){var Y=t.length;if(Ne>Y){var oe=new gl(Math.max(Y*2,Ne));oe.set(t),t=oe}},u=e.f||0,d=e.p||0,f=e.b||0,h=e.l,p=e.d,m=e.m,v=e.n,g=r*8;do{if(!h){u=Lc(n,d,1);var y=Lc(n,d+1,3);if(d+=3,y)if(y==1)h=Ict,p=Dct,m=9,v=5;else if(y==2){var S=Lc(n,d,31)+257,C=Lc(n,d+10,15)+4,_=S+Lc(n,d+5,31)+1;d+=14;for(var M=new gl(_),T=new gl(19),E=0;E<C;++E)T[Cct[E]]=Lc(n,d+E*3,7);d+=C*3;for(var I=$I(T),L=(1<<I)-1,F=Wb(T,I,1),E=0;E<_;){var B=F[Lc(n,d,L)];d+=B&15;var x=B>>4;if(x<16)M[E++]=x;else{var P=0,z=0;for(x==16?(z=3+Lc(n,d,3),d+=2,P=M[E-1]):x==17?(z=3+Lc(n,d,7),d+=3):x==18&&(z=11+Lc(n,d,127),d+=7);z--;)M[E++]=P}}var O=M.subarray(0,S),N=M.subarray(S);m=$I(O),v=$I(N),h=Wb(O,m,1),p=Wb(N,v,1)}else fl(1);else{var x=Rct(d)+4,b=n[x-4]|n[x-3]<<8,A=x+b;if(A>r){l&&fl(0);break}o&&c(f+b),t.set(n.subarray(x,A),f),e.b=f+=b,e.p=d=A*8,e.f=u;continue}if(d>g){l&&fl(0);break}}o&&c(f+131072);for(var H=(1<<m)-1,q=(1<<v)-1,te=d;;te=d){var P=h[QI(n,d)&H],Q=P>>4;if(d+=P&15,d>g){l&&fl(0);break}if(P||fl(2),Q<256)t[f++]=Q;else if(Q==256){te=d,h=null;break}else{var ee=Q-254;if(Q>264){var E=Q-257,de=Aoe[E];ee=Lc(n,d,(1<<de)-1)+Coe[E],d+=de}var J=p[QI(n,d)&q],ue=J>>4;J||fl(3),d+=J&15;var N=Ect[ue];if(ue>3){var de=woe[ue];N+=QI(n,d)&(1<<de)-1,d+=de}if(d>g){l&&fl(0);break}o&&c(f+131072);var Te=f+ee;if(f<N){var De=s-N,Le=Math.min(N,Te);for(De+f<0&&fl(3);f<Le;++f)t[f]=i[De+f]}for(;f<Te;++f)t[f]=t[f-N]}}e.l=h,e.p=te,e.b=f,e.f=u,h&&(u=1,e.m=m,e.d=p,e.n=v)}while(!u);return f!=t.length&&a?Pct(t,0,f):t.subarray(0,f)},kct=new gl(0),Fct=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&fl(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},Bct=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},Nct=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&fl(6,"invalid zlib data"),(n[1]>>5&1)==1&&fl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Oct(n,e){return UB(n,{i:2},e,e)}function Uct(n,e){var t=Fct(n);return t+8>n.length&&fl(6,"invalid gzip data"),UB(n.subarray(t,-8),{i:2},new gl(Bct(n)),e)}function zct(n,e){return UB(n.subarray(Nct(n),-4),{i:2},e,e)}function Vct(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Uct(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Oct(n,e):zct(n,e)}var Hct=typeof TextDecoder<"u"&&new TextDecoder,Gct=0;try{Hct.decode(kct,{stream:!0}),Gct=1}catch{}class Toe{constructor(e,t,i,r){at(this,"esize");at(this,"ecode");at(this,"edata");at(this,"littleEndian");if(e%16!=0)throw new Error("This does not appear to be a NIFTI extension");this.esize=e,this.ecode=t,this.edata=i,this.littleEndian=r}toArrayBuffer(){let e=new Uint8Array(this.esize),t=new Uint8Array(this.edata);e.set(t,8);let i=new DataView(e.buffer);return i.setInt32(0,this.esize,this.littleEndian),i.setInt32(4,this.ecode,this.littleEndian),e.buffer}}const oo=class oo{static getStringAt(e,t,i){var r="",s,a;for(s=t;s<i;s+=1)a=e.getUint8(s),a!==0&&(r+=String.fromCharCode(a));return r}static getIntAt(e,t,i){return e.getInt32(t,i)}static getFloatAt(e,t,i){return e.getFloat32(t,i)}static getDoubleAt(e,t,i){return e.getFloat64(t,i)}static getInt64At(e,t,i){const r=e.getUint32(t,i),s=e.getInt32(t+4,i);let a;return i?a=s*2**32+r:a=r*2**32+s,s<0&&(a+=-1*2**32*2**32),a}static getUint64At(e,t,i){const r=e.getUint32(t+(i?0:4),i),s=e.getUint32(t+(i?4:0),i);return i?s*2**32+r:r*2**32+s}static getExtensionsAt(e,t,i,r){let s=[],a=t;for(;a<r;){let o=i,l=oo.getIntAt(e,a,i);if(!l)break;if(l+a>r&&(o=!o,l=oo.getIntAt(e,a,o),l+a>r))throw new Error("This does not appear to be a valid NIFTI extension");if(l%16!=0)throw new Error("This does not appear to be a NIFTI extension");let c=oo.getIntAt(e,a+4,o),u=e.buffer.slice(a+8,a+l),d=new Toe(l,c,u,o);s.push(d),a+=l}return s}static toArrayBuffer(e){var t,i,r;for(t=new ArrayBuffer(e.length),i=new Uint8Array(t),r=0;r<e.length;r+=1)i[r]=e[r];return t}static isString(e){return typeof e=="string"||e instanceof String}static formatNumber(e,t=void 0){let i;return oo.isString(e)?i=Number(e):i=e,t?i=i.toPrecision(5):i=i.toPrecision(7),parseFloat(i)}static makeCRCTable(){let e,t=[];for(var i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[i]=e}return t}static crc32(e){oo.crcTable||(oo.crcTable=oo.makeCRCTable());const t=oo.crcTable;let i=-1;for(var r=0;r<e.byteLength;r++)i=i>>>8^t[(i^e.getUint8(r))&255];return(i^-1)>>>0}};at(oo,"crcTable",null),at(oo,"GUNZIP_MAGIC_COOKIE1",31),at(oo,"GUNZIP_MAGIC_COOKIE2",139),at(oo,"getByteAt",function(e,t){return e.getUint8(t)}),at(oo,"getShortAt",function(e,t,i){return e.getInt16(t,i)});let fn=oo;const In=class In{constructor(){at(this,"littleEndian",!1);at(this,"dim_info",0);at(this,"dims",[]);at(this,"intent_p1",0);at(this,"intent_p2",0);at(this,"intent_p3",0);at(this,"intent_code",0);at(this,"datatypeCode",0);at(this,"numBitsPerVoxel",0);at(this,"slice_start",0);at(this,"slice_end",0);at(this,"slice_code",0);at(this,"pixDims",[]);at(this,"vox_offset",0);at(this,"scl_slope",1);at(this,"scl_inter",0);at(this,"xyzt_units",0);at(this,"cal_max",0);at(this,"cal_min",0);at(this,"slice_duration",0);at(this,"toffset",0);at(this,"description","");at(this,"aux_file","");at(this,"intent_name","");at(this,"qform_code",0);at(this,"sform_code",0);at(this,"quatern_a",0);at(this,"quatern_b",0);at(this,"quatern_c",0);at(this,"quatern_d",0);at(this,"qoffset_x",0);at(this,"qoffset_y",0);at(this,"qoffset_z",0);at(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);at(this,"qfac",1);at(this,"quatern_R");at(this,"magic","0");at(this,"isHDR",!1);at(this,"extensionFlag",[0,0,0,0]);at(this,"extensionSize",0);at(this,"extensionCode",0);at(this,"extensions",[]);at(this,"getDatatypeCodeString",function(e){return e===In.TYPE_UINT8?"1-Byte Unsigned Integer":e===In.TYPE_INT16?"2-Byte Signed Integer":e===In.TYPE_INT32?"4-Byte Signed Integer":e===In.TYPE_FLOAT32?"4-Byte Float":e===In.TYPE_FLOAT64?"8-Byte Float":e===In.TYPE_RGB24?"RGB":e===In.TYPE_INT8?"1-Byte Signed Integer":e===In.TYPE_UINT16?"2-Byte Unsigned Integer":e===In.TYPE_UINT32?"4-Byte Unsigned Integer":e===In.TYPE_INT64?"8-Byte Signed Integer":e===In.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"});at(this,"getTransformCodeString",function(e){return e===In.XFORM_SCANNER_ANAT?"Scanner":e===In.XFORM_ALIGNED_ANAT?"Aligned":e===In.XFORM_TALAIRACH?"Talairach":e===In.XFORM_MNI_152?"MNI":"Unknown"});at(this,"getUnitsCodeString",function(e){return e===In.UNITS_METER?"Meters":e===In.UNITS_MM?"Millimeters":e===In.UNITS_MICRON?"Microns":e===In.UNITS_SEC?"Seconds":e===In.UNITS_MSEC?"Milliseconds":e===In.UNITS_USEC?"Microseconds":e===In.UNITS_HZ?"Hz":e===In.UNITS_PPM?"PPM":e===In.UNITS_RADS?"Rads":"Unknown"});at(this,"nifti_mat33_mul",function(e,t){var i=[[0,0,0],[0,0,0],[0,0,0]],r,s;for(r=0;r<3;r+=1)for(s=0;s<3;s+=1)i[r][s]=e[r][0]*t[0][s]+e[r][1]*t[1][s]+e[r][2]*t[2][s];return i});at(this,"nifti_mat33_determ",function(e){var t,i,r,s,a,o,l,c,u;return t=e[0][0],i=e[0][1],r=e[0][2],s=e[1][0],a=e[1][1],o=e[1][2],l=e[2][0],c=e[2][1],u=e[2][2],t*a*u-t*c*o-s*i*u+s*c*r+l*i*o-l*a*r})}readHeader(e){var t=new DataView(e),i=fn.getIntAt(t,0,this.littleEndian),r,s,a,o;if(i!==In.MAGIC_COOKIE&&(this.littleEndian=!0,i=fn.getIntAt(t,0,this.littleEndian)),i!==In.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=fn.getByteAt(t,39),r=0;r<8;r+=1)o=40+r*2,this.dims[r]=fn.getShortAt(t,o,this.littleEndian);for(this.intent_p1=fn.getFloatAt(t,56,this.littleEndian),this.intent_p2=fn.getFloatAt(t,60,this.littleEndian),this.intent_p3=fn.getFloatAt(t,64,this.littleEndian),this.intent_code=fn.getShortAt(t,68,this.littleEndian),this.datatypeCode=fn.getShortAt(t,70,this.littleEndian),this.numBitsPerVoxel=fn.getShortAt(t,72,this.littleEndian),this.slice_start=fn.getShortAt(t,74,this.littleEndian),r=0;r<8;r+=1)o=76+r*4,this.pixDims[r]=fn.getFloatAt(t,o,this.littleEndian);if(this.vox_offset=fn.getFloatAt(t,108,this.littleEndian),this.scl_slope=fn.getFloatAt(t,112,this.littleEndian),this.scl_inter=fn.getFloatAt(t,116,this.littleEndian),this.slice_end=fn.getShortAt(t,120,this.littleEndian),this.slice_code=fn.getByteAt(t,122),this.xyzt_units=fn.getByteAt(t,123),this.cal_max=fn.getFloatAt(t,124,this.littleEndian),this.cal_min=fn.getFloatAt(t,128,this.littleEndian),this.slice_duration=fn.getFloatAt(t,132,this.littleEndian),this.toffset=fn.getFloatAt(t,136,this.littleEndian),this.description=fn.getStringAt(t,148,228),this.aux_file=fn.getStringAt(t,228,252),this.qform_code=fn.getShortAt(t,252,this.littleEndian),this.sform_code=fn.getShortAt(t,254,this.littleEndian),this.quatern_b=fn.getFloatAt(t,256,this.littleEndian),this.quatern_c=fn.getFloatAt(t,260,this.littleEndian),this.quatern_d=fn.getFloatAt(t,264,this.littleEndian),this.quatern_a=Math.sqrt(1-(Math.pow(this.quatern_b,2)+Math.pow(this.quatern_c,2)+Math.pow(this.quatern_d,2))),this.qoffset_x=fn.getFloatAt(t,268,this.littleEndian),this.qoffset_y=fn.getFloatAt(t,272,this.littleEndian),this.qoffset_z=fn.getFloatAt(t,276,this.littleEndian),this.qform_code<1&&this.sform_code<1&&(this.affine[0][0]=this.pixDims[1],this.affine[1][1]=this.pixDims[2],this.affine[2][2]=this.pixDims[3]),this.qform_code>0&&this.sform_code<this.qform_code){const l=this.quatern_a,c=this.quatern_b,u=this.quatern_c,d=this.quatern_d;for(this.qfac=this.pixDims[0]===0?1:this.pixDims[0],this.quatern_R=[[l*l+c*c-u*u-d*d,2*c*u-2*l*d,2*c*d+2*l*u],[2*c*u+2*l*d,l*l+u*u-c*c-d*d,2*u*d-2*l*c],[2*c*d-2*l*u,2*u*d+2*l*c,l*l+d*d-u*u-c*c]],s=0;s<3;s+=1)for(a=0;a<3;a+=1)this.affine[s][a]=this.quatern_R[s][a]*this.pixDims[a+1],a===2&&(this.affine[s][a]*=this.qfac);this.affine[0][3]=this.qoffset_x,this.affine[1][3]=this.qoffset_y,this.affine[2][3]=this.qoffset_z}else if(this.sform_code>0)for(s=0;s<3;s+=1)for(a=0;a<4;a+=1)o=280+(s*4+a)*4,this.affine[s][a]=fn.getFloatAt(t,o,this.littleEndian);if(this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=fn.getStringAt(t,328,344),this.magic=fn.getStringAt(t,344,348),this.isHDR=this.magic===String.fromCharCode.apply(null,In.MAGIC_NUMBER2),t.byteLength>In.MAGIC_COOKIE){this.extensionFlag[0]=fn.getByteAt(t,348),this.extensionFlag[1]=fn.getByteAt(t,349),this.extensionFlag[2]=fn.getByteAt(t,350),this.extensionFlag[3]=fn.getByteAt(t,351);let l=!0;!this.isHDR&&this.vox_offset<=352&&(l=!1),t.byteLength<=368&&(l=!1),l&&this.extensionFlag[0]&&(this.extensions=fn.getExtensionsAt(t,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode)}}toFormattedString(){var e=fn.formatNumber,t="";return t+="Dim Info = "+this.dim_info+`
`,t+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,t+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,t+="Intent Code = "+this.intent_code+`
`,t+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,t+="Bits Per Voxel = "+this.numBitsPerVoxel+`
`,t+="Slice Start = "+this.slice_start+`
`,t+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+`
`,t+="Image Offset = "+this.vox_offset+`
`,t+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+`
`,t+="Slice End = "+this.slice_end+`
`,t+="Slice Code = "+this.slice_code+`
`,t+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(In.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(In.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,t+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+`
`,t+="Slice Duration = "+this.slice_duration+`
`,t+="Time Axis Shift = "+this.toffset+`
`,t+='Description: "'+this.description+`"
`,t+='Auxiliary File: "'+this.aux_file+`"
`,t+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,t+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,t+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+`
`,t+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,t+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+`
`,t+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+`
`,t+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+`
`,t+='Intent Name: "'+this.intent_name+`"
`,this.extensionFlag[0]&&(t+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+`
`),t}getQformMat(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])}convertNiftiQFormToNiftiSForm(e,t,i,r,s,a,o,l,c,u){var d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f,h=e,p=t,m=i,v,g,y;return d[3][0]=d[3][1]=d[3][2]=0,d[3][3]=1,f=1-(h*h+p*p+m*m),f<1e-7?(f=1/Math.sqrt(h*h+p*p+m*m),h*=f,p*=f,m*=f,f=0):f=Math.sqrt(f),v=o>0?o:1,g=l>0?l:1,y=c>0?c:1,u<0&&(y=-y),d[0][0]=(f*f+h*h-p*p-m*m)*v,d[0][1]=2*(h*p-f*m)*g,d[0][2]=2*(h*m+f*p)*y,d[1][0]=2*(h*p+f*m)*v,d[1][1]=(f*f+p*p-h*h-m*m)*g,d[1][2]=2*(p*m-f*h)*y,d[2][0]=2*(h*m-f*p)*v,d[2][1]=2*(p*m+f*h)*g,d[2][2]=(f*f+m*m-p*p-h*h)*y,d[0][3]=r,d[1][3]=s,d[2][3]=a,d}convertNiftiSFormToNEMA(e){var t,i,r,s,a,o,l,c,u,d,f,h,p,m,v,g,y,x,b,A,S,C,_,M,T,E,I,L,F,B,P,z,O,N;if(v=0,I=[[0,0,0],[0,0,0],[0,0,0]],L=[[0,0,0],[0,0,0],[0,0,0]],t=e[0][0],i=e[0][1],r=e[0][2],s=e[1][0],a=e[1][1],o=e[1][2],l=e[2][0],c=e[2][1],u=e[2][2],d=Math.sqrt(t*t+s*s+l*l),d===0||(t/=d,s/=d,l/=d,d=Math.sqrt(i*i+a*a+c*c),d===0))return null;if(i/=d,a/=d,c/=d,d=t*i+s*a+l*c,Math.abs(d)>1e-4){if(i-=d*t,a-=d*s,c-=d*l,d=Math.sqrt(i*i+a*a+c*c),d===0)return null;i/=d,a/=d,c/=d}if(d=Math.sqrt(r*r+o*o+u*u),d===0?(r=s*c-l*a,o=l*i-c*t,u=t*a-s*i):(r/=d,o/=d,u/=d),d=t*r+s*o+l*u,Math.abs(d)>1e-4){if(r-=d*t,o-=d*s,u-=d*l,d=Math.sqrt(r*r+o*o+u*u),d===0)return null;r/=d,o/=d,u/=d}if(d=i*r+a*o+c*u,Math.abs(d)>1e-4){if(r-=d*i,o-=d*a,u-=d*c,d=Math.sqrt(r*r+o*o+u*u),d===0)return null;r/=d,o/=d,u/=d}if(I[0][0]=t,I[0][1]=i,I[0][2]=r,I[1][0]=s,I[1][1]=a,I[1][2]=o,I[2][0]=l,I[2][1]=c,I[2][2]=u,f=this.nifti_mat33_determ(I),f===0)return null;for(E=-666,b=C=_=M=1,A=2,S=3,p=1;p<=3;p+=1)for(m=1;m<=3;m+=1)if(p!==m){for(v=1;v<=3;v+=1)if(!(p===v||m===v))for(L[0][0]=L[0][1]=L[0][2]=L[1][0]=L[1][1]=L[1][2]=L[2][0]=L[2][1]=L[2][2]=0,g=-1;g<=1;g+=2)for(y=-1;y<=1;y+=2)for(x=-1;x<=1;x+=2)L[0][p-1]=g,L[1][m-1]=y,L[2][v-1]=x,h=this.nifti_mat33_determ(L),h*f>0&&(T=this.nifti_mat33_mul(L,I),d=T[0][0]+T[1][1]+T[2][2],d>E&&(E=d,b=p,A=m,S=v,C=g,_=y,M=x))}switch(F=B=P=z=O=N="",b*C){case 1:F="X",z="+";break;case-1:F="X",z="-";break;case 2:F="Y",z="+";break;case-2:F="Y",z="-";break;case 3:F="Z",z="+";break;case-3:F="Z",z="-";break}switch(A*_){case 1:B="X",O="+";break;case-1:B="X",O="-";break;case 2:B="Y",O="+";break;case-2:B="Y",O="-";break;case 3:B="Z",O="+";break;case-3:B="Z",O="-";break}switch(S*M){case 1:P="X",N="+";break;case-1:P="X",N="-";break;case 2:P="Y",N="+";break;case-2:P="Y",N="-";break;case 3:P="Z",N="+";break;case-3:P="Z",N="-";break}return F+B+P+z+O+N}getExtensionLocation(){return In.MAGIC_COOKIE+4}getExtensionSize(e){return fn.getIntAt(e,this.getExtensionLocation(),this.littleEndian)}getExtensionCode(e){return fn.getIntAt(e,this.getExtensionLocation()+4,this.littleEndian)}addExtension(e,t=-1){t==-1?this.extensions.push(e):this.extensions.splice(t,0,e),this.vox_offset+=e.esize}removeExtension(e){let t=this.extensions[e];t&&(this.vox_offset-=t.esize),this.extensions.splice(e,1)}toArrayBuffer(e=!1){let r=352;if(e)for(let l of this.extensions)r+=l.esize;let s=new Uint8Array(r),a=new DataView(s.buffer);a.setInt32(0,348,this.littleEndian),a.setUint8(39,this.dim_info);for(let l=0;l<8;l++)a.setUint16(40+2*l,this.dims[l],this.littleEndian);a.setFloat32(56,this.intent_p1,this.littleEndian),a.setFloat32(60,this.intent_p2,this.littleEndian),a.setFloat32(64,this.intent_p3,this.littleEndian),a.setInt16(68,this.intent_code,this.littleEndian),a.setInt16(70,this.datatypeCode,this.littleEndian),a.setInt16(72,this.numBitsPerVoxel,this.littleEndian),a.setInt16(74,this.slice_start,this.littleEndian);for(let l=0;l<8;l++)a.setFloat32(76+4*l,this.pixDims[l],this.littleEndian);a.setFloat32(108,this.vox_offset,this.littleEndian),a.setFloat32(112,this.scl_slope,this.littleEndian),a.setFloat32(116,this.scl_inter,this.littleEndian),a.setInt16(120,this.slice_end,this.littleEndian),a.setUint8(122,this.slice_code),a.setUint8(123,this.xyzt_units),a.setFloat32(124,this.cal_max,this.littleEndian),a.setFloat32(128,this.cal_min,this.littleEndian),a.setFloat32(132,this.slice_duration,this.littleEndian),a.setFloat32(136,this.toffset,this.littleEndian),s.set(new TextEncoder().encode(this.description),148),s.set(new TextEncoder().encode(this.aux_file),228),a.setInt16(252,this.qform_code,this.littleEndian),a.setInt16(254,this.sform_code,this.littleEndian),a.setFloat32(256,this.quatern_b,this.littleEndian),a.setFloat32(260,this.quatern_c,this.littleEndian),a.setFloat32(264,this.quatern_d,this.littleEndian),a.setFloat32(268,this.qoffset_x,this.littleEndian),a.setFloat32(272,this.qoffset_y,this.littleEndian),a.setFloat32(276,this.qoffset_z,this.littleEndian);const o=this.affine.flat();for(let l=0;l<12;l++)a.setFloat32(280+4*l,o[l],this.littleEndian);if(s.set(new TextEncoder().encode(this.intent_name),328),s.set(new TextEncoder().encode(this.magic),344),e){s.set(Uint8Array.from([1,0,0,0]),348);let l=this.getExtensionLocation();for(const c of this.extensions)a.setInt32(l,c.esize,c.littleEndian),a.setInt32(l+4,c.ecode,c.littleEndian),s.set(new Uint8Array(c.edata),l+8),l+=c.esize}else s.set(new Uint8Array(4).fill(0),348);return s.buffer}};at(In,"TYPE_NONE",0),at(In,"TYPE_BINARY",1),at(In,"TYPE_UINT8",2),at(In,"TYPE_INT16",4),at(In,"TYPE_INT32",8),at(In,"TYPE_FLOAT32",16),at(In,"TYPE_COMPLEX64",32),at(In,"TYPE_FLOAT64",64),at(In,"TYPE_RGB24",128),at(In,"TYPE_INT8",256),at(In,"TYPE_UINT16",512),at(In,"TYPE_UINT32",768),at(In,"TYPE_INT64",1024),at(In,"TYPE_UINT64",1280),at(In,"TYPE_FLOAT128",1536),at(In,"TYPE_COMPLEX128",1792),at(In,"TYPE_COMPLEX256",2048),at(In,"XFORM_UNKNOWN",0),at(In,"XFORM_SCANNER_ANAT",1),at(In,"XFORM_ALIGNED_ANAT",2),at(In,"XFORM_TALAIRACH",3),at(In,"XFORM_MNI_152",4),at(In,"SPATIAL_UNITS_MASK",7),at(In,"TEMPORAL_UNITS_MASK",56),at(In,"UNITS_UNKNOWN",0),at(In,"UNITS_METER",1),at(In,"UNITS_MM",2),at(In,"UNITS_MICRON",3),at(In,"UNITS_SEC",8),at(In,"UNITS_MSEC",16),at(In,"UNITS_USEC",24),at(In,"UNITS_HZ",32),at(In,"UNITS_PPM",40),at(In,"UNITS_RADS",48),at(In,"MAGIC_COOKIE",348),at(In,"STANDARD_HEADER_SIZE",348),at(In,"MAGIC_NUMBER_LOCATION",344),at(In,"MAGIC_NUMBER",[110,43,49]),at(In,"MAGIC_NUMBER2",[110,105,49]),at(In,"EXTENSION_HEADER_SIZE",8);let Ei=In;const Iu=class Iu{constructor(){at(this,"littleEndian",!1);at(this,"dim_info",0);at(this,"dims",[]);at(this,"intent_p1",0);at(this,"intent_p2",0);at(this,"intent_p3",0);at(this,"intent_code",0);at(this,"datatypeCode",0);at(this,"numBitsPerVoxel",0);at(this,"slice_start",0);at(this,"slice_end",0);at(this,"slice_code",0);at(this,"pixDims",[]);at(this,"vox_offset",0);at(this,"scl_slope",1);at(this,"scl_inter",0);at(this,"xyzt_units",0);at(this,"cal_max",0);at(this,"cal_min",0);at(this,"slice_duration",0);at(this,"toffset",0);at(this,"description","");at(this,"aux_file","");at(this,"intent_name","");at(this,"qform_code",0);at(this,"sform_code",0);at(this,"quatern_b",0);at(this,"quatern_c",0);at(this,"quatern_d",0);at(this,"qoffset_x",0);at(this,"qoffset_y",0);at(this,"qoffset_z",0);at(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);at(this,"magic","0");at(this,"extensionFlag",[0,0,0,0]);at(this,"extensions",[]);at(this,"extensionSize",0);at(this,"extensionCode",0);at(this,"getExtensionLocation",function(){return Iu.MAGIC_COOKIE+4});at(this,"getExtensionSize",Ei.prototype.getExtensionSize);at(this,"getExtensionCode",Ei.prototype.getExtensionCode);at(this,"addExtension",Ei.prototype.addExtension);at(this,"removeExtension",Ei.prototype.removeExtension);at(this,"getDatatypeCodeString",Ei.prototype.getDatatypeCodeString);at(this,"getTransformCodeString",Ei.prototype.getTransformCodeString);at(this,"getUnitsCodeString",Ei.prototype.getUnitsCodeString);at(this,"getQformMat",Ei.prototype.getQformMat);at(this,"convertNiftiQFormToNiftiSForm",Ei.prototype.convertNiftiQFormToNiftiSForm);at(this,"convertNiftiSFormToNEMA",Ei.prototype.convertNiftiSFormToNEMA);at(this,"nifti_mat33_mul",Ei.prototype.nifti_mat33_mul);at(this,"nifti_mat33_determ",Ei.prototype.nifti_mat33_determ)}readHeader(e){var t=new DataView(e),i=fn.getIntAt(t,0,this.littleEndian),r,s,a,o;if(i!==Iu.MAGIC_COOKIE&&(this.littleEndian=!0,i=fn.getIntAt(t,0,this.littleEndian)),i!==Iu.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.magic=fn.getStringAt(t,4,12),this.datatypeCode=fn.getShortAt(t,12,this.littleEndian),this.numBitsPerVoxel=fn.getShortAt(t,14,this.littleEndian),r=0;r<8;r+=1)o=16+r*8,this.dims[r]=fn.getInt64At(t,o,this.littleEndian);for(this.intent_p1=fn.getDoubleAt(t,80,this.littleEndian),this.intent_p2=fn.getDoubleAt(t,88,this.littleEndian),this.intent_p3=fn.getDoubleAt(t,96,this.littleEndian),r=0;r<8;r+=1)o=104+r*8,this.pixDims[r]=fn.getDoubleAt(t,o,this.littleEndian);for(this.vox_offset=fn.getInt64At(t,168,this.littleEndian),this.scl_slope=fn.getDoubleAt(t,176,this.littleEndian),this.scl_inter=fn.getDoubleAt(t,184,this.littleEndian),this.cal_max=fn.getDoubleAt(t,192,this.littleEndian),this.cal_min=fn.getDoubleAt(t,200,this.littleEndian),this.slice_duration=fn.getDoubleAt(t,208,this.littleEndian),this.toffset=fn.getDoubleAt(t,216,this.littleEndian),this.slice_start=fn.getInt64At(t,224,this.littleEndian),this.slice_end=fn.getInt64At(t,232,this.littleEndian),this.description=fn.getStringAt(t,240,320),this.aux_file=fn.getStringAt(t,320,344),this.qform_code=fn.getIntAt(t,344,this.littleEndian),this.sform_code=fn.getIntAt(t,348,this.littleEndian),this.quatern_b=fn.getDoubleAt(t,352,this.littleEndian),this.quatern_c=fn.getDoubleAt(t,360,this.littleEndian),this.quatern_d=fn.getDoubleAt(t,368,this.littleEndian),this.qoffset_x=fn.getDoubleAt(t,376,this.littleEndian),this.qoffset_y=fn.getDoubleAt(t,384,this.littleEndian),this.qoffset_z=fn.getDoubleAt(t,392,this.littleEndian),s=0;s<3;s+=1)for(a=0;a<4;a+=1)o=400+(s*4+a)*8,this.affine[s][a]=fn.getDoubleAt(t,o,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=fn.getIntAt(t,496,this.littleEndian),this.xyzt_units=fn.getIntAt(t,500,this.littleEndian),this.intent_code=fn.getIntAt(t,504,this.littleEndian),this.intent_name=fn.getStringAt(t,508,524),this.dim_info=fn.getByteAt(t,524),t.byteLength>Iu.MAGIC_COOKIE&&(this.extensionFlag[0]=fn.getByteAt(t,540),this.extensionFlag[1]=fn.getByteAt(t,541),this.extensionFlag[2]=fn.getByteAt(t,542),this.extensionFlag[3]=fn.getByteAt(t,543),this.extensionFlag[0]&&(this.extensions=fn.getExtensionsAt(t,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode))}toFormattedString(){var e=fn.formatNumber,t="";return t+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,t+="Bits Per Voxel =  = "+this.numBitsPerVoxel+`
`,t+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,t+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,t+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+`
`,t+="Image Offset = "+this.vox_offset+`
`,t+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+`
`,t+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+`
`,t+="Slice Duration = "+this.slice_duration+`
`,t+="Time Axis Shift = "+this.toffset+`
`,t+="Slice Start = "+this.slice_start+`
`,t+="Slice End = "+this.slice_end+`
`,t+='Description: "'+this.description+`"
`,t+='Auxiliary File: "'+this.aux_file+`"
`,t+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,t+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,t+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+`
`,t+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,t+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+`
`,t+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+`
`,t+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+`
`,t+="Slice Code = "+this.slice_code+`
`,t+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(Ei.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(Ei.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,t+="Intent Code = "+this.intent_code+`
`,t+='Intent Name: "'+this.intent_name+`"
`,t+="Dim Info = "+this.dim_info+`
`,t}toArrayBuffer(e=!1){let r=544;if(e)for(let l of this.extensions)r+=l.esize;let s=new Uint8Array(r),a=new DataView(s.buffer);a.setInt32(0,540,this.littleEndian),s.set(new TextEncoder().encode(this.magic),4),a.setInt16(12,this.datatypeCode,this.littleEndian),a.setInt16(14,this.numBitsPerVoxel,this.littleEndian);for(let l=0;l<8;l++)a.setBigInt64(16+8*l,BigInt(this.dims[l]),this.littleEndian);a.setFloat64(80,this.intent_p1,this.littleEndian),a.setFloat64(88,this.intent_p2,this.littleEndian),a.setFloat64(96,this.intent_p3,this.littleEndian);for(let l=0;l<8;l++)a.setFloat64(104+8*l,this.pixDims[l],this.littleEndian);a.setBigInt64(168,BigInt(this.vox_offset),this.littleEndian),a.setFloat64(176,this.scl_slope,this.littleEndian),a.setFloat64(184,this.scl_inter,this.littleEndian),a.setFloat64(192,this.cal_max,this.littleEndian),a.setFloat64(200,this.cal_min,this.littleEndian),a.setFloat64(208,this.slice_duration,this.littleEndian),a.setFloat64(216,this.toffset,this.littleEndian),a.setBigInt64(224,BigInt(this.slice_start),this.littleEndian),a.setBigInt64(232,BigInt(this.slice_end),this.littleEndian),s.set(new TextEncoder().encode(this.description),240),s.set(new TextEncoder().encode(this.aux_file),320),a.setInt32(344,this.qform_code,this.littleEndian),a.setInt32(348,this.sform_code,this.littleEndian),a.setFloat64(352,this.quatern_b,this.littleEndian),a.setFloat64(360,this.quatern_c,this.littleEndian),a.setFloat64(368,this.quatern_d,this.littleEndian),a.setFloat64(376,this.qoffset_x,this.littleEndian),a.setFloat64(384,this.qoffset_y,this.littleEndian),a.setFloat64(392,this.qoffset_z,this.littleEndian);const o=this.affine.flat();for(let l=0;l<12;l++)a.setFloat64(400+8*l,o[l],this.littleEndian);if(a.setInt32(496,this.slice_code,this.littleEndian),a.setInt32(500,this.xyzt_units,this.littleEndian),a.setInt32(504,this.intent_code,this.littleEndian),s.set(new TextEncoder().encode(this.intent_name),508),a.setUint8(524,this.dim_info),e){s.set(Uint8Array.from([1,0,0,0]),540);let l=this.getExtensionLocation();for(const c of this.extensions)a.setInt32(l,c.esize,c.littleEndian),a.setInt32(l+4,c.ecode,c.littleEndian),s.set(new Uint8Array(c.edata),l+8),l+=c.esize}else s.set(new Uint8Array(4).fill(0),540);return s.buffer}};at(Iu,"MAGIC_COOKIE",540),at(Iu,"MAGIC_NUMBER_LOCATION",4),at(Iu,"MAGIC_NUMBER",[110,43,50,0,13,10,26,10]),at(Iu,"MAGIC_NUMBER2",[110,105,50,0,13,10,26,10]);let Uo=Iu;function Wct(n,e=!1){var t,i,r,s;return n.byteLength<Ei.STANDARD_HEADER_SIZE?!1:(t=new DataView(n),t&&(i=t.getUint8(Ei.MAGIC_NUMBER_LOCATION)),r=t.getUint8(Ei.MAGIC_NUMBER_LOCATION+1),s=t.getUint8(Ei.MAGIC_NUMBER_LOCATION+2),e&&i===Ei.MAGIC_NUMBER2[0]&&r===Ei.MAGIC_NUMBER2[1]&&s===Ei.MAGIC_NUMBER2[2]?!0:i===Ei.MAGIC_NUMBER[0]&&r===Ei.MAGIC_NUMBER[1]&&s===Ei.MAGIC_NUMBER[2])}function qct(n,e=!1){var t,i,r,s;return n.byteLength<Ei.STANDARD_HEADER_SIZE?!1:(t=new DataView(n),i=t.getUint8(Uo.MAGIC_NUMBER_LOCATION),r=t.getUint8(Uo.MAGIC_NUMBER_LOCATION+1),s=t.getUint8(Uo.MAGIC_NUMBER_LOCATION+2),e&&i===Uo.MAGIC_NUMBER2[0]&&r===Uo.MAGIC_NUMBER2[1]&&s===Uo.MAGIC_NUMBER2[2]?!0:i===Uo.MAGIC_NUMBER[0]&&r===Uo.MAGIC_NUMBER[1]&&s===Uo.MAGIC_NUMBER[2])}function H4(n){var e,t,i;return!!(n&&(e=new DataView(n),t=e.getUint8(0),i=e.getUint8(1),t===fn.GUNZIP_MAGIC_COOKIE1||i===fn.GUNZIP_MAGIC_COOKIE2))}function Kct(n){return Vct(new Uint8Array(n)).buffer}async function uX(n){const e=new Uint8Array(n),t=e[0]===31&&e[1]===139&&e[2]===8?"gzip":e[0]===120&&(e[1]===1||e[1]===94||e[1]===156||e[1]===218)?"deflate":"deflate-raw",i=new DecompressionStream(t),r=i.writable.getWriter();r.write(e).catch(console.error);const s=r.close().catch(console.error),o=await new Response(i.readable).arrayBuffer();return await s,o}async function dX(n,e=1/0){const t=h=>h[0]===31&&h[1]===139&&h[2]===8?"gzip":h[0]===120&&[1,94,156,218].includes(h[1])?"deflate":"deflate-raw",i=new Uint8Array(n),r=t(i),s=new DecompressionStream(r),a=new TransformStream({transform(h,p){p.enqueue(h)},flush(h){h.terminate()}}),{readable:o,writable:l}=s,c=l.getWriter(),u=o.pipeThrough(a).getReader();c.write(i).catch(h=>{h instanceof Error&&h.name==="AbortError"||console.error("Error during write:",h)});const d=[];let f=0;try{for(;f<e;){const{done:h,value:p}=await u.read();if(h)break;const m=e-f,v=p.subarray(0,Math.min(p.length,m));if(d.push(v),f+=v.length,f>=e){await Promise.all([u.cancel().catch(()=>{}),c.abort().catch(()=>{})]);break}}}catch(h){h instanceof Error&&h.name==="AbortError"||console.error("Error during decompression:",h)}finally{await Promise.allSettled([u.cancel().catch(()=>{}),c.close().catch(()=>{})])}return d.length===1?d[0].buffer:d.reduce((h,p)=>{const m=new Uint8Array(h.byteLength+p.byteLength);return m.set(new Uint8Array(h),0),m.set(p,h.byteLength),m.buffer},new ArrayBuffer(0))}function Yct(n,e=!1){let t=null;if(H4(n)&&(n=Kct(n)),Wct(n,e)?t=new Ei:qct(n,e)&&(t=new Uo),t)t.readHeader(n);else throw new Error("That file does not appear to be NIFTI!");return t}async function P3(n,e=!1){if(!H4(n))return Yct(n,e);let t=null,i=await dX(n,540),r=!0,s=!0;var a=new DataView(i);const o=a.getInt32(0,!0),l=a.getInt32(0,!1);if(o!==348)if(l===348)r=!1;else if(o===540)s=!1;else if(l===540)s=!1,r=!1;else throw new Error("That file does not appear to be NIFTI!");let c=Math.round(a.getFloat32(108,r));return Uo&&(c=fn.getUint64At(a,168,r)),c>i.byteLength&&(i=await dX(n,c)),s?t=new Ei:t=new Uo,t.readHeader(i),t}function fX(n,e){var t=n.vox_offset,i=1,r=1;n.dims[4]&&(i=n.dims[4]),n.dims[5]&&(r=n.dims[5]);var s=n.dims[1]*n.dims[2]*n.dims[3]*i*r*(n.numBitsPerVoxel/8);return e.slice(t,t+s)}var Eoe=Object.defineProperty,Ioe=n=>{throw TypeError(n)},Xct=(n,e,t)=>e in n?Eoe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,jct=(n,e)=>{for(var t in e)Eoe(n,t,{get:e[t],enumerable:!0})},Ve=(n,e,t)=>Xct(n,typeof e!="symbol"?e+"":e,t),Doe=(n,e,t)=>e.has(n)||Ioe("Cannot "+t),jn=(n,e,t)=>(Doe(n,e,"read from private field"),t?t.call(n):e.get(n)),k2=(n,e,t)=>e.has(n)?Ioe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),eg=(n,e,t,i)=>(Doe(n,e,"write to private field"),e.set(n,t),t),hX="0.51.0",Roe=class Bc{constructor({name:e="niivue",level:t="info"}={}){Ve(this,"level"),Ve(this,"name"),this.name=`${e}`,this.level=t}debug(...e){Bc.levels[this.level]>Bc.levels.debug||console.debug(`${this.name}-debug`,...e)}info(...e){Bc.levels[this.level]>Bc.levels.info||console.info(`${this.name}-info`,...e)}warn(...e){Bc.levels[this.level]>Bc.levels.warn||console.warn(`${this.name}-warn`,...e)}error(...e){Bc.levels[this.level]>Bc.levels.error||console.error(`${this.name}-error`,...e)}fatal(...e){Bc.levels[this.level]>Bc.levels.fatal||console.error(`${this.name}-fatal`,...e)}setLogLevel(e){this.level=e}setName(e){this.name=e}};Ve(Roe,"levels",{debug:0,info:1,warn:2,error:3,fatal:4,silent:1/0});var $ct=Roe,ht=new $ct({name:"niivue",level:"info"}),Qct=function(n,e,t){const i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,e),n.compileShader(i);const r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t),n.compileShader(r);const s=n.createProgram();if(n.attachShader(s,i),n.attachShader(s,r),n.linkProgram(s),!n.getProgramParameter(s,n.LINK_STATUS))throw console.log(n.getProgramInfoLog(s)),n.getShaderParameter(i,n.COMPILE_STATUS)||console.log("Vertex shader compilation error:",n.getShaderInfoLog(i)),n.getShaderParameter(r,n.COMPILE_STATUS)||console.log("Fragment shader compilation error:",n.getShaderInfoLog(r)),ht.error(n.getProgramInfoLog(s)),new Error("Shader failed to link, see console for log");return s},vr=class{constructor(n,e,t){Ve(this,"program"),Ve(this,"uniforms",{}),Ve(this,"isMatcap"),this.program=Qct(n,e,t);const i=/uniform[^;]+[ ](\w+);/g,r=/uniform[^;]+[ ](\w+);/,s=e.match(i),a=t.match(i);s&&s.forEach(o=>{const l=o.match(r);this.uniforms[l[1]]=-1}),a&&a.forEach(o=>{const l=o.match(r);this.uniforms[l[1]]=-1});for(const o in this.uniforms)this.uniforms[o]=n.getUniformLocation(this.program,o)}use(n){n.useProgram(this.program)}},L3=`#version 300 es
#line 4
layout(location=0) in vec3 pos;
layout(location=1) in vec3 texCoords;
uniform mat4 mvpMtx;
out vec3 vColor;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vColor = texCoords;
}`,Poe=`
	vec4 drawColor(float scalar, float drawOpacity) {
		float nlayer = float(textureSize(colormap, 0).y);
		float layer = (nlayer - 0.5) / nlayer;
		vec4 dcolor = texture(colormap, vec2((scalar * 255.0)/256.0 + 0.5/256.0, layer)).rgba;
		dcolor.a *= drawOpacity;
		return dcolor;
}`,_T=`vec3 GetBackPosition(vec3 startPositionTex) {
	vec3 startPosition = startPositionTex * volScale;
	vec3 invR = 1.0 / rayDir;
	vec3 tbot = invR * (vec3(0.0)-startPosition);
	vec3 ttop = invR * (volScale-startPosition);
	vec3 tmax = max(ttop, tbot);
	vec2 t = min(tmax.xx, tmax.yz);
	vec3 endPosition = startPosition + (rayDir * min(t.x, t.y));
	//convert world position back to texture position:
	endPosition = endPosition / volScale;
	return endPosition;
}

vec4 applyClip (vec3 dir, inout vec4 samplePos, inout float len, inout bool isClip) {
	float cdot = dot(dir,clipPlane.xyz);
	isClip = false;
	if  ((clipPlane.a > 1.0) || (cdot == 0.0)) return samplePos;
	bool frontface = (cdot > 0.0);
	float dis = (-clipPlane.a - dot(clipPlane.xyz, samplePos.xyz-0.5)) / cdot;
	float thick = clipThick;
	if (thick <= 0.0) thick = 2.0;
	float  disBackFace = (-(clipPlane.a-thick) - dot(clipPlane.xyz, samplePos.xyz-0.5)) / cdot;
	if (((frontface) && (dis >= len)) || ((!frontface) && (dis <= 0.0))) {
		samplePos.a = len + 1.0;
		return samplePos;
	}
	if (frontface) {
		dis = max(0.0, dis);
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		if (dis > 0.0) isClip = true;
		len = min(disBackFace, len);
	}
	if (!frontface) {
		len = min(dis, len);
		disBackFace = max(0.0, disBackFace);
		if (len == dis) isClip = true;
		samplePos = vec4(samplePos.xyz+dir * disBackFace, disBackFace);
	}
	return samplePos;
}

void clipVolume(inout vec3 startPos, inout vec3 backPos, int dim, float frac, bool isLo) {
	vec3 dir = backPos - startPos;
	float len = length(dir);
	dir = normalize(dir);
	// Discard if both startPos and backPos are outside the clipping plane
	if (isLo && startPos[dim] < frac && backPos[dim] < frac) {
		discard;
	}
	if (!isLo && startPos[dim] > frac && backPos[dim] > frac) {
		discard;
	}
	vec4 plane = vec4(0.0, 0.0, 0.0, 0.5 - frac);
	plane[dim] = 1.0;
	float cdot = dot(dir, plane.xyz);
	float dis = (-plane.w - dot(plane.xyz, startPos - vec3(0.5))) / cdot;
	// Adjust startPos or backPos based on the intersection with the plane
	bool isFrontFace = (cdot > 0.0);
	if (!isLo)
		isFrontFace = !isFrontFace;
	if (dis > 0.0) {
		if (isFrontFace) {
				if (dis <= len) {
					startPos = startPos + dir * dis;
				}
		} else {
			if (dis < len) {
				backPos = startPos + dir * dis;
			}
		}
	}
}

void clipVolumeStart (inout vec3 startPos, inout vec3 backPos) {
	// vec3 clipLo = vec3(0.1, 0.2, 0.4);
	// vec3 clipHi = vec3(0.8, 0.7, 0.7);
	for (int i = 0; i < 3; i++) {
		if (clipLo[i] > 0.0)
			clipVolume(startPos, backPos, i, clipLo[i], true);
	}
	for (int i = 0; i < 3; i++) {
		if (clipHi[i] < 1.0)
			clipVolume(startPos, backPos, i, clipHi[i], false);
	}
}

float frac2ndc(vec3 frac) {
//https://stackoverflow.com/questions/7777913/how-to-render-depth-linearly-in-modern-opengl-with-gl-fragcoord-z-in-fragment-sh
	vec4 pos = vec4(frac.xyz, 1.0); //fraction
	vec4 dim = vec4(vec3(textureSize(volume, 0)), 1.0);
	pos = pos * dim;
	vec4 shim = vec4(-0.5, -0.5, -0.5, 0.0);
	pos += shim;
	vec4 mm = transpose(matRAS) * pos;
	float z_ndc = (mvpMtx * vec4(mm.xyz, 1.0)).z;
	return (z_ndc + 1.0) / 2.0;
}`+Poe,Loe=`void main() {
	if (fColor.x > 2.0) {
		fColor = vec4(1.0, 0.0, 0.0, 0.5);
		return;
	}
	fColor = vec4(0.0,0.0,0.0,0.0);
	vec4 clipPlaneColorX = clipPlaneColor;
	//if (clipPlaneColor.a < 0.0)
	//	clipPlaneColorX.a = - 1.0;
	bool isColorPlaneInVolume = false;
	if (clipPlaneColorX.a < 0.0) {
		isColorPlaneInVolume = true;
		clipPlaneColorX.a = 0.0;
	}
	//fColor = vec4(vColor.rgb, 1.0); return;
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	vec3 backPosition = GetBackPosition(start);
	// fColor = vec4(backPosition, 1.0); return;
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	dir = normalize(dir);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	//if ((clipPos.a != samplePos.a) && (len < 3.0)) {
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	float drawOpacityA = renderDrawAmbientOcclusionXY.y;
	if ((samplePos.a >= len) && (((overlays < 1.0) && (drawOpacityA <= 0.0) ) || (backgroundMasksOverlays > 0)))  {
		if (isClip)
			fColor += clipPlaneColorX;
		return;
	}
	fColor = vec4(1.0, 1.0, 1.0, 1.0);
	//gl_FragDepth = frac2ndc(samplePos.xyz); //crude due to fast pass resolution
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * lenNoClip);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`,zB=`
	if (firstHit.a < len)
		gl_FragDepth = frac2ndc(firstHit.xyz);
	colAcc.a = (colAcc.a / earlyTermination) * backOpacity;
	fColor = colAcc;
	//if (isClip) //CR
	if ((isColorPlaneInVolume) && (clipPos.a != samplePos.a) && (abs(firstHit.a - clipPos.a) < deltaDir.a))
		fColor.rgb = mix(fColor.rgb, clipPlaneColorX.rgb, abs(clipPlaneColor.a));
		//fColor.rgb = mix(fColor.rgb, clipPlaneColorX.rgb, clipPlaneColorX.a * 0.65);
	float renderDrawAmbientOcclusionX = renderDrawAmbientOcclusionXY.x;
	float drawOpacity = renderDrawAmbientOcclusionXY.y;
	if ((overlays < 1.0) && (drawOpacity <= 0.0))
		return;
	//overlay pass
	len = lenNoClip;
	samplePos = vec4(start.xyz, 0.0); //ray position
	//start: OPTIONAL fast pass: rapid traversal until first hit
	stepSizeFast = sliceSize * 1.0;
	deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (drawOpacity > 0.0)
			val = max(val, texture(drawing, samplePos.xyz).r);
		if (val > 0.001)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	if (samplePos.a >= len) {
		if (isClip && (fColor.a == 0.0))
				fColor += clipPlaneColorX;
			return;
	}
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	float overFarthest = len;
	colAcc = vec4(0.0, 0.0, 0.0, 0.0);

	samplePos += deltaDir * ran; //jitter ray
	vec4 overFirstHit = vec4(0.0,0.0,0.0,2.0 * len);
	if (backgroundMasksOverlays > 0)
		samplePos = firstHit;
	bool firstDraw = true;
	while (samplePos.a <= len) {
		vec4 colorSample = texture(overlay, samplePos.xyz);
		if ((colorSample.a < 0.01) && (drawOpacity > 0.0)) {
			float val = texture(drawing, samplePos.xyz).r;
			vec4 draw = drawColor(val, drawOpacity);
			if ((draw.a > 0.0) && (firstDraw)) {
				firstDraw = false;
				float sum = 0.0;
				const float mn = 1.0 / 256.0;
				const float sampleRadius = 1.1;
				float dx = sliceSize * sampleRadius;
				vec3 center = samplePos.xyz;
				//six neighbors that share a face
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,0.0), dir)).r, mn);
				//float proportion = (sum / mn) / 6.0;
				
				//12 neighbors that share an edge
				dx = sliceSize * sampleRadius * sqrt(2.0) * 0.5;
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,-dx,0.0), dir)).r, mn);

				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,-dx,0.0), dir)).r, mn);
				
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,+dx,0.0), dir)).r, mn);
				float proportion = (sum / mn) / 18.0; //proportion of six neighbors is non-zero
				
				//a high proportion of hits means crevice
				//since the AO term adds shadows that darken most voxels, it will result in dark surfaces
				//the term brighten adds a little illumination to balance this
				// without brighten, only the most extreme ridges will not be darker
				const float brighten = 1.2;
				vec3 ao = draw.rgb * (1.0 - proportion) * brighten;
				draw.rgb = mix (draw.rgb, ao , renderDrawAmbientOcclusionX);
			}
			colorSample = draw;
		}
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (overFirstHit.a > len)
				overFirstHit = samplePos;
			colorSample.a *= renderOverlayBlend;
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			overFarthest = samplePos.a;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
	//if (samplePos.a >= len) {
	if (colAcc.a <= 0.0) {
		if (isClip && (fColor.a == 0.0))
			fColor += clipPlaneColorX;
		return;
	}
	if (overFirstHit.a < firstHit.a)
		gl_FragDepth = frac2ndc(overFirstHit.xyz);
	float overMix = colAcc.a;
	float overlayDepth = 0.3;
	if (fColor.a <= 0.0)
		overMix = 1.0;
	else if (((overFarthest) > backNearest)) {
		float dx = (overFarthest - backNearest)/1.73;
		dx = fColor.a * pow(dx, overlayDepth);
		overMix *= 1.0 - dx;
	}
	fColor.rgb = mix(fColor.rgb, colAcc.rgb, overMix);
	fColor.a = max(fColor.a, colAcc.a);
}`,Zct=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+_T+`
	void main() {
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		fColor = vec4(0.0,0.0,0.0,0.0);
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * len);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float dis = len;
	//check if axial plane is closest
	vec4 aClip = vec4(0.0, 0.0, 1.0, (1.0- clipPlane.z) - 0.5);
	float adis = (-aClip.a - dot(aClip.xyz, samplePos.xyz-0.5)) / dot(dir,aClip.xyz);
	if (adis > 0.0)
		dis = min(adis, dis);
	//check of coronal plane is closest
	vec4 cClip = vec4(0.0, 1.0, 0.0, (1.0- clipPlane.y) - 0.5);
	float cdis = (-cClip.a - dot(cClip.xyz, samplePos.xyz-0.5)) / dot(dir,cClip.xyz);
	if (cdis > 0.0)
		dis = min(cdis, dis);
	//check if coronal slice is closest
	vec4 sClip = vec4(1.0, 0.0, 0.0, (1.0- clipPlane.x) - 0.5);
	float sdis = (-sClip.a - dot(sClip.xyz, samplePos.xyz-0.5)) / dot(dir,sClip.xyz);
	if (sdis > 0.0)
		dis = min(sdis, dis);
	if ((dis > 0.0) && (dis < len)) {
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		colAcc = texture(volume, samplePos.xyz);
		colAcc.a = earlyTermination;
		firstHit = samplePos;
		backNearest = min(backNearest, samplePos.a);
	}
	//the following are only used by overlays
	vec4 clipPlaneColorX = clipPlaneColor;
	bool isColorPlaneInVolume = false;
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`+zB,Jct=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+_T+Loe+`while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
`+zB,eut=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 normMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing, gradient;
uniform highp sampler2D colormap;
uniform highp sampler2D matCap;
uniform vec2 renderDrawAmbientOcclusionXY;
uniform float gradientAmount;
in vec3 vColor;
out vec4 fColor;
`+_T+Loe+`
	float startPos = samplePos.a;
	float clipClose = clipPos.a + 3.0 * deltaDir.a; //do not apply gradients near clip plane
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			grad.rgb = normalize(grad.rgb*2.0 - 1.0);
			//if (grad.a < prevGrad.a)
			//	grad.rgb = prevGrad.rgb;
			//prevGrad = grad;
			vec3 n = mat3(normMtx) * grad.rgb;
			n.y = - n.y;
			vec4 mc = vec4(texture(matCap, n.xy * 0.5 + 0.5).rgb, 1.0) * brighten;
			mc = mix(vec4(1.0), mc, gradientAmount);
			if (samplePos.a > clipClose)
				colorSample.rgb *= mc.rgb;
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+zB,pX=`#version 300 es
#line 392
layout(location=0) in vec3 pos;
uniform int axCorSag;
uniform mat4 mvpMtx;
uniform mat4 frac2mm;
uniform float slice;
out vec3 texPos;
void main(void) {
	texPos = vec3(pos.x, pos.y, slice);
	if (axCorSag > 1)
		texPos = vec3(slice, pos.x, pos.y);
	else if (axCorSag > 0)
		texPos = vec3(pos.x, slice, pos.y);
	vec4 mm = frac2mm * vec4(texPos, 1.0);
	gl_Position = mvpMtx * mm;
}`,koe=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler3D volume, overlay;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;`+Poe+`void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 ocolor = vec4(0.0);
	float overlayAlpha = overlayAlphaShader;
	if (overlays > 0.0) {
		ocolor = texture(overlay, texPos);
		//dFdx for "boxing" issue 435 has aliasing on some implementations (coarse vs fine)
		//however, this only identifies 50% of the edges due to aliasing effects
		// http://www.aclockworkberry.com/shader-derivative-functions/
		// https://bgolus.medium.com/distinctive-derivative-differences-cce38d36797b
		//if ((ocolor.a >= 1.0) && ((dFdx(ocolor.a) != 0.0) || (dFdy(ocolor.a) != 0.0)  ))
		//	ocolor.rbg = vec3(0.0, 0.0, 0.0);
		bool isOutlineBelowNotAboveThreshold = true;
		if (isOutlineBelowNotAboveThreshold) {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a < 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				//6 voxel neighbors that share a face
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 0.0;
				if (axCorSag != 2) {
					a = max(a, texture(overlay, vxR).a);
					a = max(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = max(a, texture(overlay, vxA).a);
					a = max(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = max(a, texture(overlay, vxS).a);
					a = max(a, texture(overlay, vxI).a);
				}
				bool isCheckCorners = true;
				if (isCheckCorners) {
					//12 voxel neighbors that share an edge
					vec3 vxRA = vec3(texPos.x+vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxLA = vec3(texPos.x-vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxRP = vec3(texPos.x+vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxLP = vec3(texPos.x-vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxRS = vec3(texPos.x+vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxLS = vec3(texPos.x-vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxRI = vec3(texPos.x+vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxLI = vec3(texPos.x-vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxAS = vec3(texPos.x, texPos.y+vx.y, texPos.z+vx.z);
					vec3 vxPS = vec3(texPos.x, texPos.y-vx.y, texPos.z+vx.z);
					vec3 vxAI = vec3(texPos.x, texPos.y+vx.y, texPos.z-vx.z);
					vec3 vxPI = vec3(texPos.x, texPos.y-vx.y, texPos.z-vx.z);

					if (axCorSag == 0) { //axial corners
						a = max(a, texture(overlay, vxRA).a);
						a = max(a, texture(overlay, vxLA).a);
						a = max(a, texture(overlay, vxRP).a);
						a = max(a, texture(overlay, vxLP).a);
					}
					if (axCorSag == 1) { //coronal corners
						a = max(a, texture(overlay, vxRS).a);
						a = max(a, texture(overlay, vxLS).a);
						a = max(a, texture(overlay, vxRI).a);
						a = max(a, texture(overlay, vxLI).a);
					}
					if (axCorSag == 2) { //sagittal corners
						a = max(a, texture(overlay, vxAS).a);
						a = max(a, texture(overlay, vxPS).a);
						a = max(a, texture(overlay, vxAI).a);
						a = max(a, texture(overlay, vxPI).a);
					}
				}
				if (a >= 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}

		} else {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a >= 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 1.0;
				if (axCorSag != 2) {
					a = min(a, texture(overlay, vxR).a);
					a = min(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = min(a, texture(overlay, vxA).a);
					a = min(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = min(a, texture(overlay, vxS).a);
					a = min(a, texture(overlay, vxI).a);
				}
				if (a < 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}
		} //outline above threshold
	}

`,Foe=`	ocolor.a *= overlayAlpha;
	vec4 dcolor = drawColor(texture(drawing, texPos).r, drawOpacity);
	if (dcolor.a > 0.0) {
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
	if ((backgroundMasksOverlays > 0) && (background.a == 0.0))
		return;
	float a = color.a + ocolor.a * (1.0 - color.a); // premultiplied alpha
	if (a == 0.0) return;
	color.rgb = mix(color.rgb, ocolor.rgb, ocolor.a / a);
	color.a = a;
}`,tut=koe+Foe,nut=koe+`	if (ocolor.a > 0.0) {
		//https://gamedev.stackexchange.com/questions/102889/is-it-possible-to-convert-vec4-to-int-in-glsl-using-opengl-es
		uint alpha = uint(ocolor.a * 255.0);
		vec3 xyzFlip = vec3(float((uint(1) & alpha) > uint(0)), float((uint(2) & alpha) > uint(0)), float((uint(4) & alpha) > uint(0)));
		//convert from 0 and 1 to -1 and 1
		xyzFlip = (xyzFlip * 2.0) - 1.0;
		//https://math.stackexchange.com/questions/1905533/find-perpendicular-distance-from-point-to-line-in-3d
		//v1 principle direction of tensor for this voxel
		vec3 v1 = ocolor.rgb;
		//flips encode polarity to convert from 0..1 to -1..1 (27 bits vs 24 bit precision)
		v1 = normalize( v1 * xyzFlip);
		vec3 vxl = fract(texPos * vec3(textureSize(volume, 0))) - 0.5;
		//vxl coordinates now -0.5..+0.5 so 0,0,0 is origin
		vxl.x = -vxl.x;
		float t = dot(vxl,v1);
		vec3 P = t * v1;
		float dx = length(P-vxl);
		ocolor.a = 1.0 - smoothstep(0.2,0.25, dx);
		//if modulation was applied, use that to scale alpha not color:
		ocolor.a *= length(ocolor.rgb);
		ocolor.rgb = normalize(ocolor.rgb);
		//compute distance one half voxel closer to viewer:
		float pan = 0.5;
		if (axCorSag == 0)
			vxl.z -= pan;
		if (axCorSag == 1)
			vxl.y -= pan;
		if (axCorSag == 2)
			vxl.x += pan;
		t = dot(vxl,v1);
		P = t * v1;
		float dx2 = length(P-vxl);
		ocolor.rgb += (dx2-dx-(0.5 * pan)) * 1.0;
	}
`+Foe,ZI=`#version 300 es
#line 480
precision highp int;
precision highp float;
uniform vec4 lineColor;
out vec4 color;
void main() {
	color = lineColor;
}`,iut=`#version 300 es
#line 723
precision highp int;
precision highp float;

uniform vec4 lineColor;
uniform vec4 leftTopWidthHeight;
uniform float thickness; // line thickness in pixels
uniform vec2 canvasWidthHeight;

out vec4 color;

void main() {
    // fragment position in screen coordinates
    vec2 fragCoord = gl_FragCoord.xy;

    // canvas height
    float canvasHeight = canvasWidthHeight.y;

    // 'top' and 'bottom' to match gl_FragCoord.y coordinate system
    float top = canvasHeight - leftTopWidthHeight.y;
    float bottom = top - leftTopWidthHeight.w;

    // left and right edges
    float left = leftTopWidthHeight.x;
    float right = left + leftTopWidthHeight.z;

    bool withinLeft = fragCoord.x >= left && fragCoord.x <= left + thickness;
    bool withinRight = fragCoord.x <= right && fragCoord.x >= right - thickness;
    bool withinTop = fragCoord.y <= top && fragCoord.y >= top - thickness;
    bool withinBottom = fragCoord.y >= bottom && fragCoord.y <= bottom + thickness;

    bool isOutline = withinLeft || withinRight || withinTop || withinBottom;

    if (isOutline) {
        color = lineColor;
    } else {
        discard; 
    }
}`,rut=`#version 300 es
#line 490
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vColor;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vColor = pos.xy;
}`,sut=`#version 300 es
#line 506
precision highp int;
precision highp float;
uniform highp sampler2D colormap;
uniform float layer;
in vec2 vColor;
out vec4 color;
void main() {
	float nlayer = float(textureSize(colormap, 0).y);
	float fmap = (0.5 + layer) / nlayer;
	color = vec4(texture(colormap, vec2(vColor.x, fmap)).rgb, 1.0);
}`,mX=`#version 300 es
#line 520
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
}`,aut=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec4 startXYendXY;
void main(void) {
	vec2 posXY = mix(startXYendXY.xy, startXYendXY.zw, pos.x);
	vec2 dir = normalize(startXYendXY.xy - startXYendXY.zw);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0
	gl_Position = vec4((posXY * 2.0) - 1.0, 0.0, 1.0);
}`,out=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec2 startXY;
uniform vec3 endXYZ; // transformed XYZ point
void main(void) {	
	vec2 posXY = mix(startXY.xy, endXYZ.xy, pos.x);
	vec2 startDiff = endXYZ.xy - startXY.xy;
	float startDistance = length(startDiff);
	vec2 diff = endXYZ.xy - posXY;
	float currentDistance = length(diff);
	vec2 dir = normalize(startXY.xy - endXYZ.xy);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0	
	float z = endXYZ.z * ( 1.0 - abs(currentDistance/startDistance)); 
	gl_Position = vec4((posXY * 2.0) - 1.0, z, 1.0);
}`,lut=`#version 300 es
#line 549
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(pos.x, 1.0 - pos.y);
}`,cut=`#version 300 es
#line 565
precision highp int;
precision highp float;
uniform highp sampler2D bmpTexture;
in vec2 vUV;
out vec4 color;
void main() {
	color = texture(bmpTexture, vUV);
}`,uut=`#version 300 es
#line 576
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(uvLeftTopWidthHeight.x + (pos.x * uvLeftTopWidthHeight.z), uvLeftTopWidthHeight.y  + ((1.0 - pos.y) * uvLeftTopWidthHeight.w) );
}`,dut=`#version 300 es
#line 593
precision highp int;
precision highp float;
uniform highp sampler2D fontTexture;
uniform vec4 fontColor;
uniform float screenPxRange;
in vec2 vUV;
out vec4 color;
float median(float r, float g, float b) {
	return max(min(r, g), min(max(r, g), b));
}
void main() {
	vec3 msd = texture(fontTexture, vUV).rgb;
	float sd = median(msd.r, msd.g, msd.b);
	float screenPxDistance = screenPxRange*(sd - 0.5);
	float opacity = clamp(screenPxDistance + 0.5, 0.0, 1.0);
	color = vec4(fontColor.rgb , fontColor.a * opacity);
}`,fut=`#version 300 es
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = pos.xy;
}`,hut=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 circleColor;
uniform float fillPercent;
in vec2 vUV;
out vec4 color;
void main() {
	/* Check if the pixel is inside the circle
		 and color it with a gradient. Otherwise, color it 
		 transparent   */
	float distance = length(vUV-vec2(0.5,0.5));
	if ( distance < 0.5 && distance >= (1.0 - fillPercent) / 2.0){
			color = vec4(circleColor.r,circleColor.g,circleColor.b,circleColor.a) ;			
	}else{
			color = vec4(0.0,0.0,0.0,0.0);
	}
}
`,tg=`#version 300 es
#line 613
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4( (vPos.xy-vec2(0.5,0.5)) * 2.0, 0.0, 1.0);
}`,JI=`#version 300 es
uniform highp usampler3D intensityVol;
`,vX=`#version 300 es
uniform highp isampler3D intensityVol;
`,put=`#version 300 es
uniform highp sampler3D intensityVol;
`,gX=`#line 636
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform vec4 xyzaFrac;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint idx = uint(texture(intensityVol, vx.xyz).r);
	FragColor = vec4(0.0, 0.0, 0.0, 0.0);
	if (idx == uint(0))
		return;
	//idx = ((idx - uint(1)) % uint(100))+uint(1);
	float textureWidth = float(textureSize(colormap, 0).x);
	float fx = (float(idx)+0.5) / textureWidth;
	float nlayer = float(textureSize(colormap, 0).y);
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(fx, y)).rgba;
	float alpha = FragColor.a;
	FragColor.a *= opacity;
	if (xyzaFrac.a > 0.0) { //outline
		vx = vec4(TexCoord.x+xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
		uint R = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x-xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
		uint L = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y+xyzaFrac.y, coordZ, 1.0) * mtx;
		uint A = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y-xyzaFrac.y, coordZ, 1.0) * mtx;
		uint P = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y, coordZ+xyzaFrac.z, 1.0) * mtx;
		uint S = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y, coordZ-xyzaFrac.z, 1.0) * mtx;
		uint I = uint(texture(intensityVol, vx.xyz).r);
		if ((idx != R) || (idx != L) || (idx != A) || (idx != P) || (idx != S) || (idx != I))
			FragColor.a = alpha * xyzaFrac.a;
	}
}`,eD=`#line 691
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform float cal_maxNeg;
uniform float cal_minNeg;
uniform bool isAlphaThreshold;
uniform bool isColorbarFromZero;
uniform bool isAdditiveBlend;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform int modulation;
uniform highp sampler3D modulationVol;
uniform float opacity;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	if ((vx.x < 0.0) || (vx.x > 1.0) || (vx.y < 0.0) || (vx.y > 1.0) || (vx.z < 0.0) || (vx.z > 1.0)) {
		//set transparent if out of range
		//https://webglfundamentals.org/webgl/webgl-3d-textures-repeat-clamp.html
		FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		return;
	}
	float f = (scl_slope * float(texture(intensityVol, vx.xyz).r)) + scl_inter;
	float mn = cal_min;
	float mx = cal_max;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mn = 0.0;
	float r = max(0.00001, abs(mx - mn));
	mn = min(mn, mx);
	float txl = mix(0.0, 1.0, (f - mn) / r);
	if (f > mn) { //issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
	}
	//https://stackoverflow.com/questions/5879403/opengl-texture-coordinates-in-pixel-space
	float nlayer = float(textureSize(colormap, 0).y);
	//each volume has two color maps:
	// (layer*2) = negative and (layer * 2) + 1 = postive
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(txl, y)).rgba;
	//negative colors
	mn = cal_minNeg;
	mx = cal_maxNeg;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mx = 0.0;
	//if ((!isnan(cal_minNeg)) && ( f < mx)) {
	if ((cal_minNeg < cal_maxNeg) && ( f < mx)) {
		r = max(0.00001, abs(mx - mn));
		mn = min(mn, mx);
		txl = 1.0 - mix(0.0, 1.0, (f - mn) / r);
		//issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
		y = ((2.0 * layer) + 0.5)/nlayer;
		FragColor = texture(colormap, vec2(txl, y));
	}
	if (layer > 0.7)
		FragColor.a = step(0.00001, FragColor.a);
	//if (modulation > 10)
	//	FragColor.a *= texture(modulationVol, vx.xyz).r;
	//	FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (isAlphaThreshold) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = pow(-f / -cal_maxNeg, 2.0);
		else if ((f > 0.0) && (cal_min > 0.0))
			FragColor.a *= pow(f / cal_min, 2.0); //issue435:  A = (V/X)**2
		//FragColor.g = 0.0;
	} else if (isColorbarFromZero) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = 0.0;
		else if ((f > 0.0) && (cal_min > 0.0) && (f < cal_min))
			FragColor.a *= 0.0;

	}
	if (modulation == 1) {
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	} else if (modulation == 2) {
		FragColor.a = texture(modulationVol, vx.xyz).r;
	}
	FragColor.a *= opacity;
	if (layer < 1.0) return;
	vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
	// https://en.wikipedia.org/wiki/Alpha_compositing
	float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
	if (aout <= 0.0) return;
	if (isAdditiveBlend)
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a)) / aout;
	else
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
	FragColor.a = aout;
}`,mut=`#line 773
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform mat4 mtx;
uniform bool hasAlpha;
uniform int modulation;
uniform highp sampler3D modulationVol;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	uvec4 aColor = texture(intensityVol, vx.xyz);
	FragColor = vec4(float(aColor.r) / 255.0, float(aColor.g) / 255.0, float(aColor.b) / 255.0, float(aColor.a) / 255.0);
	if (modulation == 1)
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (!hasAlpha) {
		FragColor.a = (FragColor.r * 0.21 + FragColor.g * 0.72 + FragColor.b * 0.07);
		//next line: we could binarize alpha, but see rendering of visible human
		//FragColor.a = step(0.01, FragColor.a);
	}
	if (modulation == 2)
		FragColor.a = texture(modulationVol, vx.xyz).r;
	FragColor.a *= opacity;
}`,vut=`#version 300 es
#line 808
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4((vPos.x - 0.5) * 2.0, (vPos.y - 0.5) * 2.0, 0.0, 1.0);
}`,gut=`#version 300 es
#line 829
	precision highp float;
	precision highp int;
	precision highp isampler3D;
	layout(location = 0) out int label;
	layout(location = 1) out int strength;
	in vec2 TexCoord;
	uniform int finalPass;
	uniform float coordZ;
	uniform lowp sampler3D in3D;
	uniform highp isampler3D backTex; // background
	uniform highp isampler3D labelTex; // label
	uniform highp isampler3D strengthTex; // strength
void main(void) {
	vec3 interpolatedTextureCoordinate = vec3(TexCoord.xy, coordZ);
	ivec3 size = textureSize(backTex, 0);
	ivec3 texelIndex = ivec3(floor(interpolatedTextureCoordinate * vec3(size)));
	int background = texelFetch(backTex, texelIndex, 0).r;
	label = texelFetch(labelTex, texelIndex, 0).r;
	strength = texelFetch(strengthTex, texelIndex, 0).r;
	for (int k = -1; k <= 1; k++) {
		for (int j = -1; j <= 1; j++) {
			for (int i = -1; i <= 1; i++) {
				if (i != 0 && j != 0 && k != 0) {
					ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
					int neighborBackground = texelFetch(backTex, neighborIndex, 0).r;
					int neighborStrength = texelFetch(strengthTex, neighborIndex, 0).r;
					int strengthCost = abs(neighborBackground - background);
					int takeoverStrength = neighborStrength - strengthCost;
					if (takeoverStrength > strength) {
						strength = takeoverStrength;
						label = texelFetch(labelTex, neighborIndex, 0).r;
					}
				}
			}
		}
	}
	if (finalPass < 1)
		return;
	int ok = 1;
	ivec4 labelCount = ivec4(0,0,0,0);
	for (int k = -1; k <= 1; k++)
		for (int j = -1; j <= 1; j++)
			for (int i = -1; i <= 1; i++) {
				ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
				int ilabel = texelFetch(labelTex, neighborIndex, 0).r;
				if ((ilabel < 0) || (ilabel > 3))
					ok = 0;
				else
					labelCount[ilabel]++;
			}
	if (ok != 1) {
		return;
	}
	int maxIdx = 0;
	for (int i = 1; i < 4; i++) {
		if (labelCount[i] > labelCount[maxIdx])
			maxIdx = i;
	}
	label = maxIdx;
}`,yut=`#version 300 es
layout(location=0) in vec3 pos;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
}`,but=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 surfaceColor;
out vec4 color;
void main() {
	color = surfaceColor;
}`,xut=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 clr;
out vec4 vClr;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vClr = clr;
}`,Aut=`#version 300 es
precision highp int;
precision highp float;
in vec4 vClr;
out vec4 color;
uniform float opacity;
void main() {
	color = vec4(vClr.rgb, opacity);
}`,tD=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
out vec3 vN;
out vec4 vP;
out vec4 vPc;
void main(void) {
	vec3 lightPosition = vec3(0.0, 0.0, -10.0);
	vP = vec4(pos, 1.0);
	vPc = mvpMtx * vec4(pos, 1.0);
	gl_Position = vPc;
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,wut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
out vec4 color;
vec4 packFloatToVec4i(const float value) {
	const vec4 bitSh = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
	const vec4 bitMsk = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
	vec4 res = fract(value * bitSh);
	res -= res.xxyz * bitMsk;
	return res;
}
void main() {
	color = packFloatToVec4i(gl_FragCoord.z);
}`,Sut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
float stepmix(float edge0, float edge1, float E, float x){
	float T = clamp(0.5 * (x - edge0 + E) / E, 0.0, 1.0);
	return mix(edge0, edge1, T);
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0);
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.5;
	float shininess = 50.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float df = max(0.0, dot(n, l));
	float sf = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	const float A = 0.1;
	const float B = 0.3;
	const float C = 0.6;
	const float D = 1.0;
	float E = fwidth(df);
	if (df > A - E && df < A + E) df = stepmix(A, B, E, df);
	else if (df > B - E && df < B + E) df = stepmix(B, C, E, df);
	else if (df > C - E && df < C + E) df = stepmix(C, D, E, df);
	else if (df < A) df = 0.0;
	else if (df < B) df = B;
	else if (df < C) df = C;
	else df = D;
	E = fwidth(sf);
	if (sf > 0.5 - E && sf < 0.5 + E)
		sf = smoothstep(0.5 - E, 0.5 + E, sf);
	else
		sf = step(0.5, sf);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(df, 0.0) * vClr.rgb * diffuse;
	color.rgb = a + d + (specular * sf);
	color.a = opacity;
}`,_ut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.25;
	float shininess = 10.0;
	float PenWidth = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	float view = abs(dot(n,r)); //with respect to viewer
	if (PenWidth < view) discard;
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color.rgb = a + d + s;
	color.a = opacity;
}`,Cut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float diffuse = 1.0;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 0.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d = lightNormDot * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(d + s, opacity);
}`,Mut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float diffuse = 1.4;
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(normalize(vN), l), 0.0);
	color = vec4(lightNormDot * vClr.rgb * diffuse, opacity);
}`,Tut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float specularRGB = 0.7;
	float specularWhite = 0.3;
	float shininess = 10.0;
	float diffuse = 1.0;
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	vec3 n = normalize(vN);
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d3 = lightNormDot * vClr.rgb * diffuse;
	float s = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 s3 = specularRGB * s * vClr.rgb;
	s *= specularWhite;
	color = vec4(d3 + s3 + s, opacity);
}`,Eut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
in vec4 vPc;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	// Compute curvature
	vec3 dx = dFdx(n);
	vec3 dy = dFdy(n);
	vec3 xneg = n - dx;
	vec3 xpos = n + dx;
	vec3 yneg = n - dy;
	vec3 ypos = n + dy;
	float depth = length(vPc.xyz);
	float curv = (cross(xneg, xpos).y - cross(yneg, ypos).x) / depth;
	//at this stage 0.5 for flat, with valleys dark and ridges bright
	curv = 1.0 - (curv + 0.5);
	//clamp
	curv =  min(max(curv, 0.0), 1.0);
	// easing function
	curv = pow(curv, 0.5);
	//modulate ambient and diffuse with curvature
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.6;
	float diffuse = 0.6;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 lightPosition = vec3(0.0, 10.0, -2.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient * curv;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,Iut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,Dut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
uniform sampler2D matCap;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	vec2 uv = n.xy * 0.5 + 0.5;
	uv.y = 1.0 - uv.y;
	vec3 clr = texture(matCap,uv.xy).rgb * vClr.rgb;
	color = vec4(clr, opacity);
}`,Rut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float ambient = 0.35;
	float diffuse = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	color = vec4(a + d, opacity);
}`,Put=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 up = vec3(0.0, 1.0, 0.0);
	float ax = dot(n, up) * 0.5 + 0.5;  //Shreiner et al. (2013) OpenGL Programming Guide, 8th Ed., p 388. ISBN-10: 0321773039
	vec3 upClr = vec3(1.0, 1.0, 0.95);
	vec3 downClr = vec3(0.4, 0.4, 0.6);
	vec3 a = vClr.rgb * ambient;
	a *= mix(downClr, upClr, ax);
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,Lut=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
//Spherical harmonics constants
const float C1 = 0.429043;
const float C2 = 0.511664;
const float C3 = 0.743125;
const float C4 = 0.886227;
const float C5 = 0.247708;
//Spherical harmonics coefficients
// Ramamoorthi, R., and P. Hanrahan. 2001b. "An Efficient Representation for Irradiance Environment Maps." In Proceedings of SIGGRAPH 2001, pp. 497–500.
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// Constants for Eucalyptus Grove lighting
const vec3 L00  = vec3( 0.3783264,  0.4260425,  0.4504587);
const vec3 L1m1 = vec3( 0.2887813,  0.3586803,  0.4147053);
const vec3 L10  = vec3( 0.0379030,  0.0295216,  0.0098567);
const vec3 L11  = vec3(-0.1033028, -0.1031690, -0.0884924);
const vec3 L2m2 = vec3(-0.0621750, -0.0554432, -0.0396779);
const vec3 L2m1 = vec3( 0.0077820, -0.0148312, -0.0471301);
const vec3 L20  = vec3(-0.0935561, -0.1254260, -0.1525629);
const vec3 L21  = vec3(-0.0572703, -0.0502192, -0.0363410);
const vec3 L22  = vec3( 0.0203348, -0.0044201, -0.0452180);
vec3 SH(vec3 vNormal) {
	vNormal = vec3(vNormal.x,vNormal.z,vNormal.y);
	vec3 diffuseColor = C1 * L22 * (vNormal.x * vNormal.x - vNormal.y * vNormal.y) +
	C3 * L20 * vNormal.z * vNormal.z +
	C4 * L00 -
	C5 * L20 +
	2.0 * C1 * L2m2 * vNormal.x * vNormal.y +
	2.0 * C1 * L21  * vNormal.x * vNormal.z +
	2.0 * C1 * L2m1 * vNormal.y * vNormal.z +
	2.0 * C2 * L11  * vNormal.x +
	2.0 * C2 * L1m1 * vNormal.y +
	2.0 * C2 * L10  * vNormal.z;
	return diffuseColor;
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.1;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 a = vClr.rgb * ambient;
	vec3 d = vClr.rgb * diffuse * SH(-reflect(n, vec3(l.x, l.y, -l.z)) );
	color = vec4(a + d + s, opacity);
}`,kut=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
flat out vec3 vN;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,yX=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
flat in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,Fut=`#version 300 es
#line 1260
//precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 volScale;
uniform vec3 texVox;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform mat4 matRAS;
uniform mat4 mvpMtx;
uniform float drawOpacity, renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform int backgroundMasksOverlays;
in vec3 vColor;
out vec4 fColor;
`+_T+`
void main() {
	int id = 254;
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	fColor = vec4(0.0, 0.0, 0.0, 0.0); //assume no hit: ID = 0
	float fid = float(id & 255)/ 255.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) return;//discard; //length limit for parallel rays
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	dir = normalize(dir);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	if (isClip) fColor = vec4(samplePos.xyz, 253.0 / 255.0); //assume no hit: ID = 0
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			break;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//end: fast pass
	if ((overlays < 1.0) || (backgroundMasksOverlays > 0)) {
		return; //background hit, no overlays
	}
	//overlay pass
	len = min(lenNoClip, samplePos.a); //only find overlay closer than background
	samplePos = vec4(start.xyz, 0.0); //ray position
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			return;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//if (fColor.a == 0.0) discard; //no hit in either background or overlays
	//you only get here if there is a hit with the background that is closer than any overlay
}`,But=`#version 300 es
// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
layout(location=0)  in vec3 a_position;
layout(location=1)  in vec3 a_color;
// A matrix to transform the positions by
uniform mat4 u_matrix;
out vec3 vColor;
// all shaders have a main function
void main() {
	// Multiply the position by the matrix.
	vec4 pos = vec4(a_position, 1.0);
	gl_Position = u_matrix * vec4(pos);
	vColor = a_color;
}
`,Nut=`#version 300 es
precision highp float;
uniform vec4 u_color;
in vec3 vColor;
out vec4 outColor;
void main() {
	outColor = vec4(vColor, 1.0);
}`,Out=`#version 300 es
#line 1359
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	vec2 viewCoord = (vPos.xy - 0.5) * 2.0;
	gl_Position = vec4((vPos.xy - 0.5) * 2.0, 0.0, 1.0);
}`,Uut=`#version 300 es
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform lowp sampler3D in3D;
void main(void) {
 FragColor = texture(in3D, vec3(TexCoord.xy, coordZ));
}`,bX=`#version 300 es
#line 286
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
    TexCoord = vPos.xy;
    gl_Position = vec4( (vPos.xy-vec2(0.5,0.5))* 2.0, 0.0, 1.0);
}`,zut=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 samp = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
 FragColor = samp*0.125;
}`,Vut=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  float TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ)).r;
  float TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ)).r;
  float TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ)).r;
  float TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ)).r;
  float BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ)).r;
  float BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ)).r;
  float BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ)).r;
  float BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ)).r;
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r =   BAR+BAL+BPR+BPL -TAR-TAL-TPR-TPL;
  gradientSample.g =  TPR+TPL+BPR+BPL -TAR-TAL-BAR-BAL;
  gradientSample.b =  TAL+TPL+BAL+BPL -TAR-TPR-BAR-BPR;
  gradientSample.a = (abs(gradientSample.r)+abs(gradientSample.g)+abs(gradientSample.b))*0.29;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb =  (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`,Hut=new Float32Array([-1,-1,-1,.28,.28,.28,-1,-1,-1,.28,.28,.28,-1,1,-1,.28,.28,.28,1,-1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,-1,-1,1,.8,.8,.8,-1,-1,1,.8,.8,.8,1,-1,1,.8,.8,.8,-1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,-1,1,-1,0,0,.74,-1,1,-1,0,0,.74,-1,1,1,0,0,.74,1,1,-1,0,0,.74,1,1,1,0,0,.74,1,1,1,0,0,.74,-1,-1,-1,.42,0,.42,-1,-1,-1,.42,0,.42,1,-1,-1,.42,0,.42,-1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,-1,-1,-1,.64,0,0,-1,-1,-1,.64,0,0,-1,-1,1,.64,0,0,-1,1,-1,.64,0,0,-1,1,1,.64,0,0,-1,1,1,.64,0,0,1,-1,-1,0,.5,0,1,-1,-1,0,.5,0,1,1,-1,0,.5,0,1,-1,1,0,.5,0,1,1,1,0,.5,0,1,1,1,0,.5,0,-.45,1,-.8,0,0,0,-.45,1,-.8,0,0,0,-.45,1,.8,0,0,0,-.25,1,-.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.6,0,0,0,-.25,1,.6,0,0,0,-.25,1,.8,0,0,0,.45,1,.6,0,0,0,.25,1,.8,0,0,0,.25,1,.8,0,0,0,.25,1,.1,0,0,0,.25,1,.1,0,0,0,.25,1,.6,0,0,0,.45,1,.1,0,0,0,.45,1,.6,0,0,0,.45,1,.6,0,0,0,-.25,1,-.1,0,0,0,-.25,1,-.1,0,0,0,-.25,1,.1,0,0,0,.25,1,-.1,0,0,0,.45,1,.1,0,0,0,.45,1,.1,0,0,0,.45,-1,-.8,0,0,0,.45,-1,-.8,0,0,0,.05,-1,.8,0,0,0,.25,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,-.25,-1,-.8,0,0,0,-.25,-1,-.8,0,0,0,.05,-1,.8,0,0,0,-.45,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,.13,-1,-.3,0,0,0,.13,-1,-.3,0,0,0,.07,-1,-.1,0,0,0,-.33,-1,-.3,0,0,0,-.27,-1,-.1,0,0,0,-.27,-1,-.1,0,0,0,-.45,.6,1,0,0,0,-.45,.6,1,0,0,0,-.45,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.4,1,0,0,0,-.25,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.8,1,0,0,0,-.25,.6,1,0,0,0,.25,.8,1,0,0,0,.45,.6,1,0,0,0,.45,.6,1,0,0,0,.25,.8,1,0,0,0,.25,.8,1,0,0,0,.25,-.1,1,0,0,0,.45,.6,1,0,0,0,.45,.1,1,0,0,0,.45,.1,1,0,0,0,-.25,.1,1,0,0,0,-.25,.1,1,0,0,0,-.45,-.1,1,0,0,0,.25,.1,1,0,0,0,.25,-.1,1,0,0,0,.25,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.6,1,0,0,0,-.25,-.1,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.8,1,0,0,0,.45,-.6,1,0,0,0,.25,-.8,1,0,0,0,.25,-.8,1,0,0,0,.25,-.4,1,0,0,0,.25,-.4,1,0,0,0,.25,-.6,1,0,0,0,.45,-.4,1,0,0,0,.45,-.6,1,0,0,0,.45,-.6,1,0,0,0,-.1,-.8,-1,0,0,0,-.1,-.8,-1,0,0,0,-.1,.8,-1,0,0,0,.1,-.8,-1,0,0,0,.1,.8,-1,0,0,0,.1,.8,-1,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.6,0,0,0,-1,.45,-.8,0,0,0,-1,.45,-.6,0,0,0,-1,.45,-.6,0,0,0,1,.45,-.8,0,0,0,1,.45,-.8,0,0,0,1,.45,.8,0,0,0,1,.25,-.8,0,0,0,1,.25,.8,0,0,0,1,.25,.8,0,0,0,1,.25,.6,0,0,0,1,.25,.6,0,0,0,1,.25,.8,0,0,0,1,-.45,.6,0,0,0,1,-.25,.8,0,0,0,1,-.25,.8,0,0,0,1,-.25,.1,0,0,0,1,-.25,.1,0,0,0,1,-.25,.6,0,0,0,1,-.45,.1,0,0,0,1,-.45,.6,0,0,0,1,-.45,.6,0,0,0,1,.25,-.1,0,0,0,1,.25,-.1,0,0,0,1,.25,.1,0,0,0,1,-.25,-.1,0,0,0,1,-.45,.1,0,0,0,1,-.45,.1,0,0,0,1,-.25,-.8,0,0,0,1,-.25,-.8,0,0,0,1,-.05,-.1,0,0,0,1,-.45,-.8,0,0,0,1,-.25,-.1,0,0,0,1,-.25,-.1,0,0,0]),hr=class{constructor(e,t,i,r,s=null,a=null){Ve(this,"sphereIdx",[]),Ve(this,"sphereVtx",[]),Ve(this,"renderShaders",[]),Ve(this,"isVisible",!0),Ve(this,"isPickable",!0),Ve(this,"vertexBuffer"),Ve(this,"indexCount"),Ve(this,"indexBuffer"),Ve(this,"vao"),Ve(this,"mode"),Ve(this,"glFlags",0),Ve(this,"id"),Ve(this,"colorId"),Ve(this,"modelMatrix",Zi()),Ve(this,"scale",[1,1,1]),Ve(this,"position",[0,0,0]),Ve(this,"rotation",[0,0,0]),Ve(this,"rotationRadians",0),Ve(this,"extentsMin",[]),Ve(this,"extentsMax",[]),Ve(this,"furthestVertexFromOrigin"),Ve(this,"originNegate"),Ve(this,"fieldOfViewDeObliqueMM"),Ve(this,"mm"),this.vertexBuffer=t,this.indexCount=r,this.indexBuffer=s,this.vao=a,this.mode=i,this.id=e,this.colorId=[(e>>0&255)/255,(e>>8&255)/255,(e>>16&255)/255,(e>>24&255)/255]}};Ve(hr,"BLEND",1);Ve(hr,"CULL_FACE",2);Ve(hr,"CULL_FRONT",4);Ve(hr,"CULL_BACK",8);Ve(hr,"ENABLE_DEPTH_TEST",16);Ve(hr,"generateCrosshairs",function(n,e,t,i,r,s,a=20,o=0){const l=hr.generateCrosshairsGeometry(n,t,i,r,s,a,o);return new hr(e,l.vertexBuffer,n.TRIANGLES,l.indexCount,l.indexBuffer,l.vao)});Ve(hr,"generateCrosshairsGeometry",function(n,e,t,i,r,s=20,a=0){const o=[],l=[],c=r*a;if(c<=0){let h=bn(t[0],e[1],e[2]),p=bn(i[0],e[1],e[2]);hr.makeCylinder(o,l,h,p,r,s),h=bn(e[0],t[1],e[2]),p=bn(e[0],i[1],e[2]),hr.makeCylinder(o,l,h,p,r,s),h=bn(e[0],e[1],t[2]),p=bn(e[0],e[1],i[2]),hr.makeCylinder(o,l,h,p,r,s)}else{let h=bn(t[0],e[1],e[2]),p=bn(e[0]-c,e[1],e[2]);hr.makeCylinder(o,l,h,p,r,s,!1),h=bn(e[0]+c,e[1],e[2]),p=bn(i[0],e[1],e[2]),hr.makeCylinder(o,l,h,p,r,s,!1),h=bn(e[0],t[1],e[2]),p=bn(e[0],e[1]-c,e[2]),hr.makeCylinder(o,l,h,p,r,s,!1),h=bn(e[0],e[1]+c,e[2]),p=bn(e[0],i[1],e[2]),hr.makeCylinder(o,l,h,p,r,s,!1),h=bn(e[0],e[1],t[2]),p=bn(e[0],e[1],e[2]-c),hr.makeCylinder(o,l,h,p,r,s,!1),h=bn(e[0],e[1],e[2]+c),p=bn(e[0],e[1],i[2]),hr.makeCylinder(o,l,h,p,r,s,!1)}const u=n.createBuffer();if(u===null)throw new Error("could not instantiate vertex buffer");n.bindBuffer(n.ARRAY_BUFFER,u),n.bufferData(n.ARRAY_BUFFER,new Float32Array(o),n.STATIC_DRAW);const d=n.createBuffer();if(d===null)throw new Error("could not instantiate index buffer");n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,d),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint32Array(l),n.STATIC_DRAW);const f=n.createVertexArray();return n.bindVertexArray(f),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,d),n.bindBuffer(n.ARRAY_BUFFER,u),n.enableVertexAttribArray(0),n.vertexAttribPointer(0,3,n.FLOAT,!1,0,0),n.bindVertexArray(null),{vertexBuffer:u,indexBuffer:d,indexCount:l.length,vao:f}});Ve(hr,"getFirstPerpVector",function(n){const e=bn(0,0,0);return n[0]===0?e[0]=1:n[1]===0?e[1]=1:n[2]===0?e[2]=1:(e[0]=n[2],e[1]=n[2],e[2]=-(n[0]+n[1]),ec(e,e)),e});Ve(hr,"subdivide",function(n,e){let t=n.length/3,i=e.length/3;const r=i,s=Zr(),a=Zr();for(let o=0;o<r;o++){const l=e[o*3+0],c=e[o*3+1],u=e[o*3+2],d=bn(n[l*3+0],n[l*3+1],n[l*3+2]),f=bn(n[c*3+0],n[c*3+1],n[c*3+2]),h=bn(n[u*3+0],n[u*3+1],n[u*3+2]);nm(s,d,f),ec(a,s),n.push(...a),nm(s,f,h),ec(a,s),n.push(...a),nm(s,d,h),ec(a,s),n.push(...a);let p=[t,t+1,t+2];e.push(...p),p=[l,t,t+2],e.push(...p),p=[t,c,t+1],e.push(...p),e[o*3+0]=t+2,e[o*3+1]=t+1,e[o*3+2]=u,i=i+3,t=t+3}});Ve(hr,"weldVertices",function(n,e){const t=n.length/3;let i=0;const r=new Int32Array(t);for(let o=0;o<t-1;o++){if(r[o]!==0)continue;r[o]=i;let l=o*3;const c=n[l],u=n[l+1],d=n[l+2];for(let f=o+1;f<t;f++)l+=3,c===n[l]&&u===n[l+1]&&d===n[l+2]&&(r[f]=i);i++}if(i===t)return n;const s=e.length;for(let o=0;o<s;o++)e[o]=r[e[o]];const a=n.slice(0,i*3-1);for(let o=0;o<t-1;o++){const l=o*3,c=r[o]*3;a[c]=n[l],a[c+1]=n[l+1],a[c+2]=n[l+2]}return a});Ve(hr,"makeSphere",function(n,e,t,i=[0,0,0]){let r=[0,0,1,.894,0,.447,.276,.851,.447,-.724,.526,.447,-.724,-.526,.447,.276,-.851,.447,.724,.526,-.447,-.276,.851,-.447,-.894,0,-.447,-.276,-.851,-.447,.724,-.526,-.447,0,0,-1];const s=[0,1,2,0,2,3,0,3,4,0,4,5,0,5,1,7,6,11,8,7,11,9,8,11,10,9,11,6,10,11,6,2,1,7,3,2,8,4,3,9,5,4,10,1,5,6,7,2,7,8,3,8,9,4,9,10,5,10,6,1];hr.subdivide(r,s),hr.subdivide(r,s),r=hr.weldVertices(r,s);for(let c=0;c<r.length;c++)r[c]=r[c]*t;const a=r.length/3;let o=0;for(let c=0;c<a;c++)r[o]=r[o]+i[0],o++,r[o]=r[o]+i[1],o++,r[o]=r[o]+i[2],o++;const l=Math.floor(n.length/3);for(let c=0;c<s.length;c++)s[c]=s[c]+l;e.push(...s),n.push(...r)});Ve(hr,"makeCylinder",function(n,e,t,i,r,s=20,a=!0){s<3&&(s=3);const o=Zr();os(o,i,t),ec(o,o);const l=hr.getFirstPerpVector(o),c=Zr();X_(c,o,l),ec(c,c);let u=2*s,d=2*s;a&&(d+=2*s,u+=2);const f=Math.floor(n.length/3),h=new Uint32Array(d*3),p=new Float32Array(u*3);function m(A,S){p[A*3+0]=S[0],p[A*3+1]=S[1],p[A*3+2]=S[2]}function v(A,S,C,_){h[A*3+0]=S+f,h[A*3+1]=C+f,h[A*3+2]=_+f}const g=2*s,y=g+1;a&&(m(g,t),m(y,i));const x=Zr(),b=Zr();for(let A=0;A<s;A++){const S=Math.cos(A/s*2*Math.PI),C=Math.sin(A/s*2*Math.PI);x[0]=r*(S*l[0]+C*c[0]),x[1]=r*(S*l[1]+C*c[1]),x[2]=r*(S*l[2]+C*c[2]),nm(b,t,x),m(A,b),nm(b,i,x),m(A+s,b);let _=0;A<s-1&&(_=A+1),v(A*2,A,_,A+s),v(A*2+1,_,_+s,A+s),a&&(v(s*2+A,A,g,_),v(s*2+A+s,y,A+s,_+s))}e.push(...h),n.push(...p)});Ve(hr,"makeColoredCylinder",function(n,e,t,i,r,s,a=[192,0,0,255],o=20,l=!1){let c=n.length/3;hr.makeCylinder(n,e,i,r,s,o,l),c=n.length/3-c;const u=[];for(let d=0;d<c*4-1;d+=4)u[d]=a[0],u[d+1]=a[1],u[d+2]=a[2],u[d+3]=a[3];t.push(...u)});Ve(hr,"makeColoredSphere",function(n,e,t,i,r=[0,0,0],s=[0,0,192,255]){let a=n.length/3;hr.makeSphere(n,e,i,r),a=n.length/3-a;const o=[];for(let l=0;l<a*4-1;l+=4)o[l]=s[0],o[l+1]=s[1],o[l+2]=s[2],o[l+3]=s[3];t.push(...o)});var Mm=hr,$_={};jct($_,{$itksnap:()=>Gut,$slicer3d:()=>Wut,actc:()=>qut,afni_blues_inv:()=>rft,afni_reds_inv:()=>sft,batlow:()=>Kut,bcgwhw:()=>Xut,bcgwhw_dark:()=>Yut,blue:()=>Jut,blue2cyan:()=>Qut,blue2magenta:()=>$ut,blue2red:()=>jut,bluegrn:()=>Zut,bone:()=>edt,bronze:()=>tdt,cet_l17:()=>ndt,cividis:()=>idt,cool:()=>rdt,copper:()=>adt,copper2:()=>sdt,ct_airways:()=>odt,ct_artery:()=>ldt,ct_bones:()=>cdt,ct_brain:()=>ddt,ct_brain_gray:()=>udt,ct_cardiac:()=>fdt,ct_head:()=>hdt,ct_kidneys:()=>pdt,ct_liver:()=>mdt,ct_muscles:()=>vdt,ct_scalp:()=>gdt,ct_skull:()=>ydt,ct_soft:()=>bdt,ct_soft_tissue:()=>xdt,ct_surface:()=>Adt,ct_vessels:()=>wdt,ct_w_contrast:()=>Sdt,cubehelix:()=>_dt,electric_blue:()=>Cdt,freesurfer:()=>Mdt,ge_color:()=>Tdt,gold:()=>Edt,gray:()=>Idt,green:()=>Ddt,green2cyan:()=>Rdt,green2orange:()=>Pdt,hot:()=>kdt,hotiron:()=>Ldt,hsv:()=>Fdt,inferno:()=>Bdt,jet:()=>Ndt,kry:()=>Odt,linspecer:()=>Udt,lipari:()=>zdt,magma:()=>Vdt,mako:()=>Hdt,navia:()=>Gdt,nih:()=>Wdt,plasma:()=>qdt,random:()=>Kdt,red:()=>Ydt,redyell:()=>Xdt,rocket:()=>jdt,roi_i256:()=>aft,surface:()=>$dt,thermal:()=>Qdt,turbo:()=>Zdt,violet:()=>Jdt,viridis:()=>eft,warm:()=>tft,winter:()=>nft,x_rain:()=>ift});var Gut={R:[0,255,0,0,255,0,255,255,0,205,210,102,0,0,46,255,106,221,233,165,255,147,218,75,255,60,255,255,218,0,188,255,255,222,127,139,124,255,70,0,238,238,240,245,184,32,255,25,112,34,248,245,255,144,173,65,255,250,128,50,244,255,123,255,173,255,127,255,143,220,253,255,0,0,128,255,250,148,178,255,135,100,240,250,255,107,135,0,139,245,186,255,255,0,210,255,47,72,175,128,176,255,139,240,255,216,119,219,72,255,199,154,189,240,230,0,85,64,153,205,250,95,0,255,224,176,138,30,240,152,160],G:[0,0,255,0,255,255,0,239,0,133,180,205,0,139,139,228,90,160,150,42,250,112,112,0,182,179,235,228,165,128,143,105,218,184,255,69,252,255,130,100,130,232,255,222,134,178,20,25,128,139,248,255,160,238,255,105,99,240,0,205,164,255,104,165,216,192,255,140,188,20,245,250,206,255,0,250,128,0,34,127,206,149,230,235,245,142,206,0,0,245,85,228,222,191,105,248,79,61,238,128,224,240,0,255,215,191,136,112,209,0,21,205,183,248,230,250,107,224,50,92,250,158,128,69,255,196,43,144,128,251,82],B:[0,0,0,255,0,255,255,213,205,63,140,170,128,139,87,225,205,221,122,42,250,219,214,130,193,113,205,196,32,128,143,180,185,135,0,19,0,224,180,0,238,170,240,179,11,170,147,112,144,34,255,250,122,144,47,225,71,230,0,50,96,240,238,0,230,203,212,0,143,60,230,240,209,127,128,205,114,211,34,80,235,237,140,215,238,35,250,139,139,220,211,181,173,255,30,220,79,139,238,0,230,245,0,255,0,216,153,147,204,255,133,50,107,255,250,154,47,208,204,92,210,160,0,0,255,222,226,255,128,152,45],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130]},Wut={labels:["background","tissue","bone","skin","connective tissue","blood","organ","mass","muscle","foreign object","waste","teeth","fat","gray matter","white matter","nerve","vein","artery","capillary","ligament","tendon","cartilage","meniscus","lymph node","lymphatic vessel","cerebro-spinal fluid","bile","urine","feces","gas","fluid","edema","bleeding","necrosis","clot","embolism","head","central nervous system","brain","gray matter of brain","telencephalon","cerebral cortex","right frontal lobe","left frontal lobe","right temporal lobe","left temporal lobe","right parietal lobe","left parietal lobe","right occipital lobe","left occipital lobe","right insular lobe","left insular lobe","right limbic lobe","left limbic lobe","right striatum","left striatum","right caudate nucleus","left caudate nucleus","right putamen","left putamen","right pallidum","left pallidum","right amygdaloid complex","left amygdaloid complex","diencephalon","thalamus","right thalamus","left thalamus","pineal gland","midbrain","substantia nigra","right substantia nigra","left substantia nigra","cerebral white matter","right superior longitudinal fasciculus","left superior longitudinal fasciculus","right inferior longitudinal fasciculus","left inferior longitudinal fasciculus","right arcuate fasciculus","left arcuate fasciculus","right uncinate fasciculus","left uncinate fasciculus","right cingulum bundle","left cingulum bundle","projection fibers","right corticospinal tract","left corticospinal tract","right optic radiation","left optic radiation","right medial lemniscus","left medial lemniscus","right superior cerebellar peduncle","left superior cerebellar peduncle","right middle cerebellar peduncle","left middle cerebellar peduncle","right inferior cerebellar peduncle","left inferior cerebellar peduncle","optic chiasm","right optic tract","left optic tract","right fornix","left fornix","commissural fibers","corpus callosum","posterior commissure","cerebellar white matter","CSF space","ventricles of brain","right lateral ventricle","left lateral ventricle","right third ventricle","left third ventricle","cerebral aqueduct","fourth ventricle","subarachnoid space","spinal cord","gray matter of spinal cord","white matter of spinal cord","endocrine system of brain","pituitary gland","adenohypophysis","neurohypophysis","meninges","dura mater","arachnoid","pia mater","muscles of head","salivary glands","lips","nose","tongue","soft palate","right inner ear","left inner ear","right external ear","left external ear","right middle ear","left middle ear","right eyeball","left eyeball","skull","right frontal bone","left frontal bone","right parietal bone","left parietal bone","right temporal bone","left temporal bone","right sphenoid bone","left sphenoid bone","right ethmoid bone","left ethmoid bone","occipital bone","maxilla","right zygomatic bone","right lacrimal bone","vomer bone","right palatine bone","left palatine bone","mandible","neck","muscles of neck","pharynx","larynx","thyroid gland","right parathyroid glands","left parathyroid glands","skeleton of neck","hyoid bone","cervical vertebral column","thorax","trachea","bronchi","right lung","left lung","superior lobe of right lung","superior lobe of left lung","middle lobe of right lung","inferior lobe of right lung","inferior lobe of left lung","pleura","heart","right atrium","left atrium","atrial septum","ventricular septum","right ventricle of heart","left ventricle of heart","mitral valve","tricuspid valve","aortic valve","pulmonary valve","aorta","pericardium","pericardial cavity","esophagus","thymus","mediastinum","skin of thoracic wall","muscles of thoracic wall","skeleton of thorax","thoracic vertebral column","ribs","sternum","right clavicle","left clavicle","abdominal cavity","abdomen","peritoneum","omentum","peritoneal cavity","retroperitoneal space","stomach","duodenum","small bowel","colon","anus","liver","biliary tree","gallbladder","pancreas","spleen","urinary system","right kidney","left kidney","right ureter","left ureter","urinary bladder","urethra","right adrenal gland","left adrenal gland","female internal genitalia","uterus","right fallopian tube","left fallopian tube","right ovary","left ovary","vagina","male internal genitalia","prostate","right seminal vesicle","left seminal vesicle","right deferent duct","left deferent duct","skin of abdominal wall","muscles of abdominal wall","skeleton of abdomen","lumbar vertebral column","female external genitalia","male external genitalia","skeleton of upper limb","muscles of upper limb","right upper limb","left upper limb","right shoulder","left shoulder","right arm"],R:[0,128,241,177,111,216,221,144,192,220,78,255,230,200,250,244,0,216,183,183,152,111,178,68,111,85,0,214,78,218,170,140,188,216,145,150,177,244,250,200,68,128,83,83,162,162,141,141,182,182,188,188,154,154,177,177,30,30,210,210,48,48,98,98,69,166,122,122,253,145,46,0,0,250,127,127,159,159,125,125,106,106,154,154,126,201,201,78,78,174,174,139,139,148,148,186,186,99,156,156,64,64,138,97,126,194,85,88,88,88,88,88,88,88,88,244,200,250,82,57,60,92,255,255,255,255,201,70,188,177,166,182,229,229,174,174,201,201,194,194,241,203,203,229,229,255,255,209,209,248,248,255,196,255,255,255,242,242,222,177,213,184,150,62,62,62,242,250,255,177,182,175,197,197,172,172,202,224,224,255,206,210,203,233,195,181,152,159,166,218,225,224,255,184,211,47,255,173,188,255,226,253,244,205,205,186,177,255,234,204,180,216,255,205,204,255,221,0,139,249,157,203,185,185,247,247,222,124,249,249,244,255,255,227,213,213,193,216,230,245,245,241,241,177,171,217,212,185,185,198,194,177,177,177,177,177],G:[0,174,214,122,184,101,130,238,104,245,63,250,220,200,250,214,151,101,156,214,189,184,212,172,197,188,145,230,63,255,250,224,65,191,60,98,122,214,250,200,131,174,146,146,115,115,93,93,166,166,135,135,150,150,140,140,111,111,157,157,129,129,153,153,110,113,101,101,135,92,101,108,108,250,150,150,116,116,102,102,174,174,146,146,126,160,160,152,152,140,140,126,126,120,120,135,135,106,171,171,123,123,95,113,161,195,188,106,106,106,106,106,106,106,106,214,200,250,174,157,143,162,244,244,244,244,121,163,91,122,84,105,147,147,122,122,112,112,142,142,213,179,179,204,204,243,243,185,185,223,223,230,172,255,250,237,217,217,198,122,124,105,208,162,162,162,206,210,255,122,228,216,165,165,138,138,164,186,186,245,110,115,108,138,100,85,55,63,70,123,130,97,244,122,171,150,244,121,95,239,202,232,217,179,179,124,122,255,234,142,119,132,253,167,168,224,130,145,150,180,108,136,102,102,182,182,154,186,186,186,170,181,190,153,141,141,123,146,158,172,172,172,172,124,85,198,188,135,135,175,98,122,122,122,122,122],B:[0,128,145,101,210,79,101,144,88,20,0,220,70,235,210,49,206,79,220,211,207,210,242,100,131,255,30,130,0,255,250,228,28,216,66,83,101,49,225,215,98,128,164,164,105,105,137,137,110,110,166,166,201,201,190,190,85,85,166,166,126,126,112,112,53,137,38,38,192,109,131,112,112,225,88,88,163,163,154,154,155,155,83,83,55,133,133,141,141,103,103,177,177,72,72,135,135,24,108,108,147,147,74,158,197,164,255,215,215,215,215,215,215,215,215,49,215,225,128,110,83,109,209,209,209,209,77,117,95,101,94,107,118,118,90,90,73,73,0,0,144,77,77,109,109,152,152,85,85,131,131,138,68,167,160,145,123,123,101,101,109,108,243,114,114,114,142,139,207,101,255,244,145,145,115,115,140,162,162,217,84,89,81,112,73,57,13,27,38,97,104,76,209,154,143,103,209,88,76,172,134,158,154,108,108,161,101,220,194,178,153,105,229,142,143,199,101,30,98,111,162,116,83,83,164,164,132,223,150,150,147,158,165,130,113,113,103,127,140,147,147,151,151,92,68,131,102,134,134,125,79,101,101,101,101,101],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},qut={R:[0,0,24,248,255],G:[0,0,177,254,0],B:[0,136,0,0,0],A:[0,32,64,78,128],I:[0,64,128,156,255]},Kut={R:[1,10,15,17,21,27,36,49,65,82,99,118,140,161,183,203,222,238,248,253,253,253,252,250],G:[25,42,56,68,79,88,97,105,111,116,122,127,133,138,142,146,150,155,162,170,178,186,195,204],B:[89,92,95,96,98,98,96,91,83,74,64,55,46,43,49,62,79,100,126,151,175,199,223,250],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},Yut={R:[0,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[0,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[0,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},Xut={R:[255,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[255,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[255,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},jut={R:[0,0,0,0,196,255],G:[0,32,128,128,128,32],B:[0,255,196,0,0,0],A:[0,128,64,64,64,128],I:[0,1,64,128,192,255]},$ut={R:[0,255],G:[0,0],B:[255,255],A:[0,128],I:[0,255]},Qut={R:[0,0],G:[0,255],B:[255,255],A:[0,128],I:[0,255]},Zut={R:[0,0,0,0],G:[0,1,128,255],B:[0,222,127,32],A:[0,0,64,128],I:[0,1,128,255]},Jut={R:[0,0,0],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},edt={R:[0,103,255],G:[0,126,255],B:[0,165,255],A:[0,76,128],I:[0,153,255]},tdt={R:[0,43,103,199,216,255],G:[0,0,37,155,213,255],B:[0,0,20,97,201,255],A:[0,44,48,54,56,56],I:[0,64,128,196,240,255]},ndt={R:[0,9,24,33,40,46,52,57,62,66,70,74,78,81,85,88,91,94,98,101,103,106,109,112,114,117,119,121,124,126,128,130,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,164,166,168,169,171,172,174,175,177,178,180,181,183,184,186,187,189,190,191,193,194,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,222,223,224,224,225,226,226,227,228,228,229,229,230,231,231,232,233,233,234,234,235,235,236,236,236,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,243,243,243,243,243,244,244,244,244,244,244,244,244,244,244,244,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,243,243,243,243,243,243,243,243,243,243,243,243,242,242,242,242,242,242,242,242,241,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,243,243,244,244,245,246,246,247,247,248,249,249,250,250,251,251,252,252,253,253,254,254,254],G:[42,41,41,41,40,40,40,39,39,39,38,38,37,37,36,36,35,35,34,34,33,32,32,31,30,30,30,30,29,29,29,29,28,28,28,27,27,27,26,26,26,25,25,25,24,24,24,24,24,25,25,26,27,27,28,28,29,30,30,31,31,32,33,33,34,34,35,36,36,37,38,39,40,42,43,44,45,47,48,49,50,51,53,54,55,56,57,58,59,60,62,63,64,65,66,68,69,71,72,73,75,76,77,79,80,81,83,84,85,87,88,89,90,92,93,94,95,97,98,100,101,102,104,105,107,108,109,111,112,113,115,116,117,119,120,121,122,124,125,126,128,129,130,132,133,134,136,137,138,140,141,142,144,145,146,147,149,150,151,153,154,155,156,158,159,160,161,163,164,165,167,168,169,170,172,173,174,175,176,178,179,180,181,183,184,185,186,187,189,190,191,192,193,194,196,197,198,199,200,201,203,204,205,206,207,208,209,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,228,229,230,231,232,233,234,235,236,237,238,238,239,240,241,241,242,243,244,244,245,246,247,248,248,249,250,251,251,252,253,254,255],B:[167,167,166,166,166,165,165,165,164,164,164,163,163,162,162,162,161,161,161,160,160,160,159,159,158,158,157,157,156,155,155,154,154,153,153,152,151,151,150,150,149,149,148,147,147,146,146,145,144,144,143,143,142,141,141,140,139,139,138,137,137,136,135,135,134,133,133,132,131,131,130,130,129,128,128,127,127,126,125,125,124,124,123,123,122,121,121,120,119,119,118,118,117,116,116,116,115,115,114,114,113,113,113,112,112,111,111,110,110,109,109,109,108,108,107,107,106,106,106,106,106,105,105,105,105,105,105,105,104,104,104,104,104,103,103,103,103,103,102,102,102,103,103,103,103,104,104,104,104,104,105,105,105,105,106,106,106,106,106,107,107,107,107,108,108,109,110,111,111,112,113,113,114,115,115,116,117,117,118,119,120,120,121,122,122,123,124,125,126,128,129,130,131,132,134,135,136,137,138,140,141,142,143,144,146,147,148,149,150,152,153,155,157,158,160,162,163,165,167,168,170,172,173,175,177,178,180,182,183,185,187,188,190,193,196,199,201,204,207,210,212,215,218,221,224,226,229,232,235,238,240,243,246,249,252,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},idt={R:[0,86,166,255],G:[32,92,156,233],B:[76,108,117,69],A:[0,56,80,88],I:[0,64,192,255]},rdt={R:[0,0,0],G:[127,196,254],B:[255,255,255],A:[0,64,128],I:[0,128,255]},sdt={R:[0,61,122,183,244,255],G:[0,41,81,122,163,255],B:[0,25,51,76,102,255],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},adt={R:[0,61,122,183,244,255],G:[0,41,81,122,163,203],B:[0,25,51,76,102,127],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},odt={min:-643,max:-235,R:[0,0,0],G:[154,154,154],B:[179,179,101],A:[0,32,0],I:[0,163,255]},ldt={min:114,max:800,R:[0,255,255,255],G:[0,0,129,255],B:[0,0,0,255],A:[0,64,88,228],I:[0,80,160,255]},cdt={min:180,max:600,R:[0,0,113,255],G:[0,0,109,250],B:[0,0,101,245],A:[0,0,100,160],I:[0,1,128,255]},udt={min:-10,max:110,R:[0,127,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},ddt={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},fdt={min:-80,max:1e3,R:[0,189,150,150,150,150,255],G:[0,169,54,54,54,54,240],B:[0,153,52,52,52,52,242],A:[0,32,64,0,0,64,64],I:[0,1,82,92,234,242,255]},hdt={min:-590,max:600,R:[0,241,241,248,248,178,178,232,255,255,255],G:[0,156,156,222,222,36,36,51,255,255,255],B:[0,130,130,169,169,24,24,37,255,255,255],A:[0,8,0,0,0,64,64,0,0,222,222],I:[0,2,3,64,122,142,172,182,252,253,255]},pdt={min:114,max:302,R:[0,255,255],G:[0,129,255],B:[0,0,255],A:[0,88,228],I:[0,103,255]},mdt={min:-23,max:246,R:[0,44,255,255,255],G:[0,128,90,255,255],B:[0,0,70,0,255],A:[0,0,82,184,228],I:[0,64,131,196,255]},vdt={min:-100,max:246,R:[0,128,159,255,255,255,255],G:[0,0,56,90,0,255,255],B:[0,0,41,70,0,0,255],A:[0,63,105,135,167,184,228],I:[0,100,128,155,180,209,255]},gdt={min:-590,max:600,R:[0,241,241,248,248,178,232,255,255],G:[0,156,156,222,222,36,51,255,255],B:[0,130,130,169,169,24,37,255,255],A:[0,63,105,135,167,184,228,228,228],I:[0,1,52,127,137,162,172,252,255]},ydt={min:140,max:1024,R:[0,2,113,255],G:[0,1,109,250],B:[0,1,101,245],A:[0,1,96,168],I:[0,1,128,255]},bdt={min:-923,max:679,R:[0,0,0,0,0,255,255,255],G:[154,154,154,154,0,0,254,255],B:[179,179,179,179,0,0,0,255],A:[0,3,8,0,0,10,15,20],I:[0,30,62,88,170,200,232,255]},xdt={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},Adt={min:-600,max:100,R:[0,134,255],G:[0,109,250],B:[0,101,245],A:[0,60,148],I:[0,128,255]},wdt={min:114,max:246,R:[0,255,255],G:[0,128,255],B:[0,128,255],A:[0,64,96],I:[0,87,255]},Sdt={min:50,max:1e3,R:[98,210,169,128,255],G:[94,26,77,128,255],B:[45,21,74,128,255],A:[0,25,0,4,168],I:[0,41,87,154,255]},_dt={R:[0,13,21,26,27,25,22,21,22,28,39,54,75,98,124,148,171,189,202,210,213,211,206,200,195,193,195,201,211,225,240,255],G:[0,5,11,20,31,44,58,72,86,99,109,116,120,122,122,122,121,121,124,129,137,147,161,175,190,205,218,229,238,245,251,255],B:[0,14,30,46,61,71,77,78,75,68,60,52,48,47,53,65,83,105,131,157,183,205,222,235,241,243,242,240,239,240,245,255],A:[0,4,8,12,17,21,25,29,33,37,41,45,50,54,58,62,66,70,74,78,83,87,91,95,99,103,107,111,116,120,124,128],I:[0,8,16,25,33,41,49,58,66,74,82,90,99,107,115,123,132,140,148,156,165,173,181,189,197,206,214,222,230,239,247,255]},Cdt={R:[0,10,136,255],G:[0,39,220,255],B:[0,223,253,255],A:[0,48,64,70],I:[0,92,192,255]},Mdt={R:[0,245,205,120,196,220,230,0,122,236,12,204,42,119,220,103,60,255,165,160,0,245,205,120,196,220,230,0,122,236,13,220,103,255,165,160,0,120,200,255,255,164,164,164,234,0,0,0,0,0],G:[0,245,62,18,58,248,148,118,186,13,48,182,204,159,216,255,60,165,42,32,200,245,62,18,58,248,148,118,186,13,48,216,255,165,42,32,200,190,70,148,148,108,108,108,169,0,0,0,0,0],B:[0,245,78,134,250,164,34,14,220,176,255,142,164,176,20,255,60,0,42,240,200,245,78,134,250,164,34,14,220,176,255,20,255,0,42,240,221,150,255,10,10,226,226,226,30,64,112,160,208,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,2,3,4,5,7,8,10,11,12,13,14,15,16,17,18,24,26,28,30,31,41,42,43,44,46,47,49,50,51,52,53,54,58,60,62,63,72,77,78,79,80,81,82,85,251,252,253,254,255]},Tdt={R:[0,0,128,255,255],G:[0,128,0,128,255],B:[0,125,255,0,255],A:[0,32,64,96,128],I:[0,63,128,192,255]},Edt={R:[0,142,227,255],G:[0,85,170,255],B:[0,14,76,255],A:[0,42,84,128],I:[0,85,170,255]},Idt={R:[0,255],G:[0,255],B:[0,255],A:[0,128],I:[0,255]},Ddt={R:[0,0,0],G:[0,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},Rdt={R:[0,0,0],G:[72,72,255],B:[0,255,255],A:[0,64,128],I:[0,88,255]},Pdt={R:[0,255,255],G:[72,88,255],B:[0,0,0],A:[0,64,128],I:[0,88,255]},Ldt={R:[0,255,255,255],G:[0,0,126,255],B:[0,0,0,255],A:[0,64,96,128],I:[0,128,191,255]},kdt={R:[3,255,255,255],G:[0,0,255,255],B:[0,0,0,255],A:[0,48,96,128],I:[0,95,191,255]},Fdt={R:[255,255,0,0,0,255,255],G:[0,255,255,255,0,0,0],B:[0,0,0,255,255,255,0],A:[0,14,28,43,57,71,85],I:[0,43,85,128,170,213,255]},Bdt={R:[0,120,237,240],G:[0,28,105,249],B:[4,109,37,33],A:[0,56,80,88],I:[0,64,192,255]},Ndt={R:[0,0,127,255,127],G:[0,127,255,127,0],B:[127,255,127,0,0],A:[0,32,64,96,128],I:[0,63,128,192,255]},Odt={R:[0,255,255],G:[0,0,255],B:[0,0,0],A:[0,64,64],I:[0,86,255]},Udt={R:[94,50,90,152,215,238,249,254,252,241,209,158],G:[79,131,186,214,240,244,237,210,157,100,57,1],B:[162,189,167,164,155,169,168,123,86,68,79,66],A:[0,12,23,35,47,58,70,81,93,105,116,128],I:[0,23,46,70,93,116,139,162,185,209,232,255]},zdt={R:[3,7,13,25,45,67,84,98,110,124,138,154,173,191,210,225,233,233,231,229,230,235,243,253],G:[19,33,48,63,77,87,92,94,95,96,96,97,99,101,106,118,133,149,163,177,192,208,225,245],B:[38,58,79,99,114,122,122,120,117,113,110,105,101,97,94,96,103,112,122,134,149,169,192,218],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},Vdt={R:[0,148,183,223,247,252],G:[0,44,55,74,112,253],B:[4,128,121,104,92,191],A:[0,44,53,64,75,107],I:[0,107,128,154,179,255]},Hdt={R:[11,59,55,222],G:[4,45,165,245],B:[5,91,172,229],A:[0,23,70,107],I:[0,56,167,255]},Gdt={R:[3,5,6,8,12,19,28,36,42,48,54,61,68,76,86,96,110,129,154,181,205,224,239,252],G:[19,32,44,58,72,86,98,108,116,122,128,134,141,149,157,167,178,191,204,216,225,232,239,244],B:[39,60,82,104,123,137,144,145,142,138,134,130,126,121,116,110,105,104,112,131,155,178,198,217],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},Wdt={R:[0,85,0,0,0,0,0,0,85,255,255,255,172],G:[0,0,0,0,85,170,255,255,255,255,85,0,0],B:[0,170,85,255,255,170,170,0,85,0,0,0,0],A:[0,5,10,21,26,32,37,42,48,53,64,72,85],I:[0,15,31,63,79,95,111,127,143,159,191,217,255]},qdt={R:[13,156,237,240],G:[8,23,121,249],B:[135,158,83,33],A:[0,56,80,88],I:[0,64,192,255]},Kdt={R:[208,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248],G:[182,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21],B:[191,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},Ydt={R:[0,128,255],G:[0,0,0],B:[0,0,0],A:[0,64,128],I:[0,128,255]},Xdt={R:[192,224,255],G:[1,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},jdt={R:[3,112,144,188,236,246,255],G:[5,31,29,22,76,158,250],B:[26,87,91,86,62,117,235],A:[0,30,38,49,67,85,107],I:[0,73,92,118,160,205,255]},$dt={R:[1,240,255],G:[1,128,255],B:[1,128,255],A:[0,76,128],I:[0,153,255]},Qdt={R:[0,5,18,34,53,72,90,107,126,144,161,178,194,209,222,233,242,248,251,251,249,244,241,252],G:[0,4,10,11,9,11,17,23,30,36,43,50,59,70,83,98,117,136,157,177,199,220,240,254],B:[3,24,50,76,96,106,109,110,108,104,97,89,79,67,55,42,26,12,6,22,47,79,121,164],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},Zdt={R:[48,48,64,70,65,25,132,195,244,254,218,122],G:[18,18,64,107,150,226,255,241,199,158,57,4],B:[59,59,162,227,255,187,81,52,58,47,7,3],A:[0,22,26,30,34,43,52,57,63,67,77,86],I:[0,1,16,32,49,83,118,140,164,181,219,255]},Jdt={R:[0,128,255],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},eft={R:[68,49,53,253],G:[1,104,183,231],B:[84,142,121,37],A:[0,56,80,88],I:[0,64,192,255]},tft={R:[255,255,255],G:[127,196,254],B:[0,0,0],A:[0,64,128],I:[0,128,255]},nft={R:[0,0,0],G:[0,128,255],B:[255,196,128],A:[0,64,128],I:[0,128,255]},ift={R:[3,64,0,0,255,255,255],G:[0,0,0,255,255,192,3],B:[0,32,48,56,64,96,128],A:[0,8,16,24,32,52,80],I:[0,32,64,96,160,192,255]},rft={min:0,max:0,R:[0,37],G:[242,0],B:[255,255],A:[0,64],I:[0,255]},sft={R:[255,255],G:[255,11],B:[0,0],A:[0,64],I:[0,255]},aft={min:0,max:0,R:[65,10,223,120,216,207,251,93,252,217,21,253,131,165,173,143,144,217,86,89,63,254,172,1,142,107,42,78,221,8,222,71,127,126,167,33,104,2,208,216,0,251,7,105,2,101,248,190,253,62,255,224,166,37,110,138,45,34,6,37,69,201,43,122,199,37,173,194,103,211,75,159,96,4,239,98,110,193,253,166,40,255,48,130,140,243,101,9,177,220,133,32,4,81,48,48,210,109,60,132,1,119,1,159,247,33,212,187,253,144,196,254,168,79,64,196,39,97,73,173,104,216,217,43,101,119,254,5,237,103,203,122,57,87,251,164,19,75,200,2,252,150,66,0,255,157,23,254,55,16,240,161,69,253,207,195,5,60,255,251,200,217,134,123,253,180,27,246,130,136,250,232,4,125,140,22,253,255,13,180,123,61,254,111,10,185,76,192,255,223,186,61,198,5,172,13,83,172,171,6,23,73,134,133,109,61,213,55,57,132,36,209,2,144,1,253,68,155,3,160,2,77,121,70,67,176,223,131,4,162,232,255,150,94,235,191,207,10,246,0,225,4,209,116,57,112,172,253,1,6,92,227,73,62,135,223],G:[162,50,112,245,4,124,176,243,56,125,183,139,182,68,189,4,225,10,20,223,7,46,31,193,225,250,219,41,2,100,83,181,34,150,72,223,168,248,80,253,7,117,214,2,248,10,3,59,179,160,90,244,146,4,207,4,125,255,96,100,1,208,130,51,116,181,236,53,244,5,165,28,181,86,96,42,254,1,134,194,214,92,41,204,137,86,207,3,143,3,100,239,164,94,65,251,131,244,173,57,143,107,217,53,210,0,148,250,45,198,81,40,61,218,252,88,171,0,248,24,248,4,41,100,187,46,208,145,43,168,121,46,175,250,125,107,233,112,207,231,174,215,53,9,43,153,52,124,128,65,210,147,255,147,63,200,148,254,0,179,241,42,239,2,230,8,82,135,87,16,3,87,86,151,254,8,255,86,53,19,7,192,171,201,253,247,197,103,251,126,0,149,54,183,61,126,79,113,10,103,184,75,11,195,222,136,149,131,8,99,240,177,252,255,198,16,7,68,178,66,191,150,73,26,211,109,78,209,240,254,1,166,247,131,2,0,167,127,133,10,43,99,235,3,214,142,176,82,132,38,10,249,255,215,44,81],B:[176,182,248,37,117,35,96,69,32,152,108,20,237,250,2,89,141,216,111,251,211,149,10,44,214,103,31,251,3,32,252,246,97,1,219,167,197,4,36,116,206,118,106,43,205,204,114,69,127,205,87,80,41,251,145,204,253,161,247,1,149,9,43,253,97,72,136,161,171,181,26,255,108,80,218,214,231,255,84,31,109,4,218,3,217,36,68,85,241,39,221,2,240,2,173,42,206,5,110,46,103,27,212,184,2,207,246,45,116,72,110,253,38,105,248,159,243,81,192,93,141,145,24,157,234,131,57,178,62,75,65,176,148,40,253,66,76,240,51,154,17,251,139,253,207,9,114,49,200,254,96,73,138,118,204,102,137,89,145,161,4,112,66,234,147,178,212,205,185,11,203,131,2,250,118,169,1,185,154,53,171,197,61,175,249,96,15,254,95,5,222,75,246,194,2,61,180,25,133,165,15,233,59,35,221,140,109,7,114,255,198,0,115,168,252,23,242,80,75,142,137,255,12,182,68,201,4,111,37,228,83,248,24,192,249,5,54,223,160,122,160,114,145,119,252,31,253,250,10,214,8,47,0,142,222,70],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},oft=class{constructor(){Ve(this,"gamma",1),Ve(this,"version",.1),Ve(this,"cluts",{});const e=Object.keys($_).filter(t=>!t.startsWith("$")).sort(new Intl.Collator("en").compare);for(const t of e)this.cluts[t]=$_[t]}addColormap(n,e){this.cluts[n]=e}colormaps(){return Object.keys(this.cluts)}colorMaps(){return this.colormaps()}colormapFromKey(n){let e=this.cluts[n];return e!==void 0||(e=this.cluts[n.toLowerCase()],e!==void 0)?e:(n.length>0&&ht.warn("No color map named "+n),{min:0,max:0,R:[0,255],G:[0,255],B:[0,255],A:[0,255],I:[0,255]})}colormap(n="",e=!1){const t=this.colormapFromKey(n);return this.makeLut(t.R,t.G,t.B,t.A,t.I,e)}makeLabelLut(n,e=255){if(n.R===void 0||n.G===void 0||n.B===void 0)throw new Error(`Invalid colormap table: ${n}`);const t=n.R.length,i=n.I??[...Array(t).keys()];if(t!==n.G.length||t!==n.B.length||t!==i.length)throw new Error(`colormap does not make sense: ${n} Rs ${n.R.length} Gs ${n.G.length} Bs ${n.B.length} Is ${i.length}`);let r=new Uint8ClampedArray(t).fill(e);r[0]=0,n.A!==void 0&&(r=Uint8ClampedArray.from(n.A));const s=Math.min(...i),a=Math.max(...i),o=a-s+1,l=new Uint8ClampedArray(o*4).fill(0);for(let u=0;u<t;u++){let d=(i[u]-s)*4;l[d++]=n.R[u],l[d++]=n.G[u],l[d++]=n.B[u],l[d++]=r[u]}const c={lut:l,min:s,max:a};if(n.labels){const u=n.labels.length;if(u===o)c.labels=n.labels;else if(u===t){c.labels=Array(o).fill("?");for(let d=0;d<t;d++){const f=i[d];c.labels[f]=n.labels[d]}}}return c}async makeLabelLutFromUrl(n){const t=await(await fetch(n)).json();return this.makeLabelLut(t)}makeDrawLut(n){let e=typeof n=="object"?n:$_[n];e===void 0&&(e={min:0,max:0,R:[0,255,0,0,255,0,255],G:[0,0,255,0,255,255,0],B:[0,0,0,255,0,255,255],A:[0,255,255,255,255,255,255],I:[0,255]});const t=this.makeLabelLut(e,255);if(t.labels===void 0&&(t.labels=[]),t.labels.length<256){const a=t.labels.length;for(let o=a;o<256;o++)t.labels.push(o.toString())}const i=new Uint8ClampedArray(256*4);let r=0;for(let a=0;a<256;a++)i[r++]=255,i[r++]=0,i[r++]=0,i[r++]=255;i[3]=0;const s=Math.min(t.lut.length,256*4);if(s>0)for(let a=0;a<s;a++)i[a]=t.lut[a];return{lut:i,labels:t.labels}}makeLut(n,e,t,i,r,s){const a=n.length,o=[...n],l=[...e],c=[...t];if(!r){r=new Array(a);for(let h=0;h<a;h++)r[h]=h/(a-1)*255}i||(i=new Array(a).fill(64),i[0]=0);let u=Uint8ClampedArray.from(i),d=Uint8ClampedArray.from(r);if(s)for(let h=0;h<a;h++)o[h]=n[a-1-h],l[h]=e[a-1-h],c[h]=t[a-1-h],u[h]=255-i[a-1-h],d[h]=255-r[a-1-h];const f=new Uint8ClampedArray(256*4);if(typeof d>"u"){d=new Uint8ClampedArray(a).fill(0);for(let h=0;h<a;h++)d[h]=Math.round(h*255/(a-1))}typeof u>"u"&&(u=new Uint8ClampedArray(a).fill(64),u[0]=0);for(let h=0;h<a-1;h++){const p=d[h];let m=d[h+1];h===0&&p!==0&&ht.warn("colormap issue: indices expected to start with 0 not ",p),h===d.length-2&&m!==255&&(ht.warn("padding colormap: indices expected end with 255 not ",m),m=255);const v=m-p;let g=p*4;for(let y=p;y<=m;y++){const x=(y-p)/v;f[g++]=o[h]+x*(o[h+1]-o[h]),f[g++]=l[h]+x*(l[h+1]-l[h]),f[g++]=c[h]+x*(c[h+1]-c[h]),f[g++]=u[h]+x*(u[h+1]-u[h])}}if(this.gamma===1)return f;for(let h=0;h<255*4;h++)h%4!==3&&(f[h]=Math.pow(f[h]/255,1/this.gamma)*255);return f}},Vr=new oft,E0=class{static getClusterBoundaryU8(n,e){const t=new Array(n.length).fill(!1),i=new Array(n.length).fill(!1);for(let a=0;a<n.length;a++)n[a]>0&&(i[a]=!0);const r=e.length/3;let s=0;for(let a=0;a<r;a++){const o=e[s],l=e[s+1],c=e[s+2];s+=3,!(i[o]===i[l]&&i[o]===i[c]&&i[l]===i[c])&&(t[o]=!0,t[l]=!0,t[c]=!0)}return t}static async gzip(n){const e=new CompressionStream("gzip"),t=e.writable.getWriter();t.write(n).catch(console.error);const i=t.close().catch(console.error),r=new Response(e.readable),s=new Uint8Array(await r.arrayBuffer());return await i,s}static createMZ3(n,e,t=!1,i=null){const s=i instanceof Uint8Array&&i.length===n.length/3*4,a=s?7:3,o=e.length/3,l=n.length/3,c=0,u=16,d=o*3*4,f=l*3*4,h=u+d+f,p=new ArrayBuffer(h),m=new DataView(p);m.setUint16(0,23117,!0),m.setUint16(2,a,!0),m.setUint32(4,o,!0),m.setUint32(8,l,!0),m.setUint32(12,c,!0);let v=u;if(new Uint32Array(p,v,e.length).set(e),v+=d,new Float32Array(p,v,n.length).set(n),s&&(v+=f,new Uint8Array(p,v,i.length).set(i)),t)throw new Error("Call async createMZ3Async() for compression");return p}static async createMZ3Async(n,e,t=!1,i=null){const r=this.createMZ3(n,e,t,i);return t?await this.gzip(new Uint8Array(r)):r}static createOBJ(n,e){let t="";for(let s=0;s<n.length;s+=3)t+=`v ${n[s]} ${n[s+1]} ${n[s+2]}
`;for(let s=0;s<e.length;s+=3)t+=`f ${e[s]+1} ${e[s+1]+1} ${e[s+2]+1}
`;return new TextEncoder().encode(t).buffer}static createSTL(n,e){const t=e.length/3,i=84+t*50,r=new ArrayBuffer(i),s=new DataView(r);for(let o=0;o<80;o++)s.setUint8(o,0);s.setUint32(80,t,!0);let a=84;for(let o=0;o<e.length;o+=3){const l=e[o]*3,c=e[o+1]*3,u=e[o+2]*3;s.setFloat32(a,0,!0),s.setFloat32(a+4,0,!0),s.setFloat32(a+8,0,!0),a+=12,s.setFloat32(a,n[l],!0),s.setFloat32(a+4,n[l+1],!0),s.setFloat32(a+8,n[l+2],!0),a+=12,s.setFloat32(a,n[c],!0),s.setFloat32(a+4,n[c+1],!0),s.setFloat32(a+8,n[c+2],!0),a+=12,s.setFloat32(a,n[u],!0),s.setFloat32(a+4,n[u+1],!0),s.setFloat32(a+8,n[u+2],!0),a+=12,s.setUint16(a,0,!0),a+=2}return r}static downloadArrayBuffer(n,e){const t=new Blob([n],{type:"application/octet-stream"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=e,document.body.appendChild(r),r.style.display="none",r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(i)},0)}static async saveMesh(n,e,t=".mz3",i=!1){let r=new ArrayBuffer(0);return/\.obj$/i.test(t)?r=this.createOBJ(n,e):/\.stl$/i.test(t)?r=this.createSTL(n,e):(/\.mz3$/i.test(t)||(t+=".mz3"),r=await this.createMZ3Async(n,e,i)),t.length>4&&this.downloadArrayBuffer(r,t),r}static getClusterBoundary(n,e){const t=new Uint32Array(n.buffer),i=new Array(t.length).fill(!1),r=e.length/3;let s=0;for(let a=0;a<r;a++){const o=e[s],l=e[s+1],c=e[s+2];s+=3,!(t[o]===t[l]&&t[o]===t[c]&&t[l]===t[c])&&(i[o]=!0,i[l]=!0,i[c]=!0)}return i}static getExtents(n){if(!ArrayBuffer.isView(n)&&!Array.isArray(n)||n.length<3)return{mxDx:0,extentsMin:0,extentsMax:0};let e=0;const t=bn(n[0],n[1],n[2]),i=bn(n[0],n[1],n[2]);for(let a=0;a<n.length;a+=3){const o=bn(n[a],n[a+1],n[a+2]);e=Math.max(e,aA(o)),LB(t,t,o),kB(i,i,o)}const r=[t[0],t[1],t[2]],s=[i[0],i[1],i[2]];return{mxDx:e,extentsMin:r,extentsMax:s}}static generateNormals(n,e){const t=[];let i;const r=n.length;let s,a,o,l,c,u,d,f,h;const p=new Float32Array(r),m=e.length;for(i=0;i<m;i+=3){d=e[i]*3,f=e[i+1]*3,h=e[i+2]*3;const v=[n[d],n[d+1],n[d+2]],g=[n[f],n[f+1],n[f+2]],y=[n[h],n[h+1],n[h+2]];s=g[0]-v[0],a=g[1]-v[1],o=g[2]-v[2],l=y[0]-v[0],c=y[1]-v[1],u=y[2]-v[2],t[0]=c*o-u*a,t[1]=u*s-l*o,t[2]=l*a-c*s,p[d]+=t[0],p[d+1]+=t[1],p[d+2]+=t[2],p[f]+=t[0],p[f+1]+=t[1],p[f+2]+=t[2],p[h]+=t[0],p[h+1]+=t[1],p[h+2]+=t[2]}for(i=0;i<r;i+=3){t[0]=-1*p[i],t[1]=-1*p[i+1],t[2]=-1*p[i+2];let v=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];v>0&&(v=1/Math.sqrt(v),t[0]*=v,t[1]*=v,t[2]*=v),p[i]=t[0],p[i+1]=t[1],p[i+2]=t[2]}return p}},di,Lo,Q_,aL,Q2,lft=class{constructor(n){k2(this,di),k2(this,Lo,0),k2(this,Q_,[]),k2(this,aL,[]),k2(this,Q2),eg(this,di,new DataView(n)),this.read()}async extract(n){const e=new Uint8Array(jn(this,di).buffer.slice(n.startsAt,n.startsAt+n.compressedSize));if(n.compressionMethod===0)return e;if(n.compressionMethod===8){const t=new DecompressionStream("deflate-raw"),i=t.writable.getWriter();i.write(e).catch(console.error);const r=i.close().catch(console.error),s=new Response(t.readable),a=new Uint8Array(await s.arrayBuffer());return await r,a}throw new Error(`Unsupported compression method: ${n.compressionMethod}`)}read(){for(;!jn(this,Q2)&&jn(this,Lo)<jn(this,di).byteLength;){const n=jn(this,di).getUint32(jn(this,Lo),!0);if(n===67324752){const e=this.readLocalFile(jn(this,Lo));e.extract=this.extract.bind(this,e),jn(this,Q_).push(e);const t=(e.generalPurpose&8)!==0;if(e.startsAt=jn(this,Lo)+30+e.fileNameLength+e.extraLength,e.compressedSize===0&&t){let i=e.startsAt;for(;i+20<=jn(this,di).byteLength;){if(jn(this,di).getUint32(i,!0)===134695760&&jn(this,di).getUint16(i+16,!0)===19280){i+=4;break}i++}e.crc=jn(this,di).getUint32(i,!0),e.compressedSize=jn(this,di).getUint32(i+4,!0),e.uncompressedSize=jn(this,di).getUint32(i+8,!0),eg(this,Lo,i+12)}else eg(this,Lo,e.startsAt+e.compressedSize)}else if(n===33639248){const e=this.readCentralDirectory(jn(this,Lo));jn(this,aL).push(e),eg(this,Lo,jn(this,Lo)+(46+e.fileNameLength+e.extraLength+e.fileCommentLength))}else if(n===101010256){eg(this,Q2,this.readEndCentralDirectory(jn(this,Lo)));break}else if(n===101075792){eg(this,Q2,this.readEndCentralDirectory64(jn(this,Lo)));break}else{console.error(`Unexpected ZIP signature 0x${n.toString(16).padStart(8,"0")} at index ${jn(this,Lo)}`);break}}}readLocalFile(n){let e=jn(this,di).getUint32(n+18,!0),t=jn(this,di).getUint32(n+22,!0);const i=jn(this,di).getUint16(n+26,!0),r=jn(this,di).getUint16(n+28,!0),s=n+30+i;if(this.readString(s,r),e===4294967295&&t===4294967295){let a=s,o=!1;for(;a<s+r-4;){const l=jn(this,di).getUint16(a,!0),c=jn(this,di).getUint16(a+2,!0);if(a+=4,l===1)if(c>=16){t=Number(jn(this,di).getBigUint64(a,!0)),a+=8,e=Number(jn(this,di).getBigUint64(a,!0)),o=!0;break}else throw new Error(`ZIP64 extra field found but is too small (expected at least 16 bytes, got ${c}).`);a+=c}if(!o)throw new Error("ZIP64 format missing extra field with signature 0x0001.")}return{signature:this.readString(n,4),version:jn(this,di).getUint16(n+4,!0),generalPurpose:jn(this,di).getUint16(n+6,!0),compressionMethod:jn(this,di).getUint16(n+8,!0),lastModifiedTime:jn(this,di).getUint16(n+10,!0),lastModifiedDate:jn(this,di).getUint16(n+12,!0),crc:jn(this,di).getUint32(n+14,!0),compressedSize:e,uncompressedSize:t,fileNameLength:i,extraLength:r,fileName:this.readString(n+30,i),extra:this.readString(n+30+i,r)}}readCentralDirectory(n){return{versionCreated:jn(this,di).getUint16(n+4,!0),versionNeeded:jn(this,di).getUint16(n+6,!0),fileNameLength:jn(this,di).getUint16(n+28,!0),extraLength:jn(this,di).getUint16(n+30,!0),fileCommentLength:jn(this,di).getUint16(n+32,!0),diskNumber:jn(this,di).getUint16(n+34,!0),internalAttributes:jn(this,di).getUint16(n+36,!0),externalAttributes:jn(this,di).getUint32(n+38,!0),offset:jn(this,di).getUint32(n+42,!0),comments:this.readString(n+46,jn(this,di).getUint16(n+32,!0))}}readEndCentralDirectory(n){const e=jn(this,di).getUint16(n+20,!0);return{numberOfDisks:jn(this,di).getUint16(n+4,!0),centralDirectoryStartDisk:jn(this,di).getUint16(n+6,!0),numberCentralDirectoryRecordsOnThisDisk:jn(this,di).getUint16(n+8,!0),numberCentralDirectoryRecords:jn(this,di).getUint16(n+10,!0),centralDirectorySize:jn(this,di).getUint32(n+12,!0),centralDirectoryOffset:jn(this,di).getUint32(n+16,!0),commentLength:e,comment:this.readString(n+22,e)}}readEndCentralDirectory64(n){const e=Number(jn(this,di).getBigUint64(n+0,!0));return{numberOfDisks:jn(this,di).getUint32(n+16,!0),centralDirectoryStartDisk:jn(this,di).getUint32(n+20,!0),numberCentralDirectoryRecordsOnThisDisk:Number(jn(this,di).getBigUint64(n+24,!0)),numberCentralDirectoryRecords:Number(jn(this,di).getBigUint64(n+32,!0)),centralDirectorySize:Number(jn(this,di).getBigUint64(n+40,!0)),centralDirectoryOffset:Number(jn(this,di).getBigUint64(n+48,!0)),commentLength:e,comment:""}}readString(n,e){return Array.from({length:e},(t,i)=>String.fromCharCode(jn(this,di).getUint8(n+i))).join("")}get entries(){return jn(this,Q_)}};di=new WeakMap;Lo=new WeakMap;Q_=new WeakMap;aL=new WeakMap;Q2=new WeakMap;var Bn=class vg{static arrayBufferToBase64(e){const t=new Uint8Array(e);return vg.uint8tob64(t)}static async decompress(e){const t=e[0]===31&&e[1]===139&&e[2]===8?"gzip":e[0]===120&&(e[1]===1||e[1]===94||e[1]===156||e[1]===218)?"deflate":"deflate-raw",i=new DecompressionStream(t),r=i.writable.getWriter();r.write(e).catch(console.error);const s=r.close().catch(console.error),a=new Response(i.readable),o=new Uint8Array(await a.arrayBuffer());return await s,o}static async decompressToBuffer(e){const t=await vg.decompress(e);return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}static async readMatV4(e){let t=e.byteLength;if(t<40)throw new Error("File too small to be MAT v4: bytes = "+e.byteLength);let i=new DataView(e),r=i.getUint16(0,!0),s=e;if(r===35615||r===8075){const h=await this.decompress(new Uint8Array(e));i=new DataView(h.buffer),r=i.getUint16(0,!0),s=h.buffer,t=s.byteLength}const a=new TextDecoder("utf-8"),o=new Uint8Array(s);let l=0;const c={};function u(h){return Math.floor(h/10)%10}function d(h,p,m){const v=new Uint8Array(o.subarray(p,m));return h===1?new Float32Array(v.buffer):h===2?new Int32Array(v.buffer):h===3?new Int16Array(v.buffer):h===4?new Uint16Array(v.buffer):h===5?new Uint8Array(v.buffer):new Float64Array(v.buffer)}function f(){const h=i.getUint32(l,!0),p=i.getUint32(l+4,!0),m=i.getUint32(l+8,!0),v=i.getUint32(l+12,!0),g=i.getUint32(l+16,!0);if(l+=20,v!==0)throw new Error("Matlab V4 reader does not support imaginary numbers");const y=p*m;if(y<1)throw new Error("mrows * ncols must be greater than one");const x=new Uint8Array(o.subarray(l,l+g)),b=a.decode(x).trim().replaceAll("\0",""),A=u(h);let S=8;if(A>=1&&A<=2)S=4;else if(A>=3&&A<=4)S=2;else if(A===5)S=1;else if(A!==0)throw new Error("impossible Matlab v4 datatype");if(l+=g,h>50)throw new Error("Does not appear to be little-endian V4 Matlab file");const C=l+y*S;c[b]=d(A,l,C),l=C}for(;l+20<t;)f();return c}static b64toUint8(e){const t=atob(e),i=t.length,r=new Uint8Array(i);for(let s=0;s<i;s++)r[s]=t.charCodeAt(s);return r}static uint8tob64(e){let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=e.byteLength,s=r%3,a=r-s;let o,l,c,u,d;for(let f=0;f<a;f=f+3)d=e[f]<<16|e[f+1]<<8|e[f+2],o=(d&16515072)>>18,l=(d&258048)>>12,c=(d&4032)>>6,u=d&63,t+=i[o]+i[l]+i[c]+i[u];return s===1?(d=e[a],o=(d&252)>>2,l=(d&3)<<4,t+=i[o]+i[l]+"=="):s===2&&(d=e[a]<<8|e[a+1],o=(d&64512)>>10,l=(d&1008)>>4,c=(d&15)<<2,t+=i[o]+i[l]+i[c]+"="),t}static download(e,t,i){const r=document.createElement("a"),s=Array.isArray(e)?e:[e],a=new Blob(s,{type:i});r.href=URL.createObjectURL(a),r.download=t,r.click()}static readFileAsync(e){return new Promise((t,i)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=i,r.readAsArrayBuffer(e)})}static blobToBase64(e){return new Promise(t=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.readAsDataURL(e)})}static async decompressBase64String(e){const t=atob(e),i=new ArrayBuffer(t.length),r=new Uint8Array(i);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return vg.decompressArrayBuffer(r)}static async compressToBase64String(e){const t=await vg.compressStringToArrayBuffer(e);return vg.uint8tob64(new Uint8Array(t))}static strToU8(e,t){if(t){const l=new Uint8Array(e.length);for(let c=0;c<e.length;++c)l[c]=e.charCodeAt(c);return l}const i=e.length,r=(l,c,u)=>((u==null||u>l.length)&&(u=l.length),new Uint8Array(l.subarray(c,u)));let s=new Uint8Array(e.length+(e.length>>1)),a=0;const o=l=>{s[a++]=l};for(let l=0;l<i;++l){if(a+5>s.length){const u=new Uint8Array(a+8+(i-l<<1));u.set(s),s=u}let c=e.charCodeAt(l);c<128||t?o(c):c<2048?(o(192|c>>6),o(128|c&63)):(c>55295&&c<57344,c=65536+(c&1047552)|e.charCodeAt(++l)&1023,o(240|c>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|c&63))}return r(s,0,a)}static async compress(e,t="gzip"){const i=new CompressionStream(t),r=i.writable.getWriter();r.write(e).catch(console.error);const s=r.close().catch(console.error),o=await new Response(i.readable).arrayBuffer();return await s,o}static async compressStringToArrayBuffer(e){const t=this.strToU8(e);return await this.compress(t)}static isArrayBufferCompressed(e){if(e&&e.byteLength){const t=new Uint8Array(e);return(t[0]<<8|t[1])===8075}else return!1}static strFromU8(e,t){if(t){let i="";for(let r=0;r<e.length;r+=16384)i+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return i}else{const i=(o,l,c)=>((l==null||l<0)&&(l=0),(c==null||c>o.length)&&(c=o.length),new Uint8Array(o.subarray(l,c))),r=o=>{for(let l="",c=0;;){let u=o[c++];const d=(u>127)+(u>223)+(u>239);if(c+d>o.length)return{s:l,r:i(o,c-1)};d?d===3?(u=((u&15)<<18|(o[c++]&63)<<12|(o[c++]&63)<<6|o[c++]&63)-65536,l+=String.fromCharCode(55296|u>>10,56320|u&1023)):d&1?l+=String.fromCharCode((u&31)<<6|o[c++]&63):l+=String.fromCharCode((u&15)<<12|(o[c++]&63)<<6|o[c++]&63):l+=String.fromCharCode(u)}},{s,r:a}=r(e);if(a.length)throw new Error("Unexpected trailing bytes in UTF-8 decoding");return s}}static async decompressArrayBuffer(e){const t=await this.decompress(new Uint8Array(e));return this.strFromU8(t)}static arraysAreEqual(e,t){return gct(e,t)}static range(e,t,i){return Array.from({length:(t-e)/i+1},(r,s)=>e+s*i)}static sph2cartDeg(e,t){const i=-t*(Math.PI/180),r=(e-90)%360*(Math.PI/180),s=[Math.cos(i)*Math.cos(r),Math.cos(i)*Math.sin(r),Math.sin(i)],a=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);return a<=0||(s[0]/=a,s[1]/=a,s[2]/=a),s}static vox2mm(e,t){const i=_s(t);ml(i,i);const r=Jr(e[0],e[1],e[2],1);return Sa(r,r,i),bn(r[0],r[1],r[2])}},k3=ht,as=class ca{static readTRACT(e){const t=e.byteLength;if(t<20)throw new Error("File too small to be niml.tract: bytes = "+t);const i=new DataView(e),r=new Uint8Array(e);let s=0;function a(){for(;s<t&&r[s]!==60;)s++;const m=s;for(;s<t&&r[s]!==62;)s++;return s++,s-m<1?"":new TextDecoder().decode(e.slice(m,s-1)).trim()}let o=a();function l(m){const v=o.indexOf(m);if(v<0)return 0;const g=o.indexOf('"',v)+1,y=o.indexOf('"',g),x=o.slice(g,y);return parseInt(x)}const c=l("N_tracts=");(!o.startsWith("<network")||c<1)&&ht.warn("This is not a valid niml.tract file "+o);let u=0;const d=[];d.push(u);const f=[],h=[];for(let m=0;m<c;m++){o=a();const v=l("ni_dimen="),g=l("Bundle_Tag="),y=o.includes("binary.lsbfirst");for(let x=0;x<v;x++){s+=4;const b=i.getUint32(s,y)/3;s+=4;for(let A=0;A<b;A++)f.push(i.getFloat32(s,y)),s+=4,f.push(-i.getFloat32(s,y)),s+=4,f.push(i.getFloat32(s,y)),s+=4;u+=b,d.push(u),h.push(g)}o=a()}const p=[];return p.push({id:"tract",vals:Float32Array.from(h)}),{pts:new Float32Array(f),offsetPt0:new Uint32Array(d),dps:p}}static async readTT(e){let t=new Uint32Array(0),i=new Float32Array(0);const r=await Bn.readMatV4(e);if(!("trans_to_mni"in r))throw new Error("TT format file must have 'trans_to_mni'");if(!("voxel_size"in r))throw new Error("TT format file must have 'voxel_size'");if(!("track"in r))throw new Error("TT format file must have 'track'");let s=Zi();const a=r.trans_to_mni;s=pl(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),ml(s,s);function o(l){const c=new DataView(l.buffer),u=[];let d=0,f=0;for(;f<l.length;){u.push(f);const m=c.getUint32(f,!0);f=f+m+13,d+=m}t=new Uint32Array(u.length+1),i=new Float32Array(d);let h=0;for(let m=0;m<u.length;m++){t[m]=h/3;let v=u[m];const g=c.getUint32(v,!0)/3;let y=c.getInt32(v+4,!0),x=c.getInt32(v+8,!0),b=c.getInt32(v+12,!0);v+=16,i[h++]=y,i[h++]=x,i[h++]=b;for(let A=2;A<=g;A++)y=y+c.getInt8(v++),x=x+c.getInt8(v++),b=b+c.getInt8(v++),i[h++]=y,i[h++]=x,i[h++]=b}for(let m=0;m<h;m++)i[m]=i[m]/32;let p=0;for(let m=0;m<h/3;m++){const v=Jr(i[p],i[p+1],i[p+2],1);Sa(v,v,s),i[p++]=v[0],i[p++]=v[1],i[p++]=v[2]}t[u.length]=h/3}return o(r.track),{pts:i,offsetPt0:t}}static async readTRX(e){function t(h){const p=(h&31744)>>10,m=h&1023;return(h>>15?-1:1)*(p?p===31?m?NaN:1/0:Math.pow(2,p-15)*(1+m/1024):6103515625e-14*(m/1024))}let i=0,r=0,s=new Float32Array([]);const a=[],o=[],l=[],c=[];let u=[],d=!1;const f=new lft(e);for(let h=0;h<f.entries.length;h++){const p=f.entries[h];if(p.uncompressedSize===0)continue;const m=p.fileName.split("/"),v=m.slice(-1)[0];if(v.startsWith("."))continue;const g=m.slice(-2)[0],y=v.split(".")[0],x=await p.extract();if(v.includes("header.json")){const S=new TextDecoder().decode(x);u=JSON.parse(S);continue}let b=0,A=[];if(v.endsWith(".uint64")||v.endsWith(".int64")){b=x.length/8,A=new Uint32Array(b);const S=new Uint32Array(x.buffer);let C=0;for(let _=0;_<b;_++)A[_]=S[C],S[C+1]!==0&&(d=!0),C+=2}else if(v.endsWith(".uint32"))A=new Uint32Array(x.buffer);else if(v.endsWith(".uint16"))A=new Uint16Array(x.buffer);else if(v.endsWith(".uint8"))A=new Uint8Array(x.buffer);else if(v.endsWith(".int32"))A=new Int32Array(x.buffer);else if(v.endsWith(".int16"))A=new Int16Array(x.buffer);else if(v.endsWith(".int8"))A=new Int8Array(x.buffer);else if(v.endsWith(".float64"))A=new Float64Array(x.buffer);else if(v.endsWith(".float32"))A=new Float32Array(x.buffer);else if(v.endsWith(".float16")){b=x.length/2,A=new Float32Array(b);const S=new Uint16Array(x.buffer),C=new Float32Array(65536);for(let _=0;_<65536;_++)C[_]=t(_);for(let _=0;_<b;_++)A[_]=C[S[_]]}else continue;if(b=A.length,g.includes("groups")){o.push({id:y,vals:Float32Array.from(A.slice())});continue}if(g.includes("dpv")){c.push({id:y,vals:Float32Array.from(A.slice())});continue}if(g.includes("dps")){l.push({id:y,vals:Float32Array.from(A.slice())});continue}if(v.startsWith("offsets.")){i=b;for(let S=0;S<b;S++)a[S]=A[S]}v.startsWith("positions.3.")&&(r=b,s=new Float32Array(A))}if(i===0||r===0)throw new Error("Failure reading TRX format (no offsets or points).");if(d)throw new Error("Too many vertices: JavaScript does not support 64 bit integers");return a[i]=r/3,{pts:s,offsetPt0:new Uint32Array(a),dpg:o,dps:l,dpv:c,header:u}}static readTSF(e,t=0){const i=new Float32Array(t),r=e.byteLength;if(r<20)throw new Error("File too small to be TSF: bytes = "+r);const s=new Uint8Array(e);let a=0;function o(){for(;a<r&&s[a]===10;)a++;const f=a;for(;a<r&&s[a]!==10;)a++;return a++,a-f<1?"":new TextDecoder().decode(e.slice(f,a-1))}let l=o();if(!l.includes("mrtrix track scalars"))throw new Error("Not a valid TSF file");let c=-1;for(;a<r&&!l.includes("END");)if(l=o(),l.toLowerCase().startsWith("file:")&&(c=parseInt(l.split(" ").pop())),l.toLowerCase().startsWith("datatype:")&&!l.endsWith("Float32LE"))throw new Error("Only supports TSF files with Float32LE");if(c<20)throw new Error("Not a valid TSF file (missing file offset)");a=c;const u=new DataView(e);let d=0;for(;a+4<=r&&d<t;){const f=u.getFloat32(a,!0);if(a+=4,isFinite(f))i[d++]=f;else if(!isNaN(f))break}return i}static readTCK(e){const t=e.byteLength;if(t<20)throw new Error("File too small to be TCK: bytes = "+t);const i=new Uint8Array(e);let r=0;function s(){for(;r<t&&i[r]===10;)r++;const p=r;for(;r<t&&i[r]!==10;)r++;return r++,r-p<1?"":new TextDecoder().decode(e.slice(p,r-1))}let a=s();if(!a.includes("mrtrix tracks"))throw new Error("Not a valid TCK file");let o=-1;for(;r<t&&!a.includes("END");)a=s(),a.toLowerCase().startsWith("file:")&&(o=parseInt(a.split(" ").pop()));if(o<20)throw new Error("Not a valid TCK file (missing file offset)");r=o;const l=new DataView(e);let c=0,u=new Uint32Array(t/(4*4)),d=0,f=0,h=new Float32Array(t/4);for(u[0]=0;r+12<t;){const p=l.getFloat32(r,!0);r+=4;const m=l.getFloat32(r,!0);r+=4;const v=l.getFloat32(r,!0);if(r+=4,isFinite(p))h[f++]=p,h[f++]=m,h[f++]=v,c++;else if(u[d++]=c,!isNaN(p))break}return h=h.slice(0,f),u=u.slice(0,d),{pts:h,offsetPt0:u}}static async readTRK(e){let t=new DataView(e),i=t.getUint32(0,!0);if(i!==1128354388){let E;if(i===4247762216)throw new Error("zstd TRK decompression is not supported");E=await Bn.decompress(new Uint8Array(e)),e=E.buffer,t=new DataView(e),i=t.getUint32(0,!0)}const r=t.getUint32(992,!0),s=t.getUint32(996,!0);if(r>2||s!==1e3||i!==1128354388)throw new Error("Not a valid TRK file");const a=t.getInt16(36,!0),o=[];for(let E=0;E<a;E++){const I=new Uint8Array(e.slice(38+E*20,58+E*20)),L=new TextDecoder().decode(I).split("\0").shift();o.push({id:L.trim(),vals:[]})}const l=t.getFloat32(12,!0),c=t.getFloat32(16,!0),u=t.getFloat32(20,!0),d=pl(1/l,0,0,-.5,0,1/c,0,-.5,0,0,1/u,-.5,0,0,0,1),f=t.getInt16(238,!0),h=[];for(let E=0;E<f;E++){const I=new Uint8Array(e.slice(240+E*20,260+E*20)),L=new TextDecoder().decode(I).split("\0").shift();h.push({id:L.trim(),vals:[]})}const p=Zi();for(let E=0;E<16;E++)p[E]=t.getFloat32(440+E*4,!0);p[15]===0&&(ht.warn("TRK vox_to_ras not set"),voe(p));const m=Zi();goe(m,d,p);let v=null,g=null;v=new Int32Array(e.slice(s)),g=new Float32Array(v.buffer);const y=v.length;if(y<1)throw new Error("Empty TRK file.");let x=0,b=0,A=new Uint32Array(v.length/4),S=0,C=new Float32Array(v.length),_=0;for(;x<y;){const E=v[x];x=x+1,A[S++]=b;for(let I=0;I<E;I++){const L=g[x+0],F=g[x+1],B=g[x+2];if(x+=3,C[_++]=L*m[0]+F*m[1]+B*m[2]+m[3],C[_++]=L*m[4]+F*m[5]+B*m[6]+m[7],C[_++]=L*m[8]+F*m[9]+B*m[10]+m[11],a>0)for(let P=0;P<a;P++)o[P].vals.push(g[x]),x++;b++}if(f>0)for(let I=0;I<f;I++)h[I].vals.push(g[x]),x++}const M=[];for(let E=0;E<h.length;E++)M.push({id:h[E].id,vals:Float32Array.from(h[E].vals)});const T=[];for(let E=0;E<o.length;E++)T.push({id:o[E].id,vals:Float32Array.from(o[E].vals)});return A[S++]=b,C=C.slice(0,_),A=A.slice(0,S),{pts:C,offsetPt0:A,dps:M,dpv:T}}static readTxtVTK(e){const r=new TextDecoder("utf-8").decode(e).split(`
`);if(r.length<7||!r[0].startsWith("# vtk DataFile"))throw new Error("Invalid VTK image");if(!r[2].startsWith("ASCII"))throw new Error("Not ASCII VTK mesh");let a=3;for(;r[a].length<1;)a++;if(!r[a].includes("POLYDATA"))throw new Error("Not ASCII VTK polydata");for(a++;r[a].length<1;)a++;if(!r[a].startsWith("POINTS"))throw new Error("Not VTK POINTS");let o=r[a].trim().split(/\s+/);const l=parseInt(o[1]),c=l*3,u=new Float32Array(l*3);let d=0;for(;d<l*3;){a++;const m=r[a].trim().trim().split(/\s+/);for(let v=0;v<m.length&&!(d>=c);v++)u[d]=parseFloat(m[v]),d++}const f=[];for(a++;r[a].length<1;)a++;if(r[a].startsWith("METADATA")){for(;r[a].length>1;)a++;a++}if(o=r[a].trim().split(/\s+/),a++,o[0].includes("LINES")){const p=parseInt(o[1]);if(p<1)throw new Error("Corrupted VTK ASCII");let m=r[a].trim();const v=[];let g=[];if(m.startsWith("OFFSETS")){a++;let y=0;for(;y<p;){m=r[a].trim(),a++;const x=m.trim().split(/\s+/);for(let b=0;b<x.length&&(v[y]=parseInt(x[b]),y++,!(y>=p));b++);}g=Array.from(u)}else{let y=function(){m=r[a].trim();const S=m.trim().split(/\s+/);b=[];for(let C=0;C<S.length;C++)b.push(parseInt(S[C]));A=0,a++},x=0;v[0]=0;let b=[],A=0;y();for(let S=0;S<p;S++){A>=b.length&&y();const C=b[A++];x+=C,v[S+1]=x;for(let _=0;_<C;_++){A>=b.length&&y();const M=b[A++]*3;g.push(u[M+0]),g.push(u[M+1]),g.push(u[M+2])}}}return{pts:Float32Array.from(g),offsetPt0:Uint32Array.from(v)}}else if(o[0].includes("TRIANGLE_STRIPS")){const p=parseInt(o[1]);for(let m=0;m<p;m++){const v=r[a].trim();a++;const g=v.trim().split(/\s+/),y=parseInt(g[0])-2;let x=1;for(let b=0;b<y;b++)b%2?(f.push(parseInt(g[x+2])),f.push(parseInt(g[x+1])),f.push(parseInt(g[x]))):(f.push(parseInt(g[x])),f.push(parseInt(g[x+1])),f.push(parseInt(g[x+2]))),x+=1}}else if(o[0].includes("POLYGONS")){const p=parseInt(o[1]);for(let m=0;m<p;m++){const v=r[a].trim();a++;const g=v.trim().split(/\s+/),y=parseInt(g[0])-2,x=parseInt(g[1]);let b=parseInt(g[2]);for(let A=0;A<y;A++){const S=parseInt(g[3+A]);f.push(x),f.push(b),f.push(S),b=S}}}else throw new Error("Unsupported ASCII VTK datatype "+o[0]);const h=new Uint32Array(f);return{positions:u,indices:h}}static async readLayer(e="",t,i,r=.5,s="warm",a="winter",o=!1,l=null,c=null,u=0){const d={...dft,colormapInvert:!1,colormapType:0,isTransparentBelowCalMin:!0,isAdditiveBlend:!1,colorbarVisible:!0,colormapLabel:null},f=/(?:\.([^.]+))?$/;let h=f.exec(e)[1];h=h.toUpperCase(),h==="GZ"&&(h=f.exec(e.slice(0,-3))[1],h=h.toUpperCase());const p=i.vertexCount/3;if(i.offsetPt0){if(h!=="TSF")throw new Error("readLayer for streamlines only supports TSF files.");const g=i.pts.length/3,y=e.split("/");let x="Unknown";y.length>1&&y.pop()&&(x=x.split(".").slice(0,-1).join("."));const b=ca.readTSF(t,g);i.dpv||(i.dpv=[]);const A=b.reduce((C,_)=>Math.min(C,_)),S=b.reduce((C,_)=>Math.max(C,_));return i.dpv.push({id:x,vals:Float32Array.from(b.slice()),global_min:A,global_max:S,cal_min:A,cal_max:S}),d}if(p<3){ht.error("n_vert < 3 in layer");return}if(h==="MZ3"){const g=await ca.readMZ3(t,p);d.values=g.scalars,"colormapLabel"in g&&(d.colormapLabel=g.colormapLabel)}else if(h==="ANNOT"){const g=ca.readANNOT(t,p,!0);g instanceof Uint32Array?d.values=g:(d.values=g.scalars,d.colormapLabel=g.colormapLabel)}else if(h==="CRV"||h==="CURV"||h==="THICKNESS"||h==="AREA")d.values=ca.readCURV(t,p),d.isTransparentBelowCalMin=!1;else if(h==="GII"){const g=await ca.readGII(t,p);d.values=g.scalars,d.colormapLabel=g.colormapLabel}else if(h==="MGH"||h==="MGZ"){const g=await ca.readMGH(t,p,!0);"scalars"in g?(d.values=g.scalars,d.colormapLabel=g.colormapLabel):d.values=g}else if(h==="NII")d.values=await ca.readNII(t,p,i.anatomicalStructurePrimary);else if(h==="SMP")d.values=await ca.readSMP(t,p);else if(h==="STC")d.values=ca.readSTC(t,p);else if(ca.isCurv(t))d.values=ca.readCURV(t,p),d.isTransparentBelowCalMin=!1;else return ht.warn("Unknown layer overlay format "+e),d;if(!d.values){ht.error("no values in layer");return}d.nFrame4D=d.values.length/p,d.frame4D=0,d.outlineBorder=u;let m=d.values[0],v=d.values[0];for(let g=0;g<d.values.length;g++)m=Math.min(m,d.values[g]),v=Math.max(v,d.values[g]);return d.global_min=m,d.global_max=v,d.cal_min=l||0,l||(d.cal_min=m),d.cal_max=c||0,c||(d.cal_max=v),d.cal_minNeg=NaN,d.cal_maxNeg=NaN,d.opacity=r,d.colormap=s,d.colormapNegative=a,d.useNegativeCmap=o,d}static async readSMP(e,t){const i=e.byteLength;let r=new DataView(e),s=r.getUint16(0,!0);if(s>5){const d=await Bn.decompress(new Uint8Array(e));r=new DataView(d.buffer),s=r.getUint16(0,!0),e=d.buffer}s>5&&ht.error("Unsupported or invalid BrainVoyager SMP version "+s);const a=r.getUint32(2,!0);a!==t&&ht.error("SMP file has "+a+" vertices, background mesh has "+t);const o=r.getUint16(6,!0),l=new Float32Array(a*o);let c=9;function u(){const d=c;for(;c<i&&r.getUint8(c)!==0;)c++;return c++,new TextDecoder().decode(e.slice(d,c-1))}u();for(let d=0;d<o;d++){const f={};f.mapType=r.getUint32(c,!0),c+=4,s>=3&&f.mapType===3&&(f.nLags=r.getUint32(c,!0),c+=4,f.mnLag=r.getUint32(c,!0),c+=4,f.mxLag=r.getUint32(c,!0),c+=4,f.ccOverlay=r.getUint32(c,!0),c+=4),f.clusterSize=r.getUint32(c,!0),c+=4,f.clusterCheck=r.getUint8(c),c+=1,f.critThresh=r.getFloat32(c,!0),c+=4,f.maxThresh=r.getFloat32(c,!0),c+=4,s>=4&&(f.includeValuesGreaterThreshMax=r.getUint32(c,!0),c+=4),f.df1=r.getUint32(c,!0),c+=4,f.df2=r.getUint32(c,!0),c+=4,s>=5?(f.posNegFlag=r.getUint32(c,!0),c+=4):f.posNegFlag=3,f.cortexBonferroni=r.getUint32(c,!0),c+=4,f.posMinRGB=[0,0,0],f.posMaxRGB=[0,0,0],f.negMinRGB=[0,0,0],f.negMaxRGB=[0,0,0],s>=2&&(f.posMinRGB[0]=r.getUint8(c),c++,f.posMinRGB[1]=r.getUint8(c),c++,f.posMinRGB[2]=r.getUint8(c),c++,f.posMaxRGB[0]=r.getUint8(c),c++,f.posMaxRGB[1]=r.getUint8(c),c++,f.posMaxRGB[2]=r.getUint8(c),c++,s>=4&&(f.negMinRGB[0]=r.getUint8(c),c++,f.negMinRGB[1]=r.getUint8(c),c++,f.negMinRGB[2]=r.getUint8(c),c++,f.negMaxRGB[0]=r.getUint8(c),c++,f.negMaxRGB[1]=r.getUint8(c),c++,f.negMaxRGB[2]=r.getUint8(c),c++),f.enableSMPColor=r.getUint8(c),c++,s>=4&&(f.lut=u()),f.colorAlpha=r.getFloat32(c,!0),c+=4),f.name=u();const h=new Float32Array(e,c,a);l.set(h,d*a),c+=a*4}return l}static readSTC(e,t){const i=new DataView(e),r=i.getInt32(8,!1);if(r!==t)throw new Error("Overlay has "+r+" vertices, expected "+t);let s=12+r*4;const a=i.getUint32(s,!1);s+=4;const o=new Float32Array(a*r);for(let l=0;l<a*r;l++)o[l]=i.getFloat32(s,!1),s+=4;return o}static isCurv(e){const t=new DataView(e),i=t.getUint8(0),r=t.getUint8(1),s=t.getUint8(2);return i!==255||r!==255||s!==255?(k3.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),!1):!0}static readCURV(e,t){const i=new DataView(e),r=i.getUint8(0),s=i.getUint8(1),a=i.getUint8(2),o=i.getUint32(3,!1),l=i.getUint32(11,!1);if((r!==255||s!==255||a!==255)&&k3.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),t!==o)throw new Error("CURV file has different number of vertices ( "+o+")than mesh ("+t+")");if(e.byteLength<15+4*o*l)throw new Error("CURV file smaller than specified");const c=new Float32Array(l*o);let u=15;for(let p=0;p<l*o;p++)c[p]=i.getFloat32(u,!1),u+=4;let d=c[0],f=c[0];for(let p=0;p<c.length;p++)d=Math.min(d,c[p]),f=Math.max(f,c[p]);const h=1/(f-d);for(let p=0;p<c.length;p++)c[p]=1-(c[p]-d)*h;return c}static readANNOT(e,t,i=!1){const r=new DataView(e),s=r.getUint32(0,!1),a=this.decimateLayerVertices(s,t);if(t!==a)throw new Error("ANNOT file has different number of vertices than mesh");if(e.byteLength<4+8*s)throw new Error("ANNOT file smaller than specified");let o=0;const l=new Uint32Array(s);for(let x=0;x<s;x++){const b=r.getUint32(o+=4,!1);l[b]=r.getUint32(o+=4,!1)}if(!i)return l;let c=0;try{c=r.getInt32(o+=4,!1)}catch{return l}if(c!==1||r.getInt32(o+=4,!1)>0)return l;const f=r.getInt32(o+=4,!1),h=r.getInt32(o+=4,!1);o+=h;const p=r.getInt32(o+=4,!1);if(p<1)return l;const m={R:Array(f).fill(0),G:Array(f).fill(0),B:Array(f).fill(0),A:Array(f).fill(0),I:Array(f).fill(0),labels:Array(f).fill("")};for(let x=0;x<p;x++){const b=r.getInt32(o+=4,!1),A=r.getInt32(o+=4,!1);o+=4;let S="";for(let E=0;E<A;E++){const I=r.getUint8(o++);if(I===0)break;S+=String.fromCharCode(I)}o-=4;const C=r.getInt32(o+=4,!1),_=r.getInt32(o+=4,!1),M=r.getInt32(o+=4,!1),T=r.getInt32(o+=4,!1);if(b<0||b>=f){ht.warn("annot entry out of range");continue}m.R[b]=C,m.G[b]=_,m.B[b]=M,m.A[b]=T,m.I[b]=(T<<24)+(M<<16)+(_<<8)+C,m.labels[b]=S}const v=new Float32Array(s);v.fill(-1);let g=0;for(let x=0;x<t;x++){const b=l[x];for(let A=0;A<f;A++)if(m.I[A]===b){v[x]=A;break}v[x]<0&&(g++,v[x]=0)}g>0&&ht.error(`annot vertex colors do not match ${g} of ${s} vertices.`);for(let x=0;x<f;x++)m.I[x]=x;const y=Vr.makeLabelLut(m);return{scalars:v,colormapLabel:y}}static readNV(e){const t=e.byteLength,i=new Uint8Array(e);let r=0;function s(){for(;r<t&&i[r]===10;)r++;const f=r;for(;r<t&&i[r]!==10;)r++;return r++,r-f<1?"":new TextDecoder().decode(e.slice(f,r-1))}let a=0,o=0,l=0,c=0,u,d;for(;r<t;){const f=s();if(f.startsWith("#"))continue;const h=f.trim().split(/\s+/);if(a<1){a=parseInt(h[0]),u=new Float32Array(a*3);continue}if(l<a*3){u[l]=parseFloat(h[0]),u[l+1]=parseFloat(h[1]),u[l+2]=parseFloat(h[2]),l+=3;continue}if(o<1){o=parseInt(h[0]),d=new Uint32Array(o*3);continue}if(c>=o*3)break;d[c+2]=parseInt(h[0])-1,d[c+1]=parseInt(h[1])-1,d[c+0]=parseInt(h[2])-1,c+=3}return{positions:u,indices:d}}static readASC(e){const t=e.byteLength,i=new Uint8Array(e);let r=0;function s(){for(;r<t&&i[r]===10;)r++;const h=r;for(;r<t&&i[r]!==10;)r++;return r++,r-h<1?"":new TextDecoder().decode(e.slice(h,r-1))}let a=s();a.startsWith("#!ascii")||ht.warn("Invalid ASC mesh"),a=s();let o=a.trim().split(/\s+/);const l=parseInt(o[0]),c=parseInt(o[1]),u=new Float32Array(l*3);let d=0;for(let h=0;h<l;h++)a=s(),o=a.trim().split(/\s+/),u[d]=parseFloat(o[0]),u[d+1]=parseFloat(o[1]),u[d+2]=parseFloat(o[2]),d+=3;const f=new Uint32Array(c*3);d=0;for(let h=0;h<c;h++)a=s(),o=a.trim().split(/\s+/),f[d]=parseInt(o[0]),f[d+1]=parseInt(o[1]),f[d+2]=parseInt(o[2]),d+=3;return{positions:u,indices:f}}static readVTK(e){const t=e.byteLength;if(t<20)throw new Error("File too small to be VTK: bytes = "+e.byteLength);const i=new Uint8Array(e);let r=0;function s(m=!0){if(m)for(;r<t&&i[r]===10;)r++;const v=r;for(;r<t&&i[r]!==10;)r++;return r++,r-v<1?"":new TextDecoder().decode(e.slice(v,r-1))}let a=s();if(!a.startsWith("# vtk DataFile"))throw new Error("Invalid VTK mesh");if(a=s(!1),a=s(),a.startsWith("ASCII"))return ca.readTxtVTK(e);if(!a.startsWith("BINARY"))throw new Error("Invalid VTK image, expected ASCII or BINARY "+a);if(a=s(),!a.includes("POLYDATA"))throw new Error("Only able to read VTK POLYDATA "+a);a=s(),(!a.includes("POINTS")||!a.includes("double")&&!a.includes("float"))&&ht.warn("Only able to read VTK float or double POINTS"+a);const o=a.includes("double");let l=a.trim().split(/\s+/);const u=parseInt(l[1])*3,d=new Float32Array(u),f=new DataView(e);if(o)for(let m=0;m<u;m++)d[m]=f.getFloat64(r,!1),r+=8;else for(let m=0;m<u;m++)d[m]=f.getFloat32(r,!1),r+=4;a=s(),l=a.trim().split(/\s+/);const h=[];if(l[0].includes("LINES")){const m=parseInt(l[1]),v=r;if(a=s(),a.startsWith("OFFSETS")){let b=!1;a.includes("int64")&&(b=!0);const A=new Uint32Array(m);if(b){let C=!1;for(let _=0;_<m;_++){let M=f.getInt32(r,!1);M!==0&&(C=!0),r+=4,M=f.getInt32(r,!1),r+=4,A[_]=M}C&&ht.warn("int32 overflow: JavaScript does not support int64")}else for(let C=0;C<m;C++){const _=f.getInt32(r,!1);r+=4,A[C]=_}return{pts:d,offsetPt0:A}}r=v;let g=0;const y=[],x=[];y.push(g);for(let b=0;b<m;b++){const A=f.getInt32(r,!1);r+=4,g+=A,y.push(g);for(let S=0;S<A;S++){const C=f.getInt32(r,!1)*3;r+=4,x.push(d[C+0]),x.push(d[C+1]),x.push(d[C+2])}}return{pts:Float32Array.from(x),offsetPt0:Uint32Array.from(y)}}else if(l[0].includes("TRIANGLE_STRIPS")){const m=parseInt(l[1]);for(let v=0;v<m;v++){const g=f.getInt32(r,!1)-2;r+=4;for(let y=0;y<g;y++)y%2?(h.push(f.getInt32(r+8,!1)),h.push(f.getInt32(r+4,!1)),h.push(f.getInt32(r,!1))):(h.push(f.getInt32(r,!1)),h.push(f.getInt32(r+4,!1)),h.push(f.getInt32(r+8,!1))),r+=4;r+=8}}else if(l[0].includes("POLYGONS")){const m=parseInt(l[1]);for(let v=0;v<m;v++){const g=f.getInt32(r,!1)-2;if(v===0&&g>65535)throw new Error("Invalid VTK binary polygons using little-endian data (MRtrix)");r+=4;const y=f.getInt32(r,!1);r+=4;let x=f.getInt32(r,!1);r+=4;for(let b=0;b<g;b++){const A=f.getInt32(r,!1);r+=4,h.push(y),h.push(x),h.push(A),x=A}}}else throw new Error("Unsupported binary VTK datatype "+l[0]);const p=new Uint32Array(h);return{positions:d,indices:p}}static readWRL(e){const t=new TextDecoder("utf-8").decode(e),i=/coord\s+Coordinate\s*\{\s*point\s*\[([\s\S]*?)\]/,r=/coordIndex\s*\[([\s\S]*?)\]/,s=/color\s+Color\s*\{\s*color\s*\[([\s\S]*?)\]/,a=i.exec(t),o=r.exec(t),l=s.exec(t);if(!a||!o)throw new Error("Invalid WRL file: Could not find vertices or indices.");const c=new Float32Array(a[1].trim().split(/[\s,]+/).map(Number));let u=null;if(l){u=new Float32Array(l[1].trim().split(/[\s,]+/).map(Number));const f=c.length/3;u.length!==f*3&&(console.warn(`Unexpected color count: expected ${f*3}, got ${u.length}`),u=null)}const d=new Uint32Array(o[1].trim().split(/[\s,]+/).map(Number).filter(f=>f!==-1));return{positions:c,indices:d,colors:u}}static readDFS(e){const t=new DataView(e),i=t.getUint32(0,!0),r=t.getUint16(4,!0);(i!==1599292996||r!==17740)&&ht.warn("Not a little-endian brainsuite DFS mesh");const s=t.getUint32(12,!0),a=t.getUint32(24,!0),o=t.getUint32(28,!0),l=t.getUint32(48,!0);let c=s;const u=new Uint32Array(e,c,a*3);c+=a*3*4;const d=new Float32Array(e,c,o*3);for(let h=0;h<o*3;h+=3){const p=d[h];d[h]=d[h+1],d[h+1]=p}let f;return l>=0&&(f=new Float32Array(e,l,o*3)),{positions:d,indices:u,colors:f}}static async readMZ3(e,t=0){if(e.byteLength<20)throw new Error("File too small to be mz3: bytes = "+e.byteLength);let i=new DataView(e),r=i.getUint16(0,!0),s=e;if(r===35615||r===8075){const S=await Bn.decompress(new Uint8Array(e));i=new DataView(S.buffer),r=i.getUint16(0,!0),s=S.buffer}const a=i.getUint16(2,!0),o=i.getUint32(4,!0);let l=i.getUint32(8,!0);const c=i.getUint32(12,!0);if(k3.debug("MZ3 magic %d attr %d face %d vert %d skip %d",r,a,o,l,c),r!==23117)throw new Error("Invalid MZ3 file");const u=(a&1)!==0,d=(a&2)!==0,f=(a&4)!==0;let h=(a&8)!==0;const p=(a&16)!==0;if(a>63)throw new Error("Unsupported future version of MZ3 file");let m=4;p&&(m=8);let v=0;if(t>0&&!u&&o<1&&!f&&(h=!0),h){let S=t;t===0&&(S=l);const C=16+c+(u?1:0)*o*12+(d?1:0)*S*12+(f?1:0)*S*4,_=Math.floor((s.byteLength-C)/m);l!==t&&_%t===0&&(ht.warn("Issue 729: mz3 mismatch scalar NVERT does not match mesh NVERT"),l=t),v=Math.floor(_/l),v<1&&(ht.warn("Corrupt MZ3: file reports NSCALAR but not enough bytes"),h=!1)}if(l<3&&t<3)throw new Error("Not a mesh MZ3 file (maybe scalar)");t>0&&t!==l&&ht.warn("Layer has "+l+"vertices, but background mesh has "+t);let g=16+c,y=null;u&&(y=new Uint32Array(s,g,o*3),g+=o*3*4);let x=null;d&&(x=new Float32Array(s,g,l*3),g+=l*3*4);let b=null;if(f){b=new Float32Array(l*3);const S=new Uint8Array(s,g,l*4);g+=l*4;let C=0,_=0;for(let M=0;M<l;M++){for(let T=0;T<3;T++)b[C]=S[_]/255,C++,_++;_++}}let A=new Float32Array;if((!f||t>0)&&h&&v>0){if(p){const S=new Float64Array(s,g,v*l);A=Float32Array.from(S)}else A=new Float32Array(s,g,v*l);g+=m*v*l}if(t>0&&f&&h){let S=A[0];for(let M=0;M<l;M++)S=Math.max(S,A[M]);const C={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let M=0;M<=S;M++)for(let T=0;T<l;T++)if(M===A[T]){const E=T*3;C.I.push(M),C.R.push(b[E]*255),C.G.push(b[E+1]*255),C.B.push(b[E+2]*255),C.A.push(255),C.labels.push(`${M}`);break}const _=Vr.makeLabelLut(C);return{scalars:A,colormapLabel:_}}return t>0?{scalars:A}:{positions:x,indices:y,scalars:A,colors:b}}static readPLY(e){const t=e.byteLength,i=new Uint8Array(e);let r=0;function s(){for(;r<t&&i[r]===10;)r++;const _=r;for(;r<t&&i[r]!==10;)r++;return r++,r-_<1?"":new TextDecoder().decode(e.slice(_,r-1))}let a=s();if(!a.startsWith("ply"))throw new Error("Not a valid PLY file");a=s();const o=a.includes("ascii");function l(_){if(_==="char"||_==="uchar"||_==="int8"||_==="uint8")return 1;if(_==="short"||_==="ushort"||_==="int16"||_==="uint16")return 2;if(_==="int"||_==="uint"||_==="int32"||_==="uint32"||_==="float"||_==="float32")return 4;if(_==="double")return 8;throw new Error("Unknown data type: "+_)}const c=a.includes("binary_little_endian");let u=0,d=!1,f=0,h=0,p=0,m=0,v=0,g=0,y=0;for(;r<t&&!a.startsWith("end_header");){if(a=s(),a.startsWith("comment"))continue;let _=a.split(/\s/);if(a.startsWith("element vertex"))for(u=parseInt(_[_.length-1]),a=s(),_=a.split(/\s/);a.startsWith("property");){const M=_[1];_[2]==="x"&&M.startsWith("double")?d=!0:_[2]==="x"&&!M.startsWith("float")&&ht.error("Error: expect ply xyz to be float or double: "+a),f+=l(M),a=s(),_=a.split(/\s/)}if(a.startsWith("element face"))for(y=parseInt(_[_.length-1]),a=s(),_=a.split(/\s/);a.startsWith("property");){if(_[1]==="list")p=l(_[2]),m=l(_[3]),h+=p+3*m;else{const M=l(_[1]);h+=M,m===0&&(v+=M,g++)}a=s(),_=a.split(/\s/)}}if(o){y<1&&ht.error(`Malformed ply format: faces ${y} `);const _=new Float32Array(u*3);let M=0;for(let I=0;I<u;I++){a=s();const L=a.split(/\s/);_[M]=parseFloat(L[0]),_[M+1]=parseFloat(L[1]),_[M+2]=parseFloat(L[2]),M+=3}let T=new Uint32Array(y*3),E=0;for(let I=0;I<y;I++){a=s();const L=a.split(/\s/),F=parseInt(L[g])-2;if(F<1)break;if(E+F*3>T.length){const z=new Uint32Array(T.length+T.length);z.set(T),T=z.slice()}const B=parseInt(L[g+1]);let P=parseInt(L[g+2]);for(let z=0;z<F;z++){const O=parseInt(L[g+3+z]);T[E+0]=B,T[E+1]=P,T[E+2]=O,P=O,E+=3}}return T.length!==E&&(T=T.slice(0,E)),{positions:_,indices:T}}(f<12||p<1||m<1||y<1)&&ht.warn(`Malformed ply format: stride ${f} count ${p} iBytes ${m} iStrideBytes ${h} iPadBytes ${v} faces ${y}`);const x=new DataView(e);let b;if(r%4===0&&f===12&&c)b=new Float32Array(e,r,u*3),r+=u*f;else{b=new Float32Array(u*3);let _=0;for(let M=0;M<u;M++)d?(b[_]=x.getFloat64(r,c),b[_+1]=x.getFloat64(r+8,c),b[_+2]=x.getFloat64(r+16,c)):(b[_]=x.getFloat32(r,c),b[_+1]=x.getFloat32(r+4,c),b[_+2]=x.getFloat32(r+8,c)),_+=3,r+=f}const A=new Uint32Array(y*3);let S=!0,C=0;if(p===1&&m===4&&h===13)for(let _=0;_<y;_++){const M=x.getUint8(r);r+=p,M!==3&&(S=!1),A[C]=x.getUint32(r,c),r+=4,A[C+1]=x.getUint32(r,c),r+=4,A[C+2]=x.getUint32(r,c),r+=4,C+=3}else{let _=r;for(let M=0;M<y;M++){r=_+v;let T=0;p===1?T=x.getUint8(r):p===2?T=x.getUint16(r,c):p===4&&(T=x.getUint32(r,c)),r+=p,T!==3&&(S=!1);for(let E=0;E<3;E++)m===1?A[C]=x.getUint8(r):m===2?A[C]=x.getUint16(r,c):m===4&&(A[C]=x.getUint32(r,c)),C++,r+=m;_+=h}}return S||ht.warn("Only able to read PLY meshes limited to triangles."),{positions:b,indices:A}}static readICO(e){const r=new TextDecoder("utf-8").decode(e).split(`
`);let s=r[0].trim().split(/\s+/);s.length>1&&ht.warn("This is not a valid FreeSurfer ICO/TRI mesh.");const a=parseInt(s[0]),o=new Float32Array(a*3);let l=1;for(let d=0;d<a;d++){const f=r[l].trim().split(/\s+/);l++;let h=parseInt(f[0])-1;const p=parseFloat(f[1]),m=parseFloat(f[2]),v=parseFloat(f[3]);if(h<0||h>=a){ht.error("ICO vertices corrupted");break}h*=3,o[h]=p,o[h+1]=m,o[h+2]=v}s=r[l].trim().split(/\s+/),l++;const c=parseInt(s[0]),u=new Uint32Array(c*3);for(let d=0;d<c;d++){const f=r[l].trim().split(/\s+/);l++;let h=parseInt(f[0])-1;const p=parseInt(f[1])-1,m=parseInt(f[2])-1,v=parseInt(f[3])-1;if(h<0||h>=c){ht.error("ICO indices corrupted");break}h*=3,u[h]=p,u[h+1]=m,u[h+2]=v}for(let d=0;d<u.length;d+=3){const f=u[d];u[d]=u[d+1],u[d+1]=f}return{positions:o,indices:u}}static readGEO(e,t=!1){const s=new TextDecoder("utf-8").decode(e).split(`
`),a=s[0].trim().split(/\s+/),o=parseInt(a[0]);let l=parseInt(a[1]),c=parseInt(a[2]);const u=parseInt(a[3]);(o>1||u!==c*3)&&ht.warn("Multi-part BYU/GEO header or not a triangular mesh.");const d=[];l*=3;let f=0,h=2;for(;f<l;){const y=s[h].trim().split(/\s+/);h++;for(let x=0;x<y.length&&(d.push(parseFloat(y[x])),f++,!(f>=l));x++);}const p=[];c*=3;let m=0;for(;m<c;){const y=s[h].trim().split(/\s+/);h++;for(let x=0;x<y.length&&(p.push(Math.abs(parseInt(y[x]))-1),m++,!(m>=c));x++);}if(t)for(let y=0;y<p.length;y+=3){const x=p[y];p[y]=p[y+1],p[y+1]=x}const v=new Float32Array(d),g=new Uint32Array(p);return{positions:v,indices:g}}static readOFF(e){const r=new TextDecoder("utf-8").decode(e).split(`
`),s=[],a=[];let o=0;r[o].includes("OFF")?o++:ht.warn("File does not start with OFF");let l=r[o].trim().split(/\s+/);const c=parseInt(l[0]),u=parseInt(l[1]);o++;for(let h=0;h<c;h++)l=r[o].trim().split(/\s+/),s.push(parseFloat(l[0])),s.push(parseFloat(l[1])),s.push(parseFloat(l[2])),o++;for(let h=0;h<u;h++)l=r[o].trim().split(/\s+/),parseInt(l[0])!==3&&ht.warn("Only able to read OFF files with triangular meshes"),a.push(parseInt(l[1])),a.push(parseInt(l[2])),a.push(parseInt(l[3])),o++;const d=new Float32Array(s),f=new Uint32Array(a);return{positions:d,indices:f}}static readOBJMNI(e){const r=new TextDecoder("utf-8").decode(e).trim().split(/\s*,\s*|\s+/);(r.length<1||r[0]!=="P")&&ht.warn("This is not a valid MNI OBJ mesh.");let s=6;const a=parseInt(r[s++]),o=a*3,l=new Float32Array(o);for(let p=0;p<o;p++)l[p]=parseFloat(r[s++]);s+=o;const c=parseInt(r[s++]),u=parseInt(r[s++]);(c<1||u<0||u>2)&&ht.warn("This is not a valid MNI OBJ mesh.");let d=1;u===1?d=c:u===1&&(d=a),s+=d*4,s+=c;const f=c*3,h=new Uint32Array(f);for(let p=0;p<f;p++)h[p]=parseInt(r[s++]);return{positions:l,indices:h}}static async readOBJ(e){const t=new Uint8Array(e,0,2);t[0]===31&&t[1]===139&&(e=await Bn.decompressToBuffer(new Uint8Array(e)));const r=new TextDecoder("utf-8").decode(e);if(r[0]==="P")return this.readOBJMNI(e);const s=r.split(`
`),a=s.length,o=[],l=[];for(let h=0;h<a;h++){const p=s[h];if(p[0]==="v"&&p[1]===" "){const m=p.trim().split(/\s+/);o.push(parseFloat(m[1])),o.push(parseFloat(m[2])),o.push(parseFloat(m[3]))}if(p[0]==="f"){const m=p.trim().split(/\s+/),v=m.length-3;if(v<1)break;let g=m[1].split("/");const y=parseInt(g[0])-1;g=m[2].split("/");let x=parseInt(g[0])-1;for(let b=0;b<v;b++){g=m[3+b].split("/");const A=parseInt(g[0])-1;l.push(y),l.push(x),l.push(A),x=A}}}const c=new Float32Array(o),u=new Uint32Array(l);let d=u[0],f=u[0];for(let h=1;h<u.length;h++)u[h]<d&&(d=u[h]),u[h]>f&&(f=u[h]);if(f-d+1>c.length/3)throw new Error("Not a valid OBJ file");for(let h=0;h<u.length;h++)u[h]-=d;return{positions:c,indices:u}}static readFreeSurfer(e){const t=new Uint8Array(e);if(t[0]===35&&t[1]===33&&t[2]===97)return ca.readASC(e);const i=new DataView(e),r=i.getUint32(0,!1),s=i.getUint32(4,!1);(r!==4294966883||s!==1919246708)&&k3.debug("Unable to recognize file type: does not appear to be FreeSurfer format.");let a=0;for(;i.getUint8(a)!==10;)a++;a+=2;let o=i.getUint32(a,!1);a+=4;let l=i.getUint32(a,!1);a+=4,o*=3;const c=new Float32Array(o);for(let h=0;h<o;h++)c[h]=i.getFloat32(a,!1),a+=4;l*=3;const u=new Uint32Array(l);for(let h=0;h<l;h++)u[h]=i.getUint32(a,!1),a+=4;const d=i.getUint32(a,!1);a+=4;let f=d===20;if(!f){const h=i.getUint32(a,!1);a+=4;const p=i.getUint32(a,!1);a+=4,f=d===2&&h===0&&p===20}if(!f)ht.warn("Unknown FreeSurfer Mesh extension code.");else{const p=new TextDecoder().decode(e.slice(a)).trim().split(`
`);for(let m=0;m<p.length;m++){if(!p[m].startsWith("cras"))continue;const g=p[m].split("=")[1].trim().split(" ").map(Number),y=Math.floor(c.length/3);let x=0;for(let b=0;b<y;b++)c[x]+=g[0],x++,c[x]+=g[1],x++,c[x]+=g[2],x++}}return{positions:c,indices:u}}static async readSRF(e){const t=new Uint8Array(e);if(t[0]===35&&t[1]===33&&t[2]===97)return ca.readASC(e);t[0]===31&&t[1]===139&&(e=(await Bn.decompress(new Uint8Array(e))).buffer);const i=new DataView(e),r=i.getFloat32(0,!0),s=i.getUint32(8,!0),a=i.getUint32(12,!0),o=i.getFloat32(16,!0),l=i.getFloat32(20,!0),c=i.getFloat32(24,!0),u=new Float32Array(s*3);let d=28,f=1;for(let S=0;S<s;S++)u[f]=-i.getFloat32(d,!0)+o,f+=3,d+=4;f=2;for(let S=0;S<s;S++)u[f]=-i.getFloat32(d,!0)+l,f+=3,d+=4;f=0;for(let S=0;S<s;S++)u[f]=-i.getFloat32(d,!0)+c,f+=3,d+=4;d=28+4*6*s;const h=i.getFloat32(d,!0),p=i.getFloat32(d+4,!0),m=i.getFloat32(d+8,!0),v=i.getFloat32(d+16,!0),g=i.getFloat32(d+20,!0),y=i.getFloat32(d+24,!0);d+=8*4;const x=new Float32Array(s*3),b=new Uint32Array(e,d,s);f=0;for(let S=0;S<s;S++){const C=b[S];C>1056964608&&(x[f+0]=(C>>16&255)/255,x[f+1]=(C>>8&255)/255,x[f+2]=(C&255)/255),C===0&&(x[f+0]=h,x[f+1]=p,x[f+2]=m),C===1&&(x[f+0]=v,x[f+1]=g,x[f+2]=y),f+=3}d+=s*4;for(let S=0;S<s;S++){const C=i.getUint32(d,!0);d+=4+4*C}const A=new Uint32Array(a*3);for(let S=0;S<a*3;S++)A[S]=i.getInt32(d,!0),d+=4;return r!==4&&ht.warn("Not valid SRF"),{positions:u,indices:A,colors:x}}static readTxtSTL(e){const r=new TextDecoder("utf-8").decode(e).split(`
`);if(!r[0].startsWith("solid"))throw new Error("Not a valid STL file");const s=[];for(let c=1;c<r.length;c++){if(!r[c].includes("vertex"))continue;const u=r[c].trim().split(/\s+/);for(let d=1;d<u.length;d++)s.push(parseFloat(u[d]))}const a=Math.floor(s.length/3);if(a*3!==s.length)throw new Error("Unable to parse ASCII STL file.");const o=new Float32Array(s),l=new Uint32Array(a);for(let c=0;c<a;c++)l[c]=c;return{positions:o,indices:l}}static readSTL(e){if(e.byteLength<134)throw new Error("File too small to be STL: bytes = "+e.byteLength);const t=new DataView(e);if(t.getUint32(0,!0)===1768714099)return ca.readTxtSTL(e);const r=t.getUint32(80,!0),s=3*r;if(e.byteLength<84+r*50)throw new Error("STL file too small to store triangles = "+r);const a=new Uint32Array(s),o=new Float32Array(s*3);let l=96,c=0;for(let u=0;u<r;u++){for(let d=0;d<9;d++)o[c]=t.getFloat32(l,!0),c+=1,l+=4;l+=14}for(let u=0;u<s;u++)a[u]=u;return{positions:o,indices:a}}static decimateLayerVertices(e,t){if(e%t===0)return e;const i=12,r=Math.round(Math.log((e-2)/(i-2))/Math.log(4)),s=Math.round(Math.log((t-2)/(i-2))/Math.log(4)),a=Math.pow(4,r)*(i-2)+2,o=Math.pow(4,s)*(i-2)+2;return a!==e||o!==t?e:t}static async readNII2(e,t=0,i=""){let r=new Float32Array;const s=e.byteLength;let a=!0;const o=new DataView(e);let l=o.getUint16(0,a);if(l===469893120&&(a=!1,l=o.getUint16(0,a)),l!==540)throw new Error("Not a valid NIfTI-2 dataset");const c=Number(o.getBigInt64(168,a)),u=o.getFloat64(176,a),d=o.getFloat64(184,a);(u!==1||d!==0)&&ht.warn("ignoring scale slope and intercept");const f=o.getUint32(504,a),h=o.getUint16(12,a);if(h!==2&&h!==4&&h!==8&&h!==16)throw new Error("Unsupported NIfTI datatype "+h);let p=1;const m=[1,1,1,1,1,1,1,1];for(let v=1;v<8;v++)m[v]=Math.max(Number(o.getBigInt64(16+v*8,a)),1),p*=m[v];if(f>=3e3&&f<=3099&&c>580){let v=function(){for(;M<s&&_[M]===10;)M++;const P=M;for(;M<s&&_[M]!==10;)M++;return M++,M-P<1?"":new TextDecoder().decode(e.slice(P,M-1)).trim()},g=function(){let P=v();if(!P.startsWith("<")||P.endsWith(">"))return P;for(;M<s&&!P.endsWith(">");)P+=v();return P},y=function(P,z=!1){const O=T.indexOf(P);if(O<0)return 1;const N=T.indexOf('"',O)+1,H=T.indexOf('"',N),q=T.slice(N,H);return z?q:parseInt(q)},x=0,b=0,A=0,S="",C=new Uint32Array;const _=new Uint8Array(e);let M=552,T;const E=m[5],I=new Float32Array(t*E);for(;M<s&&(T=g(),!T.includes("</CIFTI>"));)if(T.includes("<BrainModel")){const P=y("SurfaceNumberOfVertices="),z=y("BrainStructure=",!0).toUpperCase();if(P%t!==0)continue;let O=!1;if(i.includes("CORTEX")&&z.includes("CORTEX")&&(O=!0),!O||(O=!1,i.includes("LEFT")&&z.includes("LEFT")&&(O=!0),i.includes("RIGHT")&&z.includes("RIGHT")&&(O=!0),!O))continue;if(A=P,x=y("IndexOffset="),b=y("IndexCount="),S=z,T.includes("<VertexIndices>")||(T=g()),!T.startsWith("<VertexIndices>")||!T.endsWith("</VertexIndices>"))return ht.warn("Unable to find CIfTI <VertexIndices>"),I;T=T.slice(15,-16);const N=T.trim().split(/\s+/);N.length<b&&ht.error("Error parsing VertexIndices"),C=new Uint32Array(b);for(let H=0;H<b;H++)C[H]=parseInt(N[H])}if(A===0||C.length===0)return ht.warn("Unable to find CIfTI structure that matches the mesh."),I;if(h!==16)return ht.warn("Only able to read float32 CIfTI (only known datatype)."),I;const L=new Float32Array(b*E),F=c+E*x*4;for(let P=0;P<b*E;P++)L[P]=o.getFloat32(F+P*4,a);let B=0;for(let P=0;P<b;P++)for(let z=0;z<E;z++)I[C[P]+z*t]=L[B],B++;return ht.debug("CIfTI diagnostics",A,S,x,b,x,i),I}if(p=this.decimateLayerVertices(p,t),p%t!==0)throw new Error("Vertices in layer ("+p+") is not a multiple of number of vertices ("+t+")");if(a)h===16?r=new Float32Array(e,c,p):h===8?r=new Int32Array(e,c,p):h===4&&(r=new Int16Array(e,c,p));else if(h===16){r=new Float32Array(p);for(let v=0;v<p;v++)r[v]=o.getFloat32(c+v*4,a)}else if(h===8){r=new Int32Array(p);for(let v=0;v<p;v++)r[v]=o.getInt32(c+v*4,a)}else if(h===4){r=new Int16Array(p);for(let v=0;v<p;v++)r[v]=o.getInt16(c+v*2,a)}return h===2&&(r=new Uint8Array(e,c,p)),r}static async readNII(e,t=0,i=""){let r=new Float32Array,s=!0,a=new DataView(e),o=a.getUint16(0,s);if(o===540||o===469893120)return ca.readNII2(e,t,i);if(o===23553&&(s=!1,o=a.getUint16(0,s)),o!==348){const h=await Bn.decompress(new Uint8Array(e));if(a=new DataView(h.buffer),e=h.buffer,o=a.getUint16(0,s),o===540||o===469893120)return ca.readNII2(e,t,i);o===23553&&(s=!1,o=a.getUint16(0,s))}o!==348&&ht.error("Not a valid NIfTI image.");const l=a.getFloat32(108,s),c=a.getFloat32(112,s),u=a.getFloat32(116,s);(c!==1||u!==0)&&ht.warn("ignoring scale slope and intercept");const d=a.getUint16(70,s);if(d!==2&&d!==4&&d!==8&&d!==16)throw new Error("Unsupported NIfTI datatype "+d);let f=1;for(let h=1;h<8;h++){const p=a.getUint16(40+h*2,s);f*=Math.max(p,1)}if(f=this.decimateLayerVertices(f,t),f%t!==0)throw new Error("Vertices in layer ("+f+") is not a multiple of number of vertices ("+t+")");if(s)d===16?r=new Float32Array(e,l,f):d===8?r=new Int32Array(e,l,f):d===4&&(r=new Int16Array(e,l,f));else if(d===16){r=new Float32Array(f);for(let h=0;h<f;h++)r[h]=a.getFloat32(l+h*4,s)}else if(d===8){r=new Int32Array(f);for(let h=0;h<f;h++)r[h]=a.getInt32(l+h*4,s)}else if(d===4){r=new Int16Array(f);for(let h=0;h<f;h++)r[h]=a.getInt16(l+h*2,s)}return d===2&&(r=new Uint8Array(e,l,f)),r}static async readMGH(e,t=0,i=!1){let r=new DataView(e),s=e;if(r.getUint8(0)===31&&r.getUint8(1)===139){const C=await Bn.decompress(new Uint8Array(e));s=new ArrayBuffer(C.byteLength),new Uint8Array(s).set(new Uint8Array(C)),r=new DataView(C.buffer)}const a=r.getInt32(0,!1),o=Math.max(1,r.getInt32(4,!1)),l=Math.max(1,r.getInt32(8,!1)),c=Math.max(1,r.getInt32(12,!1)),u=Math.max(1,r.getInt32(16,!1)),d=r.getInt32(20,!1);let f=284;const h=!1;(a!==1||d<0||d>4)&&ht.warn("Not a valid MGH file");let p=o*l*c*u,m=[];if(p=this.decimateLayerVertices(p,t),p%t!==0)return ht.warn("Vertices in layer ("+p+") is not a multiple of number of vertices ("+t+")"),m;if(d===3){m=new Float32Array(p);for(let C=0;C<p;C++)m[C]=r.getFloat32(f+C*4,h)}else if(d===1){m=new Int32Array(p);for(let C=0;C<p;C++)m[C]=r.getInt32(f+C*4,h)}else if(d===4){m=new Int16Array(p);for(let C=0;C<p;C++)m[C]=r.getInt16(f+C*2,h)}else d===0&&(m=new Uint8Array(e,f,p));if(!i)return m;let v=4;d===4&&(v=2),d===0&&(v=1),f+=v*p,f+=4*4;const g=1,y=2,x=20,b=30,A=s.byteLength;let S;for(;f<A-8;){const C=r.getInt32(f+=4,h);let _=0;switch(C){case b:_=r.getInt32(f+=4,h)-1;break;case x:case y:_=0;break;case g:_=0;{let M=r.getInt32(f+=4,h);if(M>0)return ht.warn("unsupported CTABreadFromBinaryV1"),m;if(M=-M,M!==2)return ht.warn("CTABreadFromBinary: unknown version"),m;const T=r.getInt32(f+=4,h);if(T<0)return ht.warn("CTABreadFromBinaryV2: nentries was ",T),m;const E=r.getInt32(f+=4,h);f+=E;const I=r.getInt32(f+=4,h);if(I<0)return m;const L={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let F=0;F<I;F++){const B=r.getInt32(f+=4,h),P=r.getInt32(f+=4,h);let z=f+4,O="";for(let Q=0;Q<P;Q++){const ee=r.getUint8(z++);if(ee===0)break;O+=String.fromCharCode(ee)}f+=P;const N=r.getInt32(f+=4,h),H=r.getInt32(f+=4,h),q=r.getInt32(f+=4,h),te=255-r.getInt32(f+=4,h);L.I.push(B),L.R.push(N),L.G.push(H),L.B.push(q),L.A.push(te),L.labels.push(O)}S=Vr.makeLabelLut(L)}break;default:_=r.getInt32(f+=8,h)}f+=_}return{scalars:m,colormapLabel:S}}static readX3D(e){const t=e.byteLength;if(t<20)throw new Error("File too small to be X3D: bytes = "+t);const i=new Uint8Array(e);let r=0;function s(){for(;r<t&&i[r]!==60;)r++;const x=r;for(;r<t&&i[r]!==62;)r++;const b=r;return new TextDecoder().decode(e.slice(x,b+1)).trim()}let a=s();function o(x){const b=a.indexOf(x+"=");if(b<0)return"";const A=a[b+x.length+1],S=a.indexOf(A,b)+1,C=a.indexOf(A,S);return a.slice(S,C)}function l(x){const b=a.indexOf(x+"=");if(b<0)return 1;const A=a[b+x.length+1],S=a.indexOf(A,b)+1,C=a.indexOf(A,S);let _=a.slice(S,C).trim();_=_.replace(/,\s*$/,"");const M=_.trim().split(/\s*,\s*|\s+/);if(M.length<2)return parseFloat(_);let T=new Array(M.length),E=0;for(let I=0;I<M.length;I++){const L=parseFloat(M[I]);isFinite(L)&&(T[E]=L,E++)}return T=T.slice(0,E),T}a.includes("xml version")||ht.warn("Not a X3D image");let c=[],u=[],d=[],f=[],h=[0,0,0,0],p=[0,0,0,0],m=[255,255,255,255],v=[255,255,255,255];const g={};function y(){if(!a.endsWith("/>"))if(a.startsWith("<Appearance>"))for(;r<t&&!a.endsWith("</Appearance>");)a+=s();else for(;r<t&&!a.endsWith("/>");)a+=s();const x=o("USE");if(x.length>1){x in g?m=g[x]:ht.warn("Unable to find DEF for "+x);return}const b=l("diffuseColor");if(b.length<3)return;m[0]=Math.round(b[0]*255),m[1]=Math.round(b[1]*255),m[2]=Math.round(b[2]*255);const A=o("DEF");A.length<1||(g[A]=m)}for(;r<t;)if(a=s(),m=v.slice(),a.startsWith("<Transform")&&(h=l("translation"),p=l("rotation")),a.startsWith("<Appearance")&&(y(),v=m.slice()),a.startsWith("<Shape")){let x=1,b=1,A=[],S=[];for(;r<t&&(a=s(),a.startsWith("<Appearance")&&y(),!a.startsWith("</Shape"));){if(a.startsWith("<Sphere")&&(x=l("radius"),b=-1),a.startsWith("<Cylinder")&&(x=l("radius"),b=l("height")),a.startsWith("<IndexedFaceSet")&&(b=-2,A=l("coordIndex")),a.startsWith("<IndexedTriangleSet")&&(b=-7,A=l("index")),a.startsWith("<IndexedTriangleStripSet")&&(b=-3,A=l("index")),a.startsWith("<Coordinate")){S=l("point");const C=S.length%3;C!==0&&(S=S.slice(0,-C))}a.startsWith("<Color")&&(f=l("color")),a.startsWith("<Box")&&(b=-4,ht.warn("Unsupported x3d shape: Box")),a.startsWith("<Cone")&&(b=-5,ht.warn("Unsupported x3d shape: Cone")),a.startsWith("<ElevationGrid")&&(b=-6,ht.warn("Unsupported x3d shape: ElevationGrid"))}if(!(b<-3&&b!==-7))if(b<-1){if(A.length<1||S.length<3||S.length===void 0){ht.warn("Indexed mesh must specify indices and points");break}const C=Math.floor(c.length/3);let _=2;if(b===-7)u=[...u,...A];else if(b===-2){let E=0;for(;_<A.length;)A[_]>=0?(u.push(A[E]+C),u.push(A[_-1]+C),u.push(A[_-0]+C),_+=1):(_+=3,E=_-2)}else for(;_<A.length;)A[_]>=0?(u.push(A[_-2]+C),u.push(A[_-1]+C),u.push(A[_-0]+C),_+=1):_+=3;c=[...c,...S];const M=Math.floor(S.length/3),T=Array(M).fill(m).flat();if(f.length===M*3){let E=0,I=0;for(let L=0;L<M;L++){for(let F=0;F<3;F++)T[I]=Math.round(f[E]*255),E++,I++;I++}}d=[...d,...T]}else if(b<0)Mm.makeColoredSphere(c,u,d,x,h,m);else{const C=Zi();nct(C,p[3],[p[0],p[1],p[2]]);const _=Jr(0,-b*.5,0,1),M=Jr(0,+b*.5,0,1);Sa(_,_,C),Sa(M,M,C),sX(_,_,h),sX(M,M,h);const T=bn(_[0],_[1],_[2]),E=bn(M[0],M[1],M[2]);Mm.makeColoredCylinder(c,u,d,T,E,x,m)}}return{positions:Float32Array.from(c),indices:Uint32Array.from(u),rgba255:Uint8Array.from(d)}}static async readGII(e,t=0){let i=e.byteLength;if(i<20)throw new Error("File too small to be GII: bytes = "+i);let r=new TextDecoder("ascii").decode(e);if(r[0].charCodeAt(0)===31){const I=await Bn.decompress(new Uint8Array(e));e=I.buffer,r=new TextDecoder("ascii").decode(I.buffer)}let s=0;function a(){let I=!0,L=s;for(;I;){for(;s<i&&r[s]!=="<";)s++;for(L=s;s<i&&r[s]!==">";)s++;if(I=r[s-1]==="/",L+1<i&&r[L+1]==="/"&&(s+=1,I=!0),s>=i)break}const F=new TextDecoder().decode(e.slice(L+1,s)).trim(),B=F.split(" ")[0].trim(),P=s;let z=s,O=s;if(r[L+1]!=="?"&&r[L+1]!=="!"){const N="</"+B+">";z=r.indexOf(N,P),O=z+N.length-1}return{name:F,startPos:L,contentStartPos:P,contentEndPos:z,endPos:O}}let o=a();if(!o.name.startsWith("?xml"))throw new Error("readGII: Invalid XML file");for(;!o.name.startsWith("GIFTI")&&o.endPos<i;)o=a();if(!o.name.startsWith("GIFTI")||o.contentStartPos===o.contentEndPos)throw new Error("readGII: XML file does not include GIFTI tag");i=o.contentEndPos;let l=new Float32Array,c=new Uint32Array,u=new Float32Array,d="",f=!1,h=!1,p=!1,m=!1,v=[1,1,1];const g=[0,0,0];let y=0,x=!1,b=!1,A=0,S=!1;o.endPos=o.contentStartPos;let C="";function _(I,L=!1){const F=C.indexOf(I);if(F<0)return 1;const B=C.indexOf('"',F)+1,P=C.indexOf('"',B),z=C.slice(B,P);return L?parseFloat(z):parseInt(z)}function M(I){const L=C.indexOf(I);if(L<0)return"";const F=L+I.length,B=C.indexOf("]",F);return C.slice(F,B)}const T={R:[],G:[],B:[],A:[],I:[],labels:[]};for(;o.endPos<i&&o.name.length>1;){if(o=a(),o.name.startsWith("Label Key")&&(C=o.name,T.I.push(_("Key=")),T.R.push(Math.round(255*_("Red=",!0))),T.G.push(Math.round(255*_("Green=",!0))),T.B.push(Math.round(255*_("Blue=",!0))),T.A.push(Math.round(255*_("Alpha",!0))),C=new TextDecoder().decode(e.slice(o.contentStartPos+1,o.contentEndPos)).trim(),T.labels.push(M("<![CDATA["))),o.name.trim()==="Data"){if(p)continue;C=new TextDecoder().decode(e.slice(o.contentStartPos+1,o.contentEndPos)).trim();let I;if(b){const L=v[0]*v[1]*v[2],F=C.split(/\s+/);if(L!==F.length)throw new Error("Unable to parse ASCII GIfTI");if(y===2&&(y=8),y===32&&(y=16),y===8){I=new Int32Array(L);for(let B=0;B<L;B++)I[B]=parseInt(F[B])}if(y===16){I=new Float32Array(L);for(let B=0;B<L;B++)I[B]=parseFloat(F[B])}}else if(typeof Buffer>"u"){let L=function(F){const B=atob(F),P=B.length,z=new Uint8Array(P);for(let O=0;O<P;O++)z[O]=B.charCodeAt(O);return z};if(x){const F=L(C.slice());I=await Bn.decompress(new Uint8Array(F))}else I=L(C.slice())}else if(x){const L=Buffer.from(C.slice(),"base64");I=await Bn.decompress(new Uint8Array(L))}else I=Buffer.from(C.slice(),"base64");if(h){if(y!==16&&ht.warn("expect positions as FLOAT32"),l=new Float32Array(I.buffer),m){const L=l.slice(),F=L.length/3;let B=0;for(let P=0;P<F;P++)for(let z=0;z<3;z++)l[B]=L[z*F+P],B++}}else if(f){if(y!==8&&ht.warn("expect indices as INT32"),c=new Uint32Array(I.buffer),m){const L=c.slice(),F=L.length/3;let B=0;for(let P=0;P<F;P++)for(let z=0;z<3;z++)c[B]=L[z*F+P],B++}}else{let L=function(B,P){const z=B.length,O=new Float32Array(z+P.length);return O.set(B),O.set(P,z),O};A=v[0]*v[1]*v[2],t!==0&&A%t!==0&&ht.warn("Number of vertices in scalar overlay ("+A+") does not match mesh ("+t+")");let F;if(y===2){const B=new Uint8Array(I.buffer);F=Float32Array.from(B)}else if(y===8){const B=new Int32Array(I.buffer);F=Float32Array.from(B)}else if(y===16)F=new Float32Array(I.buffer);else if(y===32){const B=new Float64Array(I.buffer);F=Float32Array.from(B)}else throw new Error(`Invalid dataType: ${y}`);u=L(u,F)}continue}if(o.name.trim()==="DataSpace"&&(C=new TextDecoder().decode(e.slice(o.contentStartPos+1,o.contentEndPos)).trim(),C.includes("NIFTI_XFORM_SCANNER_ANAT")&&(S=!0)),o.name.trim()==="MD"&&(C=new TextDecoder().decode(e.slice(o.contentStartPos+1,o.contentEndPos)).trim(),C.includes("AnatomicalStructurePrimary")&&C.includes("CDATA[")&&(d=M("<Value><![CDATA[").toUpperCase()),C.includes("VolGeom")&&C.includes("CDATA["))){let I=-1;if(C.includes("VolGeomC_R")&&(I=0),C.includes("VolGeomC_A")&&(I=1),C.includes("VolGeomC_S")&&(I=2),I<0)continue;g[I]=parseFloat(M("<Value><![CDATA["))}o.name.startsWith("DataArray")&&(C=o.name,v=[1,1,1],x=C.includes('Encoding="GZipBase64Binary"'),b=C.includes('Encoding="ASCII"'),f=C.includes('Intent="NIFTI_INTENT_TRIANGLE"'),h=C.includes('Intent="NIFTI_INTENT_POINTSET"'),p=C.includes('Intent="NIFTI_INTENT_VECTOR"'),m=C.includes('ArrayIndexingOrder="ColumnMajorOrder"'),C.includes('DataType="NIFTI_TYPE_UINT8"')&&(y=2),C.includes('DataType="NIFTI_TYPE_INT32"')&&(y=8),C.includes('DataType="NIFTI_TYPE_FLOAT32"')&&(y=16),C.includes('DataType="NIFTI_TYPE_FLOAT64"')&&(y=32),v[0]=_("Dim0="),v[1]=_("Dim1="),v[2]=_("Dim2="))}let E;if(T.I.length>1&&(E=Vr.makeLabelLut(T)),t>0)return{scalars:u,colormapLabel:E,anatomicalStructurePrimary:d};if(l.length>2&&!S&&(g[0]!==0||g[1]!==0||g[2]!==0)){A=Math.floor(l.length/3);let I=0;for(let L=0;L<A;L++)l[I]+=g[0],I++,l[I]+=g[1],I++,l[I]+=g[2],I++}return{positions:l,indices:c,scalars:u,colormapLabel:E,anatomicalStructurePrimary:d}}},cft=()=>{const n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256},Boe=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.NII=1]="NII",n[n.DCM=2]="DCM",n[n.DCM_MANIFEST=3]="DCM_MANIFEST",n[n.MIH=4]="MIH",n[n.MIF=5]="MIF",n[n.NHDR=6]="NHDR",n[n.NRRD=7]="NRRD",n[n.MHD=8]="MHD",n[n.MHA=9]="MHA",n[n.MGH=10]="MGH",n[n.MGZ=11]="MGZ",n[n.V=12]="V",n[n.V16=13]="V16",n[n.VMR=14]="VMR",n[n.HEAD=15]="HEAD",n[n.DCM_FOLDER=16]="DCM_FOLDER",n[n.SRC=17]="SRC",n[n.FIB=18]="FIB",n[n.BMP=19]="BMP",n))(Boe||{}),dr=Object.freeze({...Boe,parse:n=>{let e=0;switch(n.toUpperCase()){case"":case"DCM":e=2;break;case"TXT":e=3;break;case"FIB":e=18;break;case"NII":e=1;break;case"MIH":e=4;break;case"MIF":e=5;break;case"NHDR":e=6;break;case"NRRD":e=7;break;case"MHD":e=8;break;case"MHA":e=9;break;case"MGH":e=10;break;case"MGZ":e=11;break;case"SRC":e=17;break;case"V":e=12;break;case"V16":e=13;break;case"VMR":e=14;break;case"HEAD":e=15;break;case"PNG":case"BMP":case"GIF":case"JPG":case"JPEG":e=19;break}return e}}),Z_=(n,e="",t="",i="gray",r=1,s=NaN,a=NaN,o=!0,l=.02,c=!1,u=!1,d="",f=0,h=dr.UNKNOWN,p=NaN,m=NaN,v=!0,g=!1,y=null)=>({url:n,urlImageData:e,name:t,colormap:i,colorMap:i,opacity:r,cal_min:s,cal_max:a,trustCalMinMax:o,percentileFrac:l,ignoreZeroVoxels:c,useQFormNotSForm:u,colormapNegative:d,imageType:h,cal_minNeg:p,cal_maxNeg:m,colorbarVisible:v,frame4D:f,alphaThreshold:g,colormapLabel:y});function xX(n,e=80){n=n.replace(/[`$]/g,"");const t=[],i=Math.min(e,n.length);for(let r=0;r<i;r++){const s=n.charCodeAt(r);t.push(s&255)}return t}function F3(n,e=!1,t=!1){let s=!0;t&&(s=n.littleEndian);const a=new Uint8Array(348),o=new DataView(a.buffer);o.setInt32(0,348,s),o.setUint8(38,114),o.setUint8(39,n.dim_info);for(let c=0;c<8;c++)o.setUint16(40+2*c,n.dims[c],s);o.setFloat32(56,n.intent_p1,s),o.setFloat32(60,n.intent_p2,s),o.setFloat32(64,n.intent_p3,s),o.setInt16(68,n.intent_code,s),e?(o.setInt16(70,2,s),o.setInt16(72,8,s)):(o.setInt16(70,n.datatypeCode,s),o.setInt16(72,n.numBitsPerVoxel,s)),o.setInt16(74,n.slice_start,s);for(let c=0;c<8;c++)o.setFloat32(76+4*c,n.pixDims[c],s);e?(o.setFloat32(108,352,s),o.setFloat32(112,1,s),o.setFloat32(116,0,s)):(o.setFloat32(108,352,s),o.setFloat32(112,n.scl_slope,s),o.setFloat32(116,n.scl_inter,s)),o.setInt16(120,n.slice_end,s),o.setUint8(122,n.slice_code),n.xyzt_units===0?o.setUint8(123,10):o.setUint8(123,n.xyzt_units),e?(o.setFloat32(124,0,s),o.setFloat32(128,0,s)):(o.setFloat32(124,n.cal_max,s),o.setFloat32(128,n.cal_min,s)),o.setFloat32(132,n.slice_duration,s),o.setFloat32(136,n.toffset,s),a.set(xX(n.description),148),a.set(xX(n.aux_file),228),o.setInt16(252,n.qform_code,s),n.sform_code<1||n.sform_code<1?o.setInt16(254,1,s):o.setInt16(254,n.sform_code,s),o.setFloat32(256,n.quatern_b,s),o.setFloat32(260,n.quatern_c,s),o.setFloat32(264,n.quatern_d,s),o.setFloat32(268,n.qoffset_x,s),o.setFloat32(272,n.qoffset_y,s),o.setFloat32(276,n.qoffset_z,s);const l=n.affine.flat();for(let c=0;c<12;c++)o.setFloat32(280+4*c,l[c],s);return o.setInt32(344,3222382,!0),a}function uft(n,e=!0){const t=Math.round(n.length/3),i=bn(0,0,0),r=Zr(),s=Zr();let a=0,o=1;e&&(o=2);for(let d=0;d<o;d++){a=0;for(let h=0;h<t;h++){const p=bn(n[h*3],n[h*3+1],n[h*3+2]);h===0&&(iX(r,p),iX(s,p)),LB(r,r,p),kB(s,s,p),os(p,p,i);const m=aA(p);a=Math.max(a,m)}if(d+1>=o)break;let f=!0;for(let h=0;h<3;++h)r[h]>i[h]&&(f=!1),s[h]<i[h]&&(f=!1);if(f)break;lct(i,r,s,.5),ht.debug("origin moved inside volume: ",i)}const l=[r[0],r[1],r[2]],c=[s[0],s[1],s[2]];return{min:l,max:c,furthestVertexFromOrigin:a,origin:i}}function AX(n){const e=[!1,!1,!1,!1],t=[!1,!1,!1,!1];for(let i=0;i<4;i++)for(let r=0;r<4;r++)if(isNaN(n[i][r]))return!1;for(let i=0;i<3;i++)for(let r=0;r<3;r++)n[i][r]!==0&&(e[i]=!0,t[r]=!0);for(let i=0;i<3;i++)if(!e[i]||!t[i])return!1;return!0}async function B3(n){const e=n.getReader(),{done:t,value:i}=await e.read();if(t)return e.releaseLock(),new ReadableStream({start(a){a.close()}});if(!i||i.length<2)return e.releaseLock(),new ReadableStream({start(a){i&&a.enqueue(i),a.close()}});const r=i[0]===31&&i[1]===139,s=new ReadableStream({async start(a){try{for(a.enqueue(i);;){const{done:o,value:l}=await e.read();if(o){a.close(),e.releaseLock();break}a.enqueue(l)}}catch(o){a.error(o),e.releaseLock()}}});return r?s.pipeThrough(new DecompressionStream("gzip")):s}var ro=class J_{constructor(e=null,t="",i="gray",r=1,s=null,a=NaN,o=NaN,l=!0,c=.02,u=!1,d=!1,f="",h=0,p=dr.UNKNOWN,m=NaN,v=NaN,g=!0,y=null,x=0){Ve(this,"name"),Ve(this,"id"),Ve(this,"url"),Ve(this,"headers"),Ve(this,"_colormap"),Ve(this,"_opacity"),Ve(this,"percentileFrac"),Ve(this,"ignoreZeroVoxels"),Ve(this,"trustCalMinMax"),Ve(this,"colormapNegative"),Ve(this,"colormapLabel"),Ve(this,"colormapInvert"),Ve(this,"nFrame4D"),Ve(this,"frame4D"),Ve(this,"nTotalFrame4D"),Ve(this,"cal_minNeg"),Ve(this,"cal_maxNeg"),Ve(this,"colorbarVisible",!0),Ve(this,"modulationImage",null),Ve(this,"modulateAlpha",0),Ve(this,"series",[]),Ve(this,"nVox3D"),Ve(this,"oblique_angle"),Ve(this,"maxShearDeg"),Ve(this,"useQFormNotSForm"),Ve(this,"colormapType"),Ve(this,"pixDims"),Ve(this,"matRAS"),Ve(this,"pixDimsRAS"),Ve(this,"obliqueRAS"),Ve(this,"dimsRAS"),Ve(this,"permRAS"),Ve(this,"img2RASstep"),Ve(this,"img2RASstart"),Ve(this,"toRAS"),Ve(this,"toRASvox"),Ve(this,"frac2mm"),Ve(this,"frac2mmOrtho"),Ve(this,"extentsMinOrtho"),Ve(this,"extentsMaxOrtho"),Ve(this,"mm2ortho"),Ve(this,"hdr",null),Ve(this,"imageType"),Ve(this,"img"),Ve(this,"imaginary"),Ve(this,"v1"),Ve(this,"fileObject"),Ve(this,"dims"),Ve(this,"onColormapChange",()=>{}),Ve(this,"onOpacityChange",()=>{}),Ve(this,"mm000"),Ve(this,"mm100"),Ve(this,"mm010"),Ve(this,"mm001"),Ve(this,"cal_min"),Ve(this,"cal_max"),Ve(this,"robust_min"),Ve(this,"robust_max"),Ve(this,"global_min"),Ve(this,"global_max"),Ve(this,"urlImgData"),Ve(this,"isManifest"),Ve(this,"limitFrames4D"),this.init(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v,g,y,x)}init(e=null,t="",i="gray",r=1,s=null,a=NaN,o=NaN,l=!0,c=.02,u=!1,d=!1,f="",h=0,p=dr.UNKNOWN,m=NaN,v=NaN,g=!0,y=null,x=0,b=null){if(this.name=t,this.imageType=p,this.id=rL(),this._colormap=i,this._opacity=r>1?1:r,this.percentileFrac=c,this.ignoreZeroVoxels=u,this.trustCalMinMax=l,this.colormapNegative=f,this.colormapLabel=y,this.frame4D=h,this.cal_minNeg=m,this.cal_maxNeg=v,this.colorbarVisible=g,this.colormapType=x,this.useQFormNotSForm=d,!e)return;if(this.hdr&&typeof this.hdr.magic=="number"&&(this.hdr.magic="n+1"),this.nFrame4D=1,this.hdr)for(let _=4;_<7;_++)this.hdr.dims[_]>1&&(this.nFrame4D*=this.hdr.dims[_]);if(this.frame4D=Math.min(this.frame4D,this.nFrame4D-1),this.nTotalFrame4D=this.nFrame4D,!this.hdr||!b)return;this.nVox3D=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const A=this.nVox3D*(this.hdr.numBitsPerVoxel/8),S=b.byteLength/A;S!==this.nFrame4D&&(S>0&&S*A===b.byteLength?ht.debug("Loading the first "+S+" of "+this.nFrame4D+" volumes"):ht.warn("This header does not match voxel data",this.hdr,b.byteLength),this.nFrame4D=S),(this.hdr.intent_code===1007||this.hdr.intent_code===2003)&&this.nFrame4D===3&&this.hdr.datatypeCode===16&&(b=this.float32V1asRGBA(new Float32Array(b))),(this.hdr.pixDims[1]===0||this.hdr.pixDims[2]===0||this.hdr.pixDims[3]===0)&&ht.error("pixDims not plausible",this.hdr),(isNaN(this.hdr.scl_slope)||this.hdr.scl_slope===0)&&(this.hdr.scl_slope=1),isNaN(this.hdr.scl_inter)&&(this.hdr.scl_inter=0);let C=AX(this.hdr.affine);if(d||!C||this.hdr.qform_code>this.hdr.sform_code){ht.debug("spatial transform based on QForm");const _=this.hdr.quatern_b,M=this.hdr.quatern_c,T=this.hdr.quatern_d,E=Math.sqrt(1-(Math.pow(_,2)+Math.pow(M,2)+Math.pow(T,2))),I=this.hdr.pixDims[0]===0?1:this.hdr.pixDims[0],L=[[E*E+_*_-M*M-T*T,2*_*M-2*E*T,2*_*T+2*E*M],[2*_*M+2*E*T,E*E+M*M-_*_-T*T,2*M*T-2*E*_],[2*_*T-2*E*M,2*M*T+2*E*_,E*E+T*T-M*M-_*_]],F=this.hdr.affine;for(let B=0;B<3;B+=1)for(let P=0;P<3;P+=1)F[B][P]=L[B][P]*this.hdr.pixDims[P+1],P===2&&(F[B][P]*=I);F[0][3]=this.hdr.qoffset_x,F[1][3]=this.hdr.qoffset_y,F[2][3]=this.hdr.qoffset_z,this.hdr.affine=F}if(C=AX(this.hdr.affine),!C){ht.debug("Defective NIfTI: spatial transform does not make sense");let _=this.hdr.pixDims[1],M=this.hdr.pixDims[2],T=this.hdr.pixDims[3];(isNaN(_)||_===0)&&(_=1),(isNaN(M)||M===0)&&(M=1),(isNaN(T)||T===0)&&(T=1),this.hdr.pixDims[1]=_,this.hdr.pixDims[2]=M,this.hdr.pixDims[3]=T;const E=[[_,0,0,0],[0,M,0,0],[0,0,T,0],[0,0,0,1]];this.hdr.affine=E}if(this.hdr.datatypeCode!==128&&this.hdr.datatypeCode!==2304&&this.hdr.littleEndian!==cft()&&this.hdr.numBitsPerVoxel>8){if(this.hdr.numBitsPerVoxel===16){const _=new Uint16Array(b);for(let M=0;M<_.length;M++){const T=_[M];_[M]=((T&255)<<8|T>>8&255)<<16>>16}}else if(this.hdr.numBitsPerVoxel===32){const _=new Uint32Array(b);for(let M=0;M<_.length;M++){const T=_[M];_[M]=(T&255)<<24|(T&65280)<<8|T>>8&65280|T>>24&255}}else if(this.hdr.numBitsPerVoxel===64){const _=this.hdr.numBitsPerVoxel/8,M=new Uint8Array(b);for(let T=0;T<M.length;T+=_){let E=_-1;for(let I=0;I<E;I++){const L=M[T+I];M[T+I]=M[T+E],M[T+E]=L,E--}}}}switch(this.hdr.datatypeCode){case 2:this.img=new Uint8Array(b);break;case 4:this.img=new Int16Array(b);break;case 16:this.img=new Float32Array(b);break;case 64:this.img=new Float64Array(b);break;case 128:this.img=new Uint8Array(b);break;case 512:this.img=new Uint16Array(b);break;case 2304:this.img=new Uint8Array(b);break;case 256:{const _=new Int8Array(b),M=_.length;this.img=new Int16Array(M);for(let T=0;T<M;T++)this.img[T]=_[T];this.hdr.datatypeCode=4,this.hdr.numBitsPerVoxel=16;break}case 1:{const _=this.hdr.dims[1]*this.hdr.dims[2]*Math.max(1,this.hdr.dims[3])*Math.max(1,this.hdr.dims[4]),M=new Uint8Array(b);this.img=new Uint8Array(_);const T=new Uint8Array(8);for(let I=0;I<8;I++)T[I]=Math.pow(2,I);let E=-1;for(let I=0;I<_;I++){const L=I%8;L===0&&E++,(M[E]&T[L])!==0&&(this.img[I]=1)}this.hdr.datatypeCode=2,this.hdr.numBitsPerVoxel=8;break}case 768:{const _=new Uint32Array(b),M=_.length;this.img=new Float64Array(M);for(let T=0;T<M-1;T++)this.img[T]=_[T];this.hdr.datatypeCode=64;break}case 8:{const _=new Int32Array(b),M=_.length;this.img=new Float64Array(M);for(let T=0;T<M-1;T++)this.img[T]=_[T];this.hdr.datatypeCode=64;break}case 1024:{const _=new BigInt64Array(b),M=_.length;this.img=new Float64Array(M);for(let T=0;T<M-1;T++)this.img[T]=Number(_[T]);this.hdr.datatypeCode=64;break}case 32:{const _=new Float32Array(b),M=Math.floor(_.length/2);this.imaginary=new Float32Array(M),this.img=new Float32Array(M);let T=0;for(let E=0;E<M-1;E++)this.img[E]=_[T],this.imaginary[E]=_[T+1],T+=2;this.hdr.datatypeCode=16;break}default:throw new Error("datatype "+this.hdr.datatypeCode+" not supported")}this.calculateRAS(),isNaN(a)||(this.hdr.cal_min=a),isNaN(o)||(this.hdr.cal_max=o),this.calMinMax()}static async new(e=null,t="",i="gray",r=1,s=null,a=NaN,o=NaN,l=!0,c=.02,u=!1,d=!1,f="",h=0,p=dr.UNKNOWN,m=NaN,v=NaN,g=!0,y=null,x=0){const b=new J_,A=/(?:\.([^.]+))?$/;let S=A.exec(t)[1]||"";S=S.toUpperCase(),S==="GZ"&&(S=A.exec(t.slice(0,-3))[1],S=S.toUpperCase());let C=null;switch(p===dr.UNKNOWN&&(p=dr.parse(S)),b.imageType=p,p){case dr.DCM_FOLDER:case dr.DCM_MANIFEST:case dr.DCM:return;case dr.FIB:[C,b.v1]=await b.readFIB(e);break;case dr.MIH:case dr.MIF:C=await b.readMIF(e,s);break;case dr.NHDR:case dr.NRRD:C=await b.readNRRD(e,s);break;case dr.MHD:case dr.MHA:C=await b.readMHA(e,s);break;case dr.MGH:case dr.MGZ:C=await b.readMGH(e);break;case dr.SRC:C=await b.readSRC(e);break;case dr.V:C=b.readECAT(e);break;case dr.V16:C=b.readV16(e);break;case dr.VMR:C=b.readVMR(e);break;case dr.HEAD:C=await b.readHEAD(e,s);break;case dr.BMP:C=await b.readBMP(e);break;case dr.NII:H4(e)&&(e=await uX(e)),b.hdr=await P3(e),b.hdr!==null&&(b.hdr.cal_min===0&&b.hdr.cal_max===255&&(b.hdr.cal_max=0),H4(e)?C=fX(b.hdr,await uX(e)):C=fX(b.hdr,e));break;default:throw new Error("Image type not supported")}return b.init(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v,g,y,x,C),b}computeObliqueAngle(e){const t=_s(e);ml(t,e);const i=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),r=Math.max(Math.max(Math.abs(t[0]),Math.abs(t[1])),Math.abs(t[2]))/i,s=Math.sqrt(t[4]*t[4]+t[5]*t[5]+t[6]*t[6]),a=Math.max(Math.max(Math.abs(t[4]),Math.abs(t[5])),Math.abs(t[6]))/s,o=Math.sqrt(t[8]*t[8]+t[9]*t[9]+t[10]*t[10]),l=Math.max(Math.max(Math.abs(t[8]),Math.abs(t[9])),Math.abs(t[10]))/o,c=Math.min(Math.min(r,a),l);let u=Math.abs(Math.acos(c)*180/3.141592653);return u>.01?ht.warn("Warning voxels not aligned with world space: "+u+` degrees from plumb.
`):u=0,u}float32V1asRGBA(e){e.length!==this.nVox3D*3&&ht.warn("float32V1asRGBA() expects "+this.nVox3D*3+"voxels, got ",+e.length);const t=e.slice();this.hdr.datatypeCode=2304,this.nFrame4D=1;for(let l=4;l<7;l++)this.hdr.dims[l]=1;this.hdr.dims[0]=3;const i=new Uint8Array(this.nVox3D*4);let r=1;for(let l=0;l<this.nVox3D*3;l++)isNaN(t[l])||(r=Math.max(r,Math.abs(t[l])));const s=255/r,a=this.nVox3D*2;let o=0;for(let l=0;l<this.nVox3D;l++){const c=t[l],u=t[l+this.nVox3D],d=t[l+a];i[o]=Math.abs(c*s),i[o+1]=Math.abs(u*s),i[o+2]=Math.abs(d*s);const f=+(c>0)*1,h=+(u>0)*2,p=+(d>0)*4;let m=248+f+h+p;Math.abs(c)+Math.abs(u)+Math.abs(d)<.1&&(m=0),i[o+3]=m,o+=4}return i}loadImgV1(e=!1,t=!1,i=!1){let r=this.v1;if(!r&&this.nFrame4D===3&&this.img.constructor===Float32Array&&(r=this.img.slice()),!r)return ht.warn("Image does not have V1 data"),!1;if(e)for(let s=0;s<this.nVox3D;s++)r[s]=-r[s];if(t)for(let s=this.nVox3D;s<2*this.nVox3D;s++)r[s]=-r[s];if(i)for(let s=2*this.nVox3D;s<3*this.nVox3D;s++)r[s]=-r[s];return this.img=this.float32V1asRGBA(r),!0}calculateOblique(){if(!this.matRAS)throw new Error("matRAS not defined");if(this.pixDimsRAS===void 0)throw new Error("pixDimsRAS not defined");if(!this.dimsRAS)throw new Error("dimsRAS not defined");this.oblique_angle=this.computeObliqueAngle(this.matRAS);const e=this.vox2mm([0,0,0],this.matRAS),t=this.vox2mm([1/this.pixDimsRAS[1],0,0],this.matRAS),i=this.vox2mm([0,1/this.pixDimsRAS[2],0],this.matRAS),r=this.vox2mm([0,0,1/this.pixDimsRAS[3]],this.matRAS);os(t,t,e),os(i,i,e),os(r,r,e);const s=pl(t[0],t[1],t[2],0,i[0],i[1],i[2],0,r[0],r[1],r[2],0,0,0,0,1);this.obliqueRAS=_s(s);const a=Math.abs(90-XI(t,i)*(180/Math.PI)),o=Math.abs(90-XI(t,r)*(180/Math.PI)),l=Math.abs(90-XI(i,r)*(180/Math.PI));this.maxShearDeg=Math.max(Math.max(a,o),l),this.maxShearDeg>.1&&ht.warn("Warning: voxels are rhomboidal, maximum shear is %f degrees.",this.maxShearDeg);const c=Jr(this.dimsRAS[1],this.dimsRAS[2],this.dimsRAS[3],1),u=_s(this.matRAS);ml(u,u);const d=Jr(-.5,-.5,-.5,0);mg(u,u,bn(d[0],d[1],d[2])),u[0]*=c[0],u[1]*=c[0],u[2]*=c[0],u[4]*=c[1],u[5]*=c[1],u[6]*=c[1],u[8]*=c[2],u[9]*=c[2],u[10]*=c[2],this.frac2mm=_s(u);const f=this.pixDimsRAS[1],h=this.pixDimsRAS[2],p=this.pixDimsRAS[3],m=_s(u);m[0]=f*c[0],m[1]=0,m[2]=0,m[4]=0,m[5]=h*c[1],m[6]=0,m[8]=0,m[9]=0,m[10]=p*c[2];const v=this.mm2vox([0,0,0],!0);m[12]=(-v[0]-.5)*f,m[13]=(-v[1]-.5)*h,m[14]=(-v[2]-.5)*p,this.frac2mmOrtho=_s(m),this.extentsMinOrtho=[m[12],m[13],m[14]],this.extentsMaxOrtho=[m[0]+m[12],m[5]+m[13],m[10]+m[14]],this.mm2ortho=Zi(),zo(this.mm2ortho,s)}THD_daxes_to_NIFTI(e,t,i){const r=this.hdr;if(r===null)throw new Error("HDR is not set");r.sform_code=2;const s="xxyyzzg";let a=-1,o=-1,l=-1;const c=["x","y","z"];c[0]=s[i[0]],c[1]=s[i[1]],c[2]=s[i[2]];const u=e.slice(0,3),d=t.slice(0,3);for(let f=0;f<3;f++)c[f]==="x"?a=f:c[f]==="y"?o=f:l=f;a<0||o<0||l<0||a===o||a===l||o===l||(r.pixDims[1]=Math.abs(u[0]),r.pixDims[2]=Math.abs(u[1]),r.pixDims[3]=Math.abs(u[2]),r.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],r.affine[0][a]=-u[a],r.affine[1][o]=-u[o],r.affine[2][l]=u[l],r.affine[0][3]=-d[a],r.affine[1][3]=-d[o],r.affine[2][3]=d[l])}SetPixDimFromSForm(){if(!this.hdr)throw new Error("hdr not defined");const e=this.hdr.affine,t=pl(e[0][0],e[0][1],e[0][2],e[0][3],e[1][0],e[1][1],e[1][2],e[1][3],e[2][0],e[2][1],e[2][2],e[2][3],e[3][0],e[3][1],e[3][2],e[3][3]),i=this.vox2mm([0,0,0],t),r=this.vox2mm([1,0,0],t);os(r,r,i);const s=this.vox2mm([0,1,0],t);os(s,s,i);const a=this.vox2mm([0,0,1],t);os(a,a,i),this.hdr.pixDims[1]=Mh(r),this.hdr.pixDims[2]=Mh(s),this.hdr.pixDims[3]=Mh(a)}readECAT(e){this.hdr=new Ei;const t=this.hdr;t.dims=[3,1,1,1,0,0,0,0],t.pixDims=[1,1,1,1,1,0,0,0];const i=new DataView(e),r=i.getInt32(0,!1),s=i.getInt16(50,!1);if(r!==1296127058||s<1||s>14)throw new Error("Not a valid ECAT file");let a=512,o=0;const l=[];let c=new Float32Array;for(;;){const u=i.getInt32(a,!1),d=i.getInt32(a+12,!1);if(u+d!==31)break;let f=a+20,h=0,p=0;for(;h<31&&(p=i.getInt32(f,!1),f+=16,p!==0);){h++;let m=p*512;const v=m-512,g=i.getUint16(v,!1);t.dims[1]=i.getUint16(v+4,!1),t.dims[2]=i.getUint16(v+6,!1),t.dims[3]=i.getUint16(v+8,!1);const y=i.getFloat32(v+26,!1);t.pixDims[1]=i.getFloat32(v+34,!1)*10,t.pixDims[2]=i.getFloat32(v+38,!1)*10,t.pixDims[3]=i.getFloat32(v+42,!1)*10,t.pixDims[4]=i.getUint32(v+46,!1)/1e3,l.push(t.pixDims[4]);const x=t.dims[1]*t.dims[2]*t.dims[3],b=new Float32Array(x);if(g===1)for(let S=0;S<x;S++)b[S]=i.getUint8(m)*y,m++;else if(g===6)for(let S=0;S<x;S++)b[S]=i.getUint16(m,!1)*y,m+=2;else if(g===7)for(let S=0;S<x;S++)b[S]=i.getUint32(m,!1)*y,m+=4;else ht.warn("Unknown ECAT data type "+g);const A=c.slice(0);c=new Float32Array(A.length+b.length),c.set(A),c.set(b,A.length),o++}if(p===0)break;a+=512}if(t.dims[4]=o,t.pixDims[4]=l[0],o>1){t.dims[0]=4;let u=!1;for(let d=0;d<o;d++)l[d]!==l[0]&&(u=!0);u&&ht.warn("Frame durations vary")}return t.sform_code=1,t.affine=[[-t.pixDims[1],0,0,(t.dims[1]-2)*.5*t.pixDims[1]],[0,-t.pixDims[2],0,(t.dims[2]-2)*.5*t.pixDims[2]],[0,0,-t.pixDims[3],(t.dims[3]-2)*.5*t.pixDims[3]],[0,0,0,1]],t.numBitsPerVoxel=32,t.datatypeCode=16,c}readV16(e){this.hdr=new Ei;const t=this.hdr;t.dims=[3,1,1,1,0,0,0,0],t.pixDims=[1,1,1,1,1,0,0,0];const i=new DataView(e);return t.dims[1]=i.getUint16(0,!0),t.dims[2]=i.getUint16(2,!0),t.dims[3]=i.getUint16(4,!0),2*t.dims[1]*t.dims[2]*t.dims[3]+6!==e.byteLength&&ht.warn("This does not look like a valid BrainVoyager V16 file"),t.numBitsPerVoxel=16,t.datatypeCode=512,ht.warn("Warning: V16 files have no spatial transforms"),t.affine=[[0,0,-t.pixDims[1],(t.dims[1]-2)*.5*t.pixDims[1]],[-t.pixDims[2],0,0,(t.dims[2]-2)*.5*t.pixDims[2]],[0,-t.pixDims[3],0,(t.dims[3]-2)*.5*t.pixDims[3]],[0,0,0,1]],t.littleEndian=!0,e.slice(6)}async imageDataFromArrayBuffer(e){return new Promise((t,i)=>{const r=new Blob([e]),s=URL.createObjectURL(r),a=new Image;a.crossOrigin="Anonymous",a.src=s,a.onload=()=>{URL.revokeObjectURL(s);const o=document.createElement("canvas");o.width=a.width,o.height=a.height;const l=o.getContext("2d");if(!l){i(new Error("Failed to get 2D context"));return}l.drawImage(a,0,0),t(l.getImageData(0,0,a.width,a.height))},a.onerror=o=>{URL.revokeObjectURL(s),i(o)}})}async readBMP(e){const t=await this.imageDataFromArrayBuffer(e),{width:i,height:r,data:s}=t;s.fill(255,0,Math.floor(s.length/2)),this.hdr=new Ei;const a=this.hdr;return a.dims=[3,i,r,1,0,0,0,0],a.pixDims=[1,1,1,1,1,0,0,0],a.affine=[[0,0,-a.pixDims[1],(a.dims[1]-2)*.5*a.pixDims[1]],[-a.pixDims[2],0,0,(a.dims[2]-2)*.5*a.pixDims[2]],[0,-a.pixDims[3],0,(a.dims[3]-2)*.5*a.pixDims[3]],[0,0,0,1]],a.numBitsPerVoxel=8,a.datatypeCode=2304,new Uint8Array(s)}readVMR(e){this.hdr=new Ei;const t=this.hdr;t.dims=[3,1,1,1,0,0,0,0],t.pixDims=[1,1,1,1,1,0,0,0];const i=new DataView(e),r=i.getUint16(0,!0);r!==4&&ht.warn("Not a valid version 4 VMR image"),t.dims[1]=i.getUint16(2,!0),t.dims[2]=i.getUint16(4,!0),t.dims[3]=i.getUint16(6,!0);const s=t.dims[1]*t.dims[2]*t.dims[3];if(r>=4){let a=8+s;const o=i.getUint32(a+88,!0);if(a=a+92,o>0){const l=e.byteLength;for(let c=0;c<o;c++){for(;a<l&&i.getUint8(a)!==0;)a++;for(a++,a+=4;a<l&&i.getUint8(a)!==0;)a++;a++;const u=i.getUint32(a,!0);a+=4;for(let d=0;d<u;d++)a+=4}}t.pixDims[1]=i.getFloat32(a+2,!0),t.pixDims[2]=i.getFloat32(a+6,!0),t.pixDims[3]=i.getFloat32(a+10,!0)}return ht.warn("Warning: VMR spatial transform not implemented"),t.affine=[[0,0,-t.pixDims[1],(t.dims[1]-2)*.5*t.pixDims[1]],[-t.pixDims[2],0,0,(t.dims[2]-2)*.5*t.pixDims[2]],[0,-t.pixDims[3],0,(t.dims[3]-2)*.5*t.pixDims[3]],[0,0,0,1]],ht.debug(t),t.numBitsPerVoxel=8,t.datatypeCode=2,e.slice(8,8+s)}async readMGH(e){this.hdr=new Ei;const t=this.hdr;t.littleEndian=!1,t.dims=[3,1,1,1,0,0,0,0],t.pixDims=[1,1,1,1,1,0,0,0];let i=e,r=new DataView(i);r.getUint8(0)===31&&r.getUint8(1)===139&&(i=await Bn.decompressToBuffer(new Uint8Array(e)),r=new DataView(i));const s=r.getInt32(0,!1),a=r.getInt32(4,!1),o=r.getInt32(8,!1),l=r.getInt32(12,!1),c=r.getInt32(16,!1),u=r.getInt32(20,!1),d=r.getFloat32(30,!1),f=r.getFloat32(34,!1),h=r.getFloat32(38,!1),p=r.getFloat32(42,!1),m=r.getFloat32(46,!1),v=r.getFloat32(50,!1),g=r.getFloat32(54,!1),y=r.getFloat32(58,!1),x=r.getFloat32(62,!1),b=r.getFloat32(66,!1),A=r.getFloat32(70,!1),S=r.getFloat32(74,!1),C=r.getFloat32(78,!1),_=r.getFloat32(82,!1),M=r.getFloat32(86,!1);(s!==1||u<0||u>4)&&ht.warn("Not a valid MGH file"),u===0?(t.numBitsPerVoxel=8,t.datatypeCode=2):u===4?(t.numBitsPerVoxel=16,t.datatypeCode=4):u===1?(t.numBitsPerVoxel=32,t.datatypeCode=8):u===3&&(t.numBitsPerVoxel=32,t.datatypeCode=16),t.dims[1]=a,t.dims[2]=o,t.dims[3]=l,t.dims[4]=c,c>1&&(t.dims[0]=4),t.pixDims[1]=d,t.pixDims[2]=f,t.pixDims[3]=h,t.vox_offset=284,t.sform_code=1;const T=pl(p*t.pixDims[1],g*t.pixDims[2],b*t.pixDims[3],0,m*t.pixDims[1],y*t.pixDims[2],A*t.pixDims[3],0,v*t.pixDims[1],x*t.pixDims[2],S*t.pixDims[3],0,0,0,0,1),E=[t.dims[1]/2,t.dims[2]/2,t.dims[3]/2,1],I=[0,0,0,0];for(let F=0;F<3;F++){I[F]=0;for(let B=0;B<3;B++)I[F]=I[F]+T[B+F*4]*E[B]}t.affine=[[T[0],T[1],T[2],C-I[0]],[T[4],T[5],T[6],_-I[1]],[T[8],T[9],T[10],M-I[2]],[0,0,0,1]];const L=t.dims[1]*t.dims[2]*t.dims[3]*t.dims[4]*(t.numBitsPerVoxel/8);return i.slice(t.vox_offset,t.vox_offset+L)}async readFIB(e){this.hdr=new Ei;const t=this.hdr;t.littleEndian=!1,t.dims=[3,1,1,1,0,0,0,0],t.pixDims=[1,1,1,1,1,0,0,0];const i=await Bn.readMatV4(e);if(!("dimension"in i)||!("dti_fa"in i))throw new Error("Not a valid DSIstudio FIB file");const r="index0"in i&&"index1"in i&&"index2"in i;t.numBitsPerVoxel=32,t.datatypeCode=16,t.dims[1]=i.dimension[0],t.dims[2]=i.dimension[1],t.dims[3]=i.dimension[2],t.dims[4]=1,t.pixDims[1]=i.voxel_size[0],t.pixDims[2]=i.voxel_size[1],t.pixDims[3]=i.voxel_size[2],t.sform_code=1;const s=(t.dims[1]-1)*.5*t.pixDims[1],a=(t.dims[2]-1)*.5*t.pixDims[2],o=(t.dims[3]-1)*.5*t.pixDims[3];t.affine=[[t.pixDims[1],0,0,-s],[0,-t.pixDims[2],0,a],[0,0,t.pixDims[2],-o],[0,0,0,1]],t.littleEndian=!0;const l=t.dims[1]*t.dims[2]*t.dims[3],c=l*Math.ceil(t.numBitsPerVoxel/8),u=c*t.dims[4],d=new Uint8Array(new ArrayBuffer(l*4*3));if(r){const m=t.dims[1]*t.dims[2]*t.dims[3],v=new Float32Array(m),g=new Float32Array(m),y=new Float32Array(m),x=i.index0,b=i.odf_vertices;for(let A=0;A<m;A++){const S=x[A]*3;v[A]=b[S+0],g[A]=b[S+1],y[A]=-b[S+2]}d.set(new Uint8Array(v.buffer,v.byteOffset,v.byteLength),0*c),d.set(new Uint8Array(g.buffer,g.byteOffset,g.byteLength),1*c),d.set(new Uint8Array(y.buffer,y.byteOffset,y.byteLength),2*c)}const f=new Uint8Array(new ArrayBuffer(u)),h=Float32Array.from(i.dti_fa),p=new Uint8Array(h.buffer,h.byteOffset,h.byteLength);return f.set(p,0),"report"in i&&(t.description=new TextDecoder().decode(i.report.subarray(0,Math.min(79,i.report.byteLength)))),[f.buffer,new Float32Array(d.buffer)]}async readSRC(e){this.hdr=new Ei;const t=this.hdr;t.littleEndian=!1,t.dims=[3,1,1,1,0,0,0,0],t.pixDims=[1,1,1,1,1,0,0,0];const i=await Bn.readMatV4(e);if(!("dimension"in i)||!("image0"in i))throw new Error("Not a valid DSIstudio SRC file");let r=0,s=0;for(const[h,p]of Object.entries(i))if(h.startsWith("image")){if(r===0?s=p.length:s!==p.length&&(s=-1),p.constructor!==Uint16Array)throw new Error("DSIstudio SRC files always use Uint16 datatype");r++}if(s<1||r<1)throw new Error("SRC file not valid DSI Studio data. The image(s) should have the same length");t.numBitsPerVoxel=16,t.datatypeCode=512,t.dims[1]=i.dimension[0],t.dims[2]=i.dimension[1],t.dims[3]=i.dimension[2],t.dims[4]=r,t.dims[4]>1&&(t.dims[0]=4),t.pixDims[1]=i.voxel_size[0],t.pixDims[2]=i.voxel_size[1],t.pixDims[3]=i.voxel_size[2],t.sform_code=1;const a=(t.dims[1]-1)*.5*t.pixDims[1],o=(t.dims[2]-1)*.5*t.pixDims[2],l=(t.dims[3]-1)*.5*t.pixDims[3];t.affine=[[t.pixDims[1],0,0,-a],[0,-t.pixDims[2],0,o],[0,0,t.pixDims[2],-l],[0,0,0,1]],t.littleEndian=!0;const c=t.dims[1]*t.dims[2]*t.dims[3]*(t.numBitsPerVoxel/8),u=c*t.dims[4],d=new Uint8Array(new ArrayBuffer(u));let f=0;for(let h=0;h<r;h++){const p=i[`image${h}`],m=new Uint8Array(p.buffer,p.byteOffset,p.byteLength);d.set(m,f),f+=c}return"report"in i&&(t.description=new TextDecoder().decode(i.report.subarray(0,Math.min(79,i.report.byteLength)))),d.buffer}async readHEAD(e,t){this.hdr=new Ei;const i=this.hdr;i.dims[0]=3,i.pixDims=[1,1,1,1,1,0,0,0];let r=[0,0,0],s=[0,0,0],a=[1,1,1];const l=new TextDecoder().decode(e).split(/\r?\n/),c=(e.byteLength+8)%16,u=e.byteLength+(16-c);ht.debug(e.byteLength,"len",u);const d=new Uint8Array(u);d.fill(0),d.set(new Uint8Array(e));const f=new Toe(u+8,42,d,!0);i.addExtension(f),i.extensionCode=42,i.extensionFlag[0]=1,i.extensionSize=u+8;const h=l.length;let p=0,m=!1;for(;p<h;){let g=l[p];if(p++,!g.startsWith("type"))continue;const y=g.includes("integer-attribute"),x=g.includes("float-attribute");if(g=l[p],p++,!g.startsWith("name"))continue;let b=g.split("= ");const A=b[1];g=l[p],p++,b=g.split("= ");let S=parseInt(b[1]);if(!(S<1)){if(g=l[p],p++,b=g.trim().split(/\s+/),x||y){for(;b.length<S;){g=l[p],p++;const C=g.trim().split(/\s+/);b.push(...C)}for(let C=0;C<S;C++)b[C]=parseFloat(b[C])}switch(A){case"BYTEORDER_STRING":b[0].includes("LSB_FIRST")?i.littleEndian=!0:b[0].includes("MSB_FIRST")&&(i.littleEndian=!1);break;case"BRICK_TYPES":{i.dims[4]=S;const C=parseInt(b[0]);C===0?(i.numBitsPerVoxel=8,i.datatypeCode=2):C===1?(i.numBitsPerVoxel=16,i.datatypeCode=4):C===3?(i.numBitsPerVoxel=32,i.datatypeCode=16):ht.warn("Unknown BRICK_TYPES ",C)}break;case"IJK_TO_DICOM_REAL":if(S<12)break;m=!0,i.sform_code=2,i.affine=[[-b[0],-b[1],-b[2],-b[3]],[-b[4],-b[5],-b[6],-b[7]],[b[8],b[9],b[10],b[11]],[0,0,0,1]];break;case"DATASET_DIMENSIONS":S=Math.max(S,3);for(let C=0;C<S;C++)i.dims[C+1]=b[C];break;case"ORIENT_SPECIFIC":r=b;break;case"ORIGIN":s=b;break;case"DELTA":a=b;break;case"TAXIS_FLOATS":i.pixDims[4]=b[0];break;default:ht.warn("Unknown:",A)}}}m?this.SetPixDimFromSForm():this.THD_daxes_to_NIFTI(a,s,r);const v=i.numBitsPerVoxel/8*i.dims[1]*i.dims[2]*i.dims[3]*i.dims[4];if(!t)throw new Error("pairedImgData not set");return t.byteLength<v?await Bn.decompressToBuffer(new Uint8Array(t)):t.slice(0)}async readMHA(e,t){const i=e.byteLength;if(i<20)throw new Error("File too small to be VTK: bytes = "+e.byteLength);const r=new Uint8Array(e);let s=0;function a(m){return m===10||m===13}function o(){for(;s<i&&a(r[s]);)s++;const m=s;for(;s<i&&!a(r[s]);)s++;return s-m<2?"":new TextDecoder().decode(e.slice(m,s))}let l=o();this.hdr=new Ei;const c=this.hdr;c.pixDims=[1,1,1,1,1,0,0,0],c.dims=[1,1,1,1,1,1,1,1],c.littleEndian=!0;let u=!1,d=!1;const f=h0(NaN,0,0,0,1,0,0,0,1),h=bn(0,0,0);for(;l!=="";){let m=l.split(" ");if(m.length>2&&(m=m.slice(2)),l.startsWith("BinaryDataByteOrderMSB")&&m[0].includes("False")&&(c.littleEndian=!0),l.startsWith("BinaryDataByteOrderMSB")&&m[0].includes("True")&&(c.littleEndian=!1),l.startsWith("CompressedData")&&m[0].includes("True")&&(u=!0),l.startsWith("TransformMatrix"))for(let v=0;v<9;v++)f[v]=parseFloat(m[v]);if(l.startsWith("Offset"))for(let v=0;v<Math.min(m.length,3);v++)h[v]=parseFloat(m[v]);if(l.startsWith("ElementSpacing"))for(let v=0;v<m.length;v++)c.pixDims[v+1]=parseFloat(m[v]);if(l.startsWith("DimSize")){c.dims[0]=m.length;for(let v=0;v<m.length;v++)c.dims[v+1]=parseInt(m[v])}if(l.startsWith("ElementType"))switch(m[0]){case"MET_UCHAR":c.numBitsPerVoxel=8,c.datatypeCode=2;break;case"MET_CHAR":c.numBitsPerVoxel=8,c.datatypeCode=256;break;case"MET_SHORT":c.numBitsPerVoxel=16,c.datatypeCode=4;break;case"MET_USHORT":c.numBitsPerVoxel=16,c.datatypeCode=512;break;case"MET_INT":c.numBitsPerVoxel=32,c.datatypeCode=8;break;case"MET_UINT":c.numBitsPerVoxel=32,c.datatypeCode=768;break;case"MET_FLOAT":c.numBitsPerVoxel=32,c.datatypeCode=16;break;case"MET_DOUBLE":c.numBitsPerVoxel=64,c.datatypeCode=64;break;default:throw new Error("Unsupported MHA data type: "+m[0])}if(l.startsWith("ObjectType")&&!m[0].includes("Image")&&ht.warn("Only able to read ObjectType = Image, not "+l),l.startsWith("ElementDataFile")){m[0]!=="LOCAL"&&(d=!0);break}l=o()}const p=h0(c.pixDims[1],0,0,0,c.pixDims[2],0,0,0,c.pixDims[3]);for(tX(f,f,p),c.affine=[[-f[0],-f[3],-f[6],-h[0]],[-f[1],-f[4],-f[7],-h[1]],[f[2],f[5],f[8],h[2]],[0,0,0,1]];r[s]===10;)s++;return c.vox_offset=s,d&&t?u?await Bn.decompressToBuffer(new Uint8Array(t.slice(0))):t.slice(0):u?await Bn.decompressToBuffer(new Uint8Array(e.slice(c.vox_offset))):e.slice(c.vox_offset)}async readMIF(e,t){this.hdr=new Ei;const i=this.hdr;i.pixDims=[1,1,1,1,1,0,0,0],i.dims=[1,1,1,1,1,1,1,1];let r=e.byteLength;if(r<20)throw new Error("File too small to be MIF: bytes = "+r);const s=new Uint8Array(e);s[0]===31&&s[1]===139&&(ht.debug("MIF with GZ decompression"),e=await Bn.decompressToBuffer(new Uint8Array(e)),r=e.byteLength);let a=0;function o(){for(;a<r&&s[a]===10;)a++;const I=a;for(;a<r&&s[a]!==10;)a++;return a++,a-I<1?"":new TextDecoder().decode(e.slice(I,a-1))}let l=o();if(!l.startsWith("mrtrix image"))throw new Error("Not a valid MIF file");const c=[];let u=!1,d=0,f=0,h=!1;for(l=o();a<r&&!l.startsWith("END");){let I=l.split(":");if(l=o(),I.length<2)break;const L=I[0];I=I[1].split(",");for(let F=0;F<I.length;F++)I[F]=I[F].trim();switch(L){case"dim":i.dims[0]=I.length;for(let F=0;F<I.length;F++)i.dims[F+1]=parseInt(I[F]);break;case"vox":for(let F=0;F<I.length;F++)i.pixDims[F+1]=parseFloat(I[F]),isNaN(i.pixDims[F+1])&&(i.pixDims[F+1]=0);break;case"layout":for(let F=0;F<I.length;F++)c.push(parseInt(I[F]));break;case"datatype":{const F=I[0];F.startsWith("Bit")?(u=!0,i.datatypeCode=2):F.startsWith("Int8")?i.datatypeCode=256:F.startsWith("UInt8")?i.datatypeCode=2:F.startsWith("Int16")?i.datatypeCode=4:F.startsWith("UInt16")?i.datatypeCode=512:F.startsWith("Int32")?i.datatypeCode=8:F.startsWith("UInt32")?i.datatypeCode=768:F.startsWith("Float32")?i.datatypeCode=16:F.startsWith("Float64")?i.datatypeCode=64:ht.warn("Unsupported datatype "+F),F.includes("8")?i.numBitsPerVoxel=8:F.includes("16")?i.numBitsPerVoxel=16:F.includes("32")?i.numBitsPerVoxel=32:F.includes("64")&&(i.numBitsPerVoxel=64),i.littleEndian=!0,F.endsWith("LE")&&(i.littleEndian=!0),F.endsWith("BE")&&(i.littleEndian=!1)}break;case"transform":if(d>2||I.length!==4)break;i.affine[d][0]=parseFloat(I[0]),i.affine[d][1]=parseFloat(I[1]),i.affine[d][2]=parseFloat(I[2]),i.affine[d][3]=parseFloat(I[3]),d++;break;case"comments":i.description=I[0].substring(0,Math.min(79,I[0].length));break;case"RepetitionTime":f=parseFloat(I[0]);break;case"file":h=!I[0].startsWith(". "),h||(I=I[0].split(" "),i.vox_offset=parseInt(I[1]));break}}const p=i.dims[0];p>5&&ht.warn("reader only designed for a maximum of 5 dimensions (XYZTD)");let m=1;for(let I=0;I<p;I++)m*=Math.max(i.dims[I+1],1);for(let I=0;I<3;I++)for(let L=0;L<3;L++)i.affine[I][L]*=i.pixDims[L+1];ht.debug("mif affine:"+i.affine[0]),f>0&&(i.pixDims[4]=f),h&&!t&&ht.warn("MIH header provided without paired image data");let v;if(t&&h)v=t.slice(0);else if(u){i.numBitsPerVoxel=8;const I=new Uint8Array(m),L=e.slice(i.vox_offset,i.vox_offset+Math.ceil(m/8)),F=new Uint8Array(L);let B=0;for(let P=0;P<m;P++){const z=P%8;I[P]=F[B]>>7-z&1,z===7&&B++}v=I.buffer}else v=e.slice(i.vox_offset,i.vox_offset+m*(i.numBitsPerVoxel/8));c.length!==i.dims[0]&&ht.warn("dims does not match layout");let g=1;const y=[1,1,1,1,1],x=[!1,!1,!1,!1,!1];for(let I=0;I<c.length;I++)for(let L=0;L<c.length;L++)Math.abs(c[L])===I&&(y[L]=g,(c[L]<0||Object.is(c[L],-0))&&(x[L]=!0),g*=i.dims[L+1]);let b=Bn.range(0,i.dims[1]-1,1);x[0]&&(b=Bn.range(i.dims[1]-1,0,-1));for(let I=0;I<i.dims[1];I++)b[I]*=y[0];let A=Bn.range(0,i.dims[2]-1,1);x[1]&&(A=Bn.range(i.dims[2]-1,0,-1));for(let I=0;I<i.dims[2];I++)A[I]*=y[1];let S=Bn.range(0,i.dims[3]-1,1);x[2]&&(S=Bn.range(i.dims[3]-1,0,-1));for(let I=0;I<i.dims[3];I++)S[I]*=y[2];let C=Bn.range(0,i.dims[4]-1,1);x[3]&&(C=Bn.range(i.dims[4]-1,0,-1));for(let I=0;I<i.dims[4];I++)C[I]*=y[3];let _=Bn.range(0,i.dims[5]-1,1);x[4]&&(_=Bn.range(i.dims[5]-1,0,-1));for(let I=0;I<i.dims[5];I++)_[I]*=y[4];let M=0,T,E;switch(i.datatypeCode){case 256:T=new Int8Array(v),E=new Int8Array(m);break;case 2:T=new Uint8Array(v),E=new Uint8Array(m);break;case 4:T=new Int16Array(v),E=new Int16Array(m);break;case 512:T=new Uint16Array(v),E=new Uint16Array(m);break;case 8:T=new Int32Array(v),E=new Int32Array(m);break;case 768:T=new Uint32Array(v),E=new Uint32Array(m);break;case 16:T=new Float32Array(v),E=new Float32Array(m);break;case 64:T=new Float64Array(v),E=new Float64Array(m);break;default:throw new Error("unknown datatypeCode")}for(let I=0;I<i.dims[5];I++)for(let L=0;L<i.dims[4];L++)for(let F=0;F<i.dims[3];F++)for(let B=0;B<i.dims[2];B++)for(let P=0;P<i.dims[1];P++)E[M]=T[b[P]+A[B]+S[F]+C[L]+_[I]],M++;return E}async readNRRD(e,t){this.hdr=new Ei;const i=this.hdr;i.pixDims=[1,1,1,1,1,0,0,0];const r=e.byteLength;let s=null;const a=new Uint8Array(e);for(let m=1;m<r;m++)if(a[m-1]===10&&a[m]===10){const v=e.slice(0,m-1);s=new TextDecoder().decode(v),i.vox_offset=m+1;break}if(s===null)throw new Error("could not extract txt");const o=s.split(`
`);o[0].startsWith("NRRD")||alert("Invalid NRRD image");const l=o.length;let c=!1,u=!1,d=!1;const f=h0(NaN,0,0,0,1,0,0,0,1),h=bn(0,0,0);let p=ect();for(let m=1;m<l;m++){let v=o[m];if(v[0]==="#")continue;v=v.toLowerCase();const g=v.split(":");if(g.length<2)continue;const y=g[0].trim();let x=g[1].trim();switch(x=x.replaceAll(")"," "),x=x.replaceAll("("," "),x=x.trim(),y){case"data file":d=!0;break;case"encoding":x.includes("raw")?c=!1:x.includes("gz")?c=!0:alert("Unsupported NRRD encoding");break;case"type":switch(x){case"uchar":case"unsigned char":case"uint8":case"uint8_t":i.numBitsPerVoxel=8,i.datatypeCode=2;break;case"signed char":case"int8":case"int8_t":i.numBitsPerVoxel=8,i.datatypeCode=256;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":i.numBitsPerVoxel=16,i.datatypeCode=4;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":i.numBitsPerVoxel=16,i.datatypeCode=512;break;case"int":case"signed int":case"int32":case"int32_t":i.numBitsPerVoxel=32,i.datatypeCode=8;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":i.numBitsPerVoxel=32,i.datatypeCode=768;break;case"float":i.numBitsPerVoxel=32,i.datatypeCode=16;break;case"double":i.numBitsPerVoxel=64,i.datatypeCode=64;break;default:throw new Error("Unsupported NRRD data type: "+x)}break;case"spacings":{const b=x.split(/[ ,]+/);for(let A=0;A<b.length;A++)i.pixDims[A+1]=parseFloat(b[A])}break;case"sizes":{const b=x.split(/[ ,]+/);i.dims[0]=b.length;for(let A=0;A<b.length;A++)i.dims[A+1]=parseInt(b[A])}break;case"endian":x.includes("little")?i.littleEndian=!0:x.includes("big")&&(i.littleEndian=!1);break;case"space directions":{const b=x.split(/[ ,]+/);if(b.length!==9)break;for(let A=0;A<9;A++)f[A]=parseFloat(b[A])}break;case"space origin":{const b=x.split(/[ ,]+/);if(b.length!==3)break;h[0]=parseFloat(b[0]),h[1]=parseFloat(b[1]),h[2]=parseFloat(b[2])}break;case"space units":x.includes("microns")&&(u=!0);break;case"space":x.includes("right-anterior-superior")||x.includes("ras")?p=h0(1,0,0,0,1,0,0,0,1):x.includes("left-anterior-superior")||x.includes("las")?p=h0(-1,0,0,0,1,0,0,0,1):x.includes("left-posterior-superior")||x.includes("lps")?p=h0(-1,0,0,0,-1,0,0,0,1):ht.warn("Unsupported NRRD space value:",x);break;default:ht.warn("Unknown:",y)}}if(!isNaN(f[0])){this.hdr.sform_code=2,u&&(rct(f,f,.001),h[0]*=.001,h[1]*=.001,h[2]*=.001),p[0]<0&&(h[0]=-h[0]),p[4]<0&&(h[1]=-h[1]),p[8]<0&&(h[2]=-h[2]),tX(f,p,f);const m=pl(f[0],f[3],f[6],h[0],f[1],f[4],f[7],h[1],f[2],f[5],f[8],h[2],0,0,0,1),v=this.vox2mm([0,0,0],m),g=this.vox2mm([1,0,0],m);os(g,g,v);const y=this.vox2mm([0,1,0],m);os(y,y,v);const x=this.vox2mm([0,0,1],m);os(x,x,v),i.pixDims[1]=Mh(g),i.pixDims[2]=Mh(y),i.pixDims[3]=Mh(x),i.affine=[[m[0],m[1],m[2],m[3]],[m[4],m[5],m[6],m[7]],[m[8],m[9],m[10],m[11]],[0,0,0,1]]}return d&&t?t.slice(0):(d&&ht.warn("Missing data: NRRD header describes detached data file but only one URL provided"),c?await Bn.decompressToBuffer(new Uint8Array(e.slice(i.vox_offset))):e.slice(i.vox_offset))}calculateRAS(){if(!this.hdr)throw new Error("hdr not set");const e=this.hdr.affine,t=this.hdr,i=h0(Math.abs(e[0][0]),Math.abs(e[0][1]),Math.abs(e[0][2]),Math.abs(e[1][0]),Math.abs(e[1][1]),Math.abs(e[1][2]),Math.abs(e[2][0]),Math.abs(e[2][1]),Math.abs(e[2][2])),r=[1,1,1];i[3]>i[0]&&(r[0]=2),i[6]>i[0]&&i[6]>i[3]&&(r[0]=3),r[1]=1,r[0]===1?i[4]>i[7]?r[1]=2:r[1]=3:r[0]===2?i[1]>i[7]?r[1]=1:r[1]=3:i[1]>i[4]?r[1]=1:r[1]=2,r[2]=6-r[1]-r[0];let s=[1,2,3];s[r[0]-1]=1,s[r[1]-1]=2,s[r[2]-1]=3;let a=pl(e[0][0],e[0][1],e[0][2],e[0][3],e[1][0],e[1][1],e[1][2],e[1][3],e[2][0],e[2][1],e[2][2],e[2][3],0,0,0,1);this.mm000=this.vox2mm([-.5,-.5,-.5],a),this.mm100=this.vox2mm([t.dims[1]-.5,-.5,-.5],a),this.mm010=this.vox2mm([-.5,t.dims[2]-.5,-.5],a),this.mm001=this.vox2mm([-.5,-.5,t.dims[3]-.5],a);const o=Zi();tct(o,a);for(let v=0;v<3;v++)for(let g=0;g<3;g++)o[v*4+g]=a[v*4+s[g]-1];const l=[0,0,0];o[0]<0&&(l[0]=1),o[5]<0&&(l[1]=1),o[10]<0&&(l[2]=1),this.dimsRAS=[t.dims[0],t.dims[s[0]],t.dims[s[1]],t.dims[s[2]]],this.pixDimsRAS=[t.pixDims[0],t.pixDims[s[0]],t.pixDims[s[1]],t.pixDims[s[2]]],this.permRAS=s.slice();for(let v=0;v<3;v++)l[v]===1&&(this.permRAS[v]=-this.permRAS[v]);if(this.arrayEquals(s,[1,2,3])&&this.arrayEquals(l,[0,0,0])){this.toRAS=Zi(),this.matRAS=_s(a),this.calculateOblique(),this.img2RASstep=[1,this.dimsRAS[1],this.dimsRAS[1]*this.dimsRAS[2]],this.img2RASstart=[0,0,0];return}voe(a),a[0+0*4]=1-l[0]*2,a[1+1*4]=1-l[1]*2,a[2+2*4]=1-l[2]*2,a[3+0*4]=(t.dims[s[0]]-1)*l[0],a[3+1*4]=(t.dims[s[1]]-1)*l[1],a[3+2*4]=(t.dims[s[2]]-1)*l[2];const c=Zi();zo(c,a),Ch(c,c,o),this.matRAS=_s(c),a=pl(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),a[s[0]-1+0*4]=-l[0]*2+1,a[s[1]-1+1*4]=-l[1]*2+1,a[s[2]-1+2*4]=-l[2]*2+1,a[3+0*4]=l[0],a[3+1*4]=l[1],a[3+2*4]=l[2],this.toRAS=_s(a),a[3]=0,a[7]=0,a[11]=0,a[12]=0,(this.permRAS[0]===-1||this.permRAS[1]===-1||this.permRAS[2]===-1)&&(a[12]=t.dims[1]-1),a[13]=0,(this.permRAS[0]===-2||this.permRAS[1]===-2||this.permRAS[2]===-2)&&(a[13]=t.dims[2]-1),a[14]=0,(this.permRAS[0]===-3||this.permRAS[1]===-3||this.permRAS[2]===-3)&&(a[14]=t.dims[3]-1),this.toRASvox=_s(a),ht.debug(this.hdr.dims),ht.debug(this.dimsRAS);const u=this.hdr;s=this.permRAS;const d=[Math.abs(s[0]),Math.abs(s[1]),Math.abs(s[2])],f=[u.dims[d[0]],u.dims[d[1]],u.dims[d[2]]],h=[1,u.dims[1],u.dims[1]*u.dims[2]],p=[h[d[0]-1],h[d[1]-1],h[d[2]-1]],m=[0,0,0];for(let v=0;v<3;v++)s[v]<0&&(m[v]=p[v]*(f[v]-1),p[v]=-p[v]);this.img2RASstep=p,this.img2RASstart=m,this.calculateOblique()}async hdr2RAS(e=1){if(!this.permRAS)throw new Error("permRAS undefined");if(!this.hdr)throw new Error("hdr undefined");const t=F3({...this.hdr},!1),i=await P3(t.buffer,!0);e===1?(i.dims[0]=3,i.dims[4]=1):e>1&&(i.dims[0]=4,i.dims[4]=e);const r=this.permRAS.slice();if(r[0]===1&&r[1]===2&&r[2]===3)return i;i.qform_code=0;for(let a=1;a<4;a++)i.dims[a]=this.dimsRAS[a];for(let a=0;a<this.pixDimsRAS.length;a++)i.pixDims[a]=this.pixDimsRAS[a];let s=0;for(let a=0;a<4;a++)for(let o=0;o<4;o++)i.affine[a][o]=this.matRAS[s],s++;return i}img2RAS(e=0){if(!this.permRAS)throw new Error("permRAS undefined");if(!this.img)throw new Error("img undefined");if(!this.hdr)throw new Error("hdr undefined");const t=this.permRAS.slice();if(t[0]===1&&t[1]===2&&t[2]===3)return this.img;const i=this.hdr,r=i.dims[1]*i.dims[2]*i.dims[3];let s=e*r;(s+r>this.img.length||s<0)&&(s=0,ht.warn(`img2RAS nVolume (${e}) out of bounds (${e}+1)×${r} > ${this.img.length}`));const a=this.img.slice(0,r),o=[Math.abs(t[0]),Math.abs(t[1]),Math.abs(t[2])],l=[i.dims[o[0]],i.dims[o[1]],i.dims[o[2]]],c=[1,i.dims[1],i.dims[1]*i.dims[2]],u=[c[o[0]-1],c[o[1]-1],c[o[2]-1]],d=[0,0,0];for(let h=0;h<3;h++)t[h]<0&&(d[h]=u[h]*(l[h]-1),u[h]=-u[h]);let f=0;for(let h=0;h<l[2];h++){const p=d[2]+h*u[2];for(let m=0;m<l[1];m++){const v=d[1]+m*u[1];for(let g=0;g<l[0];g++){const y=d[0]+g*u[0];a[f]=this.img[y+v+p+s],f++}}}return a}vox2mm(e,t){const i=_s(t);ml(i,i);const r=Jr(e[0],e[1],e[2],1);return Sa(r,r,i),bn(r[0],r[1],r[2])}mm2vox(e,t=!1){if(!this.matRAS)throw new Error("matRAS undefined");const i=_s(this.matRAS),r=_s(i);ml(r,i),zo(r,r);const s=Jr(e[0],e[1],e[2],1);Sa(s,s,r);const a=bn(s[0],s[1],s[2]);return t?a:[Math.round(a[0]),Math.round(a[1]),Math.round(a[2])]}arrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((i,r)=>i===t[r])}setColormap(e){this._colormap=e,this.calMinMax(),this.onColormapChange&&this.onColormapChange(this)}setColormapLabel(e){this.colormapLabel=Vr.makeLabelLut(e)}async setColormapLabelFromUrl(e){this.colormapLabel=await Vr.makeLabelLutFromUrl(e)}get colormap(){return this._colormap}get colorMap(){return this._colormap}set colormap(e){this.setColormap(e)}set colorMap(e){this.setColormap(e)}get opacity(){return this._opacity}set opacity(e){this._opacity=e,this.onOpacityChange&&this.onOpacityChange(this)}calMinMax(e=Number.POSITIVE_INFINITY,t=!0){if(!this.hdr)throw new Error("hdr undefined");if(!this.img)throw new Error("img undefined");let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=0,a=0,o=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const l=Math.floor(this.img.length/o);e>=l&&(e=this.frame4D),e=Math.min(e,l-1);const c=e*o;let u=[];if(t){const L=[Math.floor(.25*this.hdr.dims[1]),Math.floor(.25*this.hdr.dims[2]),Math.floor(.25*this.hdr.dims[3])],F=[this.hdr.dims[1]-2*L[0],this.hdr.dims[2]-2*L[1],this.hdr.dims[3]-2*L[2]],B=[F[0]+L[0],F[1]+L[1],F[2]+L[2]];o=F[0]*F[1]*F[2],u=new this.img.constructor(o);let P=-1,z=0;for(let O=0;O<this.hdr.dims[3];O++)for(let N=0;N<this.hdr.dims[2];N++)for(let H=0;H<this.hdr.dims[1];H++)P++,!(H<L[0]||N<L[1]||O<L[2])&&(H>=B[0]||N>=B[1]||O>=B[2]||(u[z]=this.img[P+c],z++))}else{u=new this.img.constructor(o);for(let I=0;I<o;I++)u[I]=this.img[I+c]}const d=u.constructor!==Float64Array&&u.constructor!==Float32Array&&this.ignoreZeroVoxels;if(d)for(let I=0;I<o;I++)i=Math.min(u[I],i),r=Math.max(u[I],r),u[I]===0&&s++;else for(let I=0;I<o;I++){if(isNaN(u[I])){a++;continue}u[I]===0&&(s++,this.ignoreZeroVoxels)||(i=Math.min(u[I],i),r=Math.max(u[I],r))}this.ignoreZeroVoxels&&i===r&&s>0&&(i=0);const f=this.intensityRaw2Scaled(i),h=this.intensityRaw2Scaled(r),p=Vr.colormapFromKey(this._colormap);let m=0,v=0;if(p.min!==void 0&&(m=p.min),p.max!==void 0&&(v=p.max),m===v&&this.trustCalMinMax&&isFinite(this.hdr.cal_min)&&isFinite(this.hdr.cal_max)&&this.hdr.cal_max>this.hdr.cal_min)return this.cal_min=this.hdr.cal_min,this.cal_max=this.hdr.cal_max,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=f,this.global_max=h,[this.hdr.cal_min,this.hdr.cal_max,this.hdr.cal_min,this.hdr.cal_max];if(m!==v)return this.cal_min=m,this.cal_max=v,this.robust_min=this.cal_min,this.robust_max=this.cal_max,[m,v,m,v];const g=100*s/(o-0);let y=!1;g>60&&!this.ignoreZeroVoxels&&(ht.warn(`${Math.round(g)}% of voxels are zero: ignoring zeros for cal_max`),y=!0,this.ignoreZeroVoxels=!0),this.ignoreZeroVoxels||(s=0),s+=a;const x=Math.round((o-0-s)*this.percentileFrac);if(x<1||i===r)return ht.debug("no variability in image intensity?"),this.cal_min=f,this.cal_max=h,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=f,this.global_max=h,[f,h,f,h];const b=1001,A=(b-1)/(r-i),S=new Array(b);for(let I=0;I<b;I++)S[I]=0;if(d)for(let I=0;I<o;I++)S[Math.round((u[I]-i)*A)]++;else if(this.ignoreZeroVoxels)for(let I=0;I<o;I++)u[I]!==0&&(isNaN(u[I])||S[Math.round((u[I]-i)*A)]++);else for(let I=0;I<o;I++)isNaN(u[I])||S[Math.round((u[I]-i)*A)]++;let C=0,_=0;for(;C<x;)C+=S[_],_++;_--,C=0;let M=b;for(;C<x;)M--,C+=S[M];if(_===M){let I=-1;for(;I!==0;)_>0&&(_--,S[_]>0&&(I=0)),I!==0&&M<b-1&&(M++,S[M]>0&&(I=0)),_===0&&M===b-1&&(I=0)}let T=this.intensityRaw2Scaled(_/A+i),E=this.intensityRaw2Scaled(M/A+i);return this.hdr.cal_min<this.hdr.cal_max&&this.hdr.cal_min>=f&&this.hdr.cal_max<=h&&(T=this.hdr.cal_min,E=this.hdr.cal_max),y&&(T=Math.min(T,0)),this.cal_min=T,this.cal_max=E,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=f,this.global_max=h,[T,E,f,h]}intensityRaw2Scaled(e){if(!this.hdr)throw new Error("hdr undefined");return this.hdr.scl_slope===0&&(this.hdr.scl_slope=1),e*this.hdr.scl_slope+this.hdr.scl_inter}intensityScaled2Raw(e){if(!this.hdr)throw new Error("hdr undefined");return this.hdr.scl_slope===0&&(this.hdr.scl_slope=1),(e-this.hdr.scl_inter)/this.hdr.scl_slope}async saveToUint8Array(e,t=null){if(!this.hdr)throw new Error("hdr undefined");if(!this.img)throw new Error("img undefined");const i=t!==null,r=F3(this.hdr,i),s=new Uint8Array(4);let a=new Uint8Array(this.img.buffer);i&&(a=new Uint8Array(t.buffer));const o=new Uint8Array(r.length+s.length+a.length);o.set(r),o.set(s,r.length),o.set(a,r.length+s.length);let l=null;return e.endsWith(".gz")?l=new Uint8Array(await Bn.compress(o,"gzip")):l=o,l}async saveToDisk(e="",t=null){const i=await this.saveToUint8Array(e,t);if(e==="")return ht.debug("saveToDisk: empty file name, returning data as Uint8Array rather than triggering download"),i;const r=new Blob([i.buffer],{type:"application/octet-stream"}),s=URL.createObjectURL(r),a=document.createElement("a");return a.setAttribute("href",s),a.setAttribute("download",e),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),i}static async fetchDicomData(e,t={}){if(e==="")throw Error("url must not be empty");let r=/^(?:[a-z+]+:)?\/\//i.test(e)?e:new URL(e,window.location.href);/(?:.([^.]+))?$/.exec(r.pathname)||(r=new URL("niivue-manifest.txt",e));let o=await fetch(r,{headers:t});if(!o.ok)throw Error(o.statusText);const c=(await o.text()).split(`
`),d=/(.*\/).*/.exec(r)[0],f=[];for(const h of c){const p=new URL(h,d);if(o=await fetch(p,{headers:t}),!o.ok)throw Error(o.statusText);const m=await o.arrayBuffer();f.push({name:h,data:m})}return f}static async fetchPartial(e,t,i={}){try{return await fetch(e,{headers:{range:`bytes=0-'${t}`,stream:"true",...i}})}catch(r){return ht.error(r),ht.error("fetchPartial failed, trying again without range header"),await fetch(e,{headers:i})}}static async loadFromUrl({url:e="",urlImgData:t="",headers:i={},name:r="",colormap:s="gray",opacity:a=1,cal_min:o=NaN,cal_max:l=NaN,trustCalMinMax:c=!0,percentileFrac:u=.02,ignoreZeroVoxels:d=!1,useQFormNotSForm:f=!1,colormapNegative:h="",frame4D:p=0,isManifest:m=!1,limitFrames4D:v=NaN,imageType:g=dr.UNKNOWN,colorbarVisible:y=!0,buffer:x=new ArrayBuffer(0)}={}){if(e==="")throw Error("url must not be empty");let b=null,A=null;if(e instanceof Uint8Array&&(e=e.buffer),x.byteLength>0&&(e=x),e instanceof ArrayBuffer)if(A=e,r!=="")e=r;else{const M=new Uint8Array(A);e=M[0]===31&&M[1]===139?"array.nii.gz":"array.nii"}if(!isNaN(v))try{const M=await fetch(e,{headers:i});if(!M.ok)throw new Error(M.statusText);if(!M.body)throw new Error("No readable stream available");const E=(await B3(M.body)).getReader(),I=[];let L=0;for(;L<352;){const{done:J,value:ue}=await E.read();if(J)break;I.push(ue),L+=ue.length}const F=new Uint8Array(L);let B=0;for(const J of I)F.set(J,B),B+=J.length;if(!(F[0]===92&&F[1]===1||F[1]===92&&F[0]===1))return E.releaseLock(),null;const z=await P3(F.buffer);if(!z)throw new Error("Could not read NIfTI header");const O=z.numBitsPerVoxel/8,N=[1,2,3].reduce((J,ue)=>J*(z.dims[ue]>1?z.dims[ue]:1),1),H=[4,5,6].reduce((J,ue)=>J*(z.dims[ue]>1?z.dims[ue]:1),1),q=Math.max(Math.min(v,H),1),te=z.vox_offset+q*N*O,Q=[...I];let ee=L;for(;ee<te;){const{done:J,value:ue}=await E.read();if(J)break;Q.push(ue),ee+=ue.length}E.releaseLock(),A=new ArrayBuffer(te);const de=new Uint8Array(A);B=0;for(const J of Q){const ue=Math.min(J.length,te-B);if(de.set(new Uint8Array(J.buffer,0,ue),B),B+=ue,B>=te)break}}catch(M){console.error("Error loading limited frames:",M),A=null}if(!A)if(m)A=await J_.fetchDicomData(e,i),g=dr.DCM_MANIFEST;else{const M=await fetch(e,{headers:i});if(!M.ok)throw Error(M.statusText);if(!M.body)throw new Error("No readable stream available");const T=await B3(M.body),E=[],I=T.getReader();for(;;){const{done:P,value:z}=await I.read();if(P)break;E.push(z)}const L=E.reduce((P,z)=>P+z.length,0);A=new ArrayBuffer(L);const F=new Uint8Array(A);let B=0;for(const P of E)F.set(P,B),B+=P.length}const S=/(?:\.([^.]+))?$/;let C="";r===""?C=S.exec(e)[1]:C=S.exec(r)[1],C.toUpperCase()==="HEAD"&&t===""&&(t=e.substring(0,e.lastIndexOf("HEAD"))+"BRIK");let _=null;if(t)try{let M=await fetch(t,{headers:i});if(M.status===404&&t.includes("BRIK")&&(M=await fetch(`${t}.gz`,{headers:i})),M.ok&&M.body){const T=await B3(M.body),E=[],I=T.getReader();for(;;){const{done:P,value:z}=await I.read();if(P)break;E.push(z)}const L=E.reduce((P,z)=>P+z.length,0);_=new ArrayBuffer(L);const F=new Uint8Array(_);let B=0;for(const P of E)F.set(P,B),B+=P.length}}catch(M){console.error("Error loading paired image data:",M)}if(!A)throw new Error("Unable to load buffer properly from volume");if(!r){let M;try{M=new URL(e).pathname.split("/")}catch{M=e.split("/")}r=M.slice(-1)[0],r.indexOf("?")>-1&&(r=r.slice(0,r.indexOf("?")))}return b=await this.new(A,r,s,a,_,o,l,c,u,d,f,h,p,g),b.url=e,b.colorbarVisible=y,b}static async readFileAsync(e,t=NaN){let i=e.stream();if(!isNaN(t)){let d=0;const f=new TransformStream({transform(h,p){if(d>=t){p.terminate();return}const m=t-d;h.length>m?(p.enqueue(h.slice(0,m)),p.terminate()):p.enqueue(h),d+=h.length}});i=i.pipeThrough(f)}const r=await B3(i),s=[],a=r.getReader();for(;;){const{done:d,value:f}=await a.read();if(d)break;s.push(f)}const o=s.reduce((d,f)=>d+f.length,0),l=new ArrayBuffer(o),c=new Uint8Array(l);let u=0;for(const d of s)c.set(d,u),u+=d.length;return l}static async loadFromFile({file:e,name:t="",colormap:i="gray",opacity:r=1,urlImgData:s=null,cal_min:a=NaN,cal_max:o=NaN,trustCalMinMax:l=!0,percentileFrac:c=.02,ignoreZeroVoxels:u=!1,useQFormNotSForm:d=!1,colormapNegative:f="",frame4D:h=0,limitFrames4D:p=NaN,imageType:m=dr.UNKNOWN}){let v=null,g=[];try{if(Array.isArray(e))g=await Promise.all(e.map(x=>this.readFileAsync(x)));else{if(isNaN(p))g=await this.readFileAsync(e);else{const x=await this.readFileAsync(e,512),b=new Uint8Array(x);if(!(b[0]===92&&b[1]===1||b[1]===92&&b[0]===1))g=await this.readFileAsync(e);else{const S=await P3(x);if(!S)throw new Error("could not read nifti header");const C=S.numBitsPerVoxel/8,_=[1,2,3].reduce((I,L)=>I*(S.dims[L]>1?S.dims[L]:1),1),M=[4,5,6].reduce((I,L)=>I*(S.dims[L]>1?S.dims[L]:1),1),T=Math.max(Math.min(p,M),1),E=S.vox_offset+T*_*C;g=await this.readFileAsync(e,E)}}t=e.name}let y=null;s&&(y=await this.readFileAsync(s)),v=await this.new(g,t,i,r,y,a,o,l,c,u,d,f,h,m),v.fileObject=e}catch(y){throw ht.error(y),new Error("could not build NVImage")}if(v===null)throw new Error("could not build NVImage");return v}static createNiftiArray(e=[256,256,256],t=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],r=2,s=new Uint8Array){const a=this.createNiftiHeader(e,t,i,r),o=F3(a,!1);if(s.length<1)return o;const l=new Uint8Array(4),c=new Uint8Array(s.buffer),u=new Uint8Array(o.length+l.length+c.length);return u.set(o),u.set(l,o.length),u.set(c,o.length+l.length),u}static createNiftiHeader(e=[256,256,256],t=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],r=2){const s=new Ei;s.littleEndian=!0,s.dims=[3,1,1,1,0,0,0,0],s.dims[0]=Math.max(3,e.length);for(let o=0;o<e.length;o++)s.dims[o+1]=e[o];s.pixDims=[1,1,1,1,1,0,0,0];for(let o=0;o<e.length;o++)s.pixDims[o+1]=t[o];if(i.length===16){let o=0;for(let l=0;l<4;l++)for(let c=0;c<4;c++)s.affine[l][c]=i[o],o++}let a=8;return r===256||r===2?a=8:r===512||r===4?a=16:r===16||r===768||r===8||r===2304?a=32:r===64?a=64:ht.warn("Unsupported NIfTI datatypeCode: "+r),s.datatypeCode=r,s.numBitsPerVoxel=a,s.scl_inter=0,s.scl_slope=0,s.sform_code=2,s.magic="n+1",s.vox_offset=352,s}getVolumeData(e=[-1,0,0],t=[0,0,0],i="same"){let r=new Uint8Array;if(Math.min(...e)<0||Math.min(...t)<0)return[r,[0,0,0]];const s=this.dimsRAS.slice(1,4);for(let f=0;f<3;f++)if(e[f]=Math.min(e[f],s[f]-1),t[f]=Math.min(t[f],s[f]-1),t[f]<e[f]){const h=t[f];t[f]=e[f],e[f]=h}const a=[t[0]-e[0]+1,t[1]-e[1]+1,t[2]-e[2]+1],o=a[0]*a[1]*a[2];let l=this.hdr.datatypeCode;if(i==="uint8"?l=2:(i==="float32"||i==="scaled"||i==="normalized"||i==="windowed")&&(l=16),l===2)r=new Uint8Array(o);else if(l===4)r=new Int16Array(o);else if(l===512)r=new Uint16Array(o);else if(l===16)r=new Float32Array(o);else if(l===64)r=new Float64Array(o);else return ht.error("getVolumeData unsupported datatype"),[r,[0,0,0]];const c=this.img2RASstep,u=this.img2RASstart;let d=0;for(let f=e[2];f<=t[2];f++){const h=u[2]+f*c[2];for(let p=e[1];p<=t[1];p++){const m=h+u[1]+p*c[1];for(let v=e[0];v<=t[0];v++){const g=u[0]+v*c[0];r[d++]=this.img[g+m]}}}if(i==="scaled"||i==="normalized"||i==="windowed")for(let f=0;f<r.length;f++)r[f]=r[f]*this.hdr.scl_slope+this.hdr.scl_inter;if(i==="normalized"||i==="windowed"){let f=this.cal_min,h=this.cal_max;i==="normalized"&&(f=this.global_min,h=this.global_max);const p=1/(h-f);for(let m=0;m<r.length;m++)r[m]=(r[m]-f)*p,r[m]=Math.max(Math.min(r[m],1),0)}return[r,a]}setVolumeData(e=[-1,0,0],t=[0,0,0],i=new Uint8Array){if(i.length<1||Math.min(...e)<0||Math.min(...t)<0)return;const r=this.dimsRAS.slice(1,4);for(let u=0;u<3;u++)if(e[u]=Math.min(e[u],r[u]-1),t[u]=Math.min(t[u],r[u]-1),t[u]<e[u]){const d=t[u];t[u]=e[u],e[u]=d}const s=[t[0]-e[0]+1,t[1]-e[1]+1,t[2]-e[2]+1],a=s[0]*s[1]*s[2];if(i.length<a){ht.error("setVolumeData image does not have enough voxels");return}const o=this.img2RASstep,l=this.img2RASstart;let c=0;for(let u=e[2];u<=t[2];u++){const d=l[2]+u*o[2];for(let f=e[1];f<=t[1];f++){const h=d+l[1]+f*o[1];for(let p=e[0];p<=t[0];p++){const m=l[0]+p*o[0];this.img[m+h]=i[c++]}}}}static async loadFromBase64({base64:e,name:t="",colormap:i="gray",opacity:r=1,cal_min:s=NaN,cal_max:a=NaN,trustCalMinMax:o=!0,percentileFrac:l=.02,ignoreZeroVoxels:c=!1,useQFormNotSForm:u=!1,colormapNegative:d="",frame4D:f=0,imageType:h=dr.UNKNOWN,cal_minNeg:p=NaN,cal_maxNeg:m=NaN,colorbarVisible:v=!0,colormapLabel:g=null}){function y(b){const A=window.atob(b),S=A.length,C=new Uint8Array(S);for(let _=0;_<S;_++)C[_]=A.charCodeAt(_);return C.buffer}let x=null;try{const b=y(e);x=await this.new(b,t,i,r,null,s,a,o,l,c,u,d,f,h,p,m,v,g)}catch(b){ht.debug(b)}if(x===null)throw new Error("could not load NVImage");return x}clone(){const e=new J_;return e.id=rL(),e.hdr=Object.assign({},this.hdr),e.img=this.img.slice(),e.calculateRAS(),e.calMinMax(),e}zeroImage(){this.img.fill(0)}getImageMetadata(){if(!this.hdr)throw new Error("hdr undefined");const e=this.id,t=this.hdr.datatypeCode,i=this.hdr.dims,r=i[1],s=i[2],a=i[3],o=Math.max(1,i[4]),l=this.hdr.pixDims,c=l[1],u=l[2],d=l[3],f=l[4],h=Math.floor(this.hdr.numBitsPerVoxel/8);return{id:e,datatypeCode:t,nx:r,ny:s,nz:a,nt:o,dx:c,dy:u,dz:d,dt:f,bpv:h}}static zerosLike(e,t="same"){const i=e.clone();return i.zeroImage(),t==="uint8"&&(i.img=Uint8Array.from(i.img),i.hdr.datatypeCode=2,i.hdr.numBitsPerVoxel=8),t==="float32"&&(i.img=Float32Array.from(i.img),i.hdr.datatypeCode=16,i.hdr.numBitsPerVoxel=32),i}getValue(e,t,i,r=0,s=!1){if(!this.hdr)throw new Error("hdr undefined");if(!this.img)throw new Error("img undefined");const a=this.hdr.dims[1],o=this.hdr.dims[2],l=this.hdr.dims[3],c=this.permRAS.slice();if(c[0]!==1||c[1]!==2||c[2]!==3){const h=Jr(e,t,i,1);Sa(h,h,this.toRASvox),e=h[0],t=h[1],i=h[2]}let u=e+t*a+i*a*o;if(this.hdr.datatypeCode===2304)return u*=4,Math.round(this.img[u]*.21+this.img[u+1]*.72+this.img[u+2]*.07);if(this.hdr.datatypeCode===128)return u*=3,Math.round(this.img[u]*.21+this.img[u+1]*.72+this.img[u+2]*.07);const d=r*a*o*l;let f=this.img[u+d];return s&&(f=this.imaginary[u+d]),this.hdr.scl_slope*f+this.hdr.scl_inter}toNiivueObject3D(e,t){const i=this.dimsRAS,r=this.matRAS,s=this.pixDimsRAS,a=-.5,o=-.5,l=-.5,c=i[1]-1+.5,u=i[2]-1+.5,d=i[3]-1+.5,f=this.vox2mm([a,o,l],r),h=this.vox2mm([a,u,l],r),p=this.vox2mm([a,o,d],r),m=this.vox2mm([a,u,d],r),v=this.vox2mm([c,o,l],r),g=this.vox2mm([c,u,l],r),y=this.vox2mm([c,o,d],r),x=this.vox2mm([c,u,d],r),b=[...p,0,0,1,...y,1,0,1,...x,1,1,1,...m,0,1,1,...f,0,0,0,...h,0,1,0,...g,1,1,0,...v,1,0,0],A=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,A);const S=[0,3,2,2,1,0,4,7,6,6,5,4,5,6,2,2,3,5,4,0,1,1,7,4,7,1,2,2,6,7,4,5,3,3,0,4];t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(S),t.STATIC_DRAW);const C=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,C),t.bufferData(t.ARRAY_BUFFER,new Float32Array(b),t.STATIC_DRAW);const _=t.createVertexArray();t.bindVertexArray(_),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,A),t.bindBuffer(t.ARRAY_BUFFER,C),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,3,t.FLOAT,!1,24,0),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,3,t.FLOAT,!1,24,12),t.bindVertexArray(null);const M=new Mm(e,C,t.TRIANGLES,S.length,A,_),T=uft([...p,...y,...x,...m,...f,...h,...g,...v]);return M.extentsMin=T.min.slice(),M.extentsMax=T.max.slice(),M.furthestVertexFromOrigin=T.furthestVertexFromOrigin,M.originNegate=Hb(T.origin),act(M.originNegate,M.originNegate),M.fieldOfViewDeObliqueMM=[i[1]*s[1],i[2]*s[2],i[3]*s[3]],M}applyOptionsUpdate(e){this.hdr.cal_min=e.cal_min,this.hdr.cal_max=e.cal_max,Object.assign(this,e)}getImageOptions(){return Z_("","",this.name,this._colormap,this.opacity,this.hdr.cal_min,this.hdr.cal_max,this.trustCalMinMax,this.percentileFrac,this.ignoreZeroVoxels,this.useQFormNotSForm,this.colormapNegative,this.frame4D,this.imageType,this.colormapType)}toUint8Array(e=null){const t=e!==null,i=F3({...this.hdr},t);let r=e;if(t){const l=this.permRAS;if(l[0]!==1||l[1]!==2||l[2]!==3){const c=this.hdr.dims,u=[0,0,0];for(let b=0;b<3;b++)for(let A=0;A<3;A++)Math.abs(l[b])-1===A&&(u[A]=b*Math.sign(l[b]));let d=1;const f=[1,1,1],h=[!1,!1,!1];for(let b=0;b<u.length;b++)for(let A=0;A<u.length;A++)Math.abs(u[A])===b&&(f[A]=d,(u[A]<0||Object.is(u[A],-0))&&(h[A]=!0),d*=c[A+1]);let p=Bn.range(0,c[1]-1,1);h[0]&&(p=Bn.range(c[1]-1,0,-1));for(let b=0;b<c[1];b++)p[b]*=f[0];let m=Bn.range(0,c[2]-1,1);h[1]&&(m=Bn.range(c[2]-1,0,-1));for(let b=0;b<c[2];b++)m[b]*=f[1];let v=Bn.range(0,c[3]-1,1);h[2]&&(v=Bn.range(c[3]-1,0,-1));for(let b=0;b<c[3];b++)v[b]*=f[2];const g=new Uint8Array(e),y=new Uint8Array(c[1]*c[2]*c[3]);let x=0;for(let b=0;b<c[3];b++)for(let A=0;A<c[2];A++)for(let S=0;S<c[1];S++)y[x]=g[p[S]+m[A]+v[b]],x++;r=y,ht.debug("drawing bytes"),ht.debug(r)}}const s=t?r:new Uint8Array(this.img.buffer),a=new Uint8Array(4),o=new Uint8Array(i.length+a.length+s.length);return o.set(i),o.set(a,i.length),o.set(s,i.length+a.length),o}convertVox2Frac(e){return bn((e[0]+.5)/this.dimsRAS[1],(e[1]+.5)/this.dimsRAS[2],(e[2]+.5)/this.dimsRAS[3])}convertFrac2Vox(e){return bn(Math.round(e[0]*this.dims[1]-.5),Math.round(e[1]*this.dims[2]-.5),Math.round(e[2]*this.dims[3]-.5))}convertFrac2MM(e,t=!1){const i=Jr(e[0],e[1],e[2],1);return t?Sa(i,i,this.frac2mm):Sa(i,i,this.frac2mmOrtho),i}convertMM2Frac(e,t=!1){const i=Jr(e[0],e[1],e[2],1),r=this.dimsRAS,s=bn(0,0,0);if(typeof r>"u")return s;if(!t){const o=_s(this.frac2mmOrtho);return zo(o,o),Sa(i,i,o),s[0]=i[0],s[1]=i[1],s[2]=i[2],s}if(r[1]<1||r[2]<1||r[3]<1)return s;const a=_s(this.matRAS);return zo(a,a),ml(a,a),Sa(i,i,a),s[0]=(i[0]+.5)/r[1],s[1]=(i[1]+.5)/r[2],s[2]=(i[2]+.5)/r[3],s}},Noe=(n=>(n[n.none=0]="none",n[n.contrast=1]="contrast",n[n.measurement=2]="measurement",n[n.pan=3]="pan",n[n.slicer3D=4]="slicer3D",n[n.callbackOnly=5]="callbackOnly",n[n.roiSelection=6]="roiSelection",n))(Noe||{}),xh={textHeight:.06,colorbarHeight:.05,crosshairWidth:1,crosshairWidthUnit:"voxels",crosshairGap:0,rulerWidth:4,show3Dcrosshair:!1,backColor:[0,0,0,1],crosshairColor:[1,0,0,1],fontColor:[.5,.5,.5,1],selectionBoxColor:[1,1,1,.5],clipPlaneColor:[.7,0,.7,.5],clipThick:2,clipVolumeLow:[0,0,0],clipVolumeHigh:[1,1,1],rulerColor:[1,0,0,.8],colorbarMargin:.05,trustCalMinMax:!0,clipPlaneHotKey:"KeyC",viewModeHotKey:"KeyV",doubleTouchTimeout:500,longTouchTimeout:1e3,keyDebounceTime:50,isNearestInterpolation:!1,isResizeCanvas:!0,atlasOutline:0,isRuler:!1,isColorbar:!1,isOrientCube:!1,tileMargin:0,multiplanarPadPixels:0,multiplanarForceRender:!1,multiplanarEqualSize:!1,multiplanarShowRender:2,isRadiologicalConvention:!1,meshThicknessOn2D:1/0,dragMode:1,dragModePrimary:0,yoke3Dto2DZoom:!1,isDepthPickMesh:!1,isCornerOrientationText:!1,heroImageFraction:0,heroSliceType:4,sagittalNoseLeft:!1,isSliceMM:!1,isV1SliceShader:!1,isHighResolutionCapable:!0,logLevel:"info",loadingText:"loading ...",isForceMouseClickToVoxelCenters:!1,dragAndDropEnabled:!0,drawingEnabled:!1,penValue:1,floodFillNeighbors:6,isFilledPen:!1,thumbnail:"",maxDrawUndoBitmaps:8,sliceType:3,meshXRay:0,isAntiAlias:null,limitFrames4D:NaN,isAdditiveBlend:!1,showLegend:!0,legendBackgroundColor:[.3,.3,.3,.5],legendTextColor:[1,1,1,1],multiplanarLayout:0,renderOverlayBlend:1,sliceMosaicString:"",centerMosaic:!1,penSize:1,interactive:!0,clickToSegment:!1,clickToSegmentRadius:3,clickToSegmentBright:!0,clickToSegmentAutoIntensity:!1,clickToSegmentIntensityMax:NaN,clickToSegmentIntensityMin:NaN,clickToSegmentPercent:0,clickToSegmentMaxDistanceMM:Number.POSITIVE_INFINITY,clickToSegmentIs2D:!1,selectionBoxLineThickness:4,selectionBoxIsOutline:!1,scrollRequiresFocus:!1,showMeasureUnits:!0,measureTextJustify:"center",measureTextColor:[1,0,0,1],measureLineColor:[1,0,0,1],measureTextHeight:.03,isAlphaClipDark:!1},eC={gamma:1,azimuth:110,elevation:10,crosshairPos:bn(.5,.5,.5),clipPlane:[0,0,0,0],clipPlaneDepthAziElev:[2,0,0],volScaleMultiplier:1,pan2Dxyzmm:Jr(0,0,0,1),clipThick:2,clipVolumeLow:[0,0,0],clipVolumeHigh:[1,1,1]},nD=class gg{constructor(){Ve(this,"data",{title:"Untitled document",imageOptionsArray:[],meshOptionsArray:[],opts:{...xh},previewImageDataURL:"",labels:[],encodedImageBlobs:[],encodedDrawingBlob:""}),Ve(this,"scene"),Ve(this,"volumes",[]),Ve(this,"meshDataObjects"),Ve(this,"meshes",[]),Ve(this,"drawBitmap",null),Ve(this,"imageOptionsMap",new Map),Ve(this,"meshOptionsMap",new Map),this.scene={onAzimuthElevationChange:()=>{},onZoom3DChange:()=>{},sceneData:{...eC,pan2Dxyzmm:Jr(0,0,0,1),crosshairPos:bn(.5,.5,.5)},get renderAzimuth(){return this.sceneData.azimuth},set renderAzimuth(e){this.sceneData.azimuth=e,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get renderElevation(){return this.sceneData.elevation},set renderElevation(e){this.sceneData.elevation=e,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get volScaleMultiplier(){return this.sceneData.volScaleMultiplier},set volScaleMultiplier(e){this.sceneData.volScaleMultiplier=e,this.onZoom3DChange(e)},get crosshairPos(){return this.sceneData.crosshairPos},set crosshairPos(e){this.sceneData.crosshairPos=e},get clipPlane(){return this.sceneData.clipPlane},set clipPlane(e){this.sceneData.clipPlane=e},get clipPlaneDepthAziElev(){return this.sceneData.clipPlaneDepthAziElev},set clipPlaneDepthAziElev(e){this.sceneData.clipPlaneDepthAziElev=e},get pan2Dxyzmm(){return this.sceneData.pan2Dxyzmm},set pan2Dxyzmm(e){this.sceneData.pan2Dxyzmm=e},get gamma(){return this.sceneData.gamma},set gamma(e){this.sceneData.gamma=e}}}get title(){return this.data.title}get previewImageDataURL(){return this.data.previewImageDataURL}set previewImageDataURL(e){this.data.previewImageDataURL=e}set title(e){this.data.title=e}get imageOptionsArray(){return this.data.imageOptionsArray}get encodedImageBlobs(){return this.data.encodedImageBlobs}get encodedDrawingBlob(){return this.data.encodedDrawingBlob}get opts(){return this.data.opts}set opts(e){this.data.opts={...e}}get labels(){return this.data.labels}set labels(e){this.data.labels=e}get customData(){return this.data.customData}set customData(e){this.data.customData=e}hasImage(e){return this.volumes.find(t=>t.id===e.id)!==void 0}hasImageFromUrl(e){return this.data.imageOptionsArray.find(t=>t.url===e)!==void 0}addImageOptions(e,t){if(!this.hasImage(e)&&!t.name)if(t.url){const r=/^(?:[a-z+]+:)?\/\//i.test(t.url)?new URL(t.url):new URL(t.url,window.location.href);t.name=r.pathname.split("/").pop(),t.name.toLowerCase().endsWith(".gz")&&(t.name=t.name.slice(0,-3)),t.name.toLowerCase().endsWith(".nii")||(t.name+=".nii")}else t.name="untitled.nii";t.imageType=dr.NII,this.data.imageOptionsArray.push(t),this.imageOptionsMap.set(e.id,this.data.imageOptionsArray.length-1)}removeImage(e){if(this.imageOptionsMap.has(e.id)){const t=this.imageOptionsMap.get(e.id);this.data.imageOptionsArray.length>t&&this.data.imageOptionsArray.splice(t,1),this.imageOptionsMap.delete(e.id)}this.volumes=this.volumes.filter(t=>t.id!==e.id)}getImageOptions(e){return this.imageOptionsMap.has(e.id)?this.data.imageOptionsArray[this.imageOptionsMap.get(e.id)]:null}json(){const e={encodedImageBlobs:[],previewImageDataURL:this.data.previewImageDataURL,imageOptionsMap:new Map},t=[];e.sceneData={...this.scene.sceneData},e.opts={...this.opts},this.opts.meshThicknessOn2D===1/0&&(e.opts.meshThicknessOn2D="infinity"),e.labels=[...this.data.labels];for(const r of e.labels)delete r.onClick;if(e.customData=this.customData,this.volumes.length)for(let r=0;r<this.volumes.length;r++){const s=this.volumes[r];let a=this.getImageOptions(s);a===null?(ht.warn("no options found for image, using default"),a={name:"",colormap:"gray",opacity:1,pairedImgData:null,cal_min:NaN,cal_max:NaN,trustCalMinMax:!0,percentileFrac:.02,ignoreZeroVoxels:!1,useQFormNotSForm:!1,colormapNegative:"",colormapLabel:null,imageType:dr.NII,frame4D:0,limitFrames4D:NaN,url:"",urlImageData:"",alphaThreshold:!1,cal_minNeg:NaN,cal_maxNeg:NaN,colorbarVisible:!0}):"imageType"in a||(a.imageType=dr.NII),a.colormap=s.colormap,a.colormapLabel=s.colormapLabel,a.opacity=s.opacity,a.cal_max=s.cal_max||NaN,a.cal_min=s.cal_min||NaN,t.push(a);const o=Bn.uint8tob64(s.toUint8Array());e.encodedImageBlobs.push(o),e.imageOptionsMap.set(s.id,r)}e.imageOptionsArray=[...t];const i=[];e.connectomes=[];for(const r of this.meshes){if(r.type==="connectome"){e.connectomes.push(JSON.stringify(r.json()));continue}const s={pts:r.pts,tris:r.tris,name:r.name,rgba255:Uint8Array.from(r.rgba255),opacity:r.opacity,connectome:r.connectome,dpg:r.dpg,dps:r.dps,dpv:r.dpv,meshShaderIndex:r.meshShaderIndex,layers:r.layers.map(a=>({values:a.values,nFrame4D:a.nFrame4D,frame4D:0,outlineBorder:a.outlineBorder,global_min:a.global_min,global_max:a.global_max,cal_min:a.cal_min,cal_max:a.cal_max,opacity:a.opacity,colormap:a.colormap,colormapNegative:a.colormapNegative,colormapLabel:a.colormapLabel,useNegativeCmap:a.useNegativeCmap})),hasConnectome:r.hasConnectome,edgeColormap:r.edgeColormap,edgeColormapNegative:r.edgeColormapNegative,edgeMax:r.edgeMax,edgeMin:r.edgeMin,edges:r.edges&&Array.isArray(r.edges)?[...r.edges]:[],extentsMax:r.extentsMax,extentsMin:r.extentsMin,furthestVertexFromOrigin:r.furthestVertexFromOrigin,nodeColormap:r.nodeColormap,nodeColormapNegative:r.nodeColormapNegative,nodeMaxColor:r.nodeMaxColor,nodeMinColor:r.nodeMinColor,nodeScale:r.nodeScale,legendLineThickness:r.legendLineThickness,offsetPt0:r.offsetPt0,nodes:r.nodes};r.offsetPt0&&r.offsetPt0.length>0&&(s.offsetPt0=r.offsetPt0,s.fiberGroupColormap=r.fiberGroupColormap,s.fiberColor=r.fiberColor,s.fiberDither=r.fiberDither,s.fiberRadius=r.fiberRadius,s.colormap=r.colormap),i.push(s)}return e.meshesString=JSON.stringify(Sct(i)),this.drawBitmap&&(e.encodedDrawingBlob=Bn.uint8tob64(this.drawBitmap)),e}async download(e,t){const i=this.json(),r=JSON.stringify(i),s=t?"application/gzip":"application/json";let a;t?a=await Bn.compressStringToArrayBuffer(r):a=r,Bn.download(a,e,s)}static deserializeMeshDataObjects(e){if(e.data.meshesString){e.meshDataObjects=bct(JSON.parse(e.data.meshesString));for(const t of e.meshDataObjects)for(const i of t.layers)"colorMap"in i&&(i.colormap=i.colorMap,delete i.colorMap),"colorMapNegative"in i&&(i.colormapNegative=i.colorMapNegative,delete i.colorMapNegative)}}static async loadFromUrl(e){const i=await(await fetch(e)).arrayBuffer();let r;if(Bn.isArrayBufferCompressed(i)){const s=await Bn.decompressArrayBuffer(i);r=JSON.parse(s)}else{const s=new TextDecoder;r=JSON.parse(s.decode(i))}return gg.loadFromJSON(r)}static async loadFromFile(e){const t=await Bn.readFileAsync(e);let i;const r=new gg;return Bn.isArrayBufferCompressed(t)?i=await Bn.decompressArrayBuffer(t):i=new TextDecoder().decode(t),r.data=JSON.parse(i),r.data.opts.meshThicknessOn2D==="infinity"&&(r.data.opts.meshThicknessOn2D=1/0),r.scene.sceneData={...eC,...r.data.sceneData},gg.deserializeMeshDataObjects(r),r}static loadFromJSON(e){const t=new gg;return t.data=e,t.data.opts.meshThicknessOn2D==="infinity"&&(t.data.opts.meshThicknessOn2D=1/0),t.scene.sceneData={...eC,...e.sceneData},gg.deserializeMeshDataObjects(t),t}},dft={colormap:"gray",opacity:0,nFrame4D:0,frame4D:0,outlineBorder:0,cal_min:0,cal_max:0,cal_minNeg:0,cal_maxNeg:0,colormapType:0,values:new Array},yg=class Mu{constructor(e,t,i="",r=new Uint8Array([255,255,255,255]),s=1,a=!0,o,l=null,c=null,u=null,d=null,f=!0,h=""){Ve(this,"id"),Ve(this,"name"),Ve(this,"anatomicalStructurePrimary"),Ve(this,"colorbarVisible"),Ve(this,"furthestVertexFromOrigin"),Ve(this,"extentsMin"),Ve(this,"extentsMax"),Ve(this,"opacity"),Ve(this,"visible"),Ve(this,"meshShaderIndex",0),Ve(this,"offsetPt0",null),Ve(this,"colormapInvert",!1),Ve(this,"fiberGroupColormap",null),Ve(this,"indexBuffer"),Ve(this,"vertexBuffer"),Ve(this,"vao"),Ve(this,"vaoFiber"),Ve(this,"pts"),Ve(this,"tris"),Ve(this,"layers"),Ve(this,"type","mesh"),Ve(this,"data_type"),Ve(this,"rgba255"),Ve(this,"fiberLength"),Ve(this,"fiberLengths"),Ve(this,"fiberDensity"),Ve(this,"fiberDither",.1),Ve(this,"fiberColor","Global"),Ve(this,"fiberDecimationStride",1),Ve(this,"fiberSides",5),Ve(this,"fiberRadius",0),Ve(this,"fiberOcclusion",0),Ve(this,"f32PerVertex",5),Ve(this,"fiberMask"),Ve(this,"colormap"),Ve(this,"dpg"),Ve(this,"dps"),Ve(this,"dpv"),Ve(this,"hasConnectome",!1),Ve(this,"connectome"),Ve(this,"indexCount"),Ve(this,"vertexCount",1),Ve(this,"nodeScale",4),Ve(this,"edgeScale",1),Ve(this,"legendLineThickness",0),Ve(this,"nodeColormap","warm"),Ve(this,"edgeColormap","warm"),Ve(this,"nodeColormapNegative"),Ve(this,"edgeColormapNegative"),Ve(this,"nodeMinColor"),Ve(this,"nodeMaxColor"),Ve(this,"edgeMin"),Ve(this,"edgeMax"),Ve(this,"nodes"),Ve(this,"edges"),Ve(this,"points"),this.anatomicalStructurePrimary=h,this.name=i,this.colorbarVisible=f,this.id=rL();const p=E0.getExtents(e);if(this.furthestVertexFromOrigin=p.mxDx,this.extentsMin=p.extentsMin,this.extentsMax=p.extentsMax,this.opacity=s>1?1:s,this.visible=a,this.meshShaderIndex=0,this.indexBuffer=o.createBuffer(),this.vertexBuffer=o.createBuffer(),this.vao=o.createVertexArray(),o.bindVertexArray(this.vao),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.enableVertexAttribArray(0),o.enableVertexAttribArray(1),this.f32PerVertex!==7?(o.vertexAttribPointer(0,3,o.FLOAT,!1,20,0),o.vertexAttribPointer(1,4,o.BYTE,!0,20,12),o.enableVertexAttribArray(2),o.vertexAttribPointer(2,4,o.UNSIGNED_BYTE,!0,20,16)):(o.vertexAttribPointer(0,3,o.FLOAT,!1,28,0),o.vertexAttribPointer(1,3,o.FLOAT,!1,28,12),o.enableVertexAttribArray(2),o.vertexAttribPointer(2,4,o.UNSIGNED_BYTE,!0,28,24)),o.bindVertexArray(null),this.vaoFiber=o.createVertexArray(),this.offsetPt0=null,this.hasConnectome=!1,this.colormapInvert=!1,this.fiberGroupColormap=null,this.pts=e,this.layers=[],this.type="mesh",this.tris=t,r[3]<1){this.rgba255=r,this.fiberLength=2,this.fiberDither=.1,this.fiberColor="Global",this.fiberDecimationStride=1,this.fiberMask=[],this.colormap=l,this.dpg=c,this.dps=u,this.dpv=d,c&&this.initValuesArray(c),u&&this.initValuesArray(u),d&&this.initValuesArray(d),this.offsetPt0=new Uint32Array(t),this.tris=new Uint32Array(0),this.updateFibers(o),o.bindVertexArray(this.vaoFiber),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.enableVertexAttribArray(0),o.vertexAttribPointer(0,3,o.FLOAT,!1,16,0),o.enableVertexAttribArray(1),o.vertexAttribPointer(1,4,o.UNSIGNED_BYTE,!0,16,12),o.bindVertexArray(null);return}if(l){this.connectome=l,this.hasConnectome=!0;const v=Object.keys(l);for(let g=0,y=v.length;g<y;g++)this[v[g]]=l[v[g]]}this.rgba255=r,this.updateMesh(o)}initValuesArray(e){for(let t=0;t<e.length;t++){const i=e[t].vals.reduce((s,a)=>Math.min(s,a)),r=e[t].vals.reduce((s,a)=>Math.max(s,a));e[t].global_min=i,e[t].global_max=r,e[t].cal_min=i,e[t].cal_max=r}return e}linesToCylinders(e,t,i){function r(M){return bn(M[0],M[1],M[2])}const s=Math.pow(2,32)-1,a=i.length;let o=0,l=0;for(let M=0;M<a;M++){if(i[M]===s){l++;continue}o++}const c=this.fiberSides,u=c*o,d=this.f32PerVertex;if(d!==5)throw Error("fiberSides > 1 requires f32PerVertex == 5");const f=new Float32Array(u*d),h=new Uint8Array(f.buffer);let p=0,m=uf(),v=uf(),g=uf();const y=Zr();let x=Zr(),b=0;const A=this.fiberRadius;for(let M=0;M<a;M++){const T=i[M]===s;if(T&&b<1)continue;let E=i[M]*4;if(b++,b<=1){m=Jr(t[E+0],t[E+1],t[E+2],t[E+3]),v=Yd(m),M+1<a&&i[M+1]!==s&&(E=i[M+1]*4,g=Jr(t[E+0],t[E+1],t[E+2],t[E+3]),os(y,r(m),r(g)),ec(y,y),x=Mm.getFirstPerpVector(y));continue}T?g=Yd(v):g=Jr(t[E+0],t[E+1],t[E+2],t[E+3]),os(y,r(m),r(g)),ec(y,y);const I=Zr();X_(I,x,y);const L=Zr();X_(L,y,I),x=Hb(x);const F=Zr();X_(F,y,L),ec(F,F);const B=Zr();for(let P=0;P<c;P++){const z=Math.cos(P/c*2*Math.PI),O=Math.sin(P/c*2*Math.PI);B[0]=A*(z*L[0]+O*F[0]),B[1]=A*(z*L[1]+O*F[1]),B[2]=A*(z*L[2]+O*F[2]),nm(B,r(v),B);const N=p*d;f[N+0]=B[0],f[N+1]=B[1],f[N+2]=B[2];const H=Zr();os(H,B,r(v)),ec(H,H);const q=(N+3)*4;h[q+0]=H[0]*127,h[q+1]=H[1]*127,h[q+2]=H[2]*127,f[N+4]=v[3],p++}m=Yd(v),v=Yd(g),T&&(b=0)}const S=(o-l)*c*2*3,C=new Uint32Array(S);let _=0;p=0;for(let M=1;M<a;M++){if(i[M]===s){p+=c;continue}if(i[M-1]===s)continue;let T=p,E=p+c;const I=E,L=E+c;for(let F=0;F<c;F++)C[_++]=T,C[_++]=E++,E===L&&(E=L-c),C[_++]=E,C[_++]=T++,T===I&&(T=I-c),C[_++]=E,C[_++]=T;p+=c}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,Uint32Array.from(C),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,h,e.STATIC_DRAW),this.indexCount=S}createFiberDensityMap(){if(this.fiberDensity)return;const e=this.pts,t=e.length/3;let i=0;for(let y=0;y<3;y++){const x=this.extentsMax[y]-this.extentsMin[y];i=Math.max(i,x)}if(this.fiberDensity=new Float32Array(t),i===0)return;const r=64,a=i/(r-1)/2,o=(r-1)/i;let l=new Float32Array(r*r*r);const c=[this.extentsMin[0]-a,this.extentsMin[1]-a,this.extentsMin[2]-a],u=[0,0,0],d=-1,f=r*r;let h=0;for(let y=0;y<t;y++){u[0]=Math.round((e[h++]-c[0])*o),u[1]=Math.round((e[h++]-c[1])*o),u[2]=Math.round((e[h++]-c[2])*o);const x=u[0]+u[1]*r+u[2]*f;x!==d&&l[x]++}function p(y,x){let b=y.slice(),A=-1;const S=x-1;for(let _=0;_<x;_++)for(let M=0;M<x;M++)for(let T=0;T<x;T++)A++,!(T<1||T>=S)&&(y[A]=b[A-1]+b[A]+b[A]+b[A+1]);A=-1,b=y.slice();for(let _=0;_<x;_++)for(let M=0;M<x;M++)for(let T=0;T<x;T++)A++,!(M<1||M>=S)&&(y[A]=b[A-x]+b[A]+b[A]+b[A+x]);const C=x*x;A=-1,b=y.slice();for(let _=0;_<x;_++)for(let M=0;M<x;M++)for(let T=0;T<x;T++)A++,!(_<1||_>=S)&&(y[A]=b[A-C]+b[A]+b[A]+b[C]);return y}l=p(l,r),l=p(l,r);let m=0,v=1/0;const g=r*r*r;for(let y=0;y<g;y++)l[y]<=0||(m=Math.max(m,l[y]),v=Math.min(v,l[y]));if(!(m<=1||m<=v)){h=0;for(let y=0;y<g;y++)l[y]=Math.max(0,l[y]-v);m-=v;for(let y=0;y<t;y++){u[0]=Math.round((e[h++]-c[0])*o),u[1]=Math.round((e[h++]-c[1])*o),u[2]=Math.round((e[h++]-c[2])*o);const x=u[0]+u[1]*r+u[2]*f;this.fiberDensity[y]=l[x]/m}}}updateFibers(e){if(!this.offsetPt0||!this.fiberLength)return;const t=this.pts,i=this.offsetPt0,r=i.length-1,s=t.length/3;if(!this.fiberLengths){this.fiberLengths=new Uint32Array(r);for(let S=0;S<r;S++){const C=i[S]*3,_=(i[S+1]-1)*3;let M=0;for(let T=C;T<_;T+=3){const E=bn(t[T+0]-t[T+3],t[T+1]-t[T+4],t[T+2]-t[T+5]);M+=aA(E)}this.fiberLengths[S]=M}}const a=new Float32Array(s*4),o=new Uint32Array(a.buffer);let l=0,c=0;for(let S=0;S<s;S++)a[c+0]=t[l+0],a[c+1]=t[l+1],a[c+2]=t[l+2],l+=3,c+=4;const u=this.fiberDither,d=u*.5;function f(S,C,_){const T=255*(u*Math.random()-d);return S=Math.max(Math.min(S+T,255),0),C=Math.max(Math.min(C+T,255),0),_=Math.max(Math.min(_+T,255),0),S+(C<<8)+(_<<16)}function h(S,C,_,M,T,E,I){const L=bn(Math.abs(S-M),Math.abs(C-T),Math.abs(_-E));ec(L,L);const F=I-d;for(let B=0;B<3;B++)L[B]=255*Math.max(Math.min(Math.abs(L[B])+F,1),0);return L[0]+(L[1]<<8)+(L[2]<<16)}const p=this.fiberColor.toLowerCase();let m=null,v=null;if(p.startsWith("dps")&&this.dps&&this.dps.length>0){const S=parseInt(p.substring(3));S<this.dps.length&&this.dps[S].vals.length===r&&(m=this.dps[S].vals)}if(p.startsWith("dpv")&&this.dpv&&this.dpv.length>0){const S=parseInt(p.substring(3));S<this.dpv.length&&this.dpv[S].vals.length===s&&(v=this.dpv[S])}const g=new Int16Array(r);if(this.dpg&&this.fiberGroupColormap!==null){const S=new Uint8ClampedArray(this.dpg.length*4),C=new Array(this.dpg.length).fill(!1),_=this.fiberGroupColormap;_.A===void 0&&(_.A=Array.from(new Uint8ClampedArray(_.I.length).fill(255)));for(let M=0;M<_.I.length;M++){let T=_.I[M];T<0||T>=this.dpg.length||_.A[M]<1||(C[T]=!0,T*=4,S[T]=_.R[M],S[T+1]=_.G[M],S[T+2]=_.B[M],S[T+3]=255)}g.fill(-1);for(let M=0;M<this.dpg.length;M++)if(C[M])for(let T=0;T<this.dpg[M].vals.length;T++)g[this.dpg[M].vals[T]]=M;for(let M=0;M<r;M++){if(g[M]<0)continue;const T=g[M]%256*4,E=f(S[T],S[T+1],S[T+2]),I=i[M],L=i[M+1]-1,F=I*4+3,B=L*4+3;for(let P=F;P<=B;P+=4)o[P]=E}}else if(v){const S=Vr.colormap(this.colormap,this.colormapInvert),C=v.cal_min,_=v.cal_max;let M=3;for(let T=0;T<s;T++){let E=Math.min(Math.max((v.vals[T]-C)/(_-C),0),1);E=Math.round(Math.max(Math.min(255,E*255)))*4;const I=S[E]+(S[E+1]<<8)+(S[E+2]<<16);o[M]=I,M+=4}}else if(m){const S=Vr.colormap(this.colormap,this.colormapInvert);let C=m[0],_=m[0];for(let M=0;M<r;M++)C=Math.min(C,m[M]),_=Math.max(_,m[M]);_===C&&(C-=1);for(let M=0;M<r;M++){let T=(m[M]-C)/(_-C);T=Math.round(Math.max(Math.min(255,T*255)))*4;const E=S[T]+(S[T+1]<<8)+(S[T+2]<<16),I=i[M],L=i[M+1]-1,F=I*4+3,B=L*4+3;for(let P=F;P<=B;P+=4)o[P]=E}}else if(p.includes("fixed"))if(u===0){const S=this.rgba255[0]+(this.rgba255[1]<<8)+(this.rgba255[2]<<16);let C=3;for(let _=0;_<s;_++)o[C]=S,C+=4}else for(let S=0;S<r;S++){const C=f(this.rgba255[0],this.rgba255[1],this.rgba255[2]),_=i[S],M=i[S+1]-1,T=_*4+3,E=M*4+3;for(let I=T;I<=E;I+=4)o[I]=C}else if(p.includes("local"))for(let S=0;S<r;S++){const C=i[S],_=i[S+1]-1;let M=C*3;const T=_*3,E=u*Math.random();let I=h(t[M],t[M+1],t[M+2],t[M+4],t[M+5],t[M+6],E),L=C*4+3;for(;M<T;)o[L]=I,L+=4,M+=3,I=h(t[M-3],t[M-2],t[M-1],t[M+3],t[M+4],t[M+5],E);o[L]=o[L-4]}else for(let S=0;S<r;S++){const C=i[S],_=i[S+1]-1,M=C*3,T=_*3,E=h(t[M],t[M+1],t[M+2],t[T],t[T+1],t[T+2],u*Math.random()),I=C*4+3,L=_*4+3;for(let F=I;F<=L;F+=4)o[F]=E}if(this.fiberOcclusion>0){let S=function(C,_){const M=_*(C&255),T=_*(C>>8&255),E=_*(C>>16&255);return M+(T<<8)+(E<<16)};this.createFiberDensityMap();for(let C=0;C<r;C++){const _=i[C],M=i[C+1]-1,T=_*4+3,E=M*4+3;let I=_;const L=Math.min(this.fiberOcclusion,.99);for(let F=T;F<=E;F+=4){let B=this.fiberDensity[I++];if(B<=0)continue;B=B/((1/L-2)*(1-B)+1);const P=1-Math.min(B,.9);let z=o[F];z=S(z,P),o[F]=z}}}const y=this.fiberLength,x=Math.pow(2,32)-1,b=[];let A=-1;for(let S=0;S<r;S++)if(!(g[S]<0)&&!(this.fiberLengths[S]<y)&&(A++,A%this.fiberDecimationStride===0)){for(let C=i[S];C<i[S+1];C++)b.push(C);b.push(x)}this.fiberSides>2&&this.fiberRadius>0?this.linesToCylinders(e,a,b):(this.indexCount=b.length,e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,Uint32Array.from(o),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,Uint32Array.from(b),e.STATIC_DRAW))}indexNearestXYZmm(e,t,i){const r=this.pts,s=this.pts.length/3;let a=0,o=1/0,l=0;for(let c=0;c<s;c++){const u=Math.pow(r[a]-e,2)+Math.pow(r[a+1]-t,2)+Math.pow(r[a+2]-i,2);u<o&&(o=u,l=c),a+=3}return o=Math.sqrt(o),[l,o]}unloadMesh(e){if(e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindVertexArray(null),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteVertexArray(this.vao),e.deleteVertexArray(this.vaoFiber),this.offsetPt0=null,this.tris=null,this.pts=null,this.layers&&this.layers.length>0)for(let t=0;t<this.layers.length;t++)this.layers[t].values=null;if(this.dpg&&this.dpg.length>0)for(let t=0;t<this.dpg.length;t++)this.dpg[t].vals=null;if(this.dps&&this.dps.length>0)for(let t=0;t<this.dps.length;t++)this.dps[t].vals=null}blendColormap(e,t,i,r,s,a,o=!1){const l=this.pts.length/3,c=Math.min(i.opacity,1);function u(x,b,A){return x*(1-A)+b*A}function d(x,b){return Math.min(x+b,255)}const f=o?-1:1,h=Math.min(Math.max(i.frame4D,0),i.nFrame4D-1),p=l*h;let m=r;i.isTransparentBelowCalMin||(m=Number.NEGATIVE_INFINITY),i.colormapType!==0&&(r=Math.min(r,0));const v=255/(s-r);let g=new Array(l).fill(!1);if(i.outlineBorder!==0){const x=new Uint8Array(l).fill(0);for(let b=0;b<l;b++)f*i.values[b+p]>=m&&(x[b]=1);g=E0.getClusterBoundaryU8(x,this.tris);for(let b=0;b<l;b++)f*i.values[b+p]<m&&(g[b]=!1)}const y=new Float32Array(256).fill(c);if(m>r&&i.colormapType===2){let x=Math.round((m-r)*v);x=Math.max(x,1);for(let b=1;b<x;b++)y[b]=c*Math.pow(b/x,2);y[0]=0,m=r+Number.EPSILON}for(let x=0;x<l;x++){const b=f*i.values[x+p];if(b<m)continue;let A=Math.round((b-r)*v);if(A<0&&i.isTransparentBelowCalMin)continue;A=Math.max(0,A),A=Math.min(255,A);let S=y[A];A*=4;let C=x*28+24;if(this.f32PerVertex!==7&&(C=x*20+16),i.isAdditiveBlend){const _=x*4;t[_+0]=d(t[_+0],a[A+0]),t[_+1]=d(t[_+1],a[A+1]),t[_+2]=d(t[_+2],a[A+2]),t[_+3]=d(t[_+3],255)}else{if(g[x]&&(S=i.outlineBorder,i.outlineBorder<0)){e[C+0]=0,e[C+1]=0,e[C+2]=0;continue}e[C+0]=u(e[C+0],a[A+0],S),e[C+1]=u(e[C+1],a[A+1],S),e[C+2]=u(e[C+2],a[A+2],S)}}}updateMesh(e){if(this.offsetPt0){this.updateFibers(e);return}if(this.hasConnectome)return;if(!this.pts||!this.tris||!this.rgba255){ht.warn("underspecified mesh");return}function t(o,l,c){return o*(1-c)+l*c}const i=this.generatePosNormClr(this.pts,this.tris,this.rgba255),r=this.pts.length/3,s=new Uint8Array(i.buffer),a=new Uint8Array(r*4);if(this.layers&&this.layers.length>0)for(let o=0;o<this.layers.length;o++){const l=this.layers[o],c=l.opacity;if(c<=0||l.cal_min>l.cal_max)continue;if(l.outlineBorder===void 0&&(l.outlineBorder=0),l.isAdditiveBlend===void 0&&(l.isAdditiveBlend=!1),l.colormapLabel&&l.colormapLabel.R&&!l.colormapLabel.lut&&(l.colormapLabel=Vr.makeLabelLut(l.colormapLabel)),l.colormapLabel&&l.colormapLabel.lut){const f=l.colormapLabel.lut,h=Math.floor(f.length/4),p=Math.min(Math.max(l.frame4D,0),l.nFrame4D-1),m=r*p,v=new Uint8Array(r*4);let g=0;for(let x=0;x<l.values.length;x++){let b=4*Math.min(Math.max(l.values[x+m],0),h-1);v[g+0]=f[b+0],v[g+1]=f[b+1],v[g+2]=f[b+2],g+=4}let y=new Array(r).fill(!1);l.outlineBorder!==0&&(y=E0.getClusterBoundary(v,this.tris)),g=0;for(let x=0;x<l.values.length;x++){let b=x*28+24;this.f32PerVertex!==7&&(b=x*20+16);let A=c;if(y[x]&&(A=l.outlineBorder,l.outlineBorder<0)){s[b+0]=0,s[b+1]=0,s[b+2]=0,g+=4;continue}s[b+0]=t(s[b+0],v[g+0],A),s[b+1]=t(s[b+1],v[g+1],A),s[b+2]=t(s[b+2],v[g+2],A),g+=4}continue}if(l.values instanceof Uint8Array){const d=new Uint8Array(l.values.buffer);let f=new Array(r).fill(!0);l.outlineBorder!==0&&(f=E0.getClusterBoundary(d,this.tris));let h=0;for(let p=0;p<l.values.length;p++){let m=p*28+24;this.f32PerVertex!==7&&(m=p*20+16);let v=c;if(f[p]&&(v=l.outlineBorder,l.outlineBorder<0)){s[m+0]=0,s[m+1]=0,s[m+2]=0,h+=4;continue}s[m+0]=t(s[m+0],d[h+0],v),s[m+1]=t(s[m+1],d[h+1],v),s[m+2]=t(s[m+2],d[h+2],v),h+=4}continue}l.useNegativeCmap&&(l.cal_min=Math.max(Number.EPSILON,l.cal_min),l.cal_max=Math.max(l.cal_min+1e-6,l.cal_max)),l.isTransparentBelowCalMin===void 0&&(l.isTransparentBelowCalMin=!0);const u=Vr.colormap(l.colormap,l.colormapInvert);if(this.blendColormap(s,a,l,l.cal_min,l.cal_max,u),l.useNegativeCmap){const d=Vr.colormap(l.colormapNegative,l.colormapInvert);let f=l.cal_min,h=l.cal_max;isFinite(l.cal_minNeg)&&isFinite(l.cal_minNeg)&&(f=-l.cal_minNeg,h=-l.cal_maxNeg),this.blendColormap(s,a,l,f,h,d,!0)}}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,Uint32Array.from(this.tris),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),this.indexCount=this.tris.length,this.vertexCount=this.pts.length}reverseFaces(e){if(this.offsetPt0||this.hasConnectome)return;const t=this.tris||[];for(let i=0;i<t.length;i+=3){const r=t[i];t[i]=t[i+1],t[i+1]=r}this.updateMesh(e)}hierarchicalOrder(){const i=this.tris.length/3,r=Math.log(i/20)/Math.log(4);if(i!==Math.pow(4,r)*20)return NaN;if(this.pts.length/3!==Math.pow(4,r)*10+2)return NaN;for(let a=0;a<15;a+=3)if(this.tris[a]!==0)return NaN;for(let a=15;a<24;a+=3)if(this.tris[a]!==3)return NaN;for(let a=24;a<30;a+=3)if(this.tris[a]!==4)return NaN;return r}decimateFaces(e,t){let i=this.tris;const r=12,s=20;for(let a=e-1;a>=t;a--){const o=Math.pow(4,a+1)*(r-2)+2,l=Math.pow(4,a)*(r-2)+2,c=i.length/3,u=Math.pow(4,a)*s;console.log(`order ${a+1} -> ${a} vertices ${o} -> ${l} faces ${c} -> ${u}`);const d=Array.from({length:o},(h,p)=>p+1);for(let h=0;h<c;h++){const p=i[3*h],m=i[3*h+1],v=i[3*h+2];d[p-1]=Math.min(d[p-1],m,v)}const f=new Uint32Array(u*3);for(let h=0;h<u;h++)f[3*h]=d[i[3*h]-1],f[3*h+1]=d[i[3*h+1]-1],f[3*h+2]=d[i[3*h+2]-1];i=f}this.tris=new Uint32Array(i)}decimateHierarchicalMesh(e,t=4){const i=this.hierarchicalOrder();if(isNaN(i))return ht.warn("Unable to decimate mesh: it does not have a hierarchical structure"),!1;if(t>=i)return ht.warn(`Unable to decimate mesh: input order (${i}) must be larger than downsampled order (${t})`),!1;const r=this.pts.length/3,a=Math.pow(4,t)*(12-2)+2;if(this.pts=new Float32Array(this.pts.slice(0,a*3)),this.decimateFaces(i,t),this.layers&&this.layers.length>0)for(let o=0;o<this.layers.length;o++){const l=this.layers[o];l.values instanceof Float32Array||l.values.length!==r?l.values=new Float32Array(l.values.slice(0,a)):ht.warn("decimation logic needs to be updated")}return this.updateMesh(e),!0}async setLayerProperty(e,t,i,r){const s=this.layers[e];if(!s||!(t in s)){ht.warn("mesh does not have property ",t," for layer ",s);return}if(t==="colormapLabel")if(typeof i=="object")s[t]=Vr.makeLabelLut(i);else if(typeof i=="string"){const a=await Vr.makeLabelLutFromUrl(i);s[t]=a,this.updateMesh(r);return}else ht.error("colormapLabel requires a string or object");else s[t]=i;this.updateMesh(r)}setProperty(e,t,i){if(!(e in this)){ht.warn("mesh does not have property ",e,this);return}this[e]=t,this.updateMesh(i)}generatePosNormClr(e,t,i){(e.length<3||i.length<4)&&(ht.error("Catastrophic failure generatePosNormClr()"),ht.debug("this",this),ht.debug("pts",e),ht.debug("rgba",i));const r=E0.generateNormals(e,t),s=e.length/3,a=s===i.length/4,o=this.f32PerVertex,l=new Float32Array(s*o),c=new Uint8Array(l.buffer);let u=0,d=0,f=0,h=(o-1)*4;for(let p=0;p<s;p++)l[f+0]=e[u+0],l[f+1]=e[u+1],l[f+2]=e[u+2],o!==7?(c[h-4]=r[u+0]*127,c[h-3]=r[u+1]*127,c[h-2]=r[u+2]*127):(l[f+3]=r[u+0],l[f+4]=r[u+1],l[f+5]=r[u+2]),c[h]=i[d+0],c[h+1]=i[d+1],c[h+2]=i[d+2],c[h+3]=i[d+3],a&&(d+=4),u+=3,f+=o,h+=o*4;return l}static async readMesh(e,t,i,r=1,s=new Uint8Array([255,255,255,255]),a=!0){let o=new Uint32Array([]),l=new Float32Array([]),c="",u;const d=/(?:\.([^.]+))?$/;let f=d.exec(t)[1];if(f=f.toUpperCase(),f==="GZ"&&(f=d.exec(t.slice(0,-3))[1],f=f.toUpperCase()),f==="JCON"&&ht.error("you should never see this message: load using nvconnectome not nvmesh"),f==="JSON"&&ht.error("you should never see this message: load using nvconnectome not nvmesh"),s[3]=Math.max(1,s[3]),f==="TCK"||f==="TRK"||f==="TT"||f==="TRX"||f==="TRACT"){if(f==="TCK"?u=as.readTCK(e):f==="TRACT"?u=as.readTRACT(e):f==="TT"?u=await as.readTT(e):f==="TRX"?u=await as.readTRX(e):u=await as.readTRK(e),typeof u>"u"){const v=new Float32Array([0,0,0,0,0,0]),g=new Uint32Array([0]);u={pts:v,offsetPt0:g},ht.error("Creating empty tracts")}return s[3]=0,new Mu(u.pts,u.offsetPt0,t,s,r,a,i,"inferno",u.dpg||null,u.dps||null,u.dpv||null)}if(f==="GII")u=await as.readGII(e);else if(f==="MZ3")u=await as.readMZ3(e),"positions"in u||ht.warn("MZ3 does not have positions (statistical overlay?)");else if(f==="ASC")u=as.readASC(e);else if(f==="DFS")u=as.readDFS(e);else if(f==="BYU"||f==="G")u=as.readGEO(e);else if(f==="GEO")u=as.readGEO(e,!0);else if(f==="ICO"||f==="TRI")u=as.readICO(e);else if(f==="OFF")u=as.readOFF(e);else if(f==="NV")u=as.readNV(e);else if(f==="OBJ")u=await as.readOBJ(e);else if(f==="PLY")u=as.readPLY(e);else if(f==="WRL")u=as.readWRL(e);else if(f==="X3D")u=as.readX3D(e);else if(f==="FIB"||f==="VTK"){if(u=as.readVTK(e),"offsetPt0"in u)return s[3]=0,new Mu(u.pts,u.offsetPt0,t,s,r,a,i,"inferno")}else f==="SRF"?u=await as.readSRF(e):f==="STL"?u=as.readSTL(e):u=as.readFreeSurfer(e);if(u.anatomicalStructurePrimary&&(c=u.anatomicalStructurePrimary),u instanceof Float32Array)throw new Error("fatal: unknown mesh type loaded");if(!("positions"in u))throw new Error("positions not loaded");if(!u.indices)throw new Error("indices not loaded");if(l=u.positions,o=u.indices,"rgba255"in u&&u.rgba255.length>0&&(s=u.rgba255),"colors"in u&&u.colors&&u.colors.length===l.length){const v=l.length/3;s=new Uint8Array(v*4);let g=0,y=0;for(let x=0;x<v;x++)s[y++]=u.colors[g]*255,s[y++]=u.colors[g+1]*255,s[y++]=u.colors[g+2]*255,s[y++]=255,g+=3}const h=l.length/3;if(o.length/3<1||h<3)throw new Error("Mesh should have at least one triangle and three vertices");s[3]=Math.max(1,s[3]);const m=new Mu(l,o,t,s,r,a,i,null,null,null,null,!0,c);if("scalars"in u&&u.scalars.length>0){const v=await as.readLayer(t,e,m,r,"gray");typeof v>"u"?ht.warn("readLayer() failed to convert scalars"):(m.layers.push(v),m.updateMesh(i))}return m}static async loadLayer(e,t){let i=new Uint8Array().buffer;function r(p){const m=window.atob(p),v=m.length,g=new Uint8Array(v);for(let y=0;y<v;y++)g[y]=m.charCodeAt(y);return g.buffer}if(e.base64!==void 0)i=r(e.base64);else{if(!e.url)throw new Error("layer: missing url");const p=await fetch(e.url,{headers:e.headers});if(!p.ok)throw Error(p.statusText);i=await p.arrayBuffer()}let s,a=[];if(e.name&&e.name!=="")s=e.name;else{if(!e.url)throw new Error("layer: missing url");try{a=new URL(e.url).pathname.split("/")}catch{a=e.url.split("/")}finally{s=a.slice(-1)[0]}}s.indexOf("?")>-1&&(s=s.slice(0,s.indexOf("?")));let o=.5;"opacity"in e&&(o=e.opacity);let l="warm";"colormap"in e&&(l=e.colormap);let c="winter";"colormapNegative"in e&&(c=e.colormapNegative);let u=!1;"useNegativeCmap"in e&&(u=e.useNegativeCmap);let d=null;"cal_min"in e&&(d=e.cal_min);let f=null;"cal_max"in e&&(f=e.cal_max);const h=await as.readLayer(s,i,t,o,l,c,u,d,f);h&&t.layers.push(h)}static async loadFromUrl({url:e="",headers:t={},gl:i,name:r="",opacity:s=1,rgba255:a=[255,255,255,255],visible:o=!0,layers:l=[],buffer:c=new ArrayBuffer(0)}={}){let u=e.split("/");if(r===""){try{u=new URL(e).pathname.split("/")}catch{u=e.split("/")}r=u.slice(-1)[0],r.indexOf("?")>-1&&(r=r.slice(0,r.indexOf("?")))}if(e==="")throw Error("url must not be empty");if(!i)throw Error("gl context is null");let d;if(c.byteLength>0)d=c;else{const h=await fetch(e,{headers:t});if(!h.ok)throw Error(h.statusText);d=await h.arrayBuffer()}const f=await this.readMesh(d,r,i,s,new Uint8Array(a),o);if(!l||l.length<1)return f;for(let h=0;h<l.length;h++)await Mu.loadLayer(l[h],f);return f.updateMesh(i),f}static async readFileAsync(e){return new Promise((t,i)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=i,r.readAsArrayBuffer(e)})}static async loadFromFile({file:e,gl:t,name:i="",opacity:r=1,rgba255:s=[255,255,255,255],visible:a=!0,layers:o=[]}={}){if(!e)throw new Error("file must be set");if(!t)throw new Error("rendering context must be set");const l=await Mu.readFileAsync(e),c=await Mu.readMesh(l,i,t,r,new Uint8Array(s),a);if(!o||o.length<1)return c;for(let u=0;u<o.length;u++)await Mu.loadLayer(o[u],c);return c.updateMesh(t),c}async loadFromBase64({base64:e,gl:t,name:i="",opacity:r=1,rgba255:s=[255,255,255,255],visible:a=!0,layers:o=[]}={}){if(!e)throw new Error("base64 must bet set");if(!t)throw new Error("rendering context must be set");function l(d){const f=window.atob(d),h=f.length,p=new Uint8Array(h);for(let m=0;m<h;m++)p[m]=f.charCodeAt(m);return p.buffer}const c=l(e),u=await Mu.readMesh(c,i,t,r,new Uint8Array(s),a);if(!o||o.length<1)return u;for(let d=0;d<o.length;d++)await Mu.loadLayer(o[d],u);return u.updateMesh(t),u}},fft="data:image/jpeg;base64,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ZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAASAAAAAEAAQBIAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAAeOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAAOEJJTQQCAAAAAAACAAA4QklNBDAAAAAAAAEBADhCSU0ELQAAAAAABgABAAAAMjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAAM9AAAABgAAAAAAAAAAAAACAAAAAgAAAAAEAG0AYwA2ADEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAIAAAAAAFJnaHRsb25nAAACAAAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAA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bnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDctMTJUMjA6MDc6NDcrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0OGNjMGI3YS1iYTJkLWZmNDAtYmNkNC1jNGQzMzIyZjBiNzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzFjM2NhNS1hYTg4LWI5NGMtOGE4MS05YmU4MjA3ZGZiODciPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6YThjMGNhZTYtODNjYy1hYzQ4LWI2YzAtN2FiODNlOWJkMGM3PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWMxYzNjYTUtYWE4OC1iOTRjLThhODEtOWJlODIwN2RmYjg3IiBzdEV2dDp3aGVuPSIyMDE4LTA3LTEyVDIwOjA3OjQ3KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYmI3MzZlZC0zOTRhLTM2NDgtYThiOC02Mzk1MmY0NDcxMjIiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTY6MTM6NTgrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RFdnQ6d2hlbj0iMjAxOC0wNy0xM1QxNzo1NDoyNyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTc6NTQ6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg3NjM1NDk5LWZiMTItYWU0MC04NWEzLThkMWFiN2NkZGVhOSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmFjMWMzY2E1LWFhODgtYjk0Yy04YTgxLTliZTgyMDdkZmI4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARY3BydAAAAVAAAAAzZGVzYwAAAYQAAABsd3RwdAAAAfAAAAAUYmtwdAAAAgQAAAAUclhZWgAAAhgAAAAUZ1hZWgAAAiwAAAAUYlhZWgAAAkAAAAAUZG1uZAAAAlQAAABwZG1kZAAAAsQAAACIdnVlZAAAA0wAAACGdmlldwAAA9QAAAAkbHVtaQAAA/gAAAAUbWVhcwAABAwAAAAkdGVjaAAABDAAAAAMclRSQwAABDwAAAgMZ1RSQwAABDwAAAgMYlRSQwAABDwAAAgMdGV4dAAAAABDb3B5cmlnaHQgKGMpIDE5OTggSGV3bGV0dC1Q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",wX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAEACAIAAABK8lkwAAFEQElEQVR4AeS1B3RVV5ou+F3lhHJCCAlJCCWEJEACRAYTDMZE4+zuSj1V1VNrut5bb70w0/1YU7NmpldPT6/3prunl6tcXu1sjI0xGZMRIJCIkgzKEhLKEsoR6c63zzn33HOvbjj3Srh79Xxsrs7+97//nf7/+zxghAvtnxCSEAK8Avw18LfA7rDYMPw3uBYEyfyPFOADFycq04G/AqbsO0xJDm7F/iOQKq2gbBIbgMsOZ1yWfPRDG7AT+HPMOoz/WpvAa0CFqV8hdf9Fduw28oGvNXHel/J4E3BWYyw1nctN/LmUGWq4G8DW2c8S97ATKNFsrQX4sxm/4ENgn4hRCBy3HDkvXa0LWAl8ZxnimGScKTyB32mCNgM/Nw/+D0CraWQc+J9n77bfAB5rln0sWZwiTaIx+v8zkOXU28ulHW1atMlj0brzT9YCa6VrWZqXuRSZVy7ioitheEe1O9Nr29NrH+HREIZc2sPP1B8n+MClsAIBAekZGelxC6uPs6pTfsZVNkgF7hi1gtKtFjtoz5kBoy0Mhx1EPuxk5fXr16elpfn6+nZ1dZWWllZXV2NmiEVsPOL5G47wYAT7wc8LXkYYJzAxjOF+9Hejuw1tzWjmh6vB9yr/LXBU+a8L/v6Ii0NkJIKC4OMjLGNjGBhAVxeePsX4uN44m92+oM1LgCWmzlOS1wXURqIvB2UalpZ8ik9haMiNFS4c4M8Ba2s/cE7P7CNun+yAHifyv7+tJY8Y9Mjq3LmYPx8REQgMhIeHeK++PrS3jzY2jvKqQip2bygHXtFMSAcygIvHrOIo/d3W8XdjEUTT4gdc+uFYv6NdzcGcBCREISoQgR7wYKr3oa8d7fWoNyqH8vT3nH5uYlLWBg28pQvyxuTEpMkUJ3I2LhShrCZ2RzHagx5WUAc6HOzqf4LE9jEWxnbgCz7Cf3P8RnlArvQlPk6iwpHzSd0CQF54Ba9sW7Tt+0Ubz58PMZk3ZGYufSkzZxEWncAJnkpfsJ8Cw+nptT9Lr6lAxX3cv43bTWjSuZND4mce8AuHXr+HS4iPR0EBcnMzsrLSi1OPCwEIOCTLzLsONaBW2ZCVAJC6f7A35ddmDfgHez6Zzre8d+/ed955p6CgICAg4OnTp2fOnPnggw8qKyvhOpigS7AkHekpSGExzMXcCERQAPzhLwvAOMZlAehCVytan+BJLYR4P8RDWnSuIu6J6fa/mC3/m/zHmQB4eWHpUmRlYeFC8VBRUZgzRxGA0VH096OzE83NqKlBeTnu3tWZQm5cUxxeXYKlC+XeAB7+n3jID97APDz8hXhw+dm80bMEw0tw86Ybi1wQm2Pd/8ps6te548WYAcjj5Xr8/qOFBvx3swg40oDly0V5ZWZiwQKh3xQAT08hAL29aG0deb9+5FI9+n5/aE4F/j35Kss0jVWeXoS4ErS0aKMdkrjN6k6Yq/lYtNNCAH7A//0D8+OYnV2RtQpQkIWsJCTFICYIQRQApjoFgElegxqmdzGKO9EZEPE7/99YzW4E/sA/PxfcqEUA/sb/L/snfOBTiMJc5HIVkmc4wmUBGMFIN7ob0cjyKUUpm829KYf7lVkD2k3GQw4EIDwc6/KwSVwPkH0FeSX43pHS6BSAxVh8AAf2YE/OvJzGRYiORkfHPaA+Pn5vRkbw7rjdiUiMRewRHCnXl0XJyQHp6dl7w7N3Ydcd3LmJm5dx+RzO8XaczjVd9zwp52zCqGcPCvz9sWULNmzAqlVYtizU2zu9VxAN2SR+2pI2UGt3JNPBVjLEj23iNOja9dy5czdu3Lhv3z65Gx4e7u3t/fjxY1cFIBnJTNPlWM5MzURmFKJsujF3qQd84kWmAmtBiyzeJSi5juvsOl1rifzHS7maH/TtcM0a0fLzsWSJeBd7mJpCVRUePkRJCYqKUFzsMCbcAnfAZpr812K1h/I3P5rx8A1Vt+uzhadbAmCiP9Z9pGLRFcbg3pm0WKyzckwE3arDNygIe/Zg2zbxiGT/6TgnRHxU0Onvc6nfVRU4mKUZzuhGerqVACjItegxM1ORmqu9hyM/4AfbWUZ2fgWvvISXVmP1ElNiWmEIQ3dx9xqukZca/P8yIN6IP1UHn2r1hxoQq3b+yd8QELC4P2E7tq/H+nzkx6gUbol61JP3LuLiCZxoF/RugdBpX6rHcgfXnZeH3FzVox95rGvu38EM5wLAEG/hrdfxegISxEXzphed7ug4Tg3MzOzJzNwLRNCHEheAgM/wGUnBWcij6elpGRnpgIcXvFZgBRs1hmR0FEcb0ACXcVp6j9uuUT/BlGR67tiBl16CQUmd9HRjevqjmpppTCqP/1ZaKljvCmo+Gme1hKOjo+fPn6+1pKSkUBX0RwhF6GZs3oANJNhcq2JSwdp8/hweHvDxgZdFqsQhjm0LthSjmFl+ARfO4ixmFVxg505s3Yr16xEV5cSZeyRRsK1di6VLxcfJk+jsnNUNyQIgoQxlJP1e9Mrdh5IY7MCOYDkzkpKEZ0ICnjyZ3Tuxg1lgfzWQcfZm+/vjnXfwxhviBe1hBCNsSBTfFRWgBuzaJSYq4ENmZODiRaenFbTEHxUTE4L9GXEawhBGNtuHfcxeB4cJROBarM1BzgIsOOIf7u8vL2t08gwBAav9Uw7i4C7sSkKSA2eOsnHPVIgv8EUd6jBzUADYTGBdsz8jAchAxht44228zWoX/eHhRZ1HFkV9W4TvgMnM/p7MO31IfQPz5lEe6DaFqTGMPcIjh1H/9/SwtPSrWRhfiY0bZRPVmEuwfj7BJ7Wo1XPYMhtfFimY7Xh+SgrefhsHDyIrS7VdwqVbGbdC0stxorLM1lISEmUFyHblabRZa5xx2Y6NjY2wcDQYGhoaJV/rAzODbLUVW9fDsjSbm1FXJ37Jnb29ojZVAQgIQGgoIiP51kI4+SthJVYyyci9zObv8F0LWjAb4JscOIDdu7X5rAsUwTffRHKy+DhyBNXVs7IdYPFiwenh4XJPZnx1kGkvW6imionO2dkvXgBmjfqtIhpnI9Srr+K11+ywP3PVYICvL9l/FErekrRlDcjPN7kxzagBcXFocZRXBhisBYDszzatInzhS/Z/D++twqrpcfrQx814wzsUoR7woIWM9Bbe8g3w9fafAE44kEj53vIDAt4KeItMGIIQ7ehzPPeyRbbLsTwIQUYY/4g/tqN9RtfNlMvNRVSUaghHuKwB93DP3iRHAkBGPoADVDOF/YeG8MknKV98sejyZfJfBJBZXBxNjjAa8Sd/woXpRudBDH6AD1rRai9sEkrTPy2NYC2tXYuqKuzfL2iF0ZD5Jt7kA/wev+9Bj+PD7td2moE/2PD52sH8sDCx7ltvIS1NNnDFIzhyGqevhl3tSe9BCg4pMvTfLWeS/Q/ZWELOCn31aJhxgdXW1j548GDFihXJpDoJRUVFFaweHSDv78GeXdgVj3jFxMq7fRv37omaqalBUxPa24UAGDXbpAZQAKKjRU1y0YwMkXAFBfD3Z1HJ0SIR+RW+qkTlzA6HzEy88w7eeEMIjRUeP3785MmT7u5u6p/BYAgICIiMjExISEhNTdW6rVghXtjPDx9/LA40C+Bh2SQwVcj15SjXjtsQALbTpzE1NRvL28Tss/+MU9Q8jwmyeTM2bbIcpyCXlKC+HgMDQgD8/UfDwkZiRxCrjJP9mcVmAZADUQNMAmCwtUWZ/QMQYJ4lC8A0MFH3YZ8V+5N5b+HWYzxuQxsFiQIQgYgkJOUgh40O+/33nw8YBAaAKw4OnwTs8fc/EHBAZv8neMKUqEc9E2YCE37wi0Y09ymTvjorHencUic6/2CTxfQjj1SfJ3+OjY36+voJG/KoAe4IAAVwN3bvxV5ehGI6fBiff44rV6izbNF8GhofPBDUEBSEX/wCnp505pQudL2P96dgO/XT5Yk9PTh2DK2tGB/Hz36GAPF4aUjjC/HiPsfnDk5qI/GpAbdduaytW7Frl8r+VJ3P8Nmn+LQYxcoW0/GNEIDL02b+1lGdGB3VJjOA6hwqNenBBJcEdGJ42PFejdPDTUxMHDt2zGg0ZmZm+vr6dnR03Lhx48yZM07PzdehSO/Hfma5Yiou5pvi5k3cuYPmZrsz+UwdHaKVS8QXFyeybdUqrFsnhFxKtWAEUww+xsdVqIK7oL689poN9qfC3bx5s6ysrL6+vrOzc3h4mAIQGBgYFRVFFczOzl65cmVhYaHqT0pgkJER/P736O7GjEAxIZtnZ8s9meutXJrQJFe7Ui/BwYoG3L+P2ccLpH6rNYzuasCyZSI7LHDtGo4cweXLlHGRTsLXMBIRMRrrqQpAVZXIL75XRIRpFtmfGnDxooMlZQEw91lRtgSAbL4d27dgi9Z4AzdO4MRVXC1DWT/6ZaMnPFORWoCCzdj8Kl4NDQhd6b8fYvSyvT3wzP+eAhCQFO0fbYTxOI5fwIVSlFajmnxIixe85mJuFrLWYA23sQzL1LmUhAY0UIGKUOTma82di9xcZGaK7/148B8fFBT8NfANGZWFeQ7nnuKpzXl2BWAndr6CVzhZ6ZOsv/lGMIXE/mxxgLQahKRHRood7N7N3lIs5cRmNPNabUaW2NWE27eFeLDo9+2TDauxugIVd3DHHonMQu6npGD9eqxZoxpO4/QxHFPYX93iSV2rGmwWidE8i7RIEabOJyIxBjFmAfivWNaD+HY0NIiKuHsXAwM2xcQ2Hj9+XFlZuWDBAh8fn2fPnlEDnJ6b7P8O3tkH5arR1YWTJ3HunKiutjadl6xsq6VFNIoHybC2Fq++ivDwFKS8gTeoph/ggza0ufc4O3eKPNKyP0939OjR06dPX716dfoxHz16RHtsbOy6deuqqqr27t0bEhIiD5EVuC9u86OPMCOQ+knlJpAppgsATMKgCAAx+wLwY/C+vSVdUQJDQICRpL14scZWU4Ovv8aHH1pkudE42tU10gWUm20VFUIDWKAKSA7UgLg4PqTBTu1ZC4DM/pOTVu5k3o3YqLWQ9z/BJ0dw5Bmeae2TmCQds9WilkPv+r0b7h8O/Mbxsf+W/wMzpwKnPsbHh3H4FE5pR5/jeROa2B7gQStaxzG+CmaFXI/1JD1SEN3ceac8UnWecifJTDoKwAP5gkg+HHNNAChTL+PlHdih9O/dE0xxQiF0WQASgHB1wunTSEwUxCq9OSc2orEOdXyH6cFJrZHaPtmHBbZihXhpCRReqog9AXAGnnnKicvSpSgoUHtksmu4dh7nzQ4RWo2aQV0a8RJeWmdYR4XPRCYFQDsYuRs/kT6YFMx4SiHl9dIlFwrNaDTW19frdN6Gba/jdTP7V1UJRaeuF5tkTx/BWDBCdzcOHxYH4Mcbb/AFF2IhZaYTne/jfbgOlv22bUomyyD7f/TRR19++eXNmzcdTGxrazt8+PDTp08HBwffe++94OBg2b5qFerqRCnzet2HTOUSalBDlmfOTPeSBYDJ7w1v0c/MFLMiI4XQzgL+BdjfFtnqAks5IcHSxAe4fNkwMGAVZAQYtbRQANjMAkBQANhabNw5wbIi+4dr2EgRAEuQ00gsyWRHE6pR/S2+/QJfDGDA3kGu4/oUpuZgzk/xU51nl2OewRl7DmT/z/CZP/yjEZ2CFNkYhSiyBJm6BCVwFV5eyM1Vy+ZJ3ZMHDx48eVInP4GkDHnncI6SM32qhy2TB2lrK7Yq/dFRfP89zpjP4y0JQKbVNPqQyiUYYOD0LdhisJW1GdNNd++K2jFhMRZnIMMHPngR8PAQySQJlYwylN3FXWs3rQC4VXoRiPgz/Nlv8JvfGn/7svHlRGPiNBdFB+fPx8svG//iL4y//rXxvfcQEKBzhV8B7ZoueXy7PVdmwB7s2Y/9Sp/l8dFH+OMfVfY3uH5Ksz+pmdE+/1xmumVYRhLk67t6Y0FBWLcOGzdaGL/55hun7K/i+vXrlIFvv/1Wa2RAhvWwken6kJIieJyUJkFmeZuOQxiyHtUox79xbLboRUQYIpXsVmCorTVIpKzNtCmJ/a1oqalJCAB/zcjIEDVrB2R/NnO/t1fMp+ZbIhvZOcjRWi7h0lmcdcD+Mm7i5mmcvjqdImyhHOWkfgfsL+MZnjHmRVy02iFVyp3LFwyfh+BgufcADyQog0EIykUuPWxOtVEWG7BhEzap0kTdFsxu8SC2BKC2VnhevSr3FmIhg2zExunxbbxkVZWYboIXvBZgQQIS3LkLO4cyIzERSUnw9VUNNaipRKXdXW5wZwdhCHsX7/4UP30Vr/IBFKtRJB3Wax3/XrKyISQEBw7gJz/BW28JRdcNoxrBHihFO7FzF3bxYkW/vh5ffolPP0V1texgcPeizcVM3vvqKxw9KvfI/nz9WMS6FK2gAIWFCAszWy5cuHDy5Emd7C/j2rVrp06dKioqUi1xcVi5UgR3ExoSH8WoAwGwIQ+zJgCG2QjygjdxzfwZEIDAQLO7oa8PPT2YmLDKHE/gd7YilZcLDjeD6ksNmDvX5rLWAkCZkZRGCw94pCI1XcM9Vai6jdt01XPw8xg7D3Tq8LyC4cto1hOzAhWUlkd4pD0IadMPfnAVublCACQ8x3NVANT7JvtTA2xOtWaaEISsw7r1Kkvx2VhLJlrXCsCc6cGuXUN+PlaskOmVQe7h3h3c6UOf1itq+sT2drS0YHQUfsrhyR3RiCY1w038r3ZHoqMRayamcYy3orUNbdZukdLvZTeX34M9B3FwBVZYWAcGhNS1tWFoCEYj5sxBQgIWL9a6bNiAsTE8e4avvzYbbWu3Les9W46k4+3YPg/zRIdLf/stjhxBQ4M8aqeqjTpOaVD/CO/bt0WJLliALVsCEMAsKkXp1/ha/6UtXYrly83d3t7eK1eunD9/3tXLp2wsWbIkPz/f1yTzy5aJAikudjUSRCZrSFzmd8qAPXfSCh2YTor4xcSIuWlpqKyE+/hXwf4Wb+0Mnp6imd2fk5eem4flELeBQ8BpG9PJ/tSA7ds1pvR0oQGtrVaeZAnyZhzizCZbAjAf8xOR6Atf1ULmLUOZzlP3MqmATOANh243hACgWvdl3sd9ykAGMlRLAhK41WoXYkBUHJM7JUXukf2ZgYODgxQANrmgkpBEDeBvPeqtZlsLwCqsWo3VlAGlz6K5cQMjI1Zuc2xupasLN2/i1i2sWwdJSxiqGMVncMb5Mch5vb0qNYcilA0vAiKwOXIvep/h2eyuwFOTcHmTFtazZ4WUMrWfPhVKQAEICUFyspDMLVu0MrBtG548EYzBGpBxyOYyKwFthQD/ry2vLGRtwiZuSemfOoXjx9UKsUUtFgXu7Q0PD4yPi/1OwzlpazfMhf7996JKSXkxMYUovI7rV3G1E516Lo0kmZ2NyEizpbS0tLi4eIB35SK6urpu3bp1586dwsJC2cIaycrCvHni7l2DzP7+/nKPpeWUNWQfRQDUCDMSALswSA9o1MXJLsADHlOYcmem0UZKuSFf3d2iUHhnzAoFzCtqwMWLVp5kfzZzv7NT5HZdnZUbn2Mu5motpMJa1Orf0g0dAnBFavpBorfaA/cZgxjXBCA3VwiACRLtPxAfGgEQXsilBjgRgAAErMCKlYJaJIyOsgpRUuLCbuh8544sAARDMSBZYBjDTiZSY7icCf7w94MfXgRYzAEB5mXFwiOzuwKpfz3WW5g++wyHD+PcOWsppVhSMhsb8dZbKChQzevXi4tXBeBVeyvxoaJNkey4rMVa82bKygRHX7ok96ZVpplHWGuUpMREhIcrAkB1bm1FbS0ePsTYmOw1KDWo0YzDw7h2TRxk715almEZc+6c0AnnYB2bq13Cw4cP79+/794TcG55ebkqAJAEJjXVXQGQ0IIWknsNapwKANsWbLGIQN0dGsJsIFWcIzUe8eEIZ5nQMorRHvQ0oakSlS6RmoooRGUiMwlJ/AhEIAWAMXvRyyPzvOUo1zobtInywsDkpwaYU4LqTQ2YO1dkoQbWAkD2Z5uGCEREIlLtDmGoFa3d6HZpS7935vCfgf/iSsBBDPKGuQ1uT90nn9WFEIGBgv2pARIYjbRfhSp+V1eD1dPcjPh4McRKpAawGAc1NQsrAWDFLsfyIAQp/Xv3cPcuBgdd2FBbm5jFp8vKYo+hGJBhr+Gak4mTk6KZ4AlPNrwIiMDmyFOY4sKzGD4DGTnIoYybTefP48gRHDtme0JDAz79FH5+iI1FQoJsY1LzWcm/lIaZgNxDNTJXyJUruHhR/rTH/vPn46WXsGaNSKqUFISEKMN9fSKZqqpERhQV4fJlWAmAgtu3cecONm9GcDBXz0a2TgFISkJysrnb1NRUWVnZ2dnp3sEbGhqqqqp6e3tDQ0PV+AsWuBglLk5w98KFck9mdqeTutBFN/IQKVX0vb2RnS3iUOndgfmhspC1DutYUMyxBCSQLPzgR/sYxrhoIxq56G3cvoIrMgXoQQhCNmMzk4SPtRALmbcUANonMEFRaUYzReUu7hah6BZu2Q/z55uBdHtjNj8V1AGn5a9/sBwghVADdu0S96cgPd2YkWHQCEAwgpnbydDkjR0BmIM5bGqXR3OV/V+Q5nEb3IwqANykmX71gFVKpiB7SCD7s6mDovNAEQAf+MgawKfUBrAQAA7TydznCzx0nvHW4JSyMlkAYFIe5wKgEwbXfF/QszkA05GFZO6Pj4vKpwY4QFcXzp1DZibee0+1ZWQgNXWmApCP/BVYoXRKS3H9OmprYZ/98/OxZw9eflkklRWoBGx81Q0bsHQpixGnTg0+eTJNACYmRNIxcwoLIxGZjvQkJNWj3vE+g4JEmkZFmS2NjY0k8Zmc/cmTJ1QRVQAYf948F0OQtdlM0CkAqqciAGocNwVAwU7sfAWvkKxTkWo15AvfeeJw8wp56SikThzH8Qu44DQmhWQ3dm/H9vVYbzXkDW+KAdsyLNuADaxiJvY36B+zHekQ/78ha4DROr0OKX//67RZdebBaQIwMqJogDkVWRJMu4sXVR+yP5t5ztOngv2bmqbvj0rpD3+1O4hBNv2Xb3TF0xWKEjsZwpC9fToHb4caoCxttCkA27fD01N0ZXq3KwAs1GxkM42UfkeHuM36eleOI4Hvxomjo7IuMeBiLNbDAs7xP7o849fAP+JHBWsmDnHmPgn30SMMDDiZdu8e7tzB1q2IjZUNCxYgMXFGO5mP+XzvNKQp/ZIS3Lply1FJ79Wr8dZbeO01MxEzpZ7gCROUdBBliApNDGUVh/0Ee/ciJYWUM3js/xgsHTYHUhT38WNUVgouApVwIYnD6dMLpomxsLS1tbW2ts7k+JzOINnZ2XLX1xfR0QgPR0+P7hAaAShHOTn9GZ7pmScLwA7sCEaw6CcliTjz59vkJodQyCQYB97Em/uwz+kEqg4vPAIRPvA5jdOODoclb+Gt1/Aa/R3HZD6/jbdjERuILz4CxtWHNiPS4s/0sYgI/D8QzQJ1jtcl+5NLzAJAjaMGzJ0LU2JYCwBph80WvODlpeG6MYyx6XwD/eyv9dcpAxOYYFO7LDTtPp2Ap+ftMK8kyOzfi151vL9f0YClS0U3HvEyIVSi0oYAZCCD2WOOXl0tytgNPH8uJlZVqcXDsOlIn6kAdLk5rwOIxo+HEISwabbdhfZ2XTN5aVQLkwDwb/TM9k3dZZErnbo6oTGSnNtMzZwcHDyIt98Wu5dxHudv43YtagcMA2QTUnR6YHpBUEEOcji6ZPFUzNeD0cPD3OMpq1g8BRcaH4ePzwIsSIRzHQsLE9SsRVdXV2dn50yO393d3WNJ9lyFTa8ALF4sEti0LZnTdS49hSnZfw3WKCZZS1wWABnbDuKglv2b0dyJTlKYJzxDEcob5gOpo37wI7OPY5xccBM3bUbkFFI/3eZjvtVQIxq70MXpjBmOcHp6wIP2zdhshHEI+NzZdplgW4BDQKHmNSTD30vfehmVZE4N6Osz5yTS04UGSALA7dkQACqG7S0ZDJrE5wNNYlLPHoxuPdiPBLJ/bq7akwXAykUrAEQucqkBtgWAV0lxME9lGdfUuLkzTmQzCQDDMvhpnP6XvrAfA9RwbTVidBRjY7pmtrTImS3D1xehoQgIwPCwmzuxUHRWUlmZLS+R4RERePVV7NunVNoQhr7AF9/hu8u43G/oV10XBhUUBs5bjZzVQNbgYMzg4M+BKKkdA3rNIY2C6ZqbkZw8D/PYnG41OFg0LfolzOQhOH1gYMBqlTlzdM9n9mZny5/P8IxsXoYy/avbFoDTpzE15eI5lgF79mKv3OGLlKK0GtXtaB/FKAUgAhHJSF6KpRuxcQ6U45Gyd2N3C1rqUEfP6UF3YicdrNj/Ei6VoKQKVR3ooLr4wjcSkSlIYfB1WBeIwJfwUh9K+SonrOMdFj8t4q+ZZREvJOCgNEb+v6DaDfp5lXzOzF292tSnALBdvAiJr9hYbspQQ4MQgPZ2m3FI91rG5/3IquYU8nFclQGDbk8veHlpSJgSa9S5WliYEAA2CXxlUv0jPBKzzcsbKyuFAJBX5s4VfU6gBpzDuR70WAhADGL40nxvZSLTlBdaXw/3wImcbkIUohg8GtFMLPxbxxSmtKkGH8qBj66Zvb3o69MayP7+/m4KAGub5UF2UPpMhMePYSc1t2zB9u2Ij1e6h3H4Y3x8BVesvGuCgthuAWwfDA5icJA1tFejAdWqa1ubKMXkZNYnU4sJ0IlOB7vlMXlYLUZGRobdlj5TBMJqFTZdoPbKlC1BZnOXVm9CE6fUoz4JSaJP8ZED3r/vShjBBUloI0d0o/sIjpzBmeu4bnWZZOrVWE3ifg2vJSJRNvLpN2MzReuwzM4aUCq2Yms2slXLAAbodgInruEaF9I6ByFoFVZVoIIixCrej+W2ZPmQYP9DWku80j9oMl/TaoBekP2pAWYBYI5SAEhmra2yAJhdyf5sdkA9Y1O7fvBj078NFyTLFfYnAhDArNTucxzjumaS+nNzYVBWI/uz2XRkxrHJAqBqwEVclLuKACzAAjbzpOZmNDXh+XO4h2fP8OQJuroQGamN//8HARC8iEGWjdKPikJsrNbhn+3NHB/HxIR23NMTXl5uboO8k4xkpcOnrKkRAmMNkdVpadiwAYWFiukCLhzHccH+0xEYiKCgSqqJSQBk8xogWmrfqp58+m6FR8hEbI4FwJtC4W3uTkxMjI/rKwP7mJDgYBVH0LA/QRp1VQBgkg1FANSYrgmAQCxihzH8GT77FJ/eEuJrDbIG67kd7UYYf4FfhCJUtpO46V+EohZBzwpIfFSLdVinjUD2/2f8M9l/enA+8/f4nnrGPfwEP5mP+T+xscdH/GeJeM3Y9C+9aGgQGtDaauYvZGQIDXBRAHgKipzanYM5wQh2aSc6NcDg4gFDEMKmdocwxKZrJgWAzQQLATDK+1D2KwYeYPt2RSzI/pxpLQDxiOfTmqO3MGdaXDyLJSghjGASgAQkMP5t3Lbrz1rVlKtUqt4z2oA9+PhoaYB6y4VnMTyZjqXIolX6qanIykJ4OHp6ZMOfQKUESxhZv39tYTG4vw3eNu9c6TQ2imYHK1di9Wrl+xmeXcZlFrzt1YOChAbIWxscNJoEgGAh/hz4D2q/rw/9/fKnVYrbhIeHaJqbEMDMMD0IC8Cg80o1AlCLWvL4Uzx1dQOyAOzADiWTMzNFTFYE1dFFnMTJozhqk/1VVKCCyp2IxIM4qBqXYmkOcrQCwOJfjuVhCFMtfO7v8J1N9lfxGI+/xtdRiPoVfoUfFxUVQgPMAkD2z8hYeKmJ7E8eV4zV1YL9TSU2HUxsNrUbichoRLu6k73AUYcO77l+Ol4pN6N2e9HL5nhKKf9nZyM3F0+i8US2lZPku9E93VHE7JU04A6pXyBa0oBsZJehDKoAxCGOzTy3owNtbZgJOJ3NVEXW8adjYECwhgnU51CE4kUgNFQwkgn9gqj6ZzE8ubYOdaw6pU+xWbdOZOdnn6k+DbandsziNnjb8zBP6Tx9KvTYFqXHx2PZMixerHSp0DdxcxCDtoNSANhkkP0HLdzCtJ2hIdHkSQgKROAsHu2FIyVF5O085fZkHncjDK+ANca5y7BMMcm6cvGiS3FqUHMJl9icepLEWdursIryL1sykZmO9NM4rfpkIYubULsDGChC0UU43xIPch7ns5G/Bsvt+VgnmFH5Mdhw1CvwZH9qwJYtpj5TNj09dW79otZFZifWF5t9dKCjHe1q1xe+vCK2JjTp3EYKsNGZz3rgHjesMyKQgATuwRveqoWb7ESn41mHxMw8fJGnsT14YiNFD5mHKQCHFAEgODMPCWYB8IFPDGKoRea5XV2izQSdPIj5JAzOJbjQOMblbLB+//Z2tLaqPTrzaqjwTFDMIubMQUICYmNVA2WqYzrzGtxfgZnIm92GbQEIUExr16KnBx4eOHVKfNguidkE5ZMXSOZV+rxbO3JO6l9iZgMwT+7irt24gYEOBMACo6OiSfCDH9uLPO5sQ6ZpCWMYc1sAYBKPGQrALXTeRK1OZz4fV1QFIBKRyUhmMsj0x4JaiIVJSNLukFPsSr4lrmGM3M/D+NsaXWt/4kwSvqNDaEBtrdBlBRkZi9JrzQJgNAqJcCgAT/HUiutTkUpp1C8Am6TmGOvE/bsgAGlI4za0lmY0c6uOZ51ELE6SzLNMhm5RuBKbWzua8OgRHjwSGRAjdTmT888J9oMH+xGIYKJYzCVPSVTlPrq7rSJwCS6kdg2mpqC+HjU1Wv/FWLwcy2e0h+lYvhzZ2VpDLWob0GBnT+5gGMPFKC5CkYV192788pf4zW+waRMChDAYp8/smLVT8p7NVz05KbScz2ENsYW0NFaT0q9BzSM8eoZndiWQ7E8NkDE4aHAgAM+fiybBG95ss3a2Fw1fX60AkB8p5yMYcS9YJSoZQSZfgZgYEZmXrhtPhADgvisrVqNaa4lHfBzi1O8EJGhHq1DFR9cZvFNogGjTcWG6yeigB5fKjPRerqHVeenpizIWRSFK6ZP62QYGHESgwjG961GvWnKQQ2H2gY+eDawENgpGcgJy+Xpglb5DecFrKZZmw0xHHeioQ12nuGbHIG93AROm7sfA+9IHa/NvpJtmmwL+Sjvn70DdMDPcv5OiSNsAwhDGZvYlZfT3w0F560FvL/r6tAZ5lVa0WjkqidDTY7x/H/fuIS9PNqzF2gpUsHj4vJgVZGZi2zasXasaylH+AA86DZ2zE9+ES7iUgYxEJFLhzdbVq5GVhfx8lJSIYz58aGxosK6DX0tNhtH9DYQgJBShSocPwWYLUVFISUF0tNJl8lEO7Qb18xMC4OWldIeGHGWI0SiaBA94sDnesEYvBLwkYGbwlKC1MK/ZnEBmf39/uUf6ZpvJNuQIW7DFIn5lpc7pt6WmH13oakZzP/qDESxbosULK28cg5hYwQNmNKGpEY3645P9lwFbnfoZbdssWX8F8LKma7AXggLAtmuXyCRiUXz8ovRFmAu0SMOyADgDdY71noQkuRuBiDVYcx/3z+CM44lUmi3I3YR5eu5nPRLLsKwKt7vR7dhzIzauxupIRJqPiQo9YvyG8t+M00DfF3iD/L/Lwv6F8p/p7F9QUBAbK56+paWluLh4YkLRD1Fm5As28zwW9gzZH1K1UZOHhxEQIBusV5kGQ1ERcnOxcKFxzhzZ/3W87gvfq7jKe6EwTgjRozTph1QF3t6IjBTsv24d9uxBsFIYk4bJy7h8Azcw2xjF6DEco9q9iTdTkGIeCA3Fzp3YsAEPHqC8HI94rEdGpnZzs8HGdUi/Me5sYA54g3OUDl+BzRbmzxdNBYmDdGA3KNk/MDAb+E/AW3CWJILzFdKXpMCJmo2NiaaZ7eHn5+ft7a2mqRtgBF9fXwer2IZM0BJa0UrurkY1ZgAbApCdjVOnhILqwC2puQRWCmVAFQDmoVp3oQgNR7jWswMdFF/9wfnkv3PqZHQ0Ypnqp+1HMTsODBhlDeDNMcIvqQEZi5AujY2P6xSAe7h3B3c2YINaGluxtQENvKtSlNqbxWvcj/2v4JUYfaVItx3Y0Y72T/HpMIbtueUhjzHNWSGB26MgOV3iEP8nA++Zb1Bc4heSfZlZAz6T/3zBwg366U9/+vLLLy9YsMBoNNbW1p46derDDz8cHR2FLACBCAxCkHmFkRFB3DMHg2gEgEtwIUf+jY04fhzh4YbXXyfX0GDEgt/gNyuxsha1Peh5jkrgH/6dCzs4hLeBDC/GREoK8vPh6SnMUmp9ja9P4mQVqmbhpHJMTd5zw5/gEyrBbuzOR76FJ49WWChaZ6dI3LIy6oGxtBT379uQgXZ39uIP/wAo166+5vTgsbGYO9fcbUMbKc9uUG47KIjUmC13HQsARZdNAvnFKcWQDK2CMWvnzJnT09MDdxEYGMggVqs4Yd24OEHQCxfKPZm7MTOQXxiEFJWJTOVmZI25eVPP9L8B/i8XV+xHPzXffA+a6uaHttL70NeLXpeCG2fsYbSVis5gKC+XBUBEXwQkpCfgojQis79zYScZD9/AjQIUkKBlC3P0AA4wOSkJl3Bp+pQMZGzDNgoAZ+nf6yqsGsOYH/zO4qxNelmP9a/i1dfwGn1U4zVcu4mb1GOn8dPkP9QAqcJUCU0zGMCWZv0Ia9eu3b1796ZNm5RDZWT4+PjU1dWdPXsWsgCQL9jMM3ibOi7UOagwmjgWrGQPV6+KM/T1YcuW5MWL3wQ+hycFgE2UkiRyrgjAb8XP60C0ycAA19Du035m/Mw3+OYMzszCMVXIeW26+0pU/gF/aEFLNao3YEMc4qz9o6KwnsmwHlVVKCnBjRtGHp+ZrgnmHnzhy6Z07L9mZKTYggxyQTe66Wp37aCg0KCgbFkAxscFYfPXHnx8RJNAFVTC2gcfvNeSiMLCwsLDw2ciAIwQEhJitUp/v8M5MjWbQOIuQxlmDFlIFAFQV9EnAHCdMXnhbGqXmcDHsJEYEiey6Y88c/Z3WwPI/qyMwUFDUJBRMEC8aUAWAH24jMuLsTgVqWyyJQYxP8fP52P+MixjoFa08up4XZGIXIiFS7GUlbtIKI54xCX4yLEc/xnwJ7i9GgWcxch88bu4W4e6LnSNY5x0H4tYigoVYiu2BiNYndiO9gu4cAVX9F6HzPX6kJiYmJmZqbVkZ2cnJSXJ30IApGL1MY8/pyg+x8wxMaHlCG0iOsKVK4lPn26oqFhRUFCQn4+8vFnYiQkDvx0oWl50bfm1ixcv3iq9NYuRzVDfxSje9UN8yMRiHvDVmWQLsMDGlEXMsUVYsQI5OaAsnzjBezPOQAY84cmmdOy/ZmioaDIoAL3odRQ0KGhJYGC2/E32Z3OAwEDRZF/J2/GGu1giXRaW6OjomJiYmpoauIsoCVardHc7nKMRgApUsOYpipgxZAHYgR1KzbP2uMr8+Whq0hnBJcacwhSb2tUmg0VisEBFiU78yOzvngZMTgoNYFux4ifAfwLShJWZ5YoA8LCncGoe5v0p/jQCEbKRmboP+9ZhXTWqO9AxhjFveIcjnKWaiETZ5zEeP8cXwJfA39o7J48TAviLdpfKQaJna0BDIxp70MOlSYBRiKKuRCNaO5H1+R2+48bcTzaD8mNzZwYJWouHh4dqEQLgBS8v6cP0OEbRZg4+2pQ5Ea1XsYNCFO6u2b21ZmvulVzkA5/NwkZUzAn5u5dfKcpZWpSyaCTiG5w6NZvBrSHfsBG3cOs2bheggGlBgslCVjrSmQrW/guZGwuxYAFiYvDll+jpcbGmtCvzeU1Pbv81g4IwZ47y7Zymyf7UAJ0CEBamagt1xYm0AK2taGkRbOTtrVji4+PnkyJnAEaIi4tTu6T+tjaMjNifsHgxsrMRHi73ZNbGbIB0LEdbgzWKSVYa3QLgEixe3xJSKhjtdZ2msyNX1zPVVQ0oL6cARK1Yka2wPyGzv4ZknKISlV/hKx/4HMCBuZir2iMRyWZ7XZRzym7B/s2Og/cBhwEffD6JyXxBXqCKsDmYMoIRBj+CIyUogVsYNYxStKaHHcWo/N3U1PT48eMYsor5JssbGxvlb8HI1hnDC3XlTu3Ckno8KDz8cQiy/3t473W8HopQ1ADVYiMlJaitFQX83OUd/B3/fwkv6jnJlU/igb+iJS7O8LOfwd8f4+M4f34WDmrCNuAQsMrCZlAq7ZbxFpUgEYmZyExDGn/JAZQEb3hb+G/diuBgcVUffojhYff2Ib2f6QXFrdu4dtr8/MyEyxxSM8YmkoKCKADxcsepAMTGIjpa/uxARyc6ne75yRM0NCA1VekmJycvXLjQ09NzcnLSjRsIDAxMSkpKTEzUxnfCtzIpS6BizaIAwCQn1gJw+rTOQnOJKH3hS4JTu8/x/LmpdCaEyE6oQ8w96/RzTwOMbl6LDQ0IkXjUFmpqyFyLOzsXR0WZTGT/igpXF2UZ8hKe4dl2bC9AgQNP0ugVXDmDM3X4djcaHR9VPksb8BEq+vGHZjRvwIYwhDmI/xiPz+HcMRy7iIvuXSCVZghDSuUKFleucxjDtMvf165dS01NHR0dZTkYjcb6+vpTp05duXJFHhUCYMEXloFmEZIaOMqUeZi3C7sO4mCoMVS2sGiPHsXVq+KhOztF8rqIQ59KWR6FqAxkrMO6vdhLCpZfcf9+Q0cH6upEm+WD2qxZqXoaQeVtPI3TyUjOQc5yLF+FVeux3kIaV67EyIg48OHD7u1gXEjbuNJhjfv4TPex0gWnr0P2XxIYqHScCkBCAuKFWDALW9DShS6ne2Z5V1ebBcDf3z8rKys7O/v+/ftu3EBmZmZ6errWUlvr8KFDQ7UCMLvsTzShiQHrUZ+EJNGnxsvL6Tidq6UYSPmD6aVAbhhVpZ2MxqYOBSCAzaXgBvfZ3jZsaMDfAX9h+9iTFdnPy7OxUeo8eyZ4oarKjUXv4i7TshKVK7GSz5CClBjEqFo4gIGneFqN6gd4cAM3LuDCNrWadKADeB/vV6GqFKV5yFuERfGID0e46sByaEBDOcopRZdwidtw+QAmimZ9keunj2vtfX1977///r1792JiYthtaWm5ffv22NiYPCoE4Dmes5lnW3GD2/D0FM0E61WmYa1x7WZsVjWTDPPll/joI8q+2zvo75f+dKObYssnIS3+Er8MRjCNvr7GjRtx5w55YfbVTkrsTioQ8I9mm8EsEJLu1F3BlTVYQ2rYgR2pSDV7cmdkxLIyPHrkxtoseHOd+/uLNg2Tk6Kp8IWvH/zsBeRQTnBKdnCcaYFRwST2EBsriJy/0jHJenr2/PixKOcdO8yWvLy85cuXuycAS5cuzcnJUbvUQ15kpYNC07A/UYay2RUAmERFEQB1RWen+ytB6KxnFxAq1CxU7ZLOKNfydz/6+9Cn9VTL7V8QRptsP81Kms4uz55bMVcRAKYLm7toQ9tn+OwqrmYicwEWRCEqCEEkvjGM8Yo4ytQlR/P23It/GZev43o2srntuZjLe2YdQqpN0lETmshIbDO8OrL8kK3soFFrHxoaunz5ss0IQgBIi+NaifOmFnrPcGdKHC8vtWe9igqJEEMQQrXMR75qvnYNZ8/OhP2tUYGKszibhayd2ClbSBFsp04Ze3pkw4tQgmkwKEcmetDzHb6rRCUT7k28SUowuxUWoqjIPQFgwas1jzlzRJsGoxHDw4LGZXVggkYgwl7AVViVH5wfFBxknmw0nWE6cnORnS1/yrqrZ8/d3XjwQHCkysNpaWlr1qy5K8Gl45P9CwsLU1JSVAtplsEdaJZWAFj5ZOpmNGNWwZjUFSo9q0v0MzPFipGR6OpyMGuV1M7rXsULXrGIjUa0+WLRzTSTv7vQ1YlOdYisR26i9pP19N4t8Cnw9uxejT4NIJkublkMlRBmJgAy+MrqQ/MeKADkqElM2t+mC6eYwMRdMHeV7PXjP0kAZvHeLIjeYBBNgj1hmA4P/h8RpaEpDl9f+PnNwu4Yh80E61WMpiYhGcmpSNXOLitDaeks3pVAKUpZhFrLwoVISrKzpxcHy2SnAHyCT77BN9riRFaW4Ahb3O0UvehlUzphYQgPt+lG2TMpH+IQtwALKMPT85wcsdF749r/vBYBJhNFIyDA9tpca9Uq5Ash70c/WY+6q3PbJSUoLrawbN68edu2bZFkSd0ICwvbunXrxo0btcZbtxzmEqWCXDxvntzjntkw22BBWkfWqI49FEoCEKh7lSQkJSLRoMmwVrS2oU39bkGLlf9CLNR/ikKp/XgwpaInPLOQRQ3AP0n9jg7B/vX1s7gUVZAEZZ/9ZwpS/+yyP6SkItc7EQaH8JC9BzFotrG2WeEzhyVNcAllT7Y4NhaxJBq129mJpib09c3udQlKakJTO9pVy9y5iImZ7vjiZcBSA5rRfB7ni1BkYU1MRHy8G7G70d2FLqVDDY6KIi9PP09LC5qbzd1c5K4SbGMhhcHG4L3GvTvGd4SGhtZdqcNr0igD2ro1ga1bQfINCuJnMYpLUDKOcZ3brqzEtWsWTB0fH7979+4DBw7M0SeEAQEBdN61a9f8+fNV440bKCpCY6P9aRoi5m5fkABgurRkZzsVgBBJAFbpXoIsmYY0raURjcx5+ZtpVo96bbFnIEOwqj7kS+yf9CKuxhmWYmmOMSfQaJJCsj/bjwrjrDnNHAZKvGAQsv+Q0QbR2xOG6fCCRItsZhurVyrgmYJFq4nTJ/jcLqMHIzhEZLuC3l48e/ZCru4ZnnEbMVD4KyQEwcGzEPYv+H+bqCctyHz/qDvCXdxlUu/FXrMpMhIREW5spgc9FLkRjPhDEvJ580Tr6bFyq60VnLtihdLdiI21qOUs6tAkJiGxwzZs24/9y7CsvX1t5fn/knw+WbgmJSErS4iTVkCInTuxZw/WruVnG9qu4Mp1XHdp5xcvIjMTKSkIC1MsK1asGB8f9/HxOXHiRF1dnYO5CxYs2LlzJwWgsLBQNXZ14fx5XLoEa8lVQYHUCAAJugxlOovHVVSikvH5NEr6xcaKdRctQlWVg1mrkVWKNQ9xvwMdjuNHInI5luchT7XUoKYa1VrG5x6YZgUokLt0XoEVlOoGNDgO7g3vNVi0GtEv4mYcwSgvvYb7NBvLy390AXBBKAw/1lokerbp2iOEATaEYTqEAJAT2cw2aovMi/0aVXAV05jVehVL8I194KN2JyYwPv5CrmxcBDaHZvn7+MxC2EP8PzWF16aQpVgm4XkIno7mUA3NkgcyLyuc3B2OcMUUECCaW2gW3NycilTRSUggO6KszNLF8Pix8f59bNokmJzg/b+Ld6MRvQ7ruA2unYY0Fh5/6XzmTFT3949e7n1Zmc1pXOH778Wvl5dYIj8f27Zh3z55/BROfY/vtdSjBy0tOHlSqNV775mNa9euDQ8PT0pKun79+v3792tra41Gc7Z7eHgkJyfn5OSQ97ds2ZKdna0ekP+PH8fp0+jstL+kzP7+klJKAsCGFwY5/hZssVjdoQAEI3grtjai8UN8OIUpB55024ANvvDVLleOcqsN3Md9VQAgCf9jPP4D/iCrvj28glcYPwEJL+5ybMIAw17s3YZt5qUfP8a9eyLxfjwYf+RT6wRZnlyvaA5526BIj1YYHEMIQDe6u9BlYQ4LE20mAhBOHgvXGjrRab3KvyEIJh8hh4+onD6OoDmY41KQ53huUYQeHvKLGlxPQPJFPeoVAVi4EKmpNt2KipCXh3ffVbrc8AEc2I3dfejzg18QgmQ7Sfm77zp9bpUUo3ilYaXYDaeRNJcvF+RKAYiNBZk3LU32P4Ij3+LbEpS4cZPXryMiAoGB2L/fbMySQIqvqKhoaGjo6uoa4VULiQyIjIxMTEzMzMzMz8+nGEjuShl89RW++QbFxQ7XkylYQhvayI9VqHJj2zphWwCoUUOOynUFVjzDM6bHd/iOHzZ99mAPiXI1VqsWVhyf4C7uat1qUXsLtwpRuBiLZUsOcjiRfHEUR22yhgc8yP6v4bXt2P7ibgZYCQyHYDgQw9yGEUYqXyISl2Ip2Z/N7HjzJm7ffpE7UWGc4TTDC9hTpYhrQLWIrSX6Ss0fRRh0QAjAOMbb0U52jkSkYo6MRFQUGhvd3yYjsI5NoMZwiTGMvYAL+VeDvj48MxenD3zmYm4MYnhwnQHIv4EINPdHRzGm3NhfAr9zZS81qKlG9VZsFR0+REYGZcBYU2OZkYaSEuPx42J8xw6z1Rve5kwAqR+HDwsmjcZFKkoUolKQIgbS00WzRA96TuLkN/jmOI67fZFc0dMTExPYuxe+vmZ7gYTJycnu7u5RXg6oQf7h4eGe9DbjBPDz0dFjR492ctsnTjhcKS5O8C8FUoLMzniRYJVxiR/wQyYypbv2VjSApGYDfK5flAz/In8kn+RLPU5Awg3c4PRWtMoeNKYhbSVWkiJ3YZd28mVcLkIRZcMq6DVcy0UuN0Bmly2cK6crgz/CIz6ibA9HOIMXoICKtRM7MYHGiUaS8ou5m0MUAHLXfxC/wxQAlkMc4rKQZbFiaSkuX0Z5+Qt9Jrep32aU2ZUBXhOq5D/EsCoAwnBLapZ2x/CS/zCfWtBiLvvoaMTEzGibnK6J8BRPGX9W7+FfH9rb0damNZAuM5ChUwDiEc/yDkCA2UQ56e1Ve5OAp+698LZZyc1oZljRz8lBXh5qaqY5Gr76yujhgZ4erF2LRMvSvn8fRUU4e1ah0Q50HMbhSUxSV/KRb7FVafQBHpBBvsf313F9hnd59CgGBtDRgW3bkJZmMUS6j2Z+2sUrNTXRJ09GHz9+7MKFiunDFpWdnS3I1wRScxnK8IIhy4wiAIQjASC+ax+JeTIcw9xYgzWctRZrKe1MqhGMeMIzDGHJSM5DnqLKEv4/9toDOqosTRP8Qgh5B/LeIWSQBEgI4REpTEICiclM0lRm1XZXVZ/p0zO1s3vOnO3d2RmmZ3dqtvv0ntM1VZ2T25llsysRJkF4I4yEcDJICCGHDPIS8t4gFPvd9yJevAiFQhECMqf66NOV9O5//+v++//fRxSh6CquUgBmrsjpV3AlAhFqwdiGbeR6Ll6LWqrUJCYd4UhC4OJUC+5On6HRodOjtV8hvPx1EaQRdilf//NsLq2tuHAB1669sceR8Zovp32tGnBM9ytjRFJNyT5gYrdFAJrRzMZM1JmDKL1Br3RMTg8MVHry+q92cZ95zvN7tW2tB+mqoQE9PfD2lg0pSFmP9cUoHsLQnLPXYd1KrDQyMd3b2+d9HLJMKUp1ArBmDdauJZ1r29tn5KImK0tbVycoKCYGvr5YvBijo2Lzigo8eIC6OsOMalR/js/LUZ6EpFCEesLTDnbjGCdlNKKxAhWFKBzAwGsJZ06OSJqaGqFMPHtk5GyO/wE4IIKtx+fL1l7c71ul9cXLbNy6pdjNlLVMvhJ4eEaMF3kth59TAPZgjwc8RJ8X4xlCQ8VtzaBzbOzst2Pen+JTb3gvxdId2ME2jWlZAJzgNHMOn+k0Tp/H+dnOcAEXfOHrBjfyvmKUal5UPdn/BV44wGExFiujU5g6NXrq9Kh3+ZsO0Gxoa0NWFs6ceZWimAtvQNdU674+GfgbqZmAdfdvpWYDdALA6m1Ag8EcQt4IEUzw4sV8jufoKBI6RKIeCVycW7zytX8J/Mq2Gf/4ynvaBFImq3ubrqhYYzuxswUtf8QfX+KlhXlbsGU3dm/ERoOJBEzy6+yc91ke4iG1JwMZrHNoNNi4EUVFLCGtmUTUFBVpObiUBLNUPPvYGDo6MD5uZtk+9J3FWTaShTvcZQGgsR/9rz2c1WSyahQUIDUViYlYtkykFSXKwwMODsJhYkIzOBj4/HlXa8uBXY278Az4Of4e+H/Jqj/5Cfz8RMvOpp+ZyuaKZF5eWILMy6/9CjNB7pb32oRNOpOsQ2YEQLzV2FjZsbFjWmjfxbtRiJIHGHZXuJpdvwQl3+LbLGR1oMPCMehA/eDbMfFMhkj9bGpLF7qykX1i9ETe6J+9MZp8CAQA/sAiM4P37+PqVZw+jdLSN7I53iD7Gz3nm97DRugEgLlSh7pudPvAR/TJFxERYBWRg+YBzg0PV3pcth71ltPRatgSwzf+oDNQXCzoasMGIYESyL8TmGCt3sCNGpgJZiACSQQswvfxvtFAYSFKSl7lLCMYuYd7d3GXIiT669fjyRPxoOaXFVHt7dX29lqxtPQCbfz5TiLMSLAFBSEqCsHB8PGBu7ssAJrJSQwOtnd3fznd0t3d2P1u67tu/9WNpxJZ4uqKjz+WNUBLDZhJrzLtShjAwHcmAMRjPDYjAJcuYXp6hq+WYtw4pvkSQ61o3YZta7HWF75ml6UDnzsHOedxXryORYxh7Df4TQ96GtG4GZtXYIVZtyEMFaEoF7mXcfnBaLt2dPSNReVvJAGQNOB0APz94eKC8XF0duLpUxQV4dYt8f2mUCwpkEXMMt4mNeu3SbXCrd/M1xuBvfJFeqpGtU4AiOho0eYnAPJcPbisWe5Tww52bEr35UvR3gSkhQ1Li13tXt/qXV0iTVeswN69im0XdoUgJAUp5ShvQlM/+l/gxWIs9oBHEIJiEZuGtI3YaLQOw8517tx5xePkIz8VqWSXAFFXwO7dggc7O7VtbbOoqMa2DRT3N68EbaS0ttmOOgWc7BLR7zqAAxGIMJxo+3b4kjB9QQ14KCq4CFjDf15eagGQGVn73QgawDTgdg1oiESk6Ht46A5TWoq/k11+oziTccfG/rYC/64WtQ/xkInEnAlF6FIsdYGLBhpSeTe6yeMVqKBWUvWtPMY0ps/gTCUqH+BBEpJYtP7wd4Mb1xzHeB/6qCis3FKUck12/3bU5++6R/UnVGGv+fUrbYtKtvgzqMH/44+AAKHczs6YmEB3N+rr0dv7Jh9kH3B0DpdZxtvmnmlms3OwbrfP3+SlJRgEgHnABDIwUUwMYmNx6dJ8Vl2+XExXrVw5VzIwlZ3hrHTHxoT2vwmwWkZFTenAHHNxea0bXL6M0FAsXYoNGxTbCqEJK57jOStqAANTmLKHPQWA9RaMYNMVOjpw5oyIvPZV+WgEIznIIV98hs9EPzgYBw9icBBff61lXdnI9/JpmPH/BfiVyZjmO5IBC0KVi1zyoKwB1FTDwMqVgk3YsrPvXL6cBYjMkgk3X+dCOmb7zk4v70jVaZUFgAjRC4Ao/d+oPcfYKHBwmcToTdxkC0MY02YJlrBkZAHoRW8LWprRPI+TVKOazRveFE5KpStcZQFgorajvQ51si6ySo6OjvLXzBJFZmz/ML+4MOeZ/2zfKc7Ne/zcmzmQiN6x7+LmBgFoQIOUka06SmLBxMcjMhINDbYtGREhJvr6yr02tHHZetRbnsRs9oKX0u3vF+1NQFrYsLSXF5Ysed17nDiBxYsxMYFt29RmiYT85phbW4vTp5GVhZoam/ZklWrNEXABCiIRyTfNRKbor1qFyUnY2eHUKTQ2aq3WAGXpICAWCKBOid5qIAPgNfeL3nckA7Me+QmeUABkGdiDPYaBwED85Cc3/Pyy2LKzKwYGsDgZf5+sH2aGl82PPecNCsAvhOTsBhZLhgSKEnx8IITZQLIvJQGYNJ7bhCa213ueHvSwWXAQZxodU5/NgOOmhmvzPcYA8G+l9j8Uzlki+i+k9iZw7DsQAXt1pxSlD/FQJwBEUhKSk20WAM5KTFR6JSjhskYOw4CbkcEf/kEIcoKTYunowPPnr3Ct/wD8jfmR53jeIXOXBAcHQQ4BAWJHY3RLf8lut2zenRLz29+ir48Mi61bhYjqSes/Akf1XlnSd5VCmGSlu3dx/TouXEBV1dy7ODnB0VHpvcCLKUyZdcxGtje8PeCRhjTRX7sWLi7w9salS8jPV+jaghKYUDoFIC4srKNpm579wyUXjelCb1wJzIDv+yW+lGXgAA7w1rL94pVFWdmHjh/3HR/3vY4zuE721+e5IOKy7/icIxi5rts3VW9LEhqAG78CfvU9RM4aaKWcPWqF57VXUIEFfHcwEoBiFBehKAMZ7nAX/VWrsHo1cnIwMmLteiTUlSuFbEgYxnAhCrmskU8lZCJSEIvYaEQr3RcvhOiQPOeJaUsp2ojGBjSMY1zRm2XLEBs7UwAUCr4l0ZyNGB3FN98IHi8q0jCG8fGIiBA6Y2dn6tnTo2lqwtOnKCvTFhQgLw8TE3Ov7+UlhMvTUzEMYYjNrC8vewInHCHUQqcBVOigIERHiw+qTpmgP2vpOigoLi0tNmDLrS8YlhTVwN8DOcAlg0FWgtcsA5o5xrV8/+nTOE0BoAxQA5hap08jK0s0YDPgJx31p1L7fnFCagtYwPcGIwEYxegDPLiP+zuwQ/SdnbFmDdLScOuWtevRPzUVbm5yj0txwREY68cMAUhBSjKSle7jx6isFDLwJkB2qERlOcrXYI1sSUpCSgpyc00cq1Tf2rl5ZwbEhJIS0agwy5cjLAx+foKy/xcG56f4LTk7CwNP0dWFlhbU1aGiQiPd2RxhRkDTCK1+ZPFibN8utFmFTnSS72Y7DIe+xteTmKRIvIW3hGnpUhw5IhbZuBGlpdxdnIEnoXTNhKMjgoMRHo6YGKxYEZaSElu43sdnUXc3x3ol3me7BjyzwNhl8r8p5WsemJv9FdzGbd66W9u9MuvdrKx1Z84oI7FYwAIWIMHepH8P9+7gThrSvOAl+unpWL8e9+5hYsKq9eifpmP3AQzkI/8u7pr6UAAGAQ9dLxOZW7AlGMHKeEEBiovneyGteQZV4yEeFqBAEYCgIGzeLFQnJ0dx6TEWAOtpR8CUpWprRZPxH3ltSQCOUgAYh3/GlOlGGjNr/nv8H43oeo7xcdjZiRNv2CA0QA9KbD3qG9Fo4ZBkw1/j193obkHLTuwMQICwUpnY3n4b1dVoaEBrK0jqAwNio6kpsZezMzw84O0tNqWGRUcLGSCJDiI2lr539dSfP2eUeGPB/kfn967zQdV41ZdZX6ZldV26RKXa+91tvIAF/InAVAAGMZiHvNVY/S7eFX0fH2zahKIiXLumdnsOOAPuJpPpuXEjgnVUfgu3uBQXNN2zUmrp4nMd1h3EwbfxtjJ4+zZu3TIQ5kxoZzKsjSBX5iI3EYkUHtmye7egvuFh3L8vG6pmCMCs26qZ2oqDDUoNFrl6pgz8OfACR3t0AuDrK3hZhSIUPcKjaUxbXnMMY1nIakBDFaq2Yut6rPeQdZivzMa3IxiFwUGDADg5CQHw0Mu1HrGxz+Libty5c00SgG5rwn5a9ztvzBVdEx3uB46jO6v70o2vpBN2AQeAJVjAAhagh/1M003cTEJSAhJiECP6W7fi0SOUl6O9XfEhgTvpOFwPT09kZGCLjlKf4ukN3KAGmNlTEgDvdO/N2LwHew7jsDN0dFZRgbNncfnyHIdmpR82tYVITY1vv519hSu4EoYw0h6vyS5Z7uOP4eCAgADk5aG3VwjAIQ5kAEstneSU/sM6TdKa+bQ4UzW4GL4BWGTGpxnN13H9Du5YdQSgAAXlKC9G8VqsTUEKhVD30DLc3ESbBZSQalQ/xuPC6MLi2NvwKhU8awNOSM1GZrcSlpbJltqfvZ6NFrCAfymwN2u9hmvLsTwa0Xawg6srtm9HdTV+9zvFgRzuaCIAO3ciMxO+vvycxvRVXOUiWjXl6ZFWg9jKHyT2J6Z7pWcIitXh8WMcP46TJzEwMPe5ybyPDT1S/1Hj8ZOWBWAAAydx0glOH+ADqh0tS5fipz9FTAzS0/vKy6uq/7lOt+K/mVUDkqwNstaqQUv8NQa9RpqgEpVncfYMzvSi19rjAKMY5QPlInclVspKH4GIIAT5wtcLXq5wdYQjn/4lXk5gYghDXLwTnS1oaUADpf0JnrAhFqI9wAIWsIA/UZgXANLKJVwKR/he7BX9tDTs2YOWFly/zl4nUAUshqAcHTeuXy8cMnRsfhEXOZ2LmF38fydvVA7EV24RsyRMTyMnBxcu4PRpNDdbe/SkmZ9a5d/JOac/w7Pf4XeDGHwH72zHdiF1wLZtyHCsrLxTVa1eP2ne4a3Qy6VRcC35Jpgd+zkHShHjD38XuFBWScod6KhCVQEKKLS1qJ3H4UjunM7mDGe+dSACfeDjCU8TARjGcB/6KACtaG1Eo2H+ggAsYAF/4rCfbeACLoQghKSQilTR37cPz5+jtxclJZUSidlLlLWJQwkJOHgQ+/fLE4tRfB7nOX22lQ/wt5LqUEkBePECxcW4exe3buHqVUxMzOsSu6VmO5rR/AW+aEBDOco3YANvuhiLNVVVCWxm3LU2Lv8BcNTUVmnGZjrp+Ezrz88i4TEifeFLsqYAjGCEjFyHumpUzytkRhjDGLWEzbZpZP84wA0YfvUjLGABC/geYG9hLBvZPvDxglc0ouHsjMOHMTKCqanKx49lAeDfTfHx+PBDvPceli7llHrUn8ZpTrS861htbV1lZc23vRUVS0tK8OABWlutPXGL/K/19dx/AhPncK4EJXdwZzVWJ/QnxFRVRdfWuigbqfa0EcettFmBqTKUsVnlq3k9kVnAAhbwLx6WBKADHSdx0hWun+LTEIQgMBAff9xhZ1d16lQzORuoSE9/fvCg3wcfIDKS3Va0HsfxUzjFiRaW/Q1QB9RWVtberKyq2khNsQlHZfY/+jqj0IIWtsu4HF8Zv6wqKBqIAu7pBv/wGjf6T1KbD/4vqS1gAQtYwOuDveXhalQfwzE72B3BkQhEIDS0cs3/VHnNE1gCOFZ47q9I3+8X6UPPRjRmIYvOVaiyvOb/LQkALlQCbBttPfFXut/Xj1GMFlcVs/GbgtYgbLektoAFLGAB/wKhgXZupwQkvIf3DuDAaqz+x3/Ez3/+sqXlNOASErLnr/8af/mXKEXpGZw5iZNP8MSaPRewgAUsYAHfOxbh6NxOXeh6iqdDGHrR/qLoTFBOjrMQBcQMDiIqavDFqstZ7llZyKpDnVV7/qfv+9ILWMACFrAAwN5Kvza0fYEvaiprFlWWAVuArZI5r6KCLfdG0I3v+yILWMACFrAA22Bvk/fNyptelSWA3Ii8koq8voo+bP++77GABSxgAQuwEXbQAP8rMKSy3QIyIOwz21+hv7UfyJbmsGX3dfThZ7M4z9asw78HpgCt1NqBv9DbqTX5ejtbD/Cvbb611lx704gHfqXfaxD4L0Cg5QO9ufbm8AbP/IrzR4F/9yd36Fnbn85Jv+/23eO7u9dW4Kax9XPA36bD2gM/+5kZeymQO+fkf5jt/hZZPhKR4Qj3gY8LXOxgN47xfvS3o70OdcMYllz8HBzg4oVFplOf4yNIErDCyDwN/Dcr7/sPNkUnMTExMjLSx8fH0dFxampqYGCgpaWloqKCH7AZ26Um4zqQI+ma1QgLQ0QEfH3h7g57e7x8iaEhdHaivh6trXitCA0NDQsL8/X1dXd358VpmZiYGBoa6urqampqam5unv/SQUEID4efHzw8IK2MyUlxke5ucQve5fVBA40//JdgiRvcnOBkL1JdlIs53LSwTjCCwxDmBz8PeDhCigYmBjH4HM+b0NSKVwq+v78uGEz46WmMjaG3V0SCH/OHjw9CQuDtDTc3LF4sUoXL9fejvR2Nja8YVVe4RiAiAAFLsZTfjKoWWgZkCEPd6G5DWwMa8JrAmIcghH894UmuWIRF8l5kiR70kDGe4dkUpl7XdhERESEhISx2k7Tv7u5ua2urf63JyRgyr7zh7Q53Jidz9SVejmKUTNiJTuZVL3otr/Bv+LtFi1UmEjf9Daa7+P8XokPu2rp1Ky/Fb1Zubm5u44wEYFUcJc/+n0bGUqnNgSVmrRYldz3Wr8XaJCRRA/iuTCBZAPrQ14KWGtSUoOQO7vBpXVz+0fmvIZWbgkfAF5IAEO8bNIDsf9TKsC+x/oVSU1MzMjL4d9myZX5+fk5OThSAvr6+Z8+elZWV5efnX7lyZZolOwOrzMeO1J8JLJe+qyT2v2H9UbBuHZKSEB0tCINsQQGYmsLgoCjp2lqUlODuXVRU4JWxadMmXjk+Pp7F4O/v7+HhoVTC4OBgZ2cnr19ZWfnw4UNGQKvVWruuRoMNG7B6NeLjmZXiFp6ecHISQxMTQgC6ukBdqanBo0d48ECw4HxB0o9DXDSiQxHKb/KUXGOkqgs2CsBGbExBSjzima5cijQkCwAzlgLQgQ4SUAUqilF8D/dsOiR1nK+6YoUIRkCATg2ZTaOj6OkRkaiuRmkpyspsvHx6ughybCzCwsQe7u4GAWBI29rw9KlY9P599PXZGthkJK/CKsY2ClGBCCR5UVllAWBAKABd6GIV16HuCZ4wJvye3wvyvdZgTSISYxBD6WXkveDlDOeZYlOP+kpUlqKU1IH5IiAggDmfmJgYExMTGhrKYjdJ+66urpaWltra2vLycmY+v+e9F3OSGbUCK5ifFABf+HrAg0lFGqSSUQDIhHJeVaO6DGWFKKQwmF1KcB4zZv80UgzGfxYmiZR+ASrZp59++v7778fFxdFQUVHB233++ee9xsVFAfDiP2qAuy030cw0WWQD0v0+7NuJnSwq3tysD6/KC6ci9SIu1jr/pYuLFj9VBjskAVDDS/e/d/5Hng179+49ePDgrl27goONjsouE2XHjh0rV66krh47dmyI5GWMfy2xO1uXap4kANv1XXncCjg74+BBvP02Nm9GRIQZB6rCzp2oqhJ0cvEizp3DfBEdHb1nz55t27atW7cuMDDQgmd7e/uDBw9Wr1598eJFVsXcSyckiENu2YK0NISEWPIcGMDDh8jPx7VruH3b1iuQm9Zi7WqsTkCCzB2LRF7rMAZcsHqp5Vj+Nt7eiq3pSJ8tXWWQ5h7gwS3cuozLtbAiGsCuXcjIEFydnAxvb/M+lZUoLEReHq5eFXpgxYmXi3UZ5DVrzKeKOsKM7ZUruHvXymhQAjOQsQEbSF6MrWXnYQyTuQpQcBu3r+EayRq24C28tQVbGPaVWEmZsew8iclylFNs7uDOdVy3VXJcXV0zMzM3b968du1aVrSnp6elew0Pl5WVFRQU5OfnX79+vb+/36a9lmBJJjI3Y3Ma0pKQRO207N+AhhKU3Mf9POQxwcwtSMqlIGqlLx2mFQEAWKEsZ/KV3E1OTu7p6WHl5uQYkY+9TdfAbDxqkf1Zih/ho8M4zMtbcGO5rsM6ZlsQgrJc3J2dNXMvjdfP/uT9Tz755MMPP1QsHR0dJHpHR0eSvp2dHT/eeecdDw8PrVb75Zdfmkz/M8FEojHMeg6T2d9V+r4uteq5z+HoiE8/xZEjeOutOTyp8GxkbVdXHDs2j+gwOXjfAwcOxMfHz+lMeZA9g4KCKIGlpaWWvLdtExq2Zw8VZu5zsALpv2oVoqLg64tvv7Xy/D7w2YEdMkklInEeEVCDSfge3tuHfZSBOZ1DhKaFrMCKUISexMlCFFpwXroUhw9j3z7s2AEnJ0vL8h3YqBCRkTh1CiUlFg+xfr1Yd+9exMZaFeGVKxEWBi8vXLw45wX3Yu9u7CZ5xSLWmuiR2vgKbGTwaERnI7sGNdZMJN3vx37qLjXAAx7WTHGAAzWJLRWpPN45nLuHe7AOTOC9e/fu3LmTLLlo0aK57+XmtkFCSkpKXFzc+fPnHz16ZOVezEn5ahQAK6dEipePXI/1yUhehmUMI5XV1Emw/bTaIAmCjjC9vb1ZqupRFqyPj4/JGrYJgBkenYufveF9BEc+xacskpmjfeijjPMhl+iFzBOen+EzjbPGxWUUuCXt+YoaYAP7x8TEkNwPs5wkVFdXU+2fPHlCwXdycoqKitq8efOWLVs4xI++vr6mpqarV6+aLLJBrwFCBiLXNjSQ/VOlkTZJF3KsOsq77+L9943YvwyMVROaRjHKw/B13d3djfyZDQMDuHTJpujwUkeOHPnss8+Cg4PV9omJifb29uFhkXbMfmaPg4ODMhobG/vpp59SAulQW1trfunt2/HJJ/jgA7i4qM0jGOlEJ2/BZHWBC+mbj24YXrJEzOKUly+RnT3n+VkhrC6SFEkHrwxSySf45CN8xLxV21+8eNHW1jY0NMRvan9ISIidnZ0ySgWmvyMcpzBVAvNsTe79wQ/w0UdYt87M6PT0tFa/oMJGlEJ/f13wZtWAtWt16y7RVdDcoBD96EdYvBjj47hxYzYvXudDfHgIhxheM8Okmv5+TE6Cx+YRXV1NxrdhG6VxKZZ+g2/KmLsWEYUo7nUYh8nmZoaZCYODFvbirAhE+MLXFa45VtRXenr6+++/f+DAgejoaNgIlj9LJiAg4MSJE3l5eXP6r8EaphOvFo5wM8MjIxgdFZVrbw+Ws6rEIIniD/CDUISSHv+IP/ai1/QJtEbcKAmCThJYmGQt9Si7cjmrYa0AmCdRK5h5H/Yxh0zYvx71RSh6iqdd6JrABFONLBCNaD4klZwOh1wO5bnwtt1AOV4JGpu8qfDbtm1bzNoAnj59+tvf/vbbb7+tqamRR5csWVJVVUVm3LFjB7uZmZmlpaV37twZ4SsaYynwARDv4RH30facku05OWQQSNR/HTOVfCYSEsAtSKAqXD96/Q7u1KJ2GMPOzs5hYWFr1qzZtWsX2Vkf63149gzl5Whutv7Ke/bsYSWo2b+zs/P27dtlZWXNzc0K5YWGhiYlJTH7/fz8ZDdKAidSJH75y1+Sv0zXTU3Fe+/h44/VOV2Fqgd4wL9taKMM0EIB8IPfMixjnbAZph88KPilrQ2FhRYOvw7rjuAIq4tFYjrGIDAa7e3o7RVlJj2AZfjDn2T3Ht5Ts39vby/r/NGjR42NjYOkIcDLyysiIiIlJSUjI8NFr21kn/fxfh/6WtDCrJ65OC9EKTRh/8ePH5eXlzPOrEztokVgbOPi6PSfnZ1lh8BAHDkijt/Tg6amGYtyeP9+vP++CfvLxfUcz8cxbg97sjAjnIY0JzgZHaizE/X1IkozoIHmY3xMLcxEptHA2BgePkRVFVpa0NeHiQlBymRkHx9ERCAxUaSuHjGIIX+Rkij2zNvZwh6MYFIkPamjRgO886NHrEORBorYyHuFh2PFCrGdHrzjZ/jMDna8cj7yLbwyq+aTTz75+OOPvb2NNL67u/vJkyd8ZX6MkpQBVpmPjw8LLSEhwZ9SrAfl/0c/+pGjoyPTPj/f0l68EfOTV2OSGw2UlaGiQrxod7d4XZYPOYcCEBCAqCgkJyPUkM9bsZUM+RIvv8SXL6BKY8H2RnWnFgDe5d69e0xU+eSsUx6VyWZywrkFYFYGtYL912P9LuxilaqNl3H5Ei7xkSpQwdeSjbwhg5WO9J3YeQAHXF1c453fBX6G+UNj6wTyOzkuUZ9VOTk5Z86cUdif6OvrO378OBmQCUHGdHV1XblyJb8LZyGppMzMuO3b4zcFxMfj2rXCx48pAIVWHYVkuH692pCtyf4j/si4DWFIdz2NZuvWrW1tbT/84Q9J0MJkby9m5eVZLwBcgTKWoCpa5s2JEyeuXLnCS718+VKx29vbp6WlcfS9995bsUIn53FxvN92stjNmzeN1qUmvf224CYV+1/ABbZc5PLdTY4RichN2LQP+8ihBuuuXaisFHSjOoYaqUiVSYrFbzRw7x6Ki3kTwW6trYJHhoetEYAMZDD9AhCgWKj3p06dYjQKCgoo/IqdT79+/XqOMhokCNkYhCBO5+1O4MSMOOOdd7Bxo8FCZc3OzmaOFRcXNzQ0jJAFNBpB6CtXIiPjP1PLmTQ6oRWBJN9+8YWZ98OOHfD1VQz1qD+P87dx+wmedKBjDGMUALJPPOK3YAsrazmW61wpXdu2oaTErAAcxEG+hSn7372LGzfw4IGIbWOjEfvwxaOjsXo1tmzB7t2CyCSEIOQQDnWj+3N8rhS7GjweT8W9TNn/yhXk5gr5l8XGJLvIkgzUpk3YuVMIjwQHOBzG4R70tKK1AQ1mnzgqKurw4cNHjhxRsz+Df+3atbt371Lm6+vrOzs7ZQGgurPYIyMjk5OT161bx0pZulSXaW5ublyEE3t7eysqTPNZOc87eIeRNGJ/RvvyZVA2qAHMT767GnzK5cuRmqrLGEdH2UwKHcQgH/Q0ThucZwiAFlqtnpeZVN988w15P1TSkqamphs3bjyb8daWBMASg1rB/hpoWNUsKrWR2fk1vj6FU1OYUtsnMPFIyP2jRjSS437o/sMIj4i593h97A9J2MPDw+XvxsbGkpISVriJz+TkJJmRlEcBYJfJwfpXC4BGiQ0LePv2xdu27RZEOewTl9Odk9NOCeid6xzMb87VkyxRhrJzOHccx41eQKu9devW9PR0YGAgaUhnJZXHxFgbI42Gab2JVaQH5YQK97vf/Y7XN3Gempq6d+8eHbjjT3/6U/n6xMaNG2nPy8tTqwU2bBBEQDrT4yIu/h6/N7mCApYrG1PcBS6sGZ2VzJeeLoqhoGDmlDCEySRlxP7V1bh6VRAHScqENeYCq3Qt1rLSFEtra+uxY8f+8Ic/kBRMnFn55O6Ojg7e+sc//vGSJUt098aGe7h3C7e60KU4u7qKcs5UcenY2NjXX3/NxRk39YvyAUTjLfr68NlnigYkJzOVUF6OO3dUhyBZpKVh7VrF0IzmP+APWciqRKX6tMMYpjBUo5p68Bf4C4PCka/ZyEfd3Wr/NKRRjHdjt9Gdv/0Wp0/PdNbvMSyV7yM8foz2dnzyCfSlRGZ/G2/XoIbyP3PeLuzii6/ESnV0cOwYzpwRTzk+bn4vsidbaSmJDR9+iMREecQTntzrKZ7+E/5p5jwm/J49e/bv309aV4zkRGr8xYsX5WpS+w9JqKur41uzTJ4+fXro0KG4OJ1QeXh4cCkmCamWDzpzu83Y/Bbeika0wVRTg6+/FmHkW5pFFxOnSzxzZSWeP8cPfiDYQMJO7KxFLXWdkTQkjNaIiCVBMFyhQIKPjw+/u82+GmBn/hwWGFRrFfsTqUhlJhmyDShBSTaymaAm7K/GFVw5gRN0w/yhmd80Ly8vReGpnC2zMAi1lKPyt7e3t1L8pmDFs2olPIrMyflJTvtfteOvBEnMAXJrWJjaUIzifOSb9b19+3ZpaenExISu7+EBf38laSwjOTl51apVcn7IuHHjBithJvsr4NCFCxeuX7+uWBgxLsKljPxWrRLcpAcLkgLAZ7V8nvM4fxM3O9BhMCUlQV9vJtiDPSQpdXYhPx9ffIFf/hKnTtnK/pB4KhGJagujcf78+Znsr6C8vPzs2bNkB7WRi8QjXm1hJChk6jQ5d+7cyZMnjdhfjfp6TVaWYMD+fsW2ebNQVSNQ6Y2Dcw3XTuO0CfsrIH3wFShORtblyxGtYijAGc6ZyCTdGLmR/f/wB0Fes/CIAcXF+OMfhb+KuzOQQTb0ha+JbyhCSZGme/Hu3OvsWfPsrwbFhp7Hj6ufOwlJm7ApGckz3d96660dO3YkJCQolubmZirxr3/9a761CfubID8//6uvvqJzTY2ef4GoqCguyGXNTklBSjrSDf3JSXEpatts7K/GtWv45huRAyowhuux3tAXbG90ZhMBkNEtYbZ97OY+ihpaG3xXYIWRsAO5yL2Kq3NOZJrSrRrVmA/mx/49/F0sQe6Pj4+Pjo6adeWQQriOEsw4kfrZWF1AFapykHMDN/iAQgDY/gwIm/0spAq9DhEv8fIZns0WDa1W29PT069iCjizhJ2tCVBcXNyKFSsUO4vh/v37RUVFliNVXFxMt2fPnikWLhKnZqLwcMFNKsIrQhEFTDtX9vCmJSipQIXBFBWFiIiZnluwZQd2GBU5yfT3v8dXX2lqajTSHTU2pkIYwiIRqXQ7OjoYCl7W8izyQkFBAZ9AsXCRMOPXpYqtXm3oVlVVUTPIOJbWbWjA5ctQCS1lPTXVaB0EBSE01HBgdDB6j/DIwqoFKChF6RCGDKbgYAQGqn02YiPDG4Qgg+nOHZw+bUJGlvDkiTi86oIOcFiLtalINXEknZGsF2GRwXTlitjo5k1r92pqwvnzgi5V4F4kXxNHd3f3zZs3Z2RkKJYXL16cPn36+PHjFRUV1mxVX1+flZV15syZgYEBxcgFN23a5OPjY+IcgYhYxHrD22AqLMTt23j61NqrMaV5r0eGB6W2rcIqP/jp+lqWlFFNGQsAC+e3Ksrmxz+QXEw2MS8A5ivHFvYnCS0X/LdcsZShrBCFTWiyZnouWm5jBG8Em2ZYhoGs17kDi0oWAAnXcZ0CoBvyBT7Sy8DOWcLv5KRm8GEMD2LQUvApWvb2hu6LF5iaMutowonR0dHLli1TuiyDx48fW3M/ulVWVqrXiSJTKyBXBanoA6hDXSUqrVmZUteMZkOf9/Lzg6+vUXjgtBmbt2KrwVRejlOnNN98oxkctHxlC/CFr6G0gMbGxrq6Omsm1tTUkBoMt4c/l1K6AQGIjTXiWOoKFXTudVn/ZN72dsWQmIiEBN13L5unZ6+XV28v5NbR29HS2yINmGt6MLxtaDP0qdNeXoZ4w57sSV42OJDscnJw6RJsApmOdxweVgwrsTIRiWqXpVhKSeB2BlNHh5ANiodNKCmhDlNXFUMc4rgX11d7rV27dt26dR4eHorl2rVrly5dsjLnZdTW1l68eJH6rVgcHBzS09PT0tJMPAMQEIxgk8lCGm1CQQFKS9UGisoy6GtWsP20elQShJlMobXA3fYzTa/O/kQoQsMQprZUoeoJrL0/FTkPQsRTbNt2TqQDHxpbJiX2f20CIOJE6s/MhKsr9OxfjWojp9VAvNTiIKShwtKCrMnFWDzrMKWChOvtreu+fCnIoL9/pqPJswYFBYWGhjqrlIYsxvy25o50U1Oek5MTlwoODm5tbR1lnzXm6YlR3egE+rrRPSniPAtcDJ996OuH8eHd3eHmhq4uxUDKWId13tBfeWKClKE5e1ZNN1altDFc4eoGN8NJ+vq6u7uticbz5897enqULhfhUko3LAzh4QbnsbExauecpKOrNlJbWZmiHhQS6jU1kfp+FJLw/52DatLkBIM9G36h+z+AgSEMGexOTnB0VHrJSF6FVV4wSILgcdKr6oJWYWwMjx4JYV63TjaQjmMQQ1pQBJ4cze2MZj14IDRvYvZbzIaHD0Wg4uIUA1kyClG9KulbtWpVSoqBTrq6uvLy8m5Qb2xEbm4ul6KcMOdlC5el5fLly1qtgSXd4e4BD6OZjKEqja1CTQ0aGgTL29nJhhCEBCFINzpDAKS+sLzF3wggynS9ElFigOrS9tYfxhOezOxFWPQCL5hDIxix4OwP/0AEqi2NaKxHvfXbUQBSbRYAy5WeIrG/iQCQ+o9Ju+GFBNm6ePFiarvZVRwkyN9TEoyG164VArBmDT/b0CYLgJlVnIC9kgDESxpwSjU0NISBAaXHmAcj2E/j9xzPzayTmoqEBEO3rg6NjdCayvXMuPj7+wcEBCjdyclJ0ndbW5s1Ue7o6KDnxMSEo547uBQX5AqCmEhR2WyK+wtL7E/8reGTnswuo1HS3GIj/VuN1akiNfTIy9OwjJ89w6uBic1mOLQqGSyDoVN7mqxDdVaFGS0tLU1NTXOuqZE1oLJSUMCuXbKRcaWWkHbICf+N/f+usU7aJPxiFrsxicQjfgVWGDlQhAoL5xPQ6mrU1ioCQIQjPAxhigAsx/I4GCibEReaQSqfPXW1s+1VVSUCpQI3otgUoUjuxsTEJCYm+vr6Kg7FxcUFBQV8u3ncrLCw8OHDh4oAeHp6JiQkxMfHV1RUKD4maaAL9cuXtu3EKZSNvj54e8uGJVhCHtaHQ2tS6YoAHJX7nxlpQInUBGwSgCQkJWgTIhHpBz83uPFWrNJBDHagow51ZSh7BjO1R8FnU7oDGKA/ZcP6uzcCP8P8ccj0GkmIkdnfW2XNmkDWBZmgvyXrDvQx1hL8/PyCgoLMrkw7R+Xv/v7+wcFBw5i7u2D/zEy5R+pnG8bwrKdcJrU4YwEgC7e0qL1Ykyux8hqumU6PjcWePdiyxWBhuZaXm3iZJQlvb28fHx+l293d3dXVZX146cwpwcHBcpdLeUs5+nf8vSw1K2Fc0w5wIN8bmcgLKollHiYiMRCByqimoAB37+KVMYGJcYw7CWXWybwib5ZBNzorXS7CpZSul5eoBAU9PT2MmzXLilfr7NQ2N2NoSOSVhMBAIScUAAl2UrMNpA93uBv6XHxYl592sItGdAxiDKMkVpLawMB8AtrYCGOpC0CAP/zlb8aZTxmBCMMwGZzbjY1ZSF12vzK71/g4GKhftwK6hKTykq+UcQrA8uXL1TOePHlSVlY2n3sBnMjp7777rmLh4tHR0WoBYBqwGU1jHpA39I+n4L9a3owS9U9qlWKq6ZPNWLwJrb6cNismw5ee/Y1hKgDqiMcj/i28tU67LhnJzAxXuKo9+9BXjepiFN/CrQu4MAajl2OSecBD6fajn/54szDKlqPqTlwcPvwQ+8j+AYqtDmd+L9j/gq7/LVpbW5v0KcuMWbVqVW5u7rNnpvK2evVqqr383djY2KIiay3Zn41lChSikOzPv3MfPMO4294uKqG1FXp6TUPaBmzgUgyjwW3NGhw8iA8+gMS8Apx1+zaKiy1TvwwvCUp3QIL1sZb9FQHgUp6enja8lda8mUXrAx8jE+myt1fpLcfyWMQaLvj4MUpL52ComXuZi0svervRHYIQuUtJU2TeMvz9/dVS2oWuHvQoXRcX0RSMjo6OjIxYHyfN8+daRkAvAHxq5bWla2hsjXY4wpU7CrS1UWbkz1CEhiHMSICZ/HV1Zpe8NOemJECufImhUE7svRSSGO4mTwcbHQOSYBiT44y7bQdy/lx31JkH6hDNIADc1CC84eHhkZGRSre5ubmmpoZijHlheHi4tra2vr4+KipKtkRERHALtQ9zgJlgNC02FitXzhSA/03I4ez43exDWhK+4WklNZi29S72sw3swI792L9LuysGMWYdlmDJOqxji0OcL3y/xtdDGFJGqfBOqnuNYGQYwzadTGvrVYyRpHxFRwv2Z4sypM1FXMxC1mmcVk9hQlDYq6qq4igYQGZmJtn/5MmTFAbZwc7Obv/+/Tt37qTay5bHjx/TXzefs8j+27bxk5cl+1/H9bkPqjHKdd2tHz5EQYHgdwme8MxAxhM8OYmTou/oiD17sHs39u1DgF7SmM3nz+Pq1VkpjjJzy9BzdXV1c3MzPNDICNPa+vDSn1w222qWYPFd4xG/DMsMfYprfT36DbIXBdZclOGONTXQx5/cyFwls5BlyLp2sJvUTlIy29Feh7pGNFo+Ax0a0KCwEms7NtagNLO+nkZDNyUfiHrUq/eytxdNwUsJ1seZ2qYZHFTOS5H18FDG7KRmA1KRmoxkV7gaTLW1CiUFICAQgUYTmPl8AnM4as1+93twv1clAO5SEwJApfeHv5EzpUhfaJhV2fKBjRxsnjnSTBnrUPUdpX253ZCDg0NwcHBgYKBaAJqamvAK4AotLS2KAPj5+QUFBTk7O4+NjcmWJjQxE4zmbNyI0lJwX1a3McYtKPnE7IcQhD/9OgVAOcReuH+Mjw/jsAMc5lwiE5l0I8X/Hr9XjIuwiE3pTmKSzfpjvSL7GxAWpmf/KMVGXib7H8Oxme7379/Py8uTBSApKemHP/whU4cs39fX5+joyPfesmXL3r17ZecbN27cvXu3q0un81qyP5sEsj9bG9owV0abQOd15w7WrNEmJ0PPLBQAmcUKlw/o2H/nTnnov7P19mqPHcPJk3j61Pw+t0xL1lmC0p2QYH1cTfy5lJOTQe9h67UlkNk3YiNJymAqLsajR4Zd4ByKUFK8weHZM/JXGMI4MQUpcYjjtw98hABctpvABAWgBS01qClByR3cKUf5bLtXoKIMZZuxWe4uWbIkPT1969atubm5Fs6ckZFBNy8vL8XyCI+4lNI1LlIslmB9TDA+HjM+/iXwY6nnwou5KGPWCYC+lpzgtBVb12O9Yai5GY8fKwJABWXojOYyt/XprYa1j1pA9u9V9fUCAFCk2Yycu7vN7jXLlWYegezfaWxZKmnAkJ8EI9eOjvb2drwCOjs7nz9/rrZwCx8fHwqD3B3AANOpFKWrsMrgdOgQKwdubsjLs+ZKc+C1C4CMbcARHPkIH+lSZ3CQtMIbg+JGVvf0FKyqJyYZLJtmNFeishCF5o9qy+Hmxf7mokfNl9k/Nlax3cZtUj8FwOwqT548uXDhAt/ywIED7K5evXrVqlW1tbWDg4MODg4hISHkBdmztLT03LlzV69e1c2U2X/5cn5Wo5rsfwM3bOdAFXJyNDz2v/pXSkD2Ym/7jvauPW7PyP6qG6GpCadOaU6cwIMHswZ0BomZMNFLCdafzsTfQcIcjxJvKkJqhCP8MA7vwR57JSfr60HyvXdP8QlAQCACDUv39KC9/a2R9N3YvQ3bjJSDa5wB2cw31TcGMRx9iqdUiEu4dEYMzDimFkzgu7i7BmvSka5/0u3Pnj3j05eUlJg9c2pq6v79+3fs2KFYuAIbJUe5/fi4qBsFbm5u7u7u1seZdZPCZogzVI+mmTu3VLW0H/sZKMbZYLp/H4WGgvWAhyc8DaM8+sCA0eltBtm/R9WlXLkBrsAI92Iz3Yt/ra2YmYTZKWmAGt6SBjyjPC9daiQ2vb29PT3qg9l+sd7evr4+tYXMwI0UASDu4V4uchORaEhpMtKPf4yQEKxYIRK7tPSVNECrFc0wXfRtvYipACQDBylU/OFSFKtr18RBKyrQ1obRUSEAZMCoKKxdC9IQlUCPTdjECysC8AIv2JTRRWLmIivPpJm/DKjg46Nj/8RExVaAAlI/2wQmZpt39uxZMuPo6OjOnTsp6RqNJiYmxsQnNzc3Ozv7+PHjIyMjoh8crM3MFAIggezP9krsTzx5gosXERqKvXvlcPj/xP/gnoO9u6O/cnIaVNxYwOfO4cwZPH5susIp8ZCzYZEEpauVYP3pTPxNVrPp5t7wJndnIGMf9iUgQWdlsl28qKG+qmTGF75+8DPM7O090NPzAX78Lt51gYvRolNAtpggmpSklAG2YAS7w/1rfG1aKtJhr+P6cu3yEITQjV0PD4+PPvrI0dExJyenqKiopaVFcQ8JCVmzZg0z5NChQ+R02diIRgpMjiZHvTBprb8f4XrW9fX19fPzsz7OPpQZQBEAOzvRVHxqZ+x+aTb2P4ADH+CD7dhuMFVW4tYtoQF6MIZGYeQTyOk9f/RIGqCGu9RGnOH8ynuZEOa4pAE9Eu8T3cBV4KHY0t1deSMZQxJe5WIzV3CToLbUo/4yLjOdDuOwwUrh++ADpKSgoAAPH4qyJbvqU8ucBvx/UoMZUpyeFk3pSX1bL2I/M2GaEe1yywXt7Th5EufPiyyZnDSaRAt5p7sbf/7nCAiQbWEIo9aFIrSZCwBjGGNTZjjBiU9u08k0NmiAadC0np469l+9WjGWovQYjpH9hzDH2586daqjo6OioiI1NZXs7+/v7+zsPDU1Rc1vbGwsKyvLz8+/fPmyIQNI/Wyurvy8gRtk/2pUz5/6FTD4QUGM8IY1a+4C/z977QFeVXalC/5XCQkhJJSFAkIRSSiQRQ4iF1DkcmG76tnuZ0+P3cndM+3vven3+OZ989kd7A522+5yV9lV5aIIRY4FEkkkiSAJBRQB5ZwllHXn3+fce+65VzcKUe35pn8WV+ess/fae6+91v/jN0hCEuWZjfIhMDY6KgbI1txsOjfZVsokvPYWLSGd/982dSYAcao707Ak/OEfichkJC/H8hnQ9Y+GiT1xgtcgVFAFX/jSlNdtPT3v9uwir6nH1KGuAx0jGPFo9Ag+E+wb4Is/glJ6b+EtUuggBk/gxMRNN6P5jObMTMx8F+8GI5j1FxIS8v3vfz8lJaWwsLC2tla+cRJKeHg4natWrVIOw7I/juOncbpdcJABLS1Gl8OJc+fOZTkNDBi6wwoWQbPQWtlrLMqtqnmorDyREQ2RcK9cwbVr6hlucKMZ3tn1Jo1vgXoto8OCADSZrjU0JMxhmGzkn80Ocnd3Z8LVnsHBQTvzbwmDEkxWIUyGUQC84e0Cl7dNuiEmRtimTSgqEkpcXo6qKlRW8kErcbqF9MruP9afXitMjykQABlV68JndHb6HjmCzz5DXh7MEjGFizmNisK77yq+KESxmWUBIMn2oEf5xKZiIvDVYPp0HfsvXar4SlBC6qe1oc2eGHfv3n306BGbnO0aEBDAqx0bG+vq6qqrq3v27Fl9fb1h6NKl2owMLF7MxwY0kP1pU8D+EmacPftWQMB2P7+2uXP9Jc9qNi/QVV19XKZ+tvEfHMSW8sx/OqRoAAXAHe5+8KMGGHFYSYk41NmzuH3bZDKriCY/k3r39/fv79svv77Cqzu4Q42vQlUrWikA0zE9rDAs+UzyGv81Ue9GKUG2YRs5mjpxH/cn7o8RqBADGKBUpGpSxWrdWC2BDd/X1ycuZcYMQ6u7AqN4jMe8jJM4WYxik4C1taipMbw6OTklJiayrnJycmzmkWpHXVxC3TcPJ8msUT+xHdvJ/iYyiTNncP48KirUPt6IRh1N8InDhGIMWQDGpX3KIPsLmXeGM83sWg62jtbmCFcJas+IhNc5GKePjo5aX0UGOWcQgyy5rdg6G7ONvgUEYP16Ya2tOgEoKxN6UFysLS21nIpfmb0gSQ20jh7Exax3D5nl1CmZ/dX7MAqfm4v8fGzfDm8ds4cgJAhB8nMHOnhmZWwgAmksL/u3GCsd9I8dPZCrq1Zm/5UrFR9JQWZ/ErT9kYaGhh5KsDbIy0u7cSNoEmT279P0Obprs4hD3M7mnTtObVw3ay6+A/jo/FvuoevCg64L564WXp2ShaYcVu84zaz3b4FvFRWVP3lSeO9eT1aWaIYJ8ITnDIk+CBL//v40p37BLEUouoRL13E9F7md6FRPSb6eXBRQtC9g3/KNyxXnFmwpQ1khCvtg5qae4Ekb2l6Evli7dO3yhcujL0dTNAh3CUZDT6L8/yy///j+rdxbX3Z+aba6qqsFzXZ2YtYsnWfx4sXLly9nXY3boleKEGtL0TyYtjz7crr11JN0DuEQBcDIe+4cTp7EjRv4KiBrgE7jJQHwMjNKcJf2De1AI+FNn9Owisb0Is7ibD3qK1G5DutWYdX0ibdGJaClp2NgACUlKCoS1Pr4sTYnB8PDFnXRuBqkF4cF25wAFBSAHXjvnplDmhTYy5eoq1MEYJYocl2ZN6O5CU3KQKp9BCIiEfkCL+zc2QpgpX2ZN3qT2X/dOsVRi1qZ/e1f2n7o2D8khM8P8TALWQ81D6ck8gqs2I3db+PtuGdxOC11+rcxOk26sA+w9/zero6uLnSR8qb8UG+S/S3ir/8RlXnuZXl++UXh9xF/Aw2v8MpkjAc83KGj4D/j/20z8X/w/LlHcfQ0Tr/Ey4lhyfJ1Z+qG/YenB0xPTU2Vnew29uF93Od9mdmKi0vN1pR/Xzfv8Yro5YvC093wTUub3oefZgTefxxWeG8ubsTjRoPZUYWFoqWUkoyIiNi4cWNlZeWFCxes5G4/9u/F3pVyE+TrdHN0VJgef2s946ux+iAOmmH/I0dw6hS+IrQbC8AM8wKgwl9Z+rBRlwR7MQD8K/7hqzqnKYxl4BEelaAkD3k5yFmCJQuxMBCBZmZ5eGDRImGbN+PhQ9y/j+xs3L2rvmQD3xmr5tQJwP1O3H1p5VyGNTs7QRbSg8rGFpWfSbs1qOGGnOAke+IRn4hEO1l4nsT+KY6eRmb/TZsURwtajmmOkSDKtGWYamjnzRPsv349n/vQl4nMTE3mlETegi3s/33YpxNUFoAHXvi8uPju3B/w9Xdw1biSHSgAtHKUq6bqOC4Z+rwbocDoz5tBnX2fNRpMmwZvb7i6Su9/gRhNTAxiqKjZyE5AwlmcrUCFeqorXN3gZnjPRnlQ+YniE5/i0za0WVqwc6jzzLkzIaEhMTExnp6espNNloY0MwIQGIh9+7BzJzswz9k5T3CIXOmdLS0tr14JTZoxY0ZwcLCXlyCyD3x8kJGBJUuQkIDwcJw8if5+k5CPHyMnBytWwE2/97e2v9Ve2z5eN34p/5JhnL6vIhDBAqD2v4W3+Pry5c3INJ16DA0Js0dp4xC3G7tZQk7qQjh7VrD/8eNv4NotwVUyBS7mOUeFw1a+7bZbAwZ0gf7DBECGwtZavMKrK7hyD/cWY/ECLEhGchKS5mHeDCGKExASgl27kJ6OBQtEaV28iMZG02sXhD8+1QJQCDwAKu2bPTyMkRFVLBcXfcBhDLN7yU08oexhv/Hk7O0e9NgMvApBK+HuSIIh8vW1r2m3b1e+kBxJ/cdwrJCn0pibrXU0XcZTyf40CWT/LE1WAxqUAREREQkJCeHh4d7e3i4uLoODg21tbS9evHj69GlfX5+VyGz7d/HuO3jHRXU72ZnZF30uXvRZ+yfbtomltQjQBMga8BE+os7pBx5W6PV/akwO/c/K0x68QZAxWy19uyqZSgDIn7NnIzYWaWkIkK5jGqYxrRGaCB/4kNnLYFBuZzjT1PGu4dp5nLfC/jJqa2tv3bq1ePHiTZs2yR5/+FNjIhH5Ei8N4/z88PWv4913tSR0PfLz83Nzc8vKyhobG/slcif1h4aG8nLT09O186TynjkT+/drAgLg4YGPP8bgoHr1lhbcvo3UVGzdqndp8M0d3/Su846pi8lry6tBTb+2n9oWhKB4xC/F0vVYz37huM7OTQ0nD0d+BBSLeQMDwmBH6W7F1h3YMRMzDa4zZwT7nzjxJi9/IvyZVtVrt2QTwGrQ6KrV03o8T/uWHTA8aiW86XPaWEXfij3anuu4TiMxJiKR1x2L2BjEULB5+6azAgNx8CCio0WTfPEFSkpMloRqRenF4WNOEIAHkk0FSlBC5lUEgEK3BmvoOYVT1ieuxdoMZDA7Diy2ejX27MHbb4vnHOADFsAAqZ/2CI8sztLY1UsTIWZkZAj2j4vjI0kqU5OZhSz5q4+Pz5YtW1atWpWamhoZGTlr1iwKwMDAQEtLS0VFxePHj2/cuEE+Mht5AzaQ+r+Or6udJ3HyDM6cP3W+26ed0TXLl8sawNJRNGBYMyyN3SPvztVV2A4lxGgWRkfxVYEaYEa9n0k2ASEhSEjA0qUinUyqjDht3NfwtX70/xq/7kSnfFMSSRhE7Sme3sM9tUJYwaNHjwoKChQBIMj+czBHFgBdCezeLfpNxf4nTpy4dOlSdnZ2VVWVScDExMS1a9e+JUH2aNeuxdgYenrw+eeqlhe4dk3XxSkpOo8mTPP2jrcX1i8s/m1xIxpf4RUFgLIUjegU6AYNDeHkSdfUU67QN35fnzCbWIVV67COnGJwZWXh6FHr7D+OcZrh3clJ2GvBXRIAlQjpBWBMZGrM4BbK7jzJReREfwM4DESb+T4qQe1xlTA8PDzpg7lIsLzKX0m7mWGFc0pRSuMjb5yNzMtKQMJ8zOftG8k2sWgR/Pzg7o6PP0aZqtrFdY1bvL7JC0DZpNNihCd4QvIl6SvKRnarRS0JiwJoaVY60vdh3w4Vd9mBZOwlE+7VvS3DWMPY0Yajx64cI0HYnq1xYCUdU4SGCrqiSchEJk1+Dg8Pf+edd95++20KgHqiu7s7lSA+Pn716tXz5s0LCgo6fvy4SXAWwS7s2o/9aufv8fujOHoRF8XlnjpFAcCsWZink9UlWMJ80jhGdR7tjBnw9FRFGRwUpj6IBEwRJkbT2p3XRvJfIx48wPPngjyp4zLYGNuwrQIVX+ALsyJdhO6naLJzh+3t7ZWVlXV1dWFhYbInGMFyZepir1mDbduQnq5MOXr06KeffkoBMBuwREJra+vY2NiuXbt03g0bxGF4kpwcdQZGRnDmDGbOFCyXlKT3piM8PTwc4Wbjd3ZqTp7ElaMe6fc8FGd3t0iRTaQhbSmWGt7b2oQAXLhgfdaI2OaI4d3VVdhrgezvZ+zRCcCQULchg5vs5qE7ZoGNmMbfVUU2w8D/qeohgxLUHjajh4fH6wgApzOI9VWUygIqgVjTbes/VqGKdgVXIhCRjGTeHZt6OZYHItAwPjISBw6I6//lL9Hbq3O+EQH4EPgIUwIttHdxdzEWH8ABxfkO3tFA4w//O7jTgAb1+FCE8thbsIVcPgMzeBgn/A74tq11wjBrj2D/mTOVfGt3HnvVcKy94QaeTs1ZTO4TGRmC/SWKpZhlajLLJNmcOXPmwYMH33vvveTkZHlgV1dXbW0tS42fYmJiNBqNt7c3FUKuvzNkBRXWYd1mbPaAoeHJfZ/j80vQc1BHh9AACsC3v43gYNm3CZtkDWAN6edp/Py0vr6q0KQNpW4kjElQXp0k2J8KjQTldVSC2XTZKQOvXoGC6OaGkBADCa/G6lzk3sbtFrSYjOdhioBiR66voaGhublZEYBZmOUDH903Mt3KlVi3Thl87969c+fOWWJ/wwV98YWXl1doaOiiRYt0LmpAQQFyc2GsiLW1+OwzocI7dqjXMY/8fM2XX+LcOcTd82IvKP72dlEC1uEHvxjEsJsMrrw8sZ/+fhtXIC7hleF9+nRh5mDnnUoC4G/s0QlAH/poBreXlzAJh60F/Acr7K+aeFo9qq+vr9e4+L0kdJNPJ4sZEkxWISzP+DrwmZnNq2qkBjW0a7i2DMtWYRX7ej3WGz7HxGDLFpSW4uxZnYcFpqox6UXr6EFczPi0DtywdVAAEpEYjeiFWCh73OH+Ht5jga7EygpUtKFtGMN0BiCAwxZh0QqskEfm44uFJEAbAkAKpl7sRUSE+uguLkd37vyygQrTgLa2KTiIUV6XLhXsv3gxH7lCJjJp8pfNmzfv3LlTYX/Sx+3bt6uqqgYHB2fNmkU/B6SmpvLTrl27SEaVlZVFRUXy4DjE8eITkKCsk4OcczhnYH8Zz5/j5En4+AgNcHeXfUxBl7arS9P1AA9kz+zZmpAQ1a5JG52d6jDDElQZE7A/ISbjTaJZwDPgHeCglRFZWUhLMwgAkYxk5kQWgFEKDXQyI9hfo9FqHKjUbgnKK+nNoLW8soUL4eenfL1///6NGzfsCZuVlZWWlmYQACoYn3nL+fkmI1++xAcfiN+nT0X5JCQIKVdjaAhlZXj8GNnZIhXkg+Xw84WvUn8tLWhttbGfIASFIMTIVVGBZ89sHqQHPd1QcaKHhyizadPEtiYJP0sC0IWuTqgK0tkZvr4iHZ2dpy3ST6aVlb5heDQlwa6urk7j4veTUFdXN9lzcbO+s4wvj0tMRlE0pvslH2YjOw95z/GcWdqDPYZva9YgJwe3b+t6eXxcmB7Sy7ij61vo+anTgIu4GIxgb3iT3xUnWZ7Gru5AxwhGpmGan2g+Q/tdxuUgnBR/J2bICHuFpabqRzzEiSU4wIdzERGanTuFAPzud5PZtsUlvbwE+9MkZCErU5PZB6H8wcHBK1asWLt2rfzp9OnTn3zyyYULF0ZHdZwVFhbW2Nj4ne98Jykpia9r1qzJzc1VBGAe5iUhSb3UbdzONFv0T56IVmFzHjokO5zhLDSApY6uUpSylSIjERioTx2pualJkIcKAwMDr169Ul7dJdifH5PxAxLMjuQBDgN37Avb2IjiYqFxUVE6z1zMjUCE/DyIQZr8vJwC4OYGmt0YGhoy0jyqmFL/0dGIi1M+UbN5L01Mmh2oqal5+vTpixcv5s6dq3PNm4eYmIkCQPT2Cvl++FAIBBcMDdVxLHu3p0ccv7ISBQUama5nYiZ7h7/yXF4XB7S12djPLFEcKm4aGRHT2Am2wGZsR7uRy9+fZYTaWpORrKq59qQm0l/SAAX9VJmXkoS3olUWdQMonLNnw5ippwStEtSeoKCgkJCQgoKCScdkhEBmxuoq9sIcw5FSjuGYK1yp5elI13kpk8nJSEjAvXviVasVpseUCoBCga8tAw1oOIETPMl+7E9AgvpToCiuwIlTLuESD/9n+MKO8J/AF/+iew4+ffq7Sz4PCTsYJm1em56uYdnTrl61HUhr53lI/RkZoliF2jwkQfNX/pKQkJCSkiI/l5eXX7ly5cyZM+qpdXV1Z8+ejYyMlAUgPj4+MTHRz8+vvV10XRjC5mCOMrgYxfnIb0Sj+W1kZQnmoG3fLjson7IGfISPYhKbSEEGVFeTpUwC9EpQXmdIsP9aOdjT01Mdra+vz76pGuspr68XaqUIgD/8fXnH8iro7UEPOVF+raIYz5xp/541EpTXMYzRdC+8UJKxHg0NDbws+yNTA+rr6w0CwFBShegPa3pS3oZ8Id7e4g6pYuxd3oak0YYdUvxESehnm7tGM5iO6Z4wXI0Qlq4ue07RjOYmGGseD0KbIACQRN023vLHEn/Ve/c9dH8gPbGw2ZpGg+fMQWQkiovtTbrd1DQwMMDbaWlpUSg7PDx8zhxDr00CYWFhoaqCaWtra2xsfEWJhpR6TzNT+q2EY+eZ654buLEESwwCQLDGwsP5N5f/BeGPS08yplYAZGinQANKUfo7/K4TnVuwZQ3WeMDD0sgqVPHMl3F5BKf1bWODmX3RIVXjz8+dw+efn286HfI9fM9J4yRrwI4dkDWgqEg9STPJc5JWKQAbNkCS6CxkZWoylY8siIiICPn52bNneXl5EwM8f/68oKDgxYsXMllwPGfJAuANb4XpIAknWcLaZk6d0mnAihWyIxrRsgY4pX2UkjJoGFlejspKEyrq6urq7OxUhvj4+MyaNcv+O/WRAFW0LvtYxqYSUEf6Vb1COlMKph3tbWiLQ5xump8fAgLsL08PCcrrIAZpuhdqCclYD+pZd3e3/Sfh4B7yrAKGMlImkz0azstFVOuYHmUe5sVqY5XXqirWj/7lvMXNuMGtHW6q70MYGrLnFHWoq0UtScQJTjoXGTk6Gg8eTBz8vs1wrq4ICsL7gYrjKdrO8w4lUGxe4AU5YRb0VRcbi/h4XLz4eqxjni6qq6vZdGoBiI2N9fPzk1vPUbi7u0dHR0dFRanjE/KzkMY/BoKMpuQDnzm+UD3qK1HJmveHXkcDAsCyl1fRanGNpj671tElXCaZZwfxHM9/hV9RCXKRm4IUUlUgAmdghgYaNmEHOlh85SjPQ95d3H2KpzsdjH/pEo4exYkT+X04Pxuz38bbst/NDYoGdHRYq5JS0W+2QPbPyJAfM5FJY2Dlo7e3t8Khzc3N9fX1ZmM0Nja2tLTIAsDx3nrecYGLi+o6hjFsoKcJYHtoef2KBiQmysdapFnUtbCrcVlXePgR5Zia4mIqkgnHtElQAgYEBLA9nJ2dx8bGbKZBo9FwvL+/viilaLpe+hv+/xG732jCDeCOlXj/A/i/LX3TijLXHaQJTY1oNHxjP4eFab28NL29sANseLXIkXt7oGdtZ2dhyqISYDfGx8eNxvMmVdEsK581+MI3FanJSFY8paVCynU4bHFiI5wOKwzuCEYwUoUqMo4isYKRExKEOtqXYSPMmYOICOONNfIGldcKVJShLB3punfyWmoqkpLAcrUJB/WhsrKyvLx82bJlimf+/PmpqanXr1+fRKKSk5MTExOdnAxJrqioqKI+S/gr/h8exneGMctT9tRiWincMSl0oYuFahAADw9hwGX+7x3H5XHV2HHJHMMbEQC5Fci3/w58CMhFSzq7jMvZyE5EYiQieSRPeMoCwEOSSVl8L/BCjkDidnU1MDXZkGZpuatXBft//rl45hIUgBCELMVS+WtkpE4DPv7Y2p5/QXqXbIalEaR+CgBbAmDhkv2zkGWUSgm6DQ8PDw0NmQ3DTyMjI/KzqwT1Gd31hcIHXrWVDYsW6OzUaQB5LSREJEuLjD/NeLGyS1SOPObRIzx5IkYagzrU0GBQLyIsLCwiIuLFixc27zc8PJyDnVUcx2hNTVJvH8YoRkfxf03Tb97tLqbdsx7PiK2mT5crXIdXeDWAAfm5GtUv8dJoalwc5s3TPnxoDydwz7Nnz1ZeW9DSilblVsD7ctcl38PDYzr3YTc42EO9aYaycPv2YxVWpWvTqUvya0kJiorQ0aH//MTixCcin06TW7QUpSUoMQgArzgtDYsW4eZNh2PxamJi1A7eXQ1qlFcuVIQigwAQS5Zg+XJZALQTLzRTMhvwFso+Ac+ePSsuLu7s7JzFTpGwaNGiJUuW3Llzh/3o6MkWL168YMEC5bW/v7+kpIRLGEZ0dYmr0q9FrgtEICYLjToTWq0wHUwYfzIC4DTpbdmEL7AH2E1p1zm+zv996MtF7nEc/yV++ff4+7/D3/0L/uUTfEI+VdifIKfRFPSgpxe9Zle53oHPL+jYX8Z5nKfVUnf1WLFCaMCmTdZ2+6+SBtAemf1M4iD70yTo2F8zlemiznfCQNOsGMqY7Wnka2oAbWBAt51/wdy5e4GLugH37iEnZ+K8tra2mpqaLlaqHtHR0bGxsfZsNSYmJioqSnnt7e2tra1taWkRL07odertduqGk5Ns/v5OgYEyJVkyIwQFISDA8NqBDiUtXeii9KrrBCkpWLgQdrB/ZGRkfHy8n5++GEEqqqlDnT773VClIjAwMDg42P67CwkJ4RTDO0N1m6EhHf4Mqns2jyRt0ibtpnVYp3hkHbcPzpLZkxVTFKIwH/n96De40tOxciW8vBwL5OIiriYpSXG0oa0c5equrETlEzx5jueGWQkJWLtWrChBK5kjmAa8Y+lbfn7+E1UG/f3916xZs379ekdTtHTp0pUrV6rrPy8vj8FHR0cNgxoaUKcvLcADHtTUBCTAcfjC11uomh59fRQc/QvT89fSLctGuf29o/HfiAD8DBiUHmL1GgDsAvbZeaFubggPJ+UaBregpRWtE0feBsj8RwF18jlY1oAxjCnOnTuFBiQmWls3C/i5pAHMYpPJN5n9PT35eB3XKQClKJ3apDWisR71ymsMYlgxnvC0PTMvDydPUgNWGFyi838KJF6/jps38fKl2XlVVVXl5eXKa1JSUmpqqkZjmzVSUlISVamsqKhgKOW1CU0NaFBe2Snx8XLmbGP6dMTFQdVcZOg6dbQiFBWgwPA5OlrQ05IlNiMvW7ZsoSQVMoYwVIGKKui33dgomlalhfPmzXN3d7dvz9M5mKJocNXXo6nJxjStBYbTIlobvQ/7dmCHRs/gpaVCxwsL7cohcIpXpGd//oYCv7Fz5gAGHuJhDnIMLkpmRga2bIFDWLVK8LiPj+KgrlBdTEY9wIO7uGvk2rwZ27djzhyTPNkBjcT+RgLwQPWcm5t7//79fgN7sqE3btu2bf78+fYfi0q/devWDCZEj/Hx8ZycnEfUZzUqKsSdqbAES1ZhlWM5BCIRSeXwg5/BxbpqadG/DDoacCLeiAB8CVzRP1PN96xfv2fPPkkLYM9tpqWRjLTOzgZPNapJBBNHyuw/MQ3kCFkDFM+0aUIDaKqaNANywMeSDNBuKt6lSwX7L14MiabJ/llCLEwxPDw8NDSkX26aJfqgn1/l55GRkVG9dpGMymGgYw94LMfy9VhvV8Zv3Nhw6tR7Fy92qXx7K1/svXxj9tUcS5NKSkqKi4uVV39///T09DVr1lhfavny5RzGTlDHKVWV+3M8r0SlOvOkgnXr7DoHeYNpdnU1eMpQpo72GI9zkduGNsMIXs22bQgNtRKW1M+mXcp71IN89BRPhzGs3/RzqLTQw8ODgrF27Vp79rxu3TomxOi62f8qRbQBrZEtxdJv4VuHcIjNrwzJysKtW/hqQEa+jdsd6DC41q/Hrl3YsMHeEFRlCobqyqkrvDXencnAPOTdwi3ehcEVGIi9e3HwIMLDLSXJAkj9XwMM1EwFvqz63NnZefv27Rs3bigeNze33bt3HzhwgPptz7ECAwMPHjzIKcHBwYrz1q1b2dnZjY2NRkOrq/H4McrKFEcSkrZj+9t426G72IAN6YJBVWBpvXihdri6uoZLcHFxgeOwY45WElfVm01cBaJYBkAyXxYtemvfvu5Z+wcHcfmy7bleXli7VrtsmcHTic5SlJIfJw7+FfBrC3Gu4MpszA5ByDLoYs2dKwSgoQGffmpjD7lAqWTPSC9eXrEUfLKMBLI/rRe9E2exwtrb24OCgvhMfuSV1NfXTxw2e/ZseYw8patLR9pFKGI/kPG5Z9mzBVsoe33ou6kSo4nwgQ9H7jy1c59PhjvlbaXOP/fi3L0X9nb1d32ID9mBEy+0vLz8yZMnGzZsmDNnjvxl48aNVVVVbW1tamFQIzo6evv27RtUXMDSz8vLU4/nQdjSGcgIQIDs2bwZNTXo7cXt29bSTurfsQMZhhZGBSqYE8q/4iFl38GdhVi4H/t1LkrR3r3a/n7NF1+IxpuAlJSU/fv372BoQwK093H/IR4aBhUVoaBA3LK/v5KKly9fdnd3P3jwwMqeV65cuXPnzk2bNhlcra3IzxcBHUQCEtjt67BuK7YGIlDxnz+PK1egUli7EBMTExAQMDo6WlNT09zcbP/EbnRnISse8e/iXYP3wAGMjlIYRQ+Pj1ubn5KC3buxZw+8vRXfDdzIRraRqOhxDddiEBOBCF/46lxJSfjmNzF9Oi5dwsOHE6cYExKEVLDCuGL0NrX7srEAENevXyfXs4YTEhJkDyv/G9/4BvX+4sWLt6xqbFpa2rZt2/bu3btgwQLFWVtbe+3aNbWoGHD3LhYuRHy84tiN3aMY9YIXj9wMGzfCpt6BHXuxl6Vu8La1mZQWyy8jIyMiIoLPLNfMzEzr5ToRkxENe3BF0oCouDjP/WzV/e8GTndyEuTOO+3rM71BBV5eWlYaW1Ut/2xUssAk9nAe50mmNJaXPl8gJ1MDsrJszO0BTskyQCZYvnGjT4gH8AiPyP5GxKECq4F3kJiYyOf58+cvWbIkJydHqzVSTLZlamqqfGGQ7qyurk75ehd3ed/qxuPzNEwLQxgJa6IE+sM/DWkrsIJsuwZrxI4pALMAsQXgz7Dgzxewhqign+Ez4Zmg3iyXO3fuKAIwc+bMgwcP8uHSpUv3798fGhpSRjo5OS1btow9cODAATKLqs7vmtQc6ZUHWYRFB3BA9mg0ePdduLkhNBT37plh6eBgUPK3bMG+fZg2zeC/hVv3cM9kMKmEXBmN6AXQt2JqKpydBXffvCl4vKmJPldXV2ow23X9+vW7du2iJCsR2IGkpFrUGoKS1LgzShB3IMHNze1rX/sag4SFhTEVE7WcwdPT07du3bpv3z5nrq6Ae2DzS/duobuE2xnOHvCYiZmUyXCEkwSTkLQYi+djvnooueXUKVy4AIfw9a9/nSLNnY+MjJSVlZ0/f/4md2U3KLFzMIeNQzXSudzd8a1vgfceF4fcXDx7hg5jNp85E1FR4iLYY7xIfYUTRSi6gitsHLNr1aDmHM4xCe/jfRclYcnJ4jYZkJnMy0N5Obq71bNEcgMCNFxl3jwsWoS1awXbqnANeZfQbNKoY2NjJPrZs2f7+fkFBuokNioq6rvf/S5/Fy5cmJ+fX1VVRb2UK5+37+/vP3fuXLbz8uXLmdII1bkGBgbOnTvHTunp6TFzsJISIZZhYYLO9CAVspd5xeSQEpRUo/oVXqknsSo4IBGJS7GUTb0aq41iXr+OO3eEEksgmbzzzjsUsFmz2PNob2/nbltaWp4/f27/XdsnAHrG1tod9yU1ICQkav/+fRSAoCDO/trX+JebFndaUKDt6jIaz7Zn8fAema41awz+JjTdxm3Sn62tTYAGrdpWWQO+h+8ptbVzpxAAGmvYJkowr/RsRmn/htJSbNzYl7kg01IdSzde8vTp002bNrFuIiMjSQ2tra0suN7eXnkAK2n37t0sI/m1qKiosLCwQ9VIPCaJYDZmr8Va2TMd07+Bb7AgyO8VqGA2etE7jnFyRyAC52Iui2kJlvgI4geY0tNCAK54158IDf1Qys56zfoudHVpuy7i4sQ9P3r0KCsrKz4+fjG5TwLF4Hvf+15cXNzatWupT93d3dQwCgNLn9K1bt06NfvzvJx+754pR5NBYhEbilCKk+yZMQPvv4+EBKxejYoKNDejv1/4PTwEq0RHIy1N3L4aZA1aIQonbvsCLvBaZ2FWJCJ1rvnzfzR3LpYsAa+quVkzOjp9+nS2OvWYNK2em498Tv8SX5oGvX1bsFt4OJYulR2+vr7/9b/+16SkJKaisrKSrfXqlWhXRg4KCmL7kTLIC0ZBmAq2PbtUwmHzlfJ9shdb3R3uFACqOBMVhSgex2Tcl1/ixAkcOwaHwDuiSL/99tvyK/WP+kReq62ttT/IGZxhUbHMlmGZwcvmXLBAx8iNjWBhj42RJuHlJW5xzhwkJSExUR3nOZ6fxElS/ChGLa3FsveClxvc3sE7/NV5KdjvvYcVK1BYCDIaRV1ejlpLNaLeBARoSa+xsZr5OsmM1gdk+cmLTlyL5Hjy5Ene4KFDh0iXstPb25sqvmLFiuLiYtY825YXzbL38PCgVFDpExISqBDqOMPDw8eOHTt16lRBQYHFJJ47Bx8fuLlh82bFl450yjyLsBzltahtQ1sf+pgcJzgx277wZfuzdxZgAWvDKBol/OJFZGcrDu6KtS2zP8GtshrZj29AACaBGbi+v3HO/sagmKZViJF969ezT7FyJYqLUV1NyWIe4eIissSrJDuwVfmggEwn9ypzZGUptSyZiMFTPKUGMKd7sEf2kHEUDejutnmMjePjG69eFaxSWppZvTGzYWMDAsyLT2dn5927dxcsWLBlyxa+bt++3d3dnZfE+xgYGPDx8SGVZGRk0MOvo6OjN27cmEidp3GazcBqUIv/Qiykkfqb0dyPfqaF3EHiCDBsRYfhF8PnTp77wrvxxLe//ZGnp8iMliff04lOysBd3J14wkuXLpEo2QOxsbGyh3RP+ti2bVtdXV1PT49E3zM4hm2jnlhdXX327FlON5s45SCseMVJaqV1dqK1FRKXil5mG+o70YAsZJ3ACdKQ2eC8PX6dhmmkDFKn7Pyxp+dQRgZo4+MUADc3PZUY18MxHCM7DGHITNwzZ0gGoiKZbz1WSGhvb29ra+M9SiXkQRWkPJhOz8nB8eMiiB7/3WJdUQN8rJQd2ZVVd+ECTp8WpOcQZGVSXnlrKSkp0dHRDgkAy+wojvJhEINroVLmUKpVqHjoY1P26QSA8m5cGzKKUMRUM041qq0vdxVXWdVcdBd2sVvVhxGmXk4WAEoOHyRojUNdxmXWHm95GMNm13r06JGTkxMZfM+ePUyL4g+RID+PjY1RAFxczNNjS0vLmTNnTpw4cf36dRt5PHKErS6I5q23lBS5wIUaQBPHQh9PrQiAj6WqyMoSpXXypNrHm/ViHlRg5043dxFW8MYEYL+wkwtOTsd0Xu0arJHdAQFkRmEtLYIIZAGgnDPzTk5GAZgUuVcf4ZH9y2onaAD1gyUVghCFiXjpsgZ89pn1YBkUACCeTzU1ZR99lIVnWSiVfKvNT/jyyy/Dw8NJplRmvm7YsGH16tWk0cHBQV5VmErcvvjii4sXL1ZUVJhEYEF8ik8HMNCGts3Y7AlP5RP5lGZlu+y3TGRezr98lfzm7a197z3l017spQDQilFsMqu5ufn48eNsCfYD1Uvxk0CjoqIsrVVcXHz69Oljx47V1NSYHcC1fo/f8yCtaOVBSNbKp1mzhFlCD3qu4Mo5nPsCX4zBIvmVoOQTfMJ07cCO5VguO3VrsJLMsT+TcwEXWFHUD/NB29pETQwOCoHatEldkX4SLG56ZEQQ9vnzvFdR1q8Brpybizt3QG7hwyRA2nIlKavAV0tcZgXtaP8dfsd7ZLo2YmMAAow+k/RpFkDZuIEbvMezOGuT/WXwdjrQUY96rkW60Jj0sdXlZLC2b+EWtYS3bKVyiNzc3J6eHvL4li1b1q1b56zXEgUTPQpycnKuXr164cKFXHuuh+xPDWhuxosXWLcOS5eafJdOZfVc5Cmy/6VLOHNGVKYKbW1t9fX18+bNUzykGjrhCN6MAOyTBGCNaOaP8TF/ea8bsCEIQcqQwEBhllCDmku4RCXndb7+ds7jPAWANgdzZM/q1SKxtBs3LE2aLTF9hv41U9h9CAF4JtkmYK7pnJGREXKiVqvt6Ogg+7u7u7P35s41Gsc7o06QPflrduFe9P4Wv2UGyHErsCINaSRMK6cbwQip/wme3Mf9m7hZhSrcgtbHB7Rdu+QxfFE0gHdhEoE69OGHHzY1NWVkZFC65syZY2W5hoaGBw8eXL9+nQL28uVLKyPZz7/Bb+SDkKMXYIF1AePeeIq7uHsd13kQm9daitIP8MFLvCxE4VIsnY/5LubqmfnkgFzkkh2+xJfUJGtBm5rwwQcUfJSUgCqelgYPD2vj+/uRn4/79wVhX7kCrRaTQkuLoIiyMhQW4vFjEc+42R0AWaC8vDw4OFjxVFZWsuomEaof/Z/hM2aY3MobXIiFbCLrU6j3BSh4iIfZyCanszjtX463/xzPudYjPFqMxclI9oWvzVkUqjKUPcVTLsri4bM9a5WWltbW1paVleXl5S1dujQ1NdXb29vK+MHBwcLCwocPH965c4fF30xOtx9k8NJS5OVh2TIsWICkJPj7255VWYmCAgoObt2CObF5/PhxZmamp6dnTEwMpC6mMnGHDmzsTQkA2f8t3WMf+j7Fp5WoZFkswzKyQCQirUwlLfP65erJR/4kFmcLaow9bWiTNeB7+J4rXGXnjh06DSgzXzAbJZPF+TrvUOJ+oBM4IT2WSt8ngNT/m9/8prq6moWVkpISGRnp6+vr4uLCAmptbeUlPXny5ObNm48ePbJ+iixk8fh3cIdtEIe4cIQHIGAmZrrDXQMN+4qyynORzcn4pEIOVkr/A+A3Z8+CBd3Mml6rDxkZjr170fURPmJjT6R1brugoGDx4sVJSUkUraCgILbEtGnTNBrN0NBQT08Pi56MX1JSwsq7e/eunddBzlUOEotY+SBUgmmYxq9DGCJBt6CFOlGOcrZxDnI6RZbtAjNwBEdYMOSmeZhHgfeH/wzMcILTMIYZuRnN1ah+hmeP8bgOdXYFHRnB+fOiXRcvRnIy2F1hYaJjvbzg5iYGDA2htxdtbeRatp3gbHZdY+PESLctLfEUY2MiDOWDmtzaKuqQYspgpVKVvQ7IUHFxca9evQoNDR0dHSXTXb58+dmzZ5MOSFYlNVNiU5Eaj3gmOQhB3vD2gAdLcRSj1FSKNy+xFrXsdDI4s035n8RajHMap+/jPokiCUkxiGHBBCKQy7Hyea3jGGfNsIA5kmLDDqY+VaCiCEV8cGit/v7+c+fO5ebmLlq0aP78+aTRiIiIgICAmTNnymU/PDzc29vLtqV8VlVVFRcXs3lfUKgnAQrw0aO4fRspKUhIQHS0KKqgIPj4YPp0ODtDqxUF0deHzk40NaG6WldaJIrxcfO56ur67W9/S7GfPXu2VqvlJtmV7FN+OiyPeKE8WQSpsvOHP8Thv4GX3nUT+Ydx+BZuGQ2cJX5M+3LtWhw+jLR1+vfe/4XDP8PP4Ak9zRpA5qWqpyCFNUQNIB37wIeXCokFSGfsVbKAzGUP8IAcZ7ZANmIjt5eElTrPeIfYw89/PmGzptvdjM0UgL3YoHgqWvHBB/i3fxPtrEySsAT4E+Cb0jMbm8F/wdOZnEcIwGWLmSV7JiQkhIWF+fj4UADIoe3t7ayeQl6qg2DLhSKU1EYBIG/KAkB2a0e73AAmuZot/5kxAzO/BXwbSFN9vAl81NDwqZXlWE/sBAoAO8HNzU3uBBYWO6Gmpqa2ttbaXrXWPkYhSj4IBcANgkxlmmYnU8leYFKtpSqwMIT5wc8TnmQKOUUyR1ifqNVY/sbOjIpiRuDnJ/IpC8DwsKiY9nbR1c+fi9a1gA1mvev/jH05NuYjC0B3t5CSgQFHj2tl0/D09Fy4cCG5bGxsjFeWRzGzCa1dq7Jt1YzMUhzD2Cu8Yv8y1ZTYJjRh6sALZcEEIICVrxYArkgBoPw3opG/Zma2Sdz3rw6sFRkZScn09/eXBYAeln1fXx/bltzKzmUy7YljVyKDgxEaioAA0oRBAFhXsgC0tIBd1mtMOMbQ2HEgKQXvqzz/InmMaNFFuMZsC4UMM6POSGaCfzIzlw1JYaexRSMQEYQgCgDpDJIAyL1ai1reqM0dnJDMCthh/zxhu1dxdTZmh+D2cr0nFtgBNOzEkSPqgV4StW/Uv2ZKNuEyRqyxP9Hd3f3gwQNMBapRTbN/vI7wWEx9pwAfySL1H6nWXYA1AWiQMCU7N8FzwZfP30RkSAVGCXlNFTEFe76iQtikcMMB71Siv78/Ozv7TURme9ro0CkFFYX21az1UsJXdLAmCuVUKqXZAwH/RTJrEELyQ4kqvfSum9LrLbvWWCuNXad/7ZVef2afCE4KYr8bpVVW6l0d0uvP7ZntB3xXskiV83PgA+nU/4n/xH/iP/H/KzghHD/7W8zsh0ars/Va3DoPbLFnOmVivcTKss0U7A/5bTs0lw1BhXGNv4UmPEyDX2igVVmvBv9NA41GFcmSCWQCq1QuP2P2dwH+BngFoUKK/QII47d2/ODHaJtrWPmZBu8cmiT7fxuoUS3RBvxA/vCXkhJq35j1SktIOAjcM/5YBXx/Curij4AS48D3pNUEfgj0vMnz0aKAj4w9XwBpjh/jz4FWfYSfSaXiCBYDZ4138ZG0NeJ94MWEXU812IL330x+D6uX+S7QoP/QLHWP72tt26QxGqQV9NgJPJ6wnX8AAqY6ecHAP05Y6LG0AYE/BTpUH6qBb03Fqv8FeKkK2/pa3ZgqFW278RGuAO/qB+wFnpq7XovYO8HjgtpDG68hMB54W+XeCJTS7qK62mygI/KfQ+aXiUJUugix0dh9DS3XkFl75BAKcYhx5+g/zAASaPkoKbGekSNWFpWRgsT5SAQ8VD4uVYQjdUf+p2BoUw7gMY9N6nZY5uFGjnZJZ1Bha4tThSM4FHwdGxYBNDe9l/y0shw5j/DIehatbDIlBfNXSleiYBjIBm5fP3KoyaGzjY9jZAT9/ejqQksL6usxNGR71iGXGhwkh4wDTnpfeA/CLiDffB7MRgkOxoZowF/JTAWiHopbMpsQMzF2h2F6mPowErHVHAdGzYz/gY1DjWFsEIM96GlHewMa2tBmKwuQJMBB0bIfR1TrKAgENrOGx3H0qI2ph2xs3dw1HRH06zXxW2oLUjORaeee7arArWnwTZvo7gXOW93ka+HQEUfCWs1ibCyWHAAOGqvxHeDEcZwYtbFVasD/pn5nKyQnIzmK4kRJOoV/M3xyAQ5nZuL78fhBPJzn6d3uZO9+lHrgww+tFc9h8+tvxMYfYKO7CK7HWCl+cQ1HxB0fOUw+ri7Ej+YgXvme2IvEH9snAIetjUhE4l8jUU3/KCvETwrldYk/UbdUqY1oNvAdgwa0K5GEAIQA38MbhXSFh5uOoPs2/nwh5qi1duW/2iUAFk++ciX+YqWx63Y1bv8TmpqYw2CT4rIKCsDwsE4AmptRW4uKChQX4/Fja7MOj47CvQY/It1G6n3h/2iit6rjmD9JdDS+EY0Y3dsgov4fIQAPLSTETIywMPypWgCqyf4/Afcm4Ar8d8OnNtupoAAMYIAC0IrWetRXoaoEJU/wpBOdFrIg//mTN6IBKvqYAfyV+tMq1vAdcU+WL+mIjTYkffzIyPEP8oGkVf9yogakfYA0+wXAdstqNEhNxXdSTdy9RnP9TUX7x6+d1cPcnxvw34yc/+x4FkNDcfAg3if7h6o2/+RjnPidYP9RO7Tq10CTu7vE+3oLTGo9LC9oLACx/HPtGuIlDWDqdKB8btyI0lLcvWtxlVgzvtVYnYEMrmjk/QXvV3/BsRSAItoO7FC+Jw4iMRGurhgZsZXlWItfPOBBAUhAgqvae7IIhYW2gk4ddNsLkTrrzaBPtdTt21i4EH+xCLNm6T9HrMTKHOQ8wINJ5JHBKACx6o+dnbj9qVhIPyl4YgvbB60W5eUoKEBOjoj36JHlndXUoKEaaxUBCAlHOO+XHGrvSSgANP23fkRFIcr+bMyYgfBwxAaqXDW3xK4McFXpk8NoQlMhCnORm41s9gblwfKOYie9ip2YIdWrAZunCwGg9fRYnBPH67QSkhqgF+xGmwfyT0MaGYMJsWe3ttNB9k9LQ+wsE/cT03HUAP2YmqnIo25n1IA5Ok+b42fx9RXsf+CAugnLUHYCJ2g96LFnI3FxZPxghfrlSIWFrSasTDjJf9iW1ACaESgANG7IGBozT0pG/aU5G428cuiyMsXRjW5etvq+KVYJZO6E18q/FIDsr+J/sUihtTr+D4NG6iFjHf+UtGUmq9bQ24vsbB0760EBoGlsBDL/VcxcaexicC7BhcziOfCevXvWaBAfL8r7L/4CP/iBKHJnZwtDSbVGbEs6ISGH25sWNzedAOjhCU8KQKTdlB0WJsz6ll4HwQjehE0/xA//FH/6x/hjrjZVkY2hkWztBD9Z+X8AAeYnhYZi82Zs2vRmtmQGqYKzU6csHNmf9gcNCw1DHmRXsENSDdmoRa3M/o2KllpAUJAgXzbXj36ks717VTqSbGaKi/KUmSmakzZHr17w9xfxnj3D8eN2Hktmf1+oNIM9Y0ZbUIQiWrJqU4mJwp4+nXxSpQCJRi5ZAL5KSDyp1f21BMP1e0n/e9WT5e9au1ckQS9cKCxcx4+zMZs0noOcO7hjZ+HJWLZMsH+kmiRra0V8Y4Ex3muvUWTjbTvBaTqmT5Qicuv77yM4GJ6e+PRTjI1NiG5BAMpRbjabptmKihLsbywvFADaS7w0lxDTGFzMHgEwTYJluMLVHe4mTg94bMf2UIT6wOcIjjwXcup4aPNQch4BbAN6vDBTqjYZlyVrszh73TqUl6OiwlpDOlSlVjEf88nZX+LLVrQ6ypmmCAkR7Dlv3tTs7I3A8klI/bT0dMXRgQ5S/3Ecr0KVpUlUjeRkIwsMtHcrBgEYGNBpwB/9ker7qlUoLRWmrwON5SKghpP9V2CF0QCZ/RndGBIxF76Ft2ayLiXIAuDhMXGs8coWys4LXqYC0NMjqUwRvkocFrs7bPGzUf4WAYf456fK+DNAvsPdNT6O7GwsWoRDhxQfb4ECQBvBiP17J/vTjMDINC5h5qAy2LH/aokUnOFMAfCDH7l7nmhKo7bcsgVaLfr68MUXE6IPDgq2ratTaDgMYQxibyuR/WkSOjsx638B/ygJgDbqOq7bkwouG65ejULI/XBXKvyl4XEI+LH1gBQAlnoIQmIQQ7LzUpExG2capvGmPsSHbQopS/k9IZmDMEnKtvewLVXusp+Knxu4UYwrwCMbYTZvFgJAs9CQr4/e471eh71QIracpk1jWkgW9hzPWmekpmoYSRqTyiy2tu4JCHhD+39NmJ5i/34cOIANGxTHIAZJ/RQAUqXZCHFxRrwfG2ucpu9IVRRmbQ8u6pf8fJ0GrF6t8m7ciGfPhAYMD1sJxAom+9OMvHfuCPbP15Oa0eG1EjcXKYLh4qLTgMePJ5NNU/YnhMQUCo75KvEz/rMEo86MlQRA4KfqKdSA5w5rwMOHuH0bCxcKjpUQhCCSOQXgJm5apkujBWT2D1OXCy+dYRncHH5qiEcN+NRKg/rDPxKRLFHe9WZsjkCE8mnrVjQ0CJIpKJiwAAmXpt8Q2T/Mci2brkn2j4qSHxsazs5qeJsP3EOUJsoTnv3ot5lYLmuUCnkz1qRnyEgIzYE9EopQquASLFmP9WuxVvlE527sbkTjJ/hE5/oZvoQwR2C6KWb7fxfsTybUJegFXlzGZZqlEC0SafxK5CtSpwFnz06WjK1jR77LX692WS3vOlWTyn3qBGBSMUUYDZWEOpImvy4kq5B8Nv0tkIk/FGjMu7dvx8GD2LFD7SP10x7gwcTh5NnkvUjeoaP+adPMLPIKrwrRUYSw71jejZPJO+maGtDSonKxDjZtEtxuFTL7z8Ecg6utTcTKtJh6WQDUnoQEYbazZi6HZgRAhC+yvu2vEJo3O4lMnZ2tdpBtSeke8LBnNtVXFgAjMCDDvva229D2CI9+i9/+HD//d/x7KUrVX9etm7CuDBJudbXy5gY3Uw2wlJzAQCEA/BWY3UCFadB9iRKyEKWbqzGJYHgJ50rhcHW1uJlJ3SUlYug5nl/CpX/CP/0avz6Jk+qv6UjfgA06sp5Mxk03FYe4bdi2FVvVm5bZvw995sP8MzA6anhl41MDLPTka+VCIL/TJR8uuhd/+JO5yWZGt6OxQQCmA0n91BEfH/mNsV1G87kQ/iCgsZis9esF+x84oPaxPMj+13Hd7IwfSfatxVi82Az7l6DkGI79GD/+CfATq3syFYCODp0GGEFw+0bROxbAppIFwMjLQLT2dkuzXuBFIQrrUa94BIUnwsvL4dT6wpdTYxFrcNXVobAQL1/i/wvQWvlmZ4M9eybI+vFjxeEHP1kD7Jm9apVg4aAglYuhGJBhJwdz236Kp5/hs1M41YUuxcmyWrDAXHGRc2kqSLQcbntpsj9Nt4lGCsBww7CpAFhFGHUmzOJmJs94enSj+yiOfo7Pr+CK2s/7WoIlU0IrrnAl+9OmwUAPpH6uWIQii8Gu0jqMPBQAmovLax964rbrXVzyy1zKFBcFgGYnbZp3k/3TDBFcCgq4BNA+FZf2+uc1gqHlly0T1G/M/rwmsv95nLcULgMInOBkjV7Cpb/D30nU/5OfoPEMUGl1W04TXffvC95WMQkT6YJNmwTDWwCpPwMZLlBVyZMnIsq9e9azwlo0KUdZAxyFNMl4mghc5HCgrx7aqQtFvqapQPYnp3jBhqJ6eAj2X2miFBOiObx3c033HM+v4Vo2stXO+HjExk4Y2tcnOLepSXE4LgACjUICGnRfED0ZAWhsFDvp78eU4hzOXcXVWtQqnljEzsf8AATYF0BjhddI/VuxNR7xiucZnlEAaNZCCgEAKioMnpgYnQZMciPW4OKSly8IWockJKUiNdAMs9mHkBDB/vPmKQ7n/Hxn5/xJRvtqkJyMgweFTZ+u+Nh4x3GcAmBnjA50cMov8UtB+pqfkP1/j9/nI3/UjrlOZr2kbhob0ID584UArFkzcfBqrKYAJCPZ4GKryCFsoRCFNLUnIUGYozAjACJwocOB3hRs94f2tWZLIEllZ6tZ2xveErGvtD5PZn8/P5WLQRiKAV9Tv8ztPBe5BSjQqqZGRCA01MKJVHsgLdsWABcXtQC0tkLQ/4BOAHzhSwEIRrD1GEJnwo23UV2NqcYIRh7gwRM8UTu5vUhE2jHbWk2kIEUWAMUziMEruHJZc3kUVmlhVNaAq0ZOWQDMSPTrQNy+i0s+BaALXYo3DWnUgEmGJPunquY2NYnwLiX21OkbhoXLoriS+g8cUPfeIzwi9dPGMW496DBYOiOf4BPB+5L9SvOrbGSr82kT5gWgvt4cgW/aJDQg0EifAxBA9qcZjZQn19XZXL4d7UUoKkWp4omLE1w+a5YD2Q1CENnfqG2ePUNRETo68AcOrSNkag9I3DSVdJPbV2DFLFhM6MyZOgEwgNPlOJM5xARMKP5XePUSL2tRq3j8/Y3lR4GxAPjAhxrgBz9ry8ns7+oqvzU0SAKABuU7GZZmJQBrLywMPj4WtzGFeIZnlahUeyhOrGdb86yxvxe8SP0UALXzMi7TTNaytCdcLTbSAGqqrAFTDRcXLQUgD3mKhwJAm0wsjUawf5pqLtm/mAIw5bueAoiWmT1bUD8FIDxc8bMeZPbvQ5/1CKeAnwgTvP/3+Hterrqh7G9PJ0sfrl8XHF5SonKxJwTVG3G9zP5G/ELyzcxEVpaduShEIU3toQDQ7Ic03HiCCFnoQIj/EGgdJ1ObaG8XxJ2drTg84SlrgKUZMvtTBgzgdAZhqNc6igoT+KoDHV3oMmySu/Q0N5G0W12tdoSLdgm3thbpnQKgR20t6usb6lCneKgP1gWAC1AAjMA9vBkBYBKa0UxFVDze8CaDT5r9CVI/bQ7mKB4yLAniGq7Zuy2SPwXgxQuDJyFBCMCmTVN7fLLzmEt+PvIVD9U9FakpSHE4lhCONINuj48LAXD5AxUAsU9SPy0uTvFVo1pmf5aEzQAS+1/mYGqGlWE2+cTJyjcKAG1sTOVavlwQ/sKF8htTnoEMI3LRagX7X7O71IAiFNEGMKB4SOesN/thKgCvXkkhi/CHAnMda/lmtJPpehVk+m421JDE8CsDEDBxrK+vTgAM4ERjCbETDknXMIZpao+zszBTdHUJ5m1rUxxk/zCEWQtN9lcJQGUlra0KVUpTkf1pXM1SALJ/uFpiWlvFHrq78WbAylcXvxvcaJaH26iDJVhC9l+HdYYUousKrlAAHNjToCQANDUoALTIyMluzQzIzi4uTRSAEpQoTrIKNcDhWGT/VNUsISv5zs5dzhbv+SuDaV6006YJ6j9wQOz5/2WvTcDqus5z//cwSCCEBgYxCCSQAAESIAmh2ZpByDHy37HlpEqbsU7TNk+nf/q097ntLW363NveNG2ce5u2zk3qxqks27FjS7EmsCQLNFoyEiCJwWIwEiBAICYBQnDuu/beZ+99DmfY+5yN7CfXrz+Ls7691rfWXnut9+dQD3ro5q/j9WY0Gyn6gXRyvPcxciW9AYCXR2aAkwgAxqxZMzFT+rXL6ak8oKHB+PbQCGQGqJnUVOHosbGGhtMOspC1EAu1VE2NiPFxfCpkzv0tYMDoqHBwhkP8UjR5J047JLv/rFm6lDyWRSx4T4/vM9XmHj3CxIS7sTRfhkMEAMPjRDExwv3j4uRWR4c4w8RHE5rIADkZilCZAZ5qEABJesQ4L8ByBSEoSHcNJzFp93g+fJwAMp7uz9Anaf2M27htblm8QQTAyZNaJixMYYB1kgAAYdX8x6HlWE4GLMACE4USEoT7Z2ZqGQkAcv3HIpsJANL6CYCN2n18gAe0fgLgOq4/nuWqCvL+WPbzZj2TeAElBsjuvxiLtUetre6I4VuSYdfoMwQAw4jo/uzrlBI0qX3M+2hCdgt7edC5c6ioQFOTmpB8flM84vW96JMyADRxCAdyuEnZTPanVUUhSm3292Nw0ENXZ/9NQAIBEI5w953p/gyH6P4Miu6vAkD0wlJPACCXeMCdAMBTPZ0AiERkBCLU5ghGGO46+t5j2f3jEKdmLuAC3b8CFUZXoz92BADjto4cubkCANu3W/Tqdtmgq1FNt+5Bj/ogD3lkgIlKK9ld1//OHQGA+noHAOwWLditbOaO/7PPCvffuVOfo/UzLuGShcsy+M4+APDwoTtL37VrCQGQIQDglJe7jo6aXWsjGunZXehSM8YBIHXUde3sFDSR7/0nryknw8xRtAditGfOiHAoGMEyA/RdZPcPDfU4yhr3n/Ia0YhOQ1oSNJdtbxffzb2cAUARAAz3nb0CYBzjcp7u7wEANlq/k/u7W4CFIs8YMzBDzfSh7z7u+2ExT+AJuv96rFczneik+zP8XNzQkMIAvQgAxsKF7ofYzM3gMGhUoYoMUPO0czLAaJWgIOH+ebr+dH+Grv60yWauw5499n37UFKi/7Bv2N5gnLadVr6zzzAwlXGbCfI5YU2NrazM9v77Nq20zbZLEm1FncpWUSH6Xbvm3/prhG3XqE1e8awscTm8KwUpdP84xGmpWqKkNvAPa4UCcv9AGXDtGioqxKY6tBEbafiq7fIKywDQxM4cwoHT6f7UZmxegzX6DG26qclDhZ4e4b/3NU/kK7gHAI1AB4DhYVGWxk89wiOZAfKjRCQSAPMwb2oNVwD09orZ793D9GgFVmQiU59pR3sHOnSJDUbqcEPo/sUo1idl9+9Bj//rq6oSAOCpUBUZqTDACqkGLRm2BoBoRJMBucg1VIXWz5jn+Jrj4yoAgulQwZas1K1M4m7rVjz/vAhZK8U/R3DkDbzxLt41N63NsncIMtKprExEZ6cyMy/1rqysFbtWyNdbZLu7UV4uwl9Jtu1k3Nm09mwfo6Quzp0ER2os2x7/FemasPtZyG6gtnudOSNCJ8nwFcuX3d9m89bfp/xw/w3Y8CSe3I7taubBA3FbvVG7tVW4sEM0OxVjTpLdf+ZMuUX3Z6ii+zdBgwy7kgFTaySzuh4unFc3tbWKR/wTeKIABboNs3PVzWh2JI4bLEX3Z+iRdhqn6f4f4APTy3L5agQAo7NTy6xeLQCweXPgO6ACgJSiZ1ejWn1EU18pe6RPrWRHXU8eJnJrcFBffxrkfPb/wFeftWuF9e/bp1y528BenI47/TpeJwCsXY4ppzEEgP5+hQGSNvD/Xcr/eELOyY97e/1efyc66dw8/WrGHwA0Ngoj6erCJ6zvuybsAZWzG5jBjeh/NPQLF9TEWqyl7acgJSVFuP+6dbrO7MbOessMUFMqhSK0GMVfxpf3YZ8+z2nPncPQkOdSzi4sWXSyG/jIANC9vf5t6P5kgNqk+7sFQBLZkvQ4ALAAC57Dc2ThHMxRk1Wo4i0YxrCpUoUo5Mbq7bIFLXT/YzhmwUL7+hQG6EUAMOLi3PS3maitN2gCgKE+Wo7lZAB3yUeJxETh/suWaRlR5urU+pbK+SV92t6KFcL6n3/eHhGhZJLwQcmlN0re+GTdHwYBQF26JBz+0qUofnygaz5TkeLFC4HYK1fEs/PnA3yLWmHetWozIQFZWeKue1I60un+UYjSUjW8PjUWbKi1sn9yNSoqhL8+fKgmCAAR0h9N7MBu7GxSwVoEu0al+JemPw/zMpBBh/oT/Mnv4/e/gW/Mx3y1wo0bOHYMJ096ncbZhWdgBgFAo3btRkv3DIC7uEsAdKPbCwBoaHR/9ZJOEwAiELEFW76Fb5GF+cjXPzqLsxdx0VQ13oI92MPQJ+n+jEEMWrNiXn4CQH/Bo6IUBgSmkBC7atDXcZ3Ozc+kPiXS9FRzrzxiIk9rtrYK9791SwcAK66fk5zd33f5JbR+ETEx+mxBwRvFe9/Y8dQDa5djVib4SJNftqyQMXeugmVab+HQUH1Z2QE+C1gyAJ7CUyGOVWXT4LPR1ua+v/QwW2vTxUSB2sBXYqWsO352P751R4dw9tWrsWuXnFiN1ZvSaP8X8/N17sg+DHY2o78FSpWfGdpPVaTJGgQtD5qFWTGIWYzFy7HcidZAUxPefBOHDukJ5U6dncKFh4Ywe7acIAAYt3Fb60NLovsnJMitlhbh/gMDTmUIAEYsYvk7EpFLsZRF2qAdL7o/62rieM57967LcjZ7XKjnJ+KmhXDSBViQitRc5G7ABm6LvsMRHClDWTOajX8C1pTdPwxhavIYjtH9a1ADvzX1qBEA6WRNuuZi69ahsRENDbh40e95JIPWmgQAYzd2y01aOwFwAic8jg8Kkhihg4QocFVfPzgYlsrsFUxA5PPYtw+LFmlOcBPI4p83Skq6eed4ui9f9nc5uU4tP8zGBAASOlfFlxXOXbYZz2nJDWWzG8oSGu4kXMYdBKZhDPPUMlZhlZyRAXD8uPv+rgAQQ2swMoJPj6xzf7cX08hhtFdUID9fxPz5cmbTJgEAwAGAvj6wT0WF2aP9F8rfJdpPvSqBAmD51AfKPLynb7+N115Dc7OB/aIRM7KVzy0D4DzOax3o/gyH6P4f6QAnSwbAeqx3rHsJwwUADNdJp6jU/RKfkcKj6HWzMVtm4dSnp3DqTbz5K/zKKfvn0mQzPX5pWn8xijORqWbqUEf3JwM8rsPsZ5bV3a0wYP9+LVlUJABADPT2+lXUPQCKUGSTVhmNaDKAsKxGtfvxsvvPnas0R0ddAED3DzHhcD41Ze98XHAubB+efx6ZmY6OLzQ0fDPj1QL8DX+3sODevQIAxMCdQO3TT7Mxuj2zMKsQhUXvF2EZ9ABAOQpPFtajnjGIwQDfoRa1DBUAsbHiyvOaNjW59pTdPxKRusHS6E+PrHZ/twzwKdvAAM6cwerV9qeflpeU+2PeqU3Ay0oHPmWwm7WqByqANUC+PvvPQFpn50ckTnk53n3X5dx7frPWVj0AaNQEgFMHYwBoQtMkJoMQBAcA3sf7ageDANjpZn0x7tMGNIYx+vXbePs1vGY3c2hykEMAMPSl6P6McYzDcp07JwDAKChQMgsWCAYQAAcPOvW0GT38LgDoQ5/MANUBJINf6REAeQREntaU3f/BA0/1A5NZ96eeF7FqlaOjralpwauvxn/91fjk7yZLw+3x8SgpsZEBL72EiQmTK3rLArMJMtiPWCYAxK37N9GULhcJJm50IhL5iIGAdQM3alDTi141k5UlYqpkAGjtnh7U1KCuLvA1WKPpcX8/a9PfKyoybt8+IDdp/tjI/9lkko9Eh+lQpcQAna5f33Lw4Jbvfx8vvihOvLP7e5WzF8/DPHp1NKK1PdEBoK9PuD/fzEUP8ZAMYMhNuj/HhCFMbkZEIDkZcXHOkxI80yb69Tmc+yF++C/4l5fx8ghGjI+djdnFKNa7P0XrJ0sa0ThdKz5xQsT9+1pm82bBgPx8/+pNNegqVNHF1SbvOAEQhzg3gxMTBR2WLdMyMgC81vdXfrg/tQ8xm/63owKP0quvdr118NChjw4JQjtKEhAlJSKkosbDGhnaHpow/X0XdsnzrgC+DaShHPhfwDUmt9u216O+AQ21qA1wQazA2IItclPYfDbefdepTyhCmeaqdMOkcZ8STaf7qzPYjPeenBQWv3o19u8XTcHN5coj5hnsYF7nlb9NwF33PVolBhRgg0DOBv7/98tzqi9vuVb+octF9S3aOe14dBRhil8nI5kMuId7oiG7f3i4/Ijuz3ArGQDpSJebZADjBm7wdxLLJem6PnggZmxvh6V6gAdcczvaW9BSh7pruHYBFzrQYbYOrZ+RghQ1Q/MjAOjQ1izU7Qnr6BAASE/H889rSQKgkdBpxMCA2Ukkg3aaiTbCF+H+JCJRzuQhj+Hmvej+DFVNTeJQtbQ417dbAQCbvwMLYxwV7tyh+4u4Xld9GIfjEf8snlX78Vt2doq4cMGfaQLxG9/bE4zgQnshAaDfjPKKisyJsm3bqqWEnf8VoYgAqLfVC7gFoBrUMFQAzJ8vAJCRgYYGrQ+tnxGOcN0wadynQdPv/v4w4IMPhNHn52PZMi1ZXy+SfOSXSrWf/+KRARXYvgar12DmTDaOv8J/tmzBh+YBQNGOGTwKkggABg1UNGQAOOQTAGpTDwCWcwIA52ptNbayf+wBfuar0wQmRjE6hKFe9NLx+TK8L2MY82Pn12AN3X87tquZfvTT/RmGa4xKH/DvTM/NA0MA8Cuo5rtwoWAA7+ebb2rdbIYuggQA1yQBUIUqFQCSza90BUBwsMSFPN2wq1MPFXsxApO7S2bijvNolNLZaf0HD+L6dZE6juMEQAISNmKj2q+kROCVYfTQWeQ3IT4L0Ppp7ulI11Ld3WXl5ZkT5ZmZiI9XcrxI7Flvrz+CI4Es6DZu16K2Fa2LsVjOCLPPcgJAtoBCttZubkZtLdrb8Zm8qKICW5wBcOaKSPqr406X44T7Tl0IrURBAXbudGRSUxUGVFaam88dAJRHtHEHACYnvQGAV6wJTbTgKESpAJAf0f2THfW06QxJoLDJFwMIANo9/0VgikEM3b8Yxfokrf8YjrWhzVgN3vkx/1dw4oT4CsRARISS2bZN3M/GRlRXm6pks4lwkWTkV3djN+nAJr8UAUCzV2Avi9ZPLsydqzSHh8Wgqioj9R+j+wv19Aj3Z1zTLf8QDpEBDPX4xcRg714QFS+9hDHDHydA96eCvD+WbZ3hlC0rGygjAnrLy53Scs80pAW4JgKAoTaF2evcPhzhrgCoqRHxmbxr/AYtH7iiNK9IrRvj0z0tEcPo7xe/7fKRJQAYs2aZK9TaqnfkBCQQADwMmDdPuP/ChXJedn8vV+gWbjHk37GIXYql/BcSABiaTABgUI5Br/EADwJ3f4ruz+Drq5kLuEAAnBGf06fsJkzDU8e2NsGAE87ILyoSER4e+AsOYEBmgJqh+zOcOtH9GapE96t4+DDw2XWyBV6ir09Y/8GD+PBD5zz6yAAGT4WaXLECJSUiDCpw94dPAMiePgMztBRfhcZ//vzFi+Lv5cvaExKbp8CVFuYl2blm6JGRTgyQ3Z9zKe3JSYkXtVbsxq+9KqRw/TmtGhhQGKDKHhtrlxlgSrIjP3qkJujYZIBwf4ZDMgC8SA8AagmWMGj9ycmYoR5zWokzbz4l2ozNdP8N2KBm7uLuMRwjAAyMtsQxJL33ngCA/tKlpCgMUBWAf7oAgPedfh+HOKVN2JMIGRmuALBSHlZvZgsHgVcn8Go9Ll1y8/Qmbh7GYTJAn6Tb7t2LzZt9F7fqW3oDwDZso5vnIEdLDQ+jrEyEJP4lA4aGtOf8VByyAzsCWVM/+iVH147XVABovQUsajA4aKTyOMYZWps3fuZMP1fJgZphTKn8KVUrcEb5eUZqBSaDp7CyUsTdu7rUli1kgH3BAhPnmKSXGeAQHSEGMcLAAwNAKlJjYxEXp+vkPNHjM1avIvDo/sUo1idp/YxudD/uRRIAjLExLUP3IgCysszXcl0bvyEdnd9AzRAADKVB91/p+E01NqKqCm1t1r2yzZIdehU4CJz33OEkTpIB7+N9fbKkRITuRE+vPAIgEYkEOt3cKUu/Z9y+Lbfa2xUG6MUhDB7WQJYlmXqN2uShYoSEYA7m0P3Z0roKUtQaLDuM4SHoeDV3LubN83OJHMtwaBCDTpU/vXrL5W+AMnLJHj5ERYW9okKXCg8nA0RIFdTwIWdfjkY0A8nJWLRIzpAxdP+uLm81RjBCADShSW4mi/HJMSRJjK5Ta6sZADwmBtD9GfMxX82cxmm6/yVcmq7leRnX1KQwQC8CgBFiwctWoYoMUJt5wvXzxK/gYIkFOgBcZcerFkypyBr3hwSACl99DuEQox71aoaGtHeviIgI697JszwCQPZxGq6Wqqub6vcnT4ocn6iajdny2ECWJZl6LV1VbtIusrOlkP9Rdf++IIVhANzDvR70aG0aSGIiZs82vb4FC8TAsDA10YUup8r/L8mIu5w7h8pKtLToUps2CQAsWaLv9ifeqzgDIApRUdFRwv0dFKf7M3yK7k8GyL8jEZmEpBghjxN98gywYxd2FaN4FVapuVa0HsMxAmAa5/UuGQD6y5+WJjHAgtqSqV8dw5jc5Lem6wsG0PrJgjkOX+rvtxQAXt3f5Bc+ZaDPEIZkBvSjX01mZqKkRMRjkHsAbMAGOvgarHHK0vqd3V9NkwF65SOfwzdio9/LmsSkzAA14x4Aokut8bLtaL+N206pjAxR0qyyspCerk/QMFwrfxplnybLMlKpokIwwEkEAMO4nH05mgBfFC0A4JBBAND9VQBQEgCSNQBMTvoFgGlkQBrS9mAPQ5+k9TMGMfiJkcluVxgwMaElBQByIV8Om/+1H+ABfb0KVWqGAGAI9+dfVbL76xfgv6x0f+PimT2Mw2SAPrl9O/buxbZt0zWpKjcAIGxp364cl22+vn5q/4YGNwxgBUYMYvxeWQ1qGGqTlpuVFZ0dls3LoOsk9TKsJjRxu51Sq1Zh3TpzK5s5UwzhQIdGMVqP+kY04tMru/sjbLfsZNt9PfzwQ8GAujpdmpeZAMjNlVs+nQxjY3prnoM5UclRM5KT5ebIiFEAENUEwH3cl5vJwXT/pOhox+PWVjHFo0fThkJzCkZwMYrp/uEIV5PHcZzuX41qfz66heLllxmgKiREYoAFmyFZ+1W1SQPIW5gXT/fPyHAFgAWaFvc3OK4CFWRAOcr1yZISEcuWWfFynuUGAPx69O5YxGqptjZh8OVO69OLTxjspYrWLzPA75U1o7kWte1ol5uhociW5LSq2lrVDoxoEIMkhv5UISUFO3Zgzx4TK3vySTEkLk5NXMGVa7j2EA/xuGU3HI+vjBdVVopwEgHAMC4dAKjoRdFRixbJv2X3txu7cwQAQ/6dFJNEAHiawt+PYplo/Qzan5qpRz3dn/E41uCzkgwAPXizsgQACgOdmQ7Aq8p/1czKlSvz8vK0HnV1wv3b2wP27Glxf9+jddMewiEGHU/NzJ6NvXtFzJ2L6ZMrAFZhFV17MzY7ZenuBMCDB56q8InMAL02YRNLrcZqvxdHs2ao26gBQN5U8bDGbM1LuHQe551S3OPnnkNRkaHxhDI7796tJkYwchZnL+ACPpMku+fEjRuoqBB3VtPSpQIAGzcara66M6tGImpRVPSCBfITGQAGRfdvQpP8OyEmISYmGQhXlhooAFygGpCWY7kMADUzhjHZ/ccx/hjw41vj4woD9CqKhbH75N0nCQCG0gjGyjwiYKXu8VXnwzQNsmIv7QZOAz+rzIAe9KjJtDThN4zpkxMAIhBByy50Yfe5c8L9q6q8F/rwQwGA887WKldjWf8WRx7qkBifnZ21OHsxr73jsfTcpOgSJ3HyFE7p9iAIX/4yvvlN/M7vIDcXwcFuhs2YgdWr8e1v44UXsH+//skxHCP7OtGJz+SQ80G36RuVlYIBTiIAGGFhhkrr3TkZ0cnRUY7p3AHA7smQ6f5kgNKIQUxMEpCkTdHaaulm+OkivDiy+9u4h44aPG90/wY0PFbr916YYCcAeP9V8Wt+x4I5ZAAMY1g0VmL+yvl5c+YoBOjt9QwAi/ZhGrbTS8lWtB7GYTJAn3ziCezdi127rF+JrBB9g2ZdhKJkXixV3GV+V/2n9Sz2yswUMX++kklCEmvysP4Sv/RjcYRhDWrqUMeqQAdQhixgQHp2/TpqatDX50dZ3h8uLBrRuch1bEMInn0WK1YIJ6qvx507ovLoqHgUHo6oKCQliRdbswZLluhLncbpd/BOGRf2mTzK6cw3NQkGFBRg/XpHKi5ObPuHHwoT8anhYWHQ7e1ITMR1RJ2LOiOlmaP7379vdDlDGLplu9WClhR7Cpsx1XR/yVLb2kStsbFp2ASb2TGy+6ciVTT+CPhDXMO1UziahRNZVhjVi8r//ryB65T8dhkZSE/H4sXW7JI0wRjGhMfbrm7CJgIAefI/BAP/v2rXub/N/92QdhaYI//xqwz7/hBGd9NpI21OE13AhXjEJyCB311NlpSgs1NEbS0slwaALGTRrHdip9PzMppbGbq7PR9kbfldXQoD9u3THrMgAVCP+hu44cf6asVb10oAoArx/6kPav3ej2EM/wK/CEPYBCZWYZX2YNkyEePj6OgQXiK7QFiYABrtJijIpc5JnHwNr7GUdZ/j10deDK+iQpCUEaKePhkAjJ4e36Vp0Ax+EWBVcoyco/szTOmW/dYt3EqBBICY7U7FpxGExjGQn4Y9m7BDaZViAAOLcbQURwO3furv5T8v+vNR3cw6MiIYQAC88IK1B6cKVXR6AQBJJN/LUhAAqKrysMmm9APgPt2/NAD3d4x9MfDbcQiHyACGak10IDKAnsS4dw/WSrmCwQguQhEB4PTw2jXh6JWVxsudOSMAwMjJ0ZIsSwAwaLhm1ycD4Ck8Rb/WskNDqKkR4a9u4/bP8LNBDLIyl8fX156FhmLRIhGe1YveEzjxK/zqLbw1ghF8JjPiOeaZIgC2O1wXEREKA956y/d42aPXrxe/k5PlnGcASHfN3X2m+zN2Yid/x8Toire2Tufb2w0zYA9QrLXmYQ7/E+7/cYDWT41Nx5vRLmQGbNtmDSsltaHtKq7y86YhTctevy4A0NXlx7a607x5ARCkD1ZqEpOHcVhmQAIS5GRKCvbuRWcn/v3fLZ0MCJL/0AQZ6UjXnoyOoqxMxBTZvYKSyGCMj2sZfjkWJ2D8WN8YxiSnd/Z6AYVaTEwE8ubtaH8JL/0z/vkH+ME5nBvFqJFRPeg5juMv4sUf4Uf/if/8zP29yMtVqqgQDCDHNT3xhGAAT7pPyQDQqb9fuL9zzkAZfNyEpkEM8veMGR6LP96N0eu7QOKU5PvScPs0r9BfEQCMO3esrUoAVKHKOcXcVSvnWAT89LHuq5ep7uAOGcCw63qtX4+SEhQXW7yMEDRiCZbQnTNQ2Kh/Ui8ZeWur1+GNU1NNTWJcZib26IBdiIwGFNajnlfO7BIls6+dhwItJYhQE/jLj2P8V/gVz1YlKvOQtwzLFmMxwRuFqAhEhCJ0AhPsQ4+g7xMYzWiuQ901XLuIi7JxGNsSkzs4raMbA982dEoRyJR9fYIBa9YgbY+uFwHw4YdoafGxRvo9PbqrEQuUxMBHAgB+vPUt3GJEYKUj0SEO/PCwsfcaD2A3G6R/M3wverphJM8yZPhVuPAMz30HBgQA0tPxtc1eP0KjqSMjmf3VldgNzJES3aiq8uAAUyp7Oxg9UlgnafKHpo5Fg/veV3DlEA7Ri/YiS03uXYHOvejsFNth4gJ67RqCUqxH4WURM5y3rQxlZb5ql7rNclzmPGQCqY4MSxeSKVj/b+YB0ICGctSUowvKje8QUGgyXceTyFvGERxJQ9oiLIpD3DzM0wNgCEP3cK8TnS00J7T4tSXu9a4UAajUXPeA54N0nEqtWGRlJWLJ9DVArNROh0BqDH/tL8UBHyUJgI9LVQDAJwA8rJju/z3+owHgY/QbdNxx09vgRvvh7U1LhfsHPokPlQr3t+SLyrpyRWJAOTZ7GvV9sxM8wiMCoJQgwBYpcRV3r7qMOOB25Ede1tpj/eaWCvcvtWgr38W78ZgbD6x1ZIKBEtpfNjo6UHrXWP2/9fE8BAe2HxDmvMI5T+svByZ9lXd/fMfHUXZAAOAFXXKFwgCcNr+xB+j4InZIrRopLNZDPLyBG4xACx0w2rHRPfunZzKL5jM5pbcRIyM4UCEB4BnzU3z8jjDHNY7mR1KYX3QVbjH0daWYnm0wrQOPYxK/ZvEx4sRBgXNG3NRRh/2b4Ihwfx0A4AoA9yMPPN4v6Mdeeh1wGAcIAMYiRyYJ2At0Av9mpPhPfHexWfHeX5ZAlupoDkjNf5J+f1P6neB41C41fxzAXL8rVVjgaHZIzZeMjydC/xIokH5fAL4rztZUfUXqtVT6fQL4G+Csc4dnpHlzrdg9qlqq9kv++gvpV7BFdeukaq9Jv39f+h2je/o14GWLJtLpBWmeREdT++J/Jv0Ks35GIT/OcQjw59KqZgP9wN9J4Y/s0/NKVtzRKOm7f9txYUakT/A/fY2aCfwV8F8CWPIlaaKjWuL3pESspfvSLdX8UQAVXO7Eeal5wq9ST0tjV3raAP0ZuSo9e8fSvfCq/dKE6Y7mRal5TG6EiE8dmL6s835FRMA/oVGeeoq8U3m/z3dxW/CAtw56xWO/iiPSo+MmUKWU0YaKLlqvC+hoci5C+w+HlRqR7Z9L2G9pXWpCIsD+A763RtbkJMbGMDiIe/fQ2YmODuNT7ff2gUy+mryM4WH09aGrC21tImPyYHhXLlbnIHO29HuuBPPcWlRXm67j5UQHISgTmYuxOB7x8zF/FmYFI3gSkyMYuY/7d3G3BS31qH+Ih9a+mqpCfKEIwQuMrPevtGwkYiKFOQamS4oB7sdfW3+qde/i8jYFBQXx8fH80dHRcfnyZTX/B1PH8hWDnRJ1bu3/h9rPnJwctXhtba3nZQU7lZ45E6mpiI1FeDgmJtDbixs3xPH2pVQxLJWHJxKRIQh5hEdDGOpBTxvaGtE4jnFPA7+jb3DzE52e1sr2/w/id4iAQcD6ip4BAxJgIAFgtsta8D3vhQ74Wg5v6h87Jf7B5UzzR4PH0TbYEpCWgN+Um53l6Dipza1MHR2NtfF4cpbcehMdb6Nzaqk/s44BI8qGSUtYIhHVKk04SpdyX+YDf6g+afU0hD47OioA0NMj3L+lBfX1qKlBU5PP2cRUEcCfOiW/p75aMvANwyuXATA0JABADn38MRoahD3z5nic25xykJOLP1cvas4Ycv/eMgDwxm7ExnzkZyN7CZYkIpEAiEAEATCBCQKgD32d6GxC0w3cuIzLlagcEDfHmleTtQqrilC0GU84Zf+Ph96legBERooL/RU/J4bk/pfU5f815gF/BOv1A/GPuu6QkJCvfe1rxcXFKSkpdru9paXl2LFjL7/88qNHjyDZeO/UCn+pGXWd252O0n5+9atfLSoqWrx4sVz8+PHjr7zyinjwX/E0sMJpWMh1hLwtVhiBbduwZg0yMhAXh1mzwMV0d+NnV/DOeeCUpzfbgA0FKOARTRN+lTAXc2UADGKwG92taL2Jm1dw5SzO9qPfzcd0aX9TY0CtFEIKAKZN6fIfMiBBybQbH+VFZMAC5WeH2w4ZgN39ULKUuxksTTI+LvytU+ftytQkfEKC3LiHex3oeIAHfi7VmKpdSi7RDmWgqnNZKxkQY65Cfz/q6nDtGi5dwtmz4rdnKZNEaKet3eUhGRDm14s8fIibN1FVJdbw3ntobg7wY8QiNhe5mchUM7zAubmIikJvr18r1IlXl867FVvXYd0czHF5SgbMxmxGMpLZcxjDF3BhNVYfxVFeaavOGWHDNRSiUNp0h0YMjZUAEAmLpCyfDIi1qqSkbhwCvqdLbN269ZlnntmzZ4/czM/PnzVrVmtra1lZmZyJcmsM8z1PYdN+btu27fOf/3xJSYnc3LRpU2Rk5O3bt0+dOiXb7XMaAx7VIbgUwUszl9763WdQXGzfuBHh4Vqtq2KxgHsALMXS3di9Dds2YuNCLHR5SgdLRzof8dhcxEVPxyZiat0I9684jQD4RMTzLr62zT0D6P4JDhzR+jvcAkR0UfrQ/TvR6XPScQm5/90jdwLQVan0O9NR2pjmzsU6+tg6bN6MNWtQXo6jR/HggQWVr0uv9gtjrzZjBvLyROTnIz0db72FixcDmZzuz3BJ5uSI7OnTAb3WHux5Fs9+Dp/jXTXSn069Ezuzkc3bTlqccmcKfkh2/2S9+xuWKwCqpS/1y0/uEEK60eTHd4A/VXx5ELgsharU1NQcfkKdVq1alZaW5gDAk8ARm/GXkGZZB8jnjHVWrlypf07AZGRkCAA4TFT9G2wLDl4cfOurv4nf+A37smXuqkcDT03Nrsf6Z/DMU3iK58H76nhsdmBHFrICPDa/bgCgzpLPcM8AWrt6Len+OgDYPAGA4WvCQUGAUa2KJddk0OWv9aUH3T8NDkZ4OGw213w2z2Q2MjKQnIxf/hKtrdP6aiEICUe4m8G84YmJmDULjx7hyhW/10D3z4FkFj8Cfs+RzA0UAE/iyd/Cb30BX7DBeQM7O3H7Nvr7MT6O0FBER9OuBFwd4pn7Cr7Ctx7D2DmcQ2BajuV0f3LFv+F6AEzy//5JDEgNvw7hLeXvgBTmpW7kWilsS5dKrQ9QcxnNo7qOIZL0Q0NDQ50zl1jC5WTb3XmArKMS+NRSM2fO1D8NCwubMWOG29UGhwQHPx2Pffvg3v3daxM2fQlfeh7PRws8aGpHeze6xzE+EzMXYEEc4tRH8rEJRrDfx+ZTBwCbFS5nlz/ElPMqWbvD3DvErdR/eWVqdolXINGJTgMAkA7J3ykMsOoVHCeP1+cVK3fn/1d/9QI/dNOBAKC9zp8vfJZ3bcUK6E/5jh1YsABz5uDAAXz0UWCv9jHwU0+vRiuMQEQMYhZhEe0sFanaM7onr1ZvLz7+GN3dfixgGZbl2HKUi/S7aG5r+x/JyS9BvDH5kpbm55utxdrP4/NfxBedstXVOHcOtbVitX19AgDcz9hYpKdj3Trs2iXMVhKBx+G86i1o4Z2HZ2PyrlCE0v2LUCQaW3Gv9N4PtkV/10wFFQD/TW4PHMXARb8PYani/qWmN1T/4rOBgjQUfAfSfbDDfhmXPyAFdLpz505jY2O84/JSN2/ebGtrcy5qd9lQ5W2mbDKTx3TNjo6OW7duLeDhd4hzcUa3Cw7eFRy8ezeWL1f3qQtd93GfJs6DDUQAUcAs/dAVWLEP+/Zj/1zMVZMXcZFxEzfv4u5DPAxDWDzis5G9ERtXYqXch8fmOTx3D/fawFdt87mpE5hgqM1PHQCslw4D3D49ADqmejuNjwdo9mylj9TLbSmd/tHlryVGrStGBrxjTWnXU04GvOy+Z1QUkpKQkYG8PGzYgO3bERSkPJKRMDmJn/4U7e2BvRoZ8AtPrxaEoFjELsESnvVt2LYXe3kBlGdxcdi5E9eu4a23/NiBHOTkIlfJ1NKca68nJ8uT5+YKBvgBgDmYQ899Ck85ZQ8fxqFDOHUKt25NWYkNW7eipQVf/CISlDMZhaid2FmN6oM4CH9F92csxVK5WYGaM9hmqoIKAAUbAwMYeB2o9+8Q/lz9x5RczuraHVi7HxG0TgEAuj+jBz36LmfPns3KypqcnExJSWGzubn53XffPXPmzJTSdp9Qnfpy58+fP3LkiM1mS01NZbOpqenw4cOVlZVuFpwiAWDXLhaha5/BmWu4Rqj3opdNAiBCACAGiFWHzsbsz+FzT+Np1f1JuNfx+mEcfh/v38Zt/UpSkboDO57BMxwiZ+Zj/m7srkPdf+A/3LzMrFkID1dbgxgcwpDa/LUFwFTQx9nj6P6hCGWLEOzslAHgfBR4FR23sQ99dP9hDPs6Le4VIAO8HVL/Spt6i14e115UV6OsDFu24OZNPP00kpOVpwTDs8+KDv/6r4IE0/Nqk5i8i7uM8zjfgAae2q/j61rP9euRny+WNzho6t15/ej+GgCuCwDU7tkjt8SDXBw9itFRcy+1ERu3Ymsc4rQUq7zyCt54w8Mu2HH6NPr7ERqKb30LIcpNXIu1a7CmHOUu7mZQaUij+xNFcvNjfEz/qzB5ZFQAKF9KAGDA4vPtRVMPR3AwCgpEOOaUAeDSq7e398c//nF1dXWCdIXb29svXrx4//59/k5W/vesZDe/FLWJ/+/evfuTn/yEJ0UtfuHCha6uLjeldgkAvDxjRhva3sSbJ3DiEi7dw70p/eaov7ZjO79aCtHh0EEcfAWvHMXRqeWb0fwT/GQEI+EIJwnk5Cqs4gk8h3ONaHQdEBOD6Gi11YnOLmjLDlG2e5q+pUHZ3LesXVSCLSHBrpi77P52u+tZs8XH2x0AoPt32Dqcn38VeHlKYY+GNn13xHRpm78T0aEOH0ZrK/r68KUvYckSJb9yJZ58Es3Nwuam/9Xew3tzMTcDGZuxWUnRFDIzkZaGqipTb52DHJp8KELlZm1v7fXa2gESLiuLzbAwAYCcHHzwgblV8wbSorT2Rx/hyBG8+aaPYVw8N3DZMhQWqrlMZKYj3T8AyO4fAgUnZ3DmDJLMHkIVAIrcAsBle6066G4PKq1/7VoamTxJHero/vTBqR37+vqOHTs2NV/K/3OAZz3PWyr/+YJr/iUZAN/g/x0dHW+//bbHCrodSG5L7vtG36s/ffXn+HkNajzsj7KlsYjlqd6KreoDfrV38I5b91f1Nt5eiIU8KolIlDP5yM9DnisAEhORnIzwcLk1hrEmNLWiVX0eMv1e5Vk2o8/9W5qLMSeA1u4wd1p7h7sxooujj62DtNQ9a1GPyfQZtSGwPP5PVl2Nhw8xYwZ++7cRHa0k6Vn0TT66c+cxvNpFXKxGtQYAKilJnO+pAPB6ruj+ZIDarEUthevXZQCIDuyRaw4AJBOvIhGlpS5dQkUFJid9Dz53Dk88oQfAIizi3YZ57cROun82suUmt4tWcgX7TRUJRzjdX0WI/dEjG91/eNjHsMBPo5evtnatvUCDK92fYar21+U//OwFXnpskEInDSXfMPs2J3DiMA4r7u91f1ZjdQEK1A0fxvBpnOZw7/Uf4MFZnN2ETU/jaTmzHMuzkBWEoEnoTl12NpYtU1tczw3ceIRHaiZI+vePlSXazL5mALJNU1+PorXH2+LlenR/TwCwxUt9bPT+TvZyPPB+uu3eF2/zd3ftPvclkOqmVFeHd97BkSNahjzYvBkbN/pXz27yk9/BnTa0jWJUS0VFYf58NxviWUlIor0vwRK5yct2Hddr6f5kwKhSOS1NACAhwcS7sOxiLNba/5e9LgGv6rrO/S9oRCOgEY0gBAIkxCQxiMHMMxhjKQkZmsQvSfvS17zmtd9LmzZVEmdqv/Y1r03S2Hl2XCfEYBsBBplJDAbEIGYkEEIDEpKukIQGNAtJ9/37nHvPPXc+9+rKTtP+Wrrn7H32Xnvttdf+/4EBozRqQUcHKitRW2veFiaFI9zdfCYggey/HkYhGcDASZw8iQpN2VaB7E8zt8n+NC0YTQU6mZuZacjORkKC3KpHfQlKqG2IHMVyIh+0fwUilC5y/3HTh1GCQRaj+AIuaBmcjnTWpNK8iZvcYDvaXU68jdusXqUZgAAWdjKSzSPGjcOCBUyg0kHhpH+1k3Gml07j8+PRAN3HMMMaMYihBsjvZP+mJpsRYWHi3oeGGseIUXrN7g0ad+HuRgxu5WhMleDSJRQV4dYtc8+SJcjKQkSEZ/7c1YAudHWj29wODERAgFuZ5U3LQIbSLBXEXzpMvhbPUvMwjpvrxkYiEBGpJqTGRtTXw6D56Fpb0damtHiTae4mU2b/IATJTYn9Tz5y18toBAAelZ/TKYKOyf6sMRNIYTR3N9VvNup8f79Osj/t7281yT47L/X3bzR9koap5rmHmzDcUBeqYwqLR3wqUidjstJTjnLWopZVetBTi9oGNCg9cYibgimSEwnLl4sbarqe13GdslSFKrUTH8ts68yBjl4HHUHn+TyHQW1V3tYDfrbfo0Duj/WHv9iZYSvZP1OPTKtBVIeYGPm1c2sn2X8lOccyF0edBWjQuLcxF9mxW+DiRSxdinnzzD2ZmcjIwJkz3l/L5rANglMte3XubZXsT25XmmUoM142WQAWLTIOyxACcPy4VrfBCLYmzY4ON8KiAg0OKq0RjNDc2tcKrCD7z8d8ufkQD2UBEF/chJUA6NwSAHfLzyn1C8yYAQoAfyV0otNCAH4G/FzTOvnG5/uSqfEXFNwfS0NuAofgBfQBNyTTggQkJCJRaQ5g4BEe0RxdBauEtaClFa3kfbkZicgIRHD0L3TYFBW1ae1a3apV8qcudBWh6CzOWnn2cUhhYyQDLorD4HyQQw3IVzf+WtEAZT8xEr3L0Ovzt+ixZdhm07HmQfp8/Wegt1rkZ6MvfHX0tVLYv/bWbbJKzHetkuIdVFbi1i3U1SHRVLWzZyMtzTMBcFenwhBmwbPd3cI0Q2b/cITLzWY0k/UrUSkaDx6grAxPn2LyZLb4QwGYM0f0ucY/8Bb5vGNxlZ7j+XMnM/7Squ3vDz8/pUWaI+laDPga8EuH3qIRTfbfgA1Kj8z+ioq4dYmtBAAOBcDKq7uH6Qxm12T/rCylJbP/IAbtMpYT/ET8FEqmxtflx49NQ6gBJ0Yd/E3Jeu1+s+Kv+YhCVIwgJyNYk0/wBCYht82y1XZJ6zSlyQsSdiMMkixWZ2+pidi4qWPStEni02EcLkThYzy2isjHXvJ1GhjXI2hifxenaj+iRQ7byuBi08uUKYum/AL4hb2Vy43PtEVpwF7JjKgdJZsZxiBh3tdnDSgvR0WFWQDi45GSgvBwdHSMSS2YkIKUqZgagABzV309mpq0r0j2pynNMkHvKoIvpRyUYtUquZWRIUZrEoB8/MbNFFoLQESELDwyGtHYBDf2JbP/REyUm0UoIvvfx314BLUAiDMi+3d2Kl8nTRKffX0NIyPo7UV7OwYG5C/qA9MmBvZGWRx7QoJg/8xMuUU9kwUAo4Q3pcoOlgE3nK9+0/SezzObqBwc0YGOdmyHMIfXW02OVHiDatSEHRMCEciXIaw5cmRLTc3imhps2oSOte+/h/fO4ZytNx97S1QAM8ZKAxzCudSNBrKfP1qGvxU0IlAIfA+4olpUHvPnSPsOEM633wHfh7hDhtHXlGGMCvWTYH+CNVVrqYa8qHFxbgmAzv2d5SBnIRZadN27J6RIG3jNyP7pSFd6JL4vhQMBIPtTAwoL1eznAL38GwWCgzFtmllQgUpU1qBG4+xsZJP9F2Ox3KxHPdmf5nE4igAYz+jZs3HPns1bgFmzkJSE6GgDP/v5QRaAp0/x+LE4hFu30Nam+LC6Vvbgkv3F3ri5bKVVghKy/1M8hVdhcBTeKK5XnUby2oEJmBCEIKWjAxk0l9fbETn6iZPxk1630srKeFk7a2oKntcUHN50GPF2pvg4WGIPsNfLGuAsJQZ3tmkvHFXB91i0FA8xOYidYByrB5pUnuQxwRyD9eHrpRFNOKl3tNZ6d3Y9Viz9CbE/0dgIvd6iJzpaGMttzHa2Azu2Y/sCLDB3Xb2KK1fQ0KDpppHQMTfDdLWIR3hUhrJGNJpH1NeLLdTVyVys0wkNoJ0/7+X8We9v3jykm2WpGc0MrApVWlyFI5zsv15VkTL794hL4CEUAZCxrLNz+c5nixZhzhzqlCEgwHo803b/Pq5dE4ni2kNDtnu1OSKdhjOPiEBWlloAyP7UAIwSDsvFoJG0NcKZu/nATuOrL3x9VCS8Ajg1ivuvE2UrL0sBINtV9/YWvP/+QVRfQA2wSVrAEj5e3PMYcJnmU8k3PnvMr2pMykPsesj8j6toKoRCYWaFwB/HQqL37vxuPU524KL9tawFQPefiP2J58/R1obOToSFGXsmTcLEiWO0szmYsxzLN2PzTuXSEPX1ug8/RFGRdsdkf/K50ixFKc16kOgrlQWAIPtnZHhfACxAQs3JweLFSgdp7iZuapwts38MS1fCRVwk+9/ADTdrxaKAFQGYCaymTXy26pvPqO+OPMXHC1u5UgjZtGk4cAB6vXsUbN8vqZ82bpzcuod7zEwtal255u3/jqrnLannkaMJBidsw9cPMRo4I69DFqyt+nBWCvjcqK95GrBbcvW/hN0sx818/HCf7TjNAqAbNe0st3pqrE9tGlBs9bSotTmIVS5JM5r10Bdj0NrDiljEGMc0FTc1ocnambsYXbpWqBO13CO/F+y+egNdXcIUARCMEaJ9Nol8h7m1w+7OfOATitApmJKGtEVYNAuz5H5xonV12L9fMA1PSRtSkEL2j0Oc0lOGMocCsGWL3EpIEBowdSpqaryWOevDW78eq1dD4leiDW2XcOkKrtiZSVaNteiYh3lk/5VYKTdb0Ur2p7kZkfXlUgTgz8j+Q0Oz8p4BPS6rzt8fmzeLfQQF4d//3fHJ6LRdEXrJyhJmAtmfhlEi2+XqlmyzGVg8qgVdkpcBBoMUyA/l9vnxwszJ8pBE/gYS/88y9zwEBP2/aj3Sxw2vo9QAqhHwKU84UpsGOAbZP9Z0e8jsErnbDopBbKwcEBWCptn9NouH2+x/xM6bMVsS/oen7K9i/XXwKvr7MTBgbgYECALQDPPW8NeOdkYBIA3x4AIQIPcYK6C4GB9+iEOHcPeu9hUzkEEBUJoy+3ei03pce7sQgPv3Mct4dSgAGRleEwDrw6N3subGjUrHOZw7j/O96HXpagImkP03YIPSQ+o/hVOUAXcisr5WwQhm2nVS/38Xx0B++L5kUnJ4dSj8w8Pw88OkSUhKwrhx6ukLFojfnh689hqeP7d0HeUqG2pkZwsLDpZbj/GY7G9HsN1CocbVLdnmyqjWVBZyxF+DGByAuErGS8HEXvDHKeW7h5wrvOl0+LQOaaL5UPE/KgEYJdZiCoR5wJEeaYB5PNmfVCK/OyR3sn+McYxDkbAPkduXJHN/Z/+qbqgFYK38mOehqqjZ3/sgBdAUkCZ83Cik+cbnHO07e/X58y9ev1517VrZhQttRUVodYPm/OBH9qcGKD2yANgfXVYmNEAlALTCQgwNjTZn1luMjsaOHdi2TekoR3kRiqgBWrzJ7J+IRLl5AzcoABdx0Q2StbpQJ4AkhCSHhPiHWA+8eRNXr+LBA3F1nj0TuSBPRUYiJQXz52PVKgQFKWOpAc3NqK3FEXU1/1x7VBCikpUlzASyPw3eg8H7bOOhDHSjm8aXQflrWJgwC+3UOQhZ52RP4+282YebAuChICkg/78mmQfwfGGyPzVAfrdP7oGBgv0jIuSW3qBv0jVp3vRCX/57EmathjFUgIP4gwT5/12tY7/99z7VNyIfXp9+u7bnMgZIlF3o0jhX4vC5EzBBbvail+xPDbAdKQ6a7E8jLwcGsofMJmvAjRuj2qt1UZBAd+3Czp1ISJA7BjBwDMdOCBp2jVmYRQFYh3Vyswc9ZH+aOxHZcNGrRgHwSQ4pSkayZOMxjIICweXnz6O62npKcDCWLMG9e2IvFAMT1q8XMsqMNTZ6dI1J/dnZQmAktKO9BCU0eAkGraO8rAF2nbah7SmeTsd0Yzs6GrGx9qbqXEXlITX7eH2TzsCCyAded58rlV3/ieQhysnQk5KZQUkl+4cgRG7qobcjAGR/U9770McBrWh1el0sQQX4gWRexy1pv4fclZbfb3SInzJ0cGfvmfrsbG78eEExOpF73bd1KTpyTAqJ7yN8NAMzClDwEA+1rEYCz0CG0iT1k+Of47ndwbrBQQqAgQS2aJHck5HhgQBkqRt2trZ7N156SVmCOIIjhSjUsqPxGM8kbMAGpUdm/3rUaw7PXjmfF1aBkFeTQ2T2T05uSYotSC4oSD52LNmum+5unDqF+nr09uJLX1LEjOdGXeDmDh+G+8wLwf5Z5gRewzXaEIbgDRhGRddeDkAn0VEDGszrTZyIadMwZYp98bSM51cSMXxgbKUB/wR81e6irHZHBf+xCQCDE/z/jgeiZX0Kn6MCfNNm1BclqkyymREj2D1GfqfYktx70Ws9mewfYxzDAXqdXvWNIV6RfB+zG92w+H8uDfihJ2VmkyU1yP+nrfLweygDBoMw7ciXH6z7153Vgo+PEIDoaJD5MzNhiIZEf6uxOl4XH4zgt/BWFaqcL8WjJ/tTMJQesj81wNmc0lIdNcDEzmlpQgCiotDc7HJjOk2Ms2MHXn4Z69crHRdw4QN8QBLXwkgy+6ciVe67j/ucWIQiRwEZXAb5NeCXSiPk0SMaXx74+BQkJRUkV10l+yvG+5VgNb28HO+/j8hI/MmfKH08rvR0CwHQWh/MNQUgMVFukfdlAYA3YPBkhvc1QI1HeFSDGosIMzJ08+c7EADrvURJdnjixJb2HcBOIBj4Z4DsmASdTpiEfvTT7PpxXwB0nnEQYwrlo9xdDbDD/kZ3GhEr2D1WfhfkDjW5mxATo4uNlQMh+3OY9o0JNhsBvueFHCnUqMZHag0YjW8vgtTso6qc4WFh2vFT5Y0a8J6znbGCeXozZghSIGOuWyd3pxpS85DXic5f4BdCzh1fUrL/XMxVmq1opQBUoMJZeBUVQgNaWxERIceTkSF46dQpJ3Nek8wC9k+JW8jNxUsvKR1UowIUHMRBLZmbhmlkf2qA3BzBCNnfuXK4qBe9VdGFSEb8v6GhgqqqSllg/VUCoIjBUmXSnTs4fRqkrSVL5A4Kd2qqEO6qKjerlQedlaW0ZPZvRztGDU8vzRagcPSrOwK3Rgl/iIeKomPxYsPy5bqbN51ogLKX7ZIARO/YcejazrKyFFP3CavxAxig2XXlM3Z7s0GXxUOBkwr1VH3Vwh1DduePBLK/fXIny8RIY3RWIuG6bF6VH9SAH46ep7s09X7iGhAQIEyBqK4BN6YbHJ6s9c4MBnENaJcvo7YW/f3Ytk3+MhMzN2ETqfwDfGCcY88n2V8tAGR/Eq7rCEs5sBQvvGB0MtelAGgjmpwc5FG58pSOOtS9j/cP4ADFTItzmf394Cc3ZfYnfTifpcqqzjpW69sgC8ArQAFUtMvTfSAZMcEkAEfV865eBTnLJABEfDzi4oQAuAGKBgVg5kylQxYA55Ni1fuMsTOAl9mgdycMM0ow9riJm9dx3SwAvFnr1xuqq/Hmmxgasi1qqwJbvGtX9K5dUfOXHTqEM2fYce73VgAcwy6jucX+CcZ/W8QKdjcWiUzuNuN8BftHR8t+OKANTba+HntnV2OZsY8NoaEICTE3u7rQ3T22OyP179uH8HBMm4bZs+W+VVhVgpLzON+BDtG2kYFZmEXqjkCE0iPxeqmNdxtF4qiyMgqAHExUFDIykJaG8nJnkbs4kPnzkZsrzM9I381o3o/97+LdR3jkLB0mrMEasn860uUmZ8kC4E5qXWKvZM7QC9yTzAJ1daisREeHOCMJTFpEhObQZJD9s7KUFk+K50uNdD4pX934Y2sN+JH8+BpGj9jY2MWLF/PXYDA0NDQUFxc/ffp09G5v4MZFXFyIhWYNWLgQL7+MwUEcOGDg5XKEoCBs386KSt658yu9IuHR0fpDh0709UkCoNMJk9CP/t8HATA4K0Gre69z86aJKlgLrLDqDpbqIRzGohyE/ltUAet4YiWTBuQPBqIpH0+s/LzriQD8gWpAYCAmT7YQgLY2tLe758SdWjDj/HksW6YIgC98ye+zMbsYxXaK42/ArxnIUL7UorYJZV9Eg71SslKPBuhLUVuLpCS5PZe+5joTgO843y/VIy9PmIkfn+EZ2X8f9tkTJDtXIB7xZP8N2KD0yOzv6GK7jTjg74CvaFYKW+j1ePJE2WBoqDA3EB8v2H/ePKXjGq7RXM77quP2W8rbqAUgOjr6lVde2bZt29SpU0dGRiorKw8dOvSrX/2qg5o3ahShKA1pUzHVRyHkDRvg789VcfYsrl/H8LDFBB8fzJ+PF17Apk1Ys4YdEybgM5/BQPTxqqiTJYc6WetqsEioAXaX9kgAPKcebffeXfYnviw/qAFJ6pViFGoX6PiyYP8ulRtlVIw8wu/LTV+G3mqpK5IAeLSlP0QNiIvDlCkWPbz2zc1u+/FAA+7dQ0UFBgbE3ZAwDdOSkGQhACaEvBpC9idvY0ihuNJ8C7Y1OI2pVDKzAGRkoLAQ3d3ubygxEbm5wmKNxcgLSeqn2Sc4e15k9g82BMuNj/AR2T8Kd9bZuRyO0rrO4qHa/Sn+d59Cj8oNz/O7wM/hBrq6hJkQEKCckjZkZwszgWrN5NzDPfx+YNmyZVu3bl28eLHcjImJGR4evn///tGjR0fv/D7uf4APIhGZhzxz76pVSEnBwoW4exe1tWhrw9AQ/PwwaZKoqPR0LF2KhARl+If48MiaIyVRJYgC/sbCP+uNZndpn489k67uPdxnf62Dw4F/lMzJqETgV5J5a0tjrwH4eGVg2jQkJ1v01NcL8wAG1yduDYpNSwvi4+VWFKImY7LdgaR+2niMV2rcB1shzJMS8/ExasClS24GHBmJPN7rPHGZTZDZ/wIuWA92kI0c5JD9F2CBaFzEk/wn43HyGzjpIGxHac3n/w7J1HhbFoCeU1Br20TJ3MLz54KhTBg3TphWTJ6MrCy1AJD97avjJ4S4uLjp06ere2bOnJmg4t9R4jiOByGI5bobu829rHNWzo4d4n51dBgFIDyc0Vip6ymcehfvFqAA6XBPAFL5k2rnw8MxTKYH994Vy9VZPWFagtn828TETNH/UR2+BxTZhPAV6P6WUprIyUdQxyElzpdL9N6WvIWPUwZmzWLtm5t6Paqr0d7uoTfHibMvmz096O1VWhMwgWZ3egYyKADmdinwI2Cv5ixx+T8CvgWkGTuEnsx1UwCCgpCbKyw9Xenbj/20ImMhOuH9RomyX6OGpGPDC1hv7M5BNE7SgA7Hp26w5zcnUMy2QJPyRuruAfqBAKnpKwlACNClebMUSR+T2ALDw8K0gtRPGz9ebrWh7fdNAIaHh4dU8iYSNjQ07MYOXeMADpCm29G+GZvjEGf+EBAAS+1Roxvdx3DsIA5SAEYwIrqipA86nTAJ/ein2Z3uwxLDVgOy1GWkK4ROuwBIx+6jTpWGk3ebMF1cW7ENfNfmSk1AzHcQizek702X0XTM9srFx+A7sXyKQXoc18PVFX/Dgy3pPg56/hgkiEQ2fz5iYsw99+6hvHzsNuRZ1hKRSLpOQhLf78hdpXdQpk0slTSWSpYmVIT/yclCABIS8PixtiDGjUNenjBSmwmHcGgf9h3FUadHJgenNzU3QLD/ZNWAz0nmEjabpAL8RDI7+MIXuiUNCDB1UAAmnUNXrdakh4QgOFhpUab7+rRNpIhnZQkzoQQlZH/yCNwCE05T4TmeD8GCtT1GVVXV7du3Y1SVf+PGjcrKSq84V8DC0ENficoVWMGMRBm53D560HMd1y/i4imcOo3T6k/Dlm/UFZpdJz57RJ6eY8NzRBi7HsP/tLkKXCMMYaEIVcXVIw7fNdzQANcs8CZ+bdPnBz+yv0jiG/zOC8XcHgLa1GNiJPangglefxNNaGrC23BeNG94T9a8DatEDUvK+KoXF1i+HEuWWPTcvo27dz13qHPz3MkyQUFKqw99/ei3HUX2p8nvQvtZk2XvorTMtbao4xECMBfbZiAg4IDsVvKrVQByc4WtWqV0HMMxsv8BHHC6cduw/kX6beefu3ldJW3/BVI56bxdpCsf/X9vf5l8XRf+7plKaCLuIqIMtZoFIDISk80q1dEhTBMokDSerIRBDJL9qQFwF6GhagUSMaCjE50OxxsMwkywkQ8LnD17NikpqaOjIyEhwWAwPHr06Pjx42fOnBHfLomfPuNztLiBG2Uou4IrC7BgFmYlIzkGMeTYAATooCOPd6GrGc11qHuAB7dx+zIut6DFykm+/Pit0uFYAMRPVxeePUOEUQEmY3IkIjWGOxET4xDH+MxdT5+irU3bbE2EafA0lbGIZe6MDWoSud0msNhYKKJO9qdEDJnYX+fR0o63pBvFVryfHE+wbp2wmTPNPdeuoaQET5546NBd9vf3R1ycODMTSIq85FajeJFJ1BnIkJsF/C8rQ2kphg+6Fx6vTOk4MXHRIrkjI0MIQGGhmjccYMcO5OVh82al4yzO7sd+CoDTXdv1K13nH3ma1F1UAD5+amKFH8OeZHJAaytaWpA91dQR346kJFy/rmlVUj8HR5p5g7etuVlLuDpkZQkzgexPc0bcjsCbHB2ttNrQ1ohG0qXD8f396OtTWuHhav2yxuDg4Ouvv3716tXo6GgKgF6vL2VhyMgX7J/vdrgOQbJmtdDI/olIjEIUCdYf/hQAqiN3RMavR30lKocxbNfDq/zfZ7FVOBMAHhTv8LRpctcETJgmGtOqUe0yVl6zNKRZdDU0oLFR82blitd5ld2M3sj+1ADZi6GpSafX2w5lzUh8IgaR/akBGDU0yZo38LGyP6/oiy9i61Zzz/Awzp9HcbGHDnXub23BAsyZg3HjlA5eA15yq1Ey+4ci1NzFu0oNcKnItiFxokoAwsKEANBu33a6Ncpkbi5eeknpuIRL+3T7yP4jGHH/PP8vfulpUldJAiDwU7oxO7SDn9bXo64O2dmmjhkzMHs2jhwh+bleODNTHI0KtbV4/FhDxKwrLhkVpXTIAgAPQNKiCJlQgYoqVDkb396Op0+RmKhsd948XL2Khw/NQ8gPTXGASQRv2z34E/wbEzzCI5qns/dZiYBdSALAY6+pwdKlSu8CLFiKpS4FIBzhy7E8G9kWvcxfdbWbsVrLwCiozeyE7B9jiDE2yP5Ndsid7B8TY1ytydCk1+k9X9neVda5oJz/IOy/fDlefhl5eQgIMHeePInTp0XxeAAP2D86GmvWICdH3fcQD20vOdmfLG1ut7QI9ldfa7sHYjekBw+EAJAmJk82Os9wJQCMkImimXBDd4PUT+tF75iep87NwVZLVlWhogIjIyaFDQ4W1LxiBYqKXPiaNElUiFk6xG1j5hobNcTBWdQAE+7iLtmfuu7J/qlAaWlK6w7ulKHM2XhZ8ebPNyZEhx074OuL8nL09iIwEJGRuDEFhVOAF12ufUgyN6HzZJfehSQAPCvekM5OhIXJvQuxcCM2NqLxDM44mhmEoN3YvQVbIhFp7r1/X1yO5maPgjHIKRnFVUhWN8j+1ABjo6nJoNfbJNxAhY81DdFDTw1Qn8roCdvg3kEbNI41eJha9xEfj1WrsHGjuBym8hDgKR89imPH4G3Y31pyMl58UViMSdGBGtTcwi3+qgdOxmSy/2zMNjssK9OVOSYCnavklJUZqAFMggSSDDWAckBRsAOySW6uMD8/2fk93NuP/WT/drSPqZTrRl0D3d3iVK9fVxEyFZfCyet8967DaaTMnTtFhVAGTKCTW7c0BM1UUgCSkpQOsj/Nk/0z6AULlBju434JSqpQ5WwKmZ77YuQBAXLHjBnCmprQ1yf66ifjhp8nsfwHgiQAw8Mi7ZcuYdMm5cPLeHkYw7xOF3GRzGg1LQMZa7F2J3bmIMfiw4ULuHLlE9rLr41P6UKNx3iyfwxMfKHXi4O1BBWe7O/vb2w2oUns1OB9ZVbJgEtNcb28weMgNO5r3DhERYlrOXOmuFRLl4pbqgZJ4f33cfAghoY8iUSneWuk0cREpKcjJ0cUJ19UOIdzxSi2mkH2p1l0kf3J4B6Dc1UCIJaQ1jhzxmZkWhry8oSFh8t7JAGR+mksrbGjfrg+WIOjWVYX+/JlcYN55uPHS+2gICFmIyMoLBQfnj+3dkFh3rABu3dj2TKlr7ERFy9qowHWlVlthKKTtcndbu2dQjOPIrRihTqGj/ARicvFzK4uFBfj9Gls2aLujjFxRj3+8OFjfH70kSjq1FSkpMgdgQj8Ir6YitTlWP4QD5vR3IMeHXQhCElAQjrSl2HZdEy3cFZUhJMnce/eJ7MVyyKX2V8nX42BAcH+zc1WE8j+ymG3oIXsP4ABW8K+7L0AtWnANyxayRYdnnDGT43/YvL/VH8Is14LEucGBwttjI8X9UBSs8Ldu3jvPbzzDuo9vSDmNePUDeut8VaTSePiRAyLFsHHR/3xFE4dw7GbuGk1ieScgQxzu66O9G1oaIATlnQuSNwmBaC2ViiiSQAyMmwEgEJFrqSxqoiFpI96Uv9R7JuMR5M95v3r/HMB7Xpq7jDNYaxfg0W2Tp3C9OnYvt3UlZCAr31NVALptaICT56gtxc6HcLCREIyM7FypfhV4dgx4WRAuknOwGUoAKoCu4ZrNLiJXwCbNmzYtHZtIEOVcBqnWR6ahOT4cVHngYFYvdrhmHb8AcN0qfr7ceQIoqLwuc8ZK1hCDnJoT/CkFa296CWfBiOY3BomuMMSly7hwAF88MEoAzJ4aRrZn3EaG2R/vV5FwcYJZH9lr2T/JjTZ8anDElaYl9KtTQP+WfrtED9k//zRJecf5cdPzb4lxxL759sZT9oNCnLojQLPOjl4UFCFxzAuG6cOwOBOJGdwZj/2F6DAqj8VqWR/87kT5O6yMsvz1ASLeOiEZhIA1gw1gJT48KEyIhJ5ecJSUkTrCFrzW29h/1zsm4sHnlc3L9N1bHc6ROfZHVIpwS8tvxQWIjoawcEqSgwJwc6dWLcO1dVoaUFfnxAAdpI6p061clxQgEOHBJG7Btk/K0tpkWE8E4DXkFEzuKWmfNOmZMyejdu4fRiHC1GoafLICH77W3R14cEDcajcEXdOUOSePkVDC2qAavwBw8f8Wl6O3/0Ow8PisGfNUg+KFiUR7czNiRPi5PftE0Ly+wGyADXA2CD7N6nJ3aDc5BjTELI/NcCOI4mzj3kvMJUGPHI6MFz58VwXhx06NrvWiNu38dFHOH0ax46N9pQtA3Bra21oO4mTR3Dkfbw/iEGrr3PFJZ5r0UX2J3eroEUGrEOSBWDrVvNCc5GRoQgAVSoXE3IxJ934eVtXBPZtwz7gjufarZcEwD24v4q9dLzzjvjt6RE71imfKMbcs2OQMz/4AO++i8OHNawbFyfYf/58pUNmf4Mnlb715Mmt1dXjamqwadON85v3vzfuvV70ap3NuLnhq1eRlibogNskKHJtbYI3Hj2yywp/MPCxaN28iWfP0Ngo1H/JEkGQLsGLcf48Tp3CkSMYHPykt2MG2Z8aYGyQ/fV2jpHHrWyR7E8NsO/L4Iow3ITJXzLwRecj5wEHP86s2aK5Gffv484dlJSguBhVVd5yPAd4153xj/H4Du5cwZWzOHse520HBCIwAxkWAlBeLuqzvd12sKMjtU8/HR3CD7Vkzhy5Q+jMXBQWylKYJ1m2akII8HXJPk4YRl+RMsh+b76JlhaQUleuRGamawfkz3PncOwYTp/WtmJ2tjATBjAgC4BH0W8BkliYP//5qZqagus1B5o2NWG6mz6qq4X954OPdQcT+S//IpRg0SKkpyMlRWj15MkIDoavrxhAlqdIkBdqa/HgAW7fxuXL4sUGD43PbvOrBrge2imZK5D9+xBj9Eb2b1KTu+ieNEmw/4QGYxfZX+9E6yuAGdYhPhxF3k3+fm27+zEpQ2Os7ZI5xfPnggA6O9HaioYGPHqEigrcvSveNS7SYzc1ouuxOyEPYagPfc/wrBnN9aivRGUZysgRvei1u7bM/nXwN3fKrO0A6iNVehyeKV3R5vgZm/5GDSDxAW/gE4JOW+yeVeqRI0L6ucH585GWhqQkREUhNBT+/jAYMDAgauTJE1EgHHbjBoqLUV+vbXHevawsRGYr356ghCfLs/YoDSuk330jIwVHjx5E9QBqgE3AeruJ+i9YwMd+94ULwqZNQ3IypkwRBxYUBD8/cfIUgK4utLSI066sFErgAPnip9v41AwXozs1+YtBTCVi8o27GxL0rleTu3BB9o/h7RUXGG3UCMA+syjYA+w1h/iTUade8acOrNrdfGmEcNqu9p3kaOTQkFEAnj4VSWtrc2+RHkcbyH/s5tYoAP3oJym0orUBDe3OpSsf0zH3PWEKBoAyJwIAyyPY4zw8IQCHsf0wJph65mK6UQBS5Y7v4pOC09hf99xvVZWw48eRmoqEBERGIiTESAMUgGfPBA3U1aGiAh0dDp3YiSw7G6U0NflcK0GJp2Fa0vt9yf5p9Fn9TwEfZx+rq4V5ir3Kj9uzPP5sRBNi9yLW3IKa/Y1eYsoQayIHvTRIe4gFGCPs3TtWjj05C68uMmZbM7qfspeUjBRVV5lk/d4pPOpi6V6UkrxMPVyKC04BGkXre2O6O3vQaYn9nBcWIsvTPIZNcIE4lqXKI3GbAmDM43/h48W4sXRuwGsGTDFAZ7I4A143iH7P7edAlCj+b+rwTAfDFBheE90U/FD10jeBXaZVE+yuegpYaRo9B9gnnn8BdKuGFAErHGyNEpAp3UFhK+BXhB8q07olR0Zsk2pb+XYUyHKas1clUdY5Ne0YD3zfuPTPDIhUHQXt16M8CsUs8DoQp4o1TuqR8BNx911szaH9FXTdqugLocuxzAnp488s5ywE3sVs4DemOH8NzNCYuBekAlEf6V/hILAYSTq8ybqT7c9gaDQN+h4M40z9Guy2DruUSGOlc2+3DOEYcNX4+ktpiNMqIJ++bXkqbTz7c4hhKb5nGhQoHcLPgHg7W3aS/UTg3ywHvyelV9vh7QEqVHFV9GHP96XrqoyZB/zW4VFYXUrPTLqTCcJd7LeAfm9UPZ18S1sx5QJlplmtwJ9qm/UScMcbcd6RXDmCj4soxo9HaioSEhARgZAQ+PpiZAS9vWhrQ2MjKivR2QmPEBeHpCTExCAsDIGB0Onw/Dm6u9Haivp64Xhw0B13fpKpYPDxQWIiIiMRHCx2Qe/PnqG5GY8f2/ewgX826APOW3ScMA22xArpcsFm6AnrTl/JLE5AipPpZZx8HxoSWWhpwaNHMBic7FgHXRKSIhEZghAf+AxjuBe9T/G0AQ096HH3OOhhBmbEIz4CEcEI9oXvCEb60d+BjiY0PcIjPfTwFPHx8cnJyTExMWFhYf7+/uwZGBjo7Oxsamqqra197OhETPgS//OqEFQFzDX1TR1E8m9x0WLcm+bhCl6cgYkK6fNlRgsqjriahD9C0jgkqTqq0FOF/XhTDGP/GngFHUCB9NKE5ceROh34tOorFymlvS1Kwipgy2iDEJQnRq+19H4cD4/jQtPeL/mXYc92wN/0YRaQ9hj1p2wDetM2FcQ6zEzATFXHgCC0vWVvDshNFzS4RxIQS9QBe53P+rF3UmwEazsb2Vn4zTfwl9hzDdeuoaLCqytY4usWrWG8NCwUXIBnOTwC/MJqws9sXPy5oO0kL8VTCxzg4//YfnEsAJMmYelSzJuHtDRB1VFRCA01C4DM00zirVu4fBk1NRojIdHT64IFmDUL06YhNhYTJxoFgIwvU19dHcrLcfMmLl4UQmOLb4ufb1pwri/e8CVF/UC8JyQYsrMxZ45YgGFTtygA9E4B0OuFtjBmuuYu1MgX7GIhlWT/fOuljYxu0w/8b4t4DshDs7YBmepRfrjoh7Pi7QcivEWLRCKSk41xygLQ1YUnT1BVhTt3cOmSSLUl4hCXhax0pE/F1GhEUwDI1xQA8n4rWutQdx/3WeP81XIiEzExBznzMT8NaYqiyALQh752tJP6q1FdilLp3lyDO1iyZMnChQvnzJmTkpISGxs7ceJEWQD6+/s7Ojr0en11dfW9e/euXbt2iTt1AJFsntq3K7HILACvY6r1uDftnM2MGfi6hQD81M6kWouecRjHPLyivnzXKvGDSjHY6HulFzSgwyLSCxcwfTq+Ph1Ri0xdQmjuorQBJ05YB2xZfmuwZg/WzjBRjEDzNfyM7H9BinmgFF2l+NZCRMof02j/gFOOBMCmtlkYf6kWgNYy/KiUGm7Mt+Dqfud7/bKFBtTZvT9qBMBryEQmLwvZPxsVvInfILEm3sJqqZavXxe/XsVC4DokPm8xd/JuDuO/AfHifRBDdnb/s3RJ7lWQBn3JGxpQq+RbuwAsX47167FiBbKyEBxsZwA5a5FUqjdu4Px5nDyJo0ddRpKRgXXrjF7j4+2P4Y3NyUFfH65excKF+PBDXLliPcaUQDPn/sYPfn6Ulx9i61bDmjVYtkxIl8Q11qCklJRg/nwcPix0RsFS8UOCCVJ6TjveyVKnvT2y3hJZ/N+l0oCrvsImTAjr3bwbq1eTIEVSROg26OkRBXr2rEgsc2HCJsOmdVi3DMvmYV6gWnJUKENZMYpP4uRBHHyO505OZCmWbsTGVVjFSxKk2roCUiEX4ksNai7h0hmcKURhIxpdnnVqauqGDRtWrVq1ePHixMRE2wEJCQkZ3DtQX19/5cqVs2fPHj9+/OHDh7YjxWQKAM2sz/7JSKb+MSq7w2VQYVlOiWGm9mSpvBhMXZ2DGcYt03kifM1d70irW4xMdJkBF+iw7iDPyxoQHm7qWhOJUipvKRqNCdcp2mAwDklBylqspQaMM3vuwNvHzbKRSGYpZUksxBfkDgrFrFmIi0NDg73ALHcWi9iZmJmIKeauc3RWZnxfBwghCTAH5AD+mhOjs/DsIajiJH0T9WfPQJxKdebh8/PE7ZMFQLauLngDqZKKkkYQYe4cwhBN7hqqEw3bHc+wFoBQq+cYwZ4A7N6NXbuwZQsmTnTtYMECQbUpKYiOxr59grYcgILy4ovYvBlTp7r2GhiIVaswezamTBECVFTkKGjjq5+fzs8vDK+8Ylxj3DiHridNwsaN5Cexu7festCAMUuvErCvr87Xd0rvV76CHTtAoXKCoCCsXIm0NERGwscHxcWhCM1F7k7sJGVT75xMnYM5NLJYCELewlvDGLY7bAu2vIyXt2N7hLpaHYBsS0tDGhlhP/Y/wAMng3Nycnbt2rV169Y0xu8K8RLS09OTk5MPHDhQXFxsZ9CzZ6iqQm0tkpKUeLhBewJgBtmeZqfLSgB0FvRFt9QAc5uLkv0ZgIeQCY1S/VXga+Re1af3gdfI/PLyJHmSNgszL8/0ndeARUIB+M1vHHkn9Uvsryp4eqE1mkW6HOXUgHa0T4TxRvNYaPYFwBJkf5q5TXVhPPfvm3suAMttkji6ZAmf+R56CEKQwvt8STQKmg0vkbJolAFFA6gHWjLiGOMlAZhhU1S8gModJPsPW1xHseNO4Iejz51HsBGAT30Kn/0stm+36n6CJy1o6Uf/eIyfhEkWN4Rsu20bQkLEy5tvWu1PBin3858Xle3ra9Ffi9pmNPeilxUcjOApmBKNaOUrqe8LX4DBIG5fSYmjLYgM+voG+q7bw8gNOTma9j1tmoimvR2PHzsRLa9CxOnnF+E3W8QpVFMLoqLwmc8wwkC9fk/Nxs/is8ul26YF67GeZdeGtoM4aPcrve3BHusPvANtbRgYwPjxQiOTk9UfF2BBGMJYA2/gjTrU2V135cqVn/3sZ/Py8sLDw9X9XV1djY2N3d3dfA8JCYmLiwuiyJkwc+bM6Ojo4ODg8ePHnz9/3o5fsjA1wCQApGlqwBmccZIBhwJw6pSTWaxti/LmujQZFVZP59Cp3nmhts+Q2V8KqRvUuQ8k9jfjo48wfbqwBQtMXVlZRg24dUtnI1rLsGwt1mYgw9x/4waOHxeOLFGGMmrACqyQm7IAFBW53gMHWghAGT2VWQ8yyHsdrQboFG8XPZkegQg19Uci0vUcUszmzUYZoADISlBe7ln8qZL52+RDLQB8owaod2wwzZ0K1Jid6S0eYwZLAdiwAS+/bMX+l3CpBCUVqKAG9KHPBz5MNKuUKWbxmcetWoW+Pjx9ioICqzVYzS+9hE9/WlCKgou4eBmXy1Guh74HPRSAUIQmIGEu5r6AF+hfHubvjx07BEvfvw+JOuzDz2+XX24uTOzPY3yAB01oYsBkq3CEJyJxHubFIc48hxqwdi3u3MGxY2OcZJhq28/Xd7cv45TZv7kZt2+jtlYkbXBQaCMJl+STmYnYWPNU0ujGjS/ev59bk6uwPxnp7l3U1wtpJAIDhVKkpAi68FEd6SZsInvdwZ1qVKujYXq3Ydtu7LaIkaxx9apw3dIiBICOJk8WbESnTJTOeD1TkLILu5jbf8O/2e4zMzMzNzd3z549pHKls6am5uLFi6WlpY8fP3727JlOpwsNDU1MTMzIyMjJyeGLaaPhnDg4OMgxt5kZK8hETDaUQPanBvjBbxCDlmRrvHaxsTpSfXQ0XzcCf423V+LzQFycEAAmi8m3MwmsFmsBoOrQZOSLnxNWtO2C+okVW7D9c/Jl2SslBDUf4INzQgCsQfaWNSA01NQlCwBNxRwElZgXcA3WmLtYDZxPs4E03ywAU6Zg1izx29hoE7OKxsmhZH/eHZWjUjsCADXnwQMZ0Kn9uI94xCu8z99gBNuOGQBuiScveyarw+JbQACW824tF2wga4CsByMj2tZnkT2BROIz7G1siCdnMJ4dz1A6RqsKMYqHSgBEqf0rxhwqtiB/bNki6NYEsue7eLcQhRdwoQEN6mkTMZEJ443MRe4kTDL2btqER48EVasklDRC9qBjhf2ZgXfwjnQBzj2REqfGbMym2OzBHvK13BMTI47m0iUUFTnaxQY/vxf9Vq9m8VBReAMYMMudMfeil1eaEfJOLcGS7di+EivN85YuFax38qTQ5TGEcti7hQCwUIkTJ8R+SkoEqbW2CsL188OkSeLqL16MzZuxerU5zIyMLUtWr7mwBg+EUhw6hNOnRX3W1KCjQwyYMEFkafZsrFiBXbswdap5be56IRZaCUAOclZjtT/8zV179wrlPndOsL8aYWHCKRnwU58SUiSBIs3p13G9BCWWY8O2bt26c+dONfufO3fu8OHDp0+fvnXrllVeFi5cePPmTY7PMSl3SEjIiy++2NTUVFtb2yHvTUFdnchVZ6cISeRURw2gUentJpw8P8N4HR/09T0IrDCdu/xBEgBbyOzvo9wLLsdFubSM36EWwjRTv9Dar2I7C0/x0G/oZ/HT2tBmO7+hwagBublKTElGDThhoTsy+5OjzV0y+zdYXFVj8lBXhrJ61JMr5Z60NGEqAbADsj/N3NbrBfvzjtuFQdm9TiOd62w9uIlUpKqpn5fdbkpv3sRNCAN+0ofM32JuJjJpPmoCJOaytOeKq8fbpSgBa8AFvgXcpTbOCLyb2tdnnQxgWPCLkWHI/sPDdvROFoATSADSgQzg7w/g44Bq/6tWiTojDZlAmn4bb5/BGdtp7WhnBbeghWz+Cl4JQIDxw8qVuHpVLQALFgiajY83zy1AAd2egKqaVYVwD/c6DB1BCEpEoiIt8+cjPd2RADCHP/ddu/MKcBVX92HfYRymMkGV/SY00W7jdg96whHOQzZ+CwnBrFlITVUH7BD/n702gYoyTe/Ff4UgqyAgAgKyWSAIKO57gwuYRnvz9Myke5LMZCbL5D/JyTmTfzLn5CZxss656Zzk5t7kdrpnMhm704vYxr0VcAFBsVtFFFRkEaEKEJBdAVnq/t7v++qrr4qqogpReyb187H43ud93+fdnuf3025TN4NkfZksO1cPcb+HDuHjjwUJkPdVjIyIcqQx58jCPj5C94Bo4FeorWt3keiYRx98gE8+QUmJVeiBAWF376KuTmTY7/0eVAbORGYa0lgYagpSvOmkWebzZgsLcfiwnV0z+48fR0+PEPDvfld1U1R4jTYCkJubu3Pnzri4ONVz/vz5/fv3FxYWDg0NTY199erVhoYGEr3JZNosHZbg9Ly8vNu3b/8XBckG1CEaU0pCAhIUAdDZ2TipyywAzXfv1sXV9YTpwsSryQJQXm7ndU2KAFicZP8GSy65mB0qAhCwR2L/EISoTpn9SceOAlGFmZLUAKa9AlkAaGbCJi+T/XOQY5lGkqNCcLIDSPNrtALA3D971t7mzelNjbASALJ/rcNtC5hsItlXAp2jue6A6afy/gqssDvm+nWJ+quUDykFz/8vnGcGyAKQJSkBqcZqWiLTKlHIgKoB1IPWVsd7+UOgPi6uRv/dm2G845s3bfhECIBuQj4gv1ihtpg/PzojQ5+ZufCzjM7OTEkD/qeddXQu347Ll2kWAGbc+vWCFswgQR/GYbvsr6ISlfMwjyn1Kl5VXOnpQkIXLkRnp+xgHjPVVBhhLEOZI/aX0aZrK0XpOtO6XdglexiPLxIWJojIHn5vx1zcyrn1SalQrG50272FQQyewqllWGYRAIL1TsJyTQBmCss+fGgVFUIADh50OPzxYxw5Ig5MpgsIYMVfARYsX8CeEyfEPBv21+L2bRQXi9TOz1c8vvAlo8UhrhnNsicGMbYZz/ooK3N2gosXERMjXnbtWtmRjGRWyVzMfYInsicyMnLTpk1bt25VJ9XV1R0+fPjAgQOPHj1yFLi/v58DgoODo6Ojk5OTZedLL71EbaisrGxvb7caLdOxWQC4AWqA3bChoYLk481MTgF4fLduAzZIW08WfdT+wcGpExnQKqarAmC/NGX2J42qnnKUk/1LUOI83OnTonBo3KaAv7+iAR9+KA8g+2/HdssEnoXsz2mOIZF3rVpTfE8WZnQ0bO7YcocIJfsnIcni4gacC4Cz+zG5S2IOAulU3qdZ6ZMZ3d1WvD+1uO8yI3D3c3yulQGaP/wtg8LDRRXJMkABkJXg1i0H+9KnpOj1mwuwWxKAGvOv0ci+cZDzx+U7EF+qAHh5CcrNyJB/9bpM/Y3FZuKcKfVrx7sgA2YB4PHNdUX0oY80PW2aEmdxNhvZW7AlDGEWLUlKkgTgLFtk7YXMMHOS8T6a+E/Fdvthb+FWg65Be4CICCxY4EgA8OT8k5M4ScWysL+9W7iHe4zcjvZoRCsuagtDz6DEdW7IrAWjoygtdV6oAr29InNra3PXrGFrteR78ECw9LRTmfSUAVUAiEhERiBCFYAgBAUj2GpLDx86vFkVN26gvl4VACIc4Xz0DnTIzezs7NWrV3sxp804f/786dOnnbC/DGrAqVOnUlJSVAEQR169mgHtC4AZVDJqwDzMo7TbxCTD02SYTEKKHqkCoHazqq3hDW+KJc19AbCDrdhK9s9Fruph5pP9adPObW1VNGDvXrOLmSBrwPXrjEz21+qKwv6c5hgsjRrUkPh4eNlDAUhLcygA5FYrem1qEuzPLHxBCECAlvoXY/HUMcx8LfUzr51gCEMVqKAxi7RKkAxLHmLuXGzcKIw3L2uArAcWFldA2ktJmYvYlYJIubBGBiZuPpkYnJCHcd4EPxMTtdQvjFnZIIJwQwoOSfY0cEE2JAHQ6UQupKer3mpU86CP8Xja+ROYqEUts2o91iuuRYsQFSV97eN/r2phmvGwvTl76EJXD3q0JBsUhMBAh+MvouI8zpPfpxVDI4zkLIsAhIQgOPjprtkdXH2IL5vR3e18lNjs/fswGkXZm8Hkrq4WdOYcjN3WhqEhcWMySPdaxp/EJM0ywdcXfn7w9lZz+kd24/b1oWHQum+uD3zURkZGRlZWltq8c+dOZWUlf125ldra2osXL27atGnZsmWyJzMzk98nT560Gvf4MRobBRMlJcmOBCTQbuKmTUCtANTV4e7d+qHhOwMYUO7BgQDI7D8Hc5Q2qZ/LDQ9Pt307daaHnuxPUz3DGJbZvw99rtzJuXNCAGhkJgWSAITXtG4f374N2yxDmRZkf06Y9p5RSw3QCgDt7Fn7g9lpJQCkMwrAtDA54h1RzDpnGe8Q4QhXeZ8fC7HQZsDgoBXvV2sIxxWQN2incEoWAFUJtFWj0HRuriIAshL09kp93eHhC8jdsbHqjsORk2PKydExsBCAmxM1E3KSTkzkjusz8LqgfhMDzpunrsC3ZhCy3KNHovmGRKCZ7vG5neu8KcVxJCWSALCIqEj+/qq3DnW3cdtq4BcOF2tDGylV0x8qWFXggvrjyna1xyNDUVpMzBiKk9Tt5SXMAZ4Al4ZwyZWrGcQgld/SJvfRnhuuUQNceznmVn+/tstgEKLg0hkHRQ6pAsAT+sJX7e1Hfy96rSaQBtatQ0WF3PoLu6n2QBZ0+4iNjV2yZElYWJjqIaffuHHD9Yupqqq6efOmKgChoaHJyckMa+CxtSAp08wCkCgSN9FGAJjIWgG4e1fYoBCCOtKHcMndPj4YG9NOlAXA0ib7c61pYOeqAhEos7+WQWT2ty0rpyCryxpAUpD2F08N2F5j2Fa0LZRVJoMvzXE0F0D2p3FjsnKTsPjyUVHo6LCl7XmYR/ZXpUJ+UZcEYJYR87rE+zL1c1c23U1NFt6vqtK1tWk7Ta4uIh19BCNf4AtarClWlgFZCSiElpEiQcQrKAJAO3QF+Fu9fklKiv4eljAbrXaQmKhLTBwvKBjnxUtJOj7+w/EfZmDRoqmbG8e4Xl+v1zdcv15vd5umZ3C/kgBERyMmRnWNYawVrS1osRrouPhJqe/hkcbhK5mrMGk+dDM8Bam/EuhxZSh1hWZpOxWWWcYtif1bXRs8znwY1zpY6WR2l84oHdJyROmQapMv24hGvrLMAgJ5eejqIuni8mXx4f5bxMXFLV68WOtpampqmJ49Lairq7MZz5gOBYAblpCABJpNKJnedeYDyAIwoBUAUr88yJrRbAVAXsshHN6QzP4kUNVzARfI/mdwxq1oLS0oKqIAmN54A/KjZGzbtq3GsLlmM4zmaaR+DmqxrlYzbChjGMNkcWpANrJlDwUgLY0CYDuRm9fuX2H/gQHrUfk7gDlwA/l2P+2B+Vsi/v5KMtb8PtYGykxlvqgnT7S8L8xayrVX6pQ27b2hQcecM5zCKbK/KgP8DUe4Eo+VsnMntuZi3xWppL/fkrLoHb1eDz31Wv31h7+yvJdXYRZjiNnjL+Wds16uBz3Ms3rUi199va++AdeZdb8JPvp8zA76gEP88+9Te6RrDQ/HggWqqxvdXeiyHfi5w+ANeEzTOOZKNh0SEkyLFol1g4MRECBqUqebqQZUSvaVR7qULS8aZIGruFqO8lzkKq758/G7v4v0dFy7hlu3UF9P/jYZjdZv8QD4nmSYWlQRERGRkZFqs7e3t62tbcCWL5xhdHTUaDS2t7dHR0fLHgZkWNtxbW1obERPD8LCxLqISEQiK/MhHqpDZG6X0dws2L+3F/2SAPDscllOFQBveFvJSXe3YP/2dgf7dZinL+Elsn8OclQPC5vsT7NMNbka7cwZCoBuyRKQQDhtm7//9m3bUWOec+OGYP8zDnVlalyyP7lcKwC0czacRL/Uo5lWYyOWEvbx/59N1QDHZbxP+fv7zmRKYn/zyPXWPf9gNH7z+vXrVVU1Mu/fu4fpIG9lyOL4sWTTYQITsrhEIUoIQMhyImt5VuZPM/EdeYi3tL318Pt+m76NVorSeZhH6tfrNEoQo1/4uwvf/B2RrMR2/v828B9oRjMTQ6F+kyIAY/ox6DVX9YezoQF96m06EoB58wQLmzGAgX7Wixt4LJkKpwLAEsvONqWlISkJsbFkDoSEqAIAZ8njBH8C/PCp7+m54OYLXd1MPWdwJhnJYQhbjuVK15w5yKUi5Ap6ZVqSOFtaTK2tuH9fR4/RaK+ofqq250tQmxSAHnK0m3j48CFnqQJgE9MCUTUNWLtWblEAaKoAMIm0AkD2pxGTmKyTNGAFVoi2dpAEUn884r3gZbWKHdyXKtg+GJTsT1M9j/BIZn83a8qC06epASQV+Pvjn9leswQf4Nf5MTws2J/d7uAWblED+tA3X6KWuDjB9FFR6OiwjKFGpiKVprS5ENnfjgCst0vSAiZNmthO0Etmn/plVDja/X/8oLeqprfqet/16/2D1wdwHRrhd4ogzfcPJUb0c/HGQlI75i/vCF1RFLo8I2z5csSwZP5/qxEp0oGkxBnE4DXdtWu4Jp2Tj6ZfsnvJtwr02RHfN4++eaigvsHQ0FCikL4BBkuoQCnUEqZfnOKJc3GbjtHnrFMSAD8/YWaMYITmzgrDLglAWBh27tywefPpNWuQkYHAQEfhTDM55YyE4/njhW9T0oAhDH2KT00wvYJXcpBjNSCZ0pAsPpgFFIB790wUgLo6XU0Nrl8nSWuGfkf9CggICNQ86NDQ0ODgoLtbeyRBG5OwM85aAEjctCu4IjdlYlfnqQJAWAlAcLAYx5PydBLI/jSrVcxdLmIe5snszw/VKbP/HdyZ8YtRiyUN2Pjaax8Bb8nOXUDj6dMX2cFuN0EBIJ1vwia5SQGgaQVAZn+LFvLpyf5jY25v3W4lk+D+UzKX8A/AWsl8RetbyPg2uSMjH/nXRToqRlWbZg+PJM5/xwWNMiM0FGR71VasgJdXjbg8fGgeMgqRdVe0iqaNR35PKajfUYDs7Cjg+yjHe5vx28h8efe33zXUXzAM3LljVZWW+6E14PlAEgAvvrX5sYEJTNDcCTIqaQCnzJGatgIQyv9paXj9dbz8MjZtchSFi5rka5Av8c/5ZnOg03m7uo3nTq66GenVV0EDAKPJ+D7eN8BwG7c3YINCi1r4+UGvF0Z0dJjIAteuobISpaW6nh6bsd4S1OaoBHf3NTY2Nj4+rjZ9fHy0MS0gL5OdmaRzRL4lIpGmdsoCIIOkRvZvb1easgCMY9xbTnt5qF0B4DbkVdyBzP4MqnpKUUr2P4dz9jPHZdwsibyxJH/LkvzwDMWTX/Ow4fSNxpKbD9y9ZYDsTw1QBYClSQE4f94yQFKEpZoJnFHr/jrKKd+SuFdlyHqp+ZH07ULpvIO7a/FPa7FmjZD8+fPlORGI2ImdtGpUCw3QKUrQhz7LVJcK0zS1knkhpHuV+qOjbed0o/sKrtBuqwKQYudZObegQBggUrC0qLQ4Je23Fy7087uye7fOaITBgKGhKRogR/t8QHYPzODe3YH3LMUhI/QCC8xHCQD8qQrKjbLMvvlNfOMbSErSzqFu38O9B3jQi97HePwET4QAWC5xjpQq+Gs3tvEiyFU3Iw3Ai5eBIQwVorDKVLUWaykAy7CM5JWEJC942Q6OihKWm4uKCmRmmk6cwNWr2u2bJDhqurojCY6aFlBayM40iemDEZyAhEVY1IY2WAsA2Z9mmYdRWQN4UqhDP/+cnz7wsRIAUj9tbMzO6rlSVm61fcEc5JD9X8JLqqce9WR/2tO/VT7y84vyw5eEwywA4afD6eEt7Md+d6M1o5mMzuvipbEZFyf4PjISDyQx4VWkIpWmjH74ULA/r80OKmz+2lC/BQtlBdgkjaQEdGIq79pHB44eRWmpYH/VmIpmyCydb8qXBUA2PrGbVyK2EB5uIX1ZAKaiCU1XcVVmf9qAzM8/lswaYWEK+3t5ieAduo7i9cXFKa26b36T7SVLTAUFOgrAJ584ujVBfT/DM4ckAOPjwsxg/duhgGkQBARqmqM05V39/fHKK3jzTS37X8TFcpTfwA1mMBORAvAIjyYxaX0Ffy7/+Wv3dvILogEvaKfAduCMtt2gE2x3CqfSTGl66BORSB6MQUwc4vg9F3MtQ+fMwdat0OsFW/j5mSgG5hOMS9AMnOPt7e3uznwlqE2bmFaQCdrM9NwnNYCJRAqnj7Ung+xvQ1ykhju4owjAwoVidEwMjEYemREsaS/HdxmkS7I/TfVQXGX2H8Sg06nUk3POg2/ERgrAuqZ1+IHG+wOs+6N1LB9ulNXk7lXXoIYmCwBBAaDJAsDPVFOq5d3J/jT72Kf+aGGH/ZUxxeaPf1U1wKXq6e9HcTHKyhQBWLNG/CYmqv1RiNqFXbwlrQzQFIKeDhkZFuqnMbunohrVMunLAmCys2Urz+7dgv0XL1ZOWMwDVBb3p7SKlOPmgZwcEwXAYNCVl5vs3d8/HsLzgFSlIyPCzPCFrx/83AniJbG/v7k5BjwB2VzGli3YsUOwhhmHcOgzfFaCkk5NEthLnBnDowHOcQHYbLNwD3oqdGT0Ch+Tz2IspgDwNwlJKUjJRGYWsixDo6Px9tsiYUgYDQ3yCR5LUIcESHB3W0ES1CYDDg8P2x9qTdAUABp5kMVlFgX09Qn2b262mkf2pwZY2vIEo5HsTw1wFN85ghEss3+gqAIFpP6jOHoXd51OLbVDn9aIRCR5jSZn117g9y9cyNnyv4ED9OTr8rlRysADPHDrqsn+5PU85MnNtDQhAKXcjiRm1ADLUGcCwCJ2YbG3rGZM/XIVo6O4cEHY6tWKEtC4dTN00GUjm9aGNq0M1KPebryICIXxV6wQv5mZdsaQGWXel80qeSz4HaBAYjwvub1tm2D/jRuV7su4TAH4Al+gqEVJufnzIYmEwSBkQJOlvcDPgaPAZyRKPHsRkARgcBADFqmch3k0d4IESQKgguw/amnxRdatU1uXcIns/xE+so3hgAdNz/wGZgmUv78AfvSit+EG5KttlDjoQ9U7phtrNDWSU/g9B3PIBayojdhIDqIeKINCQrBrF27fVlmyv7+/j4xrRmhoaFhYmLsbCg8P50S1yYAMa39oZye4R/4uXMgW6ZsGM5/LuEv2nUK/j/CINUwjzUGdcO4c2d8iAO3t4lzd3S5uW2Z/PfSq5zzOUwBKBb87v/wyS8tB/uebBPuHIxzSkODu7rQzZ9JSzkRGsmUKN4Wzl4+1X7ffrfrpQhc1gMwob3vxYiEAvMuuTh1vRrkcguRE9m9pwVcKMhuXlQkBWLNG/K5cqe1fhEU0yptWBqpRPYQheUBWlkL9slEJ7F6RlvopKo439G9AKy9LkoHFTCiyP01GH/rI/kUoEo2ODhQViZR78022qALUAKMR776L8XE6bgHHJKt4bncpCUBPDx4+VF0LsCACEe4ECZQ0QMWoRQBYVnq9LHfK2+EKy8M2gIPs/57ET8nP7TKeBqsl+8WDr2TW0CnEMYGJWkEAtddwjQXwm/jNRCQqY9LTsWIFoqMFXbJauro6ScdmREVFLVq0aO7cuU+ePHFxHwEBAZwSoanFTgkOJ5CjaZIA+MGPG0uITEhJaWbpyyDNTxUA4dcKAJkvJWVuWFh8j0YAhPw1urjtXOSS/bdiqzY+2Z/meJLJRZ+su+uwTvUMnDlzpqQkPaXnrbcUD3u53QZTw0VchDugAPBlVd1KSxMaEN65lDcTgABlkHj8WrfC6pyf2oHU6RxKlZMD8AQ1KC0VAiAbxcDHR+33hvdqrKa1opUCUIbr7+B6Hg6t+GOF95ctsx+4CU1a6h/EoAu7OSkJgMHfv6CgYCPZPzBQ6SD70x7ggdKmblEAaNwBkJEhpII6e/jwWeCoxP5NeI6QBIA13GbRN5ZTHOJiEGOE0TLwaw5DLEHgSpiPKyAJwAHpk/UZFaV2DGPYAIOtljpImSxg/fNl/3Ehw+OWNpNp7lxXJ6+S7KuN9cp/LYQAVE4dugG4ZGndwi0veCUhySIAkNgzJkYWAKPR2Nraqg2QlJSk1+trXaaPJUuWcIrW09LSYmBlOIIsABs3yq0EJCSmJFIA5ObwsGB/JwJgaaekxNMq43VqIsqRXcBSLCX701TPAAZk9h/CkINJrhJdJCLJ/jSL6+ZNnDlTWVGRnqrorwyO4Y4pAxaWcQGkdjIoNz8Hc8RZeJilCCtL5V/NoFpBsl9lyGpNViX7q0owb552CNksDHFl4iav/wkFwAthe6XEn4JqVGup382t3KAA7N7dWrDekBpbAIkSb+AG2b/MVGbFclSE1FShAf7+bG3cNWAwHKNduUIBGH7O9ycJQEsLmpsxMgI/P9lLhUpDmpUAfArcth8iFKG/hhANUz/C3z5WPgMCLFIIjGGMZjVZ53Bn66eS1TMG9ekxHocgRGmH8DPEpZnU8tXAoue7Xfexj/8DTPjjSY3Prxj+lXZHn4aWfEgWZFRekT/8LfdjrjSSdUNDQ39/f4j5xpYtW7Z8+XLXBSArKyudrGZGX18fAzKswwly5T95Ios0lSkpJYE1JUNm/8lJO/P60EcBaEIT9Uy0zQKgdFM6XBMAJofM/gEIUJ0y+9ej3sEkk+uPRVrfhV3hCFfaExNkf2EQP2mszzT4SizGMRzJ69iP/a7Hf4RHsgYsF+mL+HghAKERqaldqcqI+nohAN3dmAWYrD51sxFSCyO5yihkQNUA6sHChdaDmCdrt9mbzay+iqsq7zM9ZraLDegpKPxge7cBBgMKCkZS48n+NO2pxUXcv4+iIiEAr7zCtUTO7D52xVAGA9Ax2zczHSQBYKHU1eH2bWRny17mxCqsKkPZEzyxjE2zH4JqkYAES+eFdnR22h0ZhKBgBHvBaxLm0nSQDauxeiOSUuxnyqynjwJSAy0a0Uo7OhqxsWqvycnaG5ZhTewz2tUsQvD54CDGB1Gg+ubdRBQlvBe9006nOo5gxCIA1rh169bNmzc3b94sN8n+69evv3z5ciNpejokJyevW7cuMzNT9TDUNOJBQpSZWpKNxJDElJTEpCQWuchYWQAcgVVHUwRAr6duJAQk8HgCrrE/IbP/EixRPWdxlsXMqnEwww3234RNFAAymcVVUiKsqQkSgVADeO6XX1Y6OZL7pgZUoML1Vcj+qgAQaWn6+UtTg7uClW7eP/vdgc7Fg9urep1bF2QXPT04dUrIANlfVYLFi53M6ESnTPqyALShbcaLx0FUlSisc+eEABgMxQW5xduLm9FsZzR1ISWlNCXk6NKjzJn6qHrspowBP8Fzhpfy98YNVFWp3gVYsBVbd2DHtPPTkLYBGzKQYXGxuNSaHxoSjGNZzIsFYzUYdp6dY1haecizt2Cua+cyzaD0HuBBO9ot7YgILFtGgpgmUn4+duwQev7UMD19iGnR3o7WVq2Dz0G5nXaeH/zCER6CEIuLL8v3NaOqquoKS0mD3Nzc/Px8Hx8f55G9vb3z8vJycnK0Toaq0iSkfWjIWpeiI40DNJhMLgmAfOG+Ol18Skp8SvzUmE6wHduZoluwRfXcwR1WMs3BDDfeNhKRZP98Sa8V8MlI+TQz5FazhlvkKZzr+kJk/1rUDmBAbi5dmrp06VKlj/pKAXCuwc5g0thM+meOx49RWop33lHsww/Fa08BxfJTfPr3+HvZjuLo07A/zOy/QG7U1999993id/cX/7wY3XaS4BHwSXHxe0XvvTf5Xj3qhWu1NH/XbN/GdPBW/t65g8pKrF+P9HTZsQu7qGJMjnKUO5qcjOQ38MYu7a5ZPNeuWQSgowNGo3YK1WIndnagg9pr52J0WId1LK038Wb0j6K1yeFF9fAqfaZ3cR/37+GelWvTJlRXC9LUMJ28KR3/+/oiLw9795577bU5M17VJMd6XjAYcPu2+I2NlR1U+lu4xRe5iZtO5uUidyVW8hEsLrJSu0UvjUZjeXn5qlWrtmxRaDEjI+O1114bGBgoLCwcHR21G5by8LWvfY3DOFh1Ms7Fixfb2qYrSKaZnGm8w29SghMB2l2Z/ckDjtCFLvJ1C1oWYzGJnwIAyneVdUzHSEMaU5SmevrRTwYh+z/G1FXdZjiZyim3FpfM9yMjqmNsTDhYrN/5juLheM6ifO3HftfXkjWAVcnvhITU4LRUhcNk9n/0yMU4uqc4r1pRuhnOtxvThMuXhWVlYe1aYaAtZ8914Ao+uIIrtKu4Oiur7ZbYe4XGUzw8XHzw4KSBFWfbx/Q6Chy7e/dc8V2ReLs0UeTxNbOyKZfgbfmkbGZmIjUVcwSbsdS/gW/MwZyFWEgNsOJrwB/+67E+D3mv4TXKgKXj7FlcuGBpkv0pLfyNiZEdHMywvvA9h3NknCEoxDoP81iFq0yrtmALw3JR4dVRuj+UrNnX10S+dQdmZnU5ocj+zPp2tEcjWnEtW4avf10QfXm50LaBASFEgYFYuNCUlITsbGzdil3iAUePj/ru/hnw78CXM0vj2cl7V/DFF7h4EV/7mtwKQADlltVXhKJKVPahz2Y4b2MzNpPvXsbLFu/9+4IgKCQanDt3Lj09PSkpKcb83Dt37tTpdGFhYWfPnq2psc3rZcuW5ebm7tmzJ486akZHR0dJScn58+enP8jDh+JRqBOLFjFHUsYTJAGALACaG7UjsHWoo1EAmGFlFIBPJS8ljQH7+pysOR/zZfZnCYgV3hBOUn8ljmWhMctq7PRPypXOWXs2YRN5nIxlcZHFSPbXrtnMra5GSQnS0rBxo+LhLAoAFawCFXANTHhqgCQA3O37YUvDKI+KANS4ykO6WUlhjQyUY/Zw44awsjJZA/5RsH/LFRxijsziIscls4NKyf6Hg0R0OO35QSMALJrPPxdM/YaU1EAwgr+D7+ihZ1Lyvh7gwTCGveEdjnDyeDayX8JLHGOJcOKEiGCTN6Qbsidp1IzVWB2DGP6yArvQ9QRP/OBHxk9CUhayuJy8rb9obPyz5E+Aj8n+9AQFCXvW+BJfXsTFvdhrcZHiFy/G5s1oacHQEHQ6IQALFiA+HhkZCA0VY5bj5L7PXsdnM2R/k12OemaorERxMRITsWaN7IhD3PfwvWVYVoWqJjTxUfjQrMRABPJd+CJrsIY5YBWEBH3pkk3gnp6e48ePR0VF/cZv/EYgb0nCjh074uPjV65cSQFobW0dGBgwmUzBwcGxsbEZGRkbN25MTU1VI4yMjBw5cuTEiRPd3d0unYV8TaMAMGe8Y4H/SzMLwJT71TyLLAA7sVO8sL+/VTSnyMaeAuxhrorGDWAff85kCfYvd1fNyf77rD2RiCT70yyuwUHB/mR6e2BPerqw+fMVD+dSAHgMVqsre+BzUwA60BGFKOC38CuSl3lOAaC5gM2zwv7Wb8WYO2YnnBlKTpT+PdCOj2Y39i80vK1apG+mkq8vCgpU31ZBgVuNMHajm7wwB3NCERqPeB/4WM0tKkJhIQ4ftl2BNMEKp65sNqcKEI3o1/E6PwYwMIYxX/iS3tVeUayNjX0ffzzwBx8HBzdKPhOZNjz8mV9HOcozkMHyprxZvAkJwhxBh2Ppx8bHDwEls1kJzxRHjyIsDHPnYvly2UENzkMezQDDQzxUBWABFkjUYA0q/fHjuHp1auCqqqoDBw74+Ph8/etfJ8vLTr2Evr6+tra2QTKakPOgRYsWhcryaQa7CgsLOf3KlSuuHqSxUVA2M9SM+/dFpff0TDOvHe0UAP4yFS3e6QWAvLTHQnpZ/H+L7A9hMtx4/bIpHpn9w6FJdHI8raNDo2OWhbq6FA3Yu1fxci4j8Bj7sd/FbZDpqQFWr0zqr6nB5OS0c0tml/01GqAq3juSzRJa2/nzY8k8kOBt6/j4Y0xMYGAAL7+MkBDVHSMoPMZ+jL4+nDolOIUCYBf/9V8IDBT5pClUGcFQOMIKZJbDh3sMhT09dRKHiPSKjsaiRc/jRo7gSAhCTDCtxMppBw/qBj/H55+Nffbq2GeS4xeB/YnOTvznf2J0FHv2YPt2bU8sYmkOJz56hJMncegQDh50NKS0tHRiYmJoaKigoCAlJUX1z5fgaFZdXd3JkycPHz5cVlbmxkEoALTHjxEQIDvI/nV1Lk2lANAsAsCcJ/tTQJyheIonHfgnyZ4Wm7CJ3L0Way0uHoYEf/ask1mlpUIA0tLErwxGoADwXipQ4cq6ZH/aDqFtZlAAaK5iBBidftSoO3fBkH5PfaEeuABvO74DB/DggairLVuwerXgbkcYGsKXX+LCBZGmTuq2vx/794vflhahAYsXOxxpMOjKy0W0Eyc6lre3tZkSEpSeefOQnIz4+Okq9KnRjvb92N+Hvu3Yvh7r4xBnd1gveq/j+iVcKkHJvbF7L4+NYZzu8emv9ysCoxHvv4/WVty6hQ0bsGIFvJ3ultR/7Rr4OiUlzimJKC8v7+rqunfvXk5Ozrp162JiYpwMbm1tvXz5MmWjqKjoLilvClqcL0bWpmUp0kJStxfDTiBZAJKQo7QfSloyDVpc25PbiEIU2X8zdlkF5lXTNGDuxyt/W7SjhAAEWYbtwmbpMI0d6Jh26Qd4QL7nYB8kS44uwf68UpfwQ2Df9KP+3f0bYeAfz9LleuAYDmq+tFQkweXLyM5Gaqrg3YgIwcFz52JyEoOD6OxEc7PgDpLCpUvo7Z1mHU758EPcuYMvvkBWluDy6GiEhMDHB+PjGBhAe7vIuRs3xKI04F7wz+vq9jdsNEfYD/+lyE4UAnBJcdW4dMRLLvosoAb8G/6tGtWrsCoFKbGIDUWoL3zZNYKRfvSzrprQVKur/RJfdqM7ZuxPx+r32SuEAvHzZLr1nG3pkpsPasZ9yZzj8WMcOiRecO1aZGZiyRLExWHBAuWhTSaMjoqn6eoSyk1ara4WT8OndwF1Eq5evbpq1aply5YlJSVFRUXNnz/fz89PXOPISF9fX3t7e1NTU21tLYdduuTwpNMQjBCAf0KW9E26uytSyZVALWi5jLrL6AYWyIFcYD0pxH9g1kH2v4f8fQjT+M6j/4womelOUl+PM2eQXoXtZg+j5AONyP85fu7K6jWo+RvUQhGAWhhrXN64CyT90exflwezBW+HPd3dOH4cp05Br0dsrMIL5GsKwNCQ6CUp1NUJ+nYdV64IS0wUFhmpBJyYEPLw4AHu3dM1NpqHJtbV7furSoACkCo5fp2yJHUo6V/jqgBM4Y+/c22zlaikRSAiGtHzMV8WgFGMUgA60dmus9DMuPFvxv7GbowvBfvvm9k2iQOYGe67uqgAhZx27BiSkhATg/BwBAVZBIBPw7c2GgU58qXcxEUJcXFxCQkJkZGRISEhvr7SNY6O9vf3d3R0NDc3GwwG50F+5ry78ZowGXclcznQz1AHkGE3S60Gyabbyzk8A2z6uWDstRoPVfaMZC6d5MwRpENYtNnDWI3SeSpcWL4StZWimnYDXkIAhM0aPvJIwFcY3tP0k99v3xY2i7h3T9gU6KwHif8XgQ1mAbDpQ5Gry1kPLHVzs13oojnf6xjvydHaM9wmYZBsRihyf8rwMGprhT0DtEp4FpEF+oE/lmwmOCmZGzgn2WyjQrK3Zjx/CPg7yWaKQeBPJfPgvxd0pqec77BnM7AP2C59m6TvvwR+DfgWsE0zbAT4F8nu2Q+zR5q60oWtXJNGHpO+/z/pe8EsXVK3FO1fZimaBx544MFXA9723fHxSElBVBQCA2EyYXAQ7e2or4fBYDNQpzGrph90kou/sg3p8N3xg3g7CKCtNQfwA/KBhp/gXTvb+Mmv7pFGu4ghM///6jO4qY/VHw888MCDXwpMEYC4OGzfjnXrkJ6OmBgEBQkB6O+H0Yjbt3H1KsrLhRKYMQn8lV0BWA3dHosADOrwlzrs+8EwDhfi20H4VhBC0s0xMr5A3j3Un8EZ2838ZB9//sg1DSD77zN/hwF/MKvX9M/KX48AeOCBB788sBaAlSvxxht4+WVkZ1v5o6KQmopt21BTI7pOn8aJE2rnn9kN7OuLDXOxRXyO4smPMMaPmB8A3d0oLERgIL79bSxeLI/NR34DGmj3cd86SorVH6e4Zt2kBiyYpTvqnrXb9sADDzz4CkEjAFlZePttvPWWoHtHyMhAejoSEsSYQ4fQ2+twZGQkIiLkz3700yxdzc04eBBBQfjWtxAeTkcAAvKQRwF4D++96AvxwAMPPPjvArMAkIhffRVvvmnD/iMY8YLXXMy1uLy8sGcPFixASAgOHIDBYCcqu9LSkJwst9rQ9gAPrAbU1Fg0wNeXjuVYTg2oR/05nNOMu2vz1w30SOaBBx544IEDmAUgJwd5eYiLUztKUFKN6i50UQAWYREJegu2WOZt2ICAAAQG4sgR3LhhG3XHDmzcCB8fuUVab0KT7ZjKSiEAtLfflh35yG9AA60VreZB+8TPO+4fq0eZ6oEHHnjggSNIAhAejnXrsHmz6v0AHxSisAIVPYJKQQHYgA11qHsFryzEQmXQ8uUIDUV0NEpKBJu3tQnnwoXYuhV792LbNnlUH/ooJDWosbM4J1JCqAGvvsoW1SAPeVSLn+Kn5hEf49iMjvXxi75XDzzwwIOvPCQBSEtDZqbqKkXpYRw+pqHeNrR9hs9a0NKJzr3Ym4pUpWPxYnzve2JuVRU6OjA5ichIrFwpNMCMMpRdwqUxjNlf/8gRIQCUgR072MpGdj7yG9DAPcj9xyRzF/8imQceeOCBB04gCUB8PBITVddVXC1H+dShX+LLHvQMYIAasAZrLB2bNwsbGxMC4OurnVKN6tM4fRZntU6jTdyDB4UG0OLWs7UReRQAmnHKQA888MADD2YRkgBERCAyUm53o7sZzZ3otDu6EY0/w8/60f8QD3dhl1Wfj4/N4Du4cxAHj+Ko1vlbU4OOjqKwEBNBAC0DCAHy8lDPhV705XjggQce/DLD+yEwGRhoehI02QGTCcOTA32TfTDRC6tf2lIxgdrwPt5vRzt1Yhu2pSDFbtwLuHAcxykABhhUp87RLnp68JNCIFDSgARgFZAPNIgwHnjggQcePBt47yO3984x7ZszOSkEYHJyfNw0rjC+jQDw41MxZwITR3CkAQ3VqF6FVdSAaETPwzwddAMYaEFLDWou4mIRivrQ5/JOWoC/lMwDDzzwwIPnAe//w59/dXn4p5bPWtTSkpBEi0JUEILoHMRgG9ru4E472l/00TzwwAMPPHAG76ec34Qm2os+hQceeODBDPD/yoMDAQAAAAAg/9dCsAOTliDCA8QK4AAAAABJRU5ErkJggg==",SX={atlas:{type:"msdf",distanceRange:2,size:59.65625,width:512,height:256,yOrigin:"bottom"},metrics:{emSize:1,lineHeight:1.171875,ascender:.927734375,descender:-.244140625,underlineY:-.09765625,underlineThickness:.048828125},glyphs:[{unicode:32,advance:.24755859375},{unicode:33,advance:.25732421875,planeBounds:{left:.056159633438645884,bottom:-.02437761405677056,right:.20702396031135412,top:.7299440203067705},atlasBounds:{left:488.5,bottom:145.5,right:497.5,top:190.5}},{unicode:34,advance:.31982421875,planeBounds:{left:.049409125974004715,bottom:.48691155587022,right:.2840869677759953,top:.77187750662978},atlasBounds:{left:486.5,bottom:213.5,right:500.5,top:230.5}},{unicode:35,advance:.61572265625,planeBounds:{left:.037219103997511785,bottom:-.02169206718177056,right:.6239137085024882,top:.7326295671817705},atlasBounds:{left:66.5,bottom:51.5,right:101.5,top:96.5}},{unicode:36,advance:.5615234375,planeBounds:{left:.02956531458715296,bottom:-.12381369908983761,right:.5324464041628472,top:.8484230740898377},atlasBounds:{left:109.5,bottom:197.5,right:139.5,top:255.5}},{unicode:37,advance:.732421875,planeBounds:{left:.026481776289942378,bottom:-.030073418674698794,right:.7137525987100576,top:.7410109186746989},atlasBounds:{left:88.5,bottom:144.5,right:129.5,top:190.5}},{unicode:38,advance:.62158203125,planeBounds:{left:.03225572125458355,bottom:-.030073418674698794,right:.6357130287454166,top:.7410109186746989},atlasBounds:{left:130.5,bottom:144.5,right:166.5,top:190.5}},{unicode:39,advance:.17431640625,planeBounds:{left:.028244602049502358,bottom:.49895501673814824,right:.14558352295049765,top:.7671582645118518},atlasBounds:{left:498.5,bottom:62.5,right:505.5,top:78.5}},{unicode:40,advance:.341796875,planeBounds:{left:.042983329377291775,bottom:-.250029542422407,right:.34471198312270823,top:.8227834486724072},atlasBounds:{left:.5,bottom:191.5,right:18.5,top:255.5}},{unicode:41,advance:.34765625,planeBounds:{left:-.003159248747708225,bottom:-.250029542422407,right:.29856940499770823,top:.8227834486724072},atlasBounds:{left:19.5,bottom:191.5,right:37.5,top:255.5}},{unicode:42,advance:.4306640625,planeBounds:{left:-.011208599684062338,bottom:.27785390031593765,right:.44138438093406235,top:.7304468809340623},atlasBounds:{left:449.5,bottom:23.5,right:476.5,top:50.5}},{unicode:43,advance:.56689453125,planeBounds:{left:.01353503347629649,bottom:.053493525733368255,right:.5499415290237036,top:.6066627242666317},atlasBounds:{left:361.5,bottom:17.5,right:393.5,top:50.5}},{unicode:44,advance:.1962890625,planeBounds:{left:-.009919475797210583,bottom:-.15981695975478,right:.1744702570472106,top:.12514899100478},atlasBounds:{left:498.5,bottom:79.5,right:509.5,top:96.5}},{unicode:45,advance:.27587890625,planeBounds:{left:-.00527594412977999,bottom:.24333249267450235,right:.27969000662978,top:.36067141357549765},atlasBounds:{left:52.5,bottom:7.5,right:69.5,top:14.5}},{unicode:46,advance:.26318359375,planeBounds:{left:.051032680313645884,bottom:-.027092319686354116,right:.20189700718635412,top:.12377200718635412},atlasBounds:{left:501.5,bottom:221.5,right:510.5,top:230.5}},{unicode:47,advance:.412109375,planeBounds:{left:-.013733006073205867,bottom:-.08573505127848349,right:.4053345685732059,top:.7356373950284835},atlasBounds:{left:252.5,bottom:206.5,right:277.5,top:255.5}},{unicode:48,advance:.5615234375,planeBounds:{left:.037458384830081196,bottom:-.030073418674698794,right:.5235767714199189,top:.7410109186746989},atlasBounds:{left:167.5,bottom:144.5,right:196.5,top:190.5}},{unicode:49,advance:.5615234375,planeBounds:{left:.06023674350936354,bottom:-.01998308280677056,right:.37872810024063647,top:.7343385515567705},atlasBounds:{left:488.5,bottom:97.5,right:507.5,top:142.5}},{unicode:50,advance:.5615234375,planeBounds:{left:.025334353719224725,bottom:-.01680925468177056,right:.5449781462807752,top:.7375123796817705},atlasBounds:{left:278.5,bottom:51.5,right:309.5,top:96.5}},{unicode:51,advance:.5615234375,planeBounds:{left:.028181041080081196,bottom:-.030073418674698794,right:.5142994276699189,top:.7410109186746989},atlasBounds:{left:197.5,bottom:144.5,right:226.5,top:190.5}},{unicode:52,advance:.5615234375,planeBounds:{left:.005886103858368255,bottom:-.02169206718177056,right:.5590553023916317,top:.7326295671817705},atlasBounds:{left:310.5,bottom:51.5,right:343.5,top:96.5}},{unicode:53,advance:.5615234375,planeBounds:{left:.055524791080081196,bottom:-.02657487968177056,right:.5416431776699189,top:.7277467546817705},atlasBounds:{left:344.5,bottom:51.5,right:373.5,top:96.5}},{unicode:54,advance:.5615234375,planeBounds:{left:.046003306705081196,bottom:-.034712090549698794,right:.5321216932949189,top:.7363722467996989},atlasBounds:{left:227.5,bottom:144.5,right:256.5,top:190.5}},{unicode:55,advance:.5615234375,planeBounds:{left:.018010134969224725,bottom:-.02169206718177056,right:.5376539275307752,top:.7326295671817705},atlasBounds:{left:374.5,bottom:51.5,right:405.5,top:96.5}},{unicode:56,advance:.5615234375,planeBounds:{left:.037702525455081196,bottom:-.030073418674698794,right:.5238209120449189,top:.7410109186746989},atlasBounds:{left:257.5,bottom:144.5,right:286.5,top:190.5}},{unicode:57,advance:.5615234375,planeBounds:{left:.029401744205081196,bottom:-.025434746799698794,right:.5155201307949189,top:.7456495905496989},atlasBounds:{left:287.5,bottom:144.5,right:316.5,top:190.5}},{unicode:58,advance:.2421875,planeBounds:{left:.046394008438645884,bottom:-.029431286627488215,right:.19725833531135412,top:.5572633178774882},atlasBounds:{left:439.5,bottom:61.5,right:448.5,top:96.5}},{unicode:59,advance:.21142578125,planeBounds:{left:.001066852327789419,bottom:-.16459733294591408,right:.1854565851722106,top:.556198895445914},atlasBounds:{left:406.5,bottom:53.5,right:417.5,top:96.5}},{unicode:60,advance:.50830078125,planeBounds:{left:.016948142433865897,bottom:.0726146348300812,right:.4527784200661341,top:.5587330214199189},atlasBounds:{left:394.5,bottom:21.5,right:420.5,top:50.5}},{unicode:61,advance:.548828125,planeBounds:{left:.051535540940937666,bottom:.17620354038436353,right:.5041285215590624,top:.49469489711563647},atlasBounds:{left:477.5,bottom:31.5,right:504.5,top:50.5}},{unicode:62,advance:.5224609375,planeBounds:{left:.047629290940937666,bottom:.0731029160800812,right:.5002222715590624,top:.5592213026699189},atlasBounds:{left:421.5,bottom:21.5,right:448.5,top:50.5}},{unicode:63,advance:.47216796875,planeBounds:{left:.016704001808865897,bottom:-.027876153049698794,right:.4525342794411341,top:.7432081842996989},atlasBounds:{left:317.5,bottom:144.5,right:343.5,top:190.5}},{unicode:64,advance:.89794921875,planeBounds:{left:.034064457306783605,bottom:-.23896750384690937,right:.8721996065996072,top:.7165065663469093},atlasBounds:{left:155.5,bottom:198.5,right:205.5,top:255.5}},{unicode:65,advance:.65234375,planeBounds:{left:-.008838044092129387,bottom:-.02169206718177056,right:.6616700753421295,top:.7326295671817705},atlasBounds:{left:237.5,bottom:51.5,right:277.5,top:96.5}},{unicode:66,advance:.62255859375,planeBounds:{left:.06464099434422473,bottom:-.02169206718177056,right:.5842847869057752,top:.7326295671817705},atlasBounds:{left:205.5,bottom:51.5,right:236.5,top:96.5}},{unicode:67,advance:.65087890625,planeBounds:{left:.038439807122511785,bottom:-.030073418674698794,right:.6251344116274882,top:.7410109186746989},atlasBounds:{left:344.5,bottom:144.5,right:379.5,top:190.5}},{unicode:68,advance:.65576171875,planeBounds:{left:.06301501010836826,bottom:-.02169206718177056,right:.6161842086416317,top:.7326295671817705},atlasBounds:{left:162.5,bottom:51.5,right:195.5,top:96.5}},{unicode:69,advance:.568359375,planeBounds:{left:.0652904160800812,bottom:-.02169206718177056,right:.5514088026699189,top:.7326295671817705},atlasBounds:{left:132.5,bottom:51.5,right:161.5,top:96.5}},{unicode:70,advance:.552734375,planeBounds:{left:.059675181705081196,bottom:-.02169206718177056,right:.5457935682949189,top:.7326295671817705},atlasBounds:{left:102.5,bottom:51.5,right:131.5,top:96.5}},{unicode:71,advance:.68115234375,planeBounds:{left:.040148791497511785,bottom:-.030073418674698794,right:.6268433960024882,top:.7410109186746989},atlasBounds:{left:380.5,bottom:144.5,right:415.5,top:190.5}},{unicode:72,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:30.5,bottom:51.5,right:65.5,top:96.5}},{unicode:73,advance:.27197265625,planeBounds:{left:.06917965680657412,bottom:-.02169206718177056,right:.20328128069342588,top:.7326295671817705},atlasBounds:{left:196.5,bottom:51.5,right:204.5,top:96.5}},{unicode:74,advance:.5517578125,planeBounds:{left:.007184947330081194,bottom:-.02657487968177056,right:.4933033339199188,top:.7277467546817705},atlasBounds:{left:.5,bottom:51.5,right:29.5,top:96.5}},{unicode:75,advance:.626953125,planeBounds:{left:.061633166497511785,bottom:-.02169206718177056,right:.6483277710024882,top:.7326295671817705},atlasBounds:{left:452.5,bottom:97.5,right:487.5,top:142.5}},{unicode:76,advance:.5380859375,planeBounds:{left:.06341786132300943,bottom:-.02169206718177056,right:.5327735449269906,top:.7326295671817705},atlasBounds:{left:423.5,bottom:97.5,right:451.5,top:142.5}},{unicode:77,advance:.873046875,planeBounds:{left:.05911847969322944,bottom:-.02169206718177056,right:.8134401140567705,top:.7326295671817705},atlasBounds:{left:377.5,bottom:97.5,right:422.5,top:142.5}},{unicode:78,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:341.5,bottom:97.5,right:376.5,top:142.5}},{unicode:79,advance:.6875,planeBounds:{left:.033395854136655315,bottom:-.030073418674698794,right:.6536158646133446,top:.7410109186746989},atlasBounds:{left:416.5,bottom:144.5,right:453.5,top:190.5}},{unicode:80,advance:.630859375,planeBounds:{left:.061550166358368255,bottom:-.02169206718177056,right:.6147193648916317,top:.7326295671817705},atlasBounds:{left:273.5,bottom:97.5,right:306.5,top:142.5}},{unicode:81,advance:.6875,planeBounds:{left:.030466166636655315,bottom:-.14391866037519643,right:.6506861771133446,top:.7445045978751964},atlasBounds:{left:214.5,bottom:202.5,right:251.5,top:255.5}},{unicode:82,advance:.61572265625,planeBounds:{left:.06350329135836826,bottom:-.02169206718177056,right:.6166724898916317,top:.7326295671817705},atlasBounds:{left:186.5,bottom:97.5,right:219.5,top:142.5}},{unicode:83,advance:.59326171875,planeBounds:{left:.020778681983368255,bottom:-.030073418674698794,right:.5739478805166317,top:.7410109186746989},atlasBounds:{left:454.5,bottom:144.5,right:487.5,top:190.5}},{unicode:84,advance:.5966796875,planeBounds:{left:.005480822747511787,bottom:-.02169206718177056,right:.5921754272524882,top:.7326295671817705},atlasBounds:{left:112.5,bottom:97.5,right:147.5,top:142.5}},{unicode:85,advance:.6484375,planeBounds:{left:.049098994483368255,bottom:-.02657487968177056,right:.6022681930166317,top:.7277467546817705},atlasBounds:{left:78.5,bottom:97.5,right:111.5,top:142.5}},{unicode:86,advance:.63623046875,planeBounds:{left:-.008269192599201152,bottom:-.02169206718177056,right:.6454762238492011,top:.7326295671817705},atlasBounds:{left:38.5,bottom:97.5,right:77.5,top:142.5}},{unicode:87,advance:.88720703125,planeBounds:{left:.011923628617731797,bottom:-.02169206718177056,right:.8835841838822683,top:.7326295671817705},atlasBounds:{left:220.5,bottom:97.5,right:272.5,top:142.5}},{unicode:88,advance:.626953125,planeBounds:{left:.004098979136655316,bottom:-.02169206718177056,right:.6243189896133446,top:.7326295671817705},atlasBounds:{left:.5,bottom:97.5,right:37.5,top:142.5}},{unicode:89,advance:.6005859375,planeBounds:{left:-.010793598988344685,bottom:-.02169206718177056,right:.6094264114883446,top:.7326295671817705},atlasBounds:{left:148.5,bottom:97.5,right:185.5,top:142.5}},{unicode:90,advance:.5986328125,planeBounds:{left:.024196650733368255,bottom:-.02169206718177056,right:.5773658492666317,top:.7326295671817705},atlasBounds:{left:307.5,bottom:97.5,right:340.5,top:142.5}},{unicode:91,advance:.26513671875,planeBounds:{left:.05437250871693295,bottom:-.17280296457569408,right:.27228764753306706,top:.8329592145756942},atlasBounds:{left:59.5,bottom:195.5,right:72.5,top:255.5}},{unicode:92,advance:.41015625,planeBounds:{left:.0014037126767941326,bottom:-.08573505127848349,right:.4204712873232059,top:.7356373950284835},atlasBounds:{left:278.5,bottom:206.5,right:303.5,top:255.5}},{unicode:93,advance:.26513671875,planeBounds:{left:-.020659233400995285,bottom:-.17280296457569408,right:.2140186084009953,top:.8329592145756942},atlasBounds:{left:94.5,bottom:195.5,right:108.5,top:255.5}},{unicode:94,advance:.41796875,planeBounds:{left:.006855376669722368,bottom:.33229482979472236,right:.40916024833027764,top:.7345997014552776},atlasBounds:{left:486.5,bottom:231.5,right:510.5,top:255.5}},{unicode:95,advance:.451171875,planeBounds:{left:-.017473255794918804,bottom:-.09553469482549765,right:.4686451307949188,top:.021804226075497646},atlasBounds:{left:70.5,bottom:7.5,right:99.5,top:14.5}},{unicode:96,advance:.30908203125,planeBounds:{left:.00391839948107648,bottom:.5860277898277895,right:.2553589442689235,top:.7704175226722105},atlasBounds:{left:36.5,bottom:3.5,right:51.5,top:14.5}},{unicode:97,advance:.5439453125,planeBounds:{left:.028181041080081196,bottom:-.029187146002488215,right:.5142994276699189,top:.5575074585024882},atlasBounds:{left:30.5,bottom:15.5,right:59.5,top:50.5}},{unicode:98,advance:.56103515625,planeBounds:{left:.048932994205081196,bottom:-.032187684160555265,right:.5350513807949189,top:.7724220591605554},atlasBounds:{left:304.5,bottom:207.5,right:333.5,top:255.5}},{unicode:99,advance:.5234375,planeBounds:{left:.024518931705081196,bottom:-.029187146002488215,right:.5106373182949189,top:.5575074585024882},atlasBounds:{left:.5,bottom:15.5,right:29.5,top:50.5}},{unicode:100,advance:.56396484375,planeBounds:{left:.026227916080081196,bottom:-.032187684160555265,right:.5123463026699189,top:.7724220591605554},atlasBounds:{left:334.5,bottom:207.5,right:363.5,top:255.5}},{unicode:101,advance:.52978515625,planeBounds:{left:.026472056705081196,bottom:-.029187146002488215,right:.5125904432949189,top:.5575074585024882},atlasBounds:{left:468.5,bottom:61.5,right:497.5,top:96.5}},{unicode:102,advance:.34716796875,planeBounds:{left:.004575110905578838,bottom:-.022177918535555265,right:.3733545765944212,top:.7824318247855554},atlasBounds:{left:364.5,bottom:207.5,right:386.5,top:255.5}},{unicode:103,advance:.56103515625,planeBounds:{left:.026960337955081196,bottom:-.22888445766762702,right:.5130787245449189,top:.558962582667627},atlasBounds:{left:28.5,bottom:143.5,right:57.5,top:190.5}},{unicode:104,advance:.55078125,planeBounds:{left:.049826556565937666,bottom:-.01892352016762703,right:.5024195371840624,top:.768923520167627},atlasBounds:{left:.5,bottom:143.5,right:27.5,top:190.5}},{unicode:105,advance:.24267578125,planeBounds:{left:.046882289688645884,bottom:-.01680925468177056,right:.19774661656135412,top:.7375123796817705},atlasBounds:{left:498.5,bottom:145.5,right:507.5,top:190.5}},{unicode:106,advance:.23876953125,planeBounds:{left:-.048979545900995285,bottom:-.2324562772148376,right:.1856982959009953,top:.7397804959648377},atlasBounds:{left:140.5,bottom:197.5,right:154.5,top:255.5}},{unicode:107,advance:.5068359375,planeBounds:{left:.044294322330081196,bottom:-.01892352016762703,right:.5304127089199189,top:.768923520167627},atlasBounds:{left:58.5,bottom:143.5,right:87.5,top:190.5}},{unicode:108,advance:.24267578125,planeBounds:{left:.05428707868157412,bottom:-.01892352016762703,right:.18838870256842588,top:.768923520167627},atlasBounds:{left:477.5,bottom:208.5,right:485.5,top:255.5}},{unicode:109,advance:.87646484375,planeBounds:{left:.04430890170737297,bottom:-.024304333502488215,right:.832155942042627,top:.5623902710024882},atlasBounds:{left:116.5,bottom:15.5,right:163.5,top:50.5}},{unicode:110,advance:.5517578125,planeBounds:{left:.049826556565937666,bottom:-.024304333502488215,right:.5024195371840624,top:.5623902710024882},atlasBounds:{left:60.5,bottom:15.5,right:87.5,top:50.5}},{unicode:111,advance:.5703125,planeBounds:{left:.025090213094224725,bottom:-.029187146002488215,right:.5447340056557752,top:.5575074585024882},atlasBounds:{left:193.5,bottom:15.5,right:224.5,top:50.5}},{unicode:112,advance:.56103515625,planeBounds:{left:.048444712955081196,bottom:-.22644305141762702,right:.5345630995449189,top:.561403988917627},atlasBounds:{left:447.5,bottom:208.5,right:476.5,top:255.5}},{unicode:113,advance:.568359375,planeBounds:{left:.025983775455081196,bottom:-.22644305141762702,right:.5121021620449189,top:.561403988917627},atlasBounds:{left:417.5,bottom:208.5,right:446.5,top:255.5}},{unicode:114,advance:.33837890625,planeBounds:{left:.045180595002291775,bottom:-.024304333502488215,right:.34690924874770823,top:.5623902710024882},atlasBounds:{left:449.5,bottom:61.5,right:467.5,top:96.5}},{unicode:115,advance:.515625,planeBounds:{left:.021669814448009427,bottom:-.029187146002488215,right:.4910254980519906,top:.5575074585024882},atlasBounds:{left:164.5,bottom:15.5,right:192.5,top:50.5}},{unicode:116,advance:.32666015625,planeBounds:{left:-.019433670483564695,bottom:-.02877457520298586,right:.3158203892335647,top:.675258950202986},atlasBounds:{left:418.5,bottom:54.5,right:438.5,top:96.5}},{unicode:117,advance:.55126953125,planeBounds:{left:.048117572190937666,bottom:-.034069958502488215,right:.5007105528090624,top:.5526246460024882},atlasBounds:{left:88.5,bottom:15.5,right:115.5,top:50.5}},{unicode:118,advance:.484375,planeBounds:{left:-.002092396419918806,bottom:-.02080579450955998,right:.4840259901699188,top:.5491261070095601},atlasBounds:{left:331.5,bottom:16.5,right:360.5,top:50.5}},{unicode:119,advance:.75146484375,planeBounds:{left:-.002649098431770561,bottom:-.02080579450955998,right:.7516725359317705,top:.5491261070095601},atlasBounds:{left:225.5,bottom:16.5,right:270.5,top:50.5}},{unicode:120,advance:.49560546875,planeBounds:{left:-.0046143729128470395,bottom:-.02080579450955998,right:.4982667166628471,top:.5491261070095601},atlasBounds:{left:300.5,bottom:16.5,right:330.5,top:50.5}},{unicode:121,advance:.47314453125,planeBounds:{left:-.007219349544918806,bottom:-.23645281704262702,right:.4788990370449188,top:.551394223292627},atlasBounds:{left:387.5,bottom:208.5,right:416.5,top:255.5}},{unicode:122,advance:.49560546875,planeBounds:{left:.018007705073009427,bottom:-.02080579450955998,right:.4873633886769906,top:.5491261070095601},atlasBounds:{left:271.5,bottom:16.5,right:299.5,top:50.5}},{unicode:123,advance:.33837890625,planeBounds:{left:.011572188891435306,bottom:-.20234398020069408,right:.3468262486085647,top:.8034181989506942},atlasBounds:{left:73.5,bottom:195.5,right:93.5,top:255.5}},{unicode:124,advance:.24365234375,planeBounds:{left:.06315671142450235,bottom:-.15466084787519643,right:.18049563232549765,top:.7337624103751964},atlasBounds:{left:206.5,bottom:202.5,right:213.5,top:255.5}},{unicode:125,advance:.33837890625,planeBounds:{left:-.010156326733564695,bottom:-.20234398020069408,right:.3250977329835647,top:.8034181989506942},atlasBounds:{left:38.5,bottom:195.5,right:58.5,top:255.5}},{unicode:126,advance:.68017578125,planeBounds:{left:.046984728997511785,bottom:.1766063915990047,right:.6336793335024882,top:.4112842334009953},atlasBounds:{left:.5,bottom:.5,right:35.5,top:14.5}}],kerning:[]},Ooe=class{constructor(n,e,t,i,r){Ve(this,"text"),Ve(this,"style"),Ve(this,"points"),Ve(this,"anchor"),Ve(this,"onClick"),this.text=n,this.style=e,this.points=t,this.anchor=i||0,this.onClick=r}},N3={name:"untitled connectome",nodeColormap:"warm",nodeColormapNegative:"winter",nodeMinColor:0,nodeMaxColor:4,nodeScale:3,edgeColormap:"warm",edgeColormapNegative:"winter",edgeMin:2,edgeMax:6,edgeScale:1,legendLineThickness:0},O3=class Uoe extends yg{constructor(e,t){super(new Float32Array([]),new Uint32Array([]),t.name,new Uint8Array([]),1,!0,e,t),Ve(this,"gl"),Ve(this,"nodesChanged"),this.gl=e,this.type="connectome",this.nodes&&this.updateLabels(),this.nodesChanged=new EventTarget}static convertLegacyConnectome(e){const t={nodes:[],edges:[],...N3};for(const r in e)if(r in N3){const s=r;t[s]=e[s]}const i=e.nodes;for(let r=0;r<i.names.length;r++)t.nodes.push({name:i.names[r],x:i.X[r],y:i.Y[r],z:i.Z[r],colorValue:i.Color[r],sizeValue:i.Size[r]});for(let r=0;r<i.names.length-1;r++)for(let s=r+1;s<i.names.length;s++){const a=e.edges[r*i.names.length+s];t.edges.push({first:r,second:s,colorValue:a})}return t}static convertFreeSurferConnectome(e,t="warm"){let i=!0;if("data_type"in e?e.data_type!=="fs_pointset"&&(i=!1):i=!1,"points"in e||(i=!1),!i)throw Error("not a valid FreeSurfer json pointset");const r=e.points.map(a=>({name:Array.isArray(a.comments)&&a.comments.length>0&&"text"in a.comments[0]?a.comments[0].text:"",x:a.coordinates.x,y:a.coordinates.y,z:a.coordinates.z,colorValue:1,sizeValue:1,metadata:a.comments}));return{...N3,nodeColormap:t,edgeColormap:t,nodes:r,edges:[]}}updateLabels(){const e=this.nodes;if(e&&e.length>0){const t=e.reduce((c,u)=>c.sizeValue>u.sizeValue?c:u).sizeValue;let i,r;if(typeof this.nodeMinColor<"u"&&isFinite(this.nodeMinColor))i=this.nodeMinColor;else{i=e[0].colorValue;for(let c=1;c<e.length;c++)e[c].colorValue<i&&(i=e[c].colorValue)}if(typeof this.nodeMaxColor<"u"&&isFinite(this.nodeMaxColor))r=this.nodeMaxColor;else{r=e[0].colorValue;for(let c=1;c<e.length;c++)e[c].colorValue>r&&(r=e[c].colorValue)}const s=Vr.colormap(this.nodeColormap,this.colormapInvert),a=Vr.colormap(this.nodeColormapNegative,this.colormapInvert),o="nodeColormapNegative"in this,l=this.legendLineThickness?this.legendLineThickness:0;for(let c=0;c<e.length;c++){let u=e[c].colorValue,d=!1;if(o&&u<0&&(d=!0,u=-u),i<r){if(u<i){ht.warn("color value lower than min");continue}u=(u-i)/(r-i)}else u=1;u=Math.round(Math.max(Math.min(255,u*255)))*4;let f=[s[u],s[u+1],s[u+2],255];d&&(f=[a[u],a[u+1],a[u+2],255]),f=f.map(h=>h/255),ht.debug("adding label for ",e[c]),e[c].label=new Ooe(e[c].name,{textColor:f,bulletScale:e[c].sizeValue/t,bulletColor:f,lineWidth:l,lineColor:f,textScale:1,textAlignment:"left",lineTerminator:"none"},[e[c].x,e[c].y,e[c].z]),ht.debug("label for node:",e[c].label)}}}addConnectomeNode(e){if(ht.debug("adding node",e),!this.nodes)throw new Error("nodes not defined");this.nodes.push(e),this.updateLabels(),this.nodesChanged.dispatchEvent(new CustomEvent("nodeAdded",{detail:{node:e}}))}deleteConnectomeNode(e){const t=this.nodes.indexOf(e),i=this.edges;i&&(this.edges=i.filter(r=>r.first!==t&&r.second!==t)),this.nodes=this.nodes.filter(r=>r!==e),this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeDeleted",{detail:{node:e}}))}updateConnectomeNodeByIndex(e,t){this.nodes[e]=t,this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeChanged",{detail:{node:t}}))}updateConnectomeNodeByPoint(e,t){const i=this.nodes;if(!i)throw new Error("Node to update does not exist");const r=i.find(a=>Bn.arraysAreEqual([a.x,a.y,a.z],e));if(!r)throw new Error(`Node with point ${e} to update does not exist`);const s=i.findIndex(a=>a===r);this.updateConnectomeNodeByIndex(s,t)}addConnectomeEdge(e,t,i){const r=this.edges;let s=r.find(a=>(a.first===e||a.second===e)&&a.first+a.second===e+t);return s||(s={first:e,second:t,colorValue:i},r.push(s),this.updateConnectome(this.gl),s)}deleteConnectomeEdge(e,t){const i=this.edges,r=i.find(s=>(s.first===e||s.first===t)&&s.first+s.second===e+t);if(r)this.edges=i.filter(s=>s!==r);else throw new Error(`edge between ${e} and ${t} not found`);return this.updateConnectome(this.gl),r}findClosestConnectomeNode(e,t){const i=this.nodes;if(!i||i.length===0)return null;const r=i.map((s,a)=>({node:s,distance:Math.sqrt(Math.pow(s.x-e[0],2)+Math.pow(s.y-e[1],2)+Math.pow(s.z-e[2],2)),index:a})).filter(s=>s.distance<t).sort((s,a)=>s.distance-a.distance);return r.length>0?r[0].node:null}updateConnectome(e){const t=[],i=[],r=[];let s=Vr.colormap(this.nodeColormap,this.colormapInvert),a=Vr.colormap(this.nodeColormapNegative,this.colormapInvert),o="nodeColormapNegative"in this;this.nodeMinColor===void 0&&(this.nodeMinColor=NaN),this.nodeMaxColor===void 0&&(this.nodeMaxColor=NaN),this.edgeMin===void 0&&(this.edgeMin=NaN),this.edgeMax===void 0&&(this.edgeMax=NaN);let l=this.nodeMinColor,c=this.nodeMaxColor;if(!isFinite(l)||!isFinite(l)){const g=this.nodes;l=g[0].colorValue,c=g[0].colorValue;for(let y=0;y<g.length;y++)l=Math.min(l,g[y].colorValue),c=Math.max(c,g[y].colorValue)}const u=this.nodes,d=u.length;for(let g=0;g<d;g++){const y=u[g].sizeValue*this.nodeScale;if(y<=0)continue;let x=u[g].colorValue,b=!1;if(o&&x<0&&(b=!0,x=-x),l<c){if(x<l)continue;x=(x-l)/(c-l)}else x=1;x=Math.round(Math.max(Math.min(255,x*255)))*4;let A=[s[x],s[x+1],s[x+2],255];b&&(A=[a[x],a[x+1],a[x+2],255]);const S=bn(u[g].x,u[g].y,u[g].z);Mm.makeColoredSphere(i,t,r,y,S,A)}s=Vr.colormap(this.edgeColormap,this.colormapInvert),a=Vr.colormap(this.edgeColormapNegative,this.colormapInvert),o="edgeColormapNegative"in this;const f=this.edges;if(f!==void 0&&f.length>0){if(l=this.edgeMin,c=this.edgeMax,!isFinite(l)||!isFinite(l)){l=f[0].colorValue,c=f[0].colorValue;for(let g=0;g<f.length;g++)l=Math.min(l,f[g].colorValue),c=Math.max(c,f[g].colorValue)}for(const g of f){let y=g.colorValue;const x=o&&y<0;x&&(y=-y);const b=y*this.edgeScale;if(b<=0)continue;if(l<c){if(y<l)continue;y=(y-l)/(c-l)}else y=1;y=Math.round(Math.max(Math.min(255,y*255)))*4;let A=[s[y],s[y+1],s[y+2],255];x&&(A=[a[y],a[y+1],a[y+2],255]);const S=bn(u[g.first].x,u[g.first].y,u[g.first].z),C=bn(u[g.second].x,u[g.second].y,u[g.second].z);Mm.makeColoredCylinder(i,t,r,S,C,b,A)}}const h=new Float32Array(i),p=new Uint32Array(t),m=E0.getExtents(h);this.furthestVertexFromOrigin=m.mxDx,this.extentsMin=m.extentsMin,this.extentsMax=m.extentsMax;const v=this.generatePosNormClr(h,p,new Uint8Array(r));e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,Uint32Array.from(p),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,Float32Array.from(v),e.STATIC_DRAW),this.indexCount=t.length}updateMesh(e){this.updateConnectome(e),this.updateLabels()}json(){const e={};for(const t in this)(t in N3||t==="nodes"||t==="edges")&&(e[t]=this[t]);return e}static async loadConnectomeFromUrl(e,t){const r=await(await fetch(t)).json();return new Uoe(e,r)}};function hft(n){const e=n.hdr.dims,t=n.permRAS,i=e[1]*e[2]*e[3],r=new Int16Array(i),s=[0,0,0];for(let h=0;h<3;h++)for(let p=0;p<3;p++)Math.abs(t[h])-1===p&&(s[p]=h*Math.sign(t[h]));let a=1;const o=[1,1,1],l=[!1,!1,!1];for(let h=0;h<s.length;h++)for(let p=0;p<s.length;p++)Math.abs(s[p])===h&&(o[p]=a,(s[p]<0||Object.is(s[p],-0))&&(l[p]=!0),a*=e[p+1]);let c=Bn.range(0,e[1]-1,1);l[0]&&(c=Bn.range(e[1]-1,0,-1));for(let h=0;h<e[1];h++)c[h]*=o[0];let u=Bn.range(0,e[2]-1,1);l[1]&&(u=Bn.range(e[2]-1,0,-1));for(let h=0;h<e[2];h++)u[h]*=o[1];let d=Bn.range(0,e[3]-1,1);l[2]&&(d=Bn.range(e[3]-1,0,-1));for(let h=0;h<e[3];h++)d[h]*=o[2];let f=0;for(let h=0;h<e[3];h++)for(let p=0;p<e[2];p++)for(let m=0;m<e[1];m++)r[c[m]+u[p]+d[h]]=n.img[f],f++;return r}function _X(n,e){const t=Math.floor(Math.log(n)/Math.log(10)),i=n/Math.pow(10,t);let r;return e?i<1.5?r=1:i<3?r=2:i<7?r=5:r=10:i<=1?r=1:i<=2?r=2:i<=5?r=5:r=10,r*Math.pow(10,t)}function F2(n,e,t=4){const i=_X(e-n,!1),r=_X(i/(t-1),!0),s=Math.floor(n/r)*r,a=Math.ceil(e/r)*r;return[r,s,a,s===n&&a===e]}function CX(n,e){let t=F2(n,e,3);return t[3]||(t=F2(n,e,5)),t[3]||(t=F2(n,e,4)),t[3]||(t=F2(n,e,3)),t[3]||(t=F2(n,e,5)),[t[0],t[1],t[2]]}function hh(n){return n*(Math.PI/180)}function iD(n,e,t,i){let r=-n,s=-e;return isFinite(t)&&isFinite(i)&&(r=t,s=i),r>s&&([r,s]=[s,r]),[r,s]}function Va(n,e=[0,1,2]){const t=Zr();return t[0]=n[e[0]],t[1]=n[e[1]],t[2]=n[e[2]],t}function MX(n){const e=Jr(1,0,0,0),t=uf();return Sa(t,e,n),t[0]}function pft(n,e,t,i){const r=Jr(n,e,t,1),s=_s(i);zo(s,s),r[0]=r[0]*2-1,r[1]=r[1]*2-1,r[2]=r[2]*2-1;const a=uf();return Sa(a,r,s),a[3]===0||(a[0]/=a[3],a[1]/=a[3],a[2]/=a[3]),a}function mft(n){const e=[5960464477539063e-23,152587890625e-16,.00390625,1];return(n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3])/255}function rD(n,e,t){return Math.min(Math.max(n,e),t)}function vft(n){const e=n.length;let t=0;const i=new Uint8Array(e+Math.ceil(.01*e)),r=new Int8Array(i.buffer);let s=0;for(;t<e;){let a=n[t];t++;let o=1;for(;o<129&&t<e&&n[t]===a;)t++,o++;if(o>1){r[s]=-o+1,s++,i[s]=a,s++;continue}for(;t<e&&!(o>127||t+2<e&&a!==n[t]&&n[t+2]===n[t]&&n[t+1]===n[t]);)a=n[t],t++,o++;i[s]=o-1,s++;for(let l=0;l<o;l++)i[s]=n[t-o+l],s++}return ht.info("PackBits "+e+" -> "+s+" bytes (x"+e/s+")"),i.slice(0,s)}function TX(n,e){const t=new Uint8Array(n.buffer),i=new Int8Array(t.buffer);let r=0;const s=new Uint8Array(e);let a=0;for(;r<t.length;){const o=i[r];if(r++,o<0){const l=i[r];r++;for(let c=0;c<1-o;c++)s[a]=l,a++}else for(let l=0;l<o+1;l++)s[a]=i[r],r++,a++}return s}function EX(n,e){return n.scl_slope===0&&(n.scl_slope=1),e*n.scl_slope+n.scl_inter}var ph=["ASC","BYU","DFS","FSM","PIAL","ORIG","INFLATED","SMOOTHWM","SPHERE","WHITE","G","GEO","GII","ICO","MZ3","NV","OBJ","OFF","PLY","SRF","STL","TCK","TRACT","TRI","TRK","TT","TRX","VTK","WRL","X3D","JCON","JSON"],IX=0,gft=1,yft=2,B2=33984,U3=33985,sD=33986,bft=33987,xft=33988,DX=33989,RX=33990,ng=33991,PX=33992,Aft=33993,LX=33994,wft=33995,Sft=33996,_ft=33997,Cft=33998,Mft=33999,kX={filename:"",isSaveDrawing:!1,volumeByIndex:0},FX=class{constructor(n=xh){Ve(this,"loaders",{}),Ve(this,"dicomLoader",null),Ve(this,"canvas",null),Ve(this,"_gl",null),Ve(this,"isBusy",!1),Ve(this,"needsRefresh",!1),Ve(this,"colormapTexture",null),Ve(this,"colormapLists",[]),Ve(this,"volumeTexture",null),Ve(this,"gradientTexture",null),Ve(this,"gradientTextureAmount",0),Ve(this,"drawTexture",null),Ve(this,"drawUndoBitmaps",[]),Ve(this,"drawLut",Vr.makeDrawLut("$itksnap")),Ve(this,"drawOpacity",.8),Ve(this,"clickToSegmentIsGrowing",!1),Ve(this,"clickToSegmentGrowingBitmap",null),Ve(this,"clickToSegmentXY",[0,0]),Ve(this,"renderDrawAmbientOcclusion",.4),Ve(this,"colorbarHeight",0),Ve(this,"drawPenLocation",[NaN,NaN,NaN]),Ve(this,"drawPenAxCorSag",-1),Ve(this,"drawFillOverwrites",!0),Ve(this,"drawPenFillPts",[]),Ve(this,"overlayTexture",null),Ve(this,"overlayTextureID",null),Ve(this,"sliceMMShader"),Ve(this,"sliceV1Shader"),Ve(this,"orientCubeShader"),Ve(this,"orientCubeShaderVAO",null),Ve(this,"rectShader"),Ve(this,"rectOutlineShader"),Ve(this,"renderShader"),Ve(this,"lineShader"),Ve(this,"line3DShader"),Ve(this,"passThroughShader"),Ve(this,"renderGradientShader"),Ve(this,"renderSliceShader"),Ve(this,"renderVolumeShader"),Ve(this,"pickingMeshShader"),Ve(this,"pickingImageShader"),Ve(this,"colorbarShader"),Ve(this,"fontShader",null),Ve(this,"fiberShader"),Ve(this,"fontTexture",null),Ve(this,"circleShader"),Ve(this,"matCapTexture",null),Ve(this,"bmpShader",null),Ve(this,"bmpTexture",null),Ve(this,"thumbnailVisible",!1),Ve(this,"bmpTextureWH",1),Ve(this,"growCutShader"),Ve(this,"orientShaderAtlasU",null),Ve(this,"orientShaderAtlasI",null),Ve(this,"orientShaderU",null),Ve(this,"orientShaderI",null),Ve(this,"orientShaderF",null),Ve(this,"orientShaderRGBU",null),Ve(this,"surfaceShader",null),Ve(this,"blurShader",null),Ve(this,"sobelShader",null),Ve(this,"genericVAO",null),Ve(this,"unusedVAO",null),Ve(this,"crosshairs3D",null),Ve(this,"DEFAULT_FONT_GLYPH_SHEET",wX),Ve(this,"DEFAULT_FONT_METRICS",SX),Ve(this,"fontMetrics"),Ve(this,"fontMets",null),Ve(this,"backgroundMasksOverlays",0),Ve(this,"overlayOutlineWidth",0),Ve(this,"overlayAlphaShader",1),Ve(this,"position"),Ve(this,"extentsMin"),Ve(this,"extentsMax"),Ve(this,"resizeObserver",null),Ve(this,"syncOpts",{"3d":!1,"2d":!1,zoomPan:!1,cal_min:!1,cal_max:!1,clipPlane:!1,gamma:!1,sliceType:!1,crosshair:!1}),Ve(this,"readyForSync",!1),Ve(this,"uiData",{mousedown:!1,touchdown:!1,mouseButtonLeftDown:!1,mouseButtonCenterDown:!1,mouseButtonRightDown:!1,mouseDepthPicker:!1,clickedTile:-1,pan2DxyzmmAtMouseDown:[0,0,0,1],prevX:0,prevY:0,currX:0,currY:0,currentTouchTime:0,lastTouchTime:0,touchTimer:null,doubleTouch:!1,isDragging:!1,dragStart:[0,0],dragEnd:[0,0],dragClipPlaneStartDepthAziElev:[0,0,0],lastTwoTouchDistance:0,multiTouchGesture:!1,windowX:0,windowY:0}),Ve(this,"back",null),Ve(this,"overlays",[]),Ve(this,"deferredVolumes",[]),Ve(this,"deferredMeshes",[]),Ve(this,"furthestVertexFromOrigin",100),Ve(this,"volScale",[]),Ve(this,"vox",[]),Ve(this,"mousePos",[0,0]),Ve(this,"screenSlices",[]),Ve(this,"cuboidVertexBuffer"),Ve(this,"otherNV",null),Ve(this,"volumeObject3D",null),Ve(this,"pivot3D",[0,0,0]),Ve(this,"furthestFromPivot",10),Ve(this,"currentClipPlaneIndex",0),Ve(this,"lastCalled",new Date().getTime()),Ve(this,"selectedObjectId",-1),Ve(this,"CLIP_PLANE_ID",1),Ve(this,"VOLUME_ID",254),Ve(this,"DISTANCE_FROM_CAMERA",-.54),Ve(this,"graph",{LTWH:[0,0,640,480],opacity:0,vols:[0],autoSizeMultiplanar:!1,normalizeValues:!1,isRangeCalMinMax:!1}),Ve(this,"meshShaders",[{Name:"Phong",Frag:Iut},{Name:"Matte",Frag:Rut},{Name:"Harmonic",Frag:Lut},{Name:"Hemispheric",Frag:Put},{Name:"Crevice",Frag:Eut},{Name:"Edge",Frag:Cut},{Name:"Diffuse",Frag:Mut},{Name:"Outline",Frag:_ut},{Name:"Specular",Frag:Tut},{Name:"Toon",Frag:Sut},{Name:"Flat",Frag:yX},{Name:"Matcap",Frag:Dut}]),Ve(this,"dragModes",{contrast:1,measurement:2,none:0,pan:3,slicer3D:4,callbackOnly:5}),Ve(this,"sliceTypeAxial",0),Ve(this,"sliceTypeCoronal",1),Ve(this,"sliceTypeSagittal",2),Ve(this,"sliceTypeMultiplanar",3),Ve(this,"sliceTypeRender",4),Ve(this,"onDragRelease",()=>{}),Ve(this,"onMouseUp",()=>{}),Ve(this,"onLocationChange",()=>{}),Ve(this,"onIntensityChange",()=>{}),Ve(this,"onClickToSegment",()=>{}),Ve(this,"onImageLoaded",()=>{}),Ve(this,"onMeshLoaded",()=>{}),Ve(this,"onFrameChange",()=>{}),Ve(this,"onError",()=>{}),Ve(this,"onColormapChange",()=>{}),Ve(this,"onInfo",()=>{}),Ve(this,"onWarn",()=>{}),Ve(this,"onDebug",()=>{}),Ve(this,"onVolumeAddedFromUrl",()=>{}),Ve(this,"onVolumeWithUrlRemoved",()=>{}),Ve(this,"onVolumeUpdated",()=>{}),Ve(this,"onMeshAddedFromUrl",()=>{}),Ve(this,"onMeshAdded",()=>{}),Ve(this,"onMeshWithUrlRemoved",()=>{}),Ve(this,"onZoom3DChange",()=>{}),Ve(this,"onAzimuthElevationChange",()=>{}),Ve(this,"onClipPlaneChange",()=>{}),Ve(this,"onCustomMeshShaderAdded",()=>{}),Ve(this,"onMeshShaderChanged",()=>{}),Ve(this,"onMeshPropertyChanged",()=>{}),Ve(this,"onDicomLoaderFinishedWithImages",()=>{}),Ve(this,"onDocumentLoaded",()=>{}),Ve(this,"document",new nD),Ve(this,"mediaUrlMap",new Map),Ve(this,"initialized",!1),Ve(this,"currentDrawUndoBitmap");for(const e in n)typeof n[e]=="function"?this[e]=n[e]:this.opts[e]=xh[e]===void 0?xh[e]:n[e];this.opts.isHighResolutionCapable?this.uiData.dpr=window.devicePixelRatio||1:this.uiData.dpr=1,this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,this.opts.drawingEnabled&&this.createEmptyDrawing(),this.opts.thumbnail.length>0&&(this.thumbnailVisible=!0),ht.setLogLevel(this.opts.logLevel)}get scene(){return this.document.scene}get opts(){return this.document.opts}get sliceMosaicString(){return this.document.opts.sliceMosaicString||""}set sliceMosaicString(n){this.document.opts.sliceMosaicString=n}get isAlphaClipDark(){return this.document.opts.isAlphaClipDark}set isAlphaClipDark(n){this.document.opts.isAlphaClipDark=n}get volumes(){return this.document.volumes}set volumes(n){this.document.volumes=n}get meshes(){return this.document.meshes}set meshes(n){this.document.meshes=n}get drawBitmap(){return this.document.drawBitmap}set drawBitmap(n){this.document.drawBitmap=n}get volScaleMultiplier(){return this.scene.volScaleMultiplier}set volScaleMultiplier(n){this.setScale(n)}async saveScene(n="niivue.png"){function e(i,r){const s=document.createElement("a");document.body.appendChild(s),s.style.display="none";const a=window.URL.createObjectURL(i);s.href=a,s.download=r,s.click(),s.remove()}const t=this.canvas;if(!t)throw new Error("canvas not defined");this.drawScene(),t.toBlob(i=>{i&&(n===""&&(n=`niivue-screenshot-${new Date().toString()}.png`,n=n.replace(/\s/g,"_")),e(i,n))})}async attachTo(n,e=null){return await this.attachToCanvas(document.getElementById(n),e),ht.debug("attached to element with id: ",n),this}async attachToCanvas(n,e=null){return this.canvas=n,e===null&&(e=navigator.hardwareConcurrency>6,ht.debug("AntiAlias ",e," Threads ",navigator.hardwareConcurrency)),this.gl=this.canvas.getContext("webgl2",{alpha:!0,antialias:e}),ht.info("NIIVUE VERSION ",hX),this.canvas.parentElement.style.backgroundColor="black",this.opts.isResizeCanvas&&(this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,window.addEventListener("resize",()=>{requestAnimationFrame(()=>{this.resizeListener()})}),this.resizeObserver=new ResizeObserver(()=>{requestAnimationFrame(()=>{this.resizeListener()})}),this.resizeObserver.observe(this.canvas.parentElement)),this.opts.interactive&&this.registerInteractions(),await this.init(),this.drawScene(),this}syncWith(n,e={"2d":!0,"3d":!0}){n instanceof Array||(n=[n]),this.otherNV=n,this.syncOpts={...e}}broadcastTo(n,e={"2d":!0,"3d":!0}){n instanceof Array||(n=[n]),this.otherNV=n,this.syncOpts=e}doSync3d(n){n.scene.renderAzimuth=this.scene.renderAzimuth,n.scene.renderElevation=this.scene.renderElevation,n.scene.volScaleMultiplier=this.scene.volScaleMultiplier}doSync2d(n){const e=this.frac2mm(this.scene.crosshairPos);n.scene.crosshairPos=n.mm2frac(e),n.scene.pan2Dxyzmm=Yd(this.scene.pan2Dxyzmm)}doSyncGamma(n){const e=this.scene.gamma,t=n.scene.gamma;e!==t&&n.setGamma(e)}doSyncZoomPan(n){n.scene.pan2Dxyzmm=Yd(this.scene.pan2Dxyzmm)}doSyncCrosshair(n){const e=this.frac2mm(this.scene.crosshairPos);n.scene.crosshairPos=n.mm2frac(e)}doSyncCalMin(n){this.volumes[0].cal_min!==n.volumes[0].cal_min&&(n.volumes[0].cal_min=this.volumes[0].cal_min,n.updateGLVolume())}doSyncCalMax(n){this.volumes[0].cal_max!==n.volumes[0].cal_max&&(n.volumes[0].cal_max=this.volumes[0].cal_max,n.updateGLVolume())}doSyncSliceType(n){n.setSliceType(this.opts.sliceType)}doSyncClipPlane(n){n.setClipPlane(this.scene.clipPlaneDepthAziElev)}sync(){if(!(!this.gl||!this.otherNV||typeof this.otherNV>"u")&&this.gl.canvas.matches(":focus"))for(let n=0;n<this.otherNV.length;n++)this.otherNV[n]!==this&&(this.syncOpts.gamma&&this.doSyncGamma(this.otherNV[n]),this.syncOpts.crosshair&&this.doSyncCrosshair(this.otherNV[n]),this.syncOpts.zoomPan&&this.doSyncZoomPan(this.otherNV[n]),this.syncOpts.sliceType&&this.doSyncSliceType(this.otherNV[n]),this.syncOpts.cal_min&&this.doSyncCalMin(this.otherNV[n]),this.syncOpts.cal_max&&this.doSyncCalMax(this.otherNV[n]),this.syncOpts.clipPlane&&this.doSyncClipPlane(this.otherNV[n]),this.syncOpts["2d"]&&this.doSync2d(this.otherNV[n]),this.syncOpts["3d"]&&this.doSync3d(this.otherNV[n]),this.otherNV[n].drawScene(),this.otherNV[n].createOnLocationChange())}arrayEquals(n,e){return Array.isArray(n)&&Array.isArray(e)&&n.length===e.length&&n.every((t,i)=>t===e[i])}resizeListener(){if(!(!this.canvas||!this.gl)){if(!this.opts.isResizeCanvas){this.opts.isHighResolutionCapable&&(ht.warn("isHighResolutionCapable requires isResizeCanvas"),this.opts.isHighResolutionCapable=!1),this.uiData.dpr=1,this.drawScene();return}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.opts.isHighResolutionCapable?(this.uiData.dpr=window.devicePixelRatio||1,ht.debug("devicePixelRatio: "+this.uiData.dpr)):this.uiData.dpr=1,"width"in this.canvas.parentElement?(this.canvas.width=this.canvas.parentElement.width*this.uiData.dpr,this.canvas.height=this.canvas.parentElement.height*this.uiData.dpr):(this.canvas.width=this.canvas.offsetWidth*this.uiData.dpr,this.canvas.height=this.canvas.offsetHeight*this.uiData.dpr),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.drawScene()}}getRelativeMousePosition(n,e){if(e=e||n.target,!e)return;const t=e.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}getNoPaddingNoBorderCanvasRelativeMousePosition(n,e){return e=e||n.target,this.getRelativeMousePosition(n,e)}mouseContextMenuListener(n){n.preventDefault()}mouseDownListener(n){n.preventDefault(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.uiData.mousedown=!0,this.setDragStart(0,0),this.setDragEnd(0,0),ht.debug("mouse down"),ht.debug(n);const e=this.getNoPaddingNoBorderCanvasRelativeMousePosition(n,this.gl.canvas);if(!e)return;const[t,i]=[e.x*this.uiData.dpr,e.y*this.uiData.dpr];this.opts.clickToSegment&&(this.clickToSegmentXY=[t,i]);const r=this.getLabelAtPoint([t,i]);if(r){if(r.onClick){r.onClick(r);return}for(const s of this.meshes)if(s.type==="connectome")for(const a of s.nodes)a.label===r&&(this.scene.crosshairPos=this.mm2frac([a.x,a.y,a.z]),this.updateGLVolume(),this.drawScene())}this.uiData.clickedTile=this.tileIndex(t,i),n.button===IX&&n.shiftKey?(this.uiData.mouseButtonCenterDown=!0,this.mouseCenterButtonHandler(n)):n.button===IX?(this.uiData.mouseButtonLeftDown=!0,this.mouseLeftButtonHandler(n)):n.button===yft?(this.uiData.mouseButtonRightDown=!0,this.mouseRightButtonHandler(n)):n.button===gft&&(this.uiData.mouseButtonCenterDown=!0,this.mouseCenterButtonHandler(n))}mouseLeftButtonHandler(n){if(n.ctrlKey||this.opts.dragModePrimary===0){const e=this.getNoPaddingNoBorderCanvasRelativeMousePosition(n,this.gl.canvas);this.mouseDown(e.x,e.y),this.mouseClick(e.x,e.y)}else this.opts.dragModePrimary===1&&(this.uiData.windowX=n.x,this.uiData.windowY=n.y)}mouseCenterButtonHandler(n){const e=this.getNoPaddingNoBorderCanvasRelativeMousePosition(n,this.gl.canvas);this.mousePos=[e.x*this.uiData.dpr,e.y*this.uiData.dpr],this.opts.dragMode!==0&&(this.setDragStart(e.x,e.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=Yd(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElev)}mouseRightButtonHandler(n){const e=this.getNoPaddingNoBorderCanvasRelativeMousePosition(n,this.gl.canvas);this.mousePos=[e.x*this.uiData.dpr,e.y*this.uiData.dpr],this.opts.dragMode!==0&&(this.setDragStart(e.x,e.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=Yd(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElev)}calculateMinMaxVoxIdx(n){if(n.length>2)throw new Error("array must not contain more than two values");return[Math.floor(Math.min(n[0],n[1])),Math.floor(Math.max(n[0],n[1]))]}calculateNewRange({volIdx:n=0}={}){if(this.opts.sliceType===4&&this.sliceMosaicString.length<1||this.uiData.dragStart[0]===this.uiData.dragEnd[0]&&this.uiData.dragStart[1]===this.uiData.dragEnd[1])return;let e=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]);if(e[0]<0)return;const t=this.frac2vox(e,n);if(e=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]),e[0]<0)return;const i=this.frac2vox(e,n);let r=-Number.MAX_VALUE,s=Number.MAX_VALUE;const a=this.calculateMinMaxVoxIdx([t[0],i[0]]),o=this.calculateMinMaxVoxIdx([t[1],i[1]]),l=this.calculateMinMaxVoxIdx([t[2],i[2]]);t[0]-i[0]===0?a[1]=t[0]+1:t[1]-i[1]===0?o[1]=t[1]+1:t[2]-i[2]===0&&(l[1]=t[2]+1);const c=this.volumes[n].hdr,u=this.volumes[n].img;if(!c||!u)return;const d=c.dims[1],f=c.dims[2];for(let m=l[0];m<l[1];m++){const v=m*d*f;for(let g=o[0];g<o[1];g++){const y=g*d;for(let x=a[0];x<a[1];x++){const b=v+y+x;s>u[b]&&(s=u[b]),r<u[b]&&(r=u[b])}}}if(s>=r)return;const h=EX(c,s),p=EX(c,r);this.volumes[n].cal_min=h,this.volumes[n].cal_max=p,this.onIntensityChange(this.volumes[n])}generateMouseUpCallback(n,e){const t=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]),i=this.tileIndex(this.uiData.dragEnd[0],this.uiData.dragEnd[1]);let r=-1;t===i&&(r=i);let s=-1;r>=0&&(s=this.screenSlices[r].axCorSag);const a=this.frac2mm(n),o=this.frac2mm(e),l=Zr();rX(l,bn(a[0],a[1],a[2]),bn(o[0],o[1],o[2]));const c=aA(l),u=this.frac2vox(n),d=this.frac2vox(e);this.onDragRelease({fracStart:n,fracEnd:e,voxStart:u,voxEnd:d,mmStart:a,mmEnd:o,mmLength:c,tileIdx:r,axCorSag:s})}mouseUpListener(){function n(i){return Object.prototype.toString.call(i).indexOf("Function")>-1}const e={mouseButtonRightDown:this.uiData.mouseButtonRightDown,mouseButtonCenterDown:this.uiData.mouseButtonCenterDown,isDragging:this.uiData.isDragging,mousePos:this.mousePos,fracPos:this.canvasPos2frac(this.mousePos)};this.uiData.mousedown=!1,this.uiData.mouseButtonRightDown=!1;const t=this.uiData.mouseButtonCenterDown;if(this.uiData.mouseButtonCenterDown=!1,this.uiData.mouseButtonLeftDown=!1,this.drawPenFillPts.length>0)this.drawPenFilled();else if(this.drawPenAxCorSag>=0&&this.opts.clickToSegment){const i=this.sumBitmap(this.drawBitmap);this.sumBitmap(this.clickToSegmentGrowingBitmap)>i&&this.updateBitmapFromClickToSegment()}if(this.drawAddUndoBitmap(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,n(this.onMouseUp)&&this.onMouseUp(e),this.uiData.isDragging){this.uiData.isDragging=!1,this.opts.dragMode===5&&this.drawScene();const i=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),r=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);if(this.generateMouseUpCallback(i,r),this.opts.dragMode===6||this.opts.dragMode!==1||t||this.uiData.dragStart[0]===this.uiData.dragEnd[0]&&this.uiData.dragStart[1]===this.uiData.dragEnd[1])return;this.calculateNewRange({volIdx:0}),this.refreshLayers(this.volumes[0],0)}this.drawScene()}checkMultitouch(n){if(this.uiData.touchdown&&!this.uiData.multiTouchGesture){const e=this.canvas.getBoundingClientRect();this.mouseDown(n.touches[0].clientX-e.left,n.touches[0].clientY-e.top),this.mouseClick(n.touches[0].clientX-e.left,n.touches[0].clientY-e.top)}}touchStartListener(n){n.preventDefault(),this.uiData.touchTimer||(this.uiData.touchTimer=setTimeout(()=>{this.resetBriCon(n)},this.opts.longTouchTimeout)),this.uiData.touchdown=!0,this.uiData.currentTouchTime=new Date().getTime();const e=this.uiData.currentTouchTime-this.uiData.lastTouchTime;if(e<this.opts.doubleTouchTimeout&&e>0){this.uiData.doubleTouch=!0,this.setDragStart(n.targetTouches[0].clientX-n.target.getBoundingClientRect().left,n.targetTouches[0].clientY-n.target.getBoundingClientRect().top),this.resetBriCon(n),this.uiData.lastTouchTime=this.uiData.currentTouchTime;return}else this.uiData.doubleTouch=!1,this.setDragStart(0,0),this.setDragEnd(0,0),this.uiData.lastTouchTime=this.uiData.currentTouchTime;this.uiData.touchdown&&n.touches.length<2?this.uiData.multiTouchGesture=!1:this.uiData.multiTouchGesture=!0,setTimeout(this.checkMultitouch.bind(this),1,n)}touchEndListener(n){if(n.preventDefault(),this.uiData.touchdown=!1,this.uiData.lastTwoTouchDistance=0,this.uiData.multiTouchGesture=!1,this.uiData.touchTimer&&(clearTimeout(this.uiData.touchTimer),this.uiData.touchTimer=null),this.uiData.isDragging){this.uiData.isDragging=!1,this.opts.dragMode===1&&(this.calculateNewRange(),this.refreshLayers(this.volumes[0],0));const e=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),t=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);this.generateMouseUpCallback(e,t)}this.mouseUpListener()}windowingHandler(n,e,t=0){const i=this.uiData.windowX,r=this.uiData.windowY;let s=this.volumes[0].cal_min,a=this.volumes[0].cal_max;const o=this.volumes[0].global_min,l=this.volumes[0].global_max;e<r?(s+=1,a+=1):e>r&&(s-=1,a-=1),n>i?(s-=1,a+=1):n<i&&(s+=1,a-=1),a-s<1&&(a=s+1),s<o&&(s=o),a>l&&(a=l),s>a&&(s=a-1),this.volumes[t].cal_min=s,this.volumes[t].cal_max=a,this.refreshLayers(this.volumes[t],0),this.uiData.windowX=n,this.uiData.windowY=e}mouseMoveListener(n){if(this.uiData.mousedown){const e=this.getNoPaddingNoBorderCanvasRelativeMousePosition(n,this.gl.canvas);if(!e)return;const t=e.x*this.uiData.dpr,i=e.y*this.uiData.dpr;if(this.tileIndex(t,i)!==this.uiData.clickedTile)return;if(this.uiData.mouseButtonLeftDown){const s=this.opts.dragModePrimary===0,a=this.opts.dragModePrimary===1;n.ctrlKey||s?(this.mouseMove(e.x,e.y),this.mouseClick(e.x,e.y)):a&&this.windowingHandler(n.x,n.y)}else(this.uiData.mouseButtonRightDown||this.uiData.mouseButtonCenterDown)&&this.setDragEnd(e.x,e.y);this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY}else if(!this.uiData.mousedown&&this.opts.clickToSegment){const e=this.getNoPaddingNoBorderCanvasRelativeMousePosition(n,this.gl.canvas);if(!e)return;const t=e.x*this.uiData.dpr,i=e.y*this.uiData.dpr;this.mousePos=[t,i],this.drawScene()}}resetBriCon(n=null){if(this.uiData.isDragging)return;let e=!1;this.opts.sliceType===4&&(e=!0);let t=0,i=0;if(n!==null&&("targetTouches"in n?(t=n.targetTouches[0].clientX-n.target.getBoundingClientRect().left,i=n.targetTouches[0].clientY-n.target.getBoundingClientRect().top):(t=n.offsetX,i=n.offsetY),t*=this.uiData.dpr,i*=this.uiData.dpr,this.inRenderTile(t,i)>=0&&(e=!0)),e){this.uiData.mouseDepthPicker=!0,this.drawScene(),this.drawScene();return}this.opts.dragMode!==4&&(this.volumes.length<1||this.uiData.doubleTouch||(this.volumes[0].cal_min=this.volumes[0].robust_min,this.volumes[0].cal_max=this.volumes[0].robust_max,this.onIntensityChange(this.volumes[0]),this.refreshLayers(this.volumes[0],0),this.drawScene()))}setDragStart(n,e){n*=this.uiData.dpr,e*=this.uiData.dpr,this.uiData.dragStart[0]=n,this.uiData.dragStart[1]=e}setDragEnd(n,e){n*=this.uiData.dpr,e*=this.uiData.dpr,this.uiData.dragEnd[0]=n,this.uiData.dragEnd[1]=e}touchMoveListener(n){if(this.uiData.touchdown&&n.touches.length<2){const e=this.canvas.getBoundingClientRect();if(this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=Yd(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.doubleTouch&&this.uiData.isDragging){this.setDragEnd(n.targetTouches[0].clientX-n.target.getBoundingClientRect().left,n.targetTouches[0].clientY-n.target.getBoundingClientRect().top),this.drawScene();return}const t=this.opts.dragModePrimary===0,i=this.opts.dragModePrimary===1;t?(this.mouseClick(n.touches[0].clientX-e.left,n.touches[0].clientY-e.top),this.mouseMove(n.touches[0].clientX-e.left,n.touches[0].clientY-e.top)):i&&(this.windowingHandler(n.touches[0].pageX,n.touches[0].pageY),this.drawScene())}else this.handlePinchZoom(n)}handlePinchZoom(n){if(n.targetTouches.length===2&&n.changedTouches.length===2){const e=Math.hypot(n.touches[0].pageX-n.touches[1].pageX,n.touches[0].pageY-n.touches[1].pageY),t=this.canvas.getBoundingClientRect();this.mousePos=[n.touches[0].clientX-t.left,n.touches[0].clientY-t.top],e<this.uiData.lastTwoTouchDistance?this.sliceScroll2D(-.01,n.touches[0].clientX-t.left,n.touches[0].clientY-t.top):this.sliceScroll2D(.01,n.touches[0].clientX-t.left,n.touches[0].clientY-t.top),this.uiData.lastTwoTouchDistance=e}}keyUpListener(n){if(n.code===this.opts.clipPlaneHotKey){const e=new Date().getTime();if(e-this.lastCalled>this.opts.keyDebounceTime){switch(this.currentClipPlaneIndex=(this.currentClipPlaneIndex+1)%7,this.currentClipPlaneIndex){case 0:this.scene.clipPlaneDepthAziElev=[2,0,0];break;case 1:this.scene.clipPlaneDepthAziElev=[0,270,0];break;case 2:this.scene.clipPlaneDepthAziElev=[0,90,0];break;case 3:this.scene.clipPlaneDepthAziElev=[0,0,0];break;case 4:this.scene.clipPlaneDepthAziElev=[0,180,0];break;case 5:this.scene.clipPlaneDepthAziElev=[0,0,-90];break;case 6:this.scene.clipPlaneDepthAziElev=[0,0,90];break}this.setClipPlane(this.scene.clipPlaneDepthAziElev)}this.lastCalled=e}else if(n.code===this.opts.viewModeHotKey){const e=new Date().getTime();e-this.lastCalled>this.opts.keyDebounceTime&&(this.setSliceType((this.opts.sliceType+1)%5),this.lastCalled=e)}}keyDownListener(n){n.code==="KeyH"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth-1,this.scene.renderElevation):n.code==="KeyL"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth+1,this.scene.renderElevation):n.code==="KeyJ"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation+1):n.code==="KeyK"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation-1):n.code==="KeyH"&&this.opts.sliceType!==4?this.moveCrosshairInVox(-1,0,0):n.code==="KeyL"&&this.opts.sliceType!==4?this.moveCrosshairInVox(1,0,0):n.code==="KeyU"&&this.opts.sliceType!==4&&n.ctrlKey?this.moveCrosshairInVox(0,0,1):n.code==="KeyD"&&this.opts.sliceType!==4&&n.ctrlKey?this.moveCrosshairInVox(0,0,-1):n.code==="KeyJ"&&this.opts.sliceType!==4?this.moveCrosshairInVox(0,-1,0):n.code==="KeyK"&&this.opts.sliceType!==4?this.moveCrosshairInVox(0,1,0):n.code==="KeyM"&&this.opts.sliceType!==4?(this.opts.dragMode++,this.opts.dragMode>=4&&(this.opts.dragMode=0),ht.info("drag mode changed to ",Noe[this.opts.dragMode])):n.code==="ArrowLeft"?this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D-1):n.code==="ArrowRight"?this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D+1):n.code==="Slash"&&n.shiftKey&&alert(`NIIVUE VERSION: ${hX}`)}wheelListener(n){if(n.preventDefault(),n.stopPropagation(),this.thumbnailVisible)return;const e=this.uiData.dragStart.reduce((s,a)=>s+a,0),t=this.uiData.dragEnd.reduce((s,a)=>s+a,0),i=e>0&&t>0;if(this.opts.dragMode===6&&i){const s=n.deltaY>0?1:-1;this.uiData.dragStart[0]<this.uiData.dragEnd[0]?(this.uiData.dragStart[0]-=s,this.uiData.dragEnd[0]+=s):(this.uiData.dragStart[0]+=s,this.uiData.dragEnd[0]-=s),this.uiData.dragStart[1]<this.uiData.dragEnd[1]?(this.uiData.dragStart[1]-=s,this.uiData.dragEnd[1]+=s):(this.uiData.dragStart[1]+=s,this.uiData.dragEnd[1]-=s),this.uiData.isDragging=!0,this.drawScene(),this.uiData.isDragging=!1;const a=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]);this.generateMouseUpCallback(this.screenXY2TextureFrac(this.uiData.dragStart[0],this.uiData.dragStart[1],a),this.screenXY2TextureFrac(this.uiData.dragEnd[0],this.uiData.dragEnd[1],a));return}const r=this.canvas.getBoundingClientRect();n.deltaY<0?this.sliceScroll2D(-.01,n.clientX-r.left,n.clientY-r.top):this.sliceScroll2D(.01,n.clientX-r.left,n.clientY-r.top)}registerInteractions(){if(!this.canvas)throw new Error("canvas undefined");this.canvas.addEventListener("mousedown",this.mouseDownListener.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUpListener.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMoveListener.bind(this)),this.canvas.addEventListener("touchstart",this.touchStartListener.bind(this)),this.canvas.addEventListener("touchend",this.touchEndListener.bind(this)),this.canvas.addEventListener("touchmove",this.touchMoveListener.bind(this)),this.canvas.addEventListener("wheel",this.wheelListener.bind(this)),this.canvas.addEventListener("contextmenu",this.mouseContextMenuListener.bind(this)),this.canvas.addEventListener("dblclick",this.resetBriCon.bind(this)),this.canvas.addEventListener("dragenter",this.dragEnterListener.bind(this),!1),this.canvas.addEventListener("dragover",this.dragOverListener.bind(this),!1),this.canvas.addEventListener("drop",this.dropListener.bind(this),!1),this.canvas.setAttribute("tabindex","0"),this.canvas.addEventListener("keyup",this.keyUpListener.bind(this),!1),this.canvas.addEventListener("keydown",this.keyDownListener.bind(this),!1)}dragEnterListener(n){n.stopPropagation(),n.preventDefault()}dragOverListener(n){n.stopPropagation(),n.preventDefault()}getFileExt(n,e=!0){ht.debug("fullname: ",n);const t=/(?:\.([^.]+))?$/;let i=t.exec(n)[1];if(i=i.toUpperCase(),i==="GZ")i=t.exec(n.slice(0,-3))[1],i=i.toUpperCase();else if(i==="CBOR"){const r=i;i=t.exec(n.slice(0,-5))[1],i=i.toUpperCase(),i=`${i}.${r}`}return e?i:i.toLowerCase()}async addVolumeFromUrl(n){const e=await ro.loadFromUrl(n);return this.document.addImageOptions(e,n),e.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(e,n.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(n,e),this.addVolume(e),e}async addVolumesFromUrl(n){const e=n.map(async i=>{const r=this.getFileExt(i.name||i.url);if(r==="DCM")throw new Error("DICOM files must be loaded using useDicomLoader");if(this.loaders[r]){let o=i.url;const l=this.loaders[r].toExt;let c=i.name||i.url;if(c=c.split("/").pop(),typeof i.url=="string"){const d=i.url;try{const f=await fetch(d);if(!f.ok)throw new Error(`Failed to load file: ${f.statusText}`);o=await f.arrayBuffer()}catch(f){throw new Error(`Failed to load url ${d}: ${f}`)}}const u=await this.loaders[r].loader(o);i.url=u,i.name=`${c}.${l}`}const s={url:i.url,headers:i.headers,name:i.name,colormap:i.colormap?i.colormap:i.colorMap,colormapNegative:i.colormapNegative?i.colormapNegative:i.colorMapNegative,opacity:i.opacity,urlImgData:i.urlImgData,cal_min:i.cal_min,cal_max:i.cal_max,trustCalMinMax:this.opts.trustCalMinMax,isManifest:i.isManifest,frame4D:i.frame4D,limitFrames4D:i.limitFrames4D||this.opts.limitFrames4D,colorbarVisible:i.colorbarVisible},a=await ro.loadFromUrl(s);return this.document.addImageOptions(a,s),a.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(a,s.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(s,a),a}),t=await Promise.all(e);for(let i=0;i<t.length;i++)this.addVolume(t[i]);return t}getMediaByUrl(n){return[...this.mediaUrlMap.entries()].filter(e=>e[1]===n).map(e=>e[0]).pop()}removeVolumeByUrl(n){const e=this.getMediaByUrl(n);if(e)this.removeVolume(e);else throw new Error("No volume with URL present")}async traverseFileTree(n,e="",t){return new Promise(i=>{if(n.isFile)n.file(r=>{r.fullPath=e+r.name,r._webkitRelativePath=e+r.name,t.push(r),i(t)});else if(n.isDirectory){const r=n.createReader(),s=()=>{r.readEntries(a=>{if(a.length>0){const o=[];for(const l of a)o.push(this.traverseFileTree(l,e+n.name+"/",t));Promise.all(o).then(s).catch(l=>{throw l})}else i(t)})};s()}})}readDirectory(n){const e=n.createReader();let t=[];const i=async s=>{const a=[],o=async l=>new Promise((c,u)=>l.file(c,u));for(let l=0;l<s.length;l++)a.push(await o(s[l])),console.log(a);return a},r=()=>{e.readEntries(s=>{s.length?(t=t.concat(s),r()):i(t).then(async a=>{console.log(a)}).catch(a=>{throw a})})};return r(),t}isMeshExt(n){const e=this.getFileExt(n);return ht.debug("dropped ext"),ht.debug(e),ph.includes(e)}async loadFromArrayBuffer(n,e){const t=this.getFileExt(e);if(ph.includes(t)){await this.addMeshFromUrl({url:e,buffer:n});return}const i=Z_(e);i.buffer=n,i.name=e,await this.addVolumeFromUrl(i)}async loadFromFile(n){const e=this.getFileExt(n.name);if(ph.includes(e)){await yg.loadFromFile({file:n,gl:this.gl,name:n.name}).then(t=>{this.addMesh(t)});return}await ro.loadFromFile({file:n,name:n.name}).then(t=>{this.addVolume(t)})}useLoader(n,e,t){this.loaders={...this.loaders,[e.toUpperCase()]:{loader:n,toExt:t}}}useDicomLoader(n){this.dicomLoader=n}getDicomLoader(){return this.dicomLoader}async dropListener(n){if(n.stopPropagation(),n.preventDefault(),!this.opts.dragAndDropEnabled)return;const e=[],t=n.dataTransfer;if(!t)return;const i=t.getData("text/uri-list");if(i){const r=Z_(i),s=this.getFileExt(i);ht.debug("dropped ext"),ht.debug(s),ph.includes(s)?this.addMeshFromUrl({url:i}).catch(a=>{throw a}):s==="NVD"?this.loadDocumentFromUrl(i).catch(a=>{throw a}):this.addVolumeFromUrl(r).catch(a=>{throw a})}else{const r=t.items;if(r.length>0){!n.shiftKey&&!n.altKey&&(this.volumes=[],this.overlays=[],this.meshes=[]),this.closeDrawing();for(const s of Array.from(r)){const a=s.webkitGetAsEntry();if(ht.debug(a),!a)throw new Error("could not get entry from file");if(a.isFile){const o=this.getFileExt(a.name);let l;if(a.name.lastIndexOf("HEAD")!==-1)for(const c of Array.from(r)){const u=c.webkitGetAsEntry();if(!u)throw new Error("could not get paired entry");const d=a.name.substring(0,a.name.lastIndexOf("HEAD")),f=u.name.substring(0,u.name.lastIndexOf("BRIK"));d===f&&(l=u)}if(a.name.lastIndexOf("BRIK")!==-1)continue;if(this.loaders[o]){const c=this.loaders[o].toExt.toUpperCase();ph.includes(c)?ht.error(`Drag and drop mesh loader needs work ${o}`):ht.error(`Drag and drop volume loader needs work ${o}`);continue}if(ph.includes(o)){a.file(c=>{(async()=>{try{const u=await yg.loadFromFile({file:c,gl:this.gl,name:c.name});this.addMesh(u)}catch(u){console.error("Error loading mesh:",u)}})().catch(u=>console.error(u))});continue}else if(o==="NVD"){a.file(c=>{(async()=>{try{const u=await nD.loadFromFile(c);await this.loadDocument(u),ht.debug("loaded document")}catch(u){console.error(u)}})().catch(u=>console.error(u))});break}a.file(c=>{(async()=>{try{if(l)l.file(u=>{(async()=>{try{const d=await ro.loadFromFile({file:c,urlImgData:u,limitFrames4D:this.opts.limitFrames4D});this.addVolume(d)}catch(d){console.error(d)}})().catch(console.error)});else{const u=await ro.loadFromFile({file:c,urlImgData:l,limitFrames4D:this.opts.limitFrames4D});n.altKey?(ht.debug("alt key detected: assuming this is a drawing overlay"),this.drawClearAllUndoBitmaps(),this.loadDrawing(u)):this.addVolume(u)}}catch(u){console.error(u)}})().catch(console.error)})}else a.isDirectory&&this.traverseFileTree(a,"",e).then(o=>{const l=this.getDicomLoader().loader;if(!l)throw new Error("No loader for DICOM files");l(o).then(async c=>{console.log(c);const u=c.map(d=>ro.loadFromUrl({url:d.data,name:d.name,limitFrames4D:this.opts.limitFrames4D}));Promise.all(u).then(async d=>{console.log("from dicom loader"),console.log(d),await this.onDicomLoaderFinishedWithImages(d)}).catch(d=>{throw d})}).catch(c=>{console.error("Error loading DICOM files:",c)})}).catch(o=>{throw o})}}}this.drawScene()}setMultiplanarPadPixels(n){this.opts.multiplanarPadPixels=n,this.drawScene()}setMultiplanarLayout(n){typeof n=="string"&&(n=parseInt(n)),this.opts.multiplanarLayout=n,this.drawScene()}setCornerOrientationText(n){this.opts.isCornerOrientationText=n,this.updateGLVolume()}setHeroImage(n){this.opts.heroImageFraction=n,this.drawScene()}setRadiologicalConvention(n){this.opts.isRadiologicalConvention=n,this.updateGLVolume()}setDefaults(n={},e=!1){this.document.opts={...xh},this.scene.sceneData={...eC};for(const t in n)typeof n[t]=="function"?this[t]=n[t]:this.opts[t]=xh[t]===void 0?xh[t]:n[t];if(this.scene.pan2Dxyzmm=[0,0,0,1],e&&this.volumes&&this.volumes.length>0)for(let t=0;t<this.volumes.length;t++)this.volumes[t].cal_min=this.volumes[t].robust_min,this.volumes[t].cal_max=this.volumes[t].robust_max;this.updateGLVolume()}setMeshThicknessOn2D(n){this.opts.meshThicknessOn2D=n,this.updateGLVolume()}setSliceMosaicString(n){this.sliceMosaicString=n,this.updateGLVolume()}setSliceMM(n){this.opts.isSliceMM=n,this.updateGLVolume()}setAdditiveBlend(n){this.opts.isAdditiveBlend=n,this.updateGLVolume()}getRadiologicalConvention(){return this.opts.isRadiologicalConvention}setHighResolutionCapable(n){this.opts.isHighResolutionCapable=n,n&&!this.opts.isResizeCanvas&&(ht.warn("isHighResolutionCapable requires isResizeCanvas"),this.opts.isHighResolutionCapable=!1),this.opts.isHighResolutionCapable||(this.uiData.dpr=1),this.resizeListener(),this.drawScene()}addVolume(n){this.volumes.push(n);const e=this.volumes.length===1?0:this.volumes.length-1;this.setVolume(n,e),this.onImageLoaded(n),ht.debug("loaded volume",n.name),ht.debug(n)}addMesh(n){this.meshes.push(n);const e=this.meshes.length===1?0:this.meshes.length-1;this.setMesh(n,e),this.onMeshLoaded(n)}getVolumeIndexByID(n){const e=this.volumes.length;for(let t=0;t<e;t++)if(this.volumes[t].id===n)return t;return-1}drawAddUndoBitmap(){if(!this.drawBitmap||this.drawBitmap.length<1){ht.debug("drawAddUndoBitmap error: No drawing open");return}this.currentDrawUndoBitmap++,this.currentDrawUndoBitmap>=this.opts.maxDrawUndoBitmaps&&(this.currentDrawUndoBitmap=0),this.drawUndoBitmaps[this.currentDrawUndoBitmap]=vft(this.drawBitmap)}drawClearAllUndoBitmaps(){if(this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,!(!this.drawUndoBitmaps||this.drawUndoBitmaps.length<1))for(let n=this.drawUndoBitmaps.length-1;n>=0;n--)this.drawUndoBitmaps[n]=new Uint8Array}drawUndo(){if(this.drawUndoBitmaps.length<1){ht.debug("undo bitmaps not loaded");return}if(this.currentDrawUndoBitmap--,this.currentDrawUndoBitmap<0&&(this.currentDrawUndoBitmap=this.drawUndoBitmaps.length-1),this.currentDrawUndoBitmap>=this.drawUndoBitmaps.length&&(this.currentDrawUndoBitmap=0),this.drawUndoBitmaps[this.currentDrawUndoBitmap].length<2){ht.debug("drawUndo is misbehaving");return}this.drawBitmap=TX(this.drawUndoBitmaps[this.currentDrawUndoBitmap],this.drawBitmap.length),this.refreshDrawing(!0)}loadDrawing(n){if(this.drawBitmap&&ht.debug("Overwriting open drawing!"),!this.back)throw new Error("back undefined");this.drawClearAllUndoBitmaps();const e=n.hdr.dims;if(e[1]!==this.back.hdr.dims[1]||e[2]!==this.back.hdr.dims[2]||e[3]!==this.back.hdr.dims[3])return ht.debug("drawing dimensions do not match background image"),!1;n.img.constructor!==Uint8Array&&ht.debug("Drawings should be UINT8");const t=n.permRAS,i=e[1]*e[2]*e[3];this.drawBitmap=new Uint8Array(i),this.drawTexture=this.r8Tex(this.drawTexture,ng,this.back.dims,!0);const r=[0,0,0];for(let p=0;p<3;p++)for(let m=0;m<3;m++)Math.abs(t[p])-1===m&&(r[m]=p*Math.sign(t[p]));let s=1;const a=[1,1,1],o=[!1,!1,!1];for(let p=0;p<r.length;p++)for(let m=0;m<r.length;m++)Math.abs(r[m])===p&&(a[m]=s,(r[m]<0||Object.is(r[m],-0))&&(o[m]=!0),s*=e[m+1]);let l=Bn.range(0,e[1]-1,1);o[0]&&(l=Bn.range(e[1]-1,0,-1));for(let p=0;p<e[1];p++)l[p]*=a[0];let c=Bn.range(0,e[2]-1,1);o[1]&&(c=Bn.range(e[2]-1,0,-1));for(let p=0;p<e[2];p++)c[p]*=a[1];let u=Bn.range(0,e[3]-1,1);o[2]&&(u=Bn.range(e[3]-1,0,-1));for(let p=0;p<e[3];p++)u[p]*=a[2];const d=n.img,f=this.drawBitmap;let h=0;for(let p=0;p<e[3];p++)for(let m=0;m<e[2];m++)for(let v=0;v<e[1];v++)f[l[v]+c[m]+u[p]]=d[h],h++;return this.drawAddUndoBitmap(),this.refreshDrawing(!1),this.drawScene(),!0}binarize(n){const e=n.hdr.dims,t=e[1]*e[2]*e[3],i=new Uint8Array(t);for(let r=0;r<t;r++)n.img[r]!==0&&(i[r]=1);n.img=i,n.hdr.datatypeCode=2,n.hdr.cal_min=0,n.hdr.cal_max=1}async loadDrawingFromUrl(n,e=!1){this.drawBitmap&&ht.debug("Overwriting open drawing!"),this.drawClearAllUndoBitmaps();let t=!1;try{const i=await ro.loadFromUrl(Z_(n));e&&await this.binarize(i),t=this.loadDrawing(i)}catch{ht.error("loadDrawingFromUrl() failed to load "+n),this.drawClearAllUndoBitmaps()}return t}findOtsu(n=2){if(this.volumes.length<1)return[];const e=this.volumes[0].img,t=e.length;if(t<1)return[];const i=256,r=i-1,s=new Array(i).fill(0),a=this.volumes[0].cal_min,o=this.volumes[0].cal_max;if(o<=a)return[];const l=(o-a)/i;function c(g){return g*l+a}const u=(i-1)/Math.abs(o-a),d=this.volumes[0].hdr.scl_inter,f=this.volumes[0].hdr.scl_slope;for(let g=0;g<t;g++){let y=e[g]*f+d;y=Math.min(Math.max(y,a),o),y=Math.round((y-a)*u),s[y]++}const h=Array(i).fill(0).map(()=>Array(i).fill(0)),p=Array(i).fill(0).map(()=>Array(i).fill(0));for(let g=1;g<i;++g)h[g][g]=s[g],p[g][g]=g*s[g];for(let g=1;g<i-1;++g)h[1][g+1]=h[1][g]+s[g+1],p[1][g+1]=p[1][g]+(g+1)*s[g+1];for(let g=2;g<i;g++)for(let y=g+1;y<i;y++)h[g][y]=h[1][y]-h[1][g-1],p[g][y]=p[1][y]-p[1][g-1];for(let g=1;g<i;++g)for(let y=g+1;y<i;y++)h[g][y]!==0&&(h[g][y]=p[g][y]*p[g][y]/h[g][y]);let m=0;const v=[1/0,1/0,1/0];if(n>3)for(let g=0;g<i-3;g++)for(let y=g+1;y<i-2;y++)for(let x=y+1;x<i-1;x++){const b=h[0][g]+h[g+1][y]+h[y+1][x]+h[x+1][r];b>m&&(v[0]=g,v[1]=y,v[2]=x,m=b)}else if(n===3)for(let g=0;g<i-2;g++)for(let y=g+1;y<i-1;y++){const x=h[0][g]+h[g+1][y]+h[y+1][r];x>m&&(v[0]=g,v[1]=y,m=x)}else for(let g=0;g<i-1;g++){const y=h[0][g]+h[g+1][r];y>m&&(v[0]=g,m=y)}return[c(v[0]),c(v[1]),c(v[2])]}drawOtsu(n=2){if(this.volumes.length===0)return;const e=this.volumes[0].img.length,t=this.findOtsu(n);if(t.length<3)return;this.drawBitmap||this.createEmptyDrawing();const i=this.drawBitmap,r=this.volumes[0].img;for(let s=0;s<e;s++){if(i[s]!==0)continue;const a=r[s];a>t[0]&&(i[s]=1),a>t[1]&&(i[s]=2),a>t[2]&&(i[s]=3)}this.drawAddUndoBitmap(),this.refreshDrawing(!0)}removeHaze(n=5,e=0){const t=this.volumes[e].img,i=this.volumes[e].hdr,r=t.length;let s=2;(n===5||n===1)&&(s=4),(n===4||n===2)&&(s=3);const a=this.findOtsu(s);if(a.length<3)return;let o=a[0];n===1&&(o=a[2]),n===2&&(o=a[1]);const l=i.scl_inter,c=i.scl_slope,u=this.volumes[e].global_min;for(let d=0;d<r;d++)t[d]*c+l<o&&(t[d]=u);this.refreshLayers(this.volumes[e],0),this.drawScene()}async saveImage(n=kX){var a;const e={...kX,...n},{filename:t,isSaveDrawing:i,volumeByIndex:r}=e;if(ht.debug("saveImage",t,i,r),((a=this.back)==null?void 0:a.dims)===void 0)return ht.debug("No voxelwise image open"),!1;if(i){if(!this.drawBitmap)return ht.debug("No drawing open"),!1;const o=this.volumes[0].permRAS;if(o[0]===1&&o[1]===2&&o[2]===3)return ht.debug("saving drawing"),await this.volumes[0].saveToDisk(t,this.drawBitmap);{ht.debug("saving drawing");const l=this.volumes[0].hdr.dims,c=[0,0,0];for(let b=0;b<3;b++)for(let A=0;A<3;A++)Math.abs(o[b])-1===A&&(c[A]=b*Math.sign(o[b]));let u=1;const d=[1,1,1],f=[!1,!1,!1];for(let b=0;b<c.length;b++)for(let A=0;A<c.length;A++)Math.abs(c[A])===b&&(d[A]=u,(c[A]<0||Object.is(c[A],-0))&&(f[A]=!0),u*=l[A+1]);let h=Bn.range(0,l[1]-1,1);f[0]&&(h=Bn.range(l[1]-1,0,-1));for(let b=0;b<l[1];b++)h[b]*=d[0];let p=Bn.range(0,l[2]-1,1);f[1]&&(p=Bn.range(l[2]-1,0,-1));for(let b=0;b<l[2];b++)p[b]*=d[1];let m=Bn.range(0,l[3]-1,1);f[2]&&(m=Bn.range(l[3]-1,0,-1));for(let b=0;b<l[3];b++)m[b]*=d[2];const v=new Uint8Array(this.drawBitmap),g=new Uint8Array(l[1]*l[2]*l[3]);let y=0;for(let b=0;b<l[3];b++)for(let A=0;A<l[2];A++)for(let S=0;S<l[1];S++)g[y]=v[h[S]+p[A]+m[b]],y++;return ht.debug("saving drawing"),this.volumes[0].saveToDisk(t,g)}}return ht.debug("saving image"),this.volumes[r].saveToDisk(t)}getMeshIndexByID(n){if(typeof n=="number")return n>=this.meshes.length?-1:n;const e=this.meshes.length;for(let t=0;t<e;t++)if(this.meshes[t].id===n)return t;return-1}setMeshProperty(n,e,t){const i=this.getMeshIndexByID(n);if(i<0){ht.warn("setMeshProperty() id not loaded",n);return}this.meshes[i].setProperty(e,t,this.gl),this.updateGLVolume(),this.onMeshPropertyChanged(i,e,t)}indexNearestXYZmm(n,e,t,i){const r=this.getMeshIndexByID(n);return r<0?(ht.warn("indexNearestXYZmm() id not loaded",n),[NaN,NaN]):this.meshes[r].indexNearestXYZmm(e,t,i)}decimateHierarchicalMesh(n,e=3){const t=this.getMeshIndexByID(n);if(t<0){ht.warn("reverseFaces() id not loaded",n);return}const i=this.meshes[t].decimateHierarchicalMesh(this.gl,e);return this.updateGLVolume(),i}reverseFaces(n){const e=this.getMeshIndexByID(n);if(e<0){ht.warn("reverseFaces() id not loaded",n);return}this.meshes[e].reverseFaces(this.gl),this.updateGLVolume()}async setMeshLayerProperty(n,e,t,i){const r=this.getMeshIndexByID(n);if(r<0){ht.warn("setMeshLayerProperty() id not loaded",n);return}await this.meshes[r].setLayerProperty(e,t,i,this.gl),this.updateGLVolume()}setPan2Dxyzmm(n){this.scene.pan2Dxyzmm=n,this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=n[3]),this.drawScene()}setRenderAzimuthElevation(n,e){this.scene.renderAzimuth=n,this.scene.renderElevation=e,this.onAzimuthElevationChange(n,e),this.drawScene()}getOverlayIndexByID(n){const e=this.overlays.length;for(let t=0;t<e;t++)if(this.overlays[t].id===n)return t;return-1}setVolume(n,e=0){const t=this.volumes.length;if(e>t)return;const i=this.getVolumeIndexByID(n.id);e===0?(this.volumes.splice(i,1),this.volumes.unshift(n),this.back=this.volumes[0],this.overlays=this.volumes.slice(1)):e<0?(this.volumes.splice(this.getVolumeIndexByID(n.id),1),this.back=this.volumes[0],this.volumes.length>1?this.overlays=this.volumes.slice(1):this.overlays=[]):(this.volumes.splice(i,1),this.volumes.splice(e,0,n),this.overlays=this.volumes.slice(1),this.back=this.volumes[0]),this.updateGLVolume()}setMesh(n,e=0){this.meshes.forEach(r=>{ht.debug("MESH: ",r.name)});const t=this.meshes.length;if(e>t)return;const i=this.getMeshIndexByID(n.id);e===0?(this.meshes.splice(i,1),this.meshes.unshift(n)):e<0?this.meshes.splice(this.getMeshIndexByID(n.id),1):(this.meshes.splice(i,1),this.meshes.splice(e,0,n)),this.updateGLVolume(),this.meshes.forEach(r=>{ht.debug(r.name)})}removeVolume(n){if(this.setVolume(n,-1),this.mediaUrlMap.has(n)){const e=this.mediaUrlMap.get(n);this.onVolumeWithUrlRemoved(e),this.mediaUrlMap.delete(n)}this.drawScene()}removeVolumeByIndex(n){if(n>=this.volumes.length)throw new Error("Index of volume out of bounds");this.removeVolume(this.volumes[n])}removeMesh(n){if(n.unloadMesh(this.gl),this.setMesh(n,-1),this.mediaUrlMap.has(n)){const e=this.mediaUrlMap.get(n);this.onMeshWithUrlRemoved(e),this.mediaUrlMap.delete(n)}}removeMeshByUrl(n){const e=this.getMediaByUrl(n);e&&(this.removeMesh(e),this.mediaUrlMap.delete(e),this.onMeshWithUrlRemoved(n))}moveVolumeToBottom(n){this.setVolume(n,0)}moveVolumeUp(n){const e=this.getVolumeIndexByID(n.id);this.setVolume(n,e+1)}moveVolumeDown(n){const e=this.getVolumeIndexByID(n.id);this.setVolume(n,e-1)}moveVolumeToTop(n){this.setVolume(n,this.volumes.length-1)}mouseDown(n,e){n*=this.uiData.dpr,e*=this.uiData.dpr,this.mousePos=[n,e]}mouseMove(n,e){n*=this.uiData.dpr,e*=this.uiData.dpr;const t=(n-this.mousePos[0])/this.uiData.dpr,i=(e-this.mousePos[1])/this.uiData.dpr;this.mousePos=[n,e],!(this.inRenderTile(n,e)<0)&&(Math.abs(t)<1&&Math.abs(i)<1||(this.scene.renderAzimuth+=t,this.scene.renderElevation+=i,this.drawScene()))}sph2cartDeg(n,e){const t=-e*(Math.PI/180),i=(n-90)%360*(Math.PI/180),r=[Math.cos(t)*Math.cos(i),Math.cos(t)*Math.sin(i),Math.sin(t)],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return s<=0||(r[0]/=s,r[1]/=s,r[2]/=s),r}setClipPlane(n){const e=this.sph2cartDeg(n[1]+180,n[2]);this.scene.clipPlane=[e[0],e[1],e[2],n[0]],this.scene.clipPlaneDepthAziElev=n,this.onClipPlaneChange(this.scene.clipPlane),this.drawScene()}setCrosshairColor(n){this.opts.crosshairColor=n,this.drawScene()}setCrosshairWidth(n){this.opts.crosshairWidth=n,this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN),this.drawScene()}setDrawColormap(n){this.drawLut=Vr.makeDrawLut(n),this.updateGLVolume()}setDrawingEnabled(n){this.opts.drawingEnabled=n,this.opts.drawingEnabled&&(this.drawBitmap||this.createEmptyDrawing()),this.drawScene()}setPenValue(n,e=!1){this.opts.penValue=n,this.opts.isFilledPen=e,this.drawScene()}setDrawOpacity(n){this.drawOpacity=n,this.drawScene()}setSelectionBoxColor(n){this.opts.selectionBoxColor=n}sliceScroll2D(n,e,t,i=!0){if(this.opts.scrollRequiresFocus&&this.canvas!==document.activeElement){ht.warn("Canvas element does not have focus. Scroll events will not be processed.");return}if(this.inGraphTile(e,t)){let r=this.volumes[0].frame4D;n>0&&r++,n<0&&r--,this.setFrame4D(this.volumes[0].id,r);return}if(n!==0&&this.opts.dragMode===3&&this.inRenderTile(this.uiData.dpr*e,this.uiData.dpr*t)===-1){let r=this.scene.pan2Dxyzmm[3]*(1+10*n);r=Math.round(r*10)/10;const s=this.scene.pan2Dxyzmm[3]-r;this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=r),this.scene.pan2Dxyzmm[3]=r;const a=this.frac2mm(this.scene.crosshairPos);this.scene.pan2Dxyzmm[0]+=s*a[0],this.scene.pan2Dxyzmm[1]+=s*a[1],this.scene.pan2Dxyzmm[2]+=s*a[2],this.drawScene(),this.canvas.focus(),this.sync();return}this.mouseClick(e,t,n,i)}setSliceType(n){return this.opts.sliceType=n,this.drawScene(),this}setOpacity(n,e){this.volumes[n].opacity=e,this.updateGLVolume()}setScale(n){this.scene.volScaleMultiplier=n,this.drawScene()}setClipPlaneColor(n){this.opts.clipPlaneColor=n,this.renderShader.use(this.gl),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.drawScene()}setClipPlaneThick(n){this.opts.clipThick=n,this.renderShader.use(this.gl),this.gl.uniform1f(this.renderShader.uniforms.clipThick,this.opts.clipThick),this.drawScene()}setClipVolume(n,e){this.opts.clipVolumeLow=[Math.min(n[0],e[0]),Math.min(n[1],e[1]),Math.min(n[2],e[2])],this.opts.clipVolumeHigh=[Math.max(n[0],e[0]),Math.max(n[1],e[1]),Math.max(n[2],e[2])],this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.renderShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.pickingImageShader.use(this.gl),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.drawScene()}async setVolumeRenderIllumination(n=0){this.renderShader=this.renderVolumeShader,n>0&&(this.renderShader=this.renderGradientShader),n<0&&(this.renderShader=this.renderSliceShader),this.initRenderShader(this.renderShader,n),this.renderShader.use(this.gl),this.setClipPlaneColor(this.opts.clipPlaneColor),this.gradientTextureAmount=n,!(this.volumes.length<1)&&(this.refreshLayers(this.volumes[0],0),this.drawScene())}overlayRGBA(n){const e=n.hdr,t=e.dims[1]*e.dims[2]*e.dims[3],i=new Uint8ClampedArray(t*4),r=.2*Math.min(Math.min(e.dims[1],e.dims[2]),e.dims[3]),s=.5*e.dims[1],a=.5*e.dims[2],o=.5*e.dims[3];let l=0;for(let c=0;c<e.dims[3];c++)for(let u=0;u<e.dims[2];u++)for(let d=0;d<e.dims[1];d++){const f=Math.abs(d-s),h=Math.abs(u-a),p=Math.abs(c-o),m=Math.sqrt(f*f+h*h+p*p);let v=0;m<r&&(v=255),i[l++]=0,i[l++]=v,i[l++]=0,i[l++]=v*.5}return i}vox2mm(n,e){return Bn.vox2mm(n,e)}cloneVolume(n){return this.volumes[n].clone()}async loadDocumentFromUrl(n){const e=await nD.loadFromUrl(n);await this.loadDocument(e)}async loadDocument(n){this.volumes=[],this.meshes=[],this.document=n,this.document.labels=this.document.labels?this.document.labels:[];const e={...xh,...n.opts};this.scene.pan2Dxyzmm=n.scene.pan2Dxyzmm?n.scene.pan2Dxyzmm:[0,0,0,1],this.document.opts=e,this.setClipPlane(this.scene.clipPlaneDepthAziElev),ht.debug("load document",n),this.mediaUrlMap.clear(),this.createEmptyDrawing();const t=n.encodedImageBlobs;for(let r=0;r<n.imageOptionsArray.length;r++){const s=n.imageOptionsArray[r],a=t[r];if(a){"colorMap"in s&&(s.colormap=s.colorMap);const o=await ro.loadFromBase64({base64:a,...s});if(o){if(o.colormapLabel){const l=Object.keys(o.colormapLabel.lut).length,c=new Uint8ClampedArray(l);for(const u in o.colormapLabel.lut)c[u]=o.colormapLabel.lut[u];o.colormapLabel.lut=c}this.addVolume(o)}}}this.volumes.length>0&&(this.back=this.volumes[0]);for(const r of n.meshDataObjects??[]){const s={gl:this.gl,...r};r.offsetPt0&&(s.rgba255[3]=0,s.tris=new Uint32Array(r.offsetPt0)),ht.debug(s);const a=new yg(s.pts,s.tris,s.name,s.rgba255,s.opacity,s.visible,this.gl,s.connectome,s.dpg,s.dps,s.dpv);r.offsetPt0&&(a.fiberGroupColormap=r.fiberGroupColormap,a.fiberColor=r.fiberColor,a.fiberDither=r.fiberDither,a.fiberRadius=r.fiberRadius,a.colormap=r.colormap),a.meshShaderIndex=s.meshShaderIndex,a.layers=s.layers,a.updateMesh(this.gl),ht.debug(a),this.addMesh(a)}if(n.data.connectomes)for(const r of n.data.connectomes){const s=JSON.parse(r),a=this.loadConnectomeAsMesh(s);a.updateMesh(this.gl),this.addMesh(a)}this.createEmptyDrawing();const i=n.encodedDrawingBlob;if(i){const r=await Bn.b64toUint8(i);if(r){const s=this.back.dims;let a=s[1]*s[2]*s[3];if(r.length-352===a&&(a+=352),r.length!==a)throw new Error(`drawBitmap size does not match the texture dimensions (${s[1]}×${s[2]}×${s[3]}) ${a} != ${s[1]*s[2]*s[3]}.`);this.drawBitmap=r,this.refreshDrawing()}}return this.updateGLVolume(),this.drawScene(),this.onDocumentLoaded(n),this}async generateLoadDocumentJavaScript(n,e){const t=this.json(),i=await Bn.compressToBase64String(JSON.stringify(t));return`
        ${e}

        async function saveNiivueAsHtml(pageName) {
          //get new docstring
          const docString = nv1.json();
          const html =
          document.getElementsByTagName("html")[0]
              .innerHTML.replace(base64, await NVUtilities.compressToBase64String(JSON.stringify(docString)));
          NVUtilities.download(html, pageName, "application/html");
        }

        var nv1 = new Niivue();
        nv1.attachTo("${n}");
        var base64 = "${i}";
        NVUtilities.decompressBase64String(base64).then((jsonText) => {
          var json = JSON.parse(jsonText); // string -> JSON
          var doc = NVDocument.loadFromJSON(json);
          nv1.loadDocument(doc);
          nv1.updateGLVolume();
        });

      `}async generateHTML(n="gl1",e){return`<!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="utf-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width,initial-scale=1.0" />
            <title>Save as HTML</title>
            <style>
            html {
              height: auto;
              min-height: 100%;
              margin: 0;
            }
            body {
              display: flex;
              flex-direction: column;
              margin: 0;
              min-height: 100%;
              width: 100%;
              position: absolute;
              font-family: system-ui, Arial, Helvetica, sans-serif;
              background: #ffffff;
              color: black;
              user-select: none; /* Standard syntax */
            }
            header {
              margin: 10px;
            }
            main {
              flex: 1;
              background: #000000;
              position: relative;
            }
            footer {
              margin: 10px;
            }
            canvas {
              position: absolute;
              cursor: crosshair;
            }
            canvas:focus {
              outline: 0px;
            }
            div {
              display: table-row;
              background-color: blue;
            }
            </style>
          </head>
          <body>
            <noscript>niivue requires JavaScript.</noscript>
            <header>
            Save the current scene as HTML
            <button id="save">Save as HTML</button>
            </header>
            <main>
              <canvas id="gl1"></canvas>
            </main>
            <script type="module" async>
              ${await this.generateLoadDocumentJavaScript(n,e)}
              function saveAsHtml() {
                saveNiivueAsHtml("page.html");
              }
              // assign our event handler
              var button = document.getElementById("save");
              button.onclick = saveAsHtml;
            <\/script>
          </body>
        </html>`}async saveHTML(n="untitled.html",e="gl1",t){const i=await this.generateHTML(e,t);return Bn.download(i,n,"application/html")}json(){return this.document.opts=this.opts,this.document.scene=this.scene,this.document.volumes=this.volumes,this.document.meshes=this.meshes,this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL(),this.document.json()}async saveDocument(n="untitled.nvd",e=!0){return this.document.title=n,ht.debug("saveDocument",this.volumes[0]),this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL(),this.document.volumes=this.volumes,this.document.meshes=this.meshes,this.document.download(n,e)}async loadImages(n){const e=[],t=[];for(const i of n)if("url"in i){const r=this.getFileExt(i.url);if(this.loaders[r]){const s=this.loaders[r].toExt.toUpperCase();ph.includes(s)?t.push(i):e.push(i);continue}ph.includes(r.toUpperCase())?t.push(i):e.push(i)}return e.length>0&&await this.loadVolumes(e),t.length>0&&await this.loadMeshes(t),this}async loadDicoms(n){if(!this.getDicomLoader())throw new Error("No dicom loader set. Please set a dicom loader before loading dicoms");this.drawScene(),this.volumes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);const e=n.map(async i=>{let r=null;if(i.isManifest)r=await ro.fetchDicomData(i.url);else{const u=await fetch(i.url);if(!u.ok)throw new Error(`Failed to load file: ${u.statusText}`);const d=await u.arrayBuffer();r=[{name:i.url.split("/").pop(),data:d}]}const s=this.getDicomLoader().loader,a=await s(r);console.log(a);const o=a[0].name,l=a[0].data;return await ro.loadFromUrl({url:l,name:o})}),t=await Promise.all(e);return t.length===1?this.addVolume(t[0]):this.onDicomLoaderFinishedWithImages(t),this}async loadVolumes(n){return this.drawScene(),this.thumbnailVisible?(this.deferredVolumes=n,this):(this.volumes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),await this.addVolumesFromUrl(n),this)}async addMeshFromUrl(n){const e=this.getFileExt(n.url);if(e==="JCON"||e==="JSON"){const r=await(await fetch(n.url,{})).json(),s=this.loadConnectomeAsMesh(r);return this.mediaUrlMap.set(s,n.url),this.onMeshAddedFromUrl(n,s),this.addMesh(s),s}const t=await yg.loadFromUrl({...n,gl:this.gl});return this.mediaUrlMap.set(t,n.url),this.onMeshAddedFromUrl(n,t),this.addMesh(t),t}async addMeshesFromUrl(n){const e=n.map(async i=>{const r=this.getFileExt(i.name||i.url);if(this.loaders[r]){let a=i.url;const o=this.loaders[r].toExt;let l=i.name||i.url;if(l=l.split("/").pop(),typeof i.url=="string"){const h=i.url;try{const p=await fetch(h);if(!p.ok)throw new Error(`Failed to load file: ${p.statusText}`);a=await p.arrayBuffer()}catch(p){throw new Error(`Failed to load url ${h}: ${p}`)}}const{positions:c,indices:u,colors:d=null}=await this.loaders[r].loader(a);i.name=`${l}.${o}`;const f=await E0.createMZ3Async(c,u,!1,d);i.buffer=f}if(r==="JCON"||r==="JSON"){const o=await(await fetch(i.url,{})).json(),l=this.loadConnectomeAsMesh(o);return this.mediaUrlMap.set(l,i.url),this.onMeshAddedFromUrl(i,l),l}const s=await yg.loadFromUrl({...i,gl:this.gl});return this.mediaUrlMap.set(s,i.url),this.onMeshAddedFromUrl(i,s),s}),t=await Promise.all(e);for(let i=0;i<t.length;i++)this.addMesh(t[i]);return t}async loadMeshes(n){return this.drawScene(),this.thumbnailVisible?(this.deferredMeshes=n,this):(this.initialized,this.meshes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),await this.addMeshesFromUrl(n),this.updateGLVolume(),this.drawScene(),this)}async loadConnectomeFromUrl(n,e={}){const i=await(await fetch(n,{headers:e})).json();return this.loadConnectome(i)}async loadFreeSurferConnectomeFromUrl(n,e={}){const i=await(await fetch(n,{headers:e})).json();return this.loadFreeSurferConnectome(i)}async loadFreeSurferConnectome(n){const e=O3.convertFreeSurferConnectome(n);return this.loadConnectome(e)}handleNodeAdded(n){const e=n.detail.node,t=[1,1,1,1];this.addLabel(e.name,{textColor:t,bulletScale:1,bulletColor:t,lineWidth:0,lineColor:t,lineTerminator:"none",textScale:1},[e.x,e.y,e.z]),this.drawScene()}loadConnectomeAsMesh(n){let e=n;if("data_type"in n&&n.data_type==="fs_pointset")e=O3.convertFreeSurferConnectome(n),ht.warn("converted FreeSurfer connectome",e);else if("nodes"in n){const t=n.nodes;"names"in t&&"X"in t&&"Y"in t&&"Z"in t&&"Color"in t&&"Size"in t&&(e=O3.convertLegacyConnectome(n),ht.warn("converted legacy connectome",e))}else throw new Error("not a known connectome format");return new O3(this.gl,e)}loadConnectome(n){this.drawScene(),this.meshes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);const e=this.loadConnectomeAsMesh(n);return this.addMesh(e),this.drawScene(),this}createEmptyDrawing(){if(this.back===null||!this.back.dims||Math.min(Math.min(this.back.dims[1],this.back.dims[2]),this.back.dims[3])<1)return;const e=this.back.dims[1]*this.back.dims[2]*this.back.dims[3];this.drawBitmap=new Uint8Array(e),this.clickToSegmentGrowingBitmap=new Uint8Array(e),this.drawClearAllUndoBitmaps(),this.drawAddUndoBitmap(),this.drawTexture=this.r8Tex(this.drawTexture,ng,this.back.dims,!0),this.refreshDrawing(!1)}r16Tex(n,e,t,i){n&&this.gl.deleteTexture(n),n=this.gl.createTexture(),this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_3D,n),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16I,t[1],t[2],t[3]);const r=t[1]*t[2]*t[3];return i.length!==r&&(i=new Int16Array(r)),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t[1],t[2],t[3],this.gl.RED_INTEGER,this.gl.SHORT,i),n}drawGrowCut(){if(!this.back||!this.back.dims)throw new Error("back not defined");const n=this.back.hdr,e=this.gl,t=n.dims[1]*n.dims[2]*n.dims[3];if(!this.drawBitmap||this.drawBitmap.length!==t){ht.debug("bitmap dims are wrong");return}const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.disable(e.CULL_FACE),e.viewport(0,0,this.back.dims[1],this.back.dims[2]),e.disable(e.BLEND);let r=hft(this.back);const s=this.r16Tex(null,wft,this.back.dims,r);for(let b=1;b<t;b++)r[b]=this.drawBitmap[b];const a=this.r16Tex(null,Cft,this.back.dims,r),o=this.r16Tex(null,Mft,this.back.dims,r),l=1e4;for(let b=1;b<t;b++)r[b]>0&&(r[b]=l);const c=this.r16Tex(null,Sft,this.back.dims,r),u=this.r16Tex(null,_ft,this.back.dims,r);e.bindVertexArray(this.genericVAO);const d=this.growCutShader;d.use(e);const f=128;e.uniform1i(d.uniforms.finalPass,0),e.uniform1i(d.uniforms.backTex,11);for(let b=0;b<f;b++){e.uniform1i(d.uniforms.labelTex,14),e.uniform1i(d.uniforms.strengthTex,12);for(let A=0;A<this.back.dims[3];A++){const S=1/this.back.dims[3]*(A+.5);e.uniform1f(d.uniforms.coordZ,S),e.framebufferTextureLayer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,o,0,A),e.framebufferTextureLayer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT1,u,0,A),e.drawBuffers([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1]),e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&ht.error("Incomplete framebuffer"),e.drawArrays(e.TRIANGLE_STRIP,0,4)}b===f-1&&e.uniform1i(d.uniforms.finalPass,1),e.uniform1i(d.uniforms.labelTex,15),e.uniform1i(d.uniforms.strengthTex,13);for(let A=0;A<this.back.dims[3];A++){const S=1/this.back.dims[3]*(A+.5);e.uniform1f(d.uniforms.coordZ,S),e.framebufferTextureLayer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,a,0,A),e.framebufferTextureLayer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT1,c,0,A),e.drawBuffers([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1]),e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&ht.error("Incomplete framebuffer"),e.drawArrays(e.TRIANGLE_STRIP,0,4)}}e.drawBuffers([e.COLOR_ATTACHMENT0]);const h=e.COLOR_ATTACHMENT1,p=a;e.readBuffer(h);const m=e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT),v=e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE);(m!==e.RED_INTEGER||v!==e.SHORT)&&ht.debug("readPixels will fail."),r=new Int16Array;const g=this.back.dims[1]*this.back.dims[2],y=new Int16Array(g);for(let b=0;b<this.back.dims[3];b++)e.framebufferTextureLayer(e.FRAMEBUFFER,h,p,0,b),e.readPixels(0,0,this.back.dims[1],this.back.dims[2],m,v,y),r=Int16Array.from([...r,...y]);let x=r[0];for(let b=0;b<r.length;b++)x=Math.max(x,r[b]);for(let b=1;b<t;b++)this.drawBitmap[b]=r[b];e.deleteTexture(s),e.deleteTexture(c),e.deleteTexture(u),e.deleteTexture(a),e.deleteTexture(o),e.bindVertexArray(this.unusedVAO),e.viewport(0,0,e.canvas.width,e.canvas.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(i),this.drawAddUndoBitmap(),this.refreshDrawing(!0)}drawPt(n,e,t,i){var u;if(!((u=this.back)!=null&&u.dims))throw new Error("back.dims not set");const r=this.back.dims[1],s=this.back.dims[2],a=this.back.dims[3];n=Math.min(Math.max(n,0),r-1),e=Math.min(Math.max(e,0),s-1),t=Math.min(Math.max(t,0),a-1),this.drawBitmap[n+e*r+t*r*s]=i;const o=this.drawPenAxCorSag===0,l=this.drawPenAxCorSag===1,c=this.drawPenAxCorSag===2;if(this.opts.penSize>1){const d=Math.floor(this.opts.penSize/2);for(let f=-d;f<=d;f++)for(let h=-d;h<=d;h++)o?this.drawBitmap[n+f+(e+h)*r+t*r*s]=i:l?this.drawBitmap[n+f+e*r+(t+h)*r*s]=i:c&&(this.drawBitmap[n+(e+h)*r+(t+f)*r*s]=i)}}drawPenLine(n,e,t){const i=Math.abs(n[0]-e[0]),r=Math.abs(n[1]-e[1]),s=Math.abs(n[2]-e[2]);let a=-1,o=-1,l=-1;e[0]>n[0]&&(a=1),e[1]>n[1]&&(o=1),e[2]>n[2]&&(l=1);let c=n[0],u=n[1],d=n[2];const f=e[0],h=e[1],p=e[2];if(i>=r&&i>=s){let m=2*r-i,v=2*s-i;for(;c!==f;)c+=a,m>=0&&(u+=o,m-=2*i),v>=0&&(d+=l,v-=2*i),m+=2*r,v+=2*s,this.drawPt(c,u,d,t)}else if(r>=i&&r>=s){let m=2*i-r,v=2*s-r;for(;u!==h;)u+=o,m>=0&&(c+=a,m-=2*r),v>=0&&(d+=l,v-=2*r),m+=2*i,v+=2*s,this.drawPt(c,u,d,t)}else{let m=2*r-s,v=2*i-s;for(;d!==p;)d+=l,m>=0&&(u+=o,m-=2*s),v>=0&&(c+=a,v-=2*s),m+=2*r,v+=2*i,this.drawPt(c,u,d,t)}}drawingBinaryDilationWithSeed(n,e=6){try{let t=function(v){return v[0]+v[1]*o+v[2]*l};const i=this.drawBitmap,r=this.back.dims[1],s=this.back.dims[2],a=this.back.dims[3],o=r,l=r*s,c=l*a,u=t(n);if(u<0||u>=c)throw new Error("Seed index is out of bounds.");const d=i[u];if(d===0)throw new Error("Seed voxel is not part of a filled cluster.");const f=i.slice();for(let v=0;v<c;v++)f[v]=f[v]===d?1:0;this.drawFloodFillCore(f,u,e);const h=i.slice(),p=[],m=[-l,l,-r,r,-1,1];p.push(...m),e>6&&p.push(-r-1,-r+1,r-1,r+1,-l-r,-l+r,-l-1,-l+1,l-r,l+r,l-1,l+1),e>18&&p.push(-l-r-1,-l-r+1,-l+r-1,-l+r+1,l-r-1,l-r+1,l+r-1,l+r+1);for(let v=0;v<c;v++)if(f[v]===2){const g=v%r,y=Math.floor(v%l/r),x=Math.floor(v/l);for(const b of p){const A=v+b;if(A<0||A>=c)continue;const S=A%r,C=Math.floor(A%l/r),_=Math.floor(A/l);Math.abs(S-g)>1||Math.abs(C-y)>1||Math.abs(_-x)>1||i[A]===0&&(h[A]=d)}}this.drawBitmap=h,this.drawAddUndoBitmap(),this.refreshDrawing(!0)}catch(t){ht.error("Error in drawingBinaryDilationWithSeed:",t)}}drawFloodFillCore(n,e,t=6){var c;if(!((c=this.back)!=null&&c.dims))throw new Error("back.dims undefined");const i=[this.back.dims[1],this.back.dims[2],this.back.dims[3]],r=i[0],s=r*i[1];function a(u){return u[0]+u[1]*r+u[2]*s}function o(u){const d=Math.floor(u/s),f=Math.floor((u-d*s)/r);return[Math.floor(u%r),f,d]}const l=[];for(l.push(e),n[e]=2;l.length>0;){let u=function(h){const p=f.slice();if(p[0]+=h[0],p[1]+=h[1],p[2]+=h[2],p[0]<0||p[1]<0||p[2]<0||p[0]>=i[0]||p[1]>=i[1]||p[2]>=i[2])return;const m=a(p);n[m]===1&&(n[m]=2,l.push(m))};const d=l[0];l.shift();const f=o(d);u([0,0,-1]),u([0,0,1]),u([0,-1,0]),u([0,1,0]),u([-1,0,0]),u([1,0,0]),!(t<=6)&&(u([-1,-1,0]),u([1,1,0]),u([-1,1,0]),u([1,1,0]),u([0,-1,-1]),u([0,1,-1]),u([-1,0,-1]),u([1,0,-1]),u([0,-1,1]),u([0,1,1]),u([-1,0,1]),u([1,0,1]),!(t<=18)&&(u([-1,-1,-1]),u([1,-1,-1]),u([-1,1,-1]),u([1,1,-1]),u([-1,-1,1]),u([1,-1,1]),u([-1,1,1]),u([1,1,1])))}}drawFloodFill(n,e=0,t=0,i=NaN,r=NaN,s=6,a=Number.POSITIVE_INFINITY,o=!1){var C;if(!this.drawBitmap)throw new Error("drawBitmap undefined");if(!((C=this.back)!=null&&C.dims))throw new Error("back.dims undefined");e=Math.abs(e);const l=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];if(n[0]<0||n[1]<0||n[2]<0||n[0]>=l[0]||n[1]>=l[1]||n[2]>=l[2])return;const c=l[0],u=c*l[1],d=u*l[2];let f=this.drawBitmap.slice(),h=this.drawBitmap;if(this.clickToSegmentIsGrowing&&(f=this.clickToSegmentGrowingBitmap.slice(),h=this.clickToSegmentGrowingBitmap),f.length!==u*l[2])return;let p=-1;o&&this.drawPenAxCorSag===0?p=2:o&&this.drawPenAxCorSag===1?p=1:o&&this.drawPenAxCorSag===2&&(p=0);function m(_){const M=Math.floor(_/u),T=Math.floor((_-M*u)/c);return[Math.floor(_%c),T,M]}function v(_){return _[0]+_[1]*c+_[2]*u}const g=_=>this.vox2mm(_,this.back.matRAS),y=g(n),x=a**2;function b(_){const M=m(_);if(p>=0&&M[p]!==n[p])return!1;const T=g(M);return(T[0]-y[0])**2+(T[1]-y[1])**2+(T[2]-y[2])**2<=x}const A=v(n),S=f[A];if(S===e){t!==0?ht.debug("drawFloodFill selected voxel is not part of a drawing"):ht.debug("drawFloodFill selected voxel is already desired color");return}for(let _=1;_<d;_++)if(f[_]=0,h[_]===S){if(!b(_))continue;f[_]=1}if(this.drawFloodFillCore(f,A,s),t!==0){const _=this.volumes[0].img2RAS();let M=_[A],T=M;if(isFinite(r)&&isFinite(i))M=r,T=i;else{for(let E=1;E<d;E++)f[E]===2&&(M=Math.max(M,_[E]),T=Math.min(T,_[E]));t===Number.POSITIVE_INFINITY&&(M=t),t===Number.NEGATIVE_INFINITY&&(T=t)}ht.debug("Intensity range of selected cluster :",T,M);for(let E=1;E<d;E++)if(f[E]=0,_[E]>=T&&_[E]<=M){if(!b(E))continue;f[E]=1}this.drawFloodFillCore(f,A,s),e=S}for(let _=1;_<d;_++)f[_]===2&&(h[_]=e);this.clickToSegmentIsGrowing?(this.clickToSegmentGrowingBitmap=h,this.refreshDrawing(!0,this.clickToSegmentIsGrowing)):(this.drawBitmap=h.slice(),this.opts.clickToSegment||this.drawAddUndoBitmap(),this.refreshDrawing(!0,this.clickToSegmentIsGrowing))}drawPenFilled(){var h;const n=this.drawPenFillPts.length;if(n<2){this.drawPenFillPts=[];return}const e=this.drawPenAxCorSag;let t=0,i=1;if(e===1&&(i=2),e===2&&(t=1,i=2),!((h=this.back)!=null&&h.dims))throw new Error("back.dims undefined");const r=[this.back.dims[t+1],this.back.dims[i+1]],s=new Uint8Array(r[0]*r[1]);let a=1;function o(p,m){const v=Math.abs(p[0]-m[0]),g=Math.abs(p[1]-m[1]);s[p[0]+p[1]*r[0]]=a,s[m[0]+m[1]*r[0]]=a;let y=-1,x=-1;m[0]>p[0]&&(y=1),m[1]>p[1]&&(x=1);let b=p[0],A=p[1];const S=m[0],C=m[1];if(v>=g){let _=2*g-v;for(;b!==S;)b+=y,_>=0&&(A+=x,_-=2*v),_+=2*g,s[b+A*r[0]]=a}else{let _=2*v-g;for(;A!==C;)A+=x,_>=0&&(b+=y,_-=2*g),_+=2*v,s[b+A*r[0]]=a}}const l=[this.drawPenFillPts[0][t],this.drawPenFillPts[0][i]];let c=l;for(let p=1;p<n;p++){const m=[this.drawPenFillPts[p][t],this.drawPenFillPts[p][i]];o(c,m),c=m}o(l,c);const u=[];function d(p){if(p[0]<0||p[1]<0||p[0]>=r[0]||p[1]>=r[1])return;const m=p[0]+p[1]*r[0];s[m]===0&&(u.push(p),s[m]=2)}for(let p=0;p<r[0];p++)d([p,0]);for(let p=0;p<r[0];p++)d([p,r[1]-1]);for(let p=0;p<r[1];p++)d([0,p]);for(let p=0;p<r[1];p++)d([r[0]-1,p]);for(;u.length>0;){const p=u.shift();d([p[0]-1,p[1]]),d([p[0]+1,p[1]]),d([p[0],p[1]-1]),d([p[0],p[1]+1])}a=this.opts.penValue;const f=this.drawPenFillPts[0][3-(t+i)];if(!this.drawBitmap)throw new Error("drawBitmap undefined");if(e===0){const p=f*r[0]*r[1];for(let m=0;m<r[0]*r[1];m++)s[m]!==2&&(this.drawBitmap[m+p]=a)}else{let p=1;const m=this.back.dims[1]*this.back.dims[2];let v=f*this.back.dims[1];e===2&&(p=this.back.dims[1],v=f);let g=0;for(let y=0;y<r[1];y++)for(let x=0;x<r[0];x++)s[g]!==2&&(this.drawBitmap[x*p+y*m+v]=a),g++}if(!this.drawFillOverwrites&&this.drawUndoBitmaps[this.currentDrawUndoBitmap].length>0){const p=this.drawBitmap.length,m=TX(this.drawUndoBitmaps[this.currentDrawUndoBitmap],p);for(let v=0;v<p;v++)m[v]!==0&&(this.drawBitmap[v]=m[v])}this.drawPenFillPts=[],this.drawAddUndoBitmap(),this.refreshDrawing(!1)}closeDrawing(){this.drawClearAllUndoBitmaps(),this.rgbaTex(this.drawTexture,ng,[2,2,2,2],!0),this.drawBitmap=null,this.clickToSegmentGrowingBitmap=null,this.drawScene()}refreshDrawing(n=!0,e=!1){var r;if(!((r=this.back)!=null&&r.dims))throw new Error("back.dims undefined");if(!this.drawBitmap)throw new Error("drawBitmap undefined");const t=this.back.dims.slice(),i=this.back.dims[1]*this.back.dims[2]*this.back.dims[3];this.drawBitmap.length===8?(t[1]=2,t[2]=2,t[3]=2):i!==this.drawBitmap.length&&ht.warn("Drawing bitmap must match the background image"),this.gl.activeTexture(ng),this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t[1],t[2],t[3],this.gl.RED,this.gl.UNSIGNED_BYTE,e?this.clickToSegmentGrowingBitmap:this.drawBitmap),n&&this.drawScene()}r8Tex(n,e,t,i=!1){if(n&&this.gl.deleteTexture(n),n=this.gl.createTexture(),this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_3D,n),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R8,t[1],t[2],t[3]),i){const r=new Uint8Array(t[1]*t[2]*t[3]);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t[1],t[2],t[3],this.gl.RED,this.gl.UNSIGNED_BYTE,r)}return n}rgbaTex(n,e,t,i=!1){if(n&&this.gl.deleteTexture(n),n=this.gl.createTexture(),this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_3D,n),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA8,t[1],t[2],t[3]),i){const r=new Uint8Array(t[1]*t[2]*t[3]*4);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t[1],t[2],t[3],this.gl.RGBA,this.gl.UNSIGNED_BYTE,r)}return n}requestCORSIfNotSameOrigin(n,e){new URL(e,window.location.href).origin!==window.location.origin&&(n.crossOrigin="")}async loadPngAsTexture(n,e){return new Promise((t,i)=>{const r=new Image;r.onload=()=>{if(!this.bmpShader)return;let s;e===4?(this.bmpTexture!==null&&this.gl.deleteTexture(this.bmpTexture),this.bmpTexture=this.gl.createTexture(),s=this.bmpTexture,this.bmpTextureWH=r.width/r.height,this.gl.activeTexture(xft),this.bmpShader.use(this.gl),this.gl.uniform1i(this.bmpShader.uniforms.bmpTexture,4)):e===5?(this.gl.activeTexture(DX),this.matCapTexture!==null&&this.gl.deleteTexture(this.matCapTexture),this.matCapTexture=this.gl.createTexture(),s=this.matCapTexture):(this.fontShader.use(this.gl),this.gl.activeTexture(bft),this.gl.uniform1i(this.fontShader.uniforms.fontTexture,3),this.fontTexture!==null&&this.gl.deleteTexture(this.fontTexture),this.fontTexture=this.gl.createTexture(),s=this.fontTexture),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r),t(s),e!==4&&this.drawScene()},r.onerror=i,this.requestCORSIfNotSameOrigin(r,n),r.src=n})}async loadFontTexture(n){return this.loadPngAsTexture(n,3)}async loadBmpTexture(n){return this.loadPngAsTexture(n,4)}async loadMatCapTexture(n){return this.loadPngAsTexture(n,5)}initFontMets(){if(!this.fontMetrics)throw new Error("fontMetrics undefined");this.fontMets={distanceRange:this.fontMetrics.atlas.distanceRange,size:this.fontMetrics.atlas.size,mets:{}};for(let t=0;t<256;t++)this.fontMets.mets[t]={xadv:0,uv_lbwh:[0,0,0,0],lbwh:[0,0,0,0]};const n=this.fontMetrics.atlas.width,e=this.fontMetrics.atlas.height;for(let t=0;t<this.fontMetrics.glyphs.length;t++){const i=this.fontMetrics.glyphs[t],r=i.unicode;if(this.fontMets.mets[r].xadv=i.advance,i.planeBounds===void 0)continue;let s=i.atlasBounds.left/n,a=(e-i.atlasBounds.top)/e,o=(i.atlasBounds.right-i.atlasBounds.left)/n,l=(i.atlasBounds.top-i.atlasBounds.bottom)/e;this.fontMets.mets[r].uv_lbwh=[s,a,o,l],s=i.planeBounds.left,a=i.planeBounds.bottom,o=i.planeBounds.right-i.planeBounds.left,l=i.planeBounds.top-i.planeBounds.bottom,this.fontMets.mets[r].lbwh=[s,a,o,l]}}async loadFont(n=wX,e=SX){await this.loadFontTexture(n);const t=await fetch(e);if(!t.ok)throw Error(t.statusText);const i=await t.text();this.fontMetrics=JSON.parse(i),this.initFontMets(),this.fontShader.use(this.gl),this.drawScene()}async loadDefaultMatCap(){return this.loadMatCapTexture(fft)}async loadDefaultFont(){await this.loadFontTexture(this.DEFAULT_FONT_GLYPH_SHEET),this.fontMetrics=this.DEFAULT_FONT_METRICS,this.initFontMets()}async initText(){this.fontShader=new vr(this.gl,uut,dut),this.fontShader.use(this.gl),await this.loadDefaultFont(),await this.loadDefaultMatCap(),this.drawLoadingText(this.opts.loadingText)}meshShaderNameToNumber(n="Phong"){const e=n.toLowerCase();for(let t=0;t<this.meshShaders.length;t++)if(this.meshShaders[t].Name.toLowerCase()===e)return t}setMeshShader(n,e=2){let t=0;if(typeof e=="number"?t=e:t=this.meshShaderNameToNumber(e),t===void 0)throw new Error("shaderIndex undefined");t=Math.min(t,this.meshShaders.length-1),t=Math.max(t,0);const i=this.getMeshIndexByID(n);if(i>=this.meshes.length){ht.debug("Unable to change shader until mesh is loaded (maybe you need async)");return}this.meshes[i].meshShaderIndex=t,this.updateGLVolume(),this.onMeshShaderChanged(i,t)}createCustomMeshShader(n,e="Custom"){if(!n)throw new Error("Need fragment shader");const t=this.meshShaderNameToNumber(e);t>=0&&(this.gl.deleteProgram(this.meshShaders[t].shader.program),this.meshShaders.splice(t,1));const i=new vr(this.gl,tD,n);return i.use(this.gl),{Name:e,Frag:n,shader:i}}setCustomMeshShader(n="",e="Custom"){const t=this.createCustomMeshShader(n,e);return this.meshShaders.push(t),this.onCustomMeshShaderAdded(n,e),this.meshShaders.length-1}meshShaderNames(n=!0){const e=[];for(let t=0;t<this.meshShaders.length;t++)e.push(this.meshShaders[t].Name);return n===!0?e.sort():e}initRenderShader(n,e=0){n.use(this.gl),this.gl.uniform1i(n.uniforms.volume,0),this.gl.uniform1i(n.uniforms.colormap,1),this.gl.uniform1i(n.uniforms.overlay,2),this.gl.uniform1i(n.uniforms.drawing,7),this.gl.uniform1fv(n.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.gl.uniform1f(n.uniforms.gradientAmount,e)}async init(){const n=this.gl.getExtension("WEBGL_debug_renderer_info");if(n){const s=this.gl.getParameter(n.UNMASKED_VENDOR_WEBGL),a=this.gl.getParameter(n.UNMASKED_RENDERER_WEBGL);ht.info("renderer vendor: ",s),ht.info("renderer: ",a)}else ht.info("debug_renderer_info unavailable");const e=this.gl.getParameter(this.gl.RENDERER);ht.info("firefox renderer: ",e),this.gl.clearDepth(0),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.volumeTexture=this.rgbaTex(this.volumeTexture,B2,[2,2,2,2],!0),this.overlayTexture=this.rgbaTex(this.overlayTexture,sD,[2,2,2,2],!0),this.drawTexture=this.r8Tex(this.drawTexture,ng,[2,2,2,2],!0);const t=[1,1,0,1,0,0,0,1,0,0,0,0],i=this.gl;this.cuboidVertexBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.cuboidVertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),i.STATIC_DRAW),this.genericVAO=i.createVertexArray(),i.bindVertexArray(this.genericVAO),i.bindBuffer(i.ARRAY_BUFFER,this.cuboidVertexBuffer),i.enableVertexAttribArray(0),i.vertexAttribPointer(0,3,i.FLOAT,!1,0,0),i.bindVertexArray(this.unusedVAO),this.pickingMeshShader=new vr(i,tD,wut),this.pickingMeshShader.use(i),this.pickingImageShader=new vr(i,L3,Fut),this.pickingImageShader.use(i),i.uniform1i(this.pickingImageShader.uniforms.volume,0),i.uniform1i(this.pickingImageShader.uniforms.colormap,1),i.uniform1i(this.pickingImageShader.uniforms.overlay,2),i.uniform1i(this.pickingImageShader.uniforms.drawing,7),this.sliceMMShader=new vr(i,pX,tut),this.sliceMMShader.use(i),i.uniform1i(this.sliceMMShader.uniforms.volume,0),i.uniform1i(this.sliceMMShader.uniforms.colormap,1),i.uniform1i(this.sliceMMShader.uniforms.overlay,2),i.uniform1i(this.sliceMMShader.uniforms.drawing,7),i.uniform1f(this.sliceMMShader.uniforms.drawOpacity,this.drawOpacity),this.sliceV1Shader=new vr(i,pX,nut),this.sliceV1Shader.use(i),i.uniform1i(this.sliceV1Shader.uniforms.volume,0),i.uniform1i(this.sliceV1Shader.uniforms.colormap,1),i.uniform1i(this.sliceV1Shader.uniforms.overlay,2),i.uniform1i(this.sliceV1Shader.uniforms.drawing,7),i.uniform1f(this.sliceV1Shader.uniforms.drawOpacity,this.drawOpacity),this.orientCubeShader=new vr(i,But,Nut),this.orientCubeShaderVAO=i.createVertexArray(),i.bindVertexArray(this.orientCubeShaderVAO);const r=i.createBuffer();i.enableVertexAttribArray(0),i.enableVertexAttribArray(1),i.bindBuffer(i.ARRAY_BUFFER,r),i.bufferData(i.ARRAY_BUFFER,Hut,i.STATIC_DRAW),i.vertexAttribPointer(0,3,i.FLOAT,!1,24,0),i.enableVertexAttribArray(1),i.vertexAttribPointer(1,3,i.FLOAT,!1,24,12),i.bindVertexArray(this.unusedVAO),this.rectShader=new vr(i,mX,ZI),this.rectShader.use(i),this.rectOutlineShader=new vr(i,mX,iut),this.rectOutlineShader.use(i),this.lineShader=new vr(i,aut,ZI),this.lineShader.use(i),this.line3DShader=new vr(i,out,ZI),this.line3DShader.use(i),this.circleShader=new vr(i,fut,hut),this.circleShader.use(i),this.renderVolumeShader=new vr(i,L3,Jct),this.initRenderShader(this.renderVolumeShader),this.renderSliceShader=new vr(i,L3,Zct),this.initRenderShader(this.renderSliceShader),this.renderGradientShader=new vr(i,L3,eut),this.initRenderShader(this.renderGradientShader,.3),i.uniform1i(this.renderGradientShader.uniforms.matCap,5),i.uniform1i(this.renderGradientShader.uniforms.gradient,6),this.renderShader=this.renderVolumeShader,this.colorbarShader=new vr(i,rut,sut),this.colorbarShader.use(i),i.uniform1i(this.colorbarShader.uniforms.colormap,1),this.blurShader=new vr(i,bX,zut),this.sobelShader=new vr(i,bX,Vut),this.growCutShader=new vr(i,vut,gut),this.passThroughShader=new vr(i,Out,Uut),this.orientShaderAtlasU=new vr(i,tg,JI.concat(gX)),this.orientShaderAtlasI=new vr(i,tg,vX.concat(gX)),this.orientShaderU=new vr(i,tg,JI.concat(eD)),this.orientShaderI=new vr(i,tg,vX.concat(eD)),this.orientShaderF=new vr(i,tg,put.concat(eD)),this.orientShaderRGBU=new vr(i,tg,JI.concat(mut)),this.surfaceShader=new vr(i,yut,but),this.surfaceShader.use(i),this.fiberShader=new vr(i,xut,Aut),this.pickingImageShader.use(i);for(let s=0;s<this.meshShaders.length;s++){const a=this.meshShaders[s];a.Name==="Flat"?a.shader=new vr(i,kut,yX):a.shader=new vr(i,tD,a.Frag),a.shader.use(i),a.shader.isMatcap=a.Name==="Matcap",a.shader.isMatcap&&i.uniform1i(a.shader.uniforms.matCap,5)}return this.bmpShader=new vr(i,lut,cut),await this.initText(),this.opts.thumbnail.length>0&&(await this.loadBmpTexture(this.opts.thumbnail),this.thumbnailVisible=!0),this.updateGLVolume(),this.initialized=!0,this.resizeListener(),this.drawScene(),this}gradientGL(n){const e=this.gl,t=[0,0,0,0,1,0,1,0,0,1,1,0],i=e.createVertexArray();e.bindVertexArray(i);const r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,3,e.FLOAT,!1,0,0);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.disable(e.CULL_FACE),e.viewport(0,0,n.dims[1],n.dims[2]),e.disable(e.BLEND);const a=this.rgbaTex(null,PX,n.dims),o=this.blurShader;o.use(e),e.activeTexture(B2),e.bindTexture(e.TEXTURE_3D,this.volumeTexture);const l=.7;e.uniform1i(o.uniforms.intensityVol,0),e.uniform1f(o.uniforms.dX,l/n.dims[1]),e.uniform1f(o.uniforms.dY,l/n.dims[2]),e.uniform1f(o.uniforms.dZ,l/n.dims[3]),e.bindVertexArray(i);for(let d=0;d<n.dims[3]-1;d++){const f=1/n.dims[3]*(d+.5);e.uniform1f(o.uniforms.coordZ,f),e.framebufferTextureLayer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,a,0,d),e.clear(e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,t.length/3)}const c=this.sobelShader;c.use(e),e.activeTexture(PX),e.bindTexture(e.TEXTURE_3D,a),e.uniform1i(c.uniforms.intensityVol,8);const u=.7;e.uniform1f(c.uniforms.dX,u/n.dims[1]),e.uniform1f(c.uniforms.dY,u/n.dims[2]),e.uniform1f(c.uniforms.dZ,u/n.dims[3]),e.uniform1f(c.uniforms.coordZ,.5),e.bindVertexArray(i),e.activeTexture(B2),this.gradientTexture!==null&&e.deleteTexture(this.gradientTexture),this.gradientTexture=this.rgbaTex(this.gradientTexture,RX,n.dims);for(let d=0;d<n.dims[3]-1;d++){const f=1/n.dims[3]*(d+.5);e.uniform1f(c.uniforms.coordZ,f),e.framebufferTextureLayer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,this.gradientTexture,0,d),e.clear(e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,t.length/3)}e.deleteFramebuffer(s),e.deleteTexture(a),e.deleteBuffer(r),e.bindFramebuffer(e.FRAMEBUFFER,null)}updateGLVolume(){var t;let n=0;const e=this.volumes.length;this.refreshColormaps();for(let i=0;i<e;i++)this.volumes[i].toRAS&&(this.refreshLayers(this.volumes[i],n),n++);if(this.furthestVertexFromOrigin=0,e>0&&(this.furthestVertexFromOrigin=((t=this.volumeObject3D)==null?void 0:t.furthestVertexFromOrigin)??0),this.meshes)for(let i=0;i<this.meshes.length;i++)this.furthestVertexFromOrigin=Math.max(this.furthestVertexFromOrigin,this.meshes[i].furthestVertexFromOrigin);this.onVolumeUpdated&&this.onVolumeUpdated(),this.drawScene()}getDescriptives(n){const{layer:e=0,masks:t=[],drawingIsMask:i=!1,roiIsMask:r=!1,startVox:s=[0,0,0],endVox:a=[0,0,0]}=n;let o=null;const l=this.volumes[e].hdr,c=this.volumes[e].pixDimsRAS;let u=l.scl_slope;isNaN(u)&&(u=1);let d=l.scl_inter;isNaN(d)&&(d=1);const f=this.volumes[e].img,h=f.length,p=new Float32Array(h);for(let I=0;I<h;I++)p[I]=f[I]*u+d;const m=new Uint8Array(h);for(let I=0;I<h;I++)m[I]=1;if(t.length>0)for(let I=0;I<t.length;I++){const L=this.volumes[t[I]].img;if(L.length!==h){ht.debug("Mask resolution does not match image. Skipping masking layer "+t[I]);continue}for(let F=0;F<h;F++)(L[F]===0||isNaN(L[F]))&&(m[F]=0)}else if(t.length<1&&i)for(let I=0;I<h;I++)(this.drawBitmap[I]===0||isNaN(this.drawBitmap[I]))&&(m[I]=0);else if(t.length<1&&r){m.fill(0),console.log("startVox",s),console.log("endVox",a);let I=-1;if(s[0]===a[0])I=0;else if(s[1]===a[1])I=1;else if(s[2]===a[2])I=2;else{console.error("Error: No constant dimension found.");return}const F=[0,1,2].filter(Le=>Le!==I),B=[];B[I]=s[I],B[F[0]]=(s[F[0]]+a[F[0]])/2,B[F[1]]=(s[F[1]]+a[F[1]])/2;const P=Math.abs(a[F[0]]-s[F[0]])/2,z=Math.abs(a[F[1]]-s[F[1]])/2,O=l.dims[1],N=l.dims[2],H=Math.max(0,Math.floor(B[F[0]]-P)),q=Math.min(l.dims[F[0]+1]-1,Math.ceil(B[F[0]]+P)),te=Math.max(0,Math.floor(B[F[1]]-z)),Q=Math.min(l.dims[F[1]+1]-1,Math.ceil(B[F[1]]+z)),ee=B[I];if(ee<0||ee>=l.dims[I+1]){console.error("Error: Constant dimension value is out of bounds.");return}for(let Le=H;Le<=q;Le++)for(let Ne=te;Ne<=Q;Ne++){const Y=[];Y[I]=ee,Y[F[0]]=Le,Y[F[1]]=Ne;const oe=(Y[F[0]]-B[F[0]])/P,ne=(Y[F[1]]-B[F[1]])/z;if(oe*oe+ne*ne<=1){const ke=Y[0],Ge=Y[1],qe=Y[2]*O*N+Ge*O+ke;m[qe]=1}}const de=c[F[0]+1]*c[F[1]+1];o=m.reduce((Le,Ne)=>Le+(Ne===1?1:0),0)*de;const ue=P*c[F[0]+1],Te=z*c[F[1]+1];o=Math.PI*ue*Te}let v=0,g=0,y=0,x=Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,A=0,S=0,C=0;for(let I=0;I<h;I++){if(m[I]<1)continue;const L=p[I];v++;let F=g+(L-g)/v;y=y+(L-g)*(L-F),g=F,L!==0&&(A++,F=S+(L-S)/A,C=C+(L-S)*(L-F),S=F,b=Math.min(L,x),x=Math.max(L,x))}const _=Math.sqrt(y/(v-1)),M=Math.sqrt(C/(A-1)),T=b,E=x;return v!==A&&(b=Math.min(0,x),x=Math.max(0,x)),{mean:g,stdev:_,nvox:v,volumeMM3:v*l.pixDims[1]*l.pixDims[2]*l.pixDims[3],volumeML:v*l.pixDims[1]*l.pixDims[2]*l.pixDims[3]*.001,min:b,max:x,meanNot0:S,stdevNot0:M,nvoxNot0:A,minNot0:T,maxNot0:E,cal_min:this.volumes[e].cal_min,cal_max:this.volumes[e].cal_max,robust_min:this.volumes[e].robust_min,robust_max:this.volumes[e].robust_max,area:o}}refreshLayers(n,e){var S;if(this.volumes.length<1)return;this.refreshColormaps();const t=n.hdr;let i=n.img;n.frame4D>0&&n.frame4D<n.nFrame4D&&(i=n.img.slice(n.frame4D*n.nVox3D,(n.frame4D+1)*n.nVox3D));const r=n.opacity;if(e>1&&r===0)return;let s=null;if(!this.back)throw new Error("back undefined");this.gl.bindVertexArray(this.unusedVAO),this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN);let a=_s(n.toRAS);if(e===0){this.volumeObject3D=n.toNiivueObject3D(this.VOLUME_ID,this.gl),zo(a,a),this.back.matRAS=n.matRAS,this.back.dims=n.dimsRAS,this.back.pixDims=n.pixDimsRAS,s=this.rgbaTex(this.volumeTexture,B2,n.dimsRAS);const{volScale:C,vox:_}=this.sliceScale(!0);if(this.volScale=C,this.vox=_,this.volumeObject3D.scale=C,!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.texVox,_),this.gl.uniform3fv(this.renderShader.uniforms.volScale,C);const M=this.pickingImageShader;M.use(this.gl),this.gl.uniform1i(M.uniforms.volume,0),this.gl.uniform1i(M.uniforms.colormap,1),this.gl.uniform1i(M.uniforms.overlay,2),this.gl.uniform3fv(M.uniforms.volScale,C),ht.debug(this.volumeObject3D)}else{((S=this.back)==null?void 0:S.dims)===void 0&&ht.error("Fatal error: Unable to render overlay: background dimensions not defined!");const C=this.mm2frac(n.mm000,0,!0);let _=this.mm2frac(n.mm100,0,!0),M=this.mm2frac(n.mm010,0,!0),T=this.mm2frac(n.mm001,0,!0);_=os(_,_,C),M=os(M,M,C),T=os(T,T,C),a=pl(_[0],M[0],T[0],C[0],_[1],M[1],T[1],C[1],_[2],M[2],T[2],C[2],0,0,0,1),zo(a,a),e===1?(s=this.rgbaTex(this.overlayTexture,sD,this.back.dims),this.overlayTexture=s,this.overlayTextureID=s):s=this.overlayTextureID}const o=this.gl.createFramebuffer();this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,o),this.gl.disable(this.gl.CULL_FACE),this.gl.viewport(0,0,this.back.dims[1],this.back.dims[2]),this.gl.disable(this.gl.BLEND);const l=this.gl.createTexture();this.gl.activeTexture(Aft),this.gl.bindTexture(this.gl.TEXTURE_3D,l),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1);let c=this.orientShaderU;if(!t)throw new Error("hdr undefined");if(!i)throw new Error("img undefined");if(t.datatypeCode===2)t.intent_code===1002&&(c=this.orientShaderAtlasU),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R8UI,t.dims[1],t.dims[2],t.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RED_INTEGER,this.gl.UNSIGNED_BYTE,i);else if(t.datatypeCode===4)c=this.orientShaderI,t.intent_code===1002&&(c=this.orientShaderAtlasI),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16I,t.dims[1],t.dims[2],t.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RED_INTEGER,this.gl.SHORT,i);else if(t.datatypeCode===16)this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R32F,t.dims[1],t.dims[2],t.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RED,this.gl.FLOAT,i),c=this.orientShaderF;else if(t.datatypeCode===64){let C=new Float32Array;C=Float32Array.from(i),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R32F,t.dims[1],t.dims[2],t.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RED,this.gl.FLOAT,C),c=this.orientShaderF}else t.datatypeCode===128?(c=this.orientShaderRGBU,c.use(this.gl),this.gl.uniform1i(c.uniforms.hasAlpha,0),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGB8UI,t.dims[1],t.dims[2],t.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RGB_INTEGER,this.gl.UNSIGNED_BYTE,i)):t.datatypeCode===512?(t.intent_code===1002&&(c=this.orientShaderAtlasU),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16UI,t.dims[1],t.dims[2],t.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RED_INTEGER,this.gl.UNSIGNED_SHORT,i)):t.datatypeCode===2304&&(c=this.orientShaderRGBU,c.use(this.gl),this.gl.uniform1i(c.uniforms.hasAlpha,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA8UI,t.dims[1],t.dims[2],t.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RGBA_INTEGER,this.gl.UNSIGNED_BYTE,i));n.global_min===void 0&&n.calMinMax();let u=null;if(this.gl.bindVertexArray(this.genericVAO),e>1){if(!this.back.dims)throw new Error("back.dims undefined");u=this.rgbaTex(u,LX,this.back.dims),this.gl.bindTexture(this.gl.TEXTURE_3D,u);const C=this.passThroughShader;C.use(this.gl),this.gl.uniform1i(C.uniforms.in3D,2);for(let _=0;_<this.back.dims[3];_++){const M=1/this.back.dims[3]*(_+.5);this.gl.uniform1f(C.uniforms.coordZ,M),this.gl.framebufferTextureLayer(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,u,0,_),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}else u=this.rgbaTex(u,LX,[2,2,2,2]);c.use(this.gl),this.gl.activeTexture(U3);let d=null;if(n.colormapLabel!==null&&n.colormapLabel.lut.length>7){const C=n.colormapLabel.max-n.colormapLabel.min+1;d=this.createColormapTexture(d,1,C),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,C,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n.colormapLabel.lut),this.gl.uniform1f(c.uniforms.cal_min,n.colormapLabel.min-.5),this.gl.uniform1f(c.uniforms.cal_max,n.colormapLabel.max+.5),this.gl.bindTexture(this.gl.TEXTURE_2D,d)}else this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.uniform1f(c.uniforms.cal_min,n.cal_min),this.gl.uniform1f(c.uniforms.cal_max,n.cal_max);"alphaThreshold"in n&&(ht.warn("alphaThreshold is deprecated: use colormapType"),n.alphaThreshold===!0&&(n.colormapType=2),n.alphaThreshold===!1&&(n.colormapType=1),delete n.alphaThreshold);const f=n.colormapType!==0?1:0,h=n.colormapType===2?1:0;this.gl.uniform1i(c.uniforms.isAlphaThreshold,h),this.gl.uniform1i(c.uniforms.isColorbarFromZero,f),this.gl.uniform1i(c.uniforms.isAdditiveBlend,this.opts.isAdditiveBlend?1:0);let p=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;if(n.colormapNegative.length>0&&(p=Math.min(-n.cal_min,-n.cal_max),m=Math.max(-n.cal_min,-n.cal_max),isFinite(n.cal_minNeg)&&isFinite(n.cal_maxNeg)&&(p=Math.min(n.cal_minNeg,n.cal_maxNeg),m=Math.max(n.cal_minNeg,n.cal_maxNeg))),e>0&&this.overlayOutlineWidth>0){const C=n.cal_min,_=n.cal_max;let M=Math.min(C,_)<=0&&Math.max(C,_)>=0;!M&&p<m&&(M=p<=0&&m>=0),M&&ht.error("issue1139: do not use overlayOutlineWidth when thresholds cross or touch zero")}if(!c)throw new Error("orientShader undefined");this.gl.uniform1f(c.uniforms.layer??null,e),this.gl.uniform1f(c.uniforms.cal_minNeg??null,p),this.gl.uniform1f(c.uniforms.cal_maxNeg??null,m),this.gl.bindTexture(this.gl.TEXTURE_3D,l),this.gl.uniform1i(c.uniforms.intensityVol??null,9),this.gl.uniform1i(c.uniforms.blend3D??null,10),this.gl.uniform1i(c.uniforms.colormap??null,1),this.gl.uniform1f(c.uniforms.scl_inter??null,t.scl_inter),this.gl.uniform1f(c.uniforms.scl_slope??null,t.scl_slope),this.gl.uniform1f(c.uniforms.opacity??null,r),this.gl.uniform1i(c.uniforms.modulationVol??null,7);let v=null;if(n.modulationImage!==null&&n.modulationImage>=0&&n.modulationImage<this.volumes.length){ht.debug("modulating",this.volumes);const C=this.volumes[n.modulationImage].hdr;if(C.dims[1]===t.dims[1]&&C.dims[2]===t.dims[2]&&C.dims[3]===t.dims[3]){n.modulateAlpha?(this.gl.uniform1i(c.uniforms.modulation,2),this.gl.uniform1f(c.uniforms.opacity,1)):this.gl.uniform1i(c.uniforms.modulation,1),v=this.r8Tex(v,this.gl.TEXTURE7,t.dims,!0),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_3D,v);const _=t.dims[1]*t.dims[2]*t.dims[3],M=new Uint8Array(_),T=this.volumes[n.modulationImage].cal_min,E=1/(this.volumes[n.modulationImage].cal_max-T),I=this.volumes[n.modulationImage].img.buffer;let L=new Uint8Array(I);switch(C.datatypeCode){case 4:L=new Int16Array(I);break;case 16:L=new Float32Array(I);break;case 64:L=new Float64Array(I);break;case 128:L=new Uint8Array(I);break;case 512:L=new Uint16Array(I);break}ht.debug(this.volumes[n.modulationImage]);const F=this.volumes[n.modulationImage].colormapNegative.length>0;let B=this.volumes[n.modulationImage].cal_min,P=this.volumes[n.modulationImage].cal_max;isFinite(this.volumes[n.modulationImage].cal_minNeg)&&isFinite(this.volumes[n.modulationImage].cal_maxNeg)&&(B=this.volumes[n.modulationImage].cal_minNeg,P=this.volumes[n.modulationImage].cal_minNeg),B=Math.abs(B),P=Math.abs(P),B>P&&([B,P]=[P,B]);const z=1/(P-B);let O=Math.abs(n.modulateAlpha);O=Math.max(O,1);const N=this.volumes[n.modulationImage].frame4D*_;for(let H=0;H<_;H++){const q=L[H+N]*C.scl_slope+C.scl_inter;let te=(q-T)*E;F&&q<0&&(te=(Math.abs(q)-B)*z),te=Math.min(Math.max(te,0),1),te=Math.pow(te,O)*255,M[H]=te}this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,t.dims[1],t.dims[2],t.dims[3],this.gl.RED,this.gl.UNSIGNED_BYTE,M)}else ht.debug("Modulation image dimensions do not match target")}else this.gl.uniform1i(c.uniforms.modulation,0);if(this.gl.uniformMatrix4fv(c.uniforms.mtx,!1,a),!this.back.dims)throw new Error("back.dims undefined");let g=0;t.intent_code===1002&&(g=this.opts.atlasOutline),this.gl.uniform4fv(c.uniforms.xyzaFrac,[1/this.back.dims[1],1/this.back.dims[2],1/this.back.dims[3],g]),ht.debug("back dims: ",this.back.dims);for(let C=0;C<this.back.dims[3];C++){const _=1/this.back.dims[3]*(C+.5);this.gl.uniform1f(c.uniforms.coordZ,_),this.gl.framebufferTextureLayer(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,s,0,C),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}if(this.gl.bindVertexArray(this.unusedVAO),this.gl.deleteTexture(l),this.gl.deleteTexture(v),this.gl.deleteTexture(u),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.deleteFramebuffer(o),e===0&&(this.volumeTexture=s,this.gradientTextureAmount>0?this.gradientGL(t):(this.gradientTexture!==null&&this.gl.deleteTexture(this.gradientTexture),this.gradientTexture=null)),!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl);const y=this.sliceScale(!0),x=y.vox,b=y.volScale;if(this.gl.uniform1f(this.renderShader.uniforms.overlays,this.overlays),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.gl.uniform1f(this.renderShader.uniforms.clipThick,this.opts.clipThick),this.gl.uniform3fv(this.renderShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.renderShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.gl.uniform1f(this.renderShader.uniforms.backOpacity,this.volumes[0].opacity),this.gl.uniform1f(this.renderShader.uniforms.renderOverlayBlend,this.opts.renderOverlayBlend),this.gl.uniform4fv(this.renderShader.uniforms.clipPlane,this.scene.clipPlane),this.gl.uniform3fv(this.renderShader.uniforms.texVox,x),this.gl.uniform3fv(this.renderShader.uniforms.volScale,b),!this.pickingImageShader)throw new Error("pickingImageShader undefined");this.pickingImageShader.use(this.gl),this.gl.uniform1f(this.pickingImageShader.uniforms.overlays,this.overlays.length),this.gl.uniform3fv(this.pickingImageShader.uniforms.texVox,x),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipHi,this.opts.clipVolumeHigh);let A=this.sliceMMShader;if(this.opts.isV1SliceShader&&(A=this.sliceV1Shader),!A)throw new Error("slice shader undefined");A.use(this.gl),this.gl.uniform1f(A.uniforms.overlays,this.overlays.length),this.gl.uniform1f(A.uniforms.drawOpacity,this.drawOpacity),d!==null&&(this.gl.deleteTexture(d),this.gl.activeTexture(U3),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture)),this.gl.uniform1i(A.uniforms.drawing,7),this.gl.activeTexture(ng),this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.updateInterpolation(e)}colormaps(){return Vr.colormaps()}addColormap(n,e){Vr.addColormap(n,e)}setColormap(n,e){const t=this.getVolumeIndexByID(n);this.volumes[t].colormap=e,this.updateGLVolume()}idx(n,e,t,i){return t*i[0]*i[1]+e*i[0]+n}check_previous_slice(n,e,t,i,r,s,a,o){const l=new Uint32Array(27);let c=0;if(!r)return 0;const u=n[this.idx(t,i,r,s)];if(a>=6){const d=this.idx(t,i,r-1,s);u===n[d]&&(l[c++]=e[d])}if(a>=18){if(t){const d=this.idx(t-1,i,r-1,s);u===n[d]&&(l[c++]=e[d])}if(i){const d=this.idx(t,i-1,r-1,s);u===n[d]&&(l[c++]=e[d])}if(t<s[0]-1){const d=this.idx(t+1,i,r-1,s);u===n[d]&&(l[c++]=e[d])}if(i<s[1]-1){const d=this.idx(t,i+1,r-1,s);u===n[d]&&(l[c++]=e[d])}}if(a===26){if(t&&i){const d=this.idx(t-1,i-1,r-1,s);u===n[d]&&(l[c++]=e[d])}if(t<s[0]-1&&i){const d=this.idx(t+1,i-1,r-1,s);u===n[d]&&(l[c++]=e[d])}if(t&&i<s[1]-1){const d=this.idx(t-1,i+1,r-1,s);u===n[d]&&(l[c++]=e[d])}if(t<s[0]-1&&i<s[1]-1){const d=this.idx(t+1,i+1,r-1,s);u===n[d]&&(l[c++]=e[d])}}return c?(this.fill_tratab(o,l,c),l[0]):0}do_initial_labelling(n,e,t){let i=1;const r=8192;let s=r,a=new Uint32Array(s).fill(0);const o=new Uint32Array(e[0]*e[1]*e[2]).fill(0),l=new Uint32Array(27);for(let c=0;c<e[2];c++)for(let u=0;u<e[1];u++)for(let d=0;d<e[0];d++){let f=0;const h=n[this.idx(d,u,c,e)];if(h!==0){if(l[0]=this.check_previous_slice(n,o,d,u,c,e,t,a),l[0]&&(f+=1),t>=6){if(d){const p=this.idx(d-1,u,c,e);h===n[p]&&(l[f++]=o[p])}if(u){const p=this.idx(d,u-1,c,e);h===n[p]&&(l[f++]=o[p])}}if(t>=18){if(u&&d){const p=this.idx(d-1,u-1,c,e);h===n[p]&&(l[f++]=o[p])}if(u&&d<e[0]-1){const p=this.idx(d+1,u-1,c,e);h===n[p]&&(l[f++]=o[p])}}if(f)o[this.idx(d,u,c,e)]=l[0],this.fill_tratab(a,l,f);else{if(o[this.idx(d,u,c,e)]=i,i>=s){s+=r;const p=new Uint32Array(s);p.set(a),a=p}a[i-1]=i,i++}}}for(let c=0;c<i-1;c++){let u=c;for(;a[u]!==u+1;)u=a[u]-1;a[c]=u+1}return[i-1,a,o]}fill_tratab(n,e,t){let i=0;const r=new Uint32Array(t+5).fill(0);let a=2147483647;for(let o=0;o<t;o++){let l=e[o];for(i=0;n[l-1]!==l;)if(l=n[l-1],i++,i>100){ht.info(`
Ooh no!!`);break}r[o]=l,a=Math.min(a,l)}for(let o=0;o<t;o++)n[r[o]-1]=a}translate_labels(n,e,t,i){const r=e[0]*e[1]*e[2];let s=0;const a=new Uint32Array(r).fill(0);for(let c=0;c<i;c++)s=Math.max(s,t[c]);const o=new Uint32Array(s).fill(0);let l=0;for(let c=0;c<r;c++)n[c]&&(o[t[n[c]-1]-1]||(l+=1,o[t[n[c]-1]-1]=l),a[c]=o[t[n[c]-1]-1]);return[l,a]}largest_original_cluster_labels(n,e,t){const i=n.length,r=new Uint32Array(e+1).fill(0),s=new Uint32Array(e+1).fill(0);for(let l=0;l<i;l++){const c=n[l],u=t[l];r[u]=c,s[u]++}let a=0;for(let l=0;l<e+1;l++){const c=r[l];a=Math.max(a,c);for(let u=0;u<e+1;u++)u!==l&&c===r[u]&&(s[l]<s[u]||s[l]===s[u]&&l<u)&&(r[l]=0)}const o=new Uint32Array(i).fill(0);for(let l=0;l<i;l++)o[l]=r[t[l]];return[a,o]}bwlabel(n,e,t=26,i=!1,r=!1){const s=Date.now(),a=e[0]*e[1]*e[2],o=new Uint32Array(a).fill(0);if(![6,18,26].includes(t))return ht.info("bwlabel: conn must be 6, 18 or 26."),[0,o];if(e[0]<2||e[1]<2||e[2]<1)return ht.info("bwlabel: img must be 2 or 3-dimensional"),[0,o];if(i)for(let h=0;h<a;h++)n[h]!==0&&(o[h]=1);else o.set(n);let[l,c,u]=this.do_initial_labelling(o,e,t);c===void 0&&(c=new Uint32Array);const[d,f]=this.translate_labels(u,e,c,l);if(ht.info(t+" neighbor clustering into "+d+" regions in "+(Date.now()-s)+"ms"),r){const[h,p]=this.largest_original_cluster_labels(o,d,f);return[h,p]}return[d,f]}async createConnectedLabelImage(n,e=26,t=!1,i=!1){var u,d;const r=this.getVolumeIndexByID(n),s=Uint32Array.from(((u=this.volumes[r].dims)==null?void 0:u.slice(1,4))??[]),a=Uint32Array.from(((d=this.volumes[r].img)==null?void 0:d.slice())??[]),[o,l]=this.bwlabel(a,s,e,t,i),c=this.volumes[r].clone();c.opacity=.5,c.colormap="random";for(let f=0;f<c.img.length;f++)c.img[f]=l[f];return c.cal_min=0,c.cal_max=o,c}async scalecropUint8(n,e=0,t=255,i,r){const s=n.length,a=new Uint8Array(s);for(let o=0;o<s;o++){let l=n[o];l=e+r*(l-i),l=Math.max(l,e),l=Math.min(l,t),a[o]=l}return a}async scalecropFloat32(n,e=0,t=1,i,r){const s=n.length,a=new Float32Array(s);for(let o=0;o<s;o++){let l=n[o];l=e+r*(l-i),l=Math.max(l,e),l=Math.min(l,t),a[o]=l}return a}getScale(n,e=0,t=255,i=0,r=.999){let s=n.global_min,a=n.global_max;if(n.hdr.datatypeCode===2)return[s,1];if((!isFinite(i)||!isFinite(r))&&isFinite(n.cal_min)&&isFinite(n.cal_max)&&n.cal_max>n.cal_min){s=n.cal_min,a=n.cal_max;const y=(t-e)/(a-s);return ht.info(" Robust Rescale:  min: "+s+"  max: "+a+" scale: "+y),console.log("Robust Rescale:  min: "+s+"  max: "+a+" scale: "+y),[s,y]}const o=n.img,l=n.hdr.dims[1]*n.hdr.dims[2]*n.hdr.dims[3];if(n.hdr.scl_slope!==1||n.hdr.scl_inter!==0){const y=n.img,x=new Float32Array(n.img.length);for(let b=0;b<l;b++)x[b]=y[b]*n.hdr.scl_slope+n.hdr.scl_inter}if(s<0&&ht.warn("WARNING: Input image has value(s) below 0.0 !"),ht.info(" Input:    min: "+s+"  max: "+a),i===0&&r===1)return[s,1];let c=0;for(let y=0;y<l;y++)Math.abs(o[y])>=1e-15&&c++;const u=1e3,d=(a-s)/u,f=new Array(u).fill(0);for(let y=0;y<l;y++){const x=o[y];let b=Math.floor((x-s)/d);b=Math.min(b,u-1),f[b]++}const h=new Array(u).fill(0);h[0]=f[0];for(let y=1;y<u;y++)h[y]=h[y-1]+f[y];let p=Math.floor(i*l),m=0;for(;m<u&&!(h[m]>=p);)m++;const v=s;for(s=m*d+v,p=l-Math.floor((1-r)*c),m=0;m<u-1&&!(h[m+1]>=p);)m++;a=m*d+v;let g=1;return s!==a&&(g=(t-e)/(a-s)),ht.info(" Rescale:  min: "+s+"  max: "+a+" scale: "+g),[s,g]}conformVox2Vox(n,e,t=256,i=1,r=!1){const s=e.flat(),a=pl(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15]),o=Jr(n[1]/2,n[2]/2,n[3]/2,1),l=uf(),c=Zi();ml(c,a),Sa(l,o,c);const u=bn(l[0],l[1],l[2]),d=bn(i,i,i);let f=pl(-1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);r&&(f=pl(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),ml(f,f);const h=Jr(t,t,t,1),p=Zi();nX(p,f,d);const m=Jr(h[0],h[1],h[2],1);Sa(m,m,p),uct(m,m,.5);const v=Zr();os(v,u,bn(m[0],m[1],m[2]));const g=Zi();ml(g,p),g[3]=v[0],g[7]=v[1],g[11]=v[2];const y=Zi();zo(y,g);const x=Zi();goe(x,a,y);const b=Zi();return zo(b,x),[g,x,b]}async createNiftiArray(n=[256,256,256],e=[1,1,1],t=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],i=2,r=new Uint8Array){return await ro.createNiftiArray(n,e,t,i,r)}async niftiArray2NVImage(n=new Uint8Array){return await ro.loadFromUrl({url:n})}async loadFromUrl(n){return await ro.loadFromUrl({url:n})}async conform(n,e=!1,t=!0,i=!1,r=!1){const o=this.conformVox2Vox(n.hdr.dims,n.hdr.affine.flat(),256,1,e),l=o[0],c=o[2],u=256*256*256,d=new Float32Array(u),f=new Float32Array(n.img),h=n.hdr.dims[1]*n.hdr.dims[2]*n.hdr.dims[3];if(n.hdr.scl_slope!==1||n.hdr.scl_inter!==0)for(let T=0;T<h;T++)f[T]=f[T]*n.hdr.scl_slope+n.hdr.scl_inter;const p=n.hdr.dims[1],m=n.hdr.dims[2],v=n.hdr.dims[3],g=p*m;let y=-1;function x(T,E,I){return T+E*p+I*g}const b=c[0],A=c[4],S=c[8];if(t)for(let T=0;T<256;T++)for(let E=0;E<256;E++){const I=E*c[1]+T*c[2]+c[3],L=E*c[5]+T*c[6]+c[7],F=E*c[9]+T*c[10]+c[11];for(let B=0;B<256;B++){const P=B*b+I,z=B*A+L,O=B*S+F,N=Math.floor(P),H=Math.floor(z),q=Math.floor(O);if(y++,N<0||H<0||q<0)continue;const te=Math.ceil(P),Q=Math.ceil(z),ee=Math.ceil(O);if(te>=p||Q>=m||ee>=v)continue;const de=P-N,J=z-H,ue=O-q,Te=1-de,De=1-J,Le=1-ue,Ne=x(N,H,q);let Y=0;Y+=f[Ne]*Te*De*Le,Y+=f[Ne+g]*Te*De*ue,Y+=f[Ne+p]*Te*J*Le,Y+=f[Ne+p+g]*Te*J*ue,Y+=f[Ne+1]*de*De*Le,Y+=f[Ne+1+g]*de*De*ue,Y+=f[Ne+1+p]*de*J*Le,Y+=f[Ne+1+p+g]*de*J*ue,d[y]=Y}}else for(let T=0;T<256;T++)for(let E=0;E<256;E++){const I=E*c[1]+T*c[2]+c[3],L=E*c[5]+T*c[6]+c[7],F=E*c[9]+T*c[10]+c[11];for(let B=0;B<256;B++){const P=Math.round(B*b+I),z=Math.round(B*A+L),O=Math.round(B*S+F);y++,!(P<0||z<0||O<0)&&(P>=p||z>=m||O>=v||(d[y]=f[x(P,z,O)]))}}let C=0;r&&(C=NaN);let _=new Uint8Array;if(i){const T=await this.getScale(n,0,1,C),E=await this.scalecropFloat32(d,0,1,T[0],T[1]);_=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(l),16,new Uint8Array(E.buffer))}else{const T=await this.getScale(n,0,255,C),E=await this.scalecropUint8(d,0,255,T[0],T[1]);_=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(l),2,E)}return await this.niftiArray2NVImage(_)}setRenderDrawAmbientOcclusion(n){if(!this.renderShader)throw new Error("renderShader undefined");this.renderDrawAmbientOcclusion=n,this.renderShader.use(this.gl),this.gl.uniform1fv(this.renderShader.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.drawScene()}setColorMap(n,e){this.setColormap(n,e)}setColormapNegative(n,e){const t=this.getVolumeIndexByID(n);this.volumes[t].colormapNegative=e,this.updateGLVolume()}setModulationImage(n,e,t=0){const i=this.getVolumeIndexByID(n);let r=null;e.length>0&&(r=this.getVolumeIndexByID(e)),this.volumes[i].modulationImage=r,this.volumes[i].modulateAlpha=t,this.updateGLVolume()}setGamma(n=1){this.scene.gamma=n,Vr.gamma=n,this.updateGLVolume()}async loadDeferred4DVolumes(n){const e=this.getVolumeIndexByID(n),t=this.volumes[e];if(t.nTotalFrame4D<=t.nFrame4D)return;let i;t.fileObject?i=await ro.loadFromFile({file:t.fileObject}):i=await ro.loadFromUrl({url:t.url}),i&&(t.img=i.img.slice(),t.nTotalFrame4D=i.nTotalFrame4D,t.nFrame4D=i.nFrame4D,this.updateGLVolume())}setFrame4D(n,e){const t=this.getVolumeIndexByID(n),i=this.volumes[t];e>i.nFrame4D-1&&(e=i.nFrame4D-1),e<0&&(e=0),e!==i.frame4D&&(i.frame4D=e,this.updateGLVolume(),this.onFrameChange(i,e),this.createOnLocationChange())}getFrame4D(n){const e=this.getVolumeIndexByID(n);return this.volumes[e].frame4D}colormapFromKey(n){return Vr.colormapFromKey(n)}colormap(n="",e=!1){return Vr.colormap(n,e)}createColormapTexture(n=null,e=0,t=256){return n!==null&&this.gl.deleteTexture(n),e<1||t<1?null:(n=this.gl.createTexture(),this.gl.activeTexture(U3),this.gl.bindTexture(this.gl.TEXTURE_2D,n),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.RGBA8,t,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),n)}addColormapList(n="",e=NaN,t=NaN,i=!1,r=!1,s=!0,a=!1){n.length<1&&(s=!1),this.colormapLists.push({name:n,min:e,max:t,isColorbarFromZero:i,negative:r,visible:s,invert:a})}refreshColormaps(){if(this.colormapLists=[],this.volumes.length<1&&this.meshes.length<1)return;const n=this.volumes.length;if(n>0)for(let s=0;s<n;s++){const a=this.volumes[s],o=iD(a.cal_min,a.cal_max,a.cal_minNeg,a.cal_maxNeg),l=a.colormapType!==0;this.addColormapList(a.colormapNegative,o[0],o[1],l,!0,a.colorbarVisible,a.colormapInvert),this.addColormapList(a.colormap,a.cal_min,a.cal_max,l,!1,a.colorbarVisible,a.colormapInvert)}const e=this.meshes.length;if(e>0)for(let s=0;s<e;s++){const a=this.meshes[s];if(!a.colorbarVisible)continue;const o=a.layers.length;if("edgeColormap"in a&&"edges"in a&&a.edges!==void 0){const l=iD(a.edgeMin,a.edgeMax,NaN,NaN);this.addColormapList(a.edgeColormapNegative,l[0],l[1],!1,!0,!0,a.colormapInvert),this.addColormapList(a.edgeColormap,a.edgeMin,a.edgeMax,!1,!1,!0,a.colormapInvert)}if(!(o<1))for(let l=0;l<o;l++){const c=this.meshes[s].layers[l];if(!c.colorbarVisible||c.colormap.length<1)continue;const u=c.colormapType!==0,d=iD(c.cal_min,c.cal_max,c.cal_minNeg,c.cal_maxNeg);this.addColormapList(c.colormapNegative,d[0],d[1],u,!0,!0,c.colormapInvert),this.addColormapList(c.colormap,c.cal_min,c.cal_max,u,!1,!0,c.colormapInvert)}}const t=this.colormapLists.length;if(t<1)return;this.colormapTexture=this.createColormapTexture(this.colormapTexture,t+1);let i=new Uint8ClampedArray;function r(s){const a=new Uint8ClampedArray(i.length+s.length);a.set(i),a.set(s,i.length),i=a}for(let s=0;s<t;s++)r(Array.from(this.colormap(this.colormapLists[s].name,this.colormapLists[s].invert)));return r(Array.from(this.drawLut.lut)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,256,t+1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i),this}sliceScale(n=!1){var s;let e=this.screenFieldOfViewMM(0);n&&(e=this.screenFieldOfViewVox(0));const t=Math.max(e[0],Math.max(e[1],e[2])),i=[e[0]/t,e[1]/t,e[2]/t];if(!((s=this.back)!=null&&s.dims))throw new Error("back.dims undefined");const r=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];return{volScale:i,vox:r,longestAxis:t,dimsMM:e}}tileIndex(n,e){for(let t=0;t<this.screenSlices.length;t++){const i=this.screenSlices[t].leftTopWidthHeight;if(n>i[0]&&e>i[1]&&n<i[0]+i[2]&&e<i[1]+i[3])return t}return-1}inRenderTile(n,e){const t=this.tileIndex(n,e);return t>=0&&this.screenSlices[t].axCorSag===4?t:-1}sliceScroll3D(n=0){if(n!==0){if(this.volumes.length>0&&this.scene.clipPlaneDepthAziElev[0]<1.8){const e=this.scene.clipPlaneDepthAziElev.slice();return n>0&&(e[0]=Math.min(1.5,e[0]+.025)),n<0&&(e[0]=Math.max(-1.5,e[0]-.025)),e[0]!==this.scene.clipPlaneDepthAziElev[0]?(this.scene.clipPlaneDepthAziElev=e,this.setClipPlane(this.scene.clipPlaneDepthAziElev)):void 0}n>0&&(this.scene.volScaleMultiplier=Math.min(2,this.scene.volScaleMultiplier*1.1)),n<0&&(this.scene.volScaleMultiplier=Math.max(.5,this.scene.volScaleMultiplier*.9)),this.drawScene()}}deleteThumbnail(){this.bmpTexture&&(this.gl.deleteTexture(this.bmpTexture),this.bmpTexture=null,this.thumbnailVisible=!1)}inGraphTile(n,e){if(this.graph.opacity<=0||this.volumes.length<1||this.volumes[0].nFrame4D<1||!this.graph.plotLTWH||this.graph.plotLTWH[2]<1||this.graph.plotLTWH[3]<1)return!1;const t=[(n-this.graph.LTWH[0])/this.graph.LTWH[2],(e-this.graph.LTWH[1])/this.graph.LTWH[3]];return t[0]>0&&t[1]>0&&t[0]<=1&&t[1]<=1}updateBitmapFromClickToSegment(){if(this.clickToSegmentGrowingBitmap===null||this.drawBitmap===null||this.clickToSegmentGrowingBitmap.length!==this.drawBitmap.length)return;const n=this.drawBitmap.length;for(let e=0;e<n;e++)this.drawBitmap[e]=this.clickToSegmentGrowingBitmap[e]}sumBitmap(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}mouseClick(n,e,t=0,i=!0){if(n*=this.uiData.dpr,e*=this.uiData.dpr,this.canvas.focus(),this.thumbnailVisible){this.thumbnailVisible=!1,Promise.all([this.loadVolumes(this.deferredVolumes),this.loadMeshes(this.deferredMeshes)]).catch(r=>{throw r});return}if(this.inGraphTile(n,e)){if(!this.graph.plotLTWH)throw new Error("plotLTWH undefined");const r=[(n-this.graph.plotLTWH[0])/this.graph.plotLTWH[2],(e-this.graph.plotLTWH[1])/this.graph.plotLTWH[3]];if(r[0]>0&&r[1]>0&&r[0]<=1&&r[1]<=1){const s=Math.round(r[0]*(this.volumes[0].nFrame4D-1));this.setFrame4D(this.volumes[0].id,s);return}r[0]>.5&&r[1]>1&&this.loadDeferred4DVolumes(this.volumes[0].id).catch(s=>{throw s});return}if(this.inRenderTile(n,e)>=0){this.sliceScroll3D(t),this.drawScene();return}if(!(this.screenSlices.length<1||this.gl.canvas.height<1||this.gl.canvas.width<1))for(let r=0;r<this.screenSlices.length;r++){const s=this.screenSlices[r].axCorSag;if(this.drawPenAxCorSag>=0&&this.drawPenAxCorSag!==s||s>2)continue;let a=this.screenXY2TextureFrac(n,e,r,!1);if(!(a[0]<0)){if(!i){this.scene.crosshairPos[2-s]=t,this.drawScene();return}if(t!==0){let o=1;t<0&&(o=-1);const l=[0,0,0];l[2-s]=o,this.moveCrosshairInVox(l[0],l[1],l[2]),this.drawScene(),this.createOnLocationChange(s);return}if(this.opts.isForceMouseClickToVoxelCenters?this.scene.crosshairPos=Hb(this.vox2frac(this.frac2vox(a))):this.scene.crosshairPos=Hb(a),this.opts.drawingEnabled){let o=this.frac2vox(this.scene.crosshairPos);if(this.opts.clickToSegment){a=this.screenXY2TextureFrac(this.clickToSegmentXY[0],this.clickToSegmentXY[1],r,!1),o=this.frac2vox(a);let l=0,c=this.opts.clickToSegmentPercent+l;if(this.uiData.mousedown){const h=(this.clickToSegmentXY[0]-n)/this.gl.canvas.width,p=(this.clickToSegmentXY[1]-e)/this.gl.canvas.height;l=Math.max(Math.abs(h),Math.abs(p)),c=this.opts.clickToSegmentPercent+l}let u=this.back.getValue(o[0],o[1],o[2]);this.opts.clickToSegmentAutoIntensity&&(c!==0&&(u===0&&(u=.01),this.opts.clickToSegmentIntensityMax=u*(1+c),this.opts.clickToSegmentIntensityMin=u*(1-c)),u>(this.back.cal_min+this.back.cal_max)*.5?this.opts.clickToSegmentBright=!0:this.opts.clickToSegmentBright=!1);const d=this.opts.clickToSegmentBright?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.drawPenAxCorSag=s,this.drawPenAxCorSag===0){const h=[this.back.pixDimsRAS[0],this.back.pixDimsRAS[1]],p=Math.min(...h);this.opts.penSize=Math.ceil(this.opts.clickToSegmentRadius/p)}else if(this.drawPenAxCorSag===1){const h=[this.back.pixDimsRAS[0],this.back.pixDimsRAS[2]],p=Math.min(...h);this.opts.penSize=Math.ceil(this.opts.clickToSegmentRadius/p)}else if(this.drawPenAxCorSag===2){const h=[this.back.pixDimsRAS[1],this.back.pixDimsRAS[2]],p=Math.min(...h);this.opts.penSize=Math.ceil(this.opts.clickToSegmentRadius/p)}if(this.drawPt(o[0],o[1],o[2],this.opts.penValue),l!==0?(this.clickToSegmentIsGrowing=!0,this.clickToSegmentGrowingBitmap=this.drawBitmap.slice()):this.clickToSegmentIsGrowing=!1,this.drawFloodFill([o[0],o[1],o[2]],0,d,this.opts.clickToSegmentIntensityMin,this.opts.clickToSegmentIntensityMax,this.opts.floodFillNeighbors,this.opts.clickToSegmentMaxDistanceMM,this.opts.clickToSegmentIs2D),this.drawScene(),this.createOnLocationChange(s),this.clickToSegmentIsGrowing)return;const f=this.getDescriptives({layer:0,masks:[],drawingIsMask:!0});this.onClickToSegment({mL:f.volumeML,mm3:f.volumeMM3});return}if(!isFinite(this.opts.penValue)||this.opts.penValue<0||Object.is(this.opts.penValue,-0)){isFinite(this.opts.penValue)?this.drawFloodFill(o,Math.abs(this.opts.penValue),this.opts.penValue,NaN,NaN,this.opts.floodFillNeighbors):this.drawFloodFill(o,0,this.opts.penValue,NaN,NaN,this.opts.floodFillNeighbors);return}if(isNaN(this.drawPenLocation[0]))this.drawPenAxCorSag=s,this.drawPenFillPts=[],this.drawPt(...o,this.opts.penValue);else{if(o[0]===this.drawPenLocation[0]&&o[1]===this.drawPenLocation[1]&&o[2]===this.drawPenLocation[2])return;this.drawPenLine(o,this.drawPenLocation,this.opts.penValue)}this.drawPenLocation=o,this.opts.isFilledPen&&this.drawPenFillPts.push(o),this.refreshDrawing(!1)}this.drawScene(),this.createOnLocationChange(s);return}}}drawRuler(){let n=[],e=[];for(let u=0;u<this.screenSlices.length;u++)if(this.screenSlices[u].axCorSag!==4&&this.screenSlices[u].fovMM.length>1){e=this.screenSlices[u].leftTopWidthHeight,n=this.screenSlices[u].fovMM;break}if(e.length<4)return;const i=100/n[0]*e[2],r=Math.max(Math.round(i*.1),2),s=Math.floor(e[0]+.5*e[2]-.5*i),a=Number(this.opts.rulerWidth),o=Math.floor(e[1]+e[3]-r)+.5*a,l=[s,o,s+i,o];let c=[0,0,0,1];this.opts.rulerColor[0]+this.opts.rulerColor[1]+this.opts.rulerColor[2]<.8&&(c=[1,1,1,1]),this.drawRuler10cm(l,c,a+1),this.drawRuler10cm(l,this.opts.rulerColor,a)}drawRuler10cm(n,e,t=1){if(!this.lineShader)throw new Error("lineShader undefined");this.gl.bindVertexArray(this.genericVAO),this.lineShader.use(this.gl),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,e),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,n),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);const i=-.1*(n[0]-n[2]),r=n[1]-Math.floor(.5*this.opts.rulerWidth),s=Math.floor(r-.35*i),a=Math.floor(r-.7*i);for(let o=0;o<11;o++){let l=n[0]+o*i;l=Math.max(l,n[0]+.5*t),l=Math.min(l,n[2]-.5*t);const c=[l,r,l,s];o%5===0&&(c[3]=a),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,c),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}this.gl.bindVertexArray(this.unusedVAO)}screenXY2mm(n,e,t=-1){let i;for(let r=0;r<this.screenSlices.length;r++){let s=r;if(t>=0&&(s=t),this.screenSlices[s].axCorSag>2)continue;const o=this.screenSlices[s].leftTopWidthHeight;if(n<o[0]||e<o[1]||n>o[0]+o[2]||e>o[1]+o[3]||(i=this.screenXY2TextureFrac(n,e,s,!1),i[0]<0))continue;const l=this.frac2mm(i);return Jr(l[0],l[1],l[2],s)}return Jr(NaN,NaN,NaN,NaN)}dragForPanZoom(n){const e=this.screenXY2mm(n[2],n[3]);if(isNaN(e[0]))return;const t=this.screenXY2mm(n[0],n[1],e[3]);if(isNaN(t[0])||isNaN(e[0])||isNaN(e[3]))return;const i=uf(),r=this.uiData.pan2DxyzmmAtMouseDown[3];dct(i,e,t),this.scene.pan2Dxyzmm[0]=this.uiData.pan2DxyzmmAtMouseDown[0]+r*i[0],this.scene.pan2Dxyzmm[1]=this.uiData.pan2DxyzmmAtMouseDown[1]+r*i[1],this.scene.pan2Dxyzmm[2]=this.uiData.pan2DxyzmmAtMouseDown[2]+r*i[2],this.canvas.focus()}dragForCenterButton(n){this.dragForPanZoom(n)}dragForSlicer3D(n){let e=this.uiData.pan2DxyzmmAtMouseDown[3];const t=n[3]-n[1];e+=t*.01,e=Math.max(e,.1),e=Math.min(e,10);const r=this.scene.pan2Dxyzmm[3]-e;this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=e),this.scene.pan2Dxyzmm[3]=e;const s=this.frac2mm(this.scene.crosshairPos);this.scene.pan2Dxyzmm[0]+=r*s[0],this.scene.pan2Dxyzmm[1]+=r*s[1],this.scene.pan2Dxyzmm[2]+=r*s[2]}drawMeasurementTool(n){function e(l,c,u,d,f){const h=l-u,p=c-d;if(h===0&&p===0)return{origin:[u+f,d],terminus:[u+f,d]};const m=Math.sqrt(h*h+p*p),v=f*h/m,g=f*p/m;return{origin:[l+v,c+g],terminus:[u-v,d-g]}}const t=this.gl;if(t.bindVertexArray(this.genericVAO),t.depthFunc(t.ALWAYS),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),t.uniform4fv(this.lineShader.uniforms.lineColor,this.opts.rulerColor),t.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[t.canvas.width,t.canvas.height]),t.uniform1f(this.lineShader.uniforms.thickness,this.opts.rulerWidth),t.uniform4fv(this.lineShader.uniforms.startXYendXY,n),t.drawArrays(t.TRIANGLE_STRIP,0,4);const i=this.opts.measureLineColor;i[3]=1,t.uniform4fv(this.lineShader.uniforms.lineColor,i);const r=this.opts.rulerWidth;t.uniform1f(this.lineShader.uniforms.thickness,r*2);let s=[n[0],n[1]-r,n[0],n[1]+r];t.uniform4fv(this.lineShader.uniforms.startXYendXY,s),t.drawArrays(t.TRIANGLE_STRIP,0,4),s=[n[2],n[3]-r,n[2],n[3]+r],t.uniform4fv(this.lineShader.uniforms.startXYendXY,s),t.drawArrays(t.TRIANGLE_STRIP,0,4);let a=this.canvasPos2frac([n[0],n[1]]),o=this.canvasPos2frac([n[2],n[3]]);if(a[0]>=0&&o[0]>=0){const l=this.frac2mm(a);a=bn(l[0],l[1],l[2]);const c=this.frac2mm(o);o=bn(c[0],c[1],c[2]);const u=Zr();rX(u,a,o);const d=aA(u);let f=2;d>9&&(f=1),d>99&&(f=0);let h=d.toFixed(f);this.opts.showMeasureUnits&&(h=`${h} mm`);let p=n;const[m,v,g,y]=n,{origin:x,terminus:b}=e(m,v,g,y,30);switch(this.opts.measureTextJustify){case"start":p=[...x,...x.map(A=>A+1)];break;case"end":p=p=[...b,...b.map(A=>A+1)];break;default:p=n;break}this.drawTextBetween(p,h,this.opts.measureTextHeight/this.opts.textHeight,this.opts.measureTextColor)}t.bindVertexArray(this.unusedVAO)}drawRect(n,e=[1,0,0,-1]){if(e[3]<0&&(e=this.opts.crosshairColor),!this.rectShader)throw new Error("rectShader undefined");this.opts.selectionBoxIsOutline?(this.drawCircle(n,e,.1),this.rectOutlineShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform1f(this.rectOutlineShader.uniforms.thickness,this.opts.selectionBoxLineThickness),this.gl.uniform4fv(this.rectOutlineShader.uniforms.lineColor,e),this.gl.uniform2fv(this.rectOutlineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectOutlineShader.uniforms.leftTopWidthHeight,n[0],n[1],n[2],n[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)):(this.rectShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.rectShader.uniforms.lineColor,e),this.gl.uniform2fv(this.rectShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectShader.uniforms.leftTopWidthHeight,n[0],n[1],n[2],n[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO))}drawCircle(n,e=this.opts.fontColor,t=1){if(!this.circleShader)throw new Error("circleShader undefined");this.circleShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,e),this.gl.uniform2fv(this.circleShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.circleShader.uniforms.leftTopWidthHeight,n[0],n[1],n[2],n[3]),this.gl.uniform1f(this.circleShader.uniforms.fillPercent,t),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,e),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawSelectionBox(n){if(this.opts.dragMode===6){this.drawCircle(n,this.opts.selectionBoxColor,.1);return}this.drawRect(n,this.opts.selectionBoxColor)}effectiveCanvasHeight(){return this.gl.canvas.height-this.colorbarHeight}effectiveCanvasWidth(){return this.gl.canvas.width-this.getLegendPanelWidth()}getAllLabels(){const i=this.meshes.filter(s=>s.type==="connectome").flatMap(s=>s.nodes).map(s=>s.label).filter(s=>s!==void 0);return[...this.document.labels,...i]}getConnectomeLabels(){const i=this.meshes.filter(a=>a.type==="connectome").flatMap(a=>a.nodes).map(a=>a.label).filter(a=>a!==void 0),r=this.document.labels.filter(a=>a.anchor==null||a.anchor===0),s=new Set(i);for(const a of r)s.add(a);return Array.from(s)}getBulletMarginWidth(){let n=0;const e=this.getConnectomeLabels();if(e.length===0)return 0;const t=e.length===1?e[0].style.bulletScale:e.reduce((s,a)=>s.style.bulletScale>a.style.bulletScale?s:a).style.bulletScale,i=e.length===1?e[0]:e.reduce((s,a)=>{const o=this.opts.textHeight*this.gl.canvas.height*s.style.textScale,l=this.opts.textHeight*this.gl.canvas.height*a.style.textScale;return this.textHeight(o,s.text)>this.textHeight(l,a.text)?s:a}),r=this.opts.textHeight*this.gl.canvas.height*i.style.textScale;return n=this.textHeight(r,i.text)*t,n+=r,n}getLegendPanelWidth(){const n=this.getConnectomeLabels();if(!this.opts.showLegend||n.length===0)return 0;const t=this.opts.textHeight*this.gl.canvas.height*1;let i=0;const r=n.reduce((l,c)=>{const u=this.opts.textHeight*this.gl.canvas.height*l.style.textScale,d=this.opts.textHeight*this.gl.canvas.height*c.style.textScale;return this.textWidth(u,l.text)>this.textWidth(d,c.text)?l:c}),s=this.opts.textHeight*this.gl.canvas.height*r.style.textScale,a=this.textWidth(s,r.text),o=this.getBulletMarginWidth();return a&&(i=o+a,i+=t*2),i>=this.gl.canvas.width?0:i}getLegendPanelHeight(){const n=this.getConnectomeLabels();let e=0;const i=this.opts.textHeight*this.gl.canvas.height*1;for(const r of n){const s=this.opts.textHeight*this.gl.canvas.height*r.style.textScale,a=this.textHeight(s,r.text);e+=a}return e&&(e+=i/2*(n.length+1)),e}reserveColorbarPanel(){let n=Math.max(this.opts.textHeight,.01);n=n*Math.min(this.gl.canvas.height,this.gl.canvas.width);const e=3*n,t=[0,this.gl.canvas.height-e,this.gl.canvas.width,e];return this.colorbarHeight=t[3]+1,t}drawColorbarCore(n=0,e=[0,0,0,0],t=!1,i=0,r=1,s){if(e[2]<=0||e[3]<=0)return;let a=Math.max(this.opts.textHeight,.01);a=a*Math.min(this.gl.canvas.height,this.gl.canvas.width);let o=a;const l=3*a;let c=a;if(e[3]<l){if(e[3]<3)return;o=1,c=e[3]-2}this.gl.disable(this.gl.DEPTH_TEST),this.colorbarHeight=e[3]+1;const u=[e[0]+o,e[1],e[2]-2*o,c],d=[u[0]-1,u[1]-1,u[2]+2,u[3]+2];if(this.drawRect(d,this.opts.crosshairColor),!this.colorbarShader)throw new Error("colorbarShader undefined");this.colorbarShader.use(this.gl),this.gl.activeTexture(U3),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);const f=n;if(this.gl.uniform1f(this.colorbarShader.uniforms.layer,f),this.gl.uniform2fv(this.colorbarShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.disable(this.gl.CULL_FACE),t){const S=[u[0]+u[2],u[1],-u[2],u[3]];this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,S)}else this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,u);this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);let h=0;if(s&&r<0&&t?(h=r,r=0):s&&i>0&&(h=i,i=0),i===r||a<1)return;const p=Math.abs(r-i);let[m,v]=CX(i,r);v<i&&(v+=m);function g(S){return S.toFixed(6).replace(/\.?0*$/,"")}let y=v;const x=[0,u[1]+u[3]-a*.5,2,a*.75],b=x[1]+x[3],A=1;for(;y<=r;){x[0]=u[0]+(y-i)/p*u[2],this.drawRect(x);const S=g(A*y);this.drawTextBelow([x[0],b],S),y+=m}if(h!==0){const S=[u[0]+(h-i)/p*u[2],u[1]-u[3]*.25,2,u[3]*1.5];this.drawRect(S)}}drawColorbar(){const n=this.colormapLists,e=n.length;if(e<1)return;let t=0;for(let o=0;o<e;o++)n[o].visible&&t++;if(t<1)return;let i=this.reserveColorbarPanel(),r=Math.max(this.opts.textHeight,.01);r=r*Math.min(this.gl.canvas.height,this.gl.canvas.width);const s=3*r;let a=i[2]/t;(i[2]<=0||i[3]<=0)&&(a=this.gl.canvas.width/t,i=[0,this.gl.canvas.height-s,a,s]),i[2]=a;for(let o=0;o<e;o++)n[o].visible&&(this.drawColorbarCore(o,i,n[o].negative,n[o].min,n[o].max,n[o].isColorbarFromZero),i[0]+=a)}textWidth(n,e){if(!e)return 0;let t=0;const i=new TextEncoder().encode(e);for(let r=0;r<e.length;r++)t+=n*this.fontMets.mets[i[r]].xadv;return t}textHeight(n,e){if(!e)return 0;const t=new Set(Array.from(e)),i=new TextEncoder().encode(Array.from(t).join("")),s=Object.values(this.fontMets.mets).filter((a,o)=>i.includes(o)).reduce((a,o)=>a.lbwh[3]>o.lbwh[3]?a:o).lbwh[3];return n*s}drawChar(n,e,t){if(!this.fontShader)throw new Error("fontShader undefined");const i=this.fontMets.mets[t],r=n[0]+e*i.lbwh[0],s=-(e*i.lbwh[1]),a=e*i.lbwh[2],o=e*i.lbwh[3],l=n[1]+(s-o)+e;return this.gl.uniform4f(this.fontShader.uniforms.leftTopWidthHeight,r,l,a,o),this.gl.uniform4fv(this.fontShader.uniforms.uvLeftTopWidthHeight,i.uv_lbwh),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),e*i.xadv}drawLoadingText(n){if(n){if(!this.canvas)throw new Error("canvas undefined");this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.drawTextBelow([this.canvas.width/2,this.canvas.height/2],n,3)}}drawText(n,e,t=1,i=null){if(this.opts.textHeight<=0)return;if(!this.fontShader)throw new Error("fontShader undefined");this.fontShader.use(this.gl);const r=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*t;this.gl.enable(this.gl.BLEND),this.gl.uniform2f(this.fontShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height),i===null&&(i=this.opts.fontColor),this.gl.uniform4fv(this.fontShader.uniforms.fontColor,i);let s=r/this.fontMets.size*this.fontMets.distanceRange;s=Math.max(s,1),this.gl.uniform1f(this.fontShader.uniforms.screenPxRange,s);const a=new TextEncoder().encode(e);this.gl.bindVertexArray(this.genericVAO);for(let o=0;o<e.length;o++)n[0]+=this.drawChar(n,r,a[o]);this.gl.bindVertexArray(this.unusedVAO)}drawTextRight(n,e,t=1,i=null){this.opts.textHeight<=0||(n[1]-=.5*this.opts.textHeight*this.gl.canvas.height,this.drawText(n,e,t,i))}drawTextLeft(n,e,t=1,i=null){if(this.opts.textHeight<=0)return;const r=this.opts.textHeight*this.gl.canvas.height*t;n[0]-=this.textWidth(r,e),n[1]-=.5*r,this.drawText(n,e,t,i)}drawTextRightBelow(n,e,t=1,i=null){this.opts.textHeight<=0||this.drawText(n,e,t,i)}drawTextBetween(n,e,t=1,i=null){if(this.opts.textHeight<=0)return;const r=[(n[0]+n[2])*.5,(n[1]+n[3])*.5],s=this.opts.textHeight*this.gl.canvas.height*t,a=this.textWidth(s,e);r[0]-=.5*a,r[1]-=.5*s;const o=[r[0]-1,r[1]-1,a+2,s+2];let l=i;l===null&&(l=this.opts.crosshairColor),l&&l[0]+l[1]+l[2]>.8?l=[0,0,0,.5]:l=[1,1,1,.5],this.drawRect(o,l),this.drawText(r,e,t,i)}drawTextBelow(n,e,t=1,i=null){if(this.opts.textHeight<=0)return;if(!this.canvas)throw new Error("canvas undefined");let r=this.opts.textHeight*this.gl.canvas.height*t,s=this.textWidth(r,e);s>this.canvas.width&&(t*=(this.canvas.width-2)/s,r=this.opts.textHeight*this.gl.canvas.height*t,s=this.textWidth(r,e)),n[0]-=.5*this.textWidth(r,e),n[0]=Math.max(n[0],1),n[0]=Math.min(n[0],this.canvas.width-s-1),this.drawText(n,e,t,i)}updateInterpolation(n,e=!1){let t=this.gl.LINEAR;!e&&this.opts.isNearestInterpolation&&(t=this.gl.NEAREST),n===0?this.gl.activeTexture(B2):this.gl.activeTexture(sD),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,t),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,t)}setAtlasOutline(n){this.opts.atlasOutline=n,this.updateGLVolume(),this.drawScene()}setInterpolation(n){this.opts.isNearestInterpolation=n;const e=this.volumes.length;if(!(e<1)){for(let t=0;t<e;t++)this.updateInterpolation(t);this.drawScene()}}calculateMvpMatrix2D(n,e,t,i=1/0,r=0,s=0,a=0,o){this.gl.viewport(n[0],this.gl.canvas.height-(n[1]+n[3]),n[2],n[3]);let c=e[0],u=t[0],d=[c,e[1]],f=[u-c,t[1]-e[1]];o&&(d=[t[0],e[1]],f=[e[0]-t[0],t[1]-e[1]],c=-t[0],u=-e[0]);const h=2*Math.max(Math.abs(e[2]),Math.abs(t[2])),p=Zi();let m=.01,v=h*8;if(i!==1/0){let S=o;a===0&&(s===0||s===180)&&(S=!S);let C=h*1.8-r;S||(C=h*1.8+r),m=C-i,v=C+i}I3(p,c,u,e[1],t[1],m,v);const g=Zi();g[0]=-1;const y=bn(0,0,-h*1.8);mg(g,g,y),T3(g,g,hh(270-a)),E3(g,g,hh(s-180));const x=Zi();zo(x,g);const b=Zi();ml(b,x);const A=Zi();return Ch(A,p,g),{modelViewProjectionMatrix:A,modelMatrix:g,normalMatrix:b,leftTopMM:d,fovMM:f}}swizzleVec3MM(n,e){return e===1?n=Va(n,[0,2,1]):e===2&&(n=Va(n,[1,2,0])),n}screenFieldOfViewVox(n=0){const e=Hb(this.volumeObject3D.fieldOfViewDeObliqueMM);return this.swizzleVec3MM(e,n)}screenFieldOfViewMM(n=0,e=!1){if(!e&&!this.opts.isSliceMM)return this.screenFieldOfViewVox(n);const t=this.volumeObject3D.extentsMin,i=this.volumeObject3D.extentsMax;let r=bn(t[0],t[1],t[2]),s=bn(i[0],i[1],i[2]);r=this.swizzleVec3MM(r,n),s=this.swizzleVec3MM(s,n);const a=Zr();return os(a,s,r),a}screenFieldOfViewExtendedVox(n=0){const e=this.volumes[0].extentsMinOrtho,t=this.volumes[0].extentsMaxOrtho;let i=bn(e[0],e[1],e[2]),r=bn(t[0],t[1],t[2]);const s=Zi();i=this.swizzleVec3MM(i,n),r=this.swizzleVec3MM(r,n);const a=Zr();return os(a,r,i),{mnMM:i,mxMM:r,rotation:s,fovMM:a}}screenFieldOfViewExtendedMM(n=0){if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");const e=this.volumeObject3D.extentsMin,t=this.volumeObject3D.extentsMax;let i=bn(e[0],e[1],e[2]),r=bn(t[0],t[1],t[2]);const s=Zi();i=this.swizzleVec3MM(i,n),r=this.swizzleVec3MM(r,n);const a=Zr();return os(a,r,i),{mnMM:i,mxMM:r,rotation:s,fovMM:a}}drawSliceOrientationText(n,e,t=[NaN,NaN]){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let i="S";e===0&&(i="A");let r=this.opts.isRadiologicalConvention?"R":"L";if(e===2&&(r=this.opts.sagittalNoseLeft?"A":"P"),this.opts.isCornerOrientationText){this.drawTextRightBelow([n[0],n[1]],r+i);return}let s=!0,a=!0;if(!isNaN(t[0])){const o=this.opts.textHeight*this.gl.canvas.height+2;t[1]>o&&(this.drawTextBelow([n[0]+n[2]*.5,n[1]+t[1]-o],i),s=!1);const l=this.textWidth(o,r)+2;t[0]>l&&(this.drawTextRight([n[0]+t[0]-l,n[1]+n[3]*.5],r),a=!1)}s&&this.drawTextBelow([n[0]+n[2]*.5,n[1]],i),a&&this.drawTextRight([n[0],n[1]+n[3]*.5],r)}xyMM2xyzMM(n,e){let t=2;n===1&&(t=1),n===2&&(t=0);let i=[0,0,0],r=[1,1,0],s=[1,0,1];i[t]=e,r[t]=e,s[t]=e,i=this.frac2mm(i),r=this.frac2mm(r),s=this.frac2mm(s),i=this.swizzleVec3MM(bn(i[0],i[1],i[2]),n),r=this.swizzleVec3MM(bn(r[0],r[1],r[2]),n),s=this.swizzleVec3MM(bn(s[0],s[1],s[2]),n);const a=(r[0]-i[0])*(s[1]-i[1])-(s[0]-i[0])*(r[1]-i[1]);let o=(r[0]-i[0])*(s[2]-i[2])-(s[0]-i[0])*(r[2]-i[2]);o/=a;let l=(r[1]-i[1])*(s[2]-i[2])-(s[1]-i[1])*(r[2]-i[2]);l/=a;const c=[0,0,0,0,0];return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=l,c[4]=o,c}draw2DMain(n,e,t=NaN){let i=this.volumes[0].frac2mm.slice(),r=this.screenFieldOfViewExtendedMM(e),s=Zi();this.opts.isSliceMM||(i=this.volumes[0].frac2mmOrtho.slice(),s=_s(this.volumes[0].mm2ortho),r=this.screenFieldOfViewExtendedVox(e));let a=this.opts.isRadiologicalConvention&&e<2;t===1/0||t===-1/0?(a=t!==1/0,e===1&&(a=!a)):this.opts.sagittalNoseLeft&&e===2&&(a=!a);let o=0,l=0;e===2?l=a?90:-90:e===1?l=a?180:0:(l=a?180:0,o=a?-90:90);const c=this.gl;let u=!1;if(n[2]===0||n[3]===0){u=!0;const g=c.canvas.width/r.fovMM[0],y=c.canvas.height/r.fovMM[1],x=Math.min(g,y),b=g/x,A=y/x;r.fovMM[0]*=b,r.fovMM[1]*=A;let S=(r.mnMM[0]+r.mxMM[0])*.5;r.mnMM[0]=S-r.fovMM[0]*.5,r.mxMM[0]=S+r.fovMM[0]*.5,S=(r.mnMM[1]+r.mxMM[1])*.5,r.mnMM[1]=S-r.fovMM[1]*.5,r.mxMM[1]=S+r.fovMM[1]*.5,n=[0,0,c.canvas.width,c.canvas.height]}if(isNaN(t)){const g=this.scene.pan2Dxyzmm,y=this.swizzleVec3MM(bn(g[0],g[1],g[2]),e),x=this.scene.pan2Dxyzmm[3];r.mnMM[0]-=y[0],r.mxMM[0]-=y[0],r.mnMM[1]-=y[1],r.mxMM[1]-=y[1],r.mnMM[0]/=x,r.mxMM[0]/=x,r.mnMM[1]/=x,r.mxMM[1]/=x}let d=2;e===1&&(d=1),e===2&&(d=0);let f=this.scene.crosshairPos[d],h=this.frac2mm(this.scene.crosshairPos);!isNaN(t)&&t!==1/0&&t!==-1/0&&(h=this.frac2mm([.5,.5,.5]),h[d]=t,f=this.mm2frac(h)[d]);const p=h[d];c.clear(c.DEPTH_BUFFER_BIT);let m=this.calculateMvpMatrix2D(n,r.mnMM,r.mxMM,1/0,0,l,o,a);if(t===1/0||t===-1/0){const g=n.slice();this.draw3D(n,m.modelViewProjectionMatrix,m.modelMatrix,m.normalMatrix,l,o);const y=this.screenSlices[this.screenSlices.length-1];y.leftTopWidthHeight=g,y.axCorSag=e,y.sliceFrac=1/0,y.AxyzMxy=this.xyMM2xyzMM(e,f),y.leftTopMM=m.leftTopMM,y.fovMM=m.fovMM;return}c.enable(c.DEPTH_TEST),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.disable(c.BLEND),c.depthFunc(c.GREATER),c.disable(c.CULL_FACE);let v=this.sliceMMShader;if(this.opts.isV1SliceShader&&(v=this.sliceV1Shader),!v)throw new Error("slice Shader undefined");if(v.use(this.gl),c.uniform1f(v.uniforms.overlayOutlineWidth,this.overlayOutlineWidth),c.uniform1f(v.uniforms.overlayAlphaShader,this.overlayAlphaShader),c.uniform1i(v.uniforms.isAlphaClipDark,this.isAlphaClipDark?1:0),c.uniform1i(v.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),c.uniform1f(v.uniforms.drawOpacity,this.drawOpacity),c.enable(c.BLEND),c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.uniform1f(v.uniforms.opacity,this.volumes[0].opacity),c.uniform1i(v.uniforms.axCorSag,e),c.uniform1f(v.uniforms.slice,f),c.uniformMatrix4fv(v.uniforms.frac2mm,!1,i),c.uniformMatrix4fv(v.uniforms.mvpMtx,!1,m.modelViewProjectionMatrix.slice()),c.bindVertexArray(this.genericVAO),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.bindVertexArray(this.unusedVAO),this.screenSlices.push({leftTopWidthHeight:n,axCorSag:e,sliceFrac:f,AxyzMxy:this.xyMM2xyzMM(e,f),leftTopMM:m.leftTopMM,screen2frac:[],fovMM:m.fovMM}),isNaN(t)&&this.drawCrosshairs3D(!0,1,m.modelViewProjectionMatrix,!0,this.opts.isSliceMM),this.opts.meshThicknessOn2D>0){this.opts.meshThicknessOn2D!==1/0&&(m=this.calculateMvpMatrix2D(n,r.mnMM,r.mxMM,this.opts.meshThicknessOn2D,p,l,o,a));const g=_s(m.modelViewProjectionMatrix);Ch(g,g,s),this.drawMesh3D(!0,1,g,m.modelMatrix,m.normalMatrix)}isNaN(t)&&this.drawCrosshairs3D(!1,.15,m.modelViewProjectionMatrix,!0,this.opts.isSliceMM),u&&this.drawSliceOrientationText(n,e),this.readyForSync=!0}draw2D(n,e,t=NaN,i=[NaN,NaN]){const r=[NaN,NaN];if(i[0]===1/0){const s=this.sliceScale().volScale;let a=this.scaleSlice(s[0],s[1],[0,0],[n[2],n[3]]);e===1&&(a=this.scaleSlice(s[0],s[2],[0,0],[n[2],n[3]])),e===2&&(a=this.scaleSlice(s[1],s[2],[0,0],[n[2],n[3]])),i[0]=a[2],i[1]=a[3]}if(isNaN(i[0]))this.draw2DMain(n,e,t);else{const s=n.slice();r[0]=Math.floor(.5*(s[2]-i[0])),r[1]=Math.floor(.5*(s[3]-i[1])),s[0]+=r[0],s[1]+=r[1],s[2]=i[0],s[3]=i[1],this.draw2DMain(s,e,t)}t===1/0||t===-1/0||e===4||n[2]!==0&&n[3]!==0&&this.drawSliceOrientationText(n,e,r)}calculateMvpMatrix(n,e=[0,0,0,0],t,i){(e[2]===0||e[3]===0)&&(e=[0,0,this.gl.canvas.width,this.gl.canvas.height]);const r=e[2]/e[3];let s=this.furthestFromPivot;const a=this.pivot3D,o=Zi();s=.8*s/this.scene.volScaleMultiplier,r<1?I3(o,-s,s,-s/r,s/r,s*.01,s*8):I3(o,-s*r,s*r,-s,s,s*.01,s*8);const l=Zi();l[0]=-1;const c=bn(0,0,-s*1.8);mg(l,l,c),this.position&&mg(l,l,this.position),T3(l,l,hh(270-i)),E3(l,l,hh(t-180)),mg(l,l,[-a[0],-a[1],-a[2]]);const u=Zi();zo(u,l);const d=Zi();ml(d,u);const f=Zi();return Ch(f,o,l),[f,l,d]}calculateModelMatrix(n,e){if(!this.back)throw new Error("back undefined");const t=Zi();if(t[0]=-1,T3(t,t,hh(270-e)),E3(t,t,hh(n-180)),this.back.obliqueRAS){const i=_s(this.back.obliqueRAS);Ch(t,t,i)}return t}calculateRayDirection(n,e){const t=this.calculateModelMatrix(n,e),i=pl(1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1),r=Zi();Ch(r,i,t);const s=Zi();zo(s,r);const a=Jr(0,0,-1,1);Sa(a,a,s);const o=bn(a[0],a[1],a[2]);ec(o,o);const l=5e-5;return Math.abs(o[0])<l&&(o[0]=l),Math.abs(o[1])<l&&(o[1]=l),Math.abs(o[2])<l&&(o[2]=l),o}sceneExtentsMinMax(n=!0){let e=bn(0,0,0),t=bn(0,0,0);if(this.volumes.length>0){if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");e=bn(this.volumeObject3D.extentsMin[0],this.volumeObject3D.extentsMin[1],this.volumeObject3D.extentsMin[2]),t=bn(this.volumeObject3D.extentsMax[0],this.volumeObject3D.extentsMax[1],this.volumeObject3D.extentsMax[2]),n||(e=bn(this.volumes[0].extentsMinOrtho[0],this.volumes[0].extentsMinOrtho[1],this.volumes[0].extentsMinOrtho[2]),t=bn(this.volumes[0].extentsMaxOrtho[0],this.volumes[0].extentsMaxOrtho[1],this.volumes[0].extentsMaxOrtho[2]))}if(this.meshes.length>0){if(this.volumes.length<1){const r=this.meshes[0].extentsMin,s=this.meshes[0].extentsMax;e=bn(r[0],r[1],r[2]),t=bn(s[0],s[1],s[2])}for(let r=0;r<this.meshes.length;r++){const s=this.meshes[r].extentsMin,a=this.meshes[r].extentsMax,o=bn(s[0],s[1],s[2]);LB(e,e,o);const l=bn(a[0],a[1],a[2]);kB(t,t,l)}}const i=Zr();return os(i,t,e),[e,t,i]}setPivot3D(){const[n,e]=this.sceneExtentsMinMax(),t=Zr();nm(t,n,e),sct(t,t,.5),this.pivot3D=[t[0],t[1],t[2]],os(t,e,n),this.extentsMin=n,this.extentsMax=e,this.furthestFromPivot=Mh(t)*.5}getMaxVols(){if(this.volumes.length<1)return 0;let n=0;for(let e=0;e<this.volumes.length;e++)n=Math.max(n,this.volumes[e].nFrame4D);return n}detectPartialllyLoaded4D(){if(this.volumes.length<1)return!1;for(let n=0;n<this.volumes.length;n++)if(this.volumes[n].nFrame4D<this.volumes[n].hdr.dims[4])return!0;return!1}drawGraph(){if(this.getMaxVols()<2)return;const n=this.graph;let e=0;if(this.graph.autoSizeMultiplanar&&this.opts.sliceType===3)for(let L=0;L<this.screenSlices.length;L++){const F=this.screenSlices[L].axCorSag;if(F===0&&(e=this.screenSlices[L].leftTopWidthHeight[1]),F!==2)continue;const B=this.screenSlices[L].leftTopWidthHeight.slice();B[1]===e?(n.LTWH[0]=B[0]+B[2],n.LTWH[1]=B[1]):(n.LTWH[0]=B[0],n.LTWH[1]=B[1]+B[3]),n.LTWH[2]=B[2],n.LTWH[3]=B[2]}if(n.opacity<=0||n.LTWH[2]<=5||n.LTWH[3]<=5||Math.floor(n.LTWH[0]+n.LTWH[2])>this.gl.canvas.width||Math.floor(n.LTWH[1]+n.LTWH[3])>this.gl.canvas.height)return;n.backColor=[.15,.15,.15,n.opacity],n.lineColor=[1,1,1,1],this.opts.backColor[0]+this.opts.backColor[1]+this.opts.backColor[2]>1.5&&(n.backColor=[.95,.95,.95,n.opacity],n.lineColor=[0,0,0,1]),n.textColor=n.lineColor.slice(),n.lineThickness=4,n.lineAlpha=1,n.lines=[];const t=[];if(n.vols.length<1)this.volumes[0]!=null&&t.push(0);else for(let L=0;L<n.vols.length;L++){const F=n.vols[L];this.volumes[F]==null||this.volumes[F].nFrame4D<2||t.push(F)}if(t.length<1)return;const i=this.volumes[t[0]].nFrame4D;if(this.graph.selectedColumn=this.volumes[t[0]].frame4D,i<2){ht.debug("Unable to generate a graph: Selected volume is 3D not 4D");return}for(let L=0;L<t.length;L++){n.lines[L]=[];const F=this.frac2vox(this.scene.crosshairPos),B=this.volumes[t[L]];let P=B.nFrame4D;P=Math.min(P,i);for(let z=0;z<P;z++){const O=B.getValue(F[0],F[1],F[2],z);n.lines[L].push(O)}}n.lineRGB=[[1,0,0],[0,.7,0],[0,0,1],[1,1,0],[1,0,1],[0,1,1],[1,1,1],[0,0,0]];let r=n.lines[0][0],s=n.lines[0][0];for(let L=0;L<n.lines.length;L++)for(let F=0;F<n.lines[L].length;F++){const B=n.lines[L][F];r=Math.min(B,r),s=Math.max(B,s)}const a=this.volumes[t[0]].cal_min,o=this.volumes[t[0]].cal_max;if(n.isRangeCalMinMax&&a<o&&isFinite(a)&&isFinite(o)&&(r=a,s=o),n.normalizeValues&&s>r){const L=s-r;for(let F=0;F<n.lines.length;F++)for(let B=0;B<n.lines[F].length;B++){const P=n.lines[F][B];n.lines[F][B]=(P-r)/L}r=0,s=1}r>=s&&(s=r+1),this.drawRect(n.LTWH,n.backColor);const[l,c,u]=CX(r,s),d=Math.max(0,-1*Math.floor(Math.log(l)/Math.log(10)));r=Math.min(c,r),s=Math.max(u,s);function f(L){return L.toFixed(6).replace(/\.?0*$/,"")}const p=.07*(Math.min(n.LTWH[2],n.LTWH[3])/(this.fontMets.size*this.uiData.dpr));let m=this.opts.textHeight*this.gl.canvas.height*p;m<16&&(m=0);let v=0,g=c;if(m>0)for(;g<=s;){const L=g.toFixed(d),F=this.textWidth(m,L);v=Math.max(F,v),g+=l}const y=.05,x=Math.abs(n.LTWH[2]),b=Math.abs(n.LTWH[3]),A=[n.LTWH[0]+y*x+v,n.LTWH[1]+y*b,n.LTWH[2]-v-2*y*x,n.LTWH[3]-m-2*y*b];this.graph.LTWH=n.LTWH,this.graph.plotLTWH=A,this.drawRect(A,this.opts.backColor);const S=s-r,C=A[3]/S,_=A[2]/(n.lines[0].length-1),M=A[1]+A[3];g=c+.5*l;const T=n.lineColor.slice();for(T[3]=.25*n.lineColor[3];g<=s;){const L=M-(g-r)*C;this.drawLine([A[0],L,A[0]+A[2],L],.5*n.lineThickness,T),g+=l}g=c;const E=.5*n.lineThickness;for(;g<=s;){const L=M-(g-r)*C;this.drawLine([A[0]-E,L,A[0]+A[2]+n.lineThickness,L],n.lineThickness,n.lineColor);const F=g.toFixed(d);m>0&&this.drawTextLeft([A[0]-6,L],F,p,n.textColor),g+=l}let I=1;for(;n.lines[0].length/I>20;)I*=5;for(let L=0;L<n.lines[0].length;L+=I){const F=L*_+A[0];let B=n.lineThickness;if(L%2===1)B*=.5,this.drawLine([F,A[1],F,A[1]+A[3]],B,T);else{const P=f(L);m>0&&this.drawTextBelow([F,2+A[1]+A[3]],P,p,n.textColor),this.drawLine([F,A[1],F,A[1]+A[3]],B,n.lineColor)}}for(let L=0;L<n.lines.length;L++){let F=[1,0,0,n.lineAlpha];L<n.lineRGB.length&&(F=[n.lineRGB[L][0],n.lineRGB[L][1],n.lineRGB[L][2],n.lineAlpha]);for(let B=1;B<n.lines[L].length;B++){const P=(B-1)*_,z=B*_,O=(n.lines[L][B-1]-r)*C,N=(n.lines[L][B]-r)*C,H=[A[0]+P,A[1]+A[3]-O,A[0]+z,A[1]+A[3]-N];this.drawLine(H,n.lineThickness,F)}}if(n.selectedColumn>=0&&n.selectedColumn<n.lines[0].length){const L=n.selectedColumn*_+A[0];this.drawLine([L,A[1],L,A[1]+A[3]],n.lineThickness,[n.lineRGB[3][0],n.lineRGB[3][1],n.lineRGB[3][2],1])}this.detectPartialllyLoaded4D()&&this.drawTextBelow([A[0]+A[2],A[1]+A[3]+m*.5],"...",p,n.textColor)}depthPicker(n,e){if(!this.uiData.mouseDepthPicker)return;this.uiData.mouseDepthPicker=!1;const t=this.gl,i=this.mousePos[0]*n[2]/n[2],r=t.canvas.height-this.mousePos[1]*n[3]/n[3]-1,s=new Uint8Array(4);if(t.readPixels(i,r,1,1,t.RGBA,t.UNSIGNED_BYTE,s),this.selectedObjectId=s[3],this.selectedObjectId===this.VOLUME_ID){this.scene.crosshairPos=new Float32Array(s.slice(0,3)).map(d=>d/255);return}const a=mft(s);if(a>1)return;const o=(this.mousePos[0]-n[0])/n[2],l=(t.canvas.height-this.mousePos[1]-n[1])/n[3],c=pft(o,l,a,e),u=this.mm2frac(c,0,!0);u[0]<0||u[0]>1||u[1]<0||u[1]>1||u[2]<0||u[2]>1||(this.scene.crosshairPos=this.mm2frac(c,0,!0))}drawImage3D(n,e,t){if(this.volumes.length===0)return;const i=this.gl,r=this.calculateRayDirection(e,t),s=this.volumeObject3D;if(s){i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.enable(i.CULL_FACE),i.cullFace(i.FRONT);let a=this.renderShader;if(this.uiData.mouseDepthPicker&&(a=this.pickingImageShader),a.use(this.gl),i.uniform1i(a.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),this.gradientTextureAmount>0){i.activeTexture(RX),i.bindTexture(i.TEXTURE_3D,this.gradientTexture);const o=this.calculateModelMatrix(e,t),l=Zi();zo(l,o);const c=Zi();ml(c,l),i.uniformMatrix4fv(a.uniforms.normMtx,!1,c)}this.drawBitmap&&this.drawBitmap.length>8?i.uniform2f(a.uniforms.renderDrawAmbientOcclusionXY,this.renderDrawAmbientOcclusion,this.drawOpacity):i.uniform2f(a.uniforms.renderDrawAmbientOcclusionXY,this.renderDrawAmbientOcclusion,0),i.uniformMatrix4fv(a.uniforms.mvpMtx,!1,n),i.uniformMatrix4fv(a.uniforms.matRAS,!1,this.back.matRAS),i.uniform3fv(a.uniforms.rayDir,r),this.gradientTextureAmount<0?i.uniform4fv(a.uniforms.clipPlane,[this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2],30]):i.uniform4fv(a.uniforms.clipPlane,this.scene.clipPlane),i.uniform1f(a.uniforms.drawOpacity,1),i.bindVertexArray(s.vao),i.drawElements(s.mode,s.indexCount,i.UNSIGNED_SHORT,0),i.bindVertexArray(this.unusedVAO)}}drawOrientationCube(n,e=0,t=0){if(!this.opts.isOrientCube)return;const i=.05*Math.min(n[2],n[3]);if(i<5)return;const r=this.gl;r.enable(r.CULL_FACE),r.cullFace(r.BACK),this.orientCubeShader.use(this.gl),r.bindVertexArray(this.orientCubeShaderVAO);const s=Zi(),a=Zi();I3(a,0,r.canvas.width,0,r.canvas.height,-10*i,10*i);let o=0;n[1]===0&&(o=r.canvas.height-this.effectiveCanvasHeight()),mg(s,s,[1.8*i+n[0],o+1.8*i+n[1],0]),nX(s,s,[i,i,i]),T3(s,s,hh(270-t)),E3(s,s,hh(-e));const l=Zi();Ch(l,a,s),r.uniformMatrix4fv(this.orientCubeShader.uniforms.u_matrix,!1,l),r.drawArrays(r.TRIANGLE_STRIP,0,168),r.bindVertexArray(this.unusedVAO),this.gl.disable(this.gl.CULL_FACE)}createOnLocationChange(n=NaN){const[e,t,i]=this.sceneExtentsMinMax(!0),r=Math.max(Math.max(i[0],i[1]),i[2]);function s(d){return Math.max(0,-Math.ceil(Math.log10(Math.abs(d))))}let a=s(r*.001);const o=this.frac2mm(this.scene.crosshairPos,0,!0);function l(d,f=0){return parseFloat(d.toFixed(f))}let c=l(o[0],a)+"×"+l(o[1],a)+"×"+l(o[2],a);if(this.volumes.length>0&&this.volumes[0].nFrame4D>0&&(c+="×"+l(this.volumes[0].frame4D)),this.volumes.length>0){let d=" = ";for(let p=0;p<this.volumes.length;p++){const m=this.volumes[p].mm2vox(o);let v=this.volumes[p].getValue(m[0],m[1],m[2],this.volumes[p].frame4D);if(a=3,this.volumes[p].colormapLabel!==null){const g=Math.round(v);g>=0&&g<this.volumes[p].colormapLabel.labels.length?d+=this.volumes[p].colormapLabel.labels[g]:d+="undefined("+l(v,a)+")"}else d+=l(v,a);this.volumes[p].imaginary&&(v=this.volumes[p].getValue(m[0],m[1],m[2],this.volumes[p].frame4D,!0),v>=0&&(d+="+"),d+=l(v,a)),d+="   "}c+=d;const f=this.back.dimsRAS,h=f[1]*f[2]*f[3];if(this.drawBitmap&&this.drawBitmap.length===h){const p=this.frac2vox(this.scene.crosshairPos),m=p[0]+p[1]*f[1]+p[2]*f[1]*f[2];c+=" "+this.drawLut.labels[this.drawBitmap[m]]}}const u={mm:this.frac2mm(this.scene.crosshairPos,0,!0),axCorSag:n,vox:this.frac2vox(this.scene.crosshairPos),frac:this.scene.crosshairPos,xy:[this.mousePos[0],this.mousePos[1]],values:this.volumes.map(d=>{const f=this.frac2mm(this.scene.crosshairPos,0,!0),h=d.mm2vox(f),p=d.getValue(h[0],h[1],h[2],d.frame4D);return{name:d.name,value:p,id:d.id,mm:f,vox:h}}),string:c};this.onLocationChange(u)}addLabel(n,e,t,i,r){const s={textColor:this.opts.legendTextColor,textScale:1,textAlignment:"left",lineWidth:0,lineColor:this.opts.legendTextColor,lineTerminator:"none",bulletScale:0,bulletColor:this.opts.legendTextColor},a=e?{...s,...e}:{...s},o=new Ooe(n,{...a},t,i,r);return this.document.labels.push(o),o}calculateScreenPoint(n,e,t){const i=uf();return Sa(i,[...n,1],e),i[3]!==0&&(i[0]=(i[0]/i[3]+1)*.5*t[2],i[1]=(1-i[1]/i[3])*.5*t[3],i[2]/=i[3],i[0]+=t[0],i[1]+=t[1]),i}getLabelAtPoint(n){const t=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,i=this.opts.textHeight*this.gl.canvas.height*1;for(const c of this.document.labels){if(c.anchor==null||c.anchor===0)continue;const u=this.opts.textHeight*this.gl.canvas.height*c.style.textScale,d=this.textHeight(u,c.text),f=this.textWidth(u,c.text);if(!(c.anchor&1&&n[0]>f)&&!(c.anchor&2&&(n[0]<(this.gl.canvas.width-f)/2||n[0]>(this.gl.canvas.width+f)/2))&&!(c.anchor&4&&n[0]<this.gl.canvas.width-f)&&!(c.anchor&8&&(n[1]<i/2||n[1]>d+i/2))&&!(c.anchor&16&&(n[1]<(this.gl.canvas.height-d-i)/2||n[1]>(this.gl.canvas.height+d-i/2)/2))&&!(c.anchor&32&&(n[1]<this.gl.canvas.height-d-i||n[1]>this.gl.canvas.height-i/2)))return c}ht.debug("screenPoint",n);const r=this.getLegendPanelHeight(),s=this.getLegendPanelWidth(),a=this.gl.canvas.width-s;let o=(this.canvas.height-r)/2;if(ht.debug("panelrect",a,o,a+s,o+r),n[0]<a||n[1]<o||n[0]>a+s||n[1]>o+r)return null;const l=this.getConnectomeLabels();for(const c of l){const u=this.opts.textHeight*this.gl.canvas.height*c.style.textScale,d=this.textHeight(u,c.text);if(n[1]>=o&&n[1]<=o+d+t/2)return c;o+=d,o+=t/2}return null}drawLabelLine(n,e,t,i,r=!1){const s=Array.isArray(n.points)&&Array.isArray(n.points[0])?n.points:[n.points];for(const a of s){const o=this.calculateScreenPoint(a,t,i);r?this.drawDottedLine([...e,o[0],o[1]],n.style.lineWidth,n.style.lineColor):this.draw3DLine(e,[o[0],o[1],o[2]],n.style.lineWidth,n.style.lineColor)}}draw3DLabel(n,e,t,i,r,s,a){const o=n.text,l=e[0],c=e[1],u=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,d=this.textHeight(n.style.textScale,o)*u;if(n.style.lineWidth>0&&Array.isArray(n.points)&&this.drawLabelLine(n,[l,c+d],t,i,a),n.style.bulletScale){const h=n.style.bulletScale*d,p=d-h,m=c+p/2+h/2,v=l+(r-h)/2;this.drawCircle([v,m,h,h],n.style.bulletColor)}let f=l;if(s)if(n.style.textAlignment!=="left"){const h=this.textWidth(n.style.textScale,n.text)*u;if(n.style.textAlignment==="right")f=l+s-u*1.5-h;else{const p=s-(r||u);f+=(p-h)/2}}else f+=r;this.drawText([f,c],o,n.style.textScale,n.style.textColor)}draw3DLabels(n,e,t=!1){const i=this.getConnectomeLabels();if(!this.opts.showLegend||i.length===0)return;if(!this.canvas)throw new Error("canvas undefined");const r=this.gl;r.disable(r.CULL_FACE),r.viewport(0,0,this.canvas.width,this.canvas.height);const a=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,o=this.getBulletMarginWidth(),l=this.getLegendPanelHeight(),c=this.getLegendPanelWidth(),u=r.canvas.width-c;let d=(this.canvas.height-l)/2;this.drawRect([r.canvas.width-c,d,c-a,l],this.opts.legendBackgroundColor);const f=r.getParameter(r.BLEND),h=r.getParameter(r.DEPTH_FUNC);t||(r.disable(r.BLEND),r.depthFunc(r.GREATER));for(const p of i){this.draw3DLabel(p,[u,d],n,e,o,c,t);const m=this.opts.textHeight*this.gl.canvas.height*p.style.textScale,v=this.textHeight(m,p.text);d+=v,d+=a/2}t||(r.depthFunc(h),f&&r.enable(r.BLEND))}drawAnchoredLabels(){const n=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,e=this.document.labels.filter(t=>t.anchor!=null&&t.anchor!==0);for(const t of e){const i=t.text,r=this.textHeight(t.style.textScale,i)*n,s=this.textWidth(t.style.textScale,i)*n;let a,o;const c=this.opts.textHeight*this.gl.canvas.height*1,u=c;let d=c/4,f=0,h=0;t.anchor&1&&(a=0),t.anchor&4&&(a=this.canvas.width-s,f-=c/4),t.anchor&2&&(a=(this.canvas.width-s)/2,f-=c/4,d+=c/4),t.anchor&8&&(o=0),t.anchor&16&&(o=(this.canvas.height-r-c)/2,h-=c/4),t.anchor&32&&(o=this.canvas.height-r-c,h-=c/4),this.drawRect([a+f,o+h,s+d,r+u],t.style.backgroundColor),this.draw3DLabel(t,[a,o])}}draw3D(n=[0,0,0,0],e=null,t=null,i=null,r=null,s=0){const a=r!==null;this.setPivot3D(),a||(r=this.scene.renderAzimuth,s=this.scene.renderElevation);const o=this.gl;e===null&&([e,t,i]=this.calculateMvpMatrix(null,n,r,s));let l=[...n];if(n[2]===0||n[3]===0?(n=[0,0,o.canvas.width,o.canvas.height],l=[...n],this.screenSlices.push({leftTopWidthHeight:n,axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[MX(t),0]})):(this.screenSlices.push({leftTopWidthHeight:n.slice(),axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[MX(t),0]}),n[1]=o.canvas.height-n[3]-n[1]),o.enable(o.DEPTH_TEST),o.depthFunc(o.ALWAYS),o.depthMask(!0),o.clearDepth(0),this.draw3DLabels(e,l,!1),o.viewport(n[0],n[1],n[2],n[3]),this.volumes.length>0&&(this.updateInterpolation(0,!0),this.updateInterpolation(1,!0),this.drawImage3D(e,r,s)),this.updateInterpolation(0),this.updateInterpolation(1),a||this.drawCrosshairs3D(!0,1,e),this.drawMesh3D(!0,1,e,t,i),this.uiData.mouseDepthPicker){this.depthPicker(n,e),this.createOnLocationChange(),this.draw3D(n,e,t,i,r,s);return}this.opts.meshXRay>0&&this.drawMesh3D(!1,this.opts.meshXRay,e,t,i),this.draw3DLabels(e,l,!1),o.viewport(n[0],n[1],n[2],n[3]),a||this.drawCrosshairs3D(!1,.15,e),o.viewport(0,0,o.canvas.width,o.canvas.height),this.drawOrientationCube(n,r,s);const c="azimuth: "+this.scene.renderAzimuth.toFixed(0)+" elevation: "+this.scene.renderElevation.toFixed(0);return this.readyForSync=!0,this.sync(),this.draw3DLabels(e,l,!0),c}drawMesh3D(n=!0,e=1,t,i,r){if(this.meshes.length<1)return;const s=this.gl;t||([t,i,r]=this.calculateMvpMatrix(this.volumeObject3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),s.enable(s.DEPTH_TEST),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.disable(s.BLEND),s.depthFunc(s.GREATER),s.disable(s.CULL_FACE),n?(s.disable(s.BLEND),s.depthFunc(s.GREATER)):(s.enable(s.BLEND),s.depthFunc(s.ALWAYS),s.enable(s.CULL_FACE)),s.cullFace(s.BACK);let a=this.meshShaders[0].shader,o=!1;for(let l=0;l<this.meshes.length;l++)if(this.meshes[l].visible!==!1&&(a=this.meshShaders[this.meshes[l].meshShaderIndex].shader,this.uiData.mouseDepthPicker&&(a=this.pickingMeshShader),a.use(this.gl),s.uniformMatrix4fv(a.uniforms.mvpMtx,!1,t),s.uniformMatrix4fv(a.uniforms.normMtx,!1,r),s.uniform1f(a.uniforms.opacity,e),!(this.meshes[l].indexCount<3))){if(this.meshes[l].offsetPt0&&(this.meshes[l].fiberSides<3||this.meshes[l].fiberRadius<=0)){o=!0;continue}a.isMatcap&&(s.activeTexture(DX),s.bindTexture(s.TEXTURE_2D,this.matCapTexture)),s.bindVertexArray(this.meshes[l].vao),s.drawElements(s.TRIANGLES,this.meshes[l].indexCount,s.UNSIGNED_INT,0),s.bindVertexArray(this.unusedVAO)}if(!o){s.enable(s.BLEND),s.depthFunc(s.ALWAYS);return}a=this.fiberShader,a.use(this.gl),s.uniformMatrix4fv(a.uniforms.mvpMtx,!1,t),s.uniform1f(a.uniforms.opacity,e);for(let l=0;l<this.meshes.length;l++)this.meshes[l].indexCount<3||this.meshes[l].offsetPt0&&(this.meshes[l].fiberSides>=3&&this.meshes[l].fiberRadius>0||(s.bindVertexArray(this.meshes[l].vaoFiber),s.drawElements(s.LINE_STRIP,this.meshes[l].indexCount,s.UNSIGNED_INT,0),s.bindVertexArray(this.unusedVAO)));s.enable(s.BLEND),s.depthFunc(s.ALWAYS),this.readyForSync=!0}drawCrosshairs3D(n=!0,e=1,t=null,i=!1,r=!0){var h,p;if(!this.opts.show3Dcrosshair&&!i||this.opts.crosshairWidth<=0&&i)return;const s=this.gl,a=this.frac2mm(this.scene.crosshairPos,0,r);let o=1;const[l,c,u]=this.sceneExtentsMinMax(r);if(this.volumes.length>0){if(!this.back)throw new Error("back undefined");o=.5*Math.min(Math.min(this.back.pixDims[1],this.back.pixDims[2]),this.back.pixDims[3])}else(u[0]<50||u[0]>1e3)&&(o=u[0]*.02);if(o*=this.opts.crosshairWidth,((h=this.opts)==null?void 0:h.crosshairWidthUnit)==="percent"&&(o=u[0]*this.opts.crosshairWidth*.5*.01),((p=this.opts)==null?void 0:p.crosshairWidthUnit)==="mm"&&(o=this.opts.crosshairWidth*.5),(this.crosshairs3D===null||this.crosshairs3D.mm[0]!==a[0]||this.crosshairs3D.mm[1]!==a[1]||this.crosshairs3D.mm[2]!==a[2])&&(this.crosshairs3D!==null&&(s.deleteBuffer(this.crosshairs3D.indexBuffer),s.deleteBuffer(this.crosshairs3D.vertexBuffer)),this.crosshairs3D=Mm.generateCrosshairs(this.gl,1,a,l,c,o,20,this.opts.crosshairGap),this.crosshairs3D.mm=a),!this.surfaceShader)throw new Error("surfaceShader undefined");const d=this.surfaceShader;d.use(this.gl),t==null&&([t]=this.calculateMvpMatrix(this.crosshairs3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),s.uniformMatrix4fv(d.uniforms.mvpMtx,!1,t),s.disable(s.CULL_FACE),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.crosshairs3D.indexBuffer),s.enable(s.DEPTH_TEST);const f=[...this.opts.crosshairColor];n?(s.disable(s.BLEND),s.depthFunc(s.GREATER)):(s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.depthFunc(s.ALWAYS)),f[3]=e,s.uniform4fv(d.uniforms.surfaceColor,f),s.bindVertexArray(this.crosshairs3D.vao),s.drawElements(s.TRIANGLES,this.crosshairs3D.indexCount,s.UNSIGNED_INT,0),s.bindVertexArray(this.unusedVAO)}mm2frac(n,e=0,t=!1){if(this.volumes.length<1){const i=bn(.1,.5,.5),[r,s,a]=this.sceneExtentsMinMax();return i[0]=(n[0]-r[0])/a[0],i[1]=(n[1]-r[1])/a[1],i[2]=(n[2]-r[2])/a[2],isFinite(i)||(isFinite(i[0])||(i[0]=.5),isFinite(i[1])||(i[1]=.5),isFinite(i[2])||(i[2]=.5),this.meshes.length<1&&ht.error("mm2frac() not finite: objects not (yet) loaded.")),i}return this.volumes[e].convertMM2Frac(n,t||this.opts.isSliceMM)}vox2frac(n,e=0){return this.volumes[e].convertVox2Frac(n)}frac2vox(n,e=0){return this.volumes.length<=e?[0,0,0]:this.volumes[e].convertFrac2Vox(n)}moveCrosshairInVox(n,e,t){const i=this.frac2vox(this.scene.crosshairPos);i[0]+=n,i[1]+=e,i[2]+=t,i[0]=rD(i[0],0,this.volumes[0].dimsRAS[1]-1),i[1]=rD(i[1],0,this.volumes[0].dimsRAS[2]-1),i[2]=rD(i[2],0,this.volumes[0].dimsRAS[3]-1),this.scene.crosshairPos=this.vox2frac(i),this.createOnLocationChange(),this.drawScene()}frac2mm(n,e=0,t=!1){const i=Jr(n[0],n[1],n[2],1);if(this.volumes.length>0)return this.volumes[e].convertFrac2MM(n,t||this.opts.isSliceMM);{const[r,s]=this.sceneExtentsMinMax(),a=(o,l,c)=>o*(1-c)+l*c;i[0]=a(r[0],s[0],n[0]),i[1]=a(r[1],s[1],n[1]),i[2]=a(r[2],s[2],n[2])}return i}screenXY2TextureFrac(n,e,t,i=!0){const r=bn(-1,-1,-1),s=this.screenSlices[t].axCorSag;if(s>2)return r;const a=this.screenSlices[t].leftTopWidthHeight.slice();let o=!1;a[2]<0&&(o=!0,a[0]+=a[2],a[2]=-a[2]);let l=(n-a[0])/a[2];o&&(l=1-l);const c=1-(e-a[1])/a[3];if(l<0||l>1||c<0||c>1||this.screenSlices[t].AxyzMxy.length<4)return r;let u=bn(0,0,0);u[0]=this.screenSlices[t].leftTopMM[0]+l*this.screenSlices[t].fovMM[0],u[1]=this.screenSlices[t].leftTopMM[1]+c*this.screenSlices[t].fovMM[1];const d=this.screenSlices[t].AxyzMxy;u[2]=d[2]+d[4]*(u[1]-d[1])-d[3]*(u[0]-d[0]),s===1&&(u=Va(u,[0,2,1])),s===2&&(u=Va(u,[2,0,1]));const f=this.mm2frac(u);return i&&(f[0]<0||f[0]>1||f[1]<0||f[1]>1||f[2]<0||f[2]>1)?r:f}canvasPos2frac(n){for(let e=0;e<this.screenSlices.length;e++){const t=this.screenXY2TextureFrac(n[0],n[1],e);if(t[0]>=0)return t}return[-1,-1,-1]}scaleSlice(n,e,t=[0,0],i=[0,0]){const r=i[0]===0?this.effectiveCanvasWidth()-t[0]:i[0]-t[0],s=i[1]===0?this.effectiveCanvasHeight()-t[1]:i[1]-t[1];let a=r/n;e*a>s&&(a=s/e);const o=n*a,l=e*a;return[(r-o)*.5,(s-l)*.5,o,l,a]}drawThumbnail(){if(!this.bmpShader)throw new Error("bmpShader undefined");this.bmpShader.use(this.gl),this.gl.uniform2f(this.bmpShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height);let n=this.gl.canvas.height,e=this.gl.canvas.height*this.bmpTextureWH;e>this.gl.canvas.width&&(n=this.gl.canvas.width/this.bmpTextureWH,e=this.gl.canvas.width),this.gl.uniform4f(this.bmpShader.uniforms.leftTopWidthHeight,0,0,e,n),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawLine(n,e=1,t=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),t[3]<0&&(t=this.opts.crosshairColor),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,e),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,n),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}draw3DLine(n,e,t=1,i=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.line3DShader)throw new Error("line3DShader undefined");this.line3DShader.use(this.gl),i[3]<0&&(i=this.opts.crosshairColor),this.gl.uniform4fv(this.line3DShader.uniforms.lineColor,i),this.gl.uniform2fv(this.line3DShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.line3DShader.uniforms.thickness,t),this.gl.uniform2fv(this.line3DShader.uniforms.startXY,n),this.gl.uniform3fv(this.line3DShader.uniforms.endXYZ,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawDottedLine(n,e=1,t=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl);const i=t[3]<0?[...this.opts.crosshairColor]:[...t];i[3]=.3;const r=aX(n[2]-n[0],n[3]-n[1]),s=oX(r);pct(r,r);const o=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1;hct(r,r,o/2);const l=oX(r);let c=Math.floor(s/l);s%l&&c++;const u=[n[0],n[1]];this.gl.uniform4fv(this.lineShader.uniforms.lineColor,i),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,e);for(let d=0;d<c-1;d++){if(d%2){u[0]+=r[0],u[1]+=r[1];continue}const f=[u[0],u[1],u[0]+r[0],u[1]+r[1]];this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,f),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),u[0]+=r[0],u[1]+=r[1]}this.gl.bindVertexArray(this.unusedVAO)}drawGraphLine(n,e=[1,0,0,.5],t=2){this.drawLine(n,t,e)}drawCrossLinesMM(n,e,t,i,r){if(n<0||this.screenSlices.length<=n)return;const s=this.screenSlices[n];let a=s.sliceFrac;a===1/0&&ht.warn("Rendering approximate cross lines in world view mode"),a===1/0&&(a=.5);let l=i.slice(),c=r.slice();const u=Math.max(1,this.opts.crosshairWidth);e===1&&(l=t.slice()),e===2&&(l=t.slice(),c=i.slice());function d(f){const h=aX(0,0);return h[0]=s.leftTopWidthHeight[0]+(f[0]-s.leftTopMM[0])/s.fovMM[0]*s.leftTopWidthHeight[2],h[1]=s.leftTopWidthHeight[1]+s.leftTopWidthHeight[3]-(f[1]-s.leftTopMM[1])/s.fovMM[1]*s.leftTopWidthHeight[3],h}if(l.length>0&&e===0){const f=a,h=1;for(let p=0;p<l.length;p++){const m=this.frac2mm([.5,.5,.5]);m[h]=l[p];let v=this.mm2frac(m);v=v[h];let g=this.frac2mm([0,v,f]);g=Va(g,[0,1,2]);let y=this.frac2mm([1,v,f]);y=Va(y,[0,1,2]),g=d(g),y=d(y),this.drawLine([g[0],g[1],y[0],y[1]],u)}}if(l.length>0&&e===1){const f=a,h=2;for(let p=0;p<l.length;p++){const m=this.frac2mm([.5,.5,.5]);m[h]=l[p];let v=this.mm2frac(m);v=v[h];let g=this.frac2mm([0,f,v]);g=Va(g,[0,2,1]);let y=this.frac2mm([1,f,v]);y=Va(y,[0,2,1]),g=d(g),y=d(y),this.drawLine([g[0],g[1],y[0],y[1]],u)}}if(l.length>0&&e===2){const f=a,h=2;for(let p=0;p<l.length;p++){const m=this.frac2mm([.5,.5,.5]);m[h]=l[p];let v=this.mm2frac(m);v=v[h];let g=this.frac2mm([f,0,v]);g=Va(g,[1,2,0]);let y=this.frac2mm([f,1,v]);y=Va(y,[1,2,0]),g=d(g),y=d(y),this.drawLine([g[0],g[1],y[0],y[1]],u)}}if(c.length>0&&e===0){const f=a,h=0;for(let p=0;p<c.length;p++){const m=this.frac2mm([.5,.5,.5]);m[h]=c[p];let v=this.mm2frac(m);v=v[h];let g=this.frac2mm([v,0,f]);g=Va(g,[0,1,2]);let y=this.frac2mm([v,1,f]);y=Va(y,[0,1,2]),g=d(g),y=d(y),this.drawLine([g[0],g[1],y[0],y[1]],u)}}if(c.length>0&&e===1){const f=a,h=0;for(let p=0;p<c.length;p++){const m=this.frac2mm([.5,.5,.5]);m[h]=c[p];let v=this.mm2frac(m);v=v[h];let g=this.frac2mm([v,f,0]);g=Va(g,[0,2,1]);let y=this.frac2mm([v,f,1]);y=Va(y,[0,2,1]),g=d(g),y=d(y),this.drawLine([g[0],g[1],y[0],y[1]],u)}}if(c.length>0&&e===2){const f=a,h=1;for(let p=0;p<c.length;p++){const m=this.frac2mm([.5,.5,.5]);m[h]=c[p];let v=this.mm2frac(m);v=v[h];let g=this.frac2mm([f,v,0]);g=Va(g,[1,2,0]);let y=this.frac2mm([f,v,1]);y=Va(y,[1,2,0]),g=d(g),y=d(y),this.drawLine([g[0],g[1],y[0],y[1]],u)}}}drawCrossLines(n,e,t,i,r){if(n<0||this.screenSlices.length<=n)return;if(this.opts.isSliceMM)return this.drawCrossLinesMM(n,e,t,i,r);if(this.screenSlices[n].sliceFrac===1/0)return this.drawCrossLinesMM(n,e,t,i,r);const s=this.screenSlices[n];let a=i.slice(),o=r.slice();if(e===1&&(a=t.slice()),e===2&&(a=t.slice(),o=i.slice()),a.length>0){const l=s.leftTopWidthHeight.slice();let c=2;e===0&&(c=1);const u=this.frac2mm([.5,.5,.5]);for(let d=0;d<a.length;d++){u[c]=a[d];const f=this.mm2frac(u);this.drawRect([l[0],l[1]+l[3]-f[c]*l[3],l[2],1])}}if(o.length>0){const l=s.leftTopWidthHeight.slice(),c=s.fovMM[0]<0;let u=0;e===2&&(u=1);const d=this.frac2mm([.5,.5,.5]);for(let f=0;f<o.length;f++){d[u]=o[f];const h=this.mm2frac(d);c?this.drawRect([l[0]+(l[2]-h[u]*l[2]),l[1],1,l[3]]):this.drawRect([l[0]+h[u]*l[2],l[1],1,l[3]])}}}drawMosaic(n){if(this.volumes.length===0){ht.debug("Unable to draw mosaic until voxel-based image is loaded");return}this.screenSlices=[];const e=this.screenFieldOfViewMM(0,!0),t=this.screenFieldOfViewMM(0);n=n.replaceAll(";"," ;").trim();const i=[],r=[],s=[],a=n.split(/\s+/);let o=1;const l=this.opts.textHeight;let c=0,u=0;for(let d=0;d<2;d++){let f=!1,h=!1;f=!1;let p=0,m=0,v=0,g=0,y=!1,x=0;for(let S=0;S<a.length;S++){const C=a[S];if(C.includes("X")){h=!0;continue}if(C.includes("L")){y=!C.includes("-");continue}if(C.includes("V")||C.includes("H")){S++;continue}C.includes("A")&&(x=0),C.includes("C")&&(x=1),C.includes("S")&&(x=2),C.includes("R")&&(f=!0),C.includes(";")&&(v+=p,g=Math.max(g,m),p=0,m=0);const _=parseFloat(C);if(isNaN(_))continue;let M=0,T=0,E=t;if(f&&(E=e),x===2?M=E[1]:M=E[0],x===0?T=E[1]:T=E[2],d===0)f||(x===0&&i.push(_),x===1&&r.push(_),x===2&&s.push(_));else{const I=[c+o*m,u+o*v,o*M,o*T];if(this.opts.textHeight=y?l:0,f){let L=_<0?-1/0:1/0;Object.is(_,-0)&&(L=-1/0),this.draw2D(I,x,L)}else this.draw2D(I,x,_);h&&this.drawCrossLines(this.screenSlices.length-1,x,i,r,s),f=!1,h=!1}m+=M,p=Math.max(p,T)}if(v+=p,g=Math.max(g,m),g<=0||v<=0)break;const b=this.gl.canvas.width/g,A=this.effectiveCanvasHeight()/v;o=Math.min(b,A),this.opts.centerMosaic&&(c=Math.floor(.5*(this.gl.canvas.width-g*o)),u=Math.floor(.5*(this.effectiveCanvasHeight()-v*o)))}this.opts.textHeight=l}drawSceneCore(){var r,s,a;if(!this.initialized)return;if(this.colorbarHeight=0,this.gl.clearColor(this.opts.backColor[0],this.opts.backColor[1],this.opts.backColor[2],this.opts.backColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.bmpTexture&&this.thumbnailVisible){this.drawThumbnail();return}let n="";if(this.volumes.length===0||typeof this.volumes[0].dims>"u"){if(this.meshes.length>0){this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.drawLoadingText(this.opts.loadingText);return}if(this.back===null)return;if(this.uiData.isDragging&&this.scene.clipPlaneDepthAziElev[0]<1.8&&this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0){const o=this.uiData.dragStart[0]-this.uiData.dragEnd[0],l=this.uiData.dragStart[1]-this.uiData.dragEnd[1],c=this.uiData.dragClipPlaneStartDepthAziElev.slice();if(c[1]-=o,c[1]=c[1]%360,c[2]+=l,c[1]!==this.scene.clipPlaneDepthAziElev[1]||c[2]!==this.scene.clipPlaneDepthAziElev[2])return this.scene.clipPlaneDepthAziElev=c,this.setClipPlane(this.scene.clipPlaneDepthAziElev)}if(this.sliceMosaicString.length<1&&this.opts.sliceType===4){this.opts.isColorbar&&this.reserveColorbarPanel(),this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.opts.isColorbar&&this.reserveColorbarPanel();const e=this.getMaxVols(),t=this.opts.sliceType===3&&e>1&&this.graph.autoSizeMultiplanar&&this.graph.opacity>0;if(this.sliceMosaicString.length>0)this.drawMosaic(this.sliceMosaicString);else{const o=[0,0];let l=!1;if(this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.screenSlices=[],this.opts.sliceType===0)this.draw2D([0,0,0,0],0);else if(this.opts.sliceType===1)this.draw2D([0,0,0,0],1);else if(this.opts.sliceType===2)this.draw2D([0,0,0,0],2);else{let c=function(O,N){return[(O-1)*p+O*m,(N-1)*p+N*m]},u=!1;this.opts.multiplanarForceRender?(u=!0,this.opts.multiplanarForceRender?this.opts.multiplanarShowRender=1:this.opts.multiplanarShowRender=2,delete this.opts.multiplanarForceRender):this.opts.multiplanarShowRender===1&&(u=!0);const d=isFinite(this.drawPenLocation[0])&&this.opts.drawingEnabled,{volScale:f}=this.sliceScale(),h=f.slice();this.opts.multiplanarEqualSize&&(f[0]=1,f[1]=1,f[2]=1),typeof this.opts.multiplanarPadPixels!="number"&&ht.debug("multiplanarPadPixels must be numeric");const p=parseFloat(`${this.opts.multiplanarPadPixels}`);let m=this.opts.tileMargin;m<0&&(m=2*(2+Math.ceil(Math.max(this.opts.textHeight,.01)*Math.min(this.gl.canvas.height,this.gl.canvas.width))));let v=[this.effectiveCanvasWidth(),this.effectiveCanvasHeight()];this.opts.heroImageFraction>0&&this.opts.heroImageFraction<1&&(u=!1,l=!0,v[0]>v[1]&&this.opts.multiplanarLayout!==3?o[0]=v[0]*this.opts.heroImageFraction:o[1]=v[1]*this.opts.heroImageFraction,v=[v[0]-o[0],v[1]-o[1]]);const g=this.scaleSlice(f[0]+f[1],f[1]+f[2],c(2,2),v),y=Math.max(Math.max(f[1],f[2]),f[0]),x=this.scaleSlice(f[0]+f[0]+f[1],Math.max(f[1],f[2]),c(3,1),v),b=this.scaleSlice(f[0]+f[0]+f[1]+y,Math.max(f[1],f[2]),c(4,1),v),A=this.scaleSlice(y,f[1]+f[2]+f[2],c(1,3),v),S=this.scaleSlice(y,f[1]+f[2]+f[2]+y,c(1,4),v);let C=!d&&(e<2||!t),_=!1,M=!1,T=!1;this.opts.multiplanarLayout===1?_=!0:this.opts.multiplanarLayout===2?M=!0:this.opts.multiplanarLayout===3?T=!0:A[4]>x[4]&&A[4]>g[4]?_=!0:x[4]>g[4]?T=!0:M=!0;let E=g;if(_?(E=A,!l&&(u||this.opts.multiplanarShowRender===2&&S[4]>=A[4])?E=S:C=!1):T&&(E=x,!l&&(u||this.opts.multiplanarShowRender===2&&b[4]>=x[4])?E=b:C=!1),l){const O=o[0]===0?this.effectiveCanvasWidth():o[0],N=o[1]===0?this.effectiveCanvasHeight():o[1];if(((r=this.opts)==null?void 0:r.heroSliceType)===0||((s=this.opts)==null?void 0:s.heroSliceType)===1||((a=this.opts)==null?void 0:a.heroSliceType)===2)this.draw2D([0,0,O,N],this.opts.heroSliceType,NaN,[1/0,1/0]);else{const H=E.slice(),q=this.effectiveCanvasWidth();O===q&&(H[0]=0),this.draw3D([H[0],0,O,N])}E[0]+=o[0],E[1]+=o[1],C=!1}const I=f[0]*E[4]+m,L=f[1]*E[4]+m,F=f[2]*E[4]+m,B=h[0]*E[4],P=h[1]*E[4],z=h[2]*E[4];if(_){if(this.draw2D([E[0],E[1],I,L],0,NaN,[B,P]),this.draw2D([E[0],E[1]+L+p,I,F],1,NaN,[B,z]),this.draw2D([E[0],E[1]+L+p+F+p,L,F],2,NaN,[P,z]),C){const O=y*E[4];this.draw3D([E[0],E[1]+L+F+F+p*3,O,O])}}else if(T){if(this.draw2D([E[0],E[1],I,L],0,NaN,[B,P]),this.draw2D([E[0]+I+p,E[1],I,F],1,NaN,[B,z]),this.draw2D([E[0]+I+I+p*2,E[1],L,F],2,NaN,[P,z]),C){const O=y*E[4];this.draw3D([E[0]+I+I+L+p*3,E[1],O,O])}}else M&&(u||(C=!1),this.opts.multiplanarShowRender===2&&(C=!0),l&&(C=!1),this.draw2D([E[0],E[1]+F+p,I,L],0,NaN,[B,P]),this.draw2D([E[0],E[1],I,F],1,NaN,[B,z]),this.draw2D([E[0]+I+p,E[1],L,F],2,NaN,[P,z]),C&&this.draw3D([E[0]+I+p,E[1]+F+p,L,L]))}}if(this.opts.isRuler&&this.drawRuler(),this.opts.isColorbar&&this.drawColorbar(),t&&this.drawGraph(),this.uiData.isDragging){if(this.uiData.mouseButtonCenterDown){this.dragForCenterButton([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.opts.dragMode===4){this.dragForSlicer3D([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.opts.dragMode===3){this.dragForPanZoom([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0)return;if(this.opts.dragMode===2){this.drawMeasurementTool([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}const o=Math.abs(this.uiData.dragStart[0]-this.uiData.dragEnd[0]),l=Math.abs(this.uiData.dragStart[1]-this.uiData.dragEnd[1]);this.drawSelectionBox([Math.min(this.uiData.dragStart[0],this.uiData.dragEnd[0]),Math.min(this.uiData.dragStart[1],this.uiData.dragEnd[1]),o,l]);return}if(this.opts.clickToSegment){const o=this.mousePos[0],l=this.mousePos[1];if(this.inRenderTile(o,l)>=0)return;const c=this.tileIndex(o,l);if(c>-1){const u=this.screenSlices[c].fovMM,f=this.screenSlices[c].leftTopWidthHeight[2]/u[0],h=this.opts.crosshairColor,p=[h[0],h[1],h[2],.4],m=this.opts.clickToSegmentRadius*f;this.drawCircle([o-m,l-m,m*2,m*2],p,1)}}const i=this.frac2mm([this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2]]);return n=i[0].toFixed(2)+"×"+i[1].toFixed(2)+"×"+i[2].toFixed(2),this.readyForSync=!0,this.sync(),this.drawAnchoredLabels(),n}drawScene(){if(this.isBusy){this.needsRefresh=!0;return}this.isBusy=!1,this.needsRefresh=!1;let n=this.drawSceneCore();return this._gl!==null&&this.gl.finish(),this.needsRefresh&&(n=this.drawScene()),n}get gl(){if(!this._gl)throw new Error("unable to get WebGL context. Maybe the browser doesn't support WebGL2.");return this._gl}set gl(n){this._gl=n}};const Tft="/freehand-3d-us-demo/result/arm_160/video.mp4";ed([hF,yGe,bF,yF,xF,LWe]);function ig(n){return{title:{text:n,left:"center",top:"5%"},tooltip:{trigger:"axis"},legend:{orient:"horizontal",left:"center",top:"80%",data:["IMU-1","IMU-2","IMU-3","IMU-4"]},grid:{left:"3%",right:"4%",bottom:"20%",top:"20%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value"},series:[{name:"IMU-1",type:"line",data:[]},{name:"IMU-2",type:"line",data:[]},{name:"IMU-3",type:"line",data:[]},{name:"IMU-4",type:"line",data:[]}]}}const Eft={components:{VChart:Wre,vue3dLoader:Tae},setup(){Qn("THEME_KEY","light");const n=ae(ig("IMU 加速度 X")),e=ae(ig("IMU 加速度 Y")),t=ae(ig("IMU 加速度 Z")),i=ae(ig("IMU 欧拉角 X")),r=ae(ig("IMU 欧拉角 Y")),s=ae(ig("IMU 欧拉角 Z"));return Mn(async()=>{try{const o=await(await fetch("/freehand-3d-us-demo/result/arm_160/160.json")).json(),l=[];for(let d=0;d<o.imu1.length;d++)l.push(d);n.value.xAxis.data=l,e.value.xAxis.data=l,t.value.xAxis.data=l,i.value.xAxis.data=l,r.value.xAxis.data=l,s.value.xAxis.data=l;for(const[d,f]of["imu1","imu2","imu3","imu4"].entries())n.value.series[d].data=o[f].map(h=>h[0]),e.value.series[d].data=o[f].map(h=>h[1]),t.value.series[d].data=o[f].map(h=>h[2]),i.value.series[d].data=o[f].map(h=>h[3]),r.value.series[d].data=o[f].map(h=>h[4]),s.value.series[d].data=o[f].map(h=>h[5]);const c=new FX;c.attachTo("gl-gt"),c.loadVolumes([{url:"/freehand-3d-us-demo/result/arm_160/160_real.nii.gz"}]);const u=new FX;u.attachTo("gl-pred"),u.loadVolumes([{url:"/freehand-3d-us-demo/result/arm_160/160_fake.nii.gz"}])}catch(a){console.error(a)}}),{option_acc_x:n,option_acc_y:e,option_acc_z:t,option_ang_x:i,option_ang_y:r,option_ang_z:s}}},Ift={class:"element-container"},Dft={class:"element-container"},Rft={class:"element-container"},Pft={class:"element-container"};function Lft(n,e,t,i,r,s){const a=an("el-divider"),o=an("el-row"),l=an("v-chart"),c=an("el-col"),u=an("el-container");return W(),ve("div",null,[_e(a),_e(o,{justify:"center"},{default:Re(()=>e[0]||(e[0]=[be("h1",{class:"section-title"},"示例1（手臂）",-1)])),_:1}),e[5]||(e[5]=be("br",null,null,-1)),_e(o,{justify:"center",class:"equal-height-row",gutter:"20"},{default:Re(()=>[_e(c,{xs:8,sm:8,md:8,lg:8,xl:8},{default:Re(()=>[be("div",Ift,[_e(l,{class:"chart",option:i.option_acc_x,autoresize:""},null,8,["option"]),_e(l,{class:"chart",option:i.option_ang_x,autoresize:""},null,8,["option"])])]),_:1}),_e(c,{xs:8,sm:8,md:8,lg:8,xl:8},{default:Re(()=>[be("div",Dft,[_e(l,{class:"chart",option:i.option_acc_y,autoresize:""},null,8,["option"]),_e(l,{class:"chart",option:i.option_ang_y,autoresize:""},null,8,["option"])])]),_:1}),_e(c,{xs:8,sm:8,md:8,lg:8,xl:8},{default:Re(()=>[be("div",Rft,[_e(l,{class:"chart",option:i.option_acc_z,autoresize:""},null,8,["option"]),_e(l,{class:"chart",option:i.option_ang_z,autoresize:""},null,8,["option"])])]),_:1})]),_:1}),_e(o,{justify:"center",class:"equal-height-row",gutter:"20"},{default:Re(()=>[_e(c,{xs:24,sm:6,md:6,lg:6,xl:6},{default:Re(()=>[e[2]||(e[2]=be("p",{class:"caption"},"超声扫查序列",-1)),be("div",Pft,[_e(u,{class:"video-container"},{default:Re(()=>e[1]||(e[1]=[be("video",{controls:"",muted:"",preload:"",playsinline:""},[be("source",{src:Tft,type:"video/mp4"})],-1)])),_:1})])]),_:1}),_e(c,{xs:24,sm:9,md:9,lg:9,xl:9},{default:Re(()=>e[3]||(e[3]=[be("p",{class:"caption"},"真实重建容积",-1),be("div",{class:"element-container"},[be("canvas",{id:"gl-gt"})],-1)])),_:1}),_e(c,{xs:24,sm:9,md:9,lg:9,xl:9},{default:Re(()=>e[4]||(e[4]=[be("p",{class:"caption"},"预测重建容积",-1),be("div",{class:"element-container"},[be("canvas",{id:"gl-pred"})],-1)])),_:1})]),_:1})])}const kft=Rm(Eft,[["render",Lft],["__scopeId","data-v-b82a3a51"]]);ed([hF,Sre,bF,yF,xF]);const Fft={components:{VChart:Wre,vue3dLoader:Tae},setup(){Qn("THEME_KEY","light")},data(){return{option:{title:{text:"Traffic Sources",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",left:"right",top:"bottom",data:["Direct","Email","Ad Networks","Video Ads","Search Engines"]},series:[{name:"Traffic Sources",type:"pie",radius:"50%",center:["50%","50%"],data:[{value:335,name:"Direct"},{value:310,name:"Email"},{value:234,name:"Ad Networks"},{value:135,name:"Video Ads"},{value:1548,name:"Search Engines"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}},Bft={class:"element-container"},Nft={class:"element-container"},Oft={class:"element-container"},Uft={class:"threed-container"},zft={class:"element-container"};function Vft(n,e,t,i,r,s){const a=an("el-divider"),o=an("el-row"),l=an("el-container"),c=an("el-col"),u=an("v-chart"),d=an("vue3dLoader");return W(),ve("div",null,[_e(a),_e(o,{justify:"center"},{default:Re(()=>e[0]||(e[0]=[be("h1",{class:"section-title"},"示例2（颈动脉）",-1)])),_:1}),e[6]||(e[6]=be("br",null,null,-1)),_e(o,{justify:"center",class:"equal-height-row",gutter:"20"},{default:Re(()=>[_e(c,{xs:24,sm:6,md:6,lg:6,xl:6},{default:Re(()=>[be("div",Bft,[_e(l,{class:"video-container"},{default:Re(()=>e[1]||(e[1]=[be("video",{controls:"",muted:"",preload:"",playsinline:""},[be("source",{src:N7e,type:"video/mp4"})],-1)])),_:1}),e[2]||(e[2]=be("p",{class:"caption"},"超声扫查序列",-1))])]),_:1}),_e(c,{xs:24,sm:6,md:6,lg:6,xl:6},{default:Re(()=>[be("div",Nft,[_e(u,{class:"chart",option:r.option,autoresize:""},null,8,["option"]),e[3]||(e[3]=be("p",{class:"caption"},"IMU测量数据",-1))])]),_:1}),_e(c,{xs:24,sm:6,md:6,lg:6,xl:6},{default:Re(()=>[be("div",Oft,[be("div",Uft,[_e(d,{filePath:"./model3d/obj/male02.obj",mtlPath:"./model3d/obj/male02.mtl",outputEncoding:"sRGB",cameraPosition:{x:0,y:0,z:300},scale:{x:1,y:1,z:1},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},enableDamping:!0,dampingFactor:.05,backgroundColor:"#f2f2f2"})]),e[4]||(e[4]=be("p",{class:"caption"},"真实重建容积",-1))])]),_:1}),_e(c,{xs:24,sm:6,md:6,lg:6,xl:6},{default:Re(()=>[be("div",zft,[_e(d,{filePath:"./model3d/ply/Lucy100k.ply",cameraPosition:{x:100,y:200,z:3e3},scale:{x:1,y:1,z:1},position:{x:100,y:100,z:100},rotation:{x:0,y:3,z:0},enableDamping:!0,dampingFactor:.05,backgroundColor:15658734}),e[5]||(e[5]=be("p",{class:"caption"},"预测重建容积",-1))])]),_:1})]),_:1})])}const Hft=Rm(Fft,[["render",Vft],["__scopeId","data-v-2df88f75"]]),Gft={components:{Title:vke,Introduction:Zlt,Arm1:kft,Carotid1:Hft}};function Wft(n,e,t,i,r,s){const a=an("Title"),o=an("Introduction"),l=an("Arm1"),c=an("Carotid1");return W(),ve(Kt,null,[_e(a),_e(o),_e(l),_e(c)],64)}const qft=Rm(Gft,[["render",Wft]]),Kft={class:"bg"},Yft={class:"footer"},Xft=["href"],jft=["href"],$ft=["href"],Qft=Ie({__name:"Footer",setup(n){const e={Nerfies:"https://github.com/nerfies/nerfies.github.io",Vue:"https://cn.vuejs.org/",Vite:"https://cn.vitejs.dev/",ElementPlus:"https://element-plus.org/zh-CN/",template:"https://github.com/JunyaoHu/academic-project-page-template-vue"};return(t,i)=>{const r=an("el-row"),s=an("el-watermark");return W(),ve("div",Kft,[_e(s,{content:["自由式三维超声重建示例页面"],gap:["60","0"],"z-index":0},{default:Re(()=>[_e(r,{justify:"center"},{default:Re(()=>[be("p",Yft,[i[0]||(i[0]=Hn(" 本页面由 ")),be("a",{href:e.Vue},"Vue",8,Xft),i[1]||(i[1]=Hn("、 ")),be("a",{href:e.Vite},"Vite",8,jft),i[2]||(i[2]=Hn("、 ")),be("a",{href:e.ElementPlus},"Element Plus",8,$ft),i[3]||(i[3]=Hn(" 强力驱动 "))])]),_:1})]),_:1})])}}}),Zft=Rm(Qft,[["__scopeId","data-v-a5b5de63"]]),Jft={components:{Header:dke,Main:qft,Footer:Zft}};function eht(n,e,t,i,r,s){const a=an("Main"),o=an("el-main"),l=an("Footer"),c=an("el-footer"),u=an("el-container"),d=an("el-backtop");return W(),ve("div",null,[_e(u,null,{default:Re(()=>[_e(o,null,{default:Re(()=>[_e(a)]),_:1}),_e(c,null,{default:Re(()=>[_e(l)]),_:1})]),_:1}),_e(d,{right:40,bottom:80})])}const tht=Rm(Jft,[["render",eht]]),zoe=u$(tht);zoe.use(rke);zoe.mount("#app")});export default nht();
